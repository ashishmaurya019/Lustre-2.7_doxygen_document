<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: fld</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>fld</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__fld__target.html">lu_fld_target</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__server__fld.html">lu_server_fld</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__client__fld.html">lu_client_fld</a></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__fld.html#gga900dca9b26de42491763226e12dcd47ba282ea7d84213535e09858482b42f9942">LUSTRE_CLI_FLD_HASH_DHT</a> =  0, 
<a class="el" href="group__fld.html#gga900dca9b26de42491763226e12dcd47ba58e44af518ffc8566e013cd8c4f7b5c4">LUSTRE_CLI_FLD_HASH_RRB</a>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga9b9b539b1ae1fe361f0430409a383db5">fld_server_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld, struct <a class="el" href="structdt__device.html">dt_device</a> *dt, const char *prefix, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#gad8fe90d1d0ee9dfec32bc62d1b8a1be7">fld_server_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga3efa3c7a56f46507051b803063bda783">fld_declare_server_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga7c1be0aa5d0f655c08d1e1810246188b">fld_server_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *add_range, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert FLD index entry and update FLD cache.  <a href="#ga7c1be0aa5d0f655c08d1e1810246188b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#gae8f48350563bdfa8ce96124db14eed9f">fld_insert_entry</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">insert entry in fld store.  <a href="#gae8f48350563bdfa8ce96124db14eed9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga564c5cfc33e401f8dd9c4ede0bd8cd62">fld_server_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld, u64 seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup MDT/OST by seq, returns a range for given seq.  <a href="#ga564c5cfc33e401f8dd9c4ede0bd8cd62"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#gaaebfe53fda6d4c3bb7dfc963bdb19509">fld_local_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld, u64 seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup sequece in local cache/fldb.  <a href="#gaaebfe53fda6d4c3bb7dfc963bdb19509"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#gabc127f61b9b80080cf6305837c232382">fld_update_from_controller</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *fld)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve fldb entry from MDT0 and add to local FLDB and cache.  <a href="#gabc127f61b9b80080cf6305837c232382"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga61d3efa605b8eef01775fbe46b903dc4">fld_client_init</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld, const char *prefix, int hash)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#gad4ee232ae9fa8a05b0c1c5cfabad08a6">fld_client_fini</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga8ef4db802ffc06e9f3e44185d6d75e0c">fld_client_flush</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga78bb601175be76086dae36ff847ed432">fld_client_lookup</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld, u64 seq, u32 *mds, __u32 flags, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#gab88bf60769d34f2e1ace1dc4bd5ef624">fld_client_create</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga4ac8e0a1fb25c661a1b2b8f6099f8ae1">fld_client_delete</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld, u64 seq, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga658da85e5dc251dd63518c88d902dfcc">fld_client_add_target</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld, struct <a class="el" href="structlu__fld__target.html">lu_fld_target</a> *tar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga3e9ddd18dcad3763e124f3da782c9b18">fld_client_del_target</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fld.html#ga72fe7bcae3d9844c63639aab20cb8ecd">fld_client_proc_fini</a> (struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *fld)</td></tr>
</table>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga900dca9b26de42491763226e12dcd47b"></a><!-- doxytag: member="lustre_fld.h::@54" ref="ga900dca9b26de42491763226e12dcd47b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga900dca9b26de42491763226e12dcd47ba282ea7d84213535e09858482b42f9942"></a><!-- doxytag: member="LUSTRE_CLI_FLD_HASH_DHT" ref="gga900dca9b26de42491763226e12dcd47ba282ea7d84213535e09858482b42f9942" args="" -->LUSTRE_CLI_FLD_HASH_DHT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga900dca9b26de42491763226e12dcd47ba58e44af518ffc8566e013cd8c4f7b5c4"></a><!-- doxytag: member="LUSTRE_CLI_FLD_HASH_RRB" ref="gga900dca9b26de42491763226e12dcd47ba58e44af518ffc8566e013cd8c4f7b5c4" args="" -->LUSTRE_CLI_FLD_HASH_RRB</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__fld_8h_source.html#l00061">61</a> of file <a class="el" href="lustre__fld_8h_source.html">lustre_fld.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga658da85e5dc251dd63518c88d902dfcc"></a><!-- doxytag: member="lustre_fld.h::fld_client_add_target" ref="ga658da85e5dc251dd63518c88d902dfcc" args="(struct lu_client_fld *fld, struct lu_fld_target *tar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_client_add_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fld__target.html">lu_fld_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00155">155</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__internal_8h_source.html#l00230">fld_target_name()</a>, <a class="el" href="lustre__fld_8h_source.html#l00067">lu_fld_target::ft_chain</a>, <a class="el" href="lustre__fld_8h_source.html#l00068">lu_fld_target::ft_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00070">lu_fld_target::ft_idx</a>, <a class="el" href="lustre__fld_8h_source.html#l00069">lu_fld_target::ft_srv</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__fld_8h_source.html#l00128">lu_client_fld::lcf_count</a>, <a class="el" href="lustre__fld_8h_source.html#l00132">lu_client_fld::lcf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00140">lu_client_fld::lcf_name</a>, <a class="el" href="lustre__fld_8h_source.html#l00120">lu_client_fld::lcf_targets</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00315">lmv_connect_mdc()</a>.</p>

</div>
</div>
<a class="anchor" id="gab88bf60769d34f2e1ace1dc4bd5ef624"></a><!-- doxytag: member="lustre_fld.h::fld_client_create" ref="gab88bf60769d34f2e1ace1dc4bd5ef624" args="(struct lu_client_fld *fld, struct lu_seq_range *range, const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_client_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga3e9ddd18dcad3763e124f3da782c9b18"></a><!-- doxytag: member="lustre_fld.h::fld_client_del_target" ref="ga3e9ddd18dcad3763e124f3da782c9b18" args="(struct lu_client_fld *fld, __u64 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_client_del_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00201">201</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__fld_8h_source.html#l00067">lu_fld_target::ft_chain</a>, <a class="el" href="lustre__fld_8h_source.html#l00068">lu_fld_target::ft_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00070">lu_fld_target::ft_idx</a>, <a class="el" href="lustre__fld_8h_source.html#l00128">lu_client_fld::lcf_count</a>, <a class="el" href="lustre__fld_8h_source.html#l00132">lu_client_fld::lcf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00120">lu_client_fld::lcf_targets</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ga4ac8e0a1fb25c661a1b2b8f6099f8ae1"></a><!-- doxytag: member="lustre_fld.h::fld_client_delete" ref="ga4ac8e0a1fb25c661a1b2b8f6099f8ae1" args="(struct lu_client_fld *fld, u64 seq, const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_client_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gad4ee232ae9fa8a05b0c1c5cfabad08a6"></a><!-- doxytag: member="lustre_fld.h::fld_client_fini" ref="gad4ee232ae9fa8a05b0c1c5cfabad08a6" args="(struct lu_client_fld *fld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_client_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00333">333</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__cache_8c_source.html#l00093">fld_cache_fini()</a>, <a class="el" href="lustre__fld_8h_source.html#l00067">lu_fld_target::ft_chain</a>, <a class="el" href="lustre__fld_8h_source.html#l00068">lu_fld_target::ft_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00136">lu_client_fld::lcf_cache</a>, <a class="el" href="lustre__fld_8h_source.html#l00128">lu_client_fld::lcf_count</a>, <a class="el" href="lustre__fld_8h_source.html#l00132">lu_client_fld::lcf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00120">lu_client_fld::lcf_targets</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="fld__request_8c_source.html#l00282">fld_client_init()</a>, and <a class="el" href="lmv__obd_8c_source.html#l01395">lmv_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8ef4db802ffc06e9f3e44185d6d75e0c"></a><!-- doxytag: member="lustre_fld.h::fld_client_flush" ref="ga8ef4db802ffc06e9f3e44185d6d75e0c" args="(struct lu_client_fld *fld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_client_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00532">532</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>References <a class="el" href="fld__cache_8c_source.html#l00247">fld_cache_flush()</a>, and <a class="el" href="lustre__fld_8h_source.html#l00136">lu_client_fld::lcf_cache</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00147">lmv_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="ga61d3efa605b8eef01775fbe46b903dc4"></a><!-- doxytag: member="lustre_fld.h::fld_client_init" ref="ga61d3efa605b8eef01775fbe46b903dc4" args="(struct lu_client_fld *fld, const char *prefix, int hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_client_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>hash</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00282">282</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__internal_8h_source.html#l00078">lu_fld_hash::fh_name</a>, <a class="el" href="fld__cache_8c_source.html#l00056">fld_cache_init()</a>, <a class="el" href="fld__internal_8h_source.html#l00133">FLD_CLIENT_CACHE_SIZE</a>, <a class="el" href="fld__internal_8h_source.html#l00141">FLD_CLIENT_CACHE_THRESHOLD</a>, <a class="el" href="fld__request_8c_source.html#l00333">fld_client_fini()</a>, <a class="el" href="fld__request_8c_source.html#l00264">fld_client_proc_init()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="fld__request_8c_source.html#l00277">hash_is_sane()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__fld_8h_source.html#l00136">lu_client_fld::lcf_cache</a>, <a class="el" href="lustre__fld_8h_source.html#l00128">lu_client_fld::lcf_count</a>, <a class="el" href="lustre__fld_8h_source.html#l00124">lu_client_fld::lcf_hash</a>, <a class="el" href="lustre__fld_8h_source.html#l00132">lu_client_fld::lcf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00140">lu_client_fld::lcf_name</a>, <a class="el" href="lustre__fld_8h_source.html#l00120">lu_client_fld::lcf_targets</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01338">lmv_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga78bb601175be76086dae36ff847ed432"></a><!-- doxytag: member="lustre_fld.h::fld_client_lookup" ref="ga78bb601175be76086dae36ff847ed432" args="(struct lu_client_fld *fld, u64 seq, u32 *mds, __u32 flags, const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_client_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&nbsp;</td>
          <td class="paramname"> <em>mds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00465">465</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__cache_8c_source.html#l00437">fld_cache_insert()</a>, <a class="el" href="fld__cache_8c_source.html#l00528">fld_cache_lookup()</a>, <a class="el" href="fld__request_8c_source.html#l00131">fld_client_get_target()</a>, <a class="el" href="fld__request_8c_source.html#l00358">fld_client_rpc()</a>, <a class="el" href="packet-lustre_8c_source.html#l00279">FLD_QUERY</a>, <a class="el" href="seq__range_8h_source.html#l00081">fld_range_set_type()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="fld__internal_8h_source.html#l00230">fld_target_name()</a>, <a class="el" href="lustre__fld_8h_source.html#l00067">lu_fld_target::ft_chain</a>, <a class="el" href="lustre__fld_8h_source.html#l00068">lu_fld_target::ft_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00070">lu_fld_target::ft_idx</a>, <a class="el" href="lustre__fld_8h_source.html#l00069">lu_fld_target::ft_srv</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__fld_8h_source.html#l00136">lu_client_fld::lcf_cache</a>, <a class="el" href="lustre__fld_8h_source.html#l00132">lu_client_fld::lcf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00140">lu_client_fld::lcf_name</a>, <a class="el" href="lustre__fld_8h_source.html#l00120">lu_client_fld::lcf_targets</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__fld_8c_source.html#l00056">lmv_fld_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga72fe7bcae3d9844c63639aab20cb8ecd"></a><!-- doxytag: member="lustre_fld.h::fld_client_proc_fini" ref="ga72fe7bcae3d9844c63639aab20cb8ecd" args="(struct lu_client_fld *fld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_client_proc_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__client__fld.html">lu_client_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__request_8c_source.html#l00269">269</a> of file <a class="el" href="fld__request_8c_source.html">fld_request.c</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l02707">lmv_precleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3efa3c7a56f46507051b803063bda783"></a><!-- doxytag: member="lustre_fld.h::fld_declare_server_create" ref="ga3efa3c7a56f46507051b803063bda783" args="(const struct lu_env *env, struct lu_server_fld *fld, const struct lu_seq_range *range, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_declare_server_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00076">76</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="fld__index_8c_source.html#l00086">fld_declare_index_create()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fid__store_8c_source.html#l00105">seq_store_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gae8f48350563bdfa8ce96124db14eed9f"></a><!-- doxytag: member="lustre_fld.h::fld_insert_entry" ref="gae8f48350563bdfa8ce96124db14eed9f" args="(const struct lu_env *env, struct lu_server_fld *fld, const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_insert_entry </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>insert entry in fld store. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>relevant <a class="el" href="structlu__env.html" title="Environment.">lu_env</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fld</em>&nbsp;</td><td>fld store </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>range</em>&nbsp;</td><td>range to be inserted</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>error</td></tr>
  </table>
  </dd>
</dl>
<p>Caller must hold fld-&gt;lsf_lock </p>

<p>Definition at line <a class="el" href="fld__index_8c_source.html#l00273">273</a> of file <a class="el" href="fld__index_8c_source.html">fld_index.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__index_8c_source.html#l00086">fld_declare_index_create()</a>, <a class="el" href="fld__index_8c_source.html#l00160">fld_index_create()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lustre__fld_8h_source.html#l00093">lu_server_fld::lsf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00080">lu_server_fld::lsf_obj</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__index_8c_source.html#l00308">fld_insert_special_entries()</a>, <a class="el" href="fld__handler_8c_source.html#l00128">fld_update_from_controller()</a>, and <a class="el" href="fid__handler_8c_source.html#l00275">seq_server_check_and_alloc_super()</a>.</p>

</div>
</div>
<a class="anchor" id="gaaebfe53fda6d4c3bb7dfc963bdb19509"></a><!-- doxytag: member="lustre_fld.h::fld_local_lookup" ref="gaaebfe53fda6d4c3bb7dfc963bdb19509" args="(const struct lu_env *env, struct lu_server_fld *fld, u64 seq, struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_local_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lookup sequece in local cache/fldb. </p>

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00205">205</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__cache_8c_source.html#l00528">fld_cache_lookup()</a>, <a class="el" href="seq__range_8h_source.html#l00072">fld_range_is_any()</a>, <a class="el" href="seq__range_8h_source.html#l00043">fld_range_type()</a>, <a class="el" href="fld__index_8c.html#a12f28dd47191e9bf4638da40f3790c68">fld_thread_key</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lustre__fld_8h_source.html#l00089">lu_server_fld::lsf_cache</a>, <a class="el" href="lustre__fld_8h_source.html#l00097">lu_server_fld::lsf_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l02619">osd_fld_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7c1be0aa5d0f655c08d1e1810246188b"></a><!-- doxytag: member="lustre_fld.h::fld_server_create" ref="ga7c1be0aa5d0f655c08d1e1810246188b" args="(const struct lu_env *env, struct lu_server_fld *fld, const struct lu_seq_range *add_range, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_server_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert FLD index entry and update FLD cache. </p>
<p>This function is called from the sequence allocator when a super-sequence is granted to a server. </p>

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00094">94</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="fld__index_8c_source.html#l00160">fld_index_create()</a>, <a class="el" href="lustre__fld_8h_source.html#l00093">lu_server_fld::lsf_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fid__store_8c_source.html#l00105">seq_store_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gad8fe90d1d0ee9dfec32bc62d1b8a1be7"></a><!-- doxytag: member="lustre_fld.h::fld_server_fini" ref="gad8fe90d1d0ee9dfec32bc62d1b8a1be7" args="(const struct lu_env *env, struct lu_server_fld *fld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_server_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00487">487</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__cache_8c_source.html#l00093">fld_cache_fini()</a>, <a class="el" href="fld__index_8c_source.html#l00446">fld_index_fini()</a>, <a class="el" href="fld__handler_8c_source.html#l00437">fld_server_proc_fini()</a>, and <a class="el" href="lustre__fld_8h_source.html#l00089">lu_server_fld::lsf_cache</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03874">mdt_fld_fini()</a>, and <a class="el" href="ofd__fs_8c_source.html#l00283">ofd_fld_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9b9b539b1ae1fe361f0430409a383db5"></a><!-- doxytag: member="lustre_fld.h::fld_server_init" ref="ga9b9b539b1ae1fe361f0430409a383db5" args="(const struct lu_env *env, struct lu_server_fld *fld, struct dt_device *dt, const char *prefix, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_server_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00443">443</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__cache_8c_source.html#l00093">fld_cache_fini()</a>, <a class="el" href="fld__cache_8c_source.html#l00056">fld_cache_init()</a>, <a class="el" href="fld__index_8c_source.html#l00446">fld_index_fini()</a>, <a class="el" href="fld__index_8c_source.html#l00326">fld_index_init()</a>, <a class="el" href="fld__internal_8h_source.html#l00130">FLD_SERVER_CACHE_SIZE</a>, <a class="el" href="fld__internal_8h_source.html#l00138">FLD_SERVER_CACHE_THRESHOLD</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="fld__handler_8c_source.html#l00432">fld_server_proc_init()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__fld_8h_source.html#l00089">lu_server_fld::lsf_cache</a>, <a class="el" href="lustre__fld_8h_source.html#l00085">lu_server_fld::lsf_control_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00093">lu_server_fld::lsf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00097">lu_server_fld::lsf_name</a>, <a class="el" href="structlu__server__fld.html#af5b50bd0685dbc4d18ba3b33b337e2cc">lu_server_fld::lsf_seq_lookup</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03889">mdt_fld_init()</a>, and <a class="el" href="ofd__fs_8c_source.html#l00449">ofd_fld_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga564c5cfc33e401f8dd9c4ede0bd8cd62"></a><!-- doxytag: member="lustre_fld.h::fld_server_lookup" ref="ga564c5cfc33e401f8dd9c4ede0bd8cd62" args="(const struct lu_env *env, struct lu_server_fld *fld, u64 seq, struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_server_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lookup MDT/OST by seq, returns a range for given seq. </p>
<p>If that entry is not cached in fld cache, request is sent to super sequence controller node (MDT0). All other MDT[1...N] and client cache fld entries, but this cache is not persistent. </p>

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00241">241</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__cache_8c_source.html#l00437">fld_cache_insert()</a>, <a class="el" href="fld__request_8c_source.html#l00358">fld_client_rpc()</a>, <a class="el" href="fld__handler_8c_source.html#l00205">fld_local_lookup()</a>, <a class="el" href="fld__handler_8c_source.html#l00110">fld_name_to_index()</a>, <a class="el" href="packet-lustre_8c_source.html#l00279">FLD_QUERY</a>, <a class="el" href="lustre__disk_8h_source.html#l00080">LDD_F_SV_TYPE_MDT</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__fld_8h_source.html#l00089">lu_server_fld::lsf_cache</a>, <a class="el" href="lustre__fld_8h_source.html#l00085">lu_server_fld::lsf_control_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00097">lu_server_fld::lsf_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00973">fid_is_for_ostobj()</a>, <a class="el" href="fld__request_8c_source.html#l00465">fld_client_lookup()</a>, <a class="el" href="fld__handler_8c_source.html#l00286">fld_handle_lookup()</a>, <a class="el" href="fld__handler_8c_source.html#l00443">fld_server_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05696">lfsck_fid_match_idx()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00526">lfsck_find_mdt_idx_by_fid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03789">lfsck_layout_slave_check_pairs()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lod__dev_8c_source.html#l00121">lod_fld_lookup()</a>, and <a class="el" href="mdd__dir_8c_source.html#l04091">mdd_fld_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="gabc127f61b9b80080cf6305837c232382"></a><!-- doxytag: member="lustre_fld.h::fld_update_from_controller" ref="gabc127f61b9b80080cf6305837c232382" args="(const struct lu_env *env, struct lu_server_fld *fld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_update_from_controller </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__fld.html">lu_server_fld</a> *&nbsp;</td>
          <td class="paramname"> <em>fld</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve fldb entry from MDT0 and add to local FLDB and cache. </p>

<p>Definition at line <a class="el" href="fld__handler_8c_source.html#l00128">128</a> of file <a class="el" href="fld__handler_8c_source.html">fld_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__request_8c_source.html#l00358">fld_client_rpc()</a>, <a class="el" href="fld__index_8c_source.html#l00273">fld_insert_entry()</a>, <a class="el" href="fld__handler_8c_source.html#l00110">fld_name_to_index()</a>, <a class="el" href="seq__range_8h_source.html#l00091">fld_range_set_mdt()</a>, <a class="el" href="lustre__idl_8h_source.html#l02702">FLD_READ</a>, <a class="el" href="fld__index_8c.html#a12f28dd47191e9bf4638da40f3790c68">fld_thread_key</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lustre__fld_8h_source.html#l00085">lu_server_fld::lsf_control_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00093">lu_server_fld::lsf_lock</a>, <a class="el" href="lustre__fld_8h_source.html#l00097">lu_server_fld::lsf_name</a>, <a class="el" href="lustre__fld_8h_source.html#l00109">lu_server_fld::lsf_new</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00161">lu_seq_range_array::lsra_count</a>, <a class="el" href="lustre__idl_8h_source.html#l00163">lu_seq_range_array::lsra_lsr</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l00166">LU_SEQ_RANGE_MDT</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="lustre__fid_8h_source.html#l00807">range_array_le_to_cpu()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00865">RMF_GENERIC_DATA</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03710">mdt_register_lwp_callback()</a>, and <a class="el" href="ofd__fs_8c_source.html#l00483">ofd_register_lwp_callback()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
