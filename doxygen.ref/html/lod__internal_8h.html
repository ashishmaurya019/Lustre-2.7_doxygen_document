<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lod/lod_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lod/lod_internal.h File Reference</h1><code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__cfg_8h_source.html">lustre_cfg.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>

<p><a href="lod__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__qos__rr.html">lod_qos_rr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpool__desc.html">pool_desc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__qos.html">lod_qos</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__qos__oss.html">lod_qos_oss</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structltd__qos.html">ltd_qos</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__tgt__desc__idx.html">lod_tgt_desc_idx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__device.html">lod_device</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__dir__stripe__info.html">lod_dir_stripe_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__object.html">lod_object</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__it.html">lod_it</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlod__thread__info.html">lod_thread_info</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#af25bdfaaaaef439aeea39aa53f9451a5">LOV_USES_ASSIGNED_STRIPE</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a4f176cde61427f0e393b90fe928fe9bf">LOV_USES_DEFAULT_STRIPE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aa30f202d795375205a76f9715c43084a">LOVEA_DELETE_VALUES</a>(<a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, count, offset, pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a92ee656a424353aa91be560a9ee1b713">LMVEA_DELETE_VALUES</a>(count, offset)&nbsp;&nbsp;&nbsp;((count) == 0 &amp;&amp; (offset) == (typeof(offset))(-1))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a658b3bb7fa3fd489a149793035078f47">LOV_OFFSET_DEFAULT</a>&nbsp;&nbsp;&nbsp;((__u16)-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab51e46eaa2bd2f3e0f3a1c47c5f78cb5">pool_tgt_size</a>(p)&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ae822a98627ba236ff5909a9f10a60359">pool_tgt_count</a>(p)&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a440def12dace3c42ca8e3624d900a45b">pool_tgt_array</a>(p)&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_array)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a1a950bea7090a45731d9cef2e9a4d90c">pool_tgt_rw_sem</a>(p)&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_rw_sem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a117afde0fc9f7138bf657a5f3e70f00f">TGT_PTRS</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6f54ff6e890afe3f22f8feb22f7ce69a">TGT_PTRS_PER_BLOCK</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a68755c6d07e8549b6e13e74ab4b85d34">LTD_TGT</a>(ltd, index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a48a72349146d5033ba67b2f2326a3e44">OST_TGT</a>(lod, index)&nbsp;&nbsp;&nbsp;LTD_TGT(&amp;lod-&gt;lod_ost_descs, index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a760e67e187b0abfb2c0d3e455cac224e">MDT_TGT</a>(lod, index)&nbsp;&nbsp;&nbsp;LTD_TGT(&amp;lod-&gt;lod_mdt_descs, index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3b9fc3e6020aaf21adee2ad2de72514d">lod_osts</a>&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgts</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ac2e4c42641865882ce73976e699bbfa4">lod_ost_bitmap</a>&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgt_bitmap</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a53655ebb91485d951eef15a70780072a">lod_ostnr</a>&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgtnr</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6f93e28627692c2706d98022ff13e262">lod_osts_size</a>&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgts_size</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a4f9d0d19bac368665c6824505d212f1f">ltd_ost</a>&nbsp;&nbsp;&nbsp;ltd_tgt</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a5d9a159e2d57c65ff5de3722ac100755">lod_ost_desc</a>&nbsp;&nbsp;&nbsp;<a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#accc463cbb68b188c2cfe9018f4b7954e">lod_mdts</a>&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgts</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ae83ce3678f3f0b449592c5ec16b714e8">lod_mdt_bitmap</a>&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgt_bitmap</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a2a93a27b3bb2695399796406b089d890">lod_remote_mdt_count</a>&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgtnr</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a0c807fae584d33e6bcd710f6ef47fd2a">lod_mdts_size</a>&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgts_size</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab9e78945d530e7466f7a895ae7cf984e">ltd_mdt</a>&nbsp;&nbsp;&nbsp;ltd_tgt</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a8299f695cdb63b7d1489375b640b825e">lod_mdt_desc</a>&nbsp;&nbsp;&nbsp;<a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a001c7b8f75a9c1ccaccceb2cbe77e80e">ldo_dir_stripe_offset</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_stripe_offset</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3c489ac8cb1a5916d09039c841b4fe6e">ldo_dir_def_stripenr</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_stripenr</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a0ffaa9119639a7fe3a8f755eceb8f0ea">ldo_dir_hash_type</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_hash_type</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aef3fe703bca13759992d72af60e1e377">ldo_dir_def_hash_type</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_hash_type</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a7ffe5552c05814dacdeb6217b97b02d4">ldo_dir_striped</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_striped</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a67e58e613975f05d4c8f2fcb5da6f012">ldo_dir_def_striping_set</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_striping_set</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a789034a569c962dda5b4b7b7353dfdd6">ldo_dir_def_striping_cached</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_striping_cached</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a8976b784f7e84f7e8d67ea1a81314fe3">ldo_dir_def_stripe_offset</a>&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_stripe_offset</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a299d1375e60fd8b950f3f8bace168550">lod_foreach_ost</a>(__dev, index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#abcdd6aeb49fc12e11b9eec723677e2a7">lod_foreach_mdt</a>(mdt_dev, index)&nbsp;&nbsp;&nbsp;cfs_foreach_bit((mdt_dev)-&gt;lod_mdt_bitmap, (index))</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a09e2ed5fd9864a23c865b236f6eda24c">lu_device_is_lod</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a463d5c14687298675a09ddb5b0a6a22b">lu2lod_dev</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3d908195e868e0757649dc317e185578">lod2lu_dev</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a01b00b386e3e8780856608cf667d2e9a">lod2obd</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a8240c74ed7979543caf87fd387d3605c">dt2lod_dev</a> (struct <a class="el" href="structdt__device.html">dt_device</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#afd1c6a189e348c0a71e2ea68e7742f2e">lu2lod_obj</a> (struct <a class="el" href="structlu__object.html">lu_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__object.html">lu_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3a471819dd3e9e3894c49d7cae7ea52b">lod2lu_obj</a> (struct <a class="el" href="structlod__object.html">lod_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6c9f4ec3be3231aa1894077607d1f275">lod_obj</a> (const struct <a class="el" href="structlu__object.html">lu_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a565af531f112c9ad1e9f94bf4a338a80">lod_dt_obj</a> (const struct <a class="el" href="structdt__object.html">dt_object</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a00624f0b4db83fdb216485951c68152b">lod_object_child</a> (struct <a class="el" href="structlod__object.html">lod_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlod__thread__info.html">lod_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a69356c6c5ddf523ef0660f3f7b838b5a">lod_env_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#abfc6149d68f9379f7915fd7e659296df">lod_name_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const void *area, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a563e47dbc609a655ff68d76b2fd62110">lod_fld_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__device.html">lod_device</a> *lod, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, __u32 *tgt, int *flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a580407458bfd72d5fde4a151dcb2e42f">lod_sub_init_llog</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__device.html">lod_device</a> *lod, struct <a class="el" href="structdt__device.html">dt_device</a> *dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Init sub llog context.  <a href="#a580407458bfd72d5fde4a151dcb2e42f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a4d4f051722ccdd8cd00ba9ec986dfc67">lod_sub_fini_llog</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dt, struct <a class="el" href="structptlrpc__thread.html">ptlrpc_thread</a> *<a class="el" href="obd_8c.html#a20057145635eb007e0621c11bc2d7176">thread</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">finish sub llog context  <a href="#a4d4f051722ccdd8cd00ba9ec986dfc67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a18aec61bfeeaf9843029b0b96b701be2">lodname2mdt_index</a> (char *lodname, __u32 *mdt_index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extract MDT target index from a device name.  <a href="#a18aec61bfeeaf9843029b0b96b701be2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aa9ce4cf9ed012a300938f6c637618c01">lod_getref</a> (struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *ltd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Increase reference count on the target table.  <a href="#aa9ce4cf9ed012a300938f6c637618c01"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab3950998e92e7107b04fdb3866a20f6a">lod_putref</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *lod, struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *ltd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decrease reference count on the target table.  <a href="#ab3950998e92e7107b04fdb3866a20f6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a63cfaa8b352c9616b6bd143d21c10708">lod_add_device</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__device.html">lod_device</a> *lod, char *osp, unsigned index, unsigned gen, int mdt_index, char *type, int active)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connect LOD to a new OSP and add it to the target table.  <a href="#a63cfaa8b352c9616b6bd143d21c10708"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aa568d1f98a1c3293cb72055df6efe3f8">lod_del_device</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__device.html">lod_device</a> *lod, struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *ltd, char *osp, unsigned idx, unsigned gen, bool for_ost)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove device by name.  <a href="#aa568d1f98a1c3293cb72055df6efe3f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab40a9a7f036ba2a86395fb48e58782e0">lod_fini_tgt</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__device.html">lod_device</a> *lod, struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *ltd, bool for_ost)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedule removal of all the targets from the given target table.  <a href="#ab40a9a7f036ba2a86395fb48e58782e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aae9716d83d5fcb58fdf4bd301edcf8d5">lod_load_striping_locked</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the object representing the stripes.  <a href="#aae9716d83d5fcb58fdf4bd301edcf8d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aeb3e638f8e7af103ed375a00d4ca0517">lod_load_striping</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A generic function to initialize the stripe objects.  <a href="#aeb3e638f8e7af103ed375a00d4ca0517"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ae87953a19c720b63ed8d7f8c6b8ac057">lod_get_ea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get LOV EA.  <a href="#ae87953a19c720b63ed8d7f8c6b8ac057"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a4e6266eac2f57c6a232e1f3f7a3191e1">lod_get_lov_ea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3d0d71ffb20d581386b9a24c8a18718d">lod_get_lmv_ea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ad6dea0bffc045c14eb1f492c68d2c50a">lod_get_default_lmv_ea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ad7086b5a80ae5841bb28c91ce9527061">lod_fix_desc</a> (struct <a class="el" href="structlov__desc.html">lov_desc</a> *desc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to fix insane default striping.  <a href="#ad7086b5a80ae5841bb28c91ce9527061"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a2f99f720a942429c77344378e3d1a816">lod_fix_desc_qos_maxage</a> (__u32 *val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a80c109143634c3b4e91d6b69ee9e7cf3">lod_fix_desc_pattern</a> (__u32 *val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a5e02a5fd069a2f3af7ed486c0ae6a59a">lod_fix_desc_stripe_count</a> (__u32 *val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3e918ac8530fb534d7fe7cf4d744a00c">lod_fix_desc_stripe_size</a> (<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#abb7a7cf4ced18e76886afed97d33af10">lod_pools_init</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *m, struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the structures used to store pools and default striping.  <a href="#abb7a7cf4ced18e76886afed97d33af10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab5cd614625a56198ac4b366f0e7daf80">lod_pools_fini</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *m)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release the structures describing the pools.  <a href="#ab5cd614625a56198ac4b366f0e7daf80"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a299907b294d1ac30fd0658e804d31b5b">lod_parse_striping</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *mo, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate objects for striping.  <a href="#a299907b294d1ac30fd0658e804d31b5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a7620fcaabad269124cea08babc83e70a">lod_parse_dir_striping</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create in-core represenation for a striped directory.  <a href="#a7620fcaabad269124cea08babc83e70a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ae70e38d68743af24c0f157230e281a38">lod_initialize_objects</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *mo, struct <a class="el" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *objs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate objects for stripes.  <a href="#ae70e38d68743af24c0f157230e281a38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ad2fed6443561c5eb1930fe417b652190">lod_verify_striping</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *d, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, bool is_from_disk)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify striping.  <a href="#ad2fed6443561c5eb1930fe417b652190"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a96fc753d4deb1e6ac8895900f7ac0916">lod_generate_and_set_lovea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *mo, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make LOV EA for striped object.  <a href="#a96fc753d4deb1e6ac8895900f7ac0916"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aabaf0528074a96b37d8e0f07db269fce">lod_ea_store_resize</a> (struct <a class="el" href="structlod__thread__info.html">lod_thread_info</a> *info, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resize per-thread storage to hold specified size.  <a href="#aabaf0528074a96b37d8e0f07db269fce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a62f8ccafd2a84d0276f4ce68e199034b">lod_ost_pool_add</a> (struct <a class="el" href="structost__pool.html">ost_pool</a> *<a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, __u32 idx, unsigned int min_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a new target to an existing pool.  <a href="#a62f8ccafd2a84d0276f4ce68e199034b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#adb9e2dc6c66aaf4d7c42c8de2b79c104">lod_ost_pool_remove</a> (struct <a class="el" href="structost__pool.html">ost_pool</a> *<a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, __u32 idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove an existing pool from the system.  <a href="#adb9e2dc6c66aaf4d7c42c8de2b79c104"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#adbc089920b13fc4cea3cb470319a6b0f">lod_ost_pool_extend</a> (struct <a class="el" href="structost__pool.html">ost_pool</a> *<a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, unsigned int min_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Increase the op_array size to hold more targets in this pool.  <a href="#adbc089920b13fc4cea3cb470319a6b0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpool__desc.html">pool_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a286e56927560983374c2f7b9224feda2">lod_find_pool</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *lod, char *<a class="el" href="llapi__layout__test_8c.html#a9d096844ad7d6672fe415306cd352062">poolname</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the pool descriptor for the specified pool and return it with a reference to the caller if found.  <a href="#a286e56927560983374c2f7b9224feda2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a1c485560de66ce4213ead25955446b17">lod_pool_putref</a> (struct <a class="el" href="structpool__desc.html">pool_desc</a> *pool)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Drop a reference on the specified pool and free its memory if needed.  <a href="#a1c485560de66ce4213ead25955446b17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a621d46b5a406a380656cd36827fd1fe2">lod_ost_pool_free</a> (struct <a class="el" href="structost__pool.html">ost_pool</a> *<a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free the pool after it was emptied and removed from /proc.  <a href="#a621d46b5a406a380656cd36827fd1fe2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6275dc528c9d9e9e83e762bc650bd75f">lod_pool_del</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *<a class="el" href="llapi__layout__test_8c.html#a9d096844ad7d6672fe415306cd352062">poolname</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the named pool from the OBD device.  <a href="#a6275dc528c9d9e9e83e762bc650bd75f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aeebb7bbfebfd5aa9155e5f886f7a9b54">lod_ost_pool_init</a> (struct <a class="el" href="structost__pool.html">ost_pool</a> *<a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, unsigned int count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a4e717f312def8139f51af44c17a9afd5">lod_check_index_in_pool</a> (__u32 idx, struct <a class="el" href="structpool__desc.html">pool_desc</a> *pool)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if the specified target exists in the pool.  <a href="#a4e717f312def8139f51af44c17a9afd5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ac6fc44bfd045a27ab59c17185443c46a">lod_pool_new</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *<a class="el" href="llapi__layout__test_8c.html#a9d096844ad7d6672fe415306cd352062">poolname</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate a new pool for the specified device.  <a href="#ac6fc44bfd045a27ab59c17185443c46a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a0cab6622ab68dbb7af618ea38d371403">lod_pool_add</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *<a class="el" href="llapi__layout__test_8c.html#a9d096844ad7d6672fe415306cd352062">poolname</a>, char *ostname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a single target device to the named pool.  <a href="#a0cab6622ab68dbb7af618ea38d371403"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a84ae23967718a25e3168650a991f65c9">lod_pool_remove</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *<a class="el" href="llapi__layout__test_8c.html#a9d096844ad7d6672fe415306cd352062">poolname</a>, char *ostname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the named target from the specified pool.  <a href="#a84ae23967718a25e3168650a991f65c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a8f23abfd59d0b5ed5e6240f02f34a898">lod_qos_prep_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a striping for an obejct.  <a href="#a8f23abfd59d0b5ed5e6240f02f34a898"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a44fec5e7e372cc69a6ff756c9c6a8347">qos_add_tgt</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *, struct <a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a new target to Quality of Service (QoS) target table.  <a href="#a44fec5e7e372cc69a6ff756c9c6a8347"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab78befa6e3d805c85bfe5657e342195f">qos_del_tgt</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *, struct <a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove OST target from QoS table.  <a href="#ab78befa6e3d805c85bfe5657e342195f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a5fb30590b55854931da51ad522e6014f">lod_qos_rr_init</a> (struct <a class="el" href="structlod__qos__rr.html">lod_qos_rr</a> *lqr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aa1423de5ddcf0377e6fcce6bd85cf936">lod_procfs_init</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *lod)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ae6724d20204fb807ac210a407aa84e08">lod_procfs_fini</a> (struct <a class="el" href="structlod__device.html">lod_device</a> *lod)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a704f7166957c411a3a62b268f0f40f8b">lod_load_lmv_shards</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo, struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, bool resize)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append the FID for each shard of the striped directory after the given LMV EA header.  <a href="#a704f7166957c411a3a62b268f0f40f8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a512c575080504425dbdbfd0b2db9765f">lod_object_set_pool</a> (struct <a class="el" href="structlod__object.html">lod_object</a> *o, char *pool)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a pool the object belongs to.  <a href="#a512c575080504425dbdbfd0b2db9765f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#af28b9aacfb3e44c1374d8dbdfbde74d5">lod_declare_striped_object</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *lovea, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare creation of striped object.  <a href="#af28b9aacfb3e44c1374d8dbdfbde74d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab4f6d91acb376f565220d7c804f1a230">lod_striping_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creation of a striped regular object.  <a href="#ab4f6d91acb376f565220d7c804f1a230"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a3bd90d51c3b31f70277187f7c1846d10">lod_object_free_striping</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__object.html">lod_object</a> *lo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release resources associated with striping.  <a href="#a3bd90d51c3b31f70277187f7c1846d10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a602bb9ef718f1af0dce98986a2304520">lod_sub_get_thandle</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, const struct <a class="el" href="structdt__object.html">dt_object</a> *sub_obj, bool *record_update)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a0567c0d0eece690fccbcb6518978bf4d">lod_sub_object_declare_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare sub-object creation.  <a href="#a0567c0d0eece690fccbcb6518978bf4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a81a2b20c2756dc4d398643f35aaa9725">lod_sub_object_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create sub-object.  <a href="#a81a2b20c2756dc4d398643f35aaa9725"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#aa33759a905c97c58f9f95ec02881aa5a">lod_sub_object_declare_ref_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare adding reference for the sub-object.  <a href="#aa33759a905c97c58f9f95ec02881aa5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6cc276e67b1a6d0443c51a98bcfe9b95">lod_sub_object_ref_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add reference for the sub-object.  <a href="#a6cc276e67b1a6d0443c51a98bcfe9b95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ac611a84f2d5d36ce55b2dc1cf5f6ea51">lod_sub_object_declare_ref_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare deleting reference for the sub-object.  <a href="#ac611a84f2d5d36ce55b2dc1cf5f6ea51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a2c8a954c1f626dfc3b5806999e86eaaa">lod_sub_object_ref_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete reference for the sub-object.  <a href="#a2c8a954c1f626dfc3b5806999e86eaaa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a98c09eacf051a0f9009c4c4fe357fc81">lod_sub_object_declare_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare destroying sub-object.  <a href="#a98c09eacf051a0f9009c4c4fe357fc81"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a7b4d4e0b66ecd010edb61636b5ed64f5">lod_sub_object_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy sub-object.  <a href="#a7b4d4e0b66ecd010edb61636b5ed64f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a987502925db8578d18c6ae334c148068">lod_sub_object_declare_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare sub-object index insert.  <a href="#a987502925db8578d18c6ae334c148068"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a5f685cb685e3eb5b2d4eef623360416a">lod_sub_object_index_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th, int ign)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert index of sub object.  <a href="#a5f685cb685e3eb5b2d4eef623360416a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ace40f3f5153ec353827b14ab0a687d6f">lod_sub_object_declare_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare sub-object index delete.  <a href="#ace40f3f5153ec353827b14ab0a687d6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a94eeffa26d074c3f8e944ee0b73be7ba">lod_sub_object_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete index of sub object.  <a href="#a94eeffa26d074c3f8e944ee0b73be7ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6f10b89c8151db2fa889ee2a67cf19f5">lod_sub_object_declare_xattr_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int fl, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare xattr_set.  <a href="#a6f10b89c8151db2fa889ee2a67cf19f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a002e36508032e49f98b44386dca5ffa6">lod_sub_object_xattr_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int fl, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set xattr.  <a href="#a002e36508032e49f98b44386dca5ffa6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#af58ee0c8b5e542e99f2b3eaabc14182b">lod_sub_object_declare_attr_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare attr_set.  <a href="#af58ee0c8b5e542e99f2b3eaabc14182b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ad327f3b22f1132764a98b3370832dcac">lod_sub_object_attr_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">attributes set  <a href="#ad327f3b22f1132764a98b3370832dcac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ab4ecb771703c63d6aef1b06c6bee02b7">lod_sub_object_declare_xattr_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare xattr_del.  <a href="#ab4ecb771703c63d6aef1b06c6bee02b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ad19c3535bc4becc8ff47596f7fe1e59b">lod_sub_object_xattr_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">xattribute deletion  <a href="#ad19c3535bc4becc8ff47596f7fe1e59b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a00516d81e357fe00aa387b6e75178806">lod_sub_object_declare_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, loff_t pos, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare buffer write.  <a href="#a00516d81e357fe00aa387b6e75178806"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a5cc285040faf5c4dc9374ab9d7a7f86a">lod_sub_object_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, loff_t *pos, struct <a class="el" href="structthandle.html">thandle</a> *th, int rq)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write buffer to sub object.  <a href="#a5cc285040faf5c4dc9374ab9d7a7f86a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#abc13dc2b5b72d3e52c9f8717ec873784">lod_sub_object_declare_punch</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> end, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare punch.  <a href="#abc13dc2b5b72d3e52c9f8717ec873784"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#ad95c6ca512c654c0a33ae76656699b69">lod_sub_object_punch</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> end, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Punch to sub object.  <a href="#ad95c6ca512c654c0a33ae76656699b69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a1c971b075f3c4df99ec4e4df1030f200">lod_sub_prep_llog</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlod__device.html">lod_device</a> *lod, struct <a class="el" href="structdt__device.html">dt_device</a> *dt, int index)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__device__operations.html">lu_device_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a72093e53bdf476ef11cc91965a07991f">lod_lu_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__context__key.html">lu_context_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a19d20b5ced2d424fce13df56975e68ca">lod_thread_key</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a20d9d14ad2c941c7f89468ffa4045273">lod_object_kmem</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a482f6f8430424db32b75a1344cb3eaea">pool_hash_operations</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__object__operations.html">dt_object_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a93f1c48472664a89401155982eb10a23">lod_obj_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__object__operations.html">lu_object_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lod__internal_8h.html#a6f488be9b0758b51bdf27d673712bc6b">lod_lu_obj_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aef3fe703bca13759992d72af60e1e377"></a><!-- doxytag: member="lod_internal.h::ldo_dir_def_hash_type" ref="aef3fe703bca13759992d72af60e1e377" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_def_hash_type&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_hash_type</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00276">276</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8976b784f7e84f7e8d67ea1a81314fe3"></a><!-- doxytag: member="lod_internal.h::ldo_dir_def_stripe_offset" ref="a8976b784f7e84f7e8d67ea1a81314fe3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_def_stripe_offset&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_stripe_offset</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00280">280</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3c489ac8cb1a5916d09039c841b4fe6e"></a><!-- doxytag: member="lod_internal.h::ldo_dir_def_stripenr" ref="a3c489ac8cb1a5916d09039c841b4fe6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_def_stripenr&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_stripenr</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00274">274</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a789034a569c962dda5b4b7b7353dfdd6"></a><!-- doxytag: member="lod_internal.h::ldo_dir_def_striping_cached" ref="a789034a569c962dda5b4b7b7353dfdd6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_def_striping_cached&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_striping_cached</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00279">279</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a67e58e613975f05d4c8f2fcb5da6f012"></a><!-- doxytag: member="lod_internal.h::ldo_dir_def_striping_set" ref="a67e58e613975f05d4c8f2fcb5da6f012" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_def_striping_set&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_def_striping_set</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00278">278</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0ffaa9119639a7fe3a8f755eceb8f0ea"></a><!-- doxytag: member="lod_internal.h::ldo_dir_hash_type" ref="a0ffaa9119639a7fe3a8f755eceb8f0ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_hash_type&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_hash_type</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00275">275</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a001c7b8f75a9c1ccaccceb2cbe77e80e"></a><!-- doxytag: member="lod_internal.h::ldo_dir_stripe_offset" ref="a001c7b8f75a9c1ccaccceb2cbe77e80e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_stripe_offset&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_stripe_offset</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00273">273</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7ffe5552c05814dacdeb6217b97b02d4"></a><!-- doxytag: member="lod_internal.h::ldo_dir_striped" ref="a7ffe5552c05814dacdeb6217b97b02d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldo_dir_striped&nbsp;&nbsp;&nbsp;ldo_dir_stripe-&gt;ldsi_striped</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00277">277</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a92ee656a424353aa91be560a9ee1b713"></a><!-- doxytag: member="lod_internal.h::LMVEA_DELETE_VALUES" ref="a92ee656a424353aa91be560a9ee1b713" args="(count, offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LMVEA_DELETE_VALUES</td>
          <td>(</td>
          <td class="paramtype">count, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">offset&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((count) == 0 &amp;&amp; (offset) == (typeof(offset))(-1))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00054">54</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l02531">lod_dir_striping_create_internal()</a>, and <a class="el" href="lod__object_8c_source.html#l02305">lod_xattr_set_default_lmv_on_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="abcdd6aeb49fc12e11b9eec723677e2a7"></a><!-- doxytag: member="lod_internal.h::lod_foreach_mdt" ref="abcdd6aeb49fc12e11b9eec723677e2a7" args="(mdt_dev, index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_foreach_mdt</td>
          <td>(</td>
          <td class="paramtype">mdt_dev, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">index&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;cfs_foreach_bit((mdt_dev)-&gt;lod_mdt_bitmap, (index))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00395">395</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, and <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>.</p>

</div>
</div>
<a class="anchor" id="a299d1375e60fd8b950f3f8bace168550"></a><!-- doxytag: member="lod_internal.h::lod_foreach_ost" ref="a299d1375e60fd8b950f3f8bace168550" args="(__dev, index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_foreach_ost</td>
          <td>(</td>
          <td class="paramtype">__dev, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">index&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> ((__dev)-&gt;<a class="code" href="lod__internal_8h.html#a6f93e28627692c2706d98022ff13e262">lod_osts_size</a> &gt; 0) \
                <a class="code" href="bitmap_8h.html#a2e7a3cee7446f462ebb78593fac6a970">cfs_foreach_bit</a>((__dev)-&gt;<a class="code" href="lod__internal_8h.html#ac2e4c42641865882ce73976e699bbfa4">lod_ost_bitmap</a>, (index))
</pre></div>
<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00391">391</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, and <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="ae83ce3678f3f0b449592c5ec16b714e8"></a><!-- doxytag: member="lod_internal.h::lod_mdt_bitmap" ref="ae83ce3678f3f0b449592c5ec16b714e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_mdt_bitmap&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgt_bitmap</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00223">223</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8299f695cdb63b7d1489375b640b825e"></a><!-- doxytag: member="lod_internal.h::lod_mdt_desc" ref="a8299f695cdb63b7d1489375b640b825e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_mdt_desc&nbsp;&nbsp;&nbsp;<a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00227">227</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="accc463cbb68b188c2cfe9018f4b7954e"></a><!-- doxytag: member="lod_internal.h::lod_mdts" ref="accc463cbb68b188c2cfe9018f4b7954e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_mdts&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgts</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00222">222</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0c807fae584d33e6bcd710f6ef47fd2a"></a><!-- doxytag: member="lod_internal.h::lod_mdts_size" ref="a0c807fae584d33e6bcd710f6ef47fd2a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_mdts_size&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgts_size</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00225">225</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac2e4c42641865882ce73976e699bbfa4"></a><!-- doxytag: member="lod_internal.h::lod_ost_bitmap" ref="ac2e4c42641865882ce73976e699bbfa4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_ost_bitmap&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgt_bitmap</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00216">216</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5d9a159e2d57c65ff5de3722ac100755"></a><!-- doxytag: member="lod_internal.h::lod_ost_desc" ref="a5d9a159e2d57c65ff5de3722ac100755" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_ost_desc&nbsp;&nbsp;&nbsp;<a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00220">220</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a53655ebb91485d951eef15a70780072a"></a><!-- doxytag: member="lod_internal.h::lod_ostnr" ref="a53655ebb91485d951eef15a70780072a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_ostnr&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgtnr</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00217">217</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3b9fc3e6020aaf21adee2ad2de72514d"></a><!-- doxytag: member="lod_internal.h::lod_osts" ref="a3b9fc3e6020aaf21adee2ad2de72514d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_osts&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgts</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00215">215</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6f93e28627692c2706d98022ff13e262"></a><!-- doxytag: member="lod_internal.h::lod_osts_size" ref="a6f93e28627692c2706d98022ff13e262" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_osts_size&nbsp;&nbsp;&nbsp;lod_ost_descs.ltd_tgts_size</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00218">218</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l00674">lod_qos_declare_object_on()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a93a27b3bb2695399796406b089d890"></a><!-- doxytag: member="lod_internal.h::lod_remote_mdt_count" ref="a2a93a27b3bb2695399796406b089d890" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lod_remote_mdt_count&nbsp;&nbsp;&nbsp;lod_mdt_descs.ltd_tgtnr</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00224">224</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a658b3bb7fa3fd489a149793035078f47"></a><!-- doxytag: member="lod_internal.h::LOV_OFFSET_DEFAULT" ref="a658b3bb7fa3fd489a149793035078f47" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOV_OFFSET_DEFAULT&nbsp;&nbsp;&nbsp;((__u16)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00057">57</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03075">lod_ah_init()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>, and <a class="el" href="lod__lov_8c_source.html#l01097">lod_verify_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="af25bdfaaaaef439aeea39aa53f9451a5"></a><!-- doxytag: member="lod_internal.h::LOV_USES_ASSIGNED_STRIPE" ref="af25bdfaaaaef439aeea39aa53f9451a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOV_USES_ASSIGNED_STRIPE&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00046">46</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f176cde61427f0e393b90fe928fe9bf"></a><!-- doxytag: member="lod_internal.h::LOV_USES_DEFAULT_STRIPE" ref="a4f176cde61427f0e393b90fe928fe9bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOV_USES_DEFAULT_STRIPE&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00047">47</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l00735">min_stripe_count()</a>.</p>

</div>
</div>
<a class="anchor" id="aa30f202d795375205a76f9715c43084a"></a><!-- doxytag: member="lod_internal.h::LOVEA_DELETE_VALUES" ref="aa30f202d795375205a76f9715c43084a" args="(size, count, offset, pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOVEA_DELETE_VALUES</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">count, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">offset, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pool&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<a class="code" href="lp__utils_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) == 0 &amp;&amp; (count) == 0 &amp;&amp;                                 \
         (offset) == (typeof(offset))(-1) &amp;&amp; (pool) == NULL)
</pre></div>
<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00050">50</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l02531">lod_dir_striping_create_internal()</a>, and <a class="el" href="lod__object_8c_source.html#l02233">lod_xattr_set_lov_on_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9e78945d530e7466f7a895ae7cf984e"></a><!-- doxytag: member="lod_internal.h::ltd_mdt" ref="ab9e78945d530e7466f7a895ae7cf984e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ltd_mdt&nbsp;&nbsp;&nbsp;ltd_tgt</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00226">226</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4f9d0d19bac368665c6824505d212f1f"></a><!-- doxytag: member="lod_internal.h::ltd_ost" ref="a4f9d0d19bac368665c6824505d212f1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ltd_ost&nbsp;&nbsp;&nbsp;ltd_tgt</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00219">219</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00799">validate_lod_and_idx()</a>.</p>

</div>
</div>
<a class="anchor" id="a68755c6d07e8549b6e13e74ab4b85d34"></a><!-- doxytag: member="lod_internal.h::LTD_TGT" ref="a68755c6d07e8549b6e13e74ab4b85d34" args="(ltd, index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LTD_TGT</td>
          <td>(</td>
          <td class="paramtype">ltd, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">index&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((ltd)-&gt;ltd_tgt_idx[(index) / \
         <a class="code" href="lfsck__internal_8h.html#a6f54ff6e890afe3f22f8feb22f7ce69a">TGT_PTRS_PER_BLOCK</a>]-&gt;ldi_tgt[(index) % <a class="code" href="lfsck__internal_8h.html#a6f54ff6e890afe3f22f8feb22f7ce69a">TGT_PTRS_PER_BLOCK</a>])
</pre></div>
<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00142">142</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00456">__lod_del_device()</a>, <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__object_8c_source.html#l03407">lod_declare_object_create()</a>, <a class="el" href="lod__lov_8c_source.html#l00529">lod_del_device()</a>, <a class="el" href="lod__object_8c_source.html#l04095">lod_object_init()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__object_8c_source.html#l01691">lod_prep_md_striped_create()</a>, <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lod__dev_8c_source.html#l00720">lod_sub_fini_all_llogs()</a>, <a class="el" href="lod__dev_8c_source.html#l00578">lod_sub_init_llog()</a>, <a class="el" href="lod__dev_8c_source.html#l01072">lod_sub_init_llogs()</a>, <a class="el" href="lod__dev_8c_source.html#l00239">lod_sub_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00354">lod_sub_recovery_thread()</a>, and <a class="el" href="lod__dev_8c_source.html#l00676">lod_sub_stop_recovery_threads()</a>.</p>

</div>
</div>
<a class="anchor" id="a760e67e187b0abfb2c0d3e455cac224e"></a><!-- doxytag: member="lod_internal.h::MDT_TGT" ref="a760e67e187b0abfb2c0d3e455cac224e" args="(lod, index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_TGT</td>
          <td>(</td>
          <td class="paramtype">lod, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">index&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LTD_TGT(&amp;lod-&gt;lod_mdt_descs, index)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00147">147</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, and <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>.</p>

</div>
</div>
<a class="anchor" id="a48a72349146d5033ba67b2f2326a3e44"></a><!-- doxytag: member="lod_internal.h::OST_TGT" ref="a48a72349146d5033ba67b2f2326a3e44" args="(lod, index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OST_TGT</td>
          <td>(</td>
          <td class="paramtype">lod, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">index&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LTD_TGT(&amp;lod-&gt;lod_ost_descs, index)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00146">146</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__lov_8c_source.html#l00839">lod_initialize_objects()</a>, <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00823">lod_pool_remove()</a>, <a class="el" href="lod__qos_8c_source.html#l00310">lod_qos_calc_ppo()</a>, <a class="el" href="lod__qos_8c_source.html#l00559">lod_qos_calc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l00429">lod_qos_calc_weight()</a>, <a class="el" href="lod__qos_8c_source.html#l00674">lod_qos_declare_object_on()</a>, <a class="el" href="lod__qos_8c_source.html#l00257">lod_qos_statfs_update()</a>, <a class="el" href="lod__qos_8c_source.html#l00457">lod_qos_used()</a>, <a class="el" href="lod__dev_8c_source.html#l01029">lod_recovery_complete()</a>, <a class="el" href="lod__qos_8c_source.html#l00190">lod_statfs_and_check()</a>, <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>, and <a class="el" href="lod__lov_8c_source.html#l00799">validate_lod_and_idx()</a>.</p>

</div>
</div>
<a class="anchor" id="a440def12dace3c42ca8e3624d900a45b"></a><!-- doxytag: member="lod_internal.h::pool_tgt_array" ref="a440def12dace3c42ca8e3624d900a45b" args="(p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pool_tgt_array</td>
          <td>(</td>
          <td class="paramtype">p&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_array)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00081">81</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__pool_8c_source.html#l00876">lod_check_index_in_pool()</a>.</p>

</div>
</div>
<a class="anchor" id="ae822a98627ba236ff5909a9f10a60359"></a><!-- doxytag: member="lod_internal.h::pool_tgt_count" ref="ae822a98627ba236ff5909a9f10a60359" args="(p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pool_tgt_count</td>
          <td>(</td>
          <td class="paramtype">p&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_count)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00080">80</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__pool_8c_source.html#l00876">lod_check_index_in_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00431">lod_dump_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00909">lod_find_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, <a class="el" href="lod__lov_8c_source.html#l01097">lod_verify_striping()</a>, <a class="el" href="lov__pool_8c_source.html#l00301">lov_dump_pool()</a>, <a class="el" href="lov__pool_8c_source.html#l00535">lov_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00252">pool_proc_next()</a>, <a class="el" href="lod__pool_8c_source.html#l00363">pool_proc_show()</a>, and <a class="el" href="lod__pool_8c_source.html#l00293">pool_proc_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a950bea7090a45731d9cef2e9a4d90c"></a><!-- doxytag: member="lod_internal.h::pool_tgt_rw_sem" ref="a1a950bea7090a45731d9cef2e9a4d90c" args="(p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pool_tgt_rw_sem</td>
          <td>(</td>
          <td class="paramtype">p&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_rw_sem)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00082">82</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__pool_8c_source.html#l00876">lod_check_index_in_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00431">lod_dump_pool()</a>, <a class="el" href="lov__pool_8c_source.html#l00301">lov_dump_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00252">pool_proc_next()</a>, and <a class="el" href="lod__pool_8c_source.html#l00363">pool_proc_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ab51e46eaa2bd2f3e0f3a1c47c5f78cb5"></a><!-- doxytag: member="lod_internal.h::pool_tgt_size" ref="ab51e46eaa2bd2f3e0f3a1c47c5f78cb5" args="(p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pool_tgt_size</td>
          <td>(</td>
          <td class="paramtype">p&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((p)-&gt;pool_obds.op_size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00079">79</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a117afde0fc9f7138bf657a5f3e70f00f"></a><!-- doxytag: member="lod_internal.h::TGT_PTRS" ref="a117afde0fc9f7138bf657a5f3e70f00f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TGT_PTRS&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00135">135</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6f54ff6e890afe3f22f8feb22f7ce69a"></a><!-- doxytag: member="lod_internal.h::TGT_PTRS_PER_BLOCK" ref="a6f54ff6e890afe3f22f8feb22f7ce69a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TGT_PTRS_PER_BLOCK&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00136">136</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8240c74ed7979543caf87fd387d3605c"></a><!-- doxytag: member="lod_internal.h::dt2lod_dev" ref="a8240c74ed7979543caf87fd387d3605c" args="(struct dt_device *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlod__device.html">lod_device</a>* dt2lod_dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00336">336</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>, and <a class="el" href="lod__internal_8h_source.html#l00315">lu_device_is_lod()</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01368">lod_commit_async()</a>, <a class="el" href="lod__dev_8c_source.html#l01308">lod_conf_get()</a>, <a class="el" href="lod__dev_8c_source.html#l01356">lod_ro()</a>, <a class="el" href="lod__dev_8c_source.html#l01184">lod_root_get()</a>, <a class="el" href="lod__dev_8c_source.html#l01195">lod_statfs()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>, <a class="el" href="lod__dev_8c_source.html#l01208">lod_trans_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01230">lod_trans_start()</a>, and <a class="el" href="lod__dev_8c_source.html#l01288">lod_trans_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d908195e868e0757649dc317e185578"></a><!-- doxytag: member="lod_internal.h::lod2lu_dev" ref="a3d908195e868e0757649dc317e185578" args="(struct lod_device *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__device.html">lu_device</a>* lod2lu_dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00326">326</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, and <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01606">lod_device_alloc()</a>, <a class="el" href="lod__dev_8c_source.html#l00792">lod_fini_distribute_txn()</a>, <a class="el" href="lod__dev_8c_source.html#l00121">lod_fld_lookup()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__object_8c_source.html#l01691">lod_prep_md_striped_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01105">lod_prepare()</a>, <a class="el" href="lod__dev_8c_source.html#l00753">lod_prepare_distribute_txn()</a>, <a class="el" href="lod__dev_8c_source.html#l00296">lod_process_recovery_updates()</a>, and <a class="el" href="lod__dev_8c_source.html#l00354">lod_sub_recovery_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a3a471819dd3e9e3894c49d7cae7ea52b"></a><!-- doxytag: member="lod_internal.h::lod2lu_obj" ref="a3a471819dd3e9e3894c49d7cae7ea52b" args="(struct lod_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__object.html">lu_object</a>* lod2lu_obj </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00348">348</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>, <a class="el" href="lod__dev_8c_source.html#l00204">lod_object_alloc()</a>, <a class="el" href="lod__internal_8h_source.html#l00364">lod_object_child()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, and <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a01b00b386e3e8780856608cf667d2e9a"></a><!-- doxytag: member="lod_internal.h::lod2obd" ref="a01b00b386e3e8780856608cf667d2e9a" args="(struct lod_device *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structobd__device.html">obd_device</a>* lod2obd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00331">331</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, and <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__qos_8c_source.html#l01084">lod_alloc_ost_list()</a>, <a class="el" href="lod__dev_8c_source.html#l01638">lod_device_fini()</a>, <a class="el" href="lod__dev_8c_source.html#l00121">lod_fld_lookup()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__object_8c_source.html#l00776">lod_load_lmv_shards()</a>, <a class="el" href="lod__lov_8c_source.html#l01372">lod_pools_fini()</a>, <a class="el" href="lod__object_8c_source.html#l01691">lod_prep_md_striped_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01105">lod_prepare()</a>, <a class="el" href="lod__dev_8c_source.html#l00753">lod_prepare_distribute_txn()</a>, <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00296">lod_process_recovery_updates()</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, <a class="el" href="lod__qos_8c_source.html#l00257">lod_qos_statfs_update()</a>, <a class="el" href="lod__dev_8c_source.html#l01029">lod_recovery_complete()</a>, <a class="el" href="lod__qos_8c_source.html#l00190">lod_statfs_and_check()</a>, <a class="el" href="lod__dev_8c_source.html#l00578">lod_sub_init_llog()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00937">lod_sub_prep_llog()</a>, <a class="el" href="lod__dev_8c_source.html#l00239">lod_sub_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00354">lod_sub_recovery_thread()</a>, <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>, <a class="el" href="lod__object_8c_source.html#l01362">lod_verify_md_striping()</a>, and <a class="el" href="lod__lov_8c_source.html#l00799">validate_lod_and_idx()</a>.</p>

</div>
</div>
<a class="anchor" id="a63cfaa8b352c9616b6bd143d21c10708"></a><!-- doxytag: member="lod_internal.h::lod_add_device" ref="a63cfaa8b352c9616b6bd143d21c10708" args="(const struct lu_env *env, struct lod_device *lod, char *osp, unsigned index, unsigned gen, int mdt_index, char *type, int active)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_add_device </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>osp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tgt_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>active</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connect LOD to a new OSP and add it to the target table. </p>
<p>Connect to the OSP device passed, initialize all the internal structures related to the device and add it to the target table.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device to be connected to the new OSP </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>osp</em>&nbsp;</td><td>name of OSP device name to be added </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>index</em>&nbsp;</td><td>index of the new target </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>gen</em>&nbsp;</td><td>target's generation number </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tgt_index</em>&nbsp;</td><td>OSP's group </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>type of device (mdc or osc) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>active</em>&nbsp;</td><td>state of OSP: 0 - inactive, 1 - active</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if added successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00207">207</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="bitmap_8h_source.html#l00087">cfs_bitmap_check()</a>, <a class="el" href="bitmap_8h_source.html#l00081">cfs_bitmap_clear()</a>, <a class="el" href="bitmap_8h_source.html#l00075">cfs_bitmap_set()</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="obd_8h_source.html#l00161">client_obd::cl_target_uuid</a>, <a class="el" href="genops_8c_source.html#l00547">class_find_client_obd()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="lustre__net_8h_source.html#l00531">ptlrpc_client::cli_request_portal</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__import_8h_source.html#l00172">obd_import::imp_client</a>, <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_server_timeout</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00075">LCFG_CLEANUP</a>, <a class="el" href="lustre__cfg_8h_source.html#l00130">lustre_cfg::lcfg_command</a>, <a class="el" href="lustre__cfg_8h_source.html#l00129">lustre_cfg::lcfg_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02748">lov_desc::ld_active_tgt_count</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lu__object_8h_source.html#l00279">lu_device::ld_ops</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="lustre__idl_8h_source.html#l02747">lov_desc::ld_tgt_count</a>, <a class="el" href="structlu__device__operations.html#a892c61097c7e02dd33e5a9148d339dae">lu_device_operations::ldo_process_config</a>, <a class="el" href="structlu__device__operations.html#a0786583fdaf5ff6bf3f4aaa4e48d3dd9">lu_device_operations::ldo_recovery_complete</a>, <a class="el" href="lfsck__lib_8c_source.html#l03661">lfsck_add_target()</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__internal_8h_source.html#l00170">lod_device::lod_child</a>, <a class="el" href="lod__internal_8h_source.html#l00181">lod_device::lod_desc</a>, <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00175">lod_device::lod_initialized</a>, <a class="el" href="lod__internal_8h_source.html#l00189">lod_device::lod_mdt_descs</a>, <a class="el" href="lod__internal_8h_source.html#l00187">lod_device::lod_ost_descs</a>, <a class="el" href="lod__pool_8c_source.html#l00537">lod_ost_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00577">lod_ost_pool_remove()</a>, <a class="el" href="lod__internal_8h_source.html#l00204">lod_device::lod_pool_info</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00175">lod_device::lod_recovery_completed</a>, <a class="el" href="lod__dev_8c_source.html#l00482">lod_sub_fini_llog()</a>, <a class="el" href="lod__dev_8c_source.html#l00578">lod_sub_init_llog()</a>, <a class="el" href="lod__internal_8h_source.html#l00128">lod_tgt_desc::ltd_active</a>, <a class="el" href="lod__lov_8c_source.html#l00149">ltd_bitmap_resize()</a>, <a class="el" href="lod__internal_8h_source.html#l00121">lod_tgt_desc::ltd_exp</a>, <a class="el" href="lod__internal_8h_source.html#l00123">lod_tgt_desc::ltd_gen</a>, <a class="el" href="lod__internal_8h_source.html#l00124">lod_tgt_desc::ltd_index</a>, <a class="el" href="lod__internal_8h_source.html#l00162">lod_tgt_descs::ltd_mutex</a>, <a class="el" href="lod__internal_8h_source.html#l00127">lod_tgt_desc::ltd_recovery_thread</a>, <a class="el" href="lod__internal_8h_source.html#l00142">LTD_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00119">lod_tgt_desc::ltd_tgt</a>, <a class="el" href="lod__internal_8h_source.html#l00156">lod_tgt_descs::ltd_tgt_bitmap</a>, <a class="el" href="lod__internal_8h_source.html#l00150">lod_tgt_descs::ltd_tgt_idx</a>, <a class="el" href="lod__internal_8h_source.html#l00154">lod_tgt_descs::ltd_tgtnr</a>, <a class="el" href="lod__internal_8h_source.html#l00152">lod_tgt_descs::ltd_tgts_size</a>, <a class="el" href="lod__internal_8h_source.html#l00122">lod_tgt_desc::ltd_uuid</a>, <a class="el" href="lod__internal_8h_source.html#l00310">lod_thread_info::lti_lustre_cfg</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00059">LUSTRE_CFG_VERSION</a>, <a class="el" href="obd_8h_source.html#l00463">LUSTRE_OSC_NAME</a>, <a class="el" href="obd_8h_source.html#l00453">LUSTRE_OSP_NAME</a>, <a class="el" href="lustre__ver_8h_source.html#l00023">LUSTRE_VERSION_CODE</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00796">obd_connect()</a>, <a class="el" href="lustre__idl_8h_source.html#l01186">OBD_CONNECT_ACL</a>, <a class="el" href="lustre__idl_8h_source.html#l01207">OBD_CONNECT_AT</a>, <a class="el" href="lustre__idl_8h_source.html#l01250">OBD_CONNECT_BULK_MBITS</a>, <a class="el" href="lustre__idl_8h_source.html#l01213">OBD_CONNECT_FID</a>, <a class="el" href="lustre__idl_8h_source.html#l01219">OBD_CONNECT_FULL20</a>, <a class="el" href="lustre__idl_8h_source.html#l01191">OBD_CONNECT_IBITS</a>, <a class="el" href="lustre__idl_8h_source.html#l01180">OBD_CONNECT_INDEX</a>, <a class="el" href="lustre__idl_8h_source.html#l01242">OBD_CONNECT_LFSCK</a>, <a class="el" href="lustre__idl_8h_source.html#l01208">OBD_CONNECT_LRU_RESIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01233">OBD_CONNECT_LVB_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l01181">OBD_CONNECT_MDS</a>, <a class="el" href="lustre__idl_8h_source.html#l01209">OBD_CONNECT_MDS_MDS</a>, <a class="el" href="lustre__idl_8h_source.html#l01237">OBD_CONNECT_PINGLESS</a>, <a class="el" href="lustre__idl_8h_source.html#l01185">OBD_CONNECT_REQPORTAL</a>, <a class="el" href="lustre__idl_8h_source.html#l01217">OBD_CONNECT_SKIP_ORPHAN</a>, <a class="el" href="lustre__idl_8h_source.html#l01184">OBD_CONNECT_VERSION</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00506">obd_str2uuid()</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01347">obd_connect_data::ocd_group</a>, <a class="el" href="lustre__idl_8h_source.html#l01341">obd_connect_data::ocd_ibits_known</a>, <a class="el" href="lustre__idl_8h_source.html#l01339">obd_connect_data::ocd_index</a>, <a class="el" href="lustre__idl_8h_source.html#l01337">obd_connect_data::ocd_version</a>, <a class="el" href="lustre__idl_8h_source.html#l00114">OUT_PORTAL</a>, <a class="el" href="lod__qos_8c_source.html#l00074">qos_add_tgt()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00444">TGT_PTRS_PER_BLOCK</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e717f312def8139f51af44c17a9afd5"></a><!-- doxytag: member="lod_internal.h::lod_check_index_in_pool" ref="a4e717f312def8139f51af44c17a9afd5" args="(__u32 idx, struct pool_desc *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_check_index_in_pool </td>
          <td>(</td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpool__desc.html">pool_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if the specified target exists in the pool. </p>
<p>The caller may not have a reference on <em>pool</em> if it got the pool without calling <a class="el" href="lod__internal_8h.html#a286e56927560983374c2f7b9224feda2" title="Find the pool descriptor for the specified pool and return it with a reference to...">lod_find_pool()</a> (e.g. directly from the lod pool list)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>Target index to check </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool in which to check if target is added.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>successfully found index in <em>pool</em> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error if device not found in <em>pool</em> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00876">876</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__pool_8c_source.html#l00077">pool_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00081">pool_tgt_array</a>, <a class="el" href="lod__internal_8h_source.html#l00080">pool_tgt_count</a>, and <a class="el" href="lod__internal_8h_source.html#l00082">pool_tgt_rw_sem</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, and <a class="el" href="lod__lov_8c_source.html#l01097">lod_verify_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="af28b9aacfb3e44c1374d8dbdfbde74d5"></a><!-- doxytag: member="lod_internal.h::lod_declare_striped_object" ref="af28b9aacfb3e44c1374d8dbdfbde74d5" args="(const struct lu_env *env, struct dt_object *dt, struct lu_attr *attr, const struct lu_buf *lovea, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_declare_striped_object </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>lovea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare creation of striped object. </p>
<p>The function declares creation stripes for a regular object. The function also declares whether the stripes will be created with non-zero size if previously size was set non-zero on the master object. If object <em>dt</em> is not local, then only fully defined striping can be applied in <em>lovea</em>. Otherwise <em>lovea</em> can be in the form of pattern, see <a class="el" href="lod__qos_8c.html#a6b20eb75ce250278dab3d3f2e7cf8dc3" title="Parse suggested striping configuration.">lod_qos_parse_config()</a> for the details.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes the stripes will be created with </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lovea</em>&nbsp;</td><td>a buffer containing striping description </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>if failed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l03337">3337</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01806">dt_object_child()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lod__internal_8h_source.html#l00255">lod_object::ldo_pool</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lod__object_8c_source.html#l03275">lod_declare_init_size()</a>, <a class="el" href="lod__internal_8h_source.html#l00359">lod_dt_obj()</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__object_8c_source.html#l04168">lod_object_free_striping()</a>, <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00561">lod_sub_object_declare_xattr_set()</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lod__internal_8h_source.html#l00295">lod_thread_info::lti_buf</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00199">OBD_FAIL_MDS_ALLOC_OBDO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03407">lod_declare_object_create()</a>, and <a class="el" href="lod__object_8c_source.html#l02061">lod_declare_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="aa568d1f98a1c3293cb72055df6efe3f8"></a><!-- doxytag: member="lod_internal.h::lod_del_device" ref="aa568d1f98a1c3293cb72055df6efe3f8" args="(const struct lu_env *env, struct lod_device *lod, struct lod_tgt_descs *ltd, char *osp, unsigned idx, unsigned gen, bool for_ost)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_del_device </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>osp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>for_ost</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove device by name. </p>
<p>Remove a device identified by <em>osp</em> from the target table. Given the device can be in use, the real deletion happens in <a class="el" href="lod__internal_8h.html#ab3950998e92e7107b04fdb3866a20f6a" title="Decrease reference count on the target table.">lod_putref()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device to be connected to the new OSP </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ltd</em>&nbsp;</td><td>target table </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>osp</em>&nbsp;</td><td>name of OSP device to be removed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>index of the target </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>gen</em>&nbsp;</td><td>generation number, not used currently </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>for_ost</em>&nbsp;</td><td>type of the target: 0 - MDT, 1 - OST</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the device was scheduled for removal </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>if no device was found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00529">529</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="lod__lov_8c_source.html#l00456">__lod_del_device()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="bitmap_8h_source.html#l00087">cfs_bitmap_check()</a>, <a class="el" href="genops_8c_source.html#l00547">class_find_client_obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00162">lod_tgt_descs::ltd_mutex</a>, <a class="el" href="lod__internal_8h_source.html#l00142">LTD_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00156">lod_tgt_descs::ltd_tgt_bitmap</a>, <a class="el" href="obd_8h_source.html#l00453">LUSTRE_OSP_NAME</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00506">obd_str2uuid()</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a565af531f112c9ad1e9f94bf4a338a80"></a><!-- doxytag: member="lod_internal.h::lod_dt_obj" ref="a565af531f112c9ad1e9f94bf4a338a80" args="(const struct dt_object *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlod__object.html">lod_object</a>* lod_dt_obj </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00359">359</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lod__internal_8h_source.html#l00353">lod_obj()</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03075">lod_ah_init()</a>, <a class="el" href="lod__object_8c_source.html#l01167">lod_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l01075">lod_declare_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l03275">lod_declare_init_size()</a>, <a class="el" href="lod__object_8c_source.html#l03407">lod_declare_object_create()</a>, <a class="el" href="lod__object_8c_source.html#l03600">lod_declare_object_destroy()</a>, <a class="el" href="lod__object_8c_source.html#l03337">lod_declare_striped_object()</a>, <a class="el" href="lod__object_8c_source.html#l02769">lod_declare_xattr_del()</a>, <a class="el" href="lod__object_8c_source.html#l01869">lod_declare_xattr_set_lmv()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__object_8c_source.html#l01918">lod_dir_declare_xattr_set()</a>, <a class="el" href="lod__object_8c_source.html#l02660">lod_dir_striping_create()</a>, <a class="el" href="lod__object_8c_source.html#l02531">lod_dir_striping_create_internal()</a>, <a class="el" href="lod__object_8c_source.html#l00954">lod_index_try()</a>, <a class="el" href="lod__object_8c_source.html#l03567">lod_object_create()</a>, <a class="el" href="lod__object_8c_source.html#l03679">lod_object_destroy()</a>, <a class="el" href="lod__object_8c_source.html#l03889">lod_object_lock()</a>, <a class="el" href="lod__object_8c_source.html#l01987">lod_object_replace_parent_fid()</a>, <a class="el" href="lod__object_8c_source.html#l03850">lod_object_unlock()</a>, <a class="el" href="lod__object_8c_source.html#l01406">lod_prep_lmv_md()</a>, <a class="el" href="lod__object_8c_source.html#l01691">lod_prep_md_striped_create()</a>, <a class="el" href="lod__object_8c_source.html#l00437">lod_striped_it_fini()</a>, <a class="el" href="lod__object_8c_source.html#l00470">lod_striped_it_get()</a>, <a class="el" href="lod__object_8c_source.html#l00390">lod_striped_it_init()</a>, <a class="el" href="lod__object_8c_source.html#l00598">lod_striped_it_key()</a>, <a class="el" href="lod__object_8c_source.html#l00621">lod_striped_it_key_size()</a>, <a class="el" href="lod__object_8c_source.html#l00713">lod_striped_it_load()</a>, <a class="el" href="lod__object_8c_source.html#l00517">lod_striped_it_next()</a>, <a class="el" href="lod__object_8c_source.html#l00494">lod_striped_it_put()</a>, <a class="el" href="lod__object_8c_source.html#l00644">lod_striped_it_rec()</a>, <a class="el" href="lod__object_8c_source.html#l00667">lod_striped_it_rec_size()</a>, <a class="el" href="lod__object_8c_source.html#l00690">lod_striped_it_store()</a>, <a class="el" href="lod__object_8c_source.html#l03530">lod_striping_create()</a>, <a class="el" href="lod__object_8c_source.html#l02813">lod_xattr_del()</a>, <a class="el" href="lod__object_8c_source.html#l02186">lod_xattr_del_internal()</a>, <a class="el" href="lod__object_8c_source.html#l01267">lod_xattr_get()</a>, <a class="el" href="lod__object_8c_source.html#l02694">lod_xattr_set()</a>, <a class="el" href="lod__object_8c_source.html#l02305">lod_xattr_set_default_lmv_on_dir()</a>, <a class="el" href="lod__object_8c_source.html#l02138">lod_xattr_set_internal()</a>, <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>, and <a class="el" href="lod__object_8c_source.html#l02233">lod_xattr_set_lov_on_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="aabaf0528074a96b37d8e0f07db269fce"></a><!-- doxytag: member="lod_internal.h::lod_ea_store_resize" ref="aabaf0528074a96b37d8e0f07db269fce" args="(struct lod_thread_info *info, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_ea_store_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__thread__info.html">lod_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resize per-thread storage to hold specified size. </p>
<p>A helper function to resize per-thread temporary storage. This storage is used to process LOV/LVM EAs and may be quite large. We do not want to allocate/release it every time, so instead we put it into the env and reallocate on demand. The memory is released when the correspondent thread is finished.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>info</em>&nbsp;</td><td>LOD-specific storage in the environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>new size to grow the buffer to</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success, -ENOMEM if reallocation failed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00596">596</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__user_8h_source.html#l00369">LOV_MAX_STRIPE_COUNT</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lod__internal_8h_source.html#l00292">lod_thread_info::lti_ea_store</a>, <a class="el" href="lod__internal_8h_source.html#l00293">lod_thread_info::lti_ea_store_size</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__sec_8h_source.html#l00941">size_roundup_power2()</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l02531">lod_dir_striping_create_internal()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__lov_8c_source.html#l00748">lod_get_ea()</a>, <a class="el" href="lod__object_8c_source.html#l01987">lod_object_replace_parent_fid()</a>, <a class="el" href="lod__object_8c_source.html#l01406">lod_prep_lmv_md()</a>, and <a class="el" href="lod__qos_8c_source.html#l00780">lod_qos_ost_in_use_clear()</a>.</p>

</div>
</div>
<a class="anchor" id="a69356c6c5ddf523ef0660f3f7b838b5a"></a><!-- doxytag: member="lod_internal.h::lod_env_info" ref="a69356c6c5ddf523ef0660f3f7b838b5a" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlod__thread__info.html">lod_thread_info</a>* lod_env_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00372">372</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lod__internal_8h.html#a19d20b5ced2d424fce13df56975e68ca">lod_thread_key</a>, and <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__dev_8c_source.html#l01258">lod_add_noop_records()</a>, <a class="el" href="lod__qos_8c_source.html#l01084">lod_alloc_ost_list()</a>, <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__object_8c_source.html#l01167">lod_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l02981">lod_cache_parent_lmv_striping()</a>, <a class="el" href="lod__object_8c_source.html#l02905">lod_cache_parent_lov_striping()</a>, <a class="el" href="lod__object_8c_source.html#l01075">lod_declare_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l03275">lod_declare_init_size()</a>, <a class="el" href="lod__object_8c_source.html#l03600">lod_declare_object_destroy()</a>, <a class="el" href="lod__object_8c_source.html#l03337">lod_declare_striped_object()</a>, <a class="el" href="lod__object_8c_source.html#l02061">lod_declare_xattr_set()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__object_8c_source.html#l02531">lod_dir_striping_create_internal()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__lov_8c_source.html#l00748">lod_get_ea()</a>, <a class="el" href="lod__lov_8c_source.html#l00839">lod_initialize_objects()</a>, <a class="el" href="lod__object_8c_source.html#l00153">lod_it_init()</a>, <a class="el" href="lod__object_8c_source.html#l00776">lod_load_lmv_shards()</a>, <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>, <a class="el" href="lod__internal_8h_source.html#l00381">lod_name_get()</a>, <a class="el" href="lod__object_8c_source.html#l03679">lod_object_destroy()</a>, <a class="el" href="lod__object_8c_source.html#l03889">lod_object_lock()</a>, <a class="el" href="lod__object_8c_source.html#l01987">lod_object_replace_parent_fid()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__object_8c_source.html#l01406">lod_prep_lmv_md()</a>, <a class="el" href="lod__dev_8c_source.html#l01105">lod_prepare()</a>, <a class="el" href="lod__dev_8c_source.html#l00296">lod_process_recovery_updates()</a>, <a class="el" href="lod__qos_8c_source.html#l00828">lod_qos_is_ost_used()</a>, <a class="el" href="lod__qos_8c_source.html#l00805">lod_qos_ost_in_use()</a>, <a class="el" href="lod__qos_8c_source.html#l00780">lod_qos_ost_in_use_clear()</a>, <a class="el" href="lod__object_8c_source.html#l00390">lod_striped_it_init()</a>, <a class="el" href="lod__object_8c_source.html#l00517">lod_striped_it_next()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00937">lod_sub_prep_llog()</a>, <a class="el" href="lod__object_8c_source.html#l01267">lod_xattr_get()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a286e56927560983374c2f7b9224feda2"></a><!-- doxytag: member="lod_internal.h::lod_find_pool" ref="a286e56927560983374c2f7b9224feda2" args="(struct lod_device *lod, char *poolname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpool__desc.html">pool_desc</a>* lod_find_pool </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>poolname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the pool descriptor for the specified pool and return it with a reference to the caller if found. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD on which the pools are configured </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>poolname</em>&nbsp;</td><td>NUL-terminated name of the pool</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pointer</em>&nbsp;</td><td>to pool descriptor on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if <em>poolname</em> could not be found or poolname is empty </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00909">909</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lod__internal_8h_source.html#l00169">lod_device::lod_child_exp</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lustre__user_8h_source.html#l00355">LOV_POOLNAMEF</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="lod__internal_8h_source.html#l00080">pool_tgt_count</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, and <a class="el" href="lod__lov_8c_source.html#l01097">lod_verify_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="ab40a9a7f036ba2a86395fb48e58782e0"></a><!-- doxytag: member="lod_internal.h::lod_fini_tgt" ref="ab40a9a7f036ba2a86395fb48e58782e0" args="(const struct lu_env *env, struct lod_device *lod, struct lod_tgt_descs *ltd, bool for_ost)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_fini_tgt </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>for_ost</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schedule removal of all the targets from the given target table. </p>
<p>See more details in the description for <a class="el" href="lod__lov_8c.html#ab3c7aa77fa18860680f5f2c617acb0d2" title="Schedule target removal from the target table.">__lod_del_device()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device the target table belongs to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ltd</em>&nbsp;</td><td>target table </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>for_ost</em>&nbsp;</td><td>type of the target: MDT or OST</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>always </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00490">490</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="lod__lov_8c_source.html#l00456">__lod_del_device()</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="bitmap_8h_source.html#l00072">CFS_FREE_BITMAP</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00162">lod_tgt_descs::ltd_mutex</a>, <a class="el" href="lod__internal_8h_source.html#l00156">lod_tgt_descs::ltd_tgt_bitmap</a>, <a class="el" href="lod__internal_8h_source.html#l00150">lod_tgt_descs::ltd_tgt_idx</a>, <a class="el" href="lod__internal_8h_source.html#l00152">lod_tgt_descs::ltd_tgts_size</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00443">TGT_PTRS</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01638">lod_device_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7086b5a80ae5841bb28c91ce9527061"></a><!-- doxytag: member="lod_internal.h::lod_fix_desc" ref="ad7086b5a80ae5841bb28c91ce9527061" args="(struct lov_desc *desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_fix_desc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlov__desc.html">lov_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used to fix insane default striping. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>desc</em>&nbsp;</td><td>striping description </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01263">1263</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02749">lov_desc::ld_default_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02751">lov_desc::ld_default_stripe_size</a>, <a class="el" href="lustre__idl_8h_source.html#l02750">lov_desc::ld_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l02754">lov_desc::ld_qos_maxage</a>, <a class="el" href="lod__lov_8c_source.html#l01242">lod_fix_desc_pattern()</a>, <a class="el" href="lod__lov_8c_source.html#l01251">lod_fix_desc_qos_maxage()</a>, <a class="el" href="lod__lov_8c_source.html#l01236">lod_fix_desc_stripe_count()</a>, and <a class="el" href="lod__lov_8c_source.html#l01220">lod_fix_desc_stripe_size()</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01280">lod_pools_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a80c109143634c3b4e91d6b69ee9e7cf3"></a><!-- doxytag: member="lod_internal.h::lod_fix_desc_pattern" ref="a80c109143634c3b4e91d6b69ee9e7cf3" args="(__u32 *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_fix_desc_pattern </td>
          <td>(</td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01242">1242</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, and <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01263">lod_fix_desc()</a>.</p>

</div>
</div>
<a class="anchor" id="a2f99f720a942429c77344378e3d1a816"></a><!-- doxytag: member="lod_internal.h::lod_fix_desc_qos_maxage" ref="a2f99f720a942429c77344378e3d1a816" args="(__u32 *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_fix_desc_qos_maxage </td>
          <td>(</td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01251">1251</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02742">LOV_DESC_QOS_MAXAGE_DEFAULT</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01263">lod_fix_desc()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e02a5fd069a2f3af7ed486c0ae6a59a"></a><!-- doxytag: member="lod_internal.h::lod_fix_desc_stripe_count" ref="a5e02a5fd069a2f3af7ed486c0ae6a59a" args="(__u32 *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_fix_desc_stripe_count </td>
          <td>(</td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01236">1236</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01263">lod_fix_desc()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e918ac8530fb534d7fe7cf4d744a00c"></a><!-- doxytag: member="lod_internal.h::lod_fix_desc_stripe_size" ref="a3e918ac8530fb534d7fe7cf4d744a00c" args="(__u64 *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_fix_desc_stripe_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01220">1220</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00283">LCONSOLE_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lustre__idl_8h_source.html#l02743">LOV_DESC_STRIPE_SIZE_DEFAULT</a>, <a class="el" href="lustre__user_8h_source.html#l00358">LOV_MIN_STRIPE_SIZE</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01263">lod_fix_desc()</a>.</p>

</div>
</div>
<a class="anchor" id="a563e47dbc609a655ff68d76b2fd62110"></a><!-- doxytag: member="lod_internal.h::lod_fld_lookup" ref="a563e47dbc609a655ff68d76b2fd62110" args="(const struct lu_env *env, struct lod_device *lod, const struct lu_fid *fid, __u32 *tgt, int *flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_fld_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__dev_8c_source.html#l00121">121</a> of file <a class="el" href="lod__dev_8c_source.html">lod_dev.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00525">fid_idif_ost_idx()</a>, <a class="el" href="lustre__idl_8h_source.html#l00462">fid_is_idif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l00492">fid_is_update_log()</a>, <a class="el" href="lustre__idl_8h_source.html#l00502">fid_is_update_log_dir()</a>, <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="lustre__fid_8h_source.html#l00312">fid_seq_in_fldb()</a>, <a class="el" href="seq__range_8h_source.html#l00081">fld_range_set_type()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00326">lod2lu_dev()</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__internal_8h_source.html#l00175">lod_device::lod_initialized</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00166">LU_SEQ_RANGE_MDT</a>, <a class="el" href="lustre__idl_8h_source.html#l00167">LU_SEQ_RANGE_OST</a>, <a class="el" href="lu__object_8h_source.html#l00661">lu_site2seq()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__fid_8h_source.html#l00454">seq_server_site::ss_node_id</a>, and <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__object_8c_source.html#l04095">lod_object_init()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__object_8c_source.html#l01406">lod_prep_lmv_md()</a>, and <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>.</p>

</div>
</div>
<a class="anchor" id="a96fc753d4deb1e6ac8895900f7ac0916"></a><!-- doxytag: member="lod_internal.h::lod_generate_and_set_lovea" ref="a96fc753d4deb1e6ac8895900f7ac0916" args="(const struct lu_env *env, struct lod_object *mo, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_generate_and_set_lovea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Make LOV EA for striped object. </p>
<p>Generate striping information and store it in the LOV EA of the given object. The caller must ensure nobody else is calling the function against the object concurrently. The transaction must be started. FLDB service must be running as well; it's used to map FID to the target, which is stored in LOV EA.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if LOV EA is stored successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00636">636</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01806">dt_object_child()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__idl_8h_source.html#l01538">fid_to_lmm_oi()</a>, <a class="el" href="lustre__idl_8h_source.html#l00706">fid_to_ostid()</a>, <a class="el" href="lustre__idl_8h_source.html#l01498">lov_ost_data_v1::l_ost_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lod__internal_8h_source.html#l00253">lod_object::ldo_pattern</a>, <a class="el" href="lod__internal_8h_source.html#l00255">lod_object::ldo_pool</a>, <a class="el" href="lod__internal_8h_source.html#l00254">lod_object::ldo_released_stripenr</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00252">lod_object::ldo_stripe_size</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01618">lov_mds_md_v3::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01506">lov_mds_md_v1::lmm_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l01572">lmm_oi_cpu_to_le()</a>, <a class="el" href="lustre__idl_8h_source.html#l01505">lov_mds_md_v1::lmm_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l01617">lov_mds_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01507">lov_mds_md_v1::lmm_stripe_size</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__lov_8c_source.html#l00596">lod_ea_store_resize()</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__dev_8c_source.html#l00121">lod_fld_lookup()</a>, <a class="el" href="lod__object_8c_source.html#l04168">lod_object_free_striping()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00602">lod_sub_object_xattr_set()</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lustre__user_8h_source.html#l00352">LOV_PATTERN_F_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, <a class="el" href="lod__internal_8h_source.html#l00295">lod_thread_info::lti_buf</a>, <a class="el" href="lod__internal_8h_source.html#l00292">lod_thread_info::lti_ea_store</a>, <a class="el" href="lod__internal_8h_source.html#l00293">lod_thread_info::lti_ea_store_size</a>, <a class="el" href="lod__internal_8h_source.html#l00297">lod_thread_info::lti_fid</a>, <a class="el" href="lod__internal_8h_source.html#l00296">lod_thread_info::lti_ostid</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00167">LU_SEQ_RANGE_OST</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00536">OBD_FAIL_LFSCK_BAD_LMMOI</a>, <a class="el" href="obd__support_8h_source.html#l00541">OBD_FAIL_LFSCK_MULTIPLE_REF</a>, <a class="el" href="obd__support_8h_source.html#l00251">OBD_FAIL_MDS_FLD_LOOKUP</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00823">ostid_cpu_to_le()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03530">lod_striping_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6dea0bffc045c14eb1f492c68d2c50a"></a><!-- doxytag: member="lod_internal.h::lod_get_default_lmv_ea" ref="ad6dea0bffc045c14eb1f492c68d2c50a" args="(const struct lu_env *env, struct lod_object *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lod_get_default_lmv_ea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00437">437</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="lod__lov_8c_source.html#l00748">lod_get_ea()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01597">XATTR_NAME_DEFAULT_LMV</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l02981">lod_cache_parent_lmv_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="ae87953a19c720b63ed8d7f8c6b8ac057"></a><!-- doxytag: member="lod_internal.h::lod_get_ea" ref="ae87953a19c720b63ed8d7f8c6b8ac057" args="(const struct lu_env *env, struct lod_object *lo, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_get_ea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get LOV EA. </p>
<p>Fill lti_ea_store buffer in the environment with a value for the given EA. The buffer is reallocated if the value doesn't fit.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread .lti_ea_store buffer is filled with EA's value </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the EA</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if EA is fetched successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00748">748</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01806">dt_object_child()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lod__lov_8c_source.html#l00596">lod_ea_store_resize()</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__internal_8h_source.html#l00295">lod_thread_info::lti_buf</a>, <a class="el" href="lod__internal_8h_source.html#l00292">lod_thread_info::lti_ea_store</a>, <a class="el" href="lod__internal_8h_source.html#l00293">lod_thread_info::lti_ea_store_size</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lod__internal_8h_source.html#l00437">lod_get_default_lmv_ea()</a>, <a class="el" href="lod__internal_8h_source.html#l00431">lod_get_lmv_ea()</a>, and <a class="el" href="lod__internal_8h_source.html#l00425">lod_get_lov_ea()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d0d71ffb20d581386b9a24c8a18718d"></a><!-- doxytag: member="lod_internal.h::lod_get_lmv_ea" ref="a3d0d71ffb20d581386b9a24c8a18718d" args="(const struct lu_env *env, struct lod_object *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lod_get_lmv_ea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00431">431</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="lod__lov_8c_source.html#l00748">lod_get_ea()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e6266eac2f57c6a232e1f3f7a3191e1"></a><!-- doxytag: member="lod_internal.h::lod_get_lov_ea" ref="a4e6266eac2f57c6a232e1f3f7a3191e1" args="(const struct lu_env *env, struct lod_object *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lod_get_lov_ea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00425">425</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="lod__lov_8c_source.html#l00748">lod_get_ea()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01167">lod_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l02905">lod_cache_parent_lov_striping()</a>, and <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="aa9ce4cf9ed012a300938f6c637618c01"></a><!-- doxytag: member="lod_internal.h::lod_getref" ref="aa9ce4cf9ed012a300938f6c637618c01" args="(struct lod_tgt_descs *ltd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_getref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Increase reference count on the target table. </p>
<p>Increase reference count on the target table usage to prevent racing with addition/deletion. Any function that expects the table to remain stationary must take a ref.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ltd</em>&nbsp;</td><td>target table (lod_ost_descs or lod_mdt_descs) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00055">55</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="lod__internal_8h_source.html#l00162">lod_tgt_descs::ltd_mutex</a>, <a class="el" href="lod__internal_8h_source.html#l00160">lod_tgt_descs::ltd_refcount</a>, and <a class="el" href="lod__internal_8h_source.html#l00164">lod_tgt_descs::ltd_rw_sem</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__lov_8c_source.html#l00529">lod_del_device()</a>, <a class="el" href="lod__lov_8c_source.html#l00490">lod_fini_tgt()</a>, <a class="el" href="lod__lov_8c_source.html#l00839">lod_initialize_objects()</a>, <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>, <a class="el" href="lod__object_8c_source.html#l04095">lod_object_init()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00823">lod_pool_remove()</a>, <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01029">lod_recovery_complete()</a>, <a class="el" href="lod__dev_8c_source.html#l00720">lod_sub_fini_all_llogs()</a>, <a class="el" href="lod__dev_8c_source.html#l00239">lod_sub_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00676">lod_sub_stop_recovery_threads()</a>, and <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="ae70e38d68743af24c0f157230e281a38"></a><!-- doxytag: member="lod_internal.h::lod_initialize_objects" ref="ae70e38d68743af24c0f157230e281a38" args="(const struct lu_env *env, struct lod_object *mo, struct lov_ost_data_v1 *objs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_initialize_objects </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>objs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiate objects for stripes. </p>
<p>Allocate and initialize LU-objects representing the stripes. The number of the stripes (ldo_stripenr) must be initialized already. The caller must ensure nobody else is calling the function on the object at the same time. FLDB service must be running to be able to map a FID to the targets and find appropriate device representing that target.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>objs</em>&nbsp;</td><td>an array of IDs to creates the objects from</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the objects are instantiated successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00839">839</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lu__object_8h_source.html#l00275">lu_device::ld_type</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00252">lod_object::ldo_stripe_size</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_stripes_allocated</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00187">lod_device::lod_ost_descs</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lustre__idl_8h_source.html#l03644">lovea_slot_is_dummy()</a>, <a class="el" href="lod__internal_8h_source.html#l00297">lod_thread_info::lti_fid</a>, <a class="el" href="lod__internal_8h_source.html#l00296">lod_thread_info::lti_ostid</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="lu__object_8c_source.html#l00778">lu_object_find_at()</a>, <a class="el" href="lu__object_8c_source.html#l01329">lu_object_locate()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lod__internal_8h_source.html#l00146">OST_TGT</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lod__lov_8c_source.html#l00799">validate_lod_and_idx()</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00927">lod_parse_striping()</a>, and <a class="el" href="lod__qos_8c_source.html#l01636">lod_use_defined_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="a704f7166957c411a3a62b268f0f40f8b"></a><!-- doxytag: member="lod_internal.h::lod_load_lmv_shards" ref="a704f7166957c411a3a62b268f0f40f8b" args="(const struct lu_env *env, struct lod_object *lo, struct lu_buf *buf, bool resize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_load_lmv_shards </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>resize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Append the FID for each shard of the striped directory after the given LMV EA header. </p>
<p>To simplify striped directory and the consistency verification, we only store the LMV EA header on disk, for both master object and slave objects. When someone wants to know the whole LMV EA, such as client readdir(), we can build the entrie LMV EA on the MDT side (in RAM) via iterating the sub-directory entries that are contained in the master object of the stripe directory.</p>
<p>For the master object of the striped directroy, the valid name for each shard is composed of the ${shard_FID}:${shard_idx}.</p>
<p>There may be holes in the LMV EA if some shards' name entries are corrupted or lost.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>pointer to the master object of the striped directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>pointer to the <a class="el" href="structlu__buf.html" title="Common buffer structure to be passed around for various xattr_{s,g}et() methods.">lu_buf</a> which will hold the LMV EA </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>resize</em>&nbsp;</td><td>whether re-allocate the buffer if it is not big enough</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>size of the LMV EA </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for nothing to be loaded </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l00776">776</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01806">dt_object_child()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__user_8h_source.html#l00546">FID_LEN</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02658">lmv_mds_md_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__internal_8h_source.html#l00175">lod_device::lod_lmv_failout</a>, <a class="el" href="lod__internal_8h_source.html#l00303">lod_thread_info::lti_key</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="lu__object_8c_source.html#l02351">lu_buf_alloc()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00872">LUDA_64BITHASH</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="mdsrate_8c_source.html#l00129">stripes</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>, and <a class="el" href="lod__object_8c_source.html#l01267">lod_xattr_get()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb3e638f8e7af103ed375a00d4ca0517"></a><!-- doxytag: member="lod_internal.h::lod_load_striping" ref="aeb3e638f8e7af103ed375a00d4ca0517" args="(const struct lu_env *env, struct lod_object *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_load_striping </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A generic function to initialize the stripe objects. </p>
<p>A protected version of <a class="el" href="lod__internal_8h.html#aae9716d83d5fcb58fdf4bd301edcf8d5" title="Initialize the object representing the stripes.">lod_load_striping_locked()</a> - load the striping information from storage, parse that and instantiate LU objects to represent the stripes. The LOD object <em>lo</em> supplies a pointer to the next sub-object in the LU stack so we can lock it. Also use <em>lo</em> to return an array of references to the newly instantiated objects.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object, where striping is stored and which gets an array of references</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if parsing and object creation succeed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01067">1067</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01806">dt_object_child()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, and <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03075">lod_ah_init()</a>, <a class="el" href="lod__object_8c_source.html#l01075">lod_declare_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l03600">lod_declare_object_destroy()</a>, <a class="el" href="lod__object_8c_source.html#l02769">lod_declare_xattr_del()</a>, <a class="el" href="lod__object_8c_source.html#l01918">lod_dir_declare_xattr_set()</a>, <a class="el" href="lod__object_8c_source.html#l03889">lod_object_lock()</a>, and <a class="el" href="lod__object_8c_source.html#l01987">lod_object_replace_parent_fid()</a>.</p>

</div>
</div>
<a class="anchor" id="aae9716d83d5fcb58fdf4bd301edcf8d5"></a><!-- doxytag: member="lod_internal.h::lod_load_striping_locked" ref="aae9716d83d5fcb58fdf4bd301edcf8d5" args="(const struct lu_env *env, struct lod_object *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_load_striping_locked </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the object representing the stripes. </p>
<p>Unless the stripes are initialized already, fetch LOV (for regular objects) or LMV (for directory objects) EA and call <a class="el" href="lod__internal_8h.html#a299907b294d1ac30fd0658e804d31b5b" title="Instantiate objects for striping.">lod_parse_striping()</a> to instantiate the objects representing the stripes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if parsing and object creation succeed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00988">988</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="dt__object_8h_source.html#l01806">dt_object_child()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_dir_slave_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_striping_cached</a>, <a class="el" href="lod__internal_8h_source.html#l00348">lod2lu_obj()</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__internal_8h_source.html#l00431">lod_get_lmv_ea()</a>, <a class="el" href="lod__internal_8h_source.html#l00425">lod_get_lov_ea()</a>, <a class="el" href="lod__object_8c_source.html#l00776">lod_load_lmv_shards()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__lov_8c_source.html#l00927">lod_parse_striping()</a>, <a class="el" href="lod__internal_8h_source.html#l00295">lod_thread_info::lti_buf</a>, <a class="el" href="lod__internal_8h_source.html#l00292">lod_thread_info::lti_ea_store</a>, <a class="el" href="lod__internal_8h_source.html#l00293">lod_thread_info::lti_ea_store_size</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l00954">lod_index_try()</a>, and <a class="el" href="lod__lov_8c_source.html#l01067">lod_load_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="abfc6149d68f9379f7915fd7e659296df"></a><!-- doxytag: member="lod_internal.h::lod_name_get" ref="abfc6149d68f9379f7915fd7e659296df" args="(const struct lu_env *env, const void *area, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__name.html">lu_name</a>* lod_name_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00381">381</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, and <a class="el" href="lod__internal_8h_source.html#l00305">lod_thread_info::lti_name</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c9f4ec3be3231aa1894077607d1f275"></a><!-- doxytag: member="lod_internal.h::lod_obj" ref="a6c9f4ec3be3231aa1894077607d1f275" args="(const struct lu_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlod__object.html">lod_object</a>* lod_obj </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__object.html">lu_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00353">353</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, and <a class="el" href="lod__internal_8h_source.html#l00315">lu_device_is_lod()</a>.</p>

<p>Referenced by <a class="el" href="lod__internal_8h_source.html#l00359">lod_dt_obj()</a>, and <a class="el" href="lod__dev_8c_source.html#l00204">lod_object_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="a00624f0b4db83fdb216485951c68152b"></a><!-- doxytag: member="lod_internal.h::lod_object_child" ref="a00624f0b4db83fdb216485951c68152b" args="(struct lod_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lod_object_child </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00364">364</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lod__internal_8h_source.html#l00348">lod2lu_obj()</a>, and <a class="el" href="lu__object_8h_source.html#l00762">lu_object_next()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bd90d51c3b31f70277187f7c1846d10"></a><!-- doxytag: member="lod_internal.h::lod_object_free_striping" ref="a3bd90d51c3b31f70277187f7c1846d10" args="(const struct lu_env *env, struct lod_object *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_object_free_striping </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release resources associated with striping. </p>
<p>If the object is striped (regular or directory), then release the stripe objects references and free the ldo_stripe array.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l04168">4168</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00270">lod_object::ldo_dir_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00253">lod_object::ldo_pattern</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_stripes_allocated</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_striping_cached</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03337">lod_declare_striped_object()</a>, <a class="el" href="lod__object_8c_source.html#l01869">lod_declare_xattr_set_lmv()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__object_8c_source.html#l04222">lod_object_free()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__object_8c_source.html#l02813">lod_xattr_del()</a>, and <a class="el" href="lod__object_8c_source.html#l02694">lod_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a512c575080504425dbdbfd0b2db9765f"></a><!-- doxytag: member="lod_internal.h::lod_object_set_pool" ref="a512c575080504425dbdbfd0b2db9765f" args="(struct lod_object *o, char *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_object_set_pool </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a pool the object belongs to. </p>
<p>When a striped object is being created, striping configuration may demand the stripes are allocated on a limited set of the targets. These limited sets are known as "pools". So we copy a pool name into the object and later actual creation methods (like <a class="el" href="lod__object_8c.html#ae967556b8dbe3bdf02573a64196a8b28" title="Implementation of dt_object_operations::do_create.">lod_object_create()</a>) will use this information to allocate the stripes properly.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>o</em>&nbsp;</td><td>object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pool</em>&nbsp;</td><td>pool name </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l02868">2868</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>References <a class="el" href="lod__internal_8h_source.html#l00255">lod_object::ldo_pool</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03075">lod_ah_init()</a>, <a class="el" href="lod__object_8c_source.html#l02905">lod_cache_parent_lov_striping()</a>, <a class="el" href="lod__object_8c_source.html#l02112">lod_lov_stripe_cache_clear()</a>, <a class="el" href="lod__object_8c_source.html#l04222">lod_object_free()</a>, <a class="el" href="lod__lov_8c_source.html#l00927">lod_parse_striping()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, and <a class="el" href="lod__qos_8c_source.html#l01636">lod_use_defined_striping()</a>.</p>

</div>
</div>
<a class="anchor" id="a62f8ccafd2a84d0276f4ce68e199034b"></a><!-- doxytag: member="lod_internal.h::lod_ost_pool_add" ref="a62f8ccafd2a84d0276f4ce68e199034b" args="(struct ost_pool *op, __u32 idx, unsigned int min_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_ost_pool_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structost__pool.html">ost_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>min_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a new target to an existing pool. </p>
<p>Add a new target device to the pool previously created and returned by <a class="el" href="lod__internal_8h.html#ac6fc44bfd045a27ab59c17185443c46a" title="Allocate a new pool for the specified device.">lod_pool_new()</a>. Each target can only be in each pool at most one time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op</em>&nbsp;</td><td>target pool to add new entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>pool index number to add to the <em>op</em> array </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>min_count</em>&nbsp;</td><td>minimum number of entries to expect in the pool</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if target could be added to the pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error if target <em>idx</em> was not added </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00537">537</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lod__pool_8c_source.html#l00500">lod_ost_pool_extend()</a>, <a class="el" href="obd_8h_source.html#l00349">ost_pool::op_array</a>, <a class="el" href="obd_8h_source.html#l00351">ost_pool::op_count</a>, and <a class="el" href="obd_8h_source.html#l00353">ost_pool::op_rw_sem</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, and <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>.</p>

</div>
</div>
<a class="anchor" id="adbc089920b13fc4cea3cb470319a6b0f"></a><!-- doxytag: member="lod_internal.h::lod_ost_pool_extend" ref="adbc089920b13fc4cea3cb470319a6b0f" args="(struct ost_pool *op, unsigned int min_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_ost_pool_extend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structost__pool.html">ost_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>min_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Increase the op_array size to hold more targets in this pool. </p>
<p>The size is increased to at least <em>min_count</em>, but may be larger for an existing pool since -&gt;op_array[] is growing exponentially. Caller must hold write op_rwlock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op</em>&nbsp;</td><td>pool structure </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>min_count</em>&nbsp;</td><td>minimum number of entries to handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00500">500</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00349">ost_pool::op_array</a>, <a class="el" href="obd_8h_source.html#l00351">ost_pool::op_count</a>, and <a class="el" href="obd_8h_source.html#l00352">ost_pool::op_size</a>.</p>

<p>Referenced by <a class="el" href="lod__pool_8c_source.html#l00537">lod_ost_pool_add()</a>, and <a class="el" href="lod__qos_8c_source.html#l00559">lod_qos_calc_rr()</a>.</p>

</div>
</div>
<a class="anchor" id="a621d46b5a406a380656cd36827fd1fe2"></a><!-- doxytag: member="lod_internal.h::lod_ost_pool_free" ref="a621d46b5a406a380656cd36827fd1fe2" args="(struct ost_pool *op)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_ost_pool_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structost__pool.html">ost_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>op</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free the pool after it was emptied and removed from /proc. </p>
<p>Note that all of the child/target entries referenced by this pool must have been removed by <a class="el" href="lod__internal_8h.html#adb9e2dc6c66aaf4d7c42c8de2b79c104" title="Remove an existing pool from the system.">lod_ost_pool_remove()</a> before it can be deleted from memory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op</em>&nbsp;</td><td>pool to be freed.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success or if pool was already freed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00611">611</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00349">ost_pool::op_array</a>, <a class="el" href="obd_8h_source.html#l00351">ost_pool::op_count</a>, <a class="el" href="obd_8h_source.html#l00353">ost_pool::op_rw_sem</a>, <a class="el" href="obd_8h_source.html#l00352">ost_pool::op_size</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__pool_8c_source.html#l00643">lod_pool_new()</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__lov_8c_source.html#l01372">lod_pools_fini()</a>, and <a class="el" href="lod__lov_8c_source.html#l01280">lod_pools_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aeebb7bbfebfd5aa9155e5f886f7a9b54"></a><!-- doxytag: member="lod_internal.h::lod_ost_pool_init" ref="aeebb7bbfebfd5aa9155e5f886f7a9b54" args="(struct ost_pool *op, unsigned int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_ost_pool_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structost__pool.html">ost_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00468">468</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd_8h_source.html#l00349">ost_pool::op_array</a>, <a class="el" href="obd_8h_source.html#l00351">ost_pool::op_count</a>, <a class="el" href="obd_8h_source.html#l00353">ost_pool::op_rw_sem</a>, <a class="el" href="obd_8h_source.html#l00352">ost_pool::op_size</a>, <a class="el" href="lod__pool_8c_source.html#l00467">POOL_INIT_COUNT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__pool_8c_source.html#l00643">lod_pool_new()</a>, and <a class="el" href="lod__lov_8c_source.html#l01280">lod_pools_init()</a>.</p>

</div>
</div>
<a class="anchor" id="adb9e2dc6c66aaf4d7c42c8de2b79c104"></a><!-- doxytag: member="lod_internal.h::lod_ost_pool_remove" ref="adb9e2dc6c66aaf4d7c42c8de2b79c104" args="(struct ost_pool *op, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_ost_pool_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structost__pool.html">ost_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove an existing pool from the system. </p>
<p>The specified pool must have previously been allocated by <a class="el" href="lod__internal_8h.html#ac6fc44bfd045a27ab59c17185443c46a" title="Allocate a new pool for the specified device.">lod_pool_new()</a> and not have any target members in the pool. If the removed target is not the last, compact the array to remove empty spaces.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op</em>&nbsp;</td><td>pointer to the original data structure </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>target index to be removed</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00577">577</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="obd_8h_source.html#l00349">ost_pool::op_array</a>, <a class="el" href="obd_8h_source.html#l00351">ost_pool::op_count</a>, <a class="el" href="obd_8h_source.html#l00353">ost_pool::op_rw_sem</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__pool_8c_source.html#l00823">lod_pool_remove()</a>, and <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>.</p>

</div>
</div>
<a class="anchor" id="a7620fcaabad269124cea08babc83e70a"></a><!-- doxytag: member="lod_internal.h::lod_parse_dir_striping" ref="a7620fcaabad269124cea08babc83e70a" args="(const struct lu_env *env, struct lod_object *lo, const struct lu_buf *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_parse_dir_striping </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create in-core represenation for a striped directory. </p>
<p>Parse the buffer containing LMV EA and instantiate LU objects representing the stripe objects. The pointers to the objects are stored in ldo_stripe field of <em>lo</em>. This function is used when we need to access an already created object (i.e. load from a disk).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>lod object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer containing LMV EA</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>if failed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l01462">1462</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8c_source.html#l00236">dt_locate_at()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_dir_slave_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_stripes_allocated</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02654">lmv_mds_md::lmv_md_v1</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lod__internal_8h_source.html#l00326">lod2lu_dev()</a>, <a class="el" href="lod__internal_8h_source.html#l00170">lod_device::lod_child</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__dev_8c_source.html#l00121">lod_fld_lookup()</a>, <a class="el" href="lod__internal_8h_source.html#l00189">lod_device::lod_mdt_descs</a>, <a class="el" href="lod__object_8c_source.html#l04168">lod_object_free_striping()</a>, <a class="el" href="lu__object_8h_source.html#l00619">lu_site::ls_top_dev</a>, <a class="el" href="lod__internal_8h_source.html#l00119">lod_tgt_desc::ltd_tgt</a>, <a class="el" href="lod__internal_8h_source.html#l00142">LTD_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00297">lod_thread_info::lti_fid</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="lustre__idl_8h_source.html#l00168">LU_SEQ_RANGE_ANY</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="a299907b294d1ac30fd0658e804d31b5b"></a><!-- doxytag: member="lod_internal.h::lod_parse_striping" ref="a299907b294d1ac30fd0658e804d31b5b" args="(const struct lu_env *env, struct lod_object *mo, const struct lu_buf *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_parse_striping </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiate objects for striping. </p>
<p>Parse striping information in <em>buf</em> and instantiate the objects representing the stripes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer storing LOV EA to parse</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if parsing and objects creation succeed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00927">927</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lod__internal_8h_source.html#l00251">lod_object::ldo_layout_gen</a>, <a class="el" href="lod__internal_8h_source.html#l00253">lod_object::ldo_pattern</a>, <a class="el" href="lod__internal_8h_source.html#l00252">lod_object::ldo_stripe_size</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01618">lov_mds_md_v3::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01505">lov_mds_md_v1::lmm_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l01617">lov_mds_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01507">lov_mds_md_v1::lmm_stripe_size</a>, <a class="el" href="lod__lov_8c_source.html#l00839">lod_initialize_objects()</a>, <a class="el" href="lod__object_8c_source.html#l02868">lod_object_set_pool()</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l01492">lov_pattern</a>, <a class="el" href="lustre__user_8h_source.html#l00352">LOV_PATTERN_F_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00988">lod_load_striping_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="a0cab6622ab68dbb7af618ea38d371403"></a><!-- doxytag: member="lod_internal.h::lod_pool_add" ref="a0cab6622ab68dbb7af618ea38d371403" args="(struct obd_device *obd, char *poolname, char *ostname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_pool_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>poolname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>ostname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a single target device to the named pool. </p>
<p>Add the target specified by <em>ostname</em> to the specified <em>poolname</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device on which to add the pool </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>poolname</em>&nbsp;</td><td>name of the pool to which to add the target <em>ostname</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ostname</em>&nbsp;</td><td>name of the target device to be added</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if <em>ostname</em> was (previously) added to the named pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00766">766</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lod__internal_8h_source.html#l00391">lod_foreach_ost</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00187">lod_device::lod_ost_descs</a>, <a class="el" href="lod__pool_8c_source.html#l00537">lod_ost_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lustre__user_8h_source.html#l00355">LOV_POOLNAMEF</a>, <a class="el" href="lod__internal_8h_source.html#l00065">lod_qos_rr::lqr_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="lustre__user_8h_source.html#l00506">obd_str2uuid()</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="lod__internal_8h_source.html#l00146">OST_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00070">pool_desc::pool_obds</a>, <a class="el" href="lod__internal_8h_source.html#l00072">pool_desc::pool_rr</a>, <a class="el" href="lod__internal_8h_source.html#l00080">pool_tgt_count</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a6275dc528c9d9e9e83e762bc650bd75f"></a><!-- doxytag: member="lod_internal.h::lod_pool_del" ref="a6275dc528c9d9e9e83e762bc650bd75f" args="(struct obd_device *obd, char *poolname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_pool_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>poolname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove the named pool from the OBD device. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device on which pool was previously created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>poolname</em>&nbsp;</td><td>name of pool to remove from <em>obd</em> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on successfully removing the pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error numbers for failures </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00726">726</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01331">cfs_hash_del_key()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="lod__internal_8h_source.html#l00205">lod_device::lod_pool_count</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="obd_8h_source.html#l00644">obd_device::obd_dev_lock</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="lod__internal_8h_source.html#l00074">pool_desc::pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00075">pool_desc::pool_proc_entry</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01372">lod_pools_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6fc44bfd045a27ab59c17185443c46a"></a><!-- doxytag: member="lod_internal.h::lod_pool_new" ref="ac6fc44bfd045a27ab59c17185443c46a" args="(struct obd_device *obd, char *poolname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_pool_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>poolname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate a new pool for the specified device. </p>
<p>Allocate a new <a class="el" href="structpool__desc.html">pool_desc</a> structure for the specified <em>new_pool</em> device to create a pool with the given <em>poolname</em>. The new pool structure is created with a single reference, and is freed when the reference count drops to zero.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>Lustre OBD device on which to add a pool iterator </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>poolname</em>&nbsp;</td><td>the name of the pool to be created</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>in case of success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error code in case of error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00643">643</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01259">cfs_hash_add_unique()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00316">INIT_HLIST_NODE</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="lod__pool_8c_source.html#l00611">lod_ost_pool_free()</a>, <a class="el" href="lod__pool_8c_source.html#l00468">lod_ost_pool_init()</a>, <a class="el" href="lod__internal_8h_source.html#l00205">lod_device::lod_pool_count</a>, <a class="el" href="lod__internal_8h_source.html#l00207">lod_device::lod_pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00208">lod_device::lod_pool_proc_entry</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lod__qos_8c_source.html#l00534">lod_qos_rr_init()</a>, <a class="el" href="lustre__user_8h_source.html#l00354">LOV_MAXPOOLNAME</a>, <a class="el" href="lustre__user_8h_source.html#l00355">LOV_POOLNAMEF</a>, <a class="el" href="lprocfs__status_8h_source.html#l00938">lprocfs_add_simple()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="lod__internal_8h_source.html#l00064">lod_qos_rr::lqr_pool</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd_8h_source.html#l00644">obd_device::obd_dev_lock</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lod__pool_8c_source.html#l00077">pool_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00073">pool_desc::pool_hash</a>, <a class="el" href="lod__internal_8h_source.html#l00074">pool_desc::pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00076">pool_desc::pool_lobd</a>, <a class="el" href="lod__internal_8h_source.html#l00069">pool_desc::pool_name</a>, <a class="el" href="lod__internal_8h_source.html#l00070">pool_desc::pool_obds</a>, <a class="el" href="lod__internal_8h_source.html#l00075">pool_desc::pool_proc_entry</a>, <a class="el" href="lod__pool_8c_source.html#l00411">pool_proc_operations</a>, <a class="el" href="lod__internal_8h_source.html#l00071">pool_desc::pool_refcount</a>, <a class="el" href="lod__internal_8h_source.html#l00072">pool_desc::pool_rr</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c485560de66ce4213ead25955446b17"></a><!-- doxytag: member="lod_internal.h::lod_pool_putref" ref="a1c485560de66ce4213ead25955446b17" args="(struct pool_desc *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_pool_putref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpool__desc.html">pool_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Drop a reference on the specified pool and free its memory if needed. </p>
<p>One reference is held by the LOD OBD device while it is configured, from the time the configuration log defines the pool until the time when it is dropped when the LOD OBD is cleaned up or the pool is deleted. This means that the pool will not be freed while the LOD device is configured, unless it is explicitly destroyed by the sysadmin. The pool structure is freed after the last reference on the structure is released.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pool</em>&nbsp;</td><td>pool descriptor to drop reference on and possibly free </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00095">95</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lod__pool_8c_source.html#l00611">lod_ost_pool_free()</a>, <a class="el" href="lod__internal_8h_source.html#l00064">lod_qos_rr::lqr_pool</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lod__internal_8h_source.html#l00073">pool_desc::pool_hash</a>, <a class="el" href="lod__internal_8h_source.html#l00074">pool_desc::pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00070">pool_desc::pool_obds</a>, <a class="el" href="lod__internal_8h_source.html#l00075">pool_desc::pool_proc_entry</a>, <a class="el" href="lod__internal_8h_source.html#l00071">pool_desc::pool_refcount</a>, and <a class="el" href="lod__internal_8h_source.html#l00072">pool_desc::pool_rr</a>.</p>

<p>Referenced by <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__pool_8c_source.html#l00876">lod_check_index_in_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00431">lod_dump_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00909">lod_find_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00726">lod_pool_del()</a>, <a class="el" href="lod__pool_8c_source.html#l00643">lod_pool_new()</a>, <a class="el" href="lod__pool_8c_source.html#l00823">lod_pool_remove()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, <a class="el" href="lod__lov_8c_source.html#l01097">lod_verify_striping()</a>, <a class="el" href="lod__pool_8c_source.html#l00293">pool_proc_start()</a>, and <a class="el" href="lod__pool_8c_source.html#l00344">pool_proc_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="a84ae23967718a25e3168650a991f65c9"></a><!-- doxytag: member="lod_internal.h::lod_pool_remove" ref="a84ae23967718a25e3168650a991f65c9" args="(struct obd_device *obd, char *poolname, char *ostname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_pool_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>poolname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>ostname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove the named target from the specified pool. </p>
<p>Remove one target named <em>ostname</em> from <em>poolname</em>. The <em>ostname</em> is searched for in the <a class="el" href="structlod__device.html">lod_device</a> lod_ost_bitmap array, to ensure the specified name actually exists in the pool.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device from which to remove <em>poolname</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>poolname</em>&nbsp;</td><td>name of the pool to be changed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ostname</em>&nbsp;</td><td>name of the target to remove from <em>poolname</em> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on successfully removing <em>ostname</em> from the pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>number on error (e.g. <em>ostname</em> not in pool) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00823">823</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00187">lod_device::lod_ost_descs</a>, <a class="el" href="lod__pool_8c_source.html#l00577">lod_ost_pool_remove()</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lustre__user_8h_source.html#l00355">LOV_POOLNAMEF</a>, <a class="el" href="lod__internal_8h_source.html#l00065">lod_qos_rr::lqr_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="lustre__user_8h_source.html#l00506">obd_str2uuid()</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="lod__internal_8h_source.html#l00146">OST_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00070">pool_desc::pool_obds</a>, <a class="el" href="lod__internal_8h_source.html#l00072">pool_desc::pool_rr</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ab5cd614625a56198ac4b366f0e7daf80"></a><!-- doxytag: member="lod_internal.h::lod_pools_fini" ref="ab5cd614625a56198ac4b366f0e7daf80" args="(struct lod_device *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_pools_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release the structures describing the pools. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device from which we release the structures</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>always </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01372">1372</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__pool_8c_source.html#l00611">lod_ost_pool_free()</a>, <a class="el" href="lod__pool_8c_source.html#l00726">lod_pool_del()</a>, <a class="el" href="lod__internal_8h_source.html#l00204">lod_device::lod_pool_info</a>, <a class="el" href="lod__internal_8h_source.html#l00207">lod_device::lod_pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lod__internal_8h_source.html#l00201">lod_device::lod_qos</a>, <a class="el" href="lod__internal_8h_source.html#l00090">lod_qos::lq_rr</a>, <a class="el" href="lod__internal_8h_source.html#l00064">lod_qos_rr::lqr_pool</a>, <a class="el" href="lod__internal_8h_source.html#l00074">pool_desc::pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00069">pool_desc::pool_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01638">lod_device_fini()</a>, and <a class="el" href="lod__dev_8c_source.html#l01529">lod_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="abb7a7cf4ced18e76886afed97d33af10"></a><!-- doxytag: member="lod_internal.h::lod_pools_init" ref="abb7a7cf4ced18e76886afed97d33af10" args="(struct lod_device *m, struct lustre_cfg *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_pools_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *&nbsp;</td>
          <td class="paramname"> <em>lcfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the structures used to store pools and default striping. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lcfg</em>&nbsp;</td><td>configuration structure storing default striping.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if initialization succeeds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01280">1280</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00039">__swab32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00165">CFS_HASH_DEFAULT</a>, <a class="el" href="libcfs__hash_8h_source.html#l00775">CFS_HASH_MAX_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00774">CFS_HASH_MIN_THETA</a>, <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="obd__support_8h_source.html#l00081">HASH_POOLS_BKT_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00082">HASH_POOLS_CUR_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00083">HASH_POOLS_MAX_BITS</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02748">lov_desc::ld_active_tgt_count</a>, <a class="el" href="lod__internal_8h_source.html#l00181">lod_device::lod_desc</a>, <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>, <a class="el" href="lod__lov_8c_source.html#l01263">lod_fix_desc()</a>, <a class="el" href="lod__pool_8c_source.html#l00611">lod_ost_pool_free()</a>, <a class="el" href="lod__pool_8c_source.html#l00468">lod_ost_pool_init()</a>, <a class="el" href="lod__internal_8h_source.html#l00205">lod_device::lod_pool_count</a>, <a class="el" href="lod__internal_8h_source.html#l00204">lod_device::lod_pool_info</a>, <a class="el" href="lod__internal_8h_source.html#l00207">lod_device::lod_pool_list</a>, <a class="el" href="lod__internal_8h_source.html#l00206">lod_device::lod_pools_hash_body</a>, <a class="el" href="lod__internal_8h_source.html#l00201">lod_device::lod_qos</a>, <a class="el" href="lod__qos_8c_source.html#l00534">lod_qos_rr_init()</a>, <a class="el" href="lod__internal_8h_source.html#l00210">lod_device::lod_sp_me</a>, <a class="el" href="lustre__idl_8h_source.html#l02741">LOV_DESC_MAGIC</a>, <a class="el" href="lod__internal_8h_source.html#l00091">lod_qos::lq_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00085">lod_qos::lq_oss_list</a>, <a class="el" href="lod__internal_8h_source.html#l00088">lod_qos::lq_prio_free</a>, <a class="el" href="lod__internal_8h_source.html#l00091">lod_qos::lq_reset</a>, <a class="el" href="lod__internal_8h_source.html#l00090">lod_qos::lq_rr</a>, <a class="el" href="lod__internal_8h_source.html#l00086">lod_qos::lq_rw_sem</a>, <a class="el" href="lod__internal_8h_source.html#l00089">lod_qos::lq_threshold_rr</a>, <a class="el" href="lod__internal_8h_source.html#l00065">lod_qos_rr::lqr_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00064">lod_qos_rr::lqr_pool</a>, <a class="el" href="lustre__cfg_8h_source.html#l00182">lustre_cfg_buf()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00146">LUSTRE_CFG_BUFLEN</a>, <a class="el" href="lustre__cfg_8h_source.html#l00210">lustre_cfg_string()</a>, <a class="el" href="lustre__sec_8h_source.html#l00316">LUSTRE_SP_CLI</a>, <a class="el" href="pack__generic_8c_source.html#l02053">lustre_swab_lov_desc()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lod__pool_8c_source.html#l00216">pool_hash_operations</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01529">lod_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6724d20204fb807ac210a407aa84e08"></a><!-- doxytag: member="lod_internal.h::lod_procfs_fini" ref="ae6724d20204fb807ac210a407aa84e08" args="(struct lod_device *lod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_procfs_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01638">lod_device_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="aa1423de5ddcf0377e6fcce6bd85cf936"></a><!-- doxytag: member="lod_internal.h::lod_procfs_init" ref="aa1423de5ddcf0377e6fcce6bd85cf936" args="(struct lod_device *lod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_procfs_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01529">lod_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3950998e92e7107b04fdb3866a20f6a"></a><!-- doxytag: member="lod_internal.h::lod_putref" ref="ab3950998e92e7107b04fdb3866a20f6a" args="(struct lod_device *lod, struct lod_tgt_descs *ltd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_putref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__tgt__descs.html">lod_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrease reference count on the target table. </p>
<p>Companion of <a class="el" href="lod__internal_8h.html#aa9ce4cf9ed012a300938f6c637618c01" title="Increase reference count on the target table.">lod_getref()</a> to release a reference on the target table. If this is the last reference and the OST entry was scheduled for deletion, the descriptor is removed from the table.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device from which we release a reference </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ltd</em>&nbsp;</td><td>target table (lod_ost_descs or lod_mdt_descs) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l00073">73</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="bitmap_8h_source.html#l00081">cfs_bitmap_clear()</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02748">lov_desc::ld_active_tgt_count</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__internal_8h_source.html#l00181">lod_device::lod_desc</a>, <a class="el" href="lod__internal_8h_source.html#l00187">lod_device::lod_ost_descs</a>, <a class="el" href="lod__pool_8c_source.html#l00577">lod_ost_pool_remove()</a>, <a class="el" href="lod__internal_8h_source.html#l00204">lod_device::lod_pool_info</a>, <a class="el" href="lod__internal_8h_source.html#l00128">lod_tgt_desc::ltd_active</a>, <a class="el" href="lod__internal_8h_source.html#l00158">lod_tgt_descs::ltd_death_row</a>, <a class="el" href="lod__internal_8h_source.html#l00121">lod_tgt_desc::ltd_exp</a>, <a class="el" href="lod__internal_8h_source.html#l00120">lod_tgt_desc::ltd_kill</a>, <a class="el" href="lod__internal_8h_source.html#l00162">lod_tgt_descs::ltd_mutex</a>, <a class="el" href="lod__internal_8h_source.html#l00128">lod_tgt_desc::ltd_reap</a>, <a class="el" href="lod__internal_8h_source.html#l00160">lod_tgt_descs::ltd_refcount</a>, <a class="el" href="lod__internal_8h_source.html#l00164">lod_tgt_descs::ltd_rw_sem</a>, <a class="el" href="lod__internal_8h_source.html#l00142">LTD_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00156">lod_tgt_descs::ltd_tgt_bitmap</a>, <a class="el" href="lod__internal_8h_source.html#l00154">lod_tgt_descs::ltd_tgtnr</a>, <a class="el" href="lod__internal_8h_source.html#l00122">lod_tgt_desc::ltd_uuid</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, and <a class="el" href="lod__qos_8c_source.html#l00145">qos_del_tgt()</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__lov_8c_source.html#l00529">lod_del_device()</a>, <a class="el" href="lod__lov_8c_source.html#l00490">lod_fini_tgt()</a>, <a class="el" href="lod__lov_8c_source.html#l00839">lod_initialize_objects()</a>, <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>, <a class="el" href="lod__object_8c_source.html#l04095">lod_object_init()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00823">lod_pool_remove()</a>, <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01029">lod_recovery_complete()</a>, <a class="el" href="lod__dev_8c_source.html#l00720">lod_sub_fini_all_llogs()</a>, <a class="el" href="lod__dev_8c_source.html#l00239">lod_sub_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00676">lod_sub_stop_recovery_threads()</a>, and <a class="el" href="lod__dev_8c_source.html#l01323">lod_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f23abfd59d0b5ed5e6240f02f34a898"></a><!-- doxytag: member="lod_internal.h::lod_qos_prep_create" ref="a8f23abfd59d0b5ed5e6240f02f34a898" args="(const struct lu_env *env, struct lod_object *lo, struct lu_attr *attr, const struct lu_buf *buf, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_qos_prep_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__object.html">lod_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a striping for an obejct. </p>
<p>The function creates a new striping for the object. A buffer containing configuration hints can be provided optionally. The function tries QoS algorithm first unless free space is distributed evenly among OSTs, but by default RR algorithm is preferred due to internal concurrency (QoS is serialized). The caller must ensure no concurrent calls to the function are made against the same object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lo</em>&nbsp;</td><td>LOD object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes OST objects will be declared with </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>suggested striping configuration or NULL </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>negated errno on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__qos_8c_source.html#l01848">1848</a> of file <a class="el" href="lod__qos_8c_source.html">lod_qos.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__idl_8h_source.html#l02747">lov_desc::ld_tgt_count</a>, <a class="el" href="lod__internal_8h_source.html#l00269">lod_object::ldo_def_stripe_offset</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_stripes_allocated</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lod__internal_8h_source.html#l00348">lod2lu_obj()</a>, <a class="el" href="lod__qos_8c_source.html#l01084">lod_alloc_ost_list()</a>, <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__internal_8h_source.html#l00181">lod_device::lod_desc</a>, <a class="el" href="lod__qos_8c_source.html#l01601">lod_get_stripecnt()</a>, <a class="el" href="lod__lov_8c_source.html#l00055">lod_getref()</a>, <a class="el" href="lod__internal_8h_source.html#l00187">lod_device::lod_ost_descs</a>, <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, <a class="el" href="lod__qos_8c_source.html#l00257">lod_qos_statfs_update()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00129">lod_sub_object_declare_create()</a>, <a class="el" href="packet-lustre_8c_source.html#l00086">LOV_MAGIC</a>, <a class="el" href="lod__internal_8h_source.html#l00057">LOV_OFFSET_DEFAULT</a>, <a class="el" href="lustre__user_8h_source.html#l00341">LOV_USER_MAGIC_SPECIFIC</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, <a class="el" href="lod__internal_8h_source.html#l00046">LOV_USES_ASSIGNED_STRIPE</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03337">lod_declare_striped_object()</a>.</p>

</div>
</div>
<a class="anchor" id="a5fb30590b55854931da51ad522e6014f"></a><!-- doxytag: member="lod_internal.h::lod_qos_rr_init" ref="a5fb30590b55854931da51ad522e6014f" args="(struct lod_qos_rr *lqr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_qos_rr_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__qos__rr.html">lod_qos_rr</a> *&nbsp;</td>
          <td class="paramname"> <em>lqr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__qos_8c_source.html#l00534">534</a> of file <a class="el" href="lod__qos_8c_source.html">lod_qos.c</a>.</p>

<p>References <a class="el" href="lod__internal_8h_source.html#l00060">lod_qos_rr::lqr_alloc</a>, and <a class="el" href="lod__internal_8h_source.html#l00065">lod_qos_rr::lqr_dirty</a>.</p>

<p>Referenced by <a class="el" href="lod__pool_8c_source.html#l00643">lod_pool_new()</a>, and <a class="el" href="lod__lov_8c_source.html#l01280">lod_pools_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4f6d91acb376f565220d7c804f1a230"></a><!-- doxytag: member="lod_internal.h::lod_striping_create" ref="ab4f6d91acb376f565220d7c804f1a230" args="(const struct lu_env *env, struct dt_object *dt, struct lu_attr *attr, struct dt_object_format *dof, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_striping_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creation of a striped regular object. </p>
<p>The function is called to create the stripe objects for a regular striped file. This can happen at the initial object creation or when the caller asks LOD to do so using -&gt;do_xattr_set() method (so called late striping). Notice all the information are already prepared in the form of the list of objects (ldo_stripe field). This is done during declare phase.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes the stripes will be created with </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>format of stripes (see OSD API description) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>if failed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l03530">3530</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00256">lod_object::ldo_stripe</a>, <a class="el" href="lod__internal_8h_source.html#l00250">lod_object::ldo_stripenr</a>, <a class="el" href="lod__internal_8h_source.html#l00260">lod_object::ldo_striping_cached</a>, <a class="el" href="lod__internal_8h_source.html#l00359">lod_dt_obj()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00166">lod_sub_object_create()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03567">lod_object_create()</a>, and <a class="el" href="lod__object_8c_source.html#l02694">lod_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d4f051722ccdd8cd00ba9ec986dfc67"></a><!-- doxytag: member="lod_internal.h::lod_sub_fini_llog" ref="a4d4f051722ccdd8cd00ba9ec986dfc67" args="(const struct lu_env *env, struct dt_device *dt, struct ptlrpc_thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lod_sub_fini_llog </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__thread.html">ptlrpc_thread</a> *&nbsp;</td>
          <td class="paramname"> <em>thread</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>finish sub llog context </p>
<p>Stop update recovery thread for the sub device, then cleanup the correspondent llog ctxt.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>lod device to do update recovery </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>thread</em>&nbsp;</td><td>recovery thread on this sub device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__dev_8c_source.html#l00482">482</a> of file <a class="el" href="lod__dev_8c_source.html">lod_dev.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="llog__cat_8c_source.html#l00271">llog_cat_close()</a>, <a class="el" href="llog__obd_8c_source.html#l00108">llog_cleanup()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__idl_8h_source.html#l03057">LLOG_UPDATELOG_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00720">lod_sub_fini_all_llogs()</a>, and <a class="el" href="lod__dev_8c_source.html#l00578">lod_sub_init_llog()</a>.</p>

</div>
</div>
<a class="anchor" id="a602bb9ef718f1af0dce98986a2304520"></a><!-- doxytag: member="lod_internal.h::lod_sub_get_thandle" ref="a602bb9ef718f1af0dce98986a2304520" args="(const struct lu_env *env, struct thandle *th, const struct dt_object *sub_obj, bool *record_update)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structthandle.html">thandle</a>* lod_sub_get_thandle </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>sub_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>record_update</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00057">57</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lod__internal_8h_source.html#l00336">dt2lod_dev()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="lod__dev_8c_source.html#l00121">lod_fld_lookup()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00168">LU_SEQ_RANGE_ANY</a>, <a class="el" href="lustre__idl_8h_source.html#l00167">LU_SEQ_RANGE_OST</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_complex</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="dt__object_8h_source.html#l01836">thandle::th_top</a>, <a class="el" href="lustre__update_8h_source.html#l00454">thandle_get_sub()</a>, <a class="el" href="lustre__update_8h_source.html#l00308">top_thandle::tt_master_sub_thandle</a>, and <a class="el" href="lustre__update_8h_source.html#l00310">top_thandle::tt_multiple_thandle</a>.</p>

<p>Referenced by <a class="el" href="lod__sub__object_8c_source.html#l00678">lod_sub_object_attr_set()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00166">lod_sub_object_create()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00641">lod_sub_object_declare_attr_set()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00129">lod_sub_object_declare_create()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00491">lod_sub_object_declare_delete()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00346">lod_sub_object_declare_destroy()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00419">lod_sub_object_declare_insert()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00873">lod_sub_object_declare_punch()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00206">lod_sub_object_declare_ref_add()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00276">lod_sub_object_declare_ref_del()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00795">lod_sub_object_declare_write()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00717">lod_sub_object_declare_xattr_del()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00561">lod_sub_object_declare_xattr_set()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00524">lod_sub_object_delete()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00381">lod_sub_object_destroy()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00455">lod_sub_object_index_insert()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00913">lod_sub_object_punch()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00240">lod_sub_object_ref_add()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00310">lod_sub_object_ref_del()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00835">lod_sub_object_write()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00755">lod_sub_object_xattr_del()</a>, and <a class="el" href="lod__sub__object_8c_source.html#l00602">lod_sub_object_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a580407458bfd72d5fde4a151dcb2e42f"></a><!-- doxytag: member="lod_internal.h::lod_sub_init_llog" ref="a580407458bfd72d5fde4a151dcb2e42f" args="(const struct lu_env *env, struct lod_device *lod, struct dt_device *dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_init_llog </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Init sub llog context. </p>
<p>Setup update llog ctxt for update recovery threads, then start the recovery thread (lod_sub_recovery_thread) to read update llog from the correspondent MDT to do update recovery.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>lod device to do update recovery </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>sub dt device for which the recovery thread is</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if initialization succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if initialization fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__dev_8c_source.html#l00578">578</a> of file <a class="el" href="lod__dev_8c_source.html">lod_dev.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lvfs_8h_source.html#l00061">lvfs_run_ctxt::dt</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="llog__osd_8c_source.html#l01872">llog_common_cat_ops</a>, <a class="el" href="llog__obd_8c_source.html#l00146">llog_setup()</a>, <a class="el" href="lustre__idl_8h_source.html#l03057">LLOG_UPDATELOG_ORIG_CTXT</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__internal_8h_source.html#l00170">lod_device::lod_child</a>, <a class="el" href="lod__internal_8h_source.html#l00192">lod_device::lod_child_recovery_thread</a>, <a class="el" href="lod__internal_8h_source.html#l00189">lod_device::lod_mdt_descs</a>, <a class="el" href="lod__dev_8c_source.html#l00482">lod_sub_fini_llog()</a>, <a class="el" href="lod__dev_8c_source.html#l00354">lod_sub_recovery_thread()</a>, <a class="el" href="lod__dev_8c_source.html#l00522">lodname2mdt_index()</a>, <a class="el" href="lod__dev_8c_source.html#l00276">lod_recovery_data::lrd_idx</a>, <a class="el" href="lod__dev_8c_source.html#l00273">lod_recovery_data::lrd_lod</a>, <a class="el" href="lod__dev_8c_source.html#l00274">lod_recovery_data::lrd_ltd</a>, <a class="el" href="lod__dev_8c_source.html#l00275">lod_recovery_data::lrd_thread</a>, <a class="el" href="lod__internal_8h_source.html#l00124">lod_tgt_desc::ltd_index</a>, <a class="el" href="lod__internal_8h_source.html#l00127">lod_tgt_desc::ltd_recovery_thread</a>, <a class="el" href="lod__internal_8h_source.html#l00119">lod_tgt_desc::ltd_tgt</a>, <a class="el" href="lod__internal_8h_source.html#l00142">LTD_TGT</a>, <a class="el" href="lod__internal_8h_source.html#l00156">lod_tgt_descs::ltd_tgt_bitmap</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00650">obd_device::obd_lvfs_ctxt</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00651">obd_device::obd_olg</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>, and <a class="el" href="obd_8c_source.html#l00114">thread</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>, and <a class="el" href="lod__dev_8c_source.html#l01072">lod_sub_init_llogs()</a>.</p>

</div>
</div>
<a class="anchor" id="ad327f3b22f1132764a98b3370832dcac"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_attr_set" ref="ad327f3b22f1132764a98b3370832dcac" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_attr *attr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_attr_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>attributes set </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation, and set attributes to the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to set attr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attrbutes to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if attributes setting succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the attributes setting fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00678">678</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02253">dt_attr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01167">lod_attr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a81a2b20c2756dc4d398643f35aaa9725"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_create" ref="a81a2b20c2756dc4d398643f35aaa9725" args="(const struct lu_env *env, struct dt_object *dt, struct lu_attr *attr, struct dt_allocation_hint *hint, struct dt_object_format *dof, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create sub-object. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation, and create the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>the object being created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>the attributes of the object being created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hint</em>&nbsp;</td><td>the hint of the creation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>the object format of the creation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>th]</em>&nbsp;</td><td>th the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the creation succeeds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the creation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00166">166</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03567">lod_object_create()</a>, <a class="el" href="lod__object_8c_source.html#l03530">lod_striping_create()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="af58ee0c8b5e542e99f2b3eaabc14182b"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_attr_set" ref="af58ee0c8b5e542e99f2b3eaabc14182b" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_attr *attr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_attr_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare attr_set. </p>
<p>Get transaction of next layer, and declare attr set.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to set attr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00641">641</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02238">dt_declare_attr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01075">lod_declare_attr_set()</a>, and <a class="el" href="lod__object_8c_source.html#l03275">lod_declare_init_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a0567c0d0eece690fccbcb6518978bf4d"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_create" ref="a0567c0d0eece690fccbcb6518978bf4d" args="(const struct lu_env *env, struct dt_object *dt, struct lu_attr *attr, struct dt_allocation_hint *hint, struct dt_object_format *dof, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare sub-object creation. </p>
<p>Get transaction of next layer and declare the creation of the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>the object being created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>the attributes of the object being created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hint</em>&nbsp;</td><td>the hint of the creation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>the object format of the creation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>th]</em>&nbsp;</td><td>th the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00129">129</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03407">lod_declare_object_create()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__qos_8c_source.html#l00674">lod_qos_declare_object_on()</a>, and <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ace40f3f5153ec353827b14ab0a687d6f"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_delete" ref="ace40f3f5153ec353827b14ab0a687d6f" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_key *key, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare sub-object index delete. </p>
<p>Get transaction of next layer and declare index deletion.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to delete index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index which will be deleted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00491">491</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02615">dt_declare_delete()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l00122">lod_declare_index_delete()</a>, and <a class="el" href="lod__object_8c_source.html#l03600">lod_declare_object_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a98c09eacf051a0f9009c4c4fe357fc81"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_destroy" ref="a98c09eacf051a0f9009c4c4fe357fc81" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare destroying sub-object. </p>
<p>Get transaction of next layer and declare the sub-object destroy.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>dt object to be destroyed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00346">346</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02137">dt_declare_destroy()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03600">lod_declare_object_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a987502925db8578d18c6ae334c148068"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_insert" ref="a987502925db8578d18c6ae334c148068" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_rec *rec, const struct dt_key *key, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare sub-object index insert. </p>
<p>Get transaction of next layer and declare index insert.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to insert index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record of the index which will be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index which will be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00419">419</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l00086">lod_declare_index_insert()</a>, and <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>.</p>

</div>
</div>
<a class="anchor" id="abc13dc2b5b72d3e52c9f8717ec873784"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_punch" ref="abc13dc2b5b72d3e52c9f8717ec873784" args="(const struct lu_env *env, struct dt_object *dt, __u64 start, __u64 end, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_punch </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare punch. </p>
<p>Get transaction of next layer and declare punch.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be written </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>start offset of punch </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>end</em>&nbsp;</td><td>end offet of punch </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the insertion succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the insertion fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00873">873</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02398">dt_declare_punch()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l04051">lod_declare_punch()</a>.</p>

</div>
</div>
<a class="anchor" id="aa33759a905c97c58f9f95ec02881aa5a"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_ref_add" ref="aa33759a905c97c58f9f95ec02881aa5a" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_ref_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare adding reference for the sub-object. </p>
<p>Get transaction of next layer and declare the reference adding.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>dt object to add reference </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00206">206</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02266">dt_declare_ref_add()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03754">lod_declare_ref_add()</a>, and <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>.</p>

</div>
</div>
<a class="anchor" id="ac611a84f2d5d36ce55b2dc1cf5f6ea51"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_ref_del" ref="ac611a84f2d5d36ce55b2dc1cf5f6ea51" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_ref_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare deleting reference for the sub-object. </p>
<p>Get transaction of next layer and declare the reference deleting.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>dt object to delete reference </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00276">276</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02292">dt_declare_ref_del()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03600">lod_declare_object_destroy()</a>, and <a class="el" href="lod__object_8c_source.html#l03777">lod_declare_ref_del()</a>.</p>

</div>
</div>
<a class="anchor" id="a00516d81e357fe00aa387b6e75178806"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_write" ref="a00516d81e357fe00aa387b6e75178806" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_buf *buf, loff_t pos, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare buffer write. </p>
<p>Get transaction of next layer and declare buffer write.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be written </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer to write which includes an embedded size field </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>offet in the object to start writing at </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the insertion succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the insertion fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00795">795</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02377">dt_declare_write()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l04030">lod_declare_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4ecb771703c63d6aef1b06c6bee02b7"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_xattr_del" ref="ab4ecb771703c63d6aef1b06c6bee02b7" args="(const struct lu_env *env, struct dt_object *dt, const char *name, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_xattr_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare xattr_del. </p>
<p>Get transaction of next layer, and declare xattr deletion.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to delete xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr to be deleted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00717">717</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02514">dt_declare_xattr_del()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01075">lod_declare_attr_set()</a>, and <a class="el" href="lod__object_8c_source.html#l02769">lod_declare_xattr_del()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f10b89c8151db2fa889ee2a67cf19f5"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_declare_xattr_set" ref="a6f10b89c8151db2fa889ee2a67cf19f5" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_buf *buf, const char *name, int fl, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_declare_xattr_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare xattr_set. </p>
<p>Get transaction of next layer, and declare xattr set.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to set xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>xattr to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fl</em>&nbsp;</td><td>flag for setting xattr</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the declaration succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the declaration fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00561">561</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00680">update_record_size</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01075">lod_declare_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l03337">lod_declare_striped_object()</a>, <a class="el" href="lod__object_8c_source.html#l02061">lod_declare_xattr_set()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__object_8c_source.html#l01918">lod_dir_declare_xattr_set()</a>, and <a class="el" href="lod__object_8c_source.html#l01987">lod_object_replace_parent_fid()</a>.</p>

</div>
</div>
<a class="anchor" id="a94eeffa26d074c3f8e944ee0b73be7ba"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_delete" ref="a94eeffa26d074c3f8e944ee0b73be7ba" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_key *name, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete index of sub object. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation, and delete the index.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to delete index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index to be deleted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the deletion succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the deletion fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00524">524</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02630">dt_delete()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l00138">lod_index_delete()</a>, and <a class="el" href="lod__object_8c_source.html#l03679">lod_object_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b4d4e0b66ecd010edb61636b5ed64f5"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_destroy" ref="a7b4d4e0b66ecd010edb61636b5ed64f5" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy sub-object. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation and destroy the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>dt object to be destroyed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the destroy succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the destroy fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00381">381</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02151">dt_destroy()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03679">lod_object_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f685cb685e3eb5b2d4eef623360416a"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_index_insert" ref="a5f685cb685e3eb5b2d4eef623360416a" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_rec *rec, const struct dt_key *key, struct thandle *th, int ign)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_index_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ign</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert index of sub object. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation, and insert the index.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to insert index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record of the index to be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index to be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ign</em>&nbsp;</td><td>whether ignore quota</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the insertion succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the insertion fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00455">455</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l00103">lod_index_insert()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="ad95c6ca512c654c0a33ae76656699b69"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_punch" ref="ad95c6ca512c654c0a33ae76656699b69" args="(const struct lu_env *env, struct dt_object *dt, __u64 start, __u64 end, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_punch </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Punch to sub object. </p>
<p>Get transaction of next layer, records buffer write if it belongs to Cross-MDT operation, and punch object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be written </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>start offset of punch </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>end</em>&nbsp;</td><td>end offset of punch </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>capa</em>&nbsp;</td><td>capability of the write</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>the</em>&nbsp;</td><td>buffer size in bytes if it succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if it fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00913">913</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02408">dt_punch()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l04061">lod_punch()</a>.</p>

</div>
</div>
<a class="anchor" id="a6cc276e67b1a6d0443c51a98bcfe9b95"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_ref_add" ref="a6cc276e67b1a6d0443c51a98bcfe9b95" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_ref_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add reference for the sub-object. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation and add reference of the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>dt object to add reference </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if it succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if it fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00240">240</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02279">dt_ref_add()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03765">lod_ref_add()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c8a954c1f626dfc3b5806999e86eaaa"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_ref_del" ref="a2c8a954c1f626dfc3b5806999e86eaaa" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_ref_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete reference for the sub-object. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation and delete reference of the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>dt object to delete reference </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if it succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if it fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00310">310</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02305">dt_ref_del()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03679">lod_object_destroy()</a>, and <a class="el" href="lod__object_8c_source.html#l03788">lod_ref_del()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cc285040faf5c4dc9374ab9d7a7f86a"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_write" ref="a5cc285040faf5c4dc9374ab9d7a7f86a" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_buf *buf, loff_t *pos, struct thandle *th, int rq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t lod_sub_object_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write buffer to sub object. </p>
<p>Get transaction of next layer, records buffer write if it belongs to Cross-MDT operation, and write buffer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be written </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer to write which includes an embedded size field </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>offet in the object to start writing at </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rq</em>&nbsp;</td><td>enforcement for this write</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>the</em>&nbsp;</td><td>buffer size in bytes if it succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if it fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00835">835</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02388">dt_write()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l04044">lod_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ad19c3535bc4becc8ff47596f7fe1e59b"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_xattr_del" ref="ad19c3535bc4becc8ff47596f7fe1e59b" args="(const struct lu_env *env, struct dt_object *dt, const char *name, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_xattr_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xattribute deletion </p>
<p>Get transaction of next layer, record update if it belongs to cross-MDT operation and delete xattr.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to delete xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr to be deleted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the deletion succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the deletion fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00755">755</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02529">dt_xattr_del()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01167">lod_attr_set()</a>, <a class="el" href="lod__object_8c_source.html#l02813">lod_xattr_del()</a>, and <a class="el" href="lod__object_8c_source.html#l02186">lod_xattr_del_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a002e36508032e49f98b44386dca5ffa6"></a><!-- doxytag: member="lod_internal.h::lod_sub_object_xattr_set" ref="a002e36508032e49f98b44386dca5ffa6" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_buf *buf, const char *name, int fl, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_object_xattr_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set xattr. </p>
<p>Get transaction of next layer, record updates if it belongs to cross-MDT operation, and set xattr to the object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to set xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>xattr to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fl</em>&nbsp;</td><td>flag for setting xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the xattr setting succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if xattr setting fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00602">602</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__update_8h_source.html#l00640">update_record_pack</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l01167">lod_attr_set()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__object_8c_source.html#l01987">lod_object_replace_parent_fid()</a>, <a class="el" href="lod__object_8c_source.html#l02694">lod_xattr_set()</a>, <a class="el" href="lod__object_8c_source.html#l02138">lod_xattr_set_internal()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c971b075f3c4df99ec4e4df1030f200"></a><!-- doxytag: member="lod_internal.h::lod_sub_prep_llog" ref="a1c971b075f3c4df99ec4e4df1030f200" args="(const struct lu_env *env, struct lod_device *lod, struct dt_device *dt, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_sub_prep_llog </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__sub__object_8c_source.html#l00937">937</a> of file <a class="el" href="lod__sub__object_8c_source.html">lod_sub_object.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l03071">llog_catid::lci_logid</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lustre__log_8h_source.html#l00265">llog_handle::lgh_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03065">llog_logid::lgl_ogen</a>, <a class="el" href="lustre__idl_8h_source.html#l03064">llog_logid::lgl_oi</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="llog__cat_8c_source.html#l00271">llog_cat_close()</a>, <a class="el" href="lustre__log_8h_source.html#l00306">LLOG_CTXT_FLAG_NORMAL_FID</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="packet-lustre_8c_source.html#l00356">LLOG_F_IS_CAT</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="llog_8c_source.html#l00345">llog_init_handle()</a>, <a class="el" href="lustre__idl_8h_source.html#l03300">LLOG_MIN_CHUNK_SIZE</a>, <a class="el" href="llog_8c_source.html#l01083">llog_open()</a>, <a class="el" href="llog_8c_source.html#l00963">llog_open_create()</a>, <a class="el" href="lustre__log_8h_source.html#l00064">LLOG_OPEN_EXISTS</a>, <a class="el" href="llog__osd_8c_source.html#l01913">llog_osd_get_cat_list()</a>, <a class="el" href="llog__osd_8c_source.html#l02031">llog_osd_put_cat_list()</a>, <a class="el" href="lustre__idl_8h_source.html#l03057">LLOG_UPDATELOG_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00325">llog_ctxt::loc_chunk_size</a>, <a class="el" href="lustre__log_8h_source.html#l00319">llog_ctxt::loc_flags</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="lod__internal_8h_source.html#l00331">lod2obd()</a>, <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>, <a class="el" href="lod__dev_8c_source.html#l00522">lodname2mdt_index()</a>, <a class="el" href="lustre__log__user_8h_source.html#l00072">logid_id()</a>, <a class="el" href="lustre__log__user_8h_source.html#l00067">logid_set_id()</a>, <a class="el" href="lod__internal_8h_source.html#l00308">lod_thread_info::lti_cid</a>, <a class="el" href="lod__internal_8h_source.html#l00297">lod_thread_info::lti_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00423">lu_update_log_fid()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>, and <a class="el" href="lod__dev_8c_source.html#l00354">lod_sub_recovery_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2fed6443561c5eb1930fe417b652190"></a><!-- doxytag: member="lod_internal.h::lod_verify_striping" ref="ad2fed6443561c5eb1930fe417b652190" args="(struct lod_device *d, const struct lu_buf *buf, bool is_from_disk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lod_verify_striping </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_from_disk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verify striping. </p>
<p>Check the validity of all fields including the magic, stripe size, stripe count, stripe offset and that the pool is present. Also check that each target index points to an existing target. The additional <em>is_from_disk</em> turns additional checks. In some cases zero fields are allowed (like pattern=0).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>d</em>&nbsp;</td><td>LOD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer with LOV EA to verify </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>is_from_disk</em>&nbsp;</td><td>0 - from user, allow some fields to be 0 1 - from disk, do not allow</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the striping is valid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>if striping is invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__lov_8c_source.html#l01097">1097</a> of file <a class="el" href="lod__lov_8c_source.html">lod_lov.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00087">cfs_bitmap_check()</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__user_8h_source.html#l00385">lov_user_md_v1::lmm_magic</a>, <a class="el" href="lustre__user_8h_source.html#l00386">lov_user_md_v1::lmm_pattern</a>, <a class="el" href="lustre__user_8h_source.html#l00411">lov_user_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__user_8h_source.html#l00389">lov_user_md_v1::lmm_stripe_count</a>, <a class="el" href="lustre__user_8h_source.html#l00391">lov_user_md_v1::lmm_stripe_offset</a>, <a class="el" href="lustre__user_8h_source.html#l00388">lov_user_md_v1::lmm_stripe_size</a>, <a class="el" href="lod__pool_8c_source.html#l00876">lod_check_index_in_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00909">lod_find_pool()</a>, <a class="el" href="lod__pool_8c_source.html#l00095">lod_pool_putref()</a>, <a class="el" href="lustre__idl_8h_source.html#l01489">LOV_MAGIC_V1_DEF</a>, <a class="el" href="lustre__idl_8h_source.html#l01490">LOV_MAGIC_V3_DEF</a>, <a class="el" href="lustre__user_8h_source.html#l00358">LOV_MIN_STRIPE_SIZE</a>, <a class="el" href="lod__internal_8h_source.html#l00057">LOV_OFFSET_DEFAULT</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, <a class="el" href="lustre__user_8h_source.html#l00336">LOV_USER_MAGIC_V1</a>, <a class="el" href="lustre__user_8h_source.html#l00339">LOV_USER_MAGIC_V3</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="lod__internal_8h_source.html#l00080">pool_tgt_count</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l02233">lod_xattr_set_lov_on_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a18aec61bfeeaf9843029b0b96b701be2"></a><!-- doxytag: member="lod_internal.h::lodname2mdt_index" ref="a18aec61bfeeaf9843029b0b96b701be2" args="(char *lodname, __u32 *mdt_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lodname2mdt_index </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>lodname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>mdt_index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extract MDT target index from a device name. </p>
<p>a helper function to extract index from the given device name like "fsname-MDTxxxx-mdtlov"</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lodname</em>&nbsp;</td><td>device name </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>mdt_index</em>&nbsp;</td><td>extracted index</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>if the name is invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__dev_8c_source.html#l00522">522</a> of file <a class="el" href="lod__dev_8c_source.html">lod_dev.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>, <a class="el" href="lod__dev_8c_source.html#l00296">lod_process_recovery_updates()</a>, <a class="el" href="lod__dev_8c_source.html#l00578">lod_sub_init_llog()</a>, and <a class="el" href="lod__sub__object_8c_source.html#l00937">lod_sub_prep_llog()</a>.</p>

</div>
</div>
<a class="anchor" id="a463d5c14687298675a09ddb5b0a6a22b"></a><!-- doxytag: member="lod_internal.h::lu2lod_dev" ref="a463d5c14687298675a09ddb5b0a6a22b" args="(struct lu_device *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlod__device.html">lod_device</a>* lu2lod_dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00320">320</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00168">lod_device::lod_dt_dev</a>, and <a class="el" href="lod__internal_8h_source.html#l00315">lu_device_is_lod()</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l03075">lod_ah_init()</a>, <a class="el" href="lod__qos_8c_source.html#l01084">lod_alloc_ost_list()</a>, <a class="el" href="lod__qos_8c_source.html#l01375">lod_alloc_qos()</a>, <a class="el" href="lod__qos_8c_source.html#l00933">lod_alloc_rr()</a>, <a class="el" href="lod__qos_8c_source.html#l01185">lod_alloc_specific()</a>, <a class="el" href="lod__object_8c_source.html#l03407">lod_declare_object_create()</a>, <a class="el" href="lod__object_8c_source.html#l01869">lod_declare_xattr_set_lmv()</a>, <a class="el" href="lod__dev_8c_source.html#l01638">lod_device_fini()</a>, <a class="el" href="lod__dev_8c_source.html#l01586">lod_device_free()</a>, <a class="el" href="lod__object_8c_source.html#l01918">lod_dir_declare_xattr_set()</a>, <a class="el" href="lod__lov_8c_source.html#l00636">lod_generate_and_set_lovea()</a>, <a class="el" href="lod__lov_8c_source.html#l00839">lod_initialize_objects()</a>, <a class="el" href="lod__object_8c_source.html#l00776">lod_load_lmv_shards()</a>, <a class="el" href="lod__dev_8c_source.html#l01678">lod_obd_connect()</a>, <a class="el" href="lod__dev_8c_source.html#l01717">lod_obd_disconnect()</a>, <a class="el" href="lod__dev_8c_source.html#l01811">lod_obd_get_info()</a>, <a class="el" href="lod__dev_8c_source.html#l01876">lod_obd_set_info_async()</a>, <a class="el" href="lod__object_8c_source.html#l04095">lod_object_init()</a>, <a class="el" href="lod__object_8c_source.html#l01462">lod_parse_dir_striping()</a>, <a class="el" href="lod__pool_8c_source.html#l00766">lod_pool_add()</a>, <a class="el" href="lod__pool_8c_source.html#l00726">lod_pool_del()</a>, <a class="el" href="lod__pool_8c_source.html#l00643">lod_pool_new()</a>, <a class="el" href="lod__pool_8c_source.html#l00823">lod_pool_remove()</a>, <a class="el" href="lod__object_8c_source.html#l01406">lod_prep_lmv_md()</a>, <a class="el" href="lod__object_8c_source.html#l01691">lod_prep_md_striped_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01105">lod_prepare()</a>, <a class="el" href="lod__dev_8c_source.html#l00840">lod_process_config()</a>, <a class="el" href="lod__qos_8c_source.html#l01696">lod_qos_parse_config()</a>, <a class="el" href="lod__qos_8c_source.html#l01848">lod_qos_prep_create()</a>, <a class="el" href="lod__dev_8c_source.html#l01029">lod_recovery_complete()</a>, <a class="el" href="lod__object_8c_source.html#l01267">lod_xattr_get()</a>, and <a class="el" href="lod__object_8c_source.html#l02233">lod_xattr_set_lov_on_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="afd1c6a189e348c0a71e2ea68e7742f2e"></a><!-- doxytag: member="lod_internal.h::lu2lod_obj" ref="afd1c6a189e348c0a71e2ea68e7742f2e" args="(struct lu_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlod__object.html">lod_object</a>* lu2lod_obj </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__object.html">lu_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00342">342</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lod__internal_8h_source.html#l00246">lod_object::ldo_obj</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, and <a class="el" href="lod__internal_8h_source.html#l00315">lu_device_is_lod()</a>.</p>

<p>Referenced by <a class="el" href="lod__object_8c_source.html#l04222">lod_object_free()</a>, <a class="el" href="lod__object_8c_source.html#l04256">lod_object_print()</a>, and <a class="el" href="lod__object_8c_source.html#l04201">lod_object_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a09e2ed5fd9864a23c865b236f6eda24c"></a><!-- doxytag: member="lod_internal.h::lu_device_is_lod" ref="a09e2ed5fd9864a23c865b236f6eda24c" args="(struct lu_device *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lu_device_is_lod </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__internal_8h_source.html#l00315">315</a> of file <a class="el" href="lod__internal_8h_source.html">lod_internal.h</a>.</p>

<p>References <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="lu__object_8h_source.html#l00279">lu_device::ld_ops</a>, and <a class="el" href="lod__dev_8c_source.html#l01172">lod_lu_ops</a>.</p>

<p>Referenced by <a class="el" href="lod__internal_8h_source.html#l00336">dt2lod_dev()</a>, <a class="el" href="lod__internal_8h_source.html#l00353">lod_obj()</a>, <a class="el" href="lod__internal_8h_source.html#l00320">lu2lod_dev()</a>, and <a class="el" href="lod__internal_8h_source.html#l00342">lu2lod_obj()</a>.</p>

</div>
</div>
<a class="anchor" id="a44fec5e7e372cc69a6ff756c9c6a8347"></a><!-- doxytag: member="lod_internal.h::qos_add_tgt" ref="a44fec5e7e372cc69a6ff756c9c6a8347" args="(struct lod_device *, struct lod_tgt_desc *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qos_add_tgt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ost_desc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a new target to Quality of Service (QoS) target table. </p>
<p>Add a new OST target to the structure representing an OSS. Resort the list of known OSSs by the number of OSTs attached to each OSS. The OSS list is protected internally and no external locking is required.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ost_desc</em>&nbsp;</td><td>OST description</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__qos_8c_source.html#l00074">74</a> of file <a class="el" href="lod__qos_8c_source.html">lod_qos.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00523">ptlrpc_connection::c_remote_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lod__qos_8c_source.html#l00053">D_QOS</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00217">obd_export::exp_connection</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lnetctl_8c_source.html#l00969">list</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lod__internal_8h_source.html#l00201">lod_device::lod_qos</a>, <a class="el" href="lod__internal_8h_source.html#l00091">lod_qos::lq_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00085">lod_qos::lq_oss_list</a>, <a class="el" href="lod__internal_8h_source.html#l00090">lod_qos::lq_rr</a>, <a class="el" href="lod__internal_8h_source.html#l00086">lod_qos::lq_rw_sem</a>, <a class="el" href="lod__internal_8h_source.html#l00099">lod_qos_oss::lqo_oss_list</a>, <a class="el" href="lod__internal_8h_source.html#l00105">lod_qos_oss::lqo_ost_count</a>, <a class="el" href="lod__internal_8h_source.html#l00098">lod_qos_oss::lqo_uuid</a>, <a class="el" href="lod__internal_8h_source.html#l00065">lod_qos_rr::lqr_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00121">lod_tgt_desc::ltd_exp</a>, <a class="el" href="lod__internal_8h_source.html#l00125">lod_tgt_desc::ltd_qos</a>, <a class="el" href="lod__internal_8h_source.html#l00122">lod_tgt_desc::ltd_uuid</a>, <a class="el" href="lod__internal_8h_source.html#l00109">ltd_qos::ltq_oss</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>.</p>

</div>
</div>
<a class="anchor" id="ab78befa6e3d805c85bfe5657e342195f"></a><!-- doxytag: member="lod_internal.h::qos_del_tgt" ref="ab78befa6e3d805c85bfe5657e342195f" args="(struct lod_device *, struct lod_tgt_desc *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qos_del_tgt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlod__device.html">lod_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlod__tgt__desc.html">lod_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ost_desc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove OST target from QoS table. </p>
<p>Removes given OST target from QoS table and releases related OSS structure if no OSTs remain on the OSS.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lod</em>&nbsp;</td><td>LOD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ost_desc</em>&nbsp;</td><td>OST description</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>if no OSS was found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lod__qos_8c_source.html#l00145">145</a> of file <a class="el" href="lod__qos_8c_source.html">lod_qos.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lod__qos_8c_source.html#l00053">D_QOS</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="lod__internal_8h_source.html#l00201">lod_device::lod_qos</a>, <a class="el" href="lod__internal_8h_source.html#l00091">lod_qos::lq_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00090">lod_qos::lq_rr</a>, <a class="el" href="lod__internal_8h_source.html#l00086">lod_qos::lq_rw_sem</a>, <a class="el" href="lod__internal_8h_source.html#l00099">lod_qos_oss::lqo_oss_list</a>, <a class="el" href="lod__internal_8h_source.html#l00105">lod_qos_oss::lqo_ost_count</a>, <a class="el" href="lod__internal_8h_source.html#l00098">lod_qos_oss::lqo_uuid</a>, <a class="el" href="lod__internal_8h_source.html#l00065">lod_qos_rr::lqr_dirty</a>, <a class="el" href="lod__internal_8h_source.html#l00125">lod_tgt_desc::ltd_qos</a>, <a class="el" href="lod__internal_8h_source.html#l00109">ltd_qos::ltq_oss</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l00073">lod_putref()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a6f488be9b0758b51bdf27d673712bc6b"></a><!-- doxytag: member="lod_internal.h::lod_lu_obj_ops" ref="a6f488be9b0758b51bdf27d673712bc6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__object__operations.html">lu_object_operations</a> <a class="el" href="lod__object_8c.html#a6f488be9b0758b51bdf27d673712bc6b">lod_lu_obj_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l04264">4264</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00204">lod_object_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="a72093e53bdf476ef11cc91965a07991f"></a><!-- doxytag: member="lod_internal.h::lod_lu_ops" ref="a72093e53bdf476ef11cc91965a07991f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__device__operations.html">lu_device_operations</a> <a class="el" href="lod__internal_8h.html#a72093e53bdf476ef11cc91965a07991f">lod_lu_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__dev_8c_source.html#l01172">1172</a> of file <a class="el" href="lod__dev_8c_source.html">lod_dev.c</a>.</p>

<p>Referenced by <a class="el" href="lod__internal_8h_source.html#l00315">lu_device_is_lod()</a>.</p>

</div>
</div>
<a class="anchor" id="a93f1c48472664a89401155982eb10a23"></a><!-- doxytag: member="lod_internal.h::lod_obj_ops" ref="a93f1c48472664a89401155982eb10a23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__object__operations.html">dt_object_operations</a> <a class="el" href="lod__object_8c.html#a93f1c48472664a89401155982eb10a23">lod_obj_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__object_8c_source.html#l03982">3982</a> of file <a class="el" href="lod__object_8c_source.html">lod_object.c</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00204">lod_object_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="a20d9d14ad2c941c7f89468ffa4045273"></a><!-- doxytag: member="lod_internal.h::lod_object_kmem" ref="a20d9d14ad2c941c7f89468ffa4045273" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="lod__internal_8h.html#a20d9d14ad2c941c7f89468ffa4045273">lod_object_kmem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__dev_8c_source.html#l00174">174</a> of file <a class="el" href="lod__dev_8c_source.html">lod_dev.c</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l00204">lod_object_alloc()</a>, and <a class="el" href="lod__object_8c_source.html#l04222">lod_object_free()</a>.</p>

</div>
</div>
<a class="anchor" id="a19d20b5ced2d424fce13df56975e68ca"></a><!-- doxytag: member="lod_internal.h::lod_thread_key" ref="a19d20b5ced2d424fce13df56975e68ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__context__key.html">lu_context_key</a> <a class="el" href="lod__internal_8h.html#a19d20b5ced2d424fce13df56975e68ca">lod_thread_key</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="lod__internal_8h_source.html#l00372">lod_env_info()</a>.</p>

</div>
</div>
<a class="anchor" id="a482f6f8430424db32b75a1344cb3eaea"></a><!-- doxytag: member="lod_internal.h::pool_hash_operations" ref="a482f6f8430424db32b75a1344cb3eaea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a> <a class="el" href="lov__pool_8c.html#a482f6f8430424db32b75a1344cb3eaea">pool_hash_operations</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lod__pool_8c_source.html#l00216">216</a> of file <a class="el" href="lod__pool_8c_source.html">lod_pool.c</a>.</p>

<p>Referenced by <a class="el" href="lod__lov_8c_source.html#l01280">lod_pools_init()</a>, and <a class="el" href="lov__obd_8c_source.html#l00782">lov_setup()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
