<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ldlm/ldlm_flock.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ldlm/ldlm_flock.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="list_8h_source.html">libcfs/list.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>&quot;</code><br/>

<p><a href="ldlm__flock_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__flock__lookup__cb__data.html">ldlm_flock_lookup_cb_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">POSIX locks deadlock detection code.  <a href="structldlm__flock__lookup__cb__data.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__flock__wait__data.html">ldlm_flock_wait_data</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LDLM</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This file implements POSIX lock type for Lustre.  <a href="#abda60744d497fcfe370cfd6b2d65c7ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#aca26ceb18d60002c70616131200c9fba">list_for_remaining_safe</a>(pos, n, <a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>)&nbsp;&nbsp;&nbsp;for (n = pos-&gt;next; pos != (<a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>); pos = n, n = pos-&gt;next)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list_for_remaining_safe - iterate over the remaining entries in a list and safeguard against removal of a list entry.  <a href="#aca26ceb18d60002c70616131200c9fba"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a4f1a8bd5f1a73978c8dcd620d103d98a">ldlm_flock_blocking_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *desc, void *data, int flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a699a4a28dccf0d4972d669d4889f9b02">ldlm_same_flock_owner</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *new)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#ac61996d54b7a43b15e2a1daac108e186">ldlm_flocks_overlap</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *new)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a12c499f982ebe5482631db7927a1825a">ldlm_flock_blocking_link</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *req, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#adf85df18db0574a9c903a5fff76f187c">ldlm_flock_blocking_unlink</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#acf86b75d4db2eafdedcf90c33b3014c7">ldlm_flock_destroy</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#ae8a9242adffe9f8bf718cf9b3a67737b">ldlm_flock_lookup_cb</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structcfs__hash__bd.html">cfs_hash_bd</a> *bd, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a91e9e98f8572f882cfba3292cafae013">ldlm_flock_deadlock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *req, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *bl_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a794c2aa6ad22889ca9c01057fe85dcb9">ldlm_flock_cancel_on_deadlock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a5e963b8762a5ee599e17ab4bb5232cea">ldlm_process_flock_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *req, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *flags, int first_enq, enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> *err, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a granting attempt for flock lock.  <a href="#a5e963b8762a5ee599e17ab4bb5232cea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a63daf100716fab0f97d6706f17490211">ldlm_flock_interrupted_wait</a> (void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga921f8d85541cbe1fa330b9a12080103f">ldlm_flock_completion_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flock completion callback function.  <a href="group__LDLM.html#ga921f8d85541cbe1fa330b9a12080103f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#af1d5630a4d3ecdb282caccb56d520e89">ldlm_flock_policy_wire_to_local</a> (const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a97967bbb20eeada0b527c658f13b2214">ldlm_flock_policy_local_to_wire</a> (const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a9b69dcf98fdd67b34e2b37acccc23581">ldlm_export_flock_hash</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, const void *key, unsigned mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a1876c4f54b61bd36235eb0adfbe62b51">ldlm_export_flock_key</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#ab3631ff59a923e1f883c9a017de09067">ldlm_export_flock_keycmp</a> (const void *key, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a4a04bf7d56e32a8599abda11d61a324c">ldlm_export_flock_object</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a493a51d55999410b5049e908b4d3402b">ldlm_export_flock_get</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a8236fd0bd3155c1afdc437655abb6bec">ldlm_export_flock_put</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#ac0277782c9f1f913efc748d14ec00e3c">ldlm_init_flock_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a4a57584bf0dadf998fbec72c4c9f670f">ldlm_destroy_flock_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__flock_8c.html#a6190379996bab12e91d8cabf453d3353">ldlm_export_flock_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="ldlm_flock.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LDLM</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This file implements POSIX lock type for Lustre. </p>
<p>Its policy properties are start and end of extent and PID.</p>
<p>These locks are only done through MDS due to POSIX semantics requiring e.g. that locks could be only partially released and as such split into two parts, and also that two adjacent locks from the same process may be merged into a single wider lock.</p>
<p>Lock modes are mapped like this: PR and PW for READ and WRITE locks NL to request a releasing of a portion of the lock</p>
<p>These flock locks never timeout. </p>

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00057">57</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

</div>
</div>
<a class="anchor" id="aca26ceb18d60002c70616131200c9fba"></a><!-- doxytag: member="ldlm_flock.c::list_for_remaining_safe" ref="aca26ceb18d60002c70616131200c9fba" args="(pos, n, head)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define list_for_remaining_safe</td>
          <td>(</td>
          <td class="paramtype">pos, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">n, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;for (n = pos-&gt;next; pos != (<a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>); pos = n, n = pos-&gt;next)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>list_for_remaining_safe - iterate over the remaining entries in a list and safeguard against removal of a list entry. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>the &amp;struct <a class="el" href="structlist__head.html">list_head</a> to use as a loop counter. pos MUST have been initialized prior to using it in this macro. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n</em>&nbsp;</td><td>another &amp;struct <a class="el" href="structlist__head.html">list_head</a> to use as temporary storage </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>the head for your list. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00078">78</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4a57584bf0dadf998fbec72c4c9f670f"></a><!-- doxytag: member="ldlm_flock.c::ldlm_destroy_flock_export" ref="a4a57584bf0dadf998fbec72c4c9f670f" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_destroy_flock_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00955">955</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, and <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02913">ldlm_destroy_export()</a>.</p>

</div>
</div>
<a class="anchor" id="a493a51d55999410b5049e908b4d3402b"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_get" ref="a493a51d55999410b5049e908b4d3402b" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_export_flock_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00894">894</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00626">ldlm_flock::blocking_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00628">ldlm_flock::blocking_refs</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01344">LDLM_LOCK_GET</a>.</p>

</div>
</div>
<a class="anchor" id="a9b69dcf98fdd67b34e2b37acccc23581"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_hash" ref="a9b69dcf98fdd67b34e2b37acccc23581" args="(struct cfs_hash *hs, const void *key, unsigned mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned ldlm_export_flock_hash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00867">867</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00838">cfs_hash_u64_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="a1876c4f54b61bd36235eb0adfbe62b51"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_key" ref="a1876c4f54b61bd36235eb0adfbe62b51" args="(struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* ldlm_export_flock_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00873">873</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00719">ldlm_lock::l_exp_flock_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00882">ldlm_export_flock_keycmp()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3631ff59a923e1f883c9a017de09067"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_keycmp" ref="ab3631ff59a923e1f883c9a017de09067" args="(const void *key, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_export_flock_keycmp </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00882">882</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00873">ldlm_export_flock_key()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a04bf7d56e32a8599abda11d61a324c"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_object" ref="a4a04bf7d56e32a8599abda11d61a324c" args="(struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* ldlm_export_flock_object </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00888">888</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00719">ldlm_lock::l_exp_flock_hash</a>.</p>

</div>
</div>
<a class="anchor" id="a8236fd0bd3155c1afdc437655abb6bec"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_put" ref="a8236fd0bd3155c1afdc437655abb6bec" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_export_flock_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00909">909</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00626">ldlm_flock::blocking_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00625">ldlm_flock::blocking_owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00628">ldlm_flock::blocking_refs</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>.</p>

</div>
</div>
<a class="anchor" id="a4f1a8bd5f1a73978c8dcd620d103d98a"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_blocking_ast" ref="a4f1a8bd5f1a73978c8dcd620d103d98a" args="(struct ldlm_lock *lock, struct ldlm_lock_desc *desc, void *data, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_flock_blocking_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00828">828</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00104">LDLM_CB_CANCELING</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a12c499f982ebe5482631db7927a1825a"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_blocking_link" ref="a12c499f982ebe5482631db7927a1825a" args="(struct ldlm_lock *req, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_flock_blocking_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00098">98</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00626">ldlm_flock::blocking_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00625">ldlm_flock::blocking_owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00628">ldlm_flock::blocking_refs</a>, <a class="el" href="hash_8c_source.html#l01204">cfs_hash_add()</a>, <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00719">ldlm_lock::l_exp_flock_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="adf85df18db0574a9c903a5fff76f187c"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_blocking_unlink" ref="adf85df18db0574a9c903a5fff76f187c" args="(struct ldlm_lock *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_flock_blocking_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00118">118</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01291">cfs_hash_del()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00719">ldlm_lock::l_exp_flock_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00828">ldlm_flock_blocking_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00633">ldlm_flock_interrupted_wait()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a794c2aa6ad22889ca9c01057fe85dcb9"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_cancel_on_deadlock" ref="a794c2aa6ad22889ca9c01057fe85dcb9" args="(struct ldlm_lock *lock, struct list_head *work_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_flock_cancel_on_deadlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>work_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00250">250</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__lock_8c_source.html#l00700">ldlm_add_ast_work_item()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00062">LDLM_FL_AST_SENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00127">LDLM_FL_CANCEL_ON_BLOCK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00088">LDLM_FL_FLOCK_DEADLOCK</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00063">ldlm_is_ast_sent</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01238">OBD_CONNECT_FLOCK_DEAD</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a91e9e98f8572f882cfba3292cafae013"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_deadlock" ref="a91e9e98f8572f882cfba3292cafae013" args="(struct ldlm_lock *req, struct ldlm_lock *bl_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_flock_deadlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>bl_lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00192">192</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="ldlm__flock_8c_source.html#l00168">ldlm_flock_lookup_cb_data::bl_owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00626">ldlm_flock::blocking_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00625">ldlm_flock::blocking_owner</a>, <a class="el" href="lustre__net_8h_source.html#l00521">ptlrpc_connection::c_peer</a>, <a class="el" href="hash_8c_source.html#l01758">cfs_hash_for_each_key()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00500">cfs_hash_put()</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00170">ldlm_flock_lookup_cb_data::exp</a>, <a class="el" href="lustre__export_8h_source.html#l00217">obd_export::exp_connection</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_failed</a>, <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__dlm_8h_source.html#l00719">ldlm_lock::l_exp_flock_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__flock_8c_source.html#l00173">ldlm_flock_lookup_cb()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00169">ldlm_flock_lookup_cb_data::lock</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="obd_8h_source.html#l00628">obd_device::obd_nid_hash</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="acf86b75d4db2eafdedcf90c33b3014c7"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_destroy" ref="acf86b75d4db2eafdedcf90c33b3014c7" args="(struct ldlm_lock *lock, enum ldlm_mode mode, __u64 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_flock_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00133">133</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00719">ldlm_lock::l_exp_flock_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00173">LDLM_FL_CBPENDING</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00191">LDLM_FL_LOCAL_ONLY</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00179">LDLM_FL_WAIT_NOREPROC</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a63daf100716fab0f97d6706f17490211"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_interrupted_wait" ref="a63daf100716fab0f97d6706f17490211" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_flock_interrupted_wait </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00633">633</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">ldlm_set_cbpending</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ae8a9242adffe9f8bf718cf9b3a67737b"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_lookup_cb" ref="ae8a9242adffe9f8bf718cf9b3a67737b" args="(struct cfs_hash *hs, struct cfs_hash_bd *bd, struct hlist_node *hnode, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_flock_lookup_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash__bd.html">cfs_hash_bd</a> *&nbsp;</td>
          <td class="paramname"> <em>bd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00173">173</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="ldlm__flock_8c_source.html#l00168">ldlm_flock_lookup_cb_data::bl_owner</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00482">cfs_hash_object()</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00170">ldlm_flock_lookup_cb_data::exp</a>, <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00169">ldlm_flock_lookup_cb_data::lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00192">ldlm_flock_deadlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a97967bbb20eeada0b527c658f13b2214"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_policy_local_to_wire" ref="a97967bbb20eeada0b527c658f13b2214" args="(const union ldlm_policy_data *lpolicy, union ldlm_wire_policy_data *wpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_flock_policy_local_to_wire </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00853">853</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__idl_8h_source.html#l02860">ldlm_wire_policy_data::l_flock</a>, <a class="el" href="lustre__idl_8h_source.html#l02846">ldlm_flock_wire::lfw_end</a>, <a class="el" href="lustre__idl_8h_source.html#l02847">ldlm_flock_wire::lfw_owner</a>, <a class="el" href="lustre__idl_8h_source.html#l02849">ldlm_flock_wire::lfw_pid</a>, <a class="el" href="lustre__idl_8h_source.html#l02845">ldlm_flock_wire::lfw_start</a>, <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>.</p>

</div>
</div>
<a class="anchor" id="af1d5630a4d3ecdb282caccb56d520e89"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flock_policy_wire_to_local" ref="af1d5630a4d3ecdb282caccb56d520e89" args="(const union ldlm_wire_policy_data *wpolicy, union ldlm_policy_data *lpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_flock_policy_wire_to_local </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00843">843</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="lustre__idl_8h_source.html#l02860">ldlm_wire_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__idl_8h_source.html#l02846">ldlm_flock_wire::lfw_end</a>, <a class="el" href="lustre__idl_8h_source.html#l02847">ldlm_flock_wire::lfw_owner</a>, <a class="el" href="lustre__idl_8h_source.html#l02849">ldlm_flock_wire::lfw_pid</a>, <a class="el" href="lustre__idl_8h_source.html#l02845">ldlm_flock_wire::lfw_start</a>, <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>.</p>

</div>
</div>
<a class="anchor" id="ac61996d54b7a43b15e2a1daac108e186"></a><!-- doxytag: member="ldlm_flock.c::ldlm_flocks_overlap" ref="ac61996d54b7a43b15e2a1daac108e186" args="(struct ldlm_lock *lock, struct ldlm_lock *new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_flocks_overlap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00090">90</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ac0277782c9f1f913efc748d14ec00e3c"></a><!-- doxytag: member="ldlm_flock.c::ldlm_init_flock_export" ref="ac0277782c9f1f913efc748d14ec00e3c" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_init_flock_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00936">936</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00165">CFS_HASH_DEFAULT</a>, <a class="el" href="libcfs__hash_8h_source.html#l00775">CFS_HASH_MAX_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00774">CFS_HASH_MIN_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00159">CFS_HASH_NBLK_CHANGE</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd__support_8h_source.html#l00102">HASH_EXP_LOCK_BKT_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00103">HASH_EXP_LOCK_CUR_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00104">HASH_EXP_LOCK_MAX_BITS</a>, <a class="el" href="obd_8h_source.html#l00459">LUSTRE_MDT_NAME</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02884">ldlm_init_export()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e963b8762a5ee599e17ab4bb5232cea"></a><!-- doxytag: member="ldlm_flock.c::ldlm_process_flock_lock" ref="a5e963b8762a5ee599e17ab4bb5232cea" args="(struct ldlm_lock *req, __u64 *flags, int first_enq, enum ldlm_error *err, struct list_head *work_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_process_flock_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first_enq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> *&nbsp;</td>
          <td class="paramname"> <em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>work_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process a granting attempt for flock lock. </p>
<p>Must be called under ns lock held.</p>
<p>This function looks for any conflicts for <em>lock</em> in the granted or waiting queues. The lock is granted if no conflicts are found in either queue.</p>
<p>It is also responsible for splitting a lock if a portion of the lock is released.</p>
<p>If <em>first_enq</em> is 0 (ie, called from ldlm_reprocess_queue):</p>
<ul>
<li>blocking ASTs have already been sent</li>
</ul>
<p>If <em>first_enq</em> is 1 (ie, called from ldlm_lock_enqueue):</p>
<ul>
<li>blocking ASTs have not been sent yet, so list of conflicting locks would be collected and ASTs sent. </li>
</ul>

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00289">289</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01204">cfs_hash_add()</a>, <a class="el" href="obd__class_8h_source.html#l00254">class_export_lock_get</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00221">obd_export::exp_lock_hash</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00714">ldlm_lock::l_exp_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00766">ldlm_lock::l_remote_handle</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00296">LCK_NL</a>, <a class="el" href="ldlm__lock_8c_source.html#l00700">ldlm_add_ast_work_item()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00040">LDLM_FL_BLOCK_GRANTED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00108">LDLM_FL_BLOCK_NOWAIT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00032">LDLM_FL_LOCK_CHANGED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00114">LDLM_FL_TEST_LOCK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00179">LDLM_FL_WAIT_NOREPROC</a>, <a class="el" href="packet-lustre_8c_source.html#l00300">LDLM_FLOCK</a>, <a class="el" href="ldlm__flock_8c_source.html#l00828">ldlm_flock_blocking_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00098">ldlm_flock_blocking_link()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00192">ldlm_flock_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00090">ldlm_flocks_overlap()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01180">LDLM_ITER_CONTINUE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01181">LDLM_ITER_STOP</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01448">ldlm_resource_dump()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02050">ldlm_run_ast_work()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00082">ldlm_same_flock_owner()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00141">LDLM_WORK_CP_AST</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="ldlm__flock_8c_source.html#l00078">list_for_remaining_safe</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00157">lockmode_compat()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00152">lockmode_verify()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00947">ldlm_resource::lr_waiting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="lustre__idl_8h_source.html#l01767">OBD_OBJECT_EOF</a>, <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="a699a4a28dccf0d4972d669d4889f9b02"></a><!-- doxytag: member="ldlm_flock.c::ldlm_same_flock_owner" ref="a699a4a28dccf0d4972d669d4889f9b02" args="(struct ldlm_lock *lock, struct ldlm_lock *new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_same_flock_owner </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00082">82</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a6190379996bab12e91d8cabf453d3353"></a><!-- doxytag: member="ldlm_flock.c::ldlm_export_flock_ops" ref="a6190379996bab12e91d8cabf453d3353" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a> <a class="el" href="ldlm__flock_8c.html#a6190379996bab12e91d8cabf453d3353">ldlm_export_flock_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .hs_hash        = <a class="code" href="ldlm__flock_8c.html#a9b69dcf98fdd67b34e2b37acccc23581">ldlm_export_flock_hash</a>,
        .hs_key         = <a class="code" href="ldlm__flock_8c.html#a1876c4f54b61bd36235eb0adfbe62b51">ldlm_export_flock_key</a>,
        .hs_keycmp      = <a class="code" href="ldlm__flock_8c.html#ab3631ff59a923e1f883c9a017de09067">ldlm_export_flock_keycmp</a>,
        .hs_object      = <a class="code" href="ldlm__flock_8c.html#a4a04bf7d56e32a8599abda11d61a324c">ldlm_export_flock_object</a>,
        .hs_get         = <a class="code" href="ldlm__flock_8c.html#a493a51d55999410b5049e908b4d3402b">ldlm_export_flock_get</a>,
        .hs_put         = <a class="code" href="ldlm__flock_8c.html#a8236fd0bd3155c1afdc437655abb6bec">ldlm_export_flock_put</a>,
        .hs_put_locked  = <a class="code" href="ldlm__flock_8c.html#a8236fd0bd3155c1afdc437655abb6bec">ldlm_export_flock_put</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00926">926</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
