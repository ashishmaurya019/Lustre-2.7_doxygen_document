<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ptlrpc/events.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ptlrpc/events.c File Reference</h1><code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;linux/kernel.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__sec_8h_source.html">lustre_sec.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>&quot;</code><br/>

<p><a href="events_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_RPC</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a2ee3f1c60c2a332a32f25a43c6cac023">REQS_CPT_BITS</a>(svcpt)&nbsp;&nbsp;&nbsp;((svcpt)-&gt;scp_service-&gt;srv_cpt_bits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a327f9e42eb9261430febf0774cc6c266">REQS_SEC_SHIFT</a>&nbsp;&nbsp;&nbsp;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a3d24c0ef553de7ae6a72910ce4d4c629">REQS_USEC_SHIFT</a>&nbsp;&nbsp;&nbsp;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a91e998540d157505ad2756fa6ade698e">REQS_SEQ_SHIFT</a>(svcpt)&nbsp;&nbsp;&nbsp;REQS_CPT_BITS(svcpt)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#ga888caf60135e2eecdef05fce1b2de9b6">request_out_callback</a> (<a class="el" href="structlnet__event__t.html">lnet_event_t</a> *ev)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">These callbacks are invoked by LNet when something happened to underlying buffer.  <a href="group__net.html#ga888caf60135e2eecdef05fce1b2de9b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#ga447473f788164a63797ffd70d471499a">reply_in_callback</a> (<a class="el" href="structlnet__event__t.html">lnet_event_t</a> *ev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#gab3a1ba2f0cd4eab3b1a50cb7edbaf172">client_bulk_callback</a> (<a class="el" href="structlnet__event__t.html">lnet_event_t</a> *ev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#acd26128ceac1f932795913303785807f">ptlrpc_req_add_history</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#gabc74b903a7097918d144a762599c02cb">request_in_callback</a> (<a class="el" href="structlnet__event__t.html">lnet_event_t</a> *ev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#gac80d5dea22a333f5aa859f2b57e84a8f">reply_out_callback</a> (<a class="el" href="structlnet__event__t.html">lnet_event_t</a> *ev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#aa9c47c0240d507a2cb6579f1e6412797">ptlrpc_master_callback</a> (<a class="el" href="structlnet__event__t.html">lnet_event_t</a> *ev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#ga1907465565bda3ff642311e407d9be83">ptlrpc_uuid_to_peer</a> (struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, <a class="el" href="structlnet__process__id__t.html">lnet_process_id_t</a> *peer, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *self)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a7808f7ec7acf4a7a3d5099eb305fc19c">ptlrpc_ni_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__lnet__addr.html#gafa13bf627f3dbcdec22141de051a61cd">lnet_pid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#ga823ffa6488c25750f836f7c5ccdac8f0">ptl_get_pid</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a55f9ecd691b9ca7302ddb9e32e555ef5">ptlrpc_ni_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#adfbc17abb450b19c63d879220cc98ec3">ptlrpc_init_portals</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="events_8c.html#a8d388441b7daf6d1f8c54fea371404e8">ptlrpc_exit_portals</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_eq_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net.html#ga43d00a48fde2ab8cfdaf5417683e63c9">ptlrpc_eq_h</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="events.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_RPC</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00037">37</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2ee3f1c60c2a332a32f25a43c6cac023"></a><!-- doxytag: member="events.c::REQS_CPT_BITS" ref="a2ee3f1c60c2a332a32f25a43c6cac023" args="(svcpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQS_CPT_BITS</td>
          <td>(</td>
          <td class="paramtype">svcpt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((svcpt)-&gt;scp_service-&gt;srv_cpt_bits)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00248">248</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a327f9e42eb9261430febf0774cc6c266"></a><!-- doxytag: member="events.c::REQS_SEC_SHIFT" ref="a327f9e42eb9261430febf0774cc6c266" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQS_SEC_SHIFT&nbsp;&nbsp;&nbsp;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00250">250</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00254">ptlrpc_req_add_history()</a>.</p>

</div>
</div>
<a class="anchor" id="a91e998540d157505ad2756fa6ade698e"></a><!-- doxytag: member="events.c::REQS_SEQ_SHIFT" ref="a91e998540d157505ad2756fa6ade698e" args="(svcpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQS_SEQ_SHIFT</td>
          <td>(</td>
          <td class="paramtype">svcpt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;REQS_CPT_BITS(svcpt)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00252">252</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00254">ptlrpc_req_add_history()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d24c0ef553de7ae6a72910ce4d4c629"></a><!-- doxytag: member="events.c::REQS_USEC_SHIFT" ref="a3d24c0ef553de7ae6a72910ce4d4c629" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQS_USEC_SHIFT&nbsp;&nbsp;&nbsp;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00251">251</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00254">ptlrpc_req_add_history()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8d388441b7daf6d1f8c54fea371404e8"></a><!-- doxytag: member="events.c::ptlrpc_exit_portals" ref="a8d388441b7daf6d1f8c54fea371404e8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_exit_portals </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00632">632</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="events_8c_source.html#l00542">ptlrpc_ni_fini()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="adfbc17abb450b19c63d879220cc98ec3"></a><!-- doxytag: member="events.c::ptlrpc_init_portals" ref="adfbc17abb450b19c63d879220cc98ec3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_init_portals </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00615">615</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="events_8c_source.html#l00542">ptlrpc_ni_fini()</a>, <a class="el" href="events_8c_source.html#l00583">ptlrpc_ni_init()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00955">ptlrpcd_addref()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa9c47c0240d507a2cb6579f1e6412797"></a><!-- doxytag: member="events.c::ptlrpc_master_callback" ref="aa9c47c0240d507a2cb6579f1e6412797" args="(lnet_event_t *ev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_master_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__event__t.html">lnet_event_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ev</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00480">480</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00635">ptlrpc_cb_id::cbid_arg</a>, <a class="el" href="structptlrpc__cb__id.html#a58f3b9cf321abbbda3162af4e35c310e">ptlrpc_cb_id::cbid_fn</a>, <a class="el" href="events_8c_source.html#l00181">client_bulk_callback()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00586">lnet_event_t::md</a>, <a class="el" href="events_8c_source.html#l00091">reply_in_callback()</a>, <a class="el" href="events_8c_source.html#l00390">reply_out_callback()</a>, <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>, <a class="el" href="events_8c_source.html#l00051">request_out_callback()</a>, and <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00433">lnet_md_t::user_ptr</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00583">ptlrpc_ni_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a7808f7ec7acf4a7a3d5099eb305fc19c"></a><!-- doxytag: member="events.c::ptlrpc_ni_fini" ref="a7808f7ec7acf4a7a3d5099eb305fc19c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_ni_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00542">542</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lib-eq_8c_source.html#l00156">LNetEQFree()</a>, <a class="el" href="api-ni_8c_source.html#l01639">LNetNIFini()</a>, and <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00632">ptlrpc_exit_portals()</a>, and <a class="el" href="events_8c_source.html#l00615">ptlrpc_init_portals()</a>.</p>

</div>
</div>
<a class="anchor" id="a55f9ecd691b9ca7302ddb9e32e555ef5"></a><!-- doxytag: member="events.c::ptlrpc_ni_init" ref="a55f9ecd691b9ca7302ddb9e32e555ef5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_ni_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00583">583</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00138">D_NET</a>, <a class="el" href="lib-eq_8c_source.html#l00070">LNetEQAlloc()</a>, <a class="el" href="api-ni_8c_source.html#l01639">LNetNIFini()</a>, <a class="el" href="api-ni_8c_source.html#l01516">LNetNIInit()</a>, <a class="el" href="events_8c_source.html#l00578">ptl_get_pid()</a>, and <a class="el" href="events_8c_source.html#l00480">ptlrpc_master_callback()</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00615">ptlrpc_init_portals()</a>.</p>

</div>
</div>
<a class="anchor" id="acd26128ceac1f932795913303785807f"></a><!-- doxytag: member="events.c::ptlrpc_req_add_history" ref="acd26128ceac1f932795913303785807f" args="(struct ptlrpc_service_part *svcpt, struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_req_add_history </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00254">254</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="events_8c_source.html#l00250">REQS_SEC_SHIFT</a>, <a class="el" href="events_8c_source.html#l00252">REQS_SEQ_SHIFT</a>, <a class="el" href="events_8c_source.html#l00251">REQS_USEC_SHIFT</a>, <a class="el" href="lustre__net_8h_source.html#l01753">ptlrpc_service_part::scp_cpt</a>, <a class="el" href="lustre__net_8h_source.html#l01794">ptlrpc_service_part::scp_hist_reqs</a>, and <a class="el" href="lustre__net_8h_source.html#l01800">ptlrpc_service_part::scp_hist_seq</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
