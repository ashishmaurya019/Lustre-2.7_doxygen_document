<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/obdclass/linkea.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/obdclass/linkea.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__linkea_8h_source.html">lustre_linkea.h</a>&gt;</code><br/>

<p><a href="linkea_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#ae39a0219a2030165e824cfbcdef100bf">linkea_data_new</a> (struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#a000fb35ca583fd67fe1e5946e53805b2">linkea_init</a> (struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#a6c4fe96e1a2a7cf0caebb60f3991d7f0">linkea_entry_pack</a> (struct <a class="el" href="structlink__ea__entry.html">link_ea_entry</a> *lee, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack a <a class="el" href="structlink__ea__entry.html" title="Hardlink data is name and parent fid.">link_ea_entry</a>.  <a href="#a6c4fe96e1a2a7cf0caebb60f3991d7f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#af0caf0acd8b1abd539ae9703d423c01b">linkea_entry_unpack</a> (const struct <a class="el" href="structlink__ea__entry.html">link_ea_entry</a> *lee, int *reclen, struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#a03853fb6c4ecad1bf92f1c01a2540f07">linkea_add_buf</a> (struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a record to the end of link ea buf.  <a href="#a03853fb6c4ecad1bf92f1c01a2540f07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#a3139a457836ddb69cf9409326737646e">linkea_del_buf</a> (struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Del the current record from the link ea buf.  <a href="#a3139a457836ddb69cf9409326737646e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkea_8c.html#a9da5a4673bab656aa0490f9922526c71">linkea_links_find</a> (struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if such a link exists in linkEA.  <a href="#a9da5a4673bab656aa0490f9922526c71"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a03853fb6c4ecad1bf92f1c01a2540f07"></a><!-- doxytag: member="linkea.c::linkea_add_buf" ref="a03853fb6c4ecad1bf92f1c01a2540f07" args="(struct linkea_data *ldata, const struct lu_name *lname, const struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int linkea_add_buf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a record to the end of link ea buf. </p>

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00113">113</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="linkea_8c_source.html#l00075">linkea_entry_pack()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, and <a class="el" href="lu__object_8c_source.html#l02387">lu_buf_check_and_grow()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00894">__mdd_links_add()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>.</p>

</div>
</div>
<a class="anchor" id="ae39a0219a2030165e824cfbcdef100bf"></a><!-- doxytag: member="linkea.c::linkea_data_new" ref="ae39a0219a2030165e824cfbcdef100bf" args="(struct linkea_data *ldata, struct lu_buf *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int linkea_data_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00034">34</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03673">link_ea_header::leh_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="lustre__idl_8h_source.html#l03671">LINK_EA_MAGIC</a>, and <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00894">__mdd_links_add()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>, <a class="el" href="llite__lib_8c_source.html#l02770">ll_getparent()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, and <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a3139a457836ddb69cf9409326737646e"></a><!-- doxytag: member="linkea.c::linkea_del_buf" ref="a3139a457836ddb69cf9409326737646e" args="(struct linkea_data *ldata, const struct lu_name *lname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void linkea_del_buf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Del the current record from the link ea buf. </p>

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00142">142</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, and <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00937">__mdd_links_del()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00791">lfsck_namespace_filter_linkea_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c4fe96e1a2a7cf0caebb60f3991d7f0"></a><!-- doxytag: member="linkea.c::linkea_entry_pack" ref="a6c4fe96e1a2a7cf0caebb60f3991d7f0" args="(struct link_ea_entry *lee, const struct lu_name *lname, const struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int linkea_entry_pack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlink__ea__entry.html">link_ea_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack a <a class="el" href="structlink__ea__entry.html" title="Hardlink data is name and parent fid.">link_ea_entry</a>. </p>
<p>All elements are stored as chars to avoid alignment issues. Numbers are always big-endian </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>record</em>&nbsp;</td><td>length </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00075">75</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00779">fid_cpu_to_be()</a>, <a class="el" href="lustre__idl_8h_source.html#l03688">link_ea_entry::lee_name</a>, <a class="el" href="lustre__idl_8h_source.html#l03687">link_ea_entry::lee_parent_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03686">link_ea_entry::lee_reclen</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00526">OBD_FAIL_LFSCK_LINKEA_CRASH</a>, and <a class="el" href="obd__support_8h_source.html#l00554">OBD_FAIL_LFSCK_MUL_REF</a>.</p>

<p>Referenced by <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="af0caf0acd8b1abd539ae9703d423c01b"></a><!-- doxytag: member="linkea.c::linkea_entry_unpack" ref="af0caf0acd8b1abd539ae9703d423c01b" args="(const struct link_ea_entry *lee, int *reclen, struct lu_name *lname, struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void linkea_entry_unpack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlink__ea__entry.html">link_ea_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>reclen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00097">97</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00786">fid_be_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l03688">link_ea_entry::lee_name</a>, <a class="el" href="lustre__idl_8h_source.html#l03687">link_ea_entry::lee_parent_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03686">link_ea_entry::lee_reclen</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, and <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l06404">lfsck_links_get_first()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00779">lfsck_namespace_unpack_linkea_entry()</a>, <a class="el" href="linkea_8c_source.html#l00171">linkea_links_find()</a>, <a class="el" href="llite__lib_8c_source.html#l02726">ll_linkea_decode()</a>, <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l04117">mdd_migrate_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l00141">mdd_parent_fid()</a>, <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04540">osd_get_pfid_from_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="a000fb35ca583fd67fe1e5946e53805b2"></a><!-- doxytag: member="linkea.c::linkea_init" ref="a000fb35ca583fd67fe1e5946e53805b2" args="(struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int linkea_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00047">47</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00039">__swab32</a>, <a class="el" href="byteorder_8h_source.html#l00040">__swab64</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03673">link_ea_header::leh_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, and <a class="el" href="lustre__idl_8h_source.html#l03671">LINK_EA_MAGIC</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l00671">__lfsck_links_read()</a>, <a class="el" href="llite__lib_8c_source.html#l02726">ll_linkea_decode()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdt__handler_8c_source.html#l05420">mdt_links_read()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04540">osd_get_pfid_from_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="a9da5a4673bab656aa0490f9922526c71"></a><!-- doxytag: member="linkea.c::linkea_links_find" ref="a9da5a4673bab656aa0490f9922526c71" args="(struct linkea_data *ldata, const struct lu_name *lname, const struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int linkea_links_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if such a link exists in linkEA. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ldata</em>&nbsp;</td><td>link data the search to be done on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lname</em>&nbsp;</td><td>name in the parent's directory entry pointing to this object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfid</em>&nbsp;</td><td>parent fid the link to be found for</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>link does not exist </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="linkea_8c_source.html#l00171">171</a> of file <a class="el" href="linkea_8c_source.html">linkea.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="linkea_8c_source.html#l00097">linkea_entry_unpack()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, and <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00894">__mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l00937">__mdd_links_del()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
