<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdt/mdt_open.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdt/mdt_open.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__acl_8h_source.html">lustre_acl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__mds_8h_source.html">lustre_mds.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="lustre__nodemap_8h_source.html">lustre_nodemap.h</a>&gt;</code><br/>

<p><a href="mdt__open_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#adb4d06993fe0052bfeb16e231f560627">MFD_CLOSED</a>(<a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)&nbsp;&nbsp;&nbsp;((<a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>) == MDS_FMODE_CLOSED)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a243e5447b3aeb859e20bf4bdf3772cff">mdt_mfd_get</a> (void *mfdp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a2662891d8f9509efdb737a0b907811fd">mdt_mfd_new</a> (const struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *med)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a354d47703b5aff3abd0ce20f11771376">mdt_handle2mfd</a> (struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *med, const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *handle, bool is_replay_or_resent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#afe26bd03b435d83a095c9750807c487b">mdt_mfd_free</a> (struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a3a90e98e88e684e25a8c42ffcace7701">mdt_create_data</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *p, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#aff1dac946c86bda1fb55a7b80e5b4553">mdt_write_read</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#afd41f8b1bef4cb5b2fb82f28acd41e9f">mdt_write_get</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#adf09035bc4105586e896607ce3ab1d24">mdt_write_put</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#aa66babe41c33b76c1627046d43830462">mdt_write_deny</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a6f224e20a3380972c81e6781f2a6c4d1">mdt_write_allow</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#add07bf5af94fbd5d93e7f59b47f26f67">mdt_empty_transno</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a2e9a73428366d11ee7e5ee7a007e1fa7">mdt_mfd_set_mode</a> (struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a0905b19db97daa32fa4354aa3376a987">mdt_prep_ma_buf_from_rep</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *obj, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">prep ma_lmm/ma_lmv for <a class="el" href="structmd__attr.html">md_attr</a> from reply  <a href="#a0905b19db97daa32fa4354aa3376a987"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#ad4a206d69bb05cf3b89a7ba960216e9e">mdt_mfd_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *p, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, int created, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a919e7dbfaf1601730e158402d0357b57">mdt_finish_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *p, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, int created, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#aba4731050d016a98a2c5707b2be0a11a">mdt_reconstruct_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#ab8c6e80b1850f791bb99dce2c4d359d4">mdt_open_by_fid</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#abac6c90706574d22dd21e022472f67fe">mdt_object_open_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *obj, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *ibits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#aa7390956ebb433809a0c1832c1a331b1">mdt_object_open_unlock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *obj, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ibits, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#ae02197ebbd3d2987683378e879f816f4">mdt_hsm_release_allow</a> (const struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check release is permitted for the current HSM flags.  <a href="#ae02197ebbd3d2987683378e879f816f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a613a4a4316114b11f53ddb0bbf4f2469">mdt_open_by_fid_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a7f35aa25ebeca17181a185b02f251976">mdt_cross_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *parent_fid, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, __u32 flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a506abc8479913d2fcbf68e54b913c98e">mdt_reint_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#ac026eb0602302a83fbde8e58ddd709fb">mdt_orphan_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structmd__attr.html">md_attr</a> *attr, fmode_t fmode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an orphan object use local root.  <a href="#ac026eb0602302a83fbde8e58ddd709fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a0bdaf5310e43f0f5da97563fadf1da21">mdt_hsm_release</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#aa529d020d35339fa678a54b6e483b6c9">mdt_close_swap_layouts</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#ab8f074ce007b58d846f60df1a6073f10">mdt_mfd_closed</a> (struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#aad91e98e3cf3d4feb3e9d5f6b47f4665">mdt_mfd_close</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a6faf93bafd983471e23df01bffcf72ca">mdt_close_internal</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structmdt__body.html">mdt_body</a> *repbody)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#a638de898659fa7ca737fefe8efa00cdf">mdt_close</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structportals__handle__ops.html">portals_handle_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__open_8c.html#ad215e4cbf68f0c4c60e76ba2bf17543e">mfd_handle_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mdt_open.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00043">43</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

</div>
</div>
<a class="anchor" id="adb4d06993fe0052bfeb16e231f560627"></a><!-- doxytag: member="mdt_open.c::MFD_CLOSED" ref="adb4d06993fe0052bfeb16e231f560627" args="(mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFD_CLOSED</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((<a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>) == MDS_FMODE_CLOSED)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01933">1933</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, and <a class="el" href="mdt__open_8c_source.html#l01934">mdt_mfd_closed()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a638de898659fa7ca737fefe8efa00cdf"></a><!-- doxytag: member="mdt_open.c::mdt_close" ref="a638de898659fa7ca737fefe8efa00cdf" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l02047">2047</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__internal_8h_source.html#l01011">LPROC_MDT_CLOSE</a>, <a class="el" href="pack__generic_8c_source.html#l01098">lustre_msg_get_status()</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="lustre__idl_8h_source.html#l02214">mdt_body::mbo_aclsize</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="mdt__internal_8h_source.html#l00921">mdt_check_resent()</a>, <a class="el" href="mdt__handler_8c_source.html#l00600">mdt_client_compatibility()</a>, <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__lib_8c_source.html#l01053">mdt_close_unpack()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__open_8c_source.html#l00197">mdt_empty_transno()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00689">mdt_fix_reply()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00210">mdt_reconstruct_generic()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00622">OBD_FAIL_CHECK_RESET</a>, <a class="el" href="obd__support_8h_source.html#l00218">OBD_FAIL_MDS_CLOSE_NET_REP</a>, <a class="el" href="obd__support_8h_source.html#l00181">OBD_FAIL_MDS_CLOSE_PACK</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01868">req_capsule_server_pack()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01081">RMF_LOGCOOKIES</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="layout_8c_source.html#l01058">RMF_MDT_MD</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, and <a class="el" href="lu__target_8h_source.html#l00224">tgt_session_info::tsi_reply_fail_id</a>.</p>

</div>
</div>
<a class="anchor" id="a6faf93bafd983471e23df01bffcf72ca"></a><!-- doxytag: member="mdt_open.c::mdt_close_internal" ref="a6faf93bafd983471e23df01bffcf72ca" args="(struct mdt_thread_info *info, struct ptlrpc_request *req, struct mdt_body *repbody)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"> <em>repbody</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>not serious error since bug 3633 </p>
</p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l02009">2009</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__handles_8c_source.html#l00128">class_handle_unhash()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__open_8c_source.html#l00084">mdt_handle2mfd()</a>, <a class="el" href="mdt__lib_8c_source.html#l00811">mdt_handle_last_unlink()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__open_8c_source.html#l01934">mdt_mfd_closed()</a>, <a class="el" href="mdt__internal_8h_source.html#l00517">mdt_object_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="lustre__export_8h_source.html#l00096">mdt_export_data::med_open_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00416">mdt_thread_info::mti_close_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, and <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="aa529d020d35339fa678a54b6e483b6c9"></a><!-- doxytag: member="mdt_open.c::mdt_close_swap_layouts" ref="aa529d020d35339fa678a54b6e483b6c9" args="(struct mdt_thread_info *info, struct mdt_object *o, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close_swap_layouts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01797">1797</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03988">close_data::cd_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03987">close_data::cd_handle</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00186">ldlm_is_cancel</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__idl_8h_source.html#l00814">lu_fid_cmp()</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="mdt__internal_8h_source.html#l00273">MDT_LH_NEW</a>, <a class="el" href="mdt__internal_8h_source.html#l00271">MDT_LH_OLD</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="md__object_8h_source.html#l00328">mo_permission()</a>, <a class="el" href="md__object_8h_source.html#l00405">mo_swap_layouts()</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00245">mdt_object::mot_open_sem</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="lustre__idl_8h_source.html#l01179">OBD_CONNECT_RDONLY</a>, <a class="el" href="lustre__idl_8h_source.html#l01715">OBD_MD_CLOSE_INTENT_EXECED</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00964">RMF_CLOSE_DATA</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="osd__iam_8h_source.html#l01014">swap</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>.</p>

</div>
</div>
<a class="anchor" id="a3a90e98e88e684e25a8c42ffcace7701"></a><!-- doxytag: member="mdt_open.c::mdt_create_data" ref="a3a90e98e88e684e25a8c42ffcace7701" args="(struct mdt_thread_info *info, struct mdt_object *p, struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_create_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00112">112</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__mds_8h_source.html#l00070">md_should_create()</a>, <a class="el" href="md__object_8h_source.html#l00496">mdo_create_data()</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00232">MOF_LOV_CREATED</a>, <a class="el" href="mdt__internal_8h_source.html#l00238">mdt_object::mot_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00242">mdt_object::mot_lov_mutex</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f35aa25ebeca17181a185b02f251976"></a><!-- doxytag: member="mdt_open.c::mdt_cross_open" ref="a7f35aa25ebeca17181a185b02f251976" args="(struct mdt_thread_info *info, const struct lu_fid *parent_fid, const struct lu_fid *fid, struct ldlm_reply *rep, __u32 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_cross_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01128">1128</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00139">D_WARNING</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00800">LU_OBJECT_DEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l02319">MDS_OPEN_CROSS</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="md__object_8h_source.html#l00328">mo_permission()</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="add07bf5af94fbd5d93e7f59b47f26f67"></a><!-- doxytag: member="mdt_open.c::mdt_empty_transno" ref="add07bf5af94fbd5d93e7f59b47f26f67" args="(struct mdt_thread_info *info, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_empty_transno </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00197">197</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__net_8h_source.html#l00521">ptlrpc_connection::c_peer</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02054">dt_trans_start()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00217">obd_export::exp_connection</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00365">lsd_client_data::lcd_last_close_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00363">lsd_client_data::lcd_last_close_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00364">lsd_client_data::lcd_last_close_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00361">lsd_client_data::lcd_last_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00360">lsd_client_data::lcd_last_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00358">lsd_client_data::lcd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00359">lsd_client_data::lcd_last_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00368">lsd_client_data::lcd_pre_versions</a>, <a class="el" href="nidstr_8h_source.html#l00077">libcfs_nid2str()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="pack__generic_8c_source.html#l01080">lustre_msg_get_transno()</a>, <a class="el" href="pack__generic_8c_source.html#l01062">lustre_msg_get_versions()</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="packet-lustre_8c_source.html#l00203">MDS_CLOSE</a>, <a class="el" href="mdt__internal_8h_source.html#l00168">mdt_device::mdt_bottom</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00171">mdt_device::mdt_lut</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00368">mdt_thread_info::mti_opdata</a>, <a class="el" href="mdt__internal_8h_source.html#l00334">mdt_thread_info::mti_transno</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="obd_8h_source.html#l00648">obd_device::obd_last_committed</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01034">ptlrpc_request::rq_transno</a>, <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, and <a class="el" href="lu__target_8h_source.html#l00351">tgt_is_multimodrpcs_client()</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a919e7dbfaf1601730e158402d0357b57"></a><!-- doxytag: member="mdt_open.c::mdt_finish_open" ref="a919e7dbfaf1601730e158402d0357b57" args="(struct mdt_thread_info *info, struct mdt_object *p, struct mdt_object *o, __u64 flags, int created, struct ldlm_reply *rep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_finish_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>created</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00500">500</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l02063">DISP_LOOKUP_NEG</a>, <a class="el" href="lustre__idl_8h_source.html#l02064">DISP_LOOKUP_POS</a>, <a class="el" href="lustre__idl_8h_source.html#l02070">DISP_OPEN_LOCK</a>, <a class="el" href="lustre__idl_8h_source.html#l02066">DISP_OPEN_OPEN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02214">mdt_body::mbo_aclsize</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="lustre__idl_8h_source.html#l02191">mdt_body::mbo_handle</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02321">MDS_OPEN_CREAT</a>, <a class="el" href="lustre__idl_8h_source.html#l02326">MDS_OPEN_DIRECTORY</a>, <a class="el" href="lustre__idl_8h_source.html#l02322">MDS_OPEN_EXCL</a>, <a class="el" href="lustre__idl_8h_source.html#l02337">MDS_OPEN_LOCK</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l00501">mdt_pack_attr2body()</a>, <a class="el" href="mdt__identity_8c_source.html#l00276">mdt_pack_remote_perm()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="lustre__export_8h_source.html#l00095">mdt_export_data::med_open_head</a>, <a class="el" href="lustre__export_8h_source.html#l00096">mdt_export_data::med_open_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00079">mdt_file_data::mfd_xid</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="lustre__idl_8h_source.html#l01186">OBD_CONNECT_ACL</a>, <a class="el" href="lustre__idl_8h_source.html#l01198">OBD_CONNECT_NODEVOH</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00622">OBD_FAIL_CHECK_RESET</a>, <a class="el" href="obd__support_8h_source.html#l00340">OBD_FAIL_LDLM_REPLY</a>, <a class="el" href="obd__support_8h_source.html#l00231">OBD_FAIL_MDS_NEGATIVE_POSITIVE</a>, <a class="el" href="obd__support_8h_source.html#l00202">OBD_FAIL_MDS_OPEN_CREATE</a>, <a class="el" href="obd__support_8h_source.html#l00628">OBD_FAIL_ONCE</a>, <a class="el" href="lustre__idl_8h_source.html#l01684">OBD_MD_FLDIREA</a>, <a class="el" href="lustre__idl_8h_source.html#l01672">OBD_MD_FLEASIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01698">OBD_MD_FLRMTPERM</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01075">RMF_ACL</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a354d47703b5aff3abd0ce20f11771376"></a><!-- doxytag: member="mdt_open.c::mdt_handle2mfd" ref="a354d47703b5aff3abd0ce20f11771376" args="(struct mdt_export_data *med, const struct lustre_handle *handle, bool is_replay_or_resent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a>* mdt_handle2mfd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>med</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_replay_or_resent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00084">84</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__handles_8c_source.html#l00155">class_handle2object()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__export_8h_source.html#l00095">mdt_export_data::med_open_head</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00081">mdt_file_data::mfd_old_handle</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, and <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bdaf5310e43f0f5da97563fadf1da21"></a><!-- doxytag: member="mdt_open.c::mdt_hsm_release" ref="a0bdaf5310e43f0f5da97563fadf1da21" args="(struct mdt_thread_info *info, struct mdt_object *o, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01613">1613</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lustre__idl_8h_source.html#l03989">close_data::cd_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03988">close_data::cd_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03987">close_data::cd_handle</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="structmdt__thread__info.html#ac3330d0dc9db0cf602bfdee7dbf4e63c">mdt_thread_info::hsm</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lu__object_8h_source.html#l00444">LA_ATIME</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00447">LA_SIZE</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00186">ldlm_is_cancel</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01489">LOV_MAGIC_V1_DEF</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01490">LOV_MAGIC_V3_DEF</a>, <a class="el" href="lustre__user_8h_source.html#l00358">LOV_MIN_STRIPE_SIZE</a>, <a class="el" href="lustre__user_8h_source.html#l00352">LOV_PATTERN_F_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lu__object_8h_source.html#l00800">LU_OBJECT_DEBUG</a>, <a class="el" href="md__attrs_8c_source.html#l00129">lustre_hsm2buf()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__open_8c_source.html#l01004">mdt_hsm_release_allow()</a>, <a class="el" href="mdt__internal_8h_source.html#l00272">MDT_LH_LAYOUT</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="mdt__open_8c_source.html#l01540">mdt_orphan_open()</a>, <a class="el" href="md__object_8h_source.html#l00112">md_hsm::mh_arch_ver</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="md__object_8h_source.html#l00362">mo_attr_set()</a>, <a class="el" href="md__object_8h_source.html#l00424">mo_close()</a>, <a class="el" href="md__object_8h_source.html#l00405">mo_swap_layouts()</a>, <a class="el" href="md__object_8h_source.html#l00387">mo_xattr_set()</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00245">mdt_object::mot_open_sem</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="structmdt__thread__info.html#a4e83bed1d2937bdf8564dc1dceb62dd6">mdt_thread_info::mti_u</a>, <a class="el" href="mdt__internal_8h_source.html#l00429">mdt_thread_info::mti_xattr_buf</a>, <a class="el" href="lustre__idl_8h_source.html#l01179">OBD_CONNECT_RDONLY</a>, <a class="el" href="lustre__idl_8h_source.html#l01715">OBD_MD_CLOSE_INTENT_EXECED</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00964">RMF_CLOSE_DATA</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__user_8h_source.html#l00697">SWAP_LAYOUTS_MDS_HSM</a>, <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01602">XATTR_NAME_HSM</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>.</p>

</div>
</div>
<a class="anchor" id="ae02197ebbd3d2987683378e879f816f4"></a><!-- doxytag: member="mdt_open.c::mdt_hsm_release_allow" ref="ae02197ebbd3d2987683378e879f816f4" args="(const struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool mdt_hsm_release_allow </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check release is permitted for the current HSM flags. </p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01004">1004</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01048">HS_ARCHIVED</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01051">HS_LOST</a>, <a class="el" href="lustre__user_8h_source.html#l01049">HS_NORELEASE</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, and <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, and <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="aad91e98e3cf3d4feb3e9d5f6b47f4665"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_close" ref="aad91e98e3cf3d4feb3e9d5f6b47f4665" args="(struct mdt_thread_info *info, struct mdt_file_data *mfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_mfd_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01939">1939</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02308">FMODE_READ</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="lu__object_8h_source.html#l00444">LA_ATIME</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00118">md_attr::ma_attr_flags</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02372">MDS_CLOSE_LAYOUT_SWAP</a>, <a class="el" href="lustre__idl_8h_source.html#l02367">MDS_DATA_MODIFIED</a>, <a class="el" href="lustre__idl_8h_source.html#l02313">MDS_FMODE_EXEC</a>, <a class="el" href="lustre__idl_8h_source.html#l02370">MDS_HSM_RELEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02345">MDS_OPEN_LEASE</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__open_8c_source.html#l00106">mdt_mfd_free()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__open_8c_source.html#l00187">mdt_write_allow()</a>, <a class="el" href="mdt__open_8c_source.html#l00165">mdt_write_put()</a>, <a class="el" href="mdt__open_8c_source.html#l01933">MFD_CLOSED</a>, <a class="el" href="mdt__internal_8h_source.html#l00075">mdt_file_data::mfd_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, <a class="el" href="md__object_8h_source.html#l00362">mo_attr_set()</a>, <a class="el" href="md__object_8h_source.html#l00424">mo_close()</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00246">mdt_object::mot_lease_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00247">mdt_object::mot_open_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l05131">mdt_export_cleanup()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8f074ce007b58d846f60df1a6073f10"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_closed" ref="ab8f074ce007b58d846f60df1a6073f10" args="(struct mdt_file_data *mfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_mfd_closed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01934">1934</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="mdt__open_8c_source.html#l01933">MFD_CLOSED</a>, and <a class="el" href="mdt__internal_8h_source.html#l00075">mdt_file_data::mfd_mode</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="afe26bd03b435d83a095c9750807c487b"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_free" ref="afe26bd03b435d83a095c9750807c487b" args="(struct mdt_file_data *mfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_mfd_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00106">106</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, and <a class="el" href="obd__support_8h_source.html#l00794">OBD_FREE_RCU</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>.</p>

</div>
</div>
<a class="anchor" id="a243e5447b3aeb859e20bf4bdf3772cff"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_get" ref="a243e5447b3aeb859e20bf4bdf3772cff" args="(void *mfdp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_mfd_get </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>mfdp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00051">51</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2662891d8f9509efdb737a0b907811fd"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_new" ref="a2662891d8f9509efdb737a0b907811fd" args="(const struct mdt_export_data *med)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a>* mdt_mfd_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>med</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00062">62</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__handles_8c_source.html#l00064">class_handle_hash()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__handles_8h_source.html#l00066">portals_handle::h_link</a>, <a class="el" href="lustre__handles_8h_source.html#l00068">portals_handle::h_owner</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4a206d69bb05cf3b89a7ba960216e9e"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_open" ref="ad4a206d69bb05cf3b89a7ba960216e9e" args="(struct mdt_thread_info *info, struct mdt_object *p, struct mdt_object *o, __u64 flags, int created, struct ldlm_reply *rep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_mfd_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>created</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00331">331</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="mdt__lib_8c_source.html#l00334">allow_client_chgrp()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__handles_8c_source.html#l00128">class_handle_unhash()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02073">DISP_OPEN_DENY</a>, <a class="el" href="lustre__idl_8h_source.html#l02072">DISP_OPEN_STRIPE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_disconnected</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00118">md_attr::ma_attr_flags</a>, <a class="el" href="md__object_8h_source.html#l00074">MA_FLAGS</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00075">MA_LMV</a>, <a class="el" href="md__object_8h_source.html#l00126">md_attr::ma_lmv_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="lustre__idl_8h_source.html#l02191">mdt_body::mbo_handle</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02313">MDS_FMODE_EXEC</a>, <a class="el" href="lustre__idl_8h_source.html#l02318">MDS_OPEN_CREATED</a>, <a class="el" href="lustre__idl_8h_source.html#l02345">MDS_OPEN_LEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02349">MDS_OPEN_RELEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02366">MDS_RECOV_OPEN</a>, <a class="el" href="mdt__open_8c_source.html#l00112">mdt_create_data()</a>, <a class="el" href="mdt__open_8c_source.html#l00197">mdt_empty_transno()</a>, <a class="el" href="mdt__open_8c_source.html#l00084">mdt_handle2mfd()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__open_8c_source.html#l00062">mdt_mfd_new()</a>, <a class="el" href="mdt__open_8c_source.html#l00294">mdt_mfd_set_mode()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00517">mdt_object_get()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__open_8c_source.html#l00187">mdt_write_allow()</a>, <a class="el" href="mdt__open_8c_source.html#l00174">mdt_write_deny()</a>, <a class="el" href="mdt__open_8c_source.html#l00151">mdt_write_get()</a>, <a class="el" href="mdt__open_8c_source.html#l00165">mdt_write_put()</a>, <a class="el" href="lustre__export_8h_source.html#l00095">mdt_export_data::med_open_head</a>, <a class="el" href="lustre__export_8h_source.html#l00096">mdt_export_data::med_open_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00081">mdt_file_data::mfd_old_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00079">mdt_file_data::mfd_xid</a>, <a class="el" href="md__object_8h_source.html#l00416">mo_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00246">mdt_object::mot_lease_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00247">mdt_object::mot_open_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="lustre__idl_8h_source.html#l01239">OBD_CONNECT_DISP_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l01684">OBD_MD_FLDIREA</a>, <a class="el" href="lustre__idl_8h_source.html#l01672">OBD_MD_FLEASIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01691">OBD_MD_MEA</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="layout_8c_source.html#l01058">RMF_MDT_MD</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>, and <a class="el" href="mdt__internal_8h_source.html#l00293">mdt_reint_record::rr_handle</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e9a73428366d11ee7e5ee7a007e1fa7"></a><!-- doxytag: member="mdt_open.c::mdt_mfd_set_mode" ref="a2e9a73428366d11ee7e5ee7a007e1fa7" args="(struct mdt_file_data *mfd, __u64 mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_mfd_set_mode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00294">294</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00049">LPO64</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00075">mdt_file_data::mfd_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="abac6c90706574d22dd21e022472f67fe"></a><!-- doxytag: member="mdt_open.c::mdt_object_open_lock" ref="abac6c90706574d22dd21e022472f67fe" args="(struct mdt_thread_info *info, struct mdt_object *obj, struct mdt_lock_handle *lhc, __u64 *ibits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_object_open_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>ibits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00777">777</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00377">exp_connect_layout()</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00295">LCK_CR</a>, <a class="el" href="packet-lustre_8c_source.html#l00294">LCK_CW</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00049">LPO64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__mds_8h_source.html#l00070">md_should_create()</a>, <a class="el" href="lustre__idl_8h_source.html#l02313">MDS_FMODE_EXEC</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l02080">MDS_INODELOCK_OPEN</a>, <a class="el" href="lustre__idl_8h_source.html#l02345">MDS_OPEN_LEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02337">MDS_OPEN_LOCK</a>, <a class="el" href="mdt__open_8c_source.html#l00084">mdt_handle2mfd()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00272">MDT_LH_LAYOUT</a>, <a class="el" href="mdt__internal_8h_source.html#l00275">MDT_LH_LOCAL</a>, <a class="el" href="mdt__handler_8c_source.html#l02888">mdt_lock_handle_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02634">mdt_object_lock_try()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00255">mdt_lock_handle::mlh_reg_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00246">mdt_object::mot_lease_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00247">mdt_object::mot_open_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00245">mdt_object::mot_open_sem</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00257">OBD_FAIL_MDS_LL_BLOCK</a>, <a class="el" href="obd__support_8h_source.html#l00256">OBD_FAIL_MDS_NO_LL_OPEN</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="mdt__internal_8h_source.html#l00293">mdt_reint_record::rr_handle</a>, and <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7390956ebb433809a0c1832c1a331b1"></a><!-- doxytag: member="mdt_open.c::mdt_object_open_unlock" ref="aa7390956ebb433809a0c1832c1a331b1" args="(struct mdt_thread_info *info, struct mdt_object *obj, struct mdt_lock_handle *lhc, __u64 ibits, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_object_open_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ibits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00951">951</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__idl_8h_source.html#l02070">DISP_OPEN_LOCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02345">MDS_OPEN_LEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02337">MDS_OPEN_LOCK</a>, <a class="el" href="mdt__handler_8c_source.html#l00141">mdt_clear_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00289">MDT_EREMOTE_OPEN</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00272">MDT_LH_LAYOUT</a>, <a class="el" href="mdt__internal_8h_source.html#l00275">MDT_LH_LOCAL</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00255">mdt_lock_handle::mlh_reg_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00245">mdt_object::mot_open_sem</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="layout_8c_source.html#l01039">RMF_DLM_REP</a>, and <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8c6e80b1850f791bb99dce2c4d359d4"></a><!-- doxytag: member="mdt_open.c::mdt_open_by_fid" ref="ab8c6e80b1850f791bb99dce2c4d359d4" args="(struct mdt_thread_info *info, struct ldlm_reply *rep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_open_by_fid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00733">733</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__idl_8h_source.html#l02061">DISP_IT_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02062">DISP_LOOKUP_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02064">DISP_LOOKUP_POS</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="mdt__internal_8h_source.html#l00295">mdt_reint_record::rr_fid2</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a613a4a4316114b11f53ddb0bbf4f2469"></a><!-- doxytag: member="mdt_open.c::mdt_open_by_fid_lock" ref="a613a4a4316114b11f53ddb0bbf4f2469" args="(struct mdt_thread_info *info, struct ldlm_reply *rep, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_open_by_fid_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01018">1018</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02061">DISP_IT_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02062">DISP_LOOKUP_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02063">DISP_LOOKUP_NEG</a>, <a class="el" href="lustre__idl_8h_source.html#l02064">DISP_LOOKUP_POS</a>, <a class="el" href="lustre__idl_8h_source.html#l02071">DISP_OPEN_LEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02070">DISP_OPEN_LOCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00120">md_attr::ma_pfid</a>, <a class="el" href="md__object_8h_source.html#l00079">MA_PFID</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__mds_8h_source.html#l00070">md_should_create()</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="lustre__idl_8h_source.html#l02345">MDS_OPEN_LEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02337">MDS_OPEN_LOCK</a>, <a class="el" href="lustre__idl_8h_source.html#l02349">MDS_OPEN_RELEASE</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__open_8c_source.html#l01004">mdt_hsm_release_allow()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00295">mdt_reint_record::rr_fid2</a>, and <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ac026eb0602302a83fbde8e58ddd709fb"></a><!-- doxytag: member="mdt_open.c::mdt_orphan_open" ref="ac026eb0602302a83fbde8e58ddd709fb" args="(struct mdt_thread_info *info, struct mdt_device *mdt, const struct lu_fid *fid, struct md_attr *attr, fmode_t fmode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_orphan_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmode_t&nbsp;</td>
          <td class="paramname"> <em>fmode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create an orphan object use local root. </p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01540">1540</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="curproc_8h_source.html#l00113">CFS_CAP_DAC_OVERRIDE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8c_source.html#l00575">dt_directory_features</a>, <a class="el" href="dt__object_8h_source.html#l02446">dt_root_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="md__object_8h_source.html#l00084">MDL_MINMODE</a>, <a class="el" href="md__object_8h_source.html#l00485">mdo_create()</a>, <a class="el" href="lustre__idl_8h_source.html#l02318">MDS_OPEN_CREATED</a>, <a class="el" href="lustre__idl_8h_source.html#l02329">MDS_OPEN_DELAY_CREATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="lustre__idl_8h_source.html#l02343">MDS_OPEN_VOLATILE</a>, <a class="el" href="mdt__internal_8h_source.html#l00168">mdt_device::mdt_bottom</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02206">mdt_object_new()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="md__object_8h_source.html#l00416">mo_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="mdt__internal_8h_source.html#l00396">mdt_thread_info::mti_tmp_fid1</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_cr_lookup</a>, <a class="el" href="md__object_8h_source.html#l00152">md_op_spec::sp_cr_mode</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00155">md_op_spec::sp_feat</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, and <a class="el" href="md__object_8h_source.html#l00594">lu_ucred::uc_cap</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>.</p>

</div>
</div>
<a class="anchor" id="a0905b19db97daa32fa4354aa3376a987"></a><!-- doxytag: member="mdt_open.c::mdt_prep_ma_buf_from_rep" ref="a0905b19db97daa32fa4354aa3376a987" args="(struct mdt_thread_info *info, struct mdt_object *obj, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_prep_ma_buf_from_rep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>prep ma_lmm/ma_lmv for <a class="el" href="structmd__attr.html">md_attr</a> from reply </p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00307">307</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00539">lu_object_header::loh_attr</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00075">MA_LMV</a>, <a class="el" href="md__object_8h_source.html#l00123">md_attr::ma_lmv</a>, <a class="el" href="md__object_8h_source.html#l00126">md_attr::ma_lmv_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="mdt__internal_8h_source.html#l00236">mdt_object::mot_header</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, and <a class="el" href="layout_8c_source.html#l01058">RMF_MDT_MD</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aba4731050d016a98a2c5707b2be0a11a"></a><!-- doxytag: member="mdt_open.c::mdt_reconstruct_open" ref="aba4731050d016a98a2c5707b2be0a11a" args="(struct mdt_thread_info *info, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_reconstruct_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00623">623</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02065">DISP_OPEN_CREATE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lustre__idl_8h_source.html#l02929">ldlm_reply::lock_policy_res1</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="pack__generic_8c_source.html#l01080">lustre_msg_get_transno()</a>, <a class="el" href="pack__generic_8c_source.html#l01439">lustre_msg_set_status()</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__internal_8h_source.html#l00558">mdt_export_evict()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l00134">mdt_get_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00565">mdt_is_dne_client()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00180">mdt_req_from_lrd()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00431">mdt_thread_info::mti_reply_data</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="genops_8c_source.html#l01433">obd_export_nid2str()</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00068">req_capsule::rc_fmt</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="layout_8c_source.html#l01039">RMF_DLM_REP</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>, <a class="el" href="layout_8c_source.html#l01502">RQF_LDLM_INTENT_OPEN</a>, <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00295">mdt_reint_record::rr_fid2</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a506abc8479913d2fcbf68e54b913c98e"></a><!-- doxytag: member="mdt_open.c::mdt_reint_open" ref="a506abc8479913d2fcbf68e54b913c98e" args="(struct mdt_thread_info *info, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>check version of child </p>
</p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01180">1180</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02061">DISP_IT_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02062">DISP_LOOKUP_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02063">DISP_LOOKUP_NEG</a>, <a class="el" href="lustre__idl_8h_source.html#l02064">DISP_LOOKUP_POS</a>, <a class="el" href="lustre__idl_8h_source.html#l02065">DISP_OPEN_CREATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02070">DISP_OPEN_LOCK</a>, <a class="el" href="lu__object_8h_source.html#l01325">DNAME</a>, <a class="el" href="dt__object_8c_source.html#l00575">dt_directory_features</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_libclient</a>, <a class="el" href="lustre__fid_8h_source.html#l00331">fid_is_md_operative()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00049">LPO64</a>, <a class="el" href="mdt__internal_8h_source.html#l01010">LPROC_MDT_OPEN</a>, <a class="el" href="lu__object_8h_source.html#l01320">lu_name_is_valid()</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="md__object_8h_source.html#l00485">mdo_create()</a>, <a class="el" href="md__object_8h_source.html#l00466">mdo_lookup()</a>, <a class="el" href="md__object_8h_source.html#l00550">mdo_unlink()</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02328">MDS_OPEN_BY_FID</a>, <a class="el" href="lustre__idl_8h_source.html#l02321">MDS_OPEN_CREAT</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="lustre__idl_8h_source.html#l02339">MDS_OPEN_HAS_OBJS</a>, <a class="el" href="lustre__idl_8h_source.html#l02331">MDS_OPEN_JOIN_FILE</a>, <a class="el" href="lustre__idl_8h_source.html#l02337">MDS_OPEN_LOCK</a>, <a class="el" href="lustre__idl_8h_source.html#l02343">MDS_OPEN_VOLATILE</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l00141">mdt_clear_disposition()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00990">mdt_dlm_mode2mdl_mode()</a>, <a class="el" href="mdt__internal_8h_source.html#l00289">MDT_EREMOTE_OPEN</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00269">MDT_LH_PARENT</a>, <a class="el" href="mdt__handler_8c_source.html#l02888">mdt_lock_handle_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l00171">mdt_lock_pdo_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00760">mdt_obj2dt()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02206">mdt_object_new()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__reint_8c_source.html#l00162">mdt_version_get_check()</a>, <a class="el" href="mdt__reint_8c_source.html#l00149">mdt_version_get_save()</a>, <a class="el" href="mdt__internal_8h_source.html#l00260">mdt_lock_handle::mlh_pdo_mode</a>, <a class="el" href="md__object_8h_source.html#l00370">mo_xattr_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00361">mdt_thread_info::mti_cross_ref</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="mdt__internal_8h_source.html#l00396">mdt_thread_info::mti_tmp_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00429">mdt_thread_info::mti_xattr_buf</a>, <a class="el" href="lustre__idl_8h_source.html#l01179">OBD_CONNECT_RDONLY</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00179">OBD_FAIL_MDS_OPEN_PACK</a>, <a class="el" href="obd__support_8h_source.html#l00200">OBD_FAIL_MDS_PAUSE_OPEN</a>, <a class="el" href="obd__support_8h_source.html#l00628">OBD_FAIL_ONCE</a>, <a class="el" href="obd__support_8h_source.html#l00626">OBD_FAIL_TIMEOUT_ORSET</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lu__object_8h_source.html#l01326">PNAME</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00068">req_capsule::rc_fmt</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="layout_8c_source.html#l01039">RMF_DLM_REP</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="layout_8c_source.html#l01502">RQF_LDLM_INTENT_OPEN</a>, <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00295">mdt_reint_record::rr_fid2</a>, <a class="el" href="mdt__internal_8h_source.html#l00296">mdt_reint_record::rr_name</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_cr_lookup</a>, <a class="el" href="md__object_8h_source.html#l00152">md_op_spec::sp_cr_mode</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00155">md_op_spec::sp_feat</a>, <a class="el" href="lu__target_8h_source.html#l00245">tgt_vbr_obj_set()</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f224e20a3380972c81e6781f2a6c4d1"></a><!-- doxytag: member="mdt_open.c::mdt_write_allow" ref="a6f224e20a3380972c81e6781f2a6c4d1" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_write_allow </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00187">187</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, and <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa66babe41c33b76c1627046d43830462"></a><!-- doxytag: member="mdt_open.c::mdt_write_deny" ref="aa66babe41c33b76c1627046d43830462" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_write_deny </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00174">174</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="afd41f8b1bef4cb5b2fb82f28acd41e9f"></a><!-- doxytag: member="mdt_open.c::mdt_write_get" ref="afd41f8b1bef4cb5b2fb82f28acd41e9f" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_write_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00151">151</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="adf09035bc4105586e896607ce3ab1d24"></a><!-- doxytag: member="mdt_open.c::mdt_write_put" ref="adf09035bc4105586e896607ce3ab1d24" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_write_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00165">165</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, and <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aff1dac946c86bda1fb55a7b80e5b4553"></a><!-- doxytag: member="mdt_open.c::mdt_write_read" ref="aff1dac946c86bda1fb55a7b80e5b4553" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_write_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00141">141</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ad215e4cbf68f0c4c60e76ba2bf17543e"></a><!-- doxytag: member="mdt_open.c::mfd_handle_ops" ref="ad215e4cbf68f0c4c60e76ba2bf17543e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structportals__handle__ops.html">portals_handle_ops</a> <a class="el" href="mdt__open_8c.html#ad215e4cbf68f0c4c60e76ba2bf17543e">mfd_handle_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .hop_addref = <a class="code" href="mdt__open_8c.html#a243e5447b3aeb859e20bf4bdf3772cff">mdt_mfd_get</a>,
        .hop_free   = NULL,
}
</pre></div>
<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00055">55</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
