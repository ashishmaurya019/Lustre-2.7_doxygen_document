<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/utils/gss/gssd_main_loop.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/utils/gss/gssd_main_loop.c File Reference</h1><code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;sys/poll.h&gt;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br/>
<code>#include &lt;memory.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;wait.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="gssd_8h_source.html">gssd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="err__util_8h_source.html">err_util.h</a>&quot;</code><br/>

<p><a href="gssd__main__loop_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#a7428f83b8e4a4aa03dd51592086830d2">POLL_MILLISECS</a>&nbsp;&nbsp;&nbsp;500</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#aa7446959a278096148ec015debce3c2c">dir_notify_handler</a> (int sig, siginfo_t *si, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#a2a765baf92ec43dbfce276d656b53a57">scan_poll_results</a> (int <a class="el" href="utils_2wiretest_8c.html#a6baa346e44f4c2158d2be4f9b77b8203">ret</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#a0d66fd4355992811bc6574e69e81233f">lgssd_run</a> ()</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct pollfd *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#ac3b78dbdfbc13b1714a14d8e3a0a4f5b">pollarray</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#aa934e490b155c85f4170e112aadbc4f6">pollsize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static volatile int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gssd__main__loop_8c.html#a28ea88422182684d470fde5f6124666e">dir_changed</a> = 1</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7428f83b8e4a4aa03dd51592086830d2"></a><!-- doxytag: member="gssd_main_loop.c::POLL_MILLISECS" ref="a7428f83b8e4a4aa03dd51592086830d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POLL_MILLISECS&nbsp;&nbsp;&nbsp;500</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__main__loop_8c_source.html#l00058">58</a> of file <a class="el" href="gssd__main__loop_8c_source.html">gssd_main_loop.c</a>.</p>

<p>Referenced by <a class="el" href="gssd__main__loop_8c_source.html#l00101">lgssd_run()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa7446959a278096148ec015debce3c2c"></a><!-- doxytag: member="gssd_main_loop.c::dir_notify_handler" ref="aa7446959a278096148ec015debce3c2c" args="(int sig, siginfo_t *si, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dir_notify_handler </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">siginfo_t *&nbsp;</td>
          <td class="paramname"> <em>si</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__main__loop_8c_source.html#l00062">62</a> of file <a class="el" href="gssd__main__loop_8c_source.html">gssd_main_loop.c</a>.</p>

<p>References <a class="el" href="gssd__main__loop_8c_source.html#l00060">dir_changed</a>.</p>

<p>Referenced by <a class="el" href="gssd__main__loop_8c_source.html#l00101">lgssd_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d66fd4355992811bc6574e69e81233f"></a><!-- doxytag: member="gssd_main_loop.c::lgssd_run" ref="a0d66fd4355992811bc6574e69e81233f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lgssd_run </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__main__loop_8c_source.html#l00101">101</a> of file <a class="el" href="gssd__main__loop_8c_source.html">gssd_main_loop.c</a>.</p>

<p>References <a class="el" href="gssd__main__loop_8c_source.html#l00060">dir_changed</a>, <a class="el" href="gssd__main__loop_8c_source.html#l00062">dir_notify_handler()</a>, <a class="el" href="gssd_8h_source.html#l00045">DNOTIFY_SIGNAL</a>, <a class="el" href="gssd__proc_8c_source.html#l00251">init_client_list()</a>, <a class="el" href="gssd_8c_source.html#l00065">pipefs_dir</a>, <a class="el" href="gssd__main__loop_8c_source.html#l00058">POLL_MILLISECS</a>, <a class="el" href="gssd__proc_8c_source.html#l00102">pollarray</a>, <a class="el" href="gssd__proc_8c_source.html#l00104">pollsize</a>, <a class="el" href="lgss__utils_8h_source.html#l00129">printerr</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, <a class="el" href="gssd__main__loop_8c_source.html#l00068">scan_poll_results()</a>, and <a class="el" href="gssd__proc_8c_source.html#l00307">update_client_list()</a>.</p>

<p>Referenced by <a class="el" href="gssd_8c_source.html#l00179">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a765baf92ec43dbfce276d656b53a57"></a><!-- doxytag: member="gssd_main_loop.c::scan_poll_results" ref="a2a765baf92ec43dbfce276d656b53a57" args="(int ret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void scan_poll_results </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ret</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__main__loop_8c_source.html#l00068">68</a> of file <a class="el" href="gssd__main__loop_8c_source.html">gssd_main_loop.c</a>.</p>

<p>References <a class="el" href="gssd__main__loop_8c_source.html#l00060">dir_changed</a>, <a class="el" href="gssd__proc_8c_source.html#l00921">handle_krb5_upcall()</a>, <a class="el" href="gssd__proc_8c_source.html#l01070">handle_spkm3_upcall()</a>, <a class="el" href="gssd_8h_source.html#l00081">clnt_info::krb5_poll_index</a>, <a class="el" href="gssd__proc_8c_source.html#l00102">pollarray</a>, and <a class="el" href="gssd_8h_source.html#l00083">clnt_info::spkm3_poll_index</a>.</p>

<p>Referenced by <a class="el" href="gssd__main__loop_8c_source.html#l00101">lgssd_run()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a28ea88422182684d470fde5f6124666e"></a><!-- doxytag: member="gssd_main_loop.c::dir_changed" ref="a28ea88422182684d470fde5f6124666e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int <a class="el" href="gssd__main__loop_8c.html#a28ea88422182684d470fde5f6124666e">dir_changed</a> = 1<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__main__loop_8c_source.html#l00060">60</a> of file <a class="el" href="gssd__main__loop_8c_source.html">gssd_main_loop.c</a>.</p>

<p>Referenced by <a class="el" href="gssd__main__loop_8c_source.html#l00062">dir_notify_handler()</a>, <a class="el" href="gssd__main__loop_8c_source.html#l00101">lgssd_run()</a>, and <a class="el" href="gssd__main__loop_8c_source.html#l00068">scan_poll_results()</a>.</p>

</div>
</div>
<a class="anchor" id="ac3b78dbdfbc13b1714a14d8e3a0a4f5b"></a><!-- doxytag: member="gssd_main_loop.c::pollarray" ref="ac3b78dbdfbc13b1714a14d8e3a0a4f5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct pollfd* <a class="el" href="gssd__proc_8c.html#ac3b78dbdfbc13b1714a14d8e3a0a4f5b">pollarray</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__proc_8c_source.html#l00102">102</a> of file <a class="el" href="gssd__proc_8c_source.html">gssd_proc.c</a>.</p>

<p>Referenced by <a class="el" href="gssd__proc_8c_source.html#l00107">destroy_client()</a>, <a class="el" href="gssd__proc_8c_source.html#l00165">get_poll_index()</a>, <a class="el" href="gssd__proc_8c_source.html#l00251">init_client_list()</a>, <a class="el" href="gssd__proc_8c_source.html#l00185">insert_clnt_poll()</a>, <a class="el" href="gssd__main__loop_8c_source.html#l00101">lgssd_run()</a>, and <a class="el" href="gssd__main__loop_8c_source.html#l00068">scan_poll_results()</a>.</p>

</div>
</div>
<a class="anchor" id="aa934e490b155c85f4170e112aadbc4f6"></a><!-- doxytag: member="gssd_main_loop.c::pollsize" ref="aa934e490b155c85f4170e112aadbc4f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="gssd__proc_8c.html#aa934e490b155c85f4170e112aadbc4f6">pollsize</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gssd__proc_8c_source.html#l00104">104</a> of file <a class="el" href="gssd__proc_8c_source.html">gssd_proc.c</a>.</p>

<p>Referenced by <a class="el" href="gssd__proc_8c_source.html#l00251">init_client_list()</a>, and <a class="el" href="gssd__main__loop_8c_source.html#l00101">lgssd_run()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
