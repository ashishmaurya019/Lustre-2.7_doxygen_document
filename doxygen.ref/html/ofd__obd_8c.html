<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ofd/ofd_obd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ofd/ofd_obd.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="ofd__internal_8h_source.html">ofd_internal.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="obd__cksum_8h_source.html">obd_cksum.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__ioctl_8h_source.html">lustre_ioctl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__quota_8h_source.html">lustre_quota.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lfsck_8h_source.html">lustre_lfsck.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__nodemap_8h_source.html">lustre_nodemap.h</a>&gt;</code><br/>

<p><a href="ofd__obd_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_FILTER</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a126bd1d717d85fda547858c3c7701783">ofd_export_stats_init</a> (struct <a class="el" href="structofd__device.html">ofd_device</a> *ofd, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *client_nid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize OFD per-export statistics.  <a href="#a126bd1d717d85fda547858c3c7701783"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a74003f70a8474b5305c23d44c05cf7f1">ofd_parse_connect_data</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *data, bool new_connection)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Match client and OST server connection feature flags.  <a href="#a74003f70a8474b5305c23d44c05cf7f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#ae75eca5d07e6d78ff5ae69a617f9c305">ofd_obd_reconnect</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *cluuid, struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *data, void *client_nid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Re-initialize export upon client reconnection.  <a href="#ae75eca5d07e6d78ff5ae69a617f9c305"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a6cd1521859492e4f637481a620f40db9">ofd_obd_connect</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> **_exp, struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *cluuid, struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *data, void *localdata)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize new client connection.  <a href="#a6cd1521859492e4f637481a620f40db9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#ab2316ccdd15f9c236b56bdff44b73e73">ofd_obd_disconnect</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disconnect a connected client.  <a href="#ab2316ccdd15f9c236b56bdff44b73e73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#aa5c9f7ad886ccacabe1cac8fa438c330">ofd_init_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a321090592383f62464854f6f49691abc">obd_ops::o_init_export</a>.  <a href="#aa5c9f7ad886ccacabe1cac8fa438c330"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a110a925e43a0d6882cd209f448cdcc81">ofd_destroy_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#ac90138a858ea526edbbdf7294380e03b">obd_ops::o_destroy_export</a>.  <a href="#a110a925e43a0d6882cd209f448cdcc81"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a75bf6a3caae3bb3a84364235ee1bad78">ofd_postrecov</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structofd__device.html">ofd_device</a> *ofd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notify all devices in server stack about recovery completion.  <a href="#a75bf6a3caae3bb3a84364235ee1bad78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a04bc9bd0517d20f96dd526c2faa9aca6">ofd_obd_postrecov</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a4bcf4e64349d8e3de69c1cc7f9cc3d78">obd_ops::o_postrecov</a>.  <a href="#a04bc9bd0517d20f96dd526c2faa9aca6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a069068116e116fef02b55cd74ee07cd6">ofd_set_info_async</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u32 keylen, void *key, __u32 vallen, void *val, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#adab17e65d642a24d7ab7f27aa312cd46">obd_ops::o_set_info_async</a>.  <a href="#a069068116e116fef02b55cd74ee07cd6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#addbe2a3c3f7694205dd085759071b842">ofd_get_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u32 keylen, void *key, __u32 *vallen, void *val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a5b1e6cee59585a39cf3a4c75d5b3fbd7">obd_ops::o_get_info</a>.  <a href="#addbe2a3c3f7694205dd085759071b842"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a74db0692a1936a385df730c631e73178">ofd_statfs_internal</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structofd__device.html">ofd_device</a> *ofd, struct <a class="el" href="structobd__statfs.html">obd_statfs</a> *osfs, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> max_age, int *from_cache)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get file system statistics of OST server.  <a href="#a74db0692a1936a385df730c631e73178"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#ad45ee8814249ae10c9afa9e7fcc73ce6">ofd_statfs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__statfs.html">obd_statfs</a> *osfs, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> max_age, __u32 flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a3290ce3a9029a8715d49b42778683c7a">obd_ops::o_statfs</a>.  <a href="#ad45ee8814249ae10c9afa9e7fcc73ce6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a03ebdcbd4516c2e3a3fa4e6a620128ce">ofd_echo_setattr</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobdo.html">obdo</a> *oa)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a5a15efa9d38a0984a00469043fdc5f06">obd_ops::o_setattr</a>.  <a href="#a03ebdcbd4516c2e3a3fa4e6a620128ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a4ca35902254971b1607e297996aab7eb">ofd_destroy_by_fid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structofd__device.html">ofd_device</a> *ofd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, int orphan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy OFD object by its FID.  <a href="#a4ca35902254971b1607e297996aab7eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a3d11697b4834f5cb58389ecb01d8933d">ofd_echo_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobdo.html">obdo</a> *oa)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a537c70262e8c7f9bfc0ab9e2269a07eb">obd_ops::o_destroy</a>.  <a href="#a3d11697b4834f5cb58389ecb01d8933d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a5b2cea4b24c9937cbc504049a59a8acc">ofd_echo_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobdo.html">obdo</a> *oa)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a1e78368369ce63b56b46270957eb7fe9">obd_ops::o_create</a>.  <a href="#a5b2cea4b24c9937cbc504049a59a8acc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a00706bbfdd7a8351b8d4aa9df11a823e">ofd_echo_getattr</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobdo.html">obdo</a> *oa)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#ae42e80bf26ae2f7799e4df089f078167">obd_ops::o_getattr</a>.  <a href="#a00706bbfdd7a8351b8d4aa9df11a823e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a958661177752b0ae131eb04ce56e8967">ofd_ioc_get_obj_version</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structofd__device.html">ofd_device</a> *ofd, void *karg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get object version for OBD_IOC_GET_OBJ_VERSION ioctl.  <a href="#a958661177752b0ae131eb04ce56e8967"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#aafedaf6b1509b6454900ae1b2c29ec8a">ofd_iocontrol</a> (unsigned int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, int len, void *karg, void __user *uarg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a6b7db8aadd44d43d07e479688ec7b969">obd_ops::o_iocontrol</a>.  <a href="#aafedaf6b1509b6454900ae1b2c29ec8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a50a40b6d12ac0f7d5e0a34e2573fff36">ofd_precleanup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a2f1bf7b7bb9b2f8b3c92c4ee9c8e8709">obd_ops::o_precleanup</a>.  <a href="#a50a40b6d12ac0f7d5e0a34e2573fff36"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a1e4234d5b6dedd8fd09befb015fee576">ofd_ping</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#a0afb9facc5adcbb5c0c76f130d6f512a">obd_ops::o_ping</a>.  <a href="#a1e4234d5b6dedd8fd09befb015fee576"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a4daef9b2fe43e5df32f42c3f9a1b1b9f">ofd_health_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *nul, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structobd__ops.html#ad61fc588bb548db919d5e64d9142b3d1">obd_ops::o_health_check</a>.  <a href="#a4daef9b2fe43e5df32f42c3f9a1b1b9f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__ops.html">obd_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofd__obd_8c.html#a6e86af7981400cf59dc30181a66397cb">ofd_obd_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="ofd_obd.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_FILTER</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00044">44</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4ca35902254971b1607e297996aab7eb"></a><!-- doxytag: member="ofd_obd.c::ofd_destroy_by_fid" ref="a4ca35902254971b1607e297996aab7eb" args="(const struct lu_env *env, struct ofd_device *ofd, const struct lu_fid *fid, int orphan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ofd_destroy_by_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structofd__device.html">ofd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>orphan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy OFD object by its FID. </p>
<p>Supplemental function to destroy object by FID, it is used by request handler and by <a class="el" href="ofd__obd_8c.html#a3d11697b4834f5cb58389ecb01d8933d" title="Implementation of obd_ops::o_destroy.">ofd_echo_destroy()</a> below to find object by FID, lock it and call <a class="el" href="ofd__internal_8h.html#aa45de7e119bfb1d96ad8e39b5a2c2346" title="Destroy OFD object.">ofd_object_destroy()</a> finally.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ofd</em>&nbsp;</td><td>OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>orphan</em>&nbsp;</td><td>set if object being destroyed is an orphan</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00984">984</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="ofd__internal_8h_source.html#l00301">ofd_thread_info::fti_resid</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00151">LDLM_FL_AST_DISCARD_DATA</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, <a class="el" href="lustre__idl_8h_source.html#l01767">OBD_OBJECT_EOF</a>, <a class="el" href="ofd__internal_8h_source.html#l00501">ofd_info()</a>, <a class="el" href="ofd__internal_8h_source.html#l00122">ofd_device::ofd_namespace</a>, <a class="el" href="ofd__objects_8c_source.html#l00722">ofd_object_destroy()</a>, <a class="el" href="ofd__internal_8h_source.html#l00420">ofd_object_find_exists()</a>, <a class="el" href="ofd__objects_8c_source.html#l00174">ofd_object_put()</a>, <a class="el" href="lustre__fid_8h_source.html#l00652">ost_fid_build_resid()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ofd__dev_8c_source.html#l01825">ofd_destroy_hdl()</a>, <a class="el" href="ofd__obd_8c_source.html#l01038">ofd_echo_destroy()</a>, and <a class="el" href="ofd__dev_8c_source.html#l01461">ofd_orphans_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a110a925e43a0d6882cd209f448cdcc81"></a><!-- doxytag: member="ofd_obd.c::ofd_destroy_export" ref="a110a925e43a0d6882cd209f448cdcc81" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_destroy_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#ac90138a858ea526edbbdf7294380e03b">obd_ops::o_destroy_export</a>. </p>
<p>This function is called from <a class="el" href="genops_8c.html#a41a258501b0397f9c5b9d36405f42730">class_export_destroy()</a> to cleanup the OFD-specific data for export being destroyed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00492">492</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00244">obd_export::exp_flags</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02913">ldlm_destroy_export()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__idl_8h_source.html#l01182">OBD_CONNECT_GRANT</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__export_8h_source.html#l00157">OBD_OPT_FORCE</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__fmd_8c_source.html#l00300">ofd_fmd_cleanup()</a>, <a class="el" href="ofd__grant_8c_source.html#l00947">ofd_grant_discard()</a>, <a class="el" href="ofd__grant_8c_source.html#l00147">ofd_grant_sanity_check()</a>, <a class="el" href="ofd__internal_8h_source.html#l00165">ofd_device::ofd_tot_granted_clients</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00395">tgt_client_free()</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

</div>
</div>
<a class="anchor" id="a5b2cea4b24c9937cbc504049a59a8acc"></a><!-- doxytag: member="ofd_obd.c::ofd_echo_create" ref="a5b2cea4b24c9937cbc504049a59a8acc" args="(const struct lu_env *env, struct obd_export *exp, struct obdo *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_echo_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobdo.html">obdo</a> *&nbsp;</td>
          <td class="paramname"> <em>oa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a1e78368369ce63b56b46270957eb7fe9">obd_ops::o_create</a>. </p>
<p>This function is only used by ECHO client when it is run on top of OFD and just creates an object. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#a173196d00ab98073be92a5d5bef05abd" title="OFD request handler for OST_CREATE RPC.">ofd_create_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>oa</em>&nbsp;</td><td><a class="el" href="structobdo.html">obdo</a> structure with FID sequence to use</td></tr>
  </table>
  </dd>
</dl>
<p>Note: this is OBD API method which is common API for server OBDs and client OBDs. Thus some parameters used in client OBDs may not be used on server OBDs and vice versa.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01084">1084</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00281">FID_SEQ_ECHO</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l03384">obdo::o_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l01679">OBD_MD_FLGROUP</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__grant_8c_source.html#l01264">ofd_grant_commit()</a>, <a class="el" href="ofd__grant_8c_source.html#l01172">ofd_grant_create()</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__internal_8h_source.html#l00175">ofd_device::ofd_lastid_rebuilding</a>, <a class="el" href="ofd__internal_8h_source.html#l00190">ofd_device::ofd_lastid_rwsem</a>, <a class="el" href="ofd__internal_8h_source.html#l00212">ofd_name()</a>, <a class="el" href="ofd__internal_8h_source.html#l00202">ofd_obd()</a>, <a class="el" href="ofd__fs_8c_source.html#l00061">ofd_precreate_batch()</a>, <a class="el" href="ofd__objects_8c_source.html#l00206">ofd_precreate_objects()</a>, <a class="el" href="ofd__fs_8c_source.html#l00164">ofd_seq_last_oid()</a>, <a class="el" href="ofd__fs_8c_source.html#l00362">ofd_seq_load()</a>, <a class="el" href="ofd__fs_8c_source.html#l00109">ofd_seq_put()</a>, <a class="el" href="ofd__internal_8h_source.html#l00110">ofd_seq::os_create_lock</a>, <a class="el" href="lustre__idl_8h_source.html#l00531">ostid_seq()</a>, <a class="el" href="lustre__idl_8h_source.html#l00594">ostid_set_id()</a>, <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a3d11697b4834f5cb58389ecb01d8933d"></a><!-- doxytag: member="ofd_obd.c::ofd_echo_destroy" ref="a3d11697b4834f5cb58389ecb01d8933d" args="(const struct lu_env *env, struct obd_export *exp, struct obdo *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_echo_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobdo.html">obdo</a> *&nbsp;</td>
          <td class="paramname"> <em>oa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a537c70262e8c7f9bfc0ab9e2269a07eb">obd_ops::o_destroy</a>. </p>
<p>This function is only used by ECHO client when it is run on top of OFD, </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#a3c6a5b1c34a5e53346a2451603c8e4ac" title="OFD request handler for OST_DESTROY RPC.">ofd_destroy_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>oa</em>&nbsp;</td><td><a class="el" href="structobdo.html">obdo</a> structure with FID</td></tr>
  </table>
  </dd>
</dl>
<p>Note: this is OBD API method which is common API for server OBDs and client OBDs. Thus some parameters used in client OBDs may not be used on server OBDs and vice versa.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01038">1038</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l03384">obdo::o_oi</a>, <a class="el" href="ofd__obd_8c_source.html#l00984">ofd_destroy_by_fid()</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__internal_8h_source.html#l00212">ofd_name()</a>, <a class="el" href="lustre__user_8h_source.html#l00219">ost_id::oi_fid</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

</div>
</div>
<a class="anchor" id="a00706bbfdd7a8351b8d4aa9df11a823e"></a><!-- doxytag: member="ofd_obd.c::ofd_echo_getattr" ref="a00706bbfdd7a8351b8d4aa9df11a823e" args="(const struct lu_env *env, struct obd_export *exp, struct obdo *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_echo_getattr </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobdo.html">obdo</a> *&nbsp;</td>
          <td class="paramname"> <em>oa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#ae42e80bf26ae2f7799e4df089f078167">obd_ops::o_getattr</a>. </p>
<p>This function is only used by ECHO client when it is run on top of OFD and returns attributes of object. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#a55ab2fbbfe94f4e43ae145ea2cbb9eae" title="OFD request handler for OST_GETATTR RPC.">ofd_getattr_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>oa</em>&nbsp;</td><td>contains FID of object to get attributes from and is used to return attributes back</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01168">1168</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="dt__object_8c_source.html#l00553">dt_version_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ofd__internal_8h_source.html#l00299">ofd_thread_info::fti_attr</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l03414">obdo::o_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03384">obdo::o_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l01714">OBD_MD_FLDATAVERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="linux-obdo_8c_source.html#l00052">obdo_from_la()</a>, <a class="el" href="ofd__objects_8c_source.html#l00778">ofd_attr_get()</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__internal_8h_source.html#l00243">ofd_object_child()</a>, <a class="el" href="ofd__internal_8h_source.html#l00420">ofd_object_find_exists()</a>, <a class="el" href="ofd__objects_8c_source.html#l00174">ofd_object_put()</a>, <a class="el" href="ofd__internal_8h_source.html#l00055">OFD_VALID_FLAGS</a>, <a class="el" href="lustre__user_8h_source.html#l00219">ost_id::oi_fid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a03ebdcbd4516c2e3a3fa4e6a620128ce"></a><!-- doxytag: member="ofd_obd.c::ofd_echo_setattr" ref="a03ebdcbd4516c2e3a3fa4e6a620128ce" args="(const struct lu_env *env, struct obd_export *exp, struct obdo *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_echo_setattr </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobdo.html">obdo</a> *&nbsp;</td>
          <td class="paramname"> <em>oa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a5a15efa9d38a0984a00469043fdc5f06">obd_ops::o_setattr</a>. </p>
<p>This function is only used by ECHO client when it is run on top of OFD, </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#a47e83abe9acc74e96c33b62058f587f7" title="OFD request handler for OST_SETATTR RPC.">ofd_setattr_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>oa</em>&nbsp;</td><td>setattr parameters</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00892">892</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="ofd__internal_8h_source.html#l00299">ofd_thread_info::fti_attr</a>, <a class="el" href="ofd__internal_8h_source.html#l00303">ofd_thread_info::fti_mds_fid</a>, <a class="el" href="ofd__internal_8h_source.html#l00301">ofd_thread_info::fti_resid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="linux-obdo_8c_source.html#l00103">la_from_obdo()</a>, <a class="el" href="lu__object_8h_source.html#l00452">LA_TYPE</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01296">ldlm_res_lvbo_update()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="ofd__internal_8h_source.html#l00077">LPROC_OFD_STATS_SETATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l03384">obdo::o_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l03400">obdo::o_parent_oid</a>, <a class="el" href="lustre__idl_8h_source.html#l03385">obdo::o_parent_seq</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="genops_8c_source.html#l01433">obd_export_nid2str()</a>, <a class="el" href="lustre__idl_8h_source.html#l01680">OBD_MD_FLFID</a>, <a class="el" href="lustre__idl_8h_source.html#l01660">OBD_MD_FLSIZE</a>, <a class="el" href="ofd__objects_8c_source.html#l00491">ofd_attr_set()</a>, <a class="el" href="ofd__internal_8h_source.html#l00089">ofd_counter_incr()</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__internal_8h_source.html#l00212">ofd_name()</a>, <a class="el" href="ofd__internal_8h_source.html#l00122">ofd_device::ofd_namespace</a>, <a class="el" href="ofd__internal_8h_source.html#l00420">ofd_object_find_exists()</a>, <a class="el" href="ofd__objects_8c_source.html#l00174">ofd_object_put()</a>, <a class="el" href="ofd__internal_8h_source.html#l00562">ofd_prepare_fidea()</a>, <a class="el" href="lustre__user_8h_source.html#l00219">ost_id::oi_fid</a>, <a class="el" href="lustre__fid_8h_source.html#l00652">ost_fid_build_resid()</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

</div>
</div>
<a class="anchor" id="a126bd1d717d85fda547858c3c7701783"></a><!-- doxytag: member="ofd_obd.c::ofd_export_stats_init" ref="a126bd1d717d85fda547858c3c7701783" args="(struct ofd_device *ofd, struct obd_export *exp, lnet_nid_t *client_nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_export_stats_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structofd__device.html">ofd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *&nbsp;</td>
          <td class="paramname"> <em>client_nid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize OFD per-export statistics. </p>
<p>This function sets up procfs entries for various OFD export counters. These counters are for per-client statistics tracked on the server.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ofd</em>&nbsp;</td><td>OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>client_nid</em>&nbsp;</td><td>NID of client</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00067">67</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00215">obd_export::exp_nid_stats</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ofd__internal_8h_source.html#l00086">LPROC_OFD_STATS_LAST</a>, <a class="el" href="lprocfs__status_8h_source.html#l00889">lprocfs_alloc_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00893">lprocfs_free_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00899">lprocfs_init_ops_stats()</a>, <a class="el" href="obd__class_8h_source.html#l00430">lprocfs_nid_ldlm_stats_init()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00895">lprocfs_register_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00171">LPROCFS_STATS_FLAG_NOPERCPU</a>, <a class="el" href="lustre__export_8h_source.html#l00137">nid_stat::nid_proc</a>, <a class="el" href="lustre__export_8h_source.html#l00138">nid_stat::nid_stats</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_uses_nid_stats</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="ofd__internal_8h_source.html#l00202">ofd_obd()</a>, <a class="el" href="ofd__internal_8h_source.html#l00396">ofd_stats_counter_init()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ofd__obd_8c_source.html#l00340">ofd_obd_connect()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00295">ofd_obd_reconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="addbe2a3c3f7694205dd085759071b842"></a><!-- doxytag: member="ofd_obd.c::ofd_get_info" ref="addbe2a3c3f7694205dd085759071b842" args="(const struct lu_env *env, struct obd_export *exp, __u32 keylen, void *key, __u32 *vallen, void *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_get_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a5b1e6cee59585a39cf3a4c75d5b3fbd7">obd_ops::o_get_info</a>. </p>
<p>This function is not called from request handler, it is only used by direct call from nrs_orr_range_fill_physical() in ptlrpc, see LU-3239.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#af3d27d973cf2653ee17df593a6241e5b" title="OFD request handler for OST_GET_INFO RPC.">ofd_get_info_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>keylen</em>&nbsp;</td><td>length of <em>key</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key name </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>vallen</em>&nbsp;</td><td>length of key value </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>val</em>&nbsp;</td><td>the key value to return</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00651">651</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="ofd__internal_8h_source.html#l00298">ofd_thread_info::fti_fid</a>, <a class="el" href="obd_8h_source.html#l00743">KEY_FIEMAP</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="lustre__idl_8h_source.html#l03492">ll_fiemap_info_key::lfik_oa</a>, <a class="el" href="lustre__disk_8h_source.html#l00344">lr_server_data::lsd_osd_index</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lustre__idl_8h_source.html#l03384">obdo::o_oi</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__dev_8c_source.html#l00973">ofd_fiemap_get()</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__internal_8h_source.html#l00125">ofd_device::ofd_lut</a>, <a class="el" href="ofd__internal_8h_source.html#l00212">ofd_name()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a4daef9b2fe43e5df32f42c3f9a1b1b9f"></a><!-- doxytag: member="ofd_obd.c::ofd_health_check" ref="a4daef9b2fe43e5df32f42c3f9a1b1b9f" args="(const struct lu_env *nul, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_health_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>nul</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#ad61fc588bb548db919d5e64d9142b3d1">obd_ops::o_health_check</a>. </p>
<p>This function checks the OFD device health - ability to respond on incoming requests. There are two health_check methods:</p>
<ul>
<li>get statfs from the OSD. It checks just responsiveness of bottom device</li>
<li>do write attempt on bottom device to check it is fully operational and is not stuck. This is expensive method and requires special configuration option --enable-health-write while building Lustre, it is turned off by default.</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nul</em>&nbsp;</td><td>not used </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device of OFD</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value in case of error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01420">1420</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02437">dt_statfs()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="ofd__internal_8h_source.html#l00316">ofd_thread_info::fti_buf</a>, <a class="el" href="ofd__internal_8h_source.html#l00317">ofd_thread_info::fti_off</a>, <a class="el" href="structofd__thread__info.html#a143cbb933e501df87c3b43b854852113">ofd_thread_info::fti_u</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="ofd__internal_8h_source.html#l00197">ofd_dev()</a>, <a class="el" href="ofd__internal_8h_source.html#l00126">ofd_device::ofd_health_check_file</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__internal_8h_source.html#l00118">ofd_device::ofd_osd</a>, <a class="el" href="lustre__user_8h_source.html#l00118">obd_statfs::os_state</a>, <a class="el" href="lustre__user_8h_source.html#l00101">OS_STATE_READONLY</a>, <a class="el" href="ofd__internal_8h_source.html#l00310">ofd_thread_info::osfs</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="aa5c9f7ad886ccacabe1cac8fa438c330"></a><!-- doxytag: member="ofd_obd.c::ofd_init_export" ref="aa5c9f7ad886ccacabe1cac8fa438c330" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_init_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a321090592383f62464854f6f49691abc">obd_ops::o_init_export</a>. </p>
<p>This function is called from <a class="el" href="obd__class_8h.html#a1f8afeb544faf735e1c2318bd4dce388">class_new_export()</a> and initializes the OFD-specific data for new export.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00456">456</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_connecting</a>, <a class="el" href="lustre__export_8h_source.html#l00240">obd_export::exp_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02884">ldlm_init_export()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00376">tgt_client_alloc()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a958661177752b0ae131eb04ce56e8967"></a><!-- doxytag: member="ofd_obd.c::ofd_ioc_get_obj_version" ref="a958661177752b0ae131eb04ce56e8967" args="(const struct lu_env *env, struct ofd_device *ofd, void *karg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_ioc_get_obj_version </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structofd__device.html">ofd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>karg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get object version for OBD_IOC_GET_OBJ_VERSION ioctl. </p>
<p>This is supplemental function for <a class="el" href="ofd__obd_8c.html#aafedaf6b1509b6454900ae1b2c29ec8a" title="Implementation of obd_ops::o_iocontrol.">ofd_iocontrol()</a> to return object version for lctl tool.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ofd</em>&nbsp;</td><td>OFD device </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>karg</em>&nbsp;</td><td>ioctl data</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01220">1220</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8c_source.html#l00553">dt_version_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00107">obd_ioctl_data::ioc_inlbuf1</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00109">obd_ioctl_data::ioc_inlbuf2</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00111">obd_ioctl_data::ioc_inlbuf3</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00113">obd_ioctl_data::ioc_inlbuf4</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00106">obd_ioctl_data::ioc_inllen1</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00108">obd_ioctl_data::ioc_inllen2</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00110">obd_ioctl_data::ioc_inllen3</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00112">obd_ioctl_data::ioc_inllen4</a>, <a class="el" href="lustre__disk_8h_source.html#l00344">lr_server_data::lsd_osd_index</a>, <a class="el" href="lu__object_8h_source.html#l00845">lu_object_remote</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="ofd__internal_8h_source.html#l00125">ofd_device::ofd_lut</a>, <a class="el" href="ofd__internal_8h_source.html#l00243">ofd_object_child()</a>, <a class="el" href="ofd__internal_8h_source.html#l00230">ofd_object_exists()</a>, <a class="el" href="ofd__objects_8c_source.html#l00102">ofd_object_find()</a>, <a class="el" href="ofd__objects_8c_source.html#l00174">ofd_object_put()</a>, <a class="el" href="ofd__internal_8h_source.html#l00219">ofd_object::ofo_obj</a>, <a class="el" href="lustre__idl_8h_source.html#l00594">ostid_set_id()</a>, <a class="el" href="lustre__idl_8h_source.html#l00561">ostid_set_seq()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, and <a class="el" href="packet-lnet_8c_source.html#l00255">version</a>.</p>

<p>Referenced by <a class="el" href="ofd__obd_8c_source.html#l01293">ofd_iocontrol()</a>.</p>

</div>
</div>
<a class="anchor" id="aafedaf6b1509b6454900ae1b2c29ec8a"></a><!-- doxytag: member="ofd_obd.c::ofd_iocontrol" ref="aafedaf6b1509b6454900ae1b2c29ec8a" args="(unsigned int cmd, struct obd_export *exp, int len, void *karg, void __user *uarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_iocontrol </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>karg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&nbsp;</td>
          <td class="paramname"> <em>uarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a6b7db8aadd44d43d07e479688ec7b969">obd_ops::o_iocontrol</a>. </p>
<p>This is OFD ioctl handling function which is primary interface for Lustre tools like lfs, lctl and lfsck.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cmd</em>&nbsp;</td><td>ioctl command </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>len</em>&nbsp;</td><td>not used </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>karg</em>&nbsp;</td><td>buffer with data </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uarg</em>&nbsp;</td><td>not used</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01293">1293</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="dt__object_8h_source.html#l02473">dt_ro()</a>, <a class="el" href="dt__object_8h_source.html#l02465">dt_sync()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00107">obd_ioctl_data::ioc_inlbuf1</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00219">lfsck_stop::ls_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00218">lfsck_stop::ls_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00044">lfsck_start_param::lsp_index_valid</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00042">lfsck_start_param::lsp_start</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_abort_recovery</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00355">OBD_IOC_ABORT_RECOVERY</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00400">OBD_IOC_GET_OBJ_VERSION</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00354">OBD_IOC_SET_READONLY</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00406">OBD_IOC_START_LFSCK</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00407">OBD_IOC_STOP_LFSCK</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00332">OBD_IOC_SYNC</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__obd_8c_source.html#l01220">ofd_ioc_get_obj_version()</a>, <a class="el" href="ofd__internal_8h_source.html#l00202">ofd_obd()</a>, <a class="el" href="ofd__internal_8h_source.html#l00118">ofd_device::ofd_osd</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a6cd1521859492e4f637481a620f40db9"></a><!-- doxytag: member="ofd_obd.c::ofd_obd_connect" ref="a6cd1521859492e4f637481a620f40db9" args="(const struct lu_env *env, struct obd_export **_exp, struct obd_device *obd, struct obd_uuid *cluuid, struct obd_connect_data *data, void *localdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_obd_connect </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> **&nbsp;</td>
          <td class="paramname"> <em>_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>cluuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>localdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize new client connection. </p>
<p>This function handles new connection to the OFD. The new export is created (in context of <a class="el" href="obd__class_8h.html#a56b23397280e75e63904a94a3bdf04ca">class_connect()</a>) and persistent client data is initialized on storage.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>_exp</em>&nbsp;</td><td>stores pointer to new export </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cluuid</em>&nbsp;</td><td>client UUID </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>connection data from request </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>localdata</em>&nbsp;</td><td>client NID</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00340">340</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00708">class_conn2export()</a>, <a class="el" href="genops_8c_source.html#l01150">class_connect()</a>, <a class="el" href="genops_8c_source.html#l01220">class_disconnect()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00357">lsd_client_data::lcd_uuid</a>, <a class="el" href="nodemap__handler_8c_source.html#l00351">nodemap_add_member()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00376">nodemap_del_member()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_replayable</a>, <a class="el" href="lustre__idl_8h_source.html#l01347">obd_connect_data::ocd_group</a>, <a class="el" href="ofd__internal_8h_source.html#l00197">ofd_dev()</a>, <a class="el" href="ofd__obd_8c_source.html#l00067">ofd_export_stats_init()</a>, <a class="el" href="ofd__obd_8c_source.html#l00137">ofd_parse_connect_data()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00890">tgt_client_new()</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

</div>
</div>
<a class="anchor" id="ab2316ccdd15f9c236b56bdff44b73e73"></a><!-- doxytag: member="ofd_obd.c::ofd_obd_disconnect" ref="ab2316ccdd15f9c236b56bdff44b73e73" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ofd_obd_disconnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disconnect a connected client. </p>
<p>This function terminates the client connection. The client export is disconnected (cleaned up) and client data on persistent storage is removed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00411">411</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_failed</a>, <a class="el" href="lustre__export_8h_source.html#l00244">obd_export::exp_flags</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00376">nodemap_del_member()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_fail</a>, <a class="el" href="lustre__export_8h_source.html#l00157">OBD_OPT_FORCE</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_replayable</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__grant_8c_source.html#l00947">ofd_grant_discard()</a>, <a class="el" href="ofd__grant_8c_source.html#l00147">ofd_grant_sanity_check()</a>, <a class="el" href="ofd__internal_8h_source.html#l00202">ofd_obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01013">tgt_client_del()</a>.</p>

<p>Referenced by <a class="el" href="ofd__dev_8c_source.html#l01553">ofd_create_hdl()</a>.</p>

</div>
</div>
<a class="anchor" id="a04bc9bd0517d20f96dd526c2faa9aca6"></a><!-- doxytag: member="ofd_obd.c::ofd_obd_postrecov" ref="a04bc9bd0517d20f96dd526c2faa9aca6" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_obd_postrecov </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a4bcf4e64349d8e3de69c1cc7f9cc3d78">obd_ops::o_postrecov</a>. </p>
<p>This function is called from target_finish_recovery() upon recovery completion.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device of OFD</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00573">573</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="ofd__internal_8h_source.html#l00197">ofd_dev()</a>, <a class="el" href="ofd__internal_8h_source.html#l00511">ofd_info_init()</a>, <a class="el" href="ofd__obd_8c_source.html#l00541">ofd_postrecov()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ae75eca5d07e6d78ff5ae69a617f9c305"></a><!-- doxytag: member="ofd_obd.c::ofd_obd_reconnect" ref="ae75eca5d07e6d78ff5ae69a617f9c305" args="(const struct lu_env *env, struct obd_export *exp, struct obd_device *obd, struct obd_uuid *cluuid, struct obd_connect_data *data, void *client_nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_obd_reconnect </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>cluuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>client_nid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Re-initialize export upon client reconnection. </p>
<p>This function parses connection data from reconnect and resets export statistics.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cluuid</em>&nbsp;</td><td>NID of client </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>connection data from request </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>localdata</em>&nbsp;</td><td>client NID</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00295">295</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="nodemap__handler_8c_source.html#l00351">nodemap_add_member()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00376">nodemap_del_member()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="ofd__internal_8h_source.html#l00197">ofd_dev()</a>, <a class="el" href="ofd__obd_8c_source.html#l00067">ofd_export_stats_init()</a>, <a class="el" href="ofd__obd_8c_source.html#l00137">ofd_parse_connect_data()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a74003f70a8474b5305c23d44c05cf7f1"></a><!-- doxytag: member="ofd_obd.c::ofd_parse_connect_data" ref="a74003f70a8474b5305c23d44c05cf7f1" args="(const struct lu_env *env, struct obd_export *exp, struct obd_connect_data *data, bool new_connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_parse_connect_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>new_connection</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Match client and OST server connection feature flags. </p>
<p>Compute the compatibility flags for a connection request based on features mutually supported by client and server.</p>
<p>The obd_export::exp_connect_data.ocd_connect_flags field in <em>exp</em> must not be updated here, otherwise a partially initialized value may be exposed. After the connection request is successfully processed, the top-level <a class="el" href="lu__target_8h.html#a0c6126d0acf692a2a3ad1f4acfc99f2c">tgt_connect()</a> request handler atomically updates the export connect flags from the <a class="el" href="structobd__connect__data.html#a056d6aaded7f397e902843b52a36a6a5">obd_connect_data::ocd_connect_flags</a> field of the reply. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="lu__target_8h.html#a0c6126d0acf692a2a3ad1f4acfc99f2c">tgt_connect()</a>.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>the <a class="el" href="structobd__export.html" title="Export structure.">obd_export</a> associated with this client/target pair </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>stores data for this connect request </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>new_connection</em>&nbsp;</td><td>is this connection new or not</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EPROTO</em>&nbsp;</td><td>client and server feature requirements are incompatible </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EBADF</em>&nbsp;</td><td>OST index in connect request doesn't match real OST index </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00137">137</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__cksum_8h_source.html#l00140">cksum_types_supported_server()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="dt__object_8h_source.html#l00091">dt_device_param::ddp_extent_tax</a>, <a class="el" href="dt__object_8h_source.html#l00086">dt_device_param::ddp_inodespace</a>, <a class="el" href="dt__object_8h_source.html#l00088">dt_device_param::ddp_max_extent_blks</a>, <a class="el" href="dt__object_8h_source.html#l00084">dt_device_param::ddp_maxbytes</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00243">obd_export::exp_connect_data</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__export_8h_source.html#l00207">obd_export::exp_obd_chain_timed</a>, <a class="el" href="lustre__export_8h_source.html#l00119">filter_export_data::fed_group</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__disk_8h_source.html#l00334">lr_server_data::lsd_feature_compat</a>, <a class="el" href="lustre__disk_8h_source.html#l00344">lr_server_data::lsd_osd_index</a>, <a class="el" href="lustre__ver_8h_source.html#l00023">LUSTRE_VERSION_CODE</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lustre__disk_8h_source.html#l00289">OBD_COMPAT_OST</a>, <a class="el" href="lustre__idl_8h_source.html#l01212">OBD_CONNECT_CKSUM</a>, <a class="el" href="lustre__idl_8h_source.html#l01180">OBD_CONNECT_INDEX</a>, <a class="el" href="lustre__idl_8h_source.html#l01223">OBD_CONNECT_MAXBYTES</a>, <a class="el" href="lustre__idl_8h_source.html#l01181">OBD_CONNECT_MDS</a>, <a class="el" href="lustre__idl_8h_source.html#l01237">OBD_CONNECT_PINGLESS</a>, <a class="el" href="lustre__idl_8h_source.html#l01217">OBD_CONNECT_SKIP_ORPHAN</a>, <a class="el" href="obd_8h_source.html#l00644">obd_device::obd_dev_lock</a>, <a class="el" href="genops_8c_source.html#l01433">obd_export_nid2str()</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00307">OBD_FAIL_OST_BRW_SIZE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01340">obd_connect_data::ocd_brw_size</a>, <a class="el" href="lustre__idl_8h_source.html#l01348">obd_connect_data::ocd_cksum_types</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01338">obd_connect_data::ocd_grant</a>, <a class="el" href="lustre__idl_8h_source.html#l01342">obd_connect_data::ocd_grant_blkbits</a>, <a class="el" href="lustre__idl_8h_source.html#l01343">obd_connect_data::ocd_grant_inobits</a>, <a class="el" href="lustre__idl_8h_source.html#l01345">obd_connect_data::ocd_grant_max_blks</a>, <a class="el" href="lustre__idl_8h_source.html#l01344">obd_connect_data::ocd_grant_tax_kb</a>, <a class="el" href="lustre__idl_8h_source.html#l01347">obd_connect_data::ocd_group</a>, <a class="el" href="lustre__idl_8h_source.html#l01268">OCD_HAS_FLAG</a>, <a class="el" href="lustre__idl_8h_source.html#l01339">obd_connect_data::ocd_index</a>, <a class="el" href="lustre__idl_8h_source.html#l01351">obd_connect_data::ocd_maxbytes</a>, <a class="el" href="lustre__idl_8h_source.html#l01337">obd_connect_data::ocd_version</a>, <a class="el" href="ofd__internal_8h_source.html#l00143">ofd_device::ofd_blockbits</a>, <a class="el" href="ofd__internal_8h_source.html#l00168">ofd_device::ofd_brw_size</a>, <a class="el" href="ofd__internal_8h_source.html#l00120">ofd_device::ofd_dt_conf</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__grant_8c_source.html#l00868">ofd_grant_connect()</a>, <a class="el" href="ofd__internal_8h_source.html#l00125">ofd_device::ofd_lut</a>, <a class="el" href="lustre__idl_8h_source.html#l01302">OST_CONNECT_SUPPORTED</a>, <a class="el" href="pinger_8c_source.html#l00058">ptlrpc_pinger_suppress_pings()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="ofd__obd_8c_source.html#l00340">ofd_obd_connect()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00295">ofd_obd_reconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e4234d5b6dedd8fd09befb015fee576"></a><!-- doxytag: member="ofd_obd.c::ofd_ping" ref="a1e4234d5b6dedd8fd09befb015fee576" args="(const struct lu_env *env, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_ping </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a0afb9facc5adcbb5c0c76f130d6f512a">obd_ops::o_ping</a>. </p>
<p>This is OFD-specific part of OBD_PING request handling. It controls Filter Modification Data (FMD) expiration each time PING is received.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__fmd_8c.html#a514d9002b47398e274c36c1685ca84a1" title="Expire FMD entries.">ofd_fmd_expire()</a> and <a class="el" href="ofd__fmd_8c.html">ofd_fmd.c</a> for details</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of client</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01396">1396</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="ofd__fmd_8c_source.html#l00140">ofd_fmd_expire()</a>.</p>

</div>
</div>
<a class="anchor" id="a75bf6a3caae3bb3a84364235ee1bad78"></a><!-- doxytag: member="ofd_obd.c::ofd_postrecov" ref="a75bf6a3caae3bb3a84364235ee1bad78" args="(const struct lu_env *env, struct ofd_device *ofd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ofd_postrecov </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structofd__device.html">ofd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ofd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify all devices in server stack about recovery completion. </p>
<p>This function calls ldo_recovery_complete() for all lower devices in the server stack so they will be prepared for normal operations.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ofd</em>&nbsp;</td><td>OFD device</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00541">541</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lu__object_8h_source.html#l00279">lu_device::ld_ops</a>, <a class="el" href="structlu__device__operations.html#a0786583fdaf5ff6bf3f4aaa4e48d3dd9">lu_device_operations::ldo_recovery_complete</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00044">lfsck_start_param::lsp_index_valid</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00042">lfsck_start_param::lsp_start</a>, <a class="el" href="ofd__internal_8h_source.html#l00117">ofd_device::ofd_dt_dev</a>, <a class="el" href="ofd__internal_8h_source.html#l00212">ofd_name()</a>, <a class="el" href="ofd__internal_8h_source.html#l00118">ofd_device::ofd_osd</a>, and <a class="el" href="ofd__internal_8h_source.html#l00175">ofd_device::ofd_skip_lfsck</a>.</p>

<p>Referenced by <a class="el" href="ofd__obd_8c_source.html#l00573">ofd_obd_postrecov()</a>, and <a class="el" href="ofd__dev_8c_source.html#l00576">ofd_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a50a40b6d12ac0f7d5e0a34e2573fff36"></a><!-- doxytag: member="ofd_obd.c::ofd_precleanup" ref="a50a40b6d12ac0f7d5e0a34e2573fff36" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_precleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a2f1bf7b7bb9b2f8b3c92c4ee9c8e8709">obd_ops::o_precleanup</a>. </p>
<p>This function stops device activity before shutting it down. It is called from a cleanup function upon forceful device cleanup. For OFD there are no special actions, it just invokes target_recovery_cleanup().</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device of OFD</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01375">1375</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a069068116e116fef02b55cd74ee07cd6"></a><!-- doxytag: member="ofd_obd.c::ofd_set_info_async" ref="a069068116e116fef02b55cd74ee07cd6" args="(const struct lu_env *env, struct obd_export *exp, __u32 keylen, void *key, __u32 vallen, void *val, struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ofd_set_info_async </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#adab17e65d642a24d7ab7f27aa312cd46">obd_ops::o_set_info_async</a>. </p>
<p>This function is not called from request handler, it is only used by <a class="el" href="obd__class_8h.html#a4c8ebba632597c2863c29cf6652a8380" title="to notify sptlrpc log for fsname has changed, let every relevant OBD adjust sptlrpc...">class_notify_sptlrpc_conf()</a> locally by direct <a class="el" href="obd__class_8h.html#af82ae5d7bd392a892b6f372513e68516">obd_set_info_async()</a> call. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#a078aa3b2c42bd8edc2393e15ed5d5232" title="OFD request handler for OST_SET_INFO RPC.">ofd_set_info_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>keylen</em>&nbsp;</td><td>length of <em>key</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key name </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vallen</em>&nbsp;</td><td>length of <em>val</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>val</em>&nbsp;</td><td>the <em>key</em> value </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>set</em>&nbsp;</td><td>not used in OFD</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00610">610</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="obd_8h_source.html#l00759">KEY_SPTLRPC_CONF</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="tgt__handler_8c_source.html#l01010">tgt_adapt_sptlrpc_conf()</a>.</p>

</div>
</div>
<a class="anchor" id="ad45ee8814249ae10c9afa9e7fcc73ce6"></a><!-- doxytag: member="ofd_obd.c::ofd_statfs" ref="ad45ee8814249ae10c9afa9e7fcc73ce6" args="(const struct lu_env *env, struct obd_export *exp, struct obd_statfs *osfs, __u64 max_age, __u32 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ofd_statfs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__statfs.html">obd_statfs</a> *&nbsp;</td>
          <td class="paramname"> <em>osfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>max_age</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structobd__ops.html#a3290ce3a9029a8715d49b42778683c7a">obd_ops::o_statfs</a>. </p>
<p>This function returns information about a storage file system. It is called from several places by using the OBD API as well as by direct call, e.g. from request handler.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ofd__dev_8c.html#af6be8cdea32bea774b3422720a4aeabf" title="OFD request handler for OST_STATFS RPC.">ofd_statfs_hdl()</a> for request <a class="el" href="rename__many_8c.html#a3c2348f39cf58c5c0f48742b32b15d83">handler</a> function.</dd></dl>
<p>Report also the state of the OST to the caller in osfs-&gt;os_state (OS_STATE_READONLY, OS_STATE_DEGRADED).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export of OFD device </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>osfs</em>&nbsp;</td><td>statistic data to return </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>max_age</em>&nbsp;</td><td>maximum age for cached data </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>not used in OFD</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00806">806</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="ofd__internal_8h_source.html#l00443">COMPAT_BSIZE_SHIFT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00134">D_CACHE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00131">D_SUPER</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00112">filter_export_data::fed_grant</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00344">lr_server_data::lsd_osd_index</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="lustre__idl_8h_source.html#l01181">OBD_CONNECT_MDS</a>, <a class="el" href="obd__support_8h_source.html#l00620">OBD_FAIL_CHECK_VALUE</a>, <a class="el" href="obd__support_8h_source.html#l00320">OBD_FAIL_OST_ENOINO</a>, <a class="el" href="obd__support_8h_source.html#l00300">OBD_FAIL_OST_ENOSPC</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="ofd__internal_8h_source.html#l00143">ofd_device::ofd_blockbits</a>, <a class="el" href="ofd__internal_8h_source.html#l00207">ofd_exp()</a>, <a class="el" href="ofd__internal_8h_source.html#l00435">ofd_grant_param_supp()</a>, <a class="el" href="ofd__grant_8c_source.html#l00147">ofd_grant_sanity_check()</a>, <a class="el" href="ofd__internal_8h_source.html#l00125">ofd_device::ofd_lut</a>, <a class="el" href="ofd__internal_8h_source.html#l00175">ofd_device::ofd_raid_degraded</a>, <a class="el" href="ofd__obd_8c_source.html#l00701">ofd_statfs_internal()</a>, <a class="el" href="ofd__internal_8h_source.html#l00159">ofd_device::ofd_tot_dirty</a>, <a class="el" href="ofd__internal_8h_source.html#l00161">ofd_device::ofd_tot_granted</a>, <a class="el" href="ofd__internal_8h_source.html#l00163">ofd_device::ofd_tot_pending</a>, <a class="el" href="lustre__user_8h_source.html#l00111">obd_statfs::os_bavail</a>, <a class="el" href="lustre__user_8h_source.html#l00110">obd_statfs::os_bfree</a>, <a class="el" href="lustre__user_8h_source.html#l00109">obd_statfs::os_blocks</a>, <a class="el" href="lustre__user_8h_source.html#l00115">obd_statfs::os_bsize</a>, <a class="el" href="lustre__user_8h_source.html#l00113">obd_statfs::os_ffree</a>, <a class="el" href="lustre__user_8h_source.html#l00112">obd_statfs::os_files</a>, <a class="el" href="lustre__user_8h_source.html#l00118">obd_statfs::os_state</a>, <a class="el" href="lustre__user_8h_source.html#l00100">OS_STATE_DEGRADED</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="ofd__dev_8c_source.html#l01913">ofd_statfs_hdl()</a>.</p>

</div>
</div>
<a class="anchor" id="a74db0692a1936a385df730c631e73178"></a><!-- doxytag: member="ofd_obd.c::ofd_statfs_internal" ref="a74db0692a1936a385df730c631e73178" args="(const struct lu_env *env, struct ofd_device *ofd, struct obd_statfs *osfs, __u64 max_age, int *from_cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ofd_statfs_internal </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structofd__device.html">ofd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__statfs.html">obd_statfs</a> *&nbsp;</td>
          <td class="paramname"> <em>osfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>max_age</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>from_cache</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get file system statistics of OST server. </p>
<p>Helper function for <a class="el" href="ofd__internal_8h.html#ad45ee8814249ae10c9afa9e7fcc73ce6" title="Implementation of obd_ops::o_statfs.">ofd_statfs()</a>, also used by grant code. Implements caching for statistics to avoid calling OSD device each time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ofd</em>&nbsp;</td><td>OFD device </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>osfs</em>&nbsp;</td><td>statistic data to return </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>max_age</em>&nbsp;</td><td>maximum age for cached data </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>from_cache</em>&nbsp;</td><td>show that data was get from cache or not</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l00701">701</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00248">cfs_time_before_64()</a>, <a class="el" href="linux-time_8h_source.html#l00235">cfs_time_current_64</a>, <a class="el" href="dt__object_8h_source.html#l02437">dt_statfs()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="ofd__internal_8h_source.html#l00143">ofd_device::ofd_blockbits</a>, <a class="el" href="ofd__internal_8h_source.html#l00157">ofd_device::ofd_grant_lock</a>, <a class="el" href="ofd__internal_8h_source.html#l00118">ofd_device::ofd_osd</a>, <a class="el" href="ofd__internal_8h_source.html#l00141">ofd_device::ofd_osfs</a>, <a class="el" href="ofd__internal_8h_source.html#l00142">ofd_device::ofd_osfs_age</a>, <a class="el" href="ofd__internal_8h_source.html#l00153">ofd_device::ofd_osfs_inflight</a>, <a class="el" href="ofd__internal_8h_source.html#l00139">ofd_device::ofd_osfs_lock</a>, <a class="el" href="ofd__internal_8h_source.html#l00146">ofd_device::ofd_osfs_unstable</a>, <a class="el" href="ofd__internal_8h_source.html#l00150">ofd_device::ofd_statfs_inflight</a>, <a class="el" href="ofd__internal_8h_source.html#l00163">ofd_device::ofd_tot_pending</a>, <a class="el" href="lustre__user_8h_source.html#l00111">obd_statfs::os_bavail</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="ofd__grant_8c_source.html#l00290">ofd_grant_statfs()</a>, <a class="el" href="ofd__dev_8c_source.html#l02814">ofd_init0()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00806">ofd_statfs()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a6e86af7981400cf59dc30181a66397cb"></a><!-- doxytag: member="ofd_obd.c::ofd_obd_ops" ref="a6e86af7981400cf59dc30181a66397cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__ops.html">obd_ops</a> <a class="el" href="ofd__obd_8c.html#a6e86af7981400cf59dc30181a66397cb">ofd_obd_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .o_owner                = THIS_MODULE,
        .o_connect              = <a class="code" href="ofd__obd_8c.html#a6cd1521859492e4f637481a620f40db9" title="Initialize new client connection.">ofd_obd_connect</a>,
        .o_reconnect            = <a class="code" href="ofd__obd_8c.html#ae75eca5d07e6d78ff5ae69a617f9c305" title="Re-initialize export upon client reconnection.">ofd_obd_reconnect</a>,
        .o_disconnect           = <a class="code" href="ofd__internal_8h.html#ab2316ccdd15f9c236b56bdff44b73e73" title="Disconnect a connected client.">ofd_obd_disconnect</a>,
        .o_create               = <a class="code" href="ofd__obd_8c.html#a5b2cea4b24c9937cbc504049a59a8acc" title="Implementation of obd_ops::o_create.">ofd_echo_create</a>,
        .o_statfs               = <a class="code" href="ofd__internal_8h.html#ad45ee8814249ae10c9afa9e7fcc73ce6" title="Implementation of obd_ops::o_statfs.">ofd_statfs</a>,
        .o_setattr              = <a class="code" href="ofd__obd_8c.html#a03ebdcbd4516c2e3a3fa4e6a620128ce" title="Implementation of obd_ops::o_setattr.">ofd_echo_setattr</a>,
        .o_preprw               = <a class="code" href="ofd__internal_8h.html#a5e1b48d7cdf4e6ccdc5f00ba323f1ddb" title="Prepare bulk IO requests for processing.">ofd_preprw</a>,
        .o_commitrw             = <a class="code" href="ofd__internal_8h.html#a390d484ba582cfdbd4e5b50466d3a5af" title="Commit bulk IO to the storage.">ofd_commitrw</a>,
        .o_destroy              = <a class="code" href="ofd__obd_8c.html#a3d11697b4834f5cb58389ecb01d8933d" title="Implementation of obd_ops::o_destroy.">ofd_echo_destroy</a>,
        .o_init_export          = <a class="code" href="ofd__obd_8c.html#aa5c9f7ad886ccacabe1cac8fa438c330" title="Implementation of obd_ops::o_init_export.">ofd_init_export</a>,
        .o_destroy_export       = <a class="code" href="ofd__obd_8c.html#a110a925e43a0d6882cd209f448cdcc81" title="Implementation of obd_ops::o_destroy_export.">ofd_destroy_export</a>,
        .o_postrecov            = <a class="code" href="ofd__obd_8c.html#a04bc9bd0517d20f96dd526c2faa9aca6" title="Implementation of obd_ops::o_postrecov.">ofd_obd_postrecov</a>,
        .o_getattr              = <a class="code" href="ofd__obd_8c.html#a00706bbfdd7a8351b8d4aa9df11a823e" title="Implementation of obd_ops::o_getattr.">ofd_echo_getattr</a>,
        .o_iocontrol            = <a class="code" href="ofd__obd_8c.html#aafedaf6b1509b6454900ae1b2c29ec8a" title="Implementation of obd_ops::o_iocontrol.">ofd_iocontrol</a>,
        .o_precleanup           = <a class="code" href="ofd__obd_8c.html#a50a40b6d12ac0f7d5e0a34e2573fff36" title="Implementation of obd_ops::o_precleanup.">ofd_precleanup</a>,
        .o_ping                 = <a class="code" href="ofd__obd_8c.html#a1e4234d5b6dedd8fd09befb015fee576" title="Implementation of obd_ops::o_ping.">ofd_ping</a>,
        .o_health_check         = <a class="code" href="ofd__obd_8c.html#a4daef9b2fe43e5df32f42c3f9a1b1b9f" title="Implementation of obd_ops::o_health_check.">ofd_health_check</a>,
        .o_set_info_async       = <a class="code" href="ofd__obd_8c.html#a069068116e116fef02b55cd74ee07cd6" title="Implementation of obd_ops::o_set_info_async.">ofd_set_info_async</a>,
        .o_get_info             = <a class="code" href="ofd__obd_8c.html#addbe2a3c3f7694205dd085759071b842" title="Implementation of obd_ops::o_get_info.">ofd_get_info</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="ofd__obd_8c_source.html#l01476">1476</a> of file <a class="el" href="ofd__obd_8c_source.html">ofd_obd.c</a>.</p>

<p>Referenced by <a class="el" href="ofd__dev_8c_source.html#l03123">ofd_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
