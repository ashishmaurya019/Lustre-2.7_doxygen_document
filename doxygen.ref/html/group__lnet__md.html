<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: Memory descriptors</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Memory descriptors<br/>
<small>
[<a class="el" href="group__lnet.html">LNet</a>]</small>
</h1>
<p>A memory descriptor contains information about a region of a user's memory (either in kernel or user space) and optionally points to an event queue where information about the operations performed on the memory descriptor are recorded.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html">lnet_md_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines the visible parts of a memory descriptor.  <a href="structlnet__md__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__kiov__t.html">lnet_kiov_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A page-based fragment of a MD.  <a href="structlnet__kiov__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga940bf275936204c687ca9178062c8168">LNET_MTU_BITS</a>&nbsp;&nbsp;&nbsp;20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga3f0473c1f8801dc40fe285939f6d5d0b">LNET_MTU</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; LNET_MTU_BITS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gae5c5481fe02371e7bf253b2b1cf0d030">LNET_MAX_IOV</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">limit on the number of fragments in discontiguous MDs  <a href="#gae5c5481fe02371e7bf253b2b1cf0d030"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga653ba41bd3978635e420cfa4601193e1">LNET_MD_OP_PUT</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Options for the MD structure.  <a href="#ga653ba41bd3978635e420cfa4601193e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga2f9879433bdc5c8f77f13359f74e5df5">LNET_MD_OP_GET</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#ga2f9879433bdc5c8f77f13359f74e5df5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga972b76d71cbb0e446c273d2edf83cad6">LNET_MD_MANAGE_REMOTE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#ga972b76d71cbb0e446c273d2edf83cad6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gab42e05f052fae51874fb3b60471d7c30">LNET_MD_TRUNCATE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#gab42e05f052fae51874fb3b60471d7c30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga364d206ea5fb9d05f09871faf1e10bd3">LNET_MD_ACK_DISABLE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#ga364d206ea5fb9d05f09871faf1e10bd3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gacd7ecdcabac21b089dc8e101048bffc1">LNET_MD_IOVEC</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#gacd7ecdcabac21b089dc8e101048bffc1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga05bfd5b03abc8ded1b209b51bf65973f">LNET_MD_MAX_SIZE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#ga05bfd5b03abc8ded1b209b51bf65973f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gad9555865426bac84ce57b5ed4a0059a2">LNET_MD_KIOV</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 8)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>.  <a href="#gad9555865426bac84ce57b5ed4a0059a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gabb8a095aed7dae7ea5919b3b57f215e7">LNET_MD_PHYS</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gab5ce273fe5d92ed9f27f71519592e0d2">LNET_MD_THRESH_INF</a>&nbsp;&nbsp;&nbsp;(-1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Infinite threshold on MD operations.  <a href="#gab5ce273fe5d92ed9f27f71519592e0d2"></a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct iovec&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#gad848ede18fff1097e842dc9dca2fc9a3">lnet_md_iovec_t</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga958972d35fc04d0716f4f6b71cd804fc">LNetMDAttach</a> (<a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> current_in, <a class="el" href="structlnet__md__t.html">lnet_md_t</a> md_in, <a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a> unlink_in, <a class="el" href="structlnet__handle__any__t.html">lnet_handle_md_t</a> *handle_out)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a memory descriptor and attach it to a ME.  <a href="#ga958972d35fc04d0716f4f6b71cd804fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga07ee1df9cd78eb3f002e76d371a29888">LNetMDBind</a> (<a class="el" href="structlnet__md__t.html">lnet_md_t</a> md_in, <a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a> unlink_in, <a class="el" href="structlnet__handle__any__t.html">lnet_handle_md_t</a> *handle_out)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a "free floating" memory descriptor - a MD that is not associated with a ME.  <a href="#ga07ee1df9cd78eb3f002e76d371a29888"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__md.html#ga2a0ce03253bcaae1e35be920f6029ca9">LNetMDUnlink</a> (<a class="el" href="structlnet__handle__any__t.html">lnet_handle_md_t</a> md_in)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlink the memory descriptor from any ME it may be linked to and release the internal resources associated with it.  <a href="#ga2a0ce03253bcaae1e35be920f6029ca9"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A memory descriptor contains information about a region of a user's memory (either in kernel or user space) and optionally points to an event queue where information about the operations performed on the memory descriptor are recorded. </p>
<p>Memory descriptor is abbreviated as MD and can be used interchangeably with the memory region it describes.</p>
<p>The LNet API provides two operations to create MDs: <a class="el" href="group__lnet__md.html#ga958972d35fc04d0716f4f6b71cd804fc" title="Create a memory descriptor and attach it to a ME.">LNetMDAttach()</a> and <a class="el" href="group__lnet__md.html#ga07ee1df9cd78eb3f002e76d371a29888" title="Create a &quot;free floating&quot; memory descriptor - a MD that is not associated...">LNetMDBind()</a>; one operation to unlink and release the resources associated with a MD: <a class="el" href="group__lnet__md.html#ga2a0ce03253bcaae1e35be920f6029ca9" title="Unlink the memory descriptor from any ME it may be linked to and release the internal...">LNetMDUnlink()</a>. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gae5c5481fe02371e7bf253b2b1cf0d030"></a><!-- doxytag: member="types.h::LNET_MAX_IOV" ref="gae5c5481fe02371e7bf253b2b1cf0d030" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MAX_IOV&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>limit on the number of fragments in discontiguous MDs </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00450">450</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="gnilnd__proc_8c_source.html#l00040">_kgnilnd_proc_run_cksum_test()</a>, <a class="el" href="brw__test_8c_source.html#l00070">brw_client_init()</a>, <a class="el" href="brw__test_8c_source.html#l00410">brw_server_handle()</a>, <a class="el" href="gnilnd_8c_source.html#l02205">kgnilnd_base_startup()</a>, <a class="el" href="gnilnd__cb_8c_source.html#l00218">kgnilnd_free_tx()</a>, <a class="el" href="gnilnd__cb_8c_source.html#l02109">kgnilnd_send()</a>, <a class="el" href="gnilnd__cb_8c_source.html#l00636">kgnilnd_setup_phys_buffer()</a>, <a class="el" href="o2iblnd_8c_source.html#l02250">kiblnd_create_tx_pool()</a>, <a class="el" href="o2iblnd_8c_source.html#l02194">kiblnd_destroy_tx_pool()</a>, <a class="el" href="o2iblnd__cb_8c_source.html#l01486">kiblnd_send()</a>, <a class="el" href="socklnd__lib_8c_source.html#l00271">ksocknal_lib_kiov_vmap()</a>, <a class="el" href="socklnd__cb_8c_source.html#l01316">ksocknal_recv()</a>, <a class="el" href="socklnd__cb_8c_source.html#l00924">ksocknal_send()</a>, <a class="el" href="lib-md_8c_source.html#l00219">lnet_md_validate()</a>, <a class="el" href="lst_8c_source.html#l02938">lst_get_bulk_param()</a>, <a class="el" href="pers_8c_source.html#l00048">ptlrpc_fill_bulk_md()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="client_8c_source.html#l03196">ptlrpc_set_bulk_mbits()</a>, <a class="el" href="framework_8c_source.html#l01122">sfw_alloc_pages()</a>, <a class="el" href="rpc_8c_source.html#l00124">srpc_alloc_bulk()</a>, <a class="el" href="selftest_8h_source.html#l00520">srpc_init_client_rpc()</a>, and <a class="el" href="rpc_8c_source.html#l00829">srpc_prepare_bulk()</a>.</p>

</div>
</div>
<a class="anchor" id="ga364d206ea5fb9d05f09871faf1e10bd3"></a><!-- doxytag: member="types.h::LNET_MD_ACK_DISABLE" ref="ga364d206ea5fb9d05f09871faf1e10bd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_ACK_DISABLE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00464">464</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-move_8c_source.html#l01420">lnet_recv_put()</a>.</p>

</div>
</div>
<a class="anchor" id="gacd7ecdcabac21b089dc8e101048bffc1"></a><!-- doxytag: member="types.h::LNET_MD_IOVEC" ref="gacd7ecdcabac21b089dc8e101048bffc1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_IOVEC&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00466">466</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-lnet_8h_source.html#l00201">lnet_md_alloc()</a>, <a class="el" href="lib-md_8c_source.html#l00088">lnet_md_build()</a>, <a class="el" href="lib-md_8c_source.html#l00201">lnet_md_deconstruct()</a>, <a class="el" href="lib-md_8c_source.html#l00219">lnet_md_validate()</a>, and <a class="el" href="pers_8c_source.html#l00048">ptlrpc_fill_bulk_md()</a>.</p>

</div>
</div>
<a class="anchor" id="gad9555865426bac84ce57b5ed4a0059a2"></a><!-- doxytag: member="types.h::LNET_MD_KIOV" ref="gad9555865426bac84ce57b5ed4a0059a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_KIOV&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 8)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00470">470</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="gnilnd__cb_8c_source.html#l00777">kgnilnd_parse_lnet_rdma()</a>, <a class="el" href="gnilnd__cb_8c_source.html#l02109">kgnilnd_send()</a>, <a class="el" href="o2iblnd__cb_8c_source.html#l01486">kiblnd_send()</a>, <a class="el" href="lib-lnet_8h_source.html#l00201">lnet_md_alloc()</a>, <a class="el" href="lib-md_8c_source.html#l00088">lnet_md_build()</a>, <a class="el" href="lib-md_8c_source.html#l00201">lnet_md_deconstruct()</a>, <a class="el" href="lib-lnet_8h_source.html#l00229">lnet_md_free()</a>, <a class="el" href="lib-md_8c_source.html#l00219">lnet_md_validate()</a>, <a class="el" href="lib-move_8c_source.html#l00601">lnet_setpayloadbuffer()</a>, <a class="el" href="pers_8c_source.html#l00048">ptlrpc_fill_bulk_md()</a>, <a class="el" href="rpc_8c_source.html#l00861">srpc_do_bulk()</a>, and <a class="el" href="rpc_8c_source.html#l00829">srpc_prepare_bulk()</a>.</p>

</div>
</div>
<a class="anchor" id="ga972b76d71cbb0e446c273d2edf83cad6"></a><!-- doxytag: member="types.h::LNET_MD_MANAGE_REMOTE" ref="ga972b76d71cbb0e446c273d2edf83cad6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_MANAGE_REMOTE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00459">459</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="lib-ptl_8c_source.html#l00139">lnet_try_match_md()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, and <a class="el" href="events_8c_source.html#l00091">reply_in_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga05bfd5b03abc8ded1b209b51bf65973f"></a><!-- doxytag: member="types.h::LNET_MD_MAX_SIZE" ref="ga05bfd5b03abc8ded1b209b51bf65973f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_MAX_SIZE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00468">468</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-md_8c_source.html#l00088">lnet_md_build()</a>, <a class="el" href="lib-lnet_8h_source.html#l00094">lnet_md_exhausted()</a>, <a class="el" href="lib-ptl_8c_source.html#l00139">lnet_try_match_md()</a>, and <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2f9879433bdc5c8f77f13359f74e5df5"></a><!-- doxytag: member="types.h::LNET_MD_OP_GET" ref="ga2f9879433bdc5c8f77f13359f74e5df5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_OP_GET&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00457">457</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-ptl_8c_source.html#l00375">lnet_mt_match_md()</a>, <a class="el" href="lib-move_8c_source.html#l01496">lnet_parse_get()</a>, <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="lib-md_8c_source.html#l00263">LNetMDAttach()</a>, <a class="el" href="lib-md_8c_source.html#l00343">LNetMDBind()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="rpc_8c_source.html#l00861">srpc_do_bulk()</a>, <a class="el" href="rpc_8c_source.html#l00394">srpc_post_active_rdma()</a>, and <a class="el" href="rpc_8c_source.html#l00829">srpc_prepare_bulk()</a>.</p>

</div>
</div>
<a class="anchor" id="ga653ba41bd3978635e420cfa4601193e1"></a><!-- doxytag: member="types.h::LNET_MD_OP_PUT" ref="ga653ba41bd3978635e420cfa4601193e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_OP_PUT&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Options for the MD structure. </p>
<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00455">455</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-move_8c_source.html#l01439">lnet_parse_put()</a>, <a class="el" href="lib-ptl_8c_source.html#l00650">lnet_ptl_attach_md()</a>, <a class="el" href="lib-ptl_8c_source.html#l00563">lnet_ptl_match_md()</a>, <a class="el" href="lib-ptl_8c_source.html#l00139">lnet_try_match_md()</a>, <a class="el" href="lib-md_8c_source.html#l00263">LNetMDAttach()</a>, <a class="el" href="lib-md_8c_source.html#l00343">LNetMDBind()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>, <a class="el" href="rpc_8c_source.html#l00861">srpc_do_bulk()</a>, <a class="el" href="rpc_8c_source.html#l00394">srpc_post_active_rdma()</a>, <a class="el" href="rpc_8c_source.html#l00446">srpc_post_passive_rqtbuf()</a>, <a class="el" href="rpc_8c_source.html#l00829">srpc_prepare_bulk()</a>, <a class="el" href="rpc_8c_source.html#l00805">srpc_prepare_reply()</a>, <a class="el" href="rpc_8c_source.html#l01348">srpc_send_reply()</a>, and <a class="el" href="rpc_8c_source.html#l00783">srpc_send_request()</a>.</p>

</div>
</div>
<a class="anchor" id="gabb8a095aed7dae7ea5919b3b57f215e7"></a><!-- doxytag: member="types.h::LNET_MD_PHYS" ref="gabb8a095aed7dae7ea5919b3b57f215e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_PHYS&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00473">473</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="pers_8c_source.html#l00048">ptlrpc_fill_bulk_md()</a>.</p>

</div>
</div>
<a class="anchor" id="gab5ce273fe5d92ed9f27f71519592e0d2"></a><!-- doxytag: member="types.h::LNET_MD_THRESH_INF" ref="gab5ce273fe5d92ed9f27f71519592e0d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_THRESH_INF&nbsp;&nbsp;&nbsp;(-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Infinite threshold on MD operations. </p>
<p>See <a class="el" href="structlnet__md__t.html#a60130fbc7253f41b3b6cd8da947ff023" title="Specifies the maximum number of operations that can be performed on the memory descriptor...">lnet_md_t::threshold</a> </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00476">476</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-move_8c_source.html#l00101">fail_peer()</a>, <a class="el" href="portals_8c_source.html#l01019">jt_ptl_fail_nid()</a>, <a class="el" href="router_8c_source.html#l00899">lnet_create_rc_data_locked()</a>, <a class="el" href="lib-msg_8c_source.html#l00311">lnet_msg_attach_md()</a>, <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, and <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="gab42e05f052fae51874fb3b60471d7c30"></a><!-- doxytag: member="types.h::LNET_MD_TRUNCATE" ref="gab42e05f052fae51874fb3b60471d7c30" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MD_TRUNCATE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13" title="Specifies the behavior of the memory descriptor.">lnet_md_t::options</a>. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00462">462</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="router_8c_source.html#l00899">lnet_create_rc_data_locked()</a>, <a class="el" href="lib-move_8c_source.html#l01561">lnet_parse_reply()</a>, <a class="el" href="api-ni_8c_source.html#l02169">lnet_ping()</a>, <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="lib-ptl_8c_source.html#l00139">lnet_try_match_md()</a>, and <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3f0473c1f8801dc40fe285939f6d5d0b"></a><!-- doxytag: member="types.h::LNET_MTU" ref="ga3f0473c1f8801dc40fe285939f6d5d0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MTU&nbsp;&nbsp;&nbsp;(1 &lt;&lt; LNET_MTU_BITS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00447">447</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-move_8c_source.html#l00873">lnet_msg2bufpool()</a>, and <a class="el" href="lib-move_8c_source.html#l01815">lnet_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="ga940bf275936204c687ca9178062c8168"></a><!-- doxytag: member="types.h::LNET_MTU_BITS" ref="ga940bf275936204c687ca9178062c8168" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LNET_MTU_BITS&nbsp;&nbsp;&nbsp;20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00446">446</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="osc__request_8c_source.html#l01120">osc_brw_prep_request()</a>, and <a class="el" href="osp__trans_8c_source.html#l00314">osp_prep_update_req()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gad848ede18fff1097e842dc9dca2fc9a3"></a><!-- doxytag: member="types.h::lnet_md_iovec_t" ref="gad848ede18fff1097e842dc9dca2fc9a3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct iovec <a class="el" href="group__lnet__md.html#gad848ede18fff1097e842dc9dca2fc9a3">lnet_md_iovec_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00479">479</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga958972d35fc04d0716f4f6b71cd804fc"></a><!-- doxytag: member="api.h::LNetMDAttach" ref="ga958972d35fc04d0716f4f6b71cd804fc" args="(lnet_handle_me_t current_in, lnet_md_t md_in, lnet_unlink_t unlink_in, lnet_handle_md_t *handle_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LNetMDAttach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a>&nbsp;</td>
          <td class="paramname"> <em>meh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__md__t.html">lnet_md_t</a>&nbsp;</td>
          <td class="paramname"> <em>umd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a>&nbsp;</td>
          <td class="paramname"> <em>unlink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_md_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a memory descriptor and attach it to a ME. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>meh</em>&nbsp;</td><td>A handle for a ME to associate the new MD with. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>umd</em>&nbsp;</td><td>Provides initial values for the user-visible parts of a MD. Other than its use for initialization, there is no linkage between this structure and the MD maintained by the LNet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>unlink</em>&nbsp;</td><td>A flag to indicate whether the MD is automatically unlinked when it becomes inactive, either because the operation threshold drops to zero or because the available memory becomes less than <em>umd.max_size</em>. (Note that the check for unlinking a MD only occurs after the completion of a successful operation on the MD.) The value LNET_UNLINK enables auto unlinking; the value LNET_RETAIN disables it. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>On successful returns, a handle to the newly created MD is saved here. This handle can be used later in <a class="el" href="group__lnet__md.html#ga2a0ce03253bcaae1e35be920f6029ca9" title="Unlink the memory descriptor from any ME it may be linked to and release the internal...">LNetMDUnlink()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>On success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>If <em>umd</em> is not valid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>If new MD cannot be allocated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>Either <em>meh</em> or <em>umd.eq_handle</em> does not point to a valid object. Note that it's OK to supply a NULL <em>umd.eq_handle</em> by calling <a class="el" href="group__lnet__addr.html#gab3d30e46ea269d8b39d4851c3a7c8052" title="Invalidate handle h.">LNetInvalidateHandle()</a> on it. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EBUSY</em>&nbsp;</td><td>If the ME pointed to by <em>meh</em> is already associated with a MD. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lib-md_8c_source.html#l00263">263</a> of file <a class="el" href="lib-md_8c_source.html">lib-md.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00262">lnet_handle_any_t::cookie</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00440">lnet_md_t::eq_handle</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00046">LIST_HEAD_INIT</a>, <a class="el" href="lib-types_8h_source.html#l00642">lnet_t::ln_refcount</a>, <a class="el" href="lib-lnet_8h_source.html#l00122">lnet_cpt_of_cookie()</a>, <a class="el" href="lib-move_8c_source.html#l02051">lnet_drop_delayed_msg_list()</a>, <a class="el" href="lib-lnet_8h_source.html#l00358">lnet_handle2me()</a>, <a class="el" href="lib-lnet_8h_source.html#l00311">lnet_md2handle()</a>, <a class="el" href="lib-lnet_8h_source.html#l00201">lnet_md_alloc()</a>, <a class="el" href="lib-md_8c_source.html#l00088">lnet_md_build()</a>, <a class="el" href="lib-lnet_8h_source.html#l00229">lnet_md_free()</a>, <a class="el" href="lib-md_8c_source.html#l00166">lnet_md_link()</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00457">LNET_MD_OP_GET</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00455">LNET_MD_OP_PUT</a>, <a class="el" href="lib-md_8c_source.html#l00219">lnet_md_validate()</a>, <a class="el" href="lib-ptl_8c_source.html#l00650">lnet_ptl_attach_md()</a>, <a class="el" href="lib-move_8c_source.html#l02093">lnet_recv_delayed_msg_list()</a>, <a class="el" href="lib-lnet_8h_source.html#l00132">lnet_res_lock()</a>, <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>, <a class="el" href="lib-types_8h_source.html#l00153">lnet_me::me_md</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00426">lnet_md_t::options</a>, and <a class="el" href="api-ni_8c_source.html#l00043">the_lnet</a>.</p>

<p>Referenced by <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>, and <a class="el" href="rpc_8c_source.html#l00354">srpc_post_passive_rdma()</a>.</p>

</div>
</div>
<a class="anchor" id="ga07ee1df9cd78eb3f002e76d371a29888"></a><!-- doxytag: member="api.h::LNetMDBind" ref="ga07ee1df9cd78eb3f002e76d371a29888" args="(lnet_md_t md_in, lnet_unlink_t unlink_in, lnet_handle_md_t *handle_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LNetMDBind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__md__t.html">lnet_md_t</a>&nbsp;</td>
          <td class="paramname"> <em>umd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a>&nbsp;</td>
          <td class="paramname"> <em>unlink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_md_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a "free floating" memory descriptor - a MD that is not associated with a ME. </p>
<p>Such MDs are usually used in <a class="el" href="group__lnet__data.html#gaf8261191429eaa8b9290ec056c6d40d2" title="Initiate an asynchronous PUT operation.">LNetPut()</a> and <a class="el" href="group__lnet__data.html#ga85a33eba7b0992e1924a3ced45ccb017" title="Initiate an asynchronous GET operation.">LNetGet()</a> operations.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>umd,unlink</em>&nbsp;</td><td>See the discussion for <a class="el" href="group__lnet__md.html#ga958972d35fc04d0716f4f6b71cd804fc" title="Create a memory descriptor and attach it to a ME.">LNetMDAttach()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>On successful returns, a handle to the newly created MD is saved here. This handle can be used later in <a class="el" href="group__lnet__md.html#ga2a0ce03253bcaae1e35be920f6029ca9" title="Unlink the memory descriptor from any ME it may be linked to and release the internal...">LNetMDUnlink()</a>, <a class="el" href="group__lnet__data.html#gaf8261191429eaa8b9290ec056c6d40d2" title="Initiate an asynchronous PUT operation.">LNetPut()</a>, and <a class="el" href="group__lnet__data.html#ga85a33eba7b0992e1924a3ced45ccb017" title="Initiate an asynchronous GET operation.">LNetGet()</a> operations.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>On success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>If <em>umd</em> is not valid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>If new MD cannot be allocated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td><em>umd.eq_handle</em> does not point to a valid EQ. Note that it's OK to supply a NULL <em>umd.eq_handle</em> by calling <a class="el" href="group__lnet__addr.html#gab3d30e46ea269d8b39d4851c3a7c8052" title="Invalidate handle h.">LNetInvalidateHandle()</a> on it. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lib-md_8c_source.html#l00343">343</a> of file <a class="el" href="lib-md_8c_source.html">lib-md.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00440">lnet_md_t::eq_handle</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lib-types_8h_source.html#l00642">lnet_t::ln_refcount</a>, <a class="el" href="lib-lnet_8h_source.html#l00311">lnet_md2handle()</a>, <a class="el" href="lib-lnet_8h_source.html#l00201">lnet_md_alloc()</a>, <a class="el" href="lib-md_8c_source.html#l00088">lnet_md_build()</a>, <a class="el" href="lib-lnet_8h_source.html#l00229">lnet_md_free()</a>, <a class="el" href="lib-md_8c_source.html#l00166">lnet_md_link()</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00457">LNET_MD_OP_GET</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00455">LNET_MD_OP_PUT</a>, <a class="el" href="lib-md_8c_source.html#l00219">lnet_md_validate()</a>, <a class="el" href="lib-lnet_8h_source.html#l00144">lnet_res_lock_current()</a>, <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00426">lnet_md_t::options</a>, and <a class="el" href="api-ni_8c_source.html#l00043">the_lnet</a>.</p>

<p>Referenced by <a class="el" href="router_8c_source.html#l00899">lnet_create_rc_data_locked()</a>, <a class="el" href="api-ni_8c_source.html#l02169">lnet_ping()</a>, <a class="el" href="niobuf_8c_source.html#l00050">ptl_send_buf()</a>, and <a class="el" href="rpc_8c_source.html#l00394">srpc_post_active_rdma()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2a0ce03253bcaae1e35be920f6029ca9"></a><!-- doxytag: member="api.h::LNetMDUnlink" ref="ga2a0ce03253bcaae1e35be920f6029ca9" args="(lnet_handle_md_t md_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LNetMDUnlink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_md_t</a>&nbsp;</td>
          <td class="paramname"> <em>mdh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlink the memory descriptor from any ME it may be linked to and release the internal resources associated with it. </p>
<p>As a result, active messages associated with the MD may get aborted.</p>
<p>This function does not free the memory region associated with the MD; i.e., the memory the user allocated for this MD. If the ME associated with this MD is not NULL and was created with auto unlink enabled, the ME is unlinked as well (see <a class="el" href="group__lnet__me.html#ga581025ed43fdf21741691e82253b1b50" title="Create and attach a match entry to the match list of portal.">LNetMEAttach()</a>).</p>
<p>Explicitly unlinking a MD via this function call has the same behavior as a MD that has been automatically unlinked, except that no LNET_EVENT_UNLINK is generated in the latter case.</p>
<p>An unlinked event can be reported in two ways:</p>
<ul>
<li>If there's no pending operations on the MD, it's unlinked immediately and an LNET_EVENT_UNLINK event is logged before this function returns.</li>
<li>Otherwise, the MD is only marked for deletion when this function returns, and the unlinked event will be piggybacked on the event of the completion of the last operation by setting the unlinked field of the event. No dedicated LNET_EVENT_UNLINK event is generated.</li>
</ul>
<p>Note that in both cases the unlinked field of the event is always set; no more event will happen on the MD after such an event is logged.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdh</em>&nbsp;</td><td>A handle for the MD to be unlinked.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>On success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>If <em>mdh</em> does not point to a valid MD object. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lib-md_8c_source.html#l00417">417</a> of file <a class="el" href="lib-md_8c_source.html">lib-md.c</a>.</p>

<p>References <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00262">lnet_handle_any_t::cookie</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lib-types_8h_source.html#l00642">lnet_t::ln_refcount</a>, <a class="el" href="lib-msg_8c_source.html#l00046">lnet_build_unlink_event()</a>, <a class="el" href="lib-lnet_8h_source.html#l00122">lnet_cpt_of_cookie()</a>, <a class="el" href="lib-eq_8c_source.html#l00212">lnet_eq_enqueue_event()</a>, <a class="el" href="lib-lnet_8h_source.html#l00317">lnet_handle2md()</a>, <a class="el" href="lib-types_8h_source.html#l00179">LNET_MD_FLAG_ABORTED</a>, <a class="el" href="lib-md_8c_source.html#l00047">lnet_md_unlink()</a>, <a class="el" href="lib-lnet_8h_source.html#l00132">lnet_res_lock()</a>, <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>, <a class="el" href="lib-types_8h_source.html#l00169">lnet_libmd::md_eq</a>, <a class="el" href="lib-types_8h_source.html#l00167">lnet_libmd::md_flags</a>, <a class="el" href="lib-types_8h_source.html#l00165">lnet_libmd::md_refcount</a>, and <a class="el" href="api-ni_8c_source.html#l00043">the_lnet</a>.</p>

<p>Referenced by <a class="el" href="router_8c_source.html#l00899">lnet_create_rc_data_locked()</a>, <a class="el" href="api-ni_8c_source.html#l02169">lnet_ping()</a>, <a class="el" href="api-ni_8c_source.html#l00980">lnet_ping_md_unlink()</a>, <a class="el" href="router_8c_source.html#l01124">lnet_prune_rc_data()</a>, <a class="el" href="niobuf_8c_source.html#l00101">mdunlink_iterate_helper()</a>, <a class="el" href="niobuf_8c_source.html#l00050">ptl_send_buf()</a>, <a class="el" href="service_8c_source.html#l02149">ptlrpc_handle_rs()</a>, <a class="el" href="service_8c_source.html#l02998">ptlrpc_service_unlink_rqbd()</a>, <a class="el" href="client_8c_source.html#l02512">ptlrpc_unregister_reply()</a>, <a class="el" href="rpc_8c_source.html#l00952">srpc_handle_rpc()</a>, <a class="el" href="rpc_8c_source.html#l00394">srpc_post_active_rdma()</a>, <a class="el" href="rpc_8c_source.html#l01166">srpc_send_rpc()</a>, <a class="el" href="rpc_8c_source.html#l00460">srpc_service_post_buffer()</a>, and <a class="el" href="rpc_8c_source.html#l00748">srpc_shutdown_service()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
