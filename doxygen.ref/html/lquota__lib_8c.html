<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/quota/lquota_lib.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/quota/lquota_lib.c File Reference</h1><code>#include &lt;linux/version.h&gt;</code><br/>
<code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/init.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="lquota__internal_8h_source.html">lquota_internal.h</a>&quot;</code><br/>

<p><a href="lquota__lib_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LQUOTA</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#a95091e1e420e975ed1803e322d84fcf3">LU_KEY_INIT_FINI</a> (lquota, struct <a class="el" href="structlquota__thread__info.html">lquota_thread_info</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ab3682ae4dd09df49b3bdecf46888cc0b">LU_CONTEXT_KEY_DEFINE</a> (lquota, LCT_MD_THREAD|LCT_DT_THREAD|LCT_LOCAL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#af54bfc8466a979b4867d471f556497c7">LU_KEY_INIT_GENERIC</a> (lquota)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#af046b0015926b859c71e7a89de256cc4">acct_obj_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Look-up accounting object to collect space usage information for user or group.  <a href="#af046b0015926b859c71e7a89de256cc4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ae6378ca3cec5d9f54fdb199e71d0ca44">quota_obj_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize slave index object to collect local quota limit for user or group.  <a href="#ae6378ca3cec5d9f54fdb199e71d0ca44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ae600b942a382e2d971d3faad14ef4289">lquotactl_slv</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *oqctl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#a5d1278a97891126a35f39cb84bc0a331">lquota_generate_fid</a> (struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, int pool_id, int pool_type, int quota_type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper routine returning the FID associated with the global index storing quota settings for the storage pool , resource type  and the quota type .  <a href="#a5d1278a97891126a35f39cb84bc0a331"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#a7089629a3dd6a4101e51ab52ccd7c34c">lquota_extract_fid</a> (const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, int *pool_id, int *pool_type, int *quota_type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper routine used to extract pool ID, pool type and quota type from a given FID.  <a href="#a7089629a3dd6a4101e51ab52ccd7c34c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int __init&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#af7308c756bec91e4d3c333b498fa1403">lquota_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void __exit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#af1617b7b13c4bd5f62341afe391d49cd">lquota_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#adc10f40acba3bb9b2640e985276b0a7c">MODULE_AUTHOR</a> (&quot;OpenSFS, Inc. &lt;http://www.lustre.org/&gt;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#abeba5d934028c84df6bca35bf2d5719c">MODULE_DESCRIPTION</a> (&quot;Lustre Quota&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ae9c321be2136fb8501887ee69dac11a2">MODULE_VERSION</a> (LUSTRE_VERSION_STRING)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44">MODULE_LICENSE</a> (&quot;GPL&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ad4afbf91acb4472c44711dbecb4355b7">module_init</a> (lquota_init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#afcd979a18f3876221561f4df60807461">module_exit</a> (lquota_exit)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#ac9c448f19971f9cbe5f24182c88f536e">lqe_kmem</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__kmem__descr.html">lu_kmem_descr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lquota__lib_8c.html#afda025226390bf0ed1e1d223444f63f9">lquota_caches</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="lquota_lib.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LQUOTA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00031">31</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af046b0015926b859c71e7a89de256cc4"></a><!-- doxytag: member="lquota_lib.c::acct_obj_lookup" ref="af046b0015926b859c71e7a89de256cc4" args="(const struct lu_env *env, struct dt_device *dev, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__object.html">dt_object</a>* acct_obj_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Look-up accounting object to collect space usage information for user or group. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>- is the environment passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>- is the <a class="el" href="structdt__device.html">dt_device</a> storing the accounting object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>- is the quota type, either USRQUOTA or GRPQUOTA </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00065">65</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00224">ACCT_GROUP_OID</a>, <a class="el" href="lustre__fid_8h_source.html#l00223">ACCT_USER_OID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="structdt__object__operations.html#ac317771bd9f0827b4d8fcec4d51a63c2">dt_object_operations::do_index_try</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01751">dt_object::do_ops</a>, <a class="el" href="dt__object_8c_source.html#l00605">dt_acct_features</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lquota__internal_8h_source.html#l00308">lquota_info()</a>, <a class="el" href="lustre__fid_8h_source.html#l00242">lu_local_obj_fid()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lquota__internal_8h_source.html#l00293">lquota_thread_info::qti_fid</a>, <a class="el" href="lquota__internal_8h_source.html#l00034">QTYPE_NAME</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lquota__lib_8c_source.html#l00158">lquotactl_slv()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00360">qsd_qtype_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af1617b7b13c4bd5f62341afe391d49cd"></a><!-- doxytag: member="lquota_lib.c::lquota_exit" ref="af1617b7b13c4bd5f62341afe391d49cd" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __exit lquota_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00323">323</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="lquota__internal_8h.html#a8dd029ce9513b00cbd538fb5f4b9b32f">lquota_thread_key</a>, <a class="el" href="lu__object_8c_source.html#l01455">lu_context_key_degister()</a>, <a class="el" href="lu__object_8c_source.html#l02275">lu_kmem_fini()</a>, <a class="el" href="qmt__dev_8c_source.html#l00480">qmt_glb_fini()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00827">qsd_glb_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a7089629a3dd6a4101e51ab52ccd7c34c"></a><!-- doxytag: member="lquota_lib.c::lquota_extract_fid" ref="a7089629a3dd6a4101e51ab52ccd7c34c" args="(const struct lu_fid *fid, int *pool_id, int *pool_type, int *quota_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lquota_extract_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>pool_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>pool_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>quota_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helper routine used to extract pool ID, pool type and quota type from a given FID. </p>

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00256">256</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__idl_8h_source.html#l00304">FID_SEQ_QUOTA_GLB</a>, <a class="el" href="lustre__idl_8h_source.html#l01918">LQUOTA_LAST_RES</a>, <a class="el" href="lustre__idl_8h_source.html#l01909">LQUOTA_TYPE_MAX</a>, <a class="el" href="lustre__idl_8h_source.html#l01907">LQUOTA_TYPE_USR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lquota__disk_8c_source.html#l00375">lquota_disk_slv_find_create()</a>, <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>, <a class="el" href="qmt__lock_8c_source.html#l00152">qmt_lvbo_init()</a>, and <a class="el" href="qmt__pool_8c_source.html#l00648">qmt_pool_new_conn()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d1278a97891126a35f39cb84bc0a331"></a><!-- doxytag: member="lquota_lib.c::lquota_generate_fid" ref="a5d1278a97891126a35f39cb84bc0a331" args="(struct lu_fid *fid, int pool_id, int pool_type, int quota_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lquota_generate_fid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pool_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pool_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>quota_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helper routine returning the FID associated with the global index storing quota settings for the storage pool , resource type  and the quota type . </p>

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00240">240</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00304">FID_SEQ_QUOTA_GLB</a>, <a class="el" href="lustre__idl_8h_source.html#l01908">LQUOTA_TYPE_GRP</a>, and <a class="el" href="lustre__idl_8h_source.html#l01907">LQUOTA_TYPE_USR</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00539">qmt_glb_lock_notify()</a>, <a class="el" href="qmt__lock_8c_source.html#l00598">qmt_id_lock_glimpse()</a>, <a class="el" href="qmt__pool_8c_source.html#l00494">qmt_pool_prepare()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00360">qsd_qtype_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af7308c756bec91e4d3c333b498fa1403"></a><!-- doxytag: member="lquota_lib.c::lquota_init" ref="af7308c756bec91e4d3c333b498fa1403" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __init lquota_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00292">292</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lquota__internal_8h.html#a8dd029ce9513b00cbd538fb5f4b9b32f">lquota_thread_key</a>, <a class="el" href="lu__object_8c_source.html#l01455">lu_context_key_degister()</a>, <a class="el" href="lu__object_8c_source.html#l01401">lu_context_key_register()</a>, <a class="el" href="lu__object_8c_source.html#l02275">lu_kmem_fini()</a>, <a class="el" href="lu__object_8c_source.html#l02251">lu_kmem_init()</a>, <a class="el" href="qmt__dev_8c_source.html#l00480">qmt_glb_fini()</a>, <a class="el" href="qmt__dev_8c_source.html#l00469">qmt_glb_init()</a>, <a class="el" href="qsd__lib_8c_source.html#l00809">qsd_glb_init()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ae600b942a382e2d971d3faad14ef4289"></a><!-- doxytag: member="lquota_lib.c::lquotactl_slv" ref="ae600b942a382e2d971d3faad14ef4289" args="(const struct lu_env *env, struct dt_device *dev, struct obd_quotactl *oqctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lquotactl_slv </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *&nbsp;</td>
          <td class="paramname"> <em>oqctl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00158">158</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lquota__lib_8c_source.html#l00065">acct_obj_lookup()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lustre__user_8h_source.html#l00657">obd_dqblk::dqb_bhardlimit</a>, <a class="el" href="lustre__user_8h_source.html#l00662">obd_dqblk::dqb_curinodes</a>, <a class="el" href="lustre__user_8h_source.html#l00659">obd_dqblk::dqb_curspace</a>, <a class="el" href="lustre__user_8h_source.html#l00660">obd_dqblk::dqb_ihardlimit</a>, <a class="el" href="lustre__user_8h_source.html#l00665">obd_dqblk::dqb_valid</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="lquota__internal_8h_source.html#l00308">lquota_info()</a>, <a class="el" href="lu__object_8h_source.html#l00619">lu_site::ls_top_dev</a>, <a class="el" href="lu__object_8h_source.html#l00399">lu_device_is_md()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00570">Q_GETOQUOTA</a>, <a class="el" href="lustre__idl_8h_source.html#l01856">obd_quotactl::qc_cmd</a>, <a class="el" href="lustre__idl_8h_source.html#l01861">obd_quotactl::qc_dqblk</a>, <a class="el" href="lustre__idl_8h_source.html#l01858">obd_quotactl::qc_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01857">obd_quotactl::qc_type</a>, <a class="el" href="lustre__user_8h_source.html#l00629">QIF_LIMITS</a>, <a class="el" href="lustre__user_8h_source.html#l00630">QIF_USAGE</a>, <a class="el" href="lquota__lib_8c_source.html#l00109">quota_obj_lookup()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02016">mdt_quotactl()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02210">ofd_quotactl()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3682ae4dd09df49b3bdecf46888cc0b"></a><!-- doxytag: member="lquota_lib.c::LU_CONTEXT_KEY_DEFINE" ref="ab3682ae4dd09df49b3bdecf46888cc0b" args="(lquota, LCT_MD_THREAD|LCT_DT_THREAD|LCT_LOCAL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LU_CONTEXT_KEY_DEFINE </td>
          <td>(</td>
          <td class="paramtype">lquota&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LCT_MD_THREAD|LCT_DT_THREAD|&nbsp;</td>
          <td class="paramname"> <em>LCT_LOCAL</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a95091e1e420e975ed1803e322d84fcf3"></a><!-- doxytag: member="lquota_lib.c::LU_KEY_INIT_FINI" ref="a95091e1e420e975ed1803e322d84fcf3" args="(lquota, struct lquota_thread_info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LU_KEY_INIT_FINI </td>
          <td>(</td>
          <td class="paramtype">lquota&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__thread__info.html">lquota_thread_info</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af54bfc8466a979b4867d471f556497c7"></a><!-- doxytag: member="lquota_lib.c::LU_KEY_INIT_GENERIC" ref="af54bfc8466a979b4867d471f556497c7" args="(lquota)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LU_KEY_INIT_GENERIC </td>
          <td>(</td>
          <td class="paramtype">lquota&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adc10f40acba3bb9b2640e985276b0a7c"></a><!-- doxytag: member="lquota_lib.c::MODULE_AUTHOR" ref="adc10f40acba3bb9b2640e985276b0a7c" args="(&quot;OpenSFS, Inc. &lt;http://www.lustre.org/&gt;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_AUTHOR </td>
          <td>(</td>
          <td class="paramtype">&quot;&nbsp;</td>
          <td class="paramname"> <em>OpenSFS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Inc.&lt; http://www.lustre.org/&gt;&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abeba5d934028c84df6bca35bf2d5719c"></a><!-- doxytag: member="lquota_lib.c::MODULE_DESCRIPTION" ref="abeba5d934028c84df6bca35bf2d5719c" args="(&quot;Lustre Quota&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_DESCRIPTION </td>
          <td>(</td>
          <td class="paramtype">&quot;Lustre Quota&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afcd979a18f3876221561f4df60807461"></a><!-- doxytag: member="lquota_lib.c::module_exit" ref="afcd979a18f3876221561f4df60807461" args="(lquota_exit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_exit </td>
          <td>(</td>
          <td class="paramtype">lquota_exit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad4afbf91acb4472c44711dbecb4355b7"></a><!-- doxytag: member="lquota_lib.c::module_init" ref="ad4afbf91acb4472c44711dbecb4355b7" args="(lquota_init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_init </td>
          <td>(</td>
          <td class="paramtype">lquota_init&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad94b36675e7eb067ea3ce6ff9e244a44"></a><!-- doxytag: member="lquota_lib.c::MODULE_LICENSE" ref="ad94b36675e7eb067ea3ce6ff9e244a44" args="(&quot;GPL&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_LICENSE </td>
          <td>(</td>
          <td class="paramtype">&quot;GPL&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae9c321be2136fb8501887ee69dac11a2"></a><!-- doxytag: member="lquota_lib.c::MODULE_VERSION" ref="ae9c321be2136fb8501887ee69dac11a2" args="(LUSTRE_VERSION_STRING)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_VERSION </td>
          <td>(</td>
          <td class="paramtype">LUSTRE_VERSION_STRING&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae6378ca3cec5d9f54fdb199e71d0ca44"></a><!-- doxytag: member="lquota_lib.c::quota_obj_lookup" ref="ae6378ca3cec5d9f54fdb199e71d0ca44" args="(const struct lu_env *env, struct dt_device *dev, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* quota_obj_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize slave index object to collect local quota limit for user or group. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>- is the environment passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>- is the <a class="el" href="structdt__device.html">dt_device</a> storing the slave index object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>- is the quota type, either USRQUOTA or GRPQUOTA </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00109">109</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="structdt__object__operations.html#ac317771bd9f0827b4d8fcec4d51a63c2">dt_object_operations::do_index_try</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01751">dt_object::do_ops</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8c_source.html#l00628">dt_quota_slv_features</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00303">FID_SEQ_QUOTA</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lquota__internal_8h_source.html#l00048">LQUOTA_GRP_OID</a>, <a class="el" href="lquota__internal_8h_source.html#l00308">lquota_info()</a>, <a class="el" href="lquota__internal_8h_source.html#l00047">LQUOTA_USR_OID</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lquota__internal_8h_source.html#l00293">lquota_thread_info::qti_fid</a>, <a class="el" href="lquota__internal_8h_source.html#l00034">QTYPE_NAME</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lquota__lib_8c_source.html#l00158">lquotactl_slv()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ac9c448f19971f9cbe5f24182c88f536e"></a><!-- doxytag: member="lquota_lib.c::lqe_kmem" ref="ac9c448f19971f9cbe5f24182c88f536e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="lquota__lib_8c.html#ac9c448f19971f9cbe5f24182c88f536e">lqe_kmem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00039">39</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lquota__entry_8c_source.html#l00313">lqe_locate()</a>, and <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>.</p>

</div>
</div>
<a class="anchor" id="afda025226390bf0ed1e1d223444f63f9"></a><!-- doxytag: member="lquota_lib.c::lquota_caches" ref="afda025226390bf0ed1e1d223444f63f9" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__kmem__descr.html">lu_kmem_descr</a> <a class="el" href="lquota__lib_8c.html#afda025226390bf0ed1e1d223444f63f9">lquota_caches</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        {
                .ckd_cache = &amp;<a class="code" href="lquota__internal_8h.html#ac9c448f19971f9cbe5f24182c88f536e">lqe_kmem</a>,
                .ckd_name  = <span class="stringliteral">&quot;lqe_kmem&quot;</span>,
                .ckd_size  = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlquota__entry.html">lquota_entry</a>)
        },
        {
                .ckd_cache = NULL
        }
}
</pre></div>
<p>Definition at line <a class="el" href="lquota__lib_8c_source.html#l00041">41</a> of file <a class="el" href="lquota__lib_8c_source.html">lquota_lib.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
