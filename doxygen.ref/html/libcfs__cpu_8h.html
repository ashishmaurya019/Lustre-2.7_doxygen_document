<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: libcfs/include/libcfs/libcfs_cpu.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>libcfs/include/libcfs/libcfs_cpu.h File Reference</h1>
<p><a href="libcfs__cpu_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a0628df10a6276d56b4dd55643cf7ccbe">CFS_CPT_ANY</a>&nbsp;&nbsp;&nbsp;(-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a4de64b9464c23beadb6c47fbceb63929">cfs_percpt_for_each</a>(var, i, vars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a36b23a48b7fc2305f58bd0b696171142">cfs_percpt_lock_num</a>(pcl)&nbsp;&nbsp;&nbsp;cfs_cpt_number(pcl-&gt;pcl_cptab)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a503781e8be0d25f7da28b830c0b94426">CFS_PERCPT_LOCK_KEYS</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a44268c859f2a9d4ce343bb521b2092d2">cfs_percpt_lock_alloc</a>(cptab)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#ab9adea7b79396dd8c0758865fc9c043e">cfs_cpt_for_each</a>(i, cptab)&nbsp;&nbsp;&nbsp;for (i = 0; i &lt; cfs_cpt_number(cptab); i++)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">iterate over all CPU partitions in <em>cptab</em>  <a href="#ab9adea7b79396dd8c0758865fc9c043e"></a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="libcfs__cpu_8h.html#a905301dc85f7361d62f56f9dea55cf2caba305bea862d306973a93f811975cb99">CFS_PERCPT_LOCK_EX</a> =  -1
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a5e77033b7fbef846cfc30e0021146b17">cfs_cpt_table_free</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">destroy a CPU partition table  <a href="#a5e77033b7fbef846cfc30e0021146b17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#ad41c848f4d4612232a5e5f483a5dc1b6">cfs_cpt_table_alloc</a> (unsigned int ncpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">create a <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> with <em>ncpt</em> number of partitions  <a href="#ad41c848f4d4612232a5e5f483a5dc1b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a5fbf065f51bb21721334ca18dff240dd">cfs_cpt_table_print</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, int len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">print string information of cpt-table  <a href="#a5fbf065f51bb21721334ca18dff240dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a9f06db96214d81272568b87e30e26d3e">cfs_cpt_number</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return total number of CPU partitions in <em>cptab</em>  <a href="#a9f06db96214d81272568b87e30e26d3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a490feb884ea09b464c88c79377cb22ee">cfs_cpt_weight</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return number of HW cores or hypter-threadings in a CPU partition <em>cpt</em>  <a href="#a490feb884ea09b464c88c79377cb22ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#afb3ebb66af8b050b5fb3f637d528a850">cfs_cpt_online</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">is there any online CPU in CPU partition <em>cpt</em>  <a href="#afb3ebb66af8b050b5fb3f637d528a850"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cpumask_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a2722e19557ecc4aeefac685be77cc5cf">cfs_cpt_cpumask</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return cpumask of CPU partition <em>cpt</em>  <a href="#a2722e19557ecc4aeefac685be77cc5cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">nodemask_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a9ad59e6fdf6bd3a38b271626c43a6e46">cfs_cpt_nodemask</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return nodemask of CPU partition <em>cpt</em>  <a href="#a9ad59e6fdf6bd3a38b271626c43a6e46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#aeca702e29c4c46f6801403fe5cba3c8b">cfs_cpt_current</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int remap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">shadow current HW processor ID to CPU-partition ID of <em>cptab</em>  <a href="#aeca702e29c4c46f6801403fe5cba3c8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#aed97655e205019e118a7ed9f9bd7477c">cfs_cpt_of_cpu</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpu)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">shadow HW processor ID <em>CPU</em> to CPU-partition ID by <em>cptab</em>  <a href="#aed97655e205019e118a7ed9f9bd7477c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a5640d52431f8a9f49f0ca6c93c6e4d10">cfs_cpt_bind</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bind current thread on a CPU-partition <em>cpt</em> of <em>cptab</em>  <a href="#a5640d52431f8a9f49f0ca6c93c6e4d10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a0e630733b43452f4d942fc28031e1315">cfs_cpt_set_cpu</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, int cpu)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add <em>cpu</em> to CPU partion  of <em>cptab</em>, return 1 for success, otherwise 0 is returned  <a href="#a0e630733b43452f4d942fc28031e1315"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a6446713a7ad5c5bbf9decdcd09648def">cfs_cpt_unset_cpu</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, int cpu)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove <em>cpu</em> from CPU partition <em>cpt</em> of <em>cptab</em>  <a href="#a6446713a7ad5c5bbf9decdcd09648def"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#aa64b08f4da8b9be461cc049f0c0e6368">cfs_cpt_set_cpumask</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, cpumask_t *mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add all cpus in <em>mask</em> to CPU partition <em>cpt</em> return 1 if successfully set all CPUs, otherwise return 0  <a href="#aa64b08f4da8b9be461cc049f0c0e6368"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#af0d90776a0f70e8c5ec3fca75c2af155">cfs_cpt_unset_cpumask</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, cpumask_t *mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove all cpus in <em>mask</em> from CPU partition <em>cpt</em>  <a href="#af0d90776a0f70e8c5ec3fca75c2af155"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a3aab8de6e8b25b1c1e9523c66b161b05">cfs_cpt_set_node</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, int node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add all cpus in NUMA node <em>node</em> to CPU partition <em>cpt</em> return 1 if successfully set all CPUs, otherwise return 0  <a href="#a3aab8de6e8b25b1c1e9523c66b161b05"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a8bcbfc241edf636bc808f8ebbafe3182">cfs_cpt_unset_node</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, int node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove all cpus in NUMA node <em>node</em> from CPU partition <em>cpt</em>  <a href="#a8bcbfc241edf636bc808f8ebbafe3182"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a2d786d6392a4b5d9383d5fb2fd85cc2c">cfs_cpt_set_nodemask</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, nodemask_t *mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add all cpus in node mask <em>mask</em> to CPU partition <em>cpt</em> return 1 if successfully set all CPUs, otherwise return 0  <a href="#a2d786d6392a4b5d9383d5fb2fd85cc2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a9c8e65cfbbb7063f66d7bfaa2ef6f3ec">cfs_cpt_unset_nodemask</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, nodemask_t *mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove all cpus in node mask <em>mask</em> from CPU partition <em>cpt</em>  <a href="#a9c8e65cfbbb7063f66d7bfaa2ef6f3ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a7b132b0ed4ee4153344e270dbc3b3396">cfs_cpt_clear</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unset all cpus for CPU partition <em>cpt</em>  <a href="#a7b132b0ed4ee4153344e270dbc3b3396"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a4d4b3bd377acc4c37ed6508c8849657d">cfs_cpt_spread_node</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">convert partition id <em>cpt</em> to numa node id, if there are more than one nodes in this partition, it might return a different node id each time.  <a href="#a4d4b3bd377acc4c37ed6508c8849657d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a2896836dbe1aa4f858ce28320b682bc8">cfs_cpu_ht_nsiblings</a> (int cpu)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return number of HTs in the same core of <em>cpu</em>  <a href="#a2896836dbe1aa4f858ce28320b682bc8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a45c7a434b06b018cff3260e33463dbd2">cfs_percpt_alloc</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, unsigned int <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a37fd5c4dd7552fef5647378faedf8818">cfs_percpt_free</a> (void *vars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a0d11ef957193366cf975497907ed6dd7">cfs_percpt_number</a> (void *vars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#aa8d7e720b8045dff9c0c73b629406b2d">cfs_percpt_lock_create</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, struct lock_class_key *keys)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">create cpu-partition lock, see <a class="el" href="libcfs__private_8h.html">libcfs_private.h</a> for more detail.  <a href="#aa8d7e720b8045dff9c0c73b629406b2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#ab05ade01ac41f6efe9433fc32d00df7f">cfs_percpt_lock_free</a> (struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *pcl)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">destroy cpu-partition lock, see <a class="el" href="libcfs__private_8h.html">libcfs_private.h</a> for more detail  <a href="#ab05ade01ac41f6efe9433fc32d00df7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a4437ef1809f39048a4b89654aa4d83a2">cfs_percpt_lock</a> (struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *pcl, int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lock a CPU partition  <a href="#a4437ef1809f39048a4b89654aa4d83a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#af53b174c4b89f74dd90773500b656389">cfs_percpt_unlock</a> (struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *pcl, int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unlock a CPU partition  <a href="#af53b174c4b89f74dd90773500b656389"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a80f9f26885f4470359e0234aa494bfa0">cfs_cpt_malloc</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, size_t nr_bytes, gfp_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">allocate <em>nr_bytes</em> of physical memory from a contiguous region with the properties of <em>flags</em> which are bound to the partition id <em>cpt</em>.  <a href="#a80f9f26885f4470359e0234aa494bfa0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a8f4f9a5310abc369fb4fb5acc0660cad">cfs_cpt_vzalloc</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, size_t nr_bytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">allocate <em>nr_bytes</em> of virtually contiguous memory that is bound to the partition id <em>cpt</em>.  <a href="#a8f4f9a5310abc369fb4fb5acc0660cad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct page *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#abe00fd8c54031804ac55e36c70eae8f4">cfs_page_cpt_alloc</a> (struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, gfp_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">allocate a single page of memory with the properties of <em>flags</em> were that page is bound to the partition id <em>cpt</em>.  <a href="#abe00fd8c54031804ac55e36c70eae8f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a0c3e01633a050da6423122be6cd53fb3">cfs_mem_cache_cpt_alloc</a> (struct kmem_cache *cachep, struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cpt, gfp_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">allocate a chunck of memory from a memory pool that is bound to the partition id <em>cpt</em> with the properites of <em>flags</em>.  <a href="#a0c3e01633a050da6423122be6cd53fb3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#ac84e27df57755692b9e43bcfa6e6961e">cfs_cpu_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#a19685ab6cd46910ce2397164efdc896a">cfs_cpu_fini</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="libcfs__cpu_8h.html#aac711d1a08cd57bfa5b224f4aa284dfa">cfs_cpt_table</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a0628df10a6276d56b4dd55643cf7ccbe"></a><!-- doxytag: member="libcfs_cpu.h::CFS_CPT_ANY" ref="a0628df10a6276d56b4dd55643cf7ccbe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CFS_CPT_ANY&nbsp;&nbsp;&nbsp;(-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00095">95</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00167">cfs_binheap_create()</a>, <a class="el" href="workitem_8c_source.html#l00343">cfs_wi_sched_create()</a>, <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00682">libcfs_init()</a>, <a class="el" href="lnet_2selftest_2module_8c_source.html#l00103">lnet_selftest_init()</a>, <a class="el" href="ost__handler_8c_source.html#l00089">ost_setup()</a>, <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>, <a class="el" href="service_8c_source.html#l00494">ptlrpc_server_nthreads_check()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>, and <a class="el" href="framework_8c_source.html#l01136">sfw_add_test()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9adea7b79396dd8c0758865fc9c043e"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_for_each" ref="ab9adea7b79396dd8c0758865fc9c043e" args="(i, cptab)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cfs_cpt_for_each</td>
          <td>(</td>
          <td class="paramtype">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cptab&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;for (i = 0; i &lt; cfs_cpt_number(cptab); i++)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>iterate over all CPU partitions in <em>cptab</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00335">335</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>Referenced by <a class="el" href="o2iblnd_8c_source.html#l02608">kiblnd_dev_failover()</a>, and <a class="el" href="o2iblnd_8c_source.html#l02344">kiblnd_net_fini_pools()</a>.</p>

</div>
</div>
<a class="anchor" id="a4de64b9464c23beadb6c47fbceb63929"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_for_each" ref="a4de64b9464c23beadb6c47fbceb63929" args="(var, i, vars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cfs_percpt_for_each</td>
          <td>(</td>
          <td class="paramtype">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vars&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="libcfs__cpu_8h.html#a0d11ef957193366cf975497907ed6dd7">cfs_percpt_number</a>(vars) &amp;&amp;      \
                ((var) = (vars)[i]) != NULL; i++)
</pre></div>
<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00213">213</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>Referenced by <a class="el" href="router__proc_8c_source.html#l00567">__proc_lnet_buffers()</a>, <a class="el" href="libcfs__lock_8c_source.html#l00057">cfs_percpt_lock_create()</a>, <a class="el" href="o2iblnd_8c_source.html#l02810">kiblnd_base_shutdown()</a>, <a class="el" href="o2iblnd_8c_source.html#l02956">kiblnd_base_startup()</a>, <a class="el" href="socklnd_8c_source.html#l02264">ksocknal_base_shutdown()</a>, <a class="el" href="socklnd_8c_source.html#l02372">ksocknal_base_startup()</a>, <a class="el" href="socklnd_8c_source.html#l02221">ksocknal_free_buffers()</a>, <a class="el" href="api-ni_8c_source.html#l01097">lnet_clear_zombies_nis_locked()</a>, <a class="el" href="api-ni_8c_source.html#l00323">lnet_counters_get()</a>, <a class="el" href="api-ni_8c_source.html#l00351">lnet_counters_reset()</a>, <a class="el" href="router_8c_source.html#l00552">lnet_get_rtr_pool_cfg()</a>, <a class="el" href="lib-msg_8c_source.html#l00618">lnet_msg_containers_create()</a>, <a class="el" href="lib-msg_8c_source.html#l00602">lnet_msg_containers_destroy()</a>, <a class="el" href="config_8c_source.html#l00123">lnet_ni_alloc()</a>, <a class="el" href="peer_8c_source.html#l00175">lnet_peer_tables_cleanup()</a>, <a class="el" href="peer_8c_source.html#l00045">lnet_peer_tables_create()</a>, <a class="el" href="peer_8c_source.html#l00079">lnet_peer_tables_destroy()</a>, <a class="el" href="lib-ptl_8c_source.html#l00744">lnet_ptl_cleanup()</a>, <a class="el" href="lib-ptl_8c_source.html#l00782">lnet_ptl_setup()</a>, <a class="el" href="api-ni_8c_source.html#l00481">lnet_res_containers_create()</a>, <a class="el" href="api-ni_8c_source.html#l00469">lnet_res_containers_destroy()</a>, <a class="el" href="router_8c_source.html#l01618">lnet_rtrpools_adjust_helper()</a>, <a class="el" href="router_8c_source.html#l01540">lnet_rtrpools_alloc()</a>, <a class="el" href="router_8c_source.html#l01462">lnet_rtrpools_free()</a>, <a class="el" href="api-ni_8c_source.html#l01226">lnet_startup_lndni()</a>, <a class="el" href="lib-eq_8c_source.html#l00156">LNetEQFree()</a>, <a class="el" href="router__proc_8c_source.html#l00634">proc_lnet_nis()</a>, <a class="el" href="service_8c_source.html#l02943">ptlrpc_hr_fini()</a>, <a class="el" href="service_8c_source.html#l02888">ptlrpc_hr_init()</a>, <a class="el" href="service_8c_source.html#l02644">ptlrpc_start_hr_threads()</a>, <a class="el" href="service_8c_source.html#l02620">ptlrpc_stop_hr_threads()</a>, <a class="el" href="rpc_8c_source.html#l00723">srpc_abort_service()</a>, <a class="el" href="rpc_8c_source.html#l00643">srpc_finish_service()</a>, <a class="el" href="rpc_8c_source.html#l00569">srpc_service_add_buffers()</a>, <a class="el" href="rpc_8c_source.html#l00192">srpc_service_fini()</a>, <a class="el" href="rpc_8c_source.html#l00248">srpc_service_init()</a>, <a class="el" href="rpc_8c_source.html#l00623">srpc_service_remove_buffers()</a>, and <a class="el" href="rpc_8c_source.html#l00748">srpc_shutdown_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a44268c859f2a9d4ce343bb521b2092d2"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_lock_alloc" ref="a44268c859f2a9d4ce343bb521b2092d2" args="(cptab)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cfs_percpt_lock_alloc</td>
          <td>(</td>
          <td class="paramtype">cptab&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                                      \
        <span class="keyword">static</span> <span class="keyword">struct </span>lock_class_key  ___keys[<a class="code" href="libcfs__cpu_8h.html#a503781e8be0d25f7da28b830c0b94426">CFS_PERCPT_LOCK_KEYS</a>];    \
        <span class="keyword">struct </span><a class="code" href="structcfs__percpt__lock.html">cfs_percpt_lock</a>       *___lk;                            \
                                                                        \
        <span class="keywordflow">if</span> (<a class="code" href="libcfs__cpu_8h.html#a9f06db96214d81272568b87e30e26d3e" title="return total number of CPU partitions in cptab ">cfs_cpt_number</a>(cptab) &gt; <a class="code" href="libcfs__cpu_8h.html#a503781e8be0d25f7da28b830c0b94426">CFS_PERCPT_LOCK_KEYS</a>)               \
                ___lk = <a class="code" href="libcfs__cpu_8h.html#aa8d7e720b8045dff9c0c73b629406b2d" title="create cpu-partition lock, see libcfs_private.h for more detail.">cfs_percpt_lock_create</a>(cptab, NULL);            \
        <span class="keywordflow">else</span>                                                            \
                ___lk = <a class="code" href="libcfs__cpu_8h.html#aa8d7e720b8045dff9c0c73b629406b2d" title="create cpu-partition lock, see libcfs_private.h for more detail.">cfs_percpt_lock_create</a>(cptab, ___keys);         \
        ___lk;                                                          \
})
</pre></div>
<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00266">266</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>Referenced by <a class="el" href="api-ni_8c_source.html#l00163">lnet_create_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="a503781e8be0d25f7da28b830c0b94426"></a><!-- doxytag: member="libcfs_cpu.h::CFS_PERCPT_LOCK_KEYS" ref="a503781e8be0d25f7da28b830c0b94426" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CFS_PERCPT_LOCK_KEYS&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00263">263</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="a36b23a48b7fc2305f58bd0b696171142"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_lock_num" ref="a36b23a48b7fc2305f58bd0b696171142" args="(pcl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cfs_percpt_lock_num</td>
          <td>(</td>
          <td class="paramtype">pcl&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;cfs_cpt_number(pcl-&gt;pcl_cptab)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00247">247</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a905301dc85f7361d62f56f9dea55cf2c"></a><!-- doxytag: member="libcfs_cpu.h::@256" ref="a905301dc85f7361d62f56f9dea55cf2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a905301dc85f7361d62f56f9dea55cf2caba305bea862d306973a93f811975cb99"></a><!-- doxytag: member="CFS_PERCPT_LOCK_EX" ref="a905301dc85f7361d62f56f9dea55cf2caba305bea862d306973a93f811975cb99" args="" -->CFS_PERCPT_LOCK_EX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00233">233</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5640d52431f8a9f49f0ca6c93c6e4d10"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_bind" ref="a5640d52431f8a9f49f0ca6c93c6e4d10" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_bind </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bind current thread on a CPU-partition <em>cpt</em> of <em>cptab</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00207">207</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="workitem_8c_source.html#l00210">cfs_wi_scheduler()</a>, <a class="el" href="o2iblnd__cb_8c_source.html#l03485">kiblnd_scheduler()</a>, <a class="el" href="socklnd__cb_8c_source.html#l01388">ksocknal_scheduler()</a>, <a class="el" href="service_8c_source.html#l02578">ptlrpc_hr_main()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00427">ptlrpcd()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b132b0ed4ee4153344e270dbc3b3396"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_clear" ref="a7b132b0ed4ee4153344e270dbc3b3396" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpt_clear </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>unset all cpus for CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00173">173</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2722e19557ecc4aeefac685be77cc5cf"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_cpumask" ref="a2722e19557ecc4aeefac685be77cc5cf" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpumask_t* cfs_cpt_cpumask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return cpumask of CPU partition <em>cpt</em> </p>

<p>Referenced by <a class="el" href="o2iblnd_8c_source.html#l00672">kiblnd_get_completion_vector()</a>.</p>

</div>
</div>
<a class="anchor" id="aeca702e29c4c46f6801403fe5cba3c8b"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_current" ref="aeca702e29c4c46f6801403fe5cba3c8b" args="(struct cfs_cpt_table *cptab, int remap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_current </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>remap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>shadow current HW processor ID to CPU-partition ID of <em>cptab</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00193">193</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00171">ptlrpcd_select_pc()</a>.</p>

</div>
</div>
<a class="anchor" id="a80f9f26885f4470359e0234aa494bfa0"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_malloc" ref="a80f9f26885f4470359e0234aa494bfa0" args="(struct cfs_cpt_table *cptab, int cpt, size_t nr_bytes, gfp_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* cfs_cpt_malloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>nr_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfp_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>allocate <em>nr_bytes</em> of physical memory from a contiguous region with the properties of <em>flags</em> which are bound to the partition id <em>cpt</em>. </p>
<p>This function should only be used for the case when only a few pages of memory are need. </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00285">285</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00179">cfs_cpt_spread_node()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ad59e6fdf6bd3a38b271626c43a6e46"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_nodemask" ref="a9ad59e6fdf6bd3a38b271626c43a6e46" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodemask_t* cfs_cpt_nodemask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return nodemask of CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00114">114</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8h_source.html#l00087">cfs_cpt_table::ctb_nodemask</a>.</p>

<p>Referenced by <a class="el" href="ost__handler_8c_source.html#l00089">ost_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f06db96214d81272568b87e30e26d3e"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_number" ref="a9f06db96214d81272568b87e30e26d3e" args="(struct cfs_cpt_table *cptab)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_number </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return total number of CPU partitions in <em>cptab</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00093">93</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="libcfs__mem_8c_source.html#l00078">cfs_percpt_alloc()</a>, <a class="el" href="libcfs__lock_8c_source.html#l00101">cfs_percpt_lock()</a>, <a class="el" href="libcfs__lock_8c_source.html#l00136">cfs_percpt_unlock()</a>, <a class="el" href="workitem_8c_source.html#l00343">cfs_wi_sched_create()</a>, <a class="el" href="socklnd_8c_source.html#l02755">ksocknal_net_start_threads()</a>, <a class="el" href="api-ni_8c_source.html#l01431">lnet_lib_init()</a>, <a class="el" href="lnet_2selftest_2module_8c_source.html#l00057">lnet_selftest_exit()</a>, <a class="el" href="lnet_2selftest_2module_8c_source.html#l00103">lnet_selftest_init()</a>, <a class="el" href="ost__handler_8c_source.html#l00089">ost_setup()</a>, <a class="el" href="service_8c_source.html#l00274">ptlrpc_hr_select()</a>, <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>, <a class="el" href="framework_8c_source.html#l00572">sfw_load_test()</a>, and <a class="el" href="rpc_8c_source.html#l00248">srpc_service_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aed97655e205019e118a7ed9f9bd7477c"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_of_cpu" ref="aed97655e205019e118a7ed9f9bd7477c" args="(struct cfs_cpt_table *cptab, int cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_of_cpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>shadow HW processor ID <em>CPU</em> to CPU-partition ID by <em>cptab</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00200">200</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="afb3ebb66af8b050b5fb3f637d528a850"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_online" ref="afb3ebb66af8b050b5fb3f637d528a850" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_online </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>is there any online CPU in CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00107">107</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e630733b43452f4d942fc28031e1315"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_set_cpu" ref="a0e630733b43452f4d942fc28031e1315" args="(struct cfs_cpt_table *cptab, int cpt, int cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_set_cpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add <em>cpu</em> to CPU partion  of <em>cptab</em>, return 1 for success, otherwise 0 is returned </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00121">121</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa64b08f4da8b9be461cc049f0c0e6368"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_set_cpumask" ref="aa64b08f4da8b9be461cc049f0c0e6368" args="(struct cfs_cpt_table *cptab, int cpt, cpumask_t *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_set_cpumask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cpumask_t *&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add all cpus in <em>mask</em> to CPU partition <em>cpt</em> return 1 if successfully set all CPUs, otherwise return 0 </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00134">134</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3aab8de6e8b25b1c1e9523c66b161b05"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_set_node" ref="a3aab8de6e8b25b1c1e9523c66b161b05" args="(struct cfs_cpt_table *cptab, int cpt, int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_set_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>node</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add all cpus in NUMA node <em>node</em> to CPU partition <em>cpt</em> return 1 if successfully set all CPUs, otherwise return 0 </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00147">147</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="ost__handler_8c_source.html#l00089">ost_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d786d6392a4b5d9383d5fb2fd85cc2c"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_set_nodemask" ref="a2d786d6392a4b5d9383d5fb2fd85cc2c" args="(struct cfs_cpt_table *cptab, int cpt, nodemask_t *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_set_nodemask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nodemask_t *&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add all cpus in node mask <em>mask</em> to CPU partition <em>cpt</em> return 1 if successfully set all CPUs, otherwise return 0 </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00160">160</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4d4b3bd377acc4c37ed6508c8849657d"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_spread_node" ref="a4d4b3bd377acc4c37ed6508c8849657d" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_spread_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>convert partition id <em>cpt</em> to numa node id, if there are more than one nodes in this partition, it might return a different node id each time. </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00179">179</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="libcfs__cpu_8h_source.html#l00285">cfs_cpt_malloc()</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00297">cfs_cpt_vzalloc()</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00325">cfs_mem_cache_cpt_alloc()</a>, and <a class="el" href="libcfs__cpu_8h_source.html#l00315">cfs_page_cpt_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="ad41c848f4d4612232a5e5f483a5dc1b6"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_table_alloc" ref="ad41c848f4d4612232a5e5f483a5dc1b6" args="(unsigned int ncpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a>* cfs_cpt_table_alloc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>ncpt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>create a <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> with <em>ncpt</em> number of partitions </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00049">49</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__cpu_8c_source.html#l00046">CFS_CPU_VERSION_MAGIC</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00087">cfs_cpt_table::ctb_nodemask</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00083">cfs_cpt_table::ctb_nparts</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00089">cfs_cpt_table::ctb_version</a>, and <a class="el" href="libcfs__private_8h_source.html#l00291">LIBCFS_ALLOC</a>.</p>

<p>Referenced by <a class="el" href="libcfs__cpu_8c_source.html#l00223">cfs_cpu_init()</a>, and <a class="el" href="ost__handler_8c_source.html#l00089">ost_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e77033b7fbef846cfc30e0021146b17"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_table_free" ref="a5e77033b7fbef846cfc30e0021146b17" args="(struct cfs_cpt_table *cptab)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpt_table_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>destroy a CPU partition table </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00070">70</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00046">CFS_CPU_VERSION_MAGIC</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00089">cfs_cpt_table::ctb_version</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="libcfs__private_8h_source.html#l00290">LIBCFS_FREE</a>.</p>

<p>Referenced by <a class="el" href="libcfs__cpu_8c_source.html#l00214">cfs_cpu_fini()</a>, <a class="el" href="ost__handler_8c_source.html#l00356">ost_cleanup()</a>, and <a class="el" href="ost__handler_8c_source.html#l00089">ost_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a5fbf065f51bb21721334ca18dff240dd"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_table_print" ref="a5fbf065f51bb21721334ca18dff240dd" args="(struct cfs_cpt_table *cptab, char *buf, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_table_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>print string information of cpt-table </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00079">79</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00421">__proc_cpt_table()</a>.</p>

</div>
</div>
<a class="anchor" id="a6446713a7ad5c5bbf9decdcd09648def"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_unset_cpu" ref="a6446713a7ad5c5bbf9decdcd09648def" args="(struct cfs_cpt_table *cptab, int cpt, int cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpt_unset_cpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove <em>cpu</em> from CPU partition <em>cpt</em> of <em>cptab</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00128">128</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="af0d90776a0f70e8c5ec3fca75c2af155"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_unset_cpumask" ref="af0d90776a0f70e8c5ec3fca75c2af155" args="(struct cfs_cpt_table *cptab, int cpt, cpumask_t *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpt_unset_cpumask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cpumask_t *&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove all cpus in <em>mask</em> from CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00141">141</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8bcbfc241edf636bc808f8ebbafe3182"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_unset_node" ref="a8bcbfc241edf636bc808f8ebbafe3182" args="(struct cfs_cpt_table *cptab, int cpt, int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpt_unset_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>node</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove all cpus in NUMA node <em>node</em> from CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00154">154</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9c8e65cfbbb7063f66d7bfaa2ef6f3ec"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_unset_nodemask" ref="a9c8e65cfbbb7063f66d7bfaa2ef6f3ec" args="(struct cfs_cpt_table *cptab, int cpt, nodemask_t *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpt_unset_nodemask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nodemask_t *&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove all cpus in node mask <em>mask</em> from CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00167">167</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8f4f9a5310abc369fb4fb5acc0660cad"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_vzalloc" ref="a8f4f9a5310abc369fb4fb5acc0660cad" args="(struct cfs_cpt_table *cptab, int cpt, size_t nr_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* cfs_cpt_vzalloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>nr_bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>allocate <em>nr_bytes</em> of virtually contiguous memory that is bound to the partition id <em>cpt</em>. </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00297">297</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00179">cfs_cpt_spread_node()</a>.</p>

</div>
</div>
<a class="anchor" id="a490feb884ea09b464c88c79377cb22ee"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_weight" ref="a490feb884ea09b464c88c79377cb22ee" args="(struct cfs_cpt_table *cptab, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpt_weight </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return number of HW cores or hypter-threadings in a CPU partition <em>cpt</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00100">100</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="o2iblnd_8c_source.html#l02956">kiblnd_base_startup()</a>, <a class="el" href="o2iblnd_8c_source.html#l03049">kiblnd_start_schedulers()</a>, <a class="el" href="socklnd_8c_source.html#l02372">ksocknal_base_startup()</a>, <a class="el" href="socklnd_8c_source.html#l02709">ksocknal_start_schedulers()</a>, <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00682">libcfs_init()</a>, <a class="el" href="lib-msg_8c_source.html#l00575">lnet_msg_container_setup()</a>, <a class="el" href="lnet_2selftest_2module_8c_source.html#l00103">lnet_selftest_init()</a>, <a class="el" href="service_8c_source.html#l02888">ptlrpc_hr_init()</a>, <a class="el" href="service_8c_source.html#l00494">ptlrpc_server_nthreads_check()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a19685ab6cd46910ce2397164efdc896a"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpu_fini" ref="a19685ab6cd46910ce2397164efdc896a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_cpu_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00214">214</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00070">cfs_cpt_table_free()</a>.</p>

<p>Referenced by <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00745">libcfs_exit()</a>, and <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00682">libcfs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2896836dbe1aa4f858ce28320b682bc8"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpu_ht_nsiblings" ref="a2896836dbe1aa4f858ce28320b682bc8" args="(int cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpu_ht_nsiblings </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpu</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return number of HTs in the same core of <em>cpu</em> </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00186">186</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02888">ptlrpc_hr_init()</a>, and <a class="el" href="service_8c_source.html#l00494">ptlrpc_server_nthreads_check()</a>.</p>

</div>
</div>
<a class="anchor" id="ac84e27df57755692b9e43bcfa6e6961e"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpu_init" ref="ac84e27df57755692b9e43bcfa6e6961e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_cpu_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__cpu_8c_source.html#l00223">223</a> of file <a class="el" href="libcfs__cpu_8c_source.html">libcfs_cpu.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00049">cfs_cpt_table_alloc()</a>.</p>

<p>Referenced by <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00682">libcfs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c3e01633a050da6423122be6cd53fb3"></a><!-- doxytag: member="libcfs_cpu.h::cfs_mem_cache_cpt_alloc" ref="a0c3e01633a050da6423122be6cd53fb3" args="(struct kmem_cache *cachep, struct cfs_cpt_table *cptab, int cpt, gfp_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* cfs_mem_cache_cpt_alloc </td>
          <td>(</td>
          <td class="paramtype">struct kmem_cache *&nbsp;</td>
          <td class="paramname"> <em>cachep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfp_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>allocate a chunck of memory from a memory pool that is bound to the partition id <em>cpt</em> with the properites of <em>flags</em>. </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00325">325</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00179">cfs_cpt_spread_node()</a>.</p>

</div>
</div>
<a class="anchor" id="abe00fd8c54031804ac55e36c70eae8f4"></a><!-- doxytag: member="libcfs_cpu.h::cfs_page_cpt_alloc" ref="abe00fd8c54031804ac55e36c70eae8f4" args="(struct cfs_cpt_table *cptab, int cpt, gfp_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct page* cfs_page_cpt_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfp_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>allocate a single page of memory with the properties of <em>flags</em> were that page is bound to the partition id <em>cpt</em>. </p>

<p>Definition at line <a class="el" href="libcfs__cpu_8h_source.html#l00315">315</a> of file <a class="el" href="libcfs__cpu_8h_source.html">libcfs_cpu.h</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00179">cfs_cpt_spread_node()</a>.</p>

<p>Referenced by <a class="el" href="o2iblnd_8c_source.html#l01191">kiblnd_alloc_pages()</a>, <a class="el" href="router_8c_source.html#l01310">lnet_new_rtrbuf()</a>, and <a class="el" href="rpc_8c_source.html#l00124">srpc_alloc_bulk()</a>.</p>

</div>
</div>
<a class="anchor" id="a45c7a434b06b018cff3260e33463dbd2"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_alloc" ref="a45c7a434b06b018cff3260e33463dbd2" args="(struct cfs_cpt_table *cptab, unsigned int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* cfs_percpt_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__mem_8c_source.html#l00078">78</a> of file <a class="el" href="libcfs__mem_8c_source.html">libcfs_mem.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00093">cfs_cpt_number()</a>, <a class="el" href="libcfs__mem_8c_source.html#l00049">cfs_percpt_free()</a>, <a class="el" href="libcfs__private_8h_source.html#l00291">LIBCFS_ALLOC</a>, <a class="el" href="libcfs__private_8h_source.html#l00295">LIBCFS_CPT_ALLOC</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="libcfs__mem_8c_source.html#l00039">cfs_var_array::va_count</a>, <a class="el" href="libcfs__mem_8c_source.html#l00041">cfs_var_array::va_cptab</a>, <a class="el" href="libcfs__mem_8c_source.html#l00042">cfs_var_array::va_ptrs</a>, and <a class="el" href="libcfs__mem_8c_source.html#l00040">cfs_var_array::va_size</a>.</p>

<p>Referenced by <a class="el" href="libcfs__lock_8c_source.html#l00057">cfs_percpt_lock_create()</a>, <a class="el" href="o2iblnd_8c_source.html#l02956">kiblnd_base_startup()</a>, <a class="el" href="o2iblnd_8c_source.html#l02375">kiblnd_net_init_pools()</a>, <a class="el" href="socklnd_8c_source.html#l02372">ksocknal_base_startup()</a>, <a class="el" href="lib-msg_8c_source.html#l00618">lnet_msg_containers_create()</a>, <a class="el" href="config_8c_source.html#l00123">lnet_ni_alloc()</a>, <a class="el" href="peer_8c_source.html#l00045">lnet_peer_tables_create()</a>, <a class="el" href="api-ni_8c_source.html#l00546">lnet_prepare()</a>, <a class="el" href="lib-ptl_8c_source.html#l00782">lnet_ptl_setup()</a>, <a class="el" href="api-ni_8c_source.html#l00481">lnet_res_containers_create()</a>, <a class="el" href="router_8c_source.html#l01540">lnet_rtrpools_alloc()</a>, <a class="el" href="lib-eq_8c_source.html#l00070">LNetEQAlloc()</a>, <a class="el" href="service_8c_source.html#l02888">ptlrpc_hr_init()</a>, and <a class="el" href="rpc_8c_source.html#l00248">srpc_service_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a37fd5c4dd7552fef5647378faedf8818"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_free" ref="a37fd5c4dd7552fef5647378faedf8818" args="(void *vars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_percpt_free </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>vars</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__mem_8c_source.html#l00049">49</a> of file <a class="el" href="libcfs__mem_8c_source.html">libcfs_mem.c</a>.</p>

<p>References <a class="el" href="libcfs__private_8h_source.html#l00290">LIBCFS_FREE</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="libcfs__mem_8c_source.html#l00039">cfs_var_array::va_count</a>, <a class="el" href="libcfs__mem_8c_source.html#l00042">cfs_var_array::va_ptrs</a>, and <a class="el" href="libcfs__mem_8c_source.html#l00040">cfs_var_array::va_size</a>.</p>

<p>Referenced by <a class="el" href="libcfs__mem_8c_source.html#l00078">cfs_percpt_alloc()</a>, <a class="el" href="libcfs__lock_8c_source.html#l00039">cfs_percpt_lock_free()</a>, <a class="el" href="o2iblnd_8c_source.html#l02810">kiblnd_base_shutdown()</a>, <a class="el" href="o2iblnd_8c_source.html#l02344">kiblnd_net_fini_pools()</a>, <a class="el" href="socklnd_8c_source.html#l02221">ksocknal_free_buffers()</a>, <a class="el" href="lib-msg_8c_source.html#l00602">lnet_msg_containers_destroy()</a>, <a class="el" href="config_8c_source.html#l00098">lnet_ni_free()</a>, <a class="el" href="peer_8c_source.html#l00079">lnet_peer_tables_destroy()</a>, <a class="el" href="lib-ptl_8c_source.html#l00744">lnet_ptl_cleanup()</a>, <a class="el" href="api-ni_8c_source.html#l00469">lnet_res_containers_destroy()</a>, <a class="el" href="router_8c_source.html#l01462">lnet_rtrpools_free()</a>, <a class="el" href="api-ni_8c_source.html#l00629">lnet_unprepare()</a>, <a class="el" href="lib-eq_8c_source.html#l00070">LNetEQAlloc()</a>, <a class="el" href="lib-eq_8c_source.html#l00156">LNetEQFree()</a>, <a class="el" href="service_8c_source.html#l02943">ptlrpc_hr_fini()</a>, and <a class="el" href="rpc_8c_source.html#l00192">srpc_service_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a4437ef1809f39048a4b89654aa4d83a2"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_lock" ref="a4437ef1809f39048a4b89654aa4d83a2" args="(struct cfs_percpt_lock *pcl, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>pcl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lock a CPU partition </p>
<p><em>index</em> != CFS_PERCPT_LOCK_EX hold private lock indexed by <em>index</em> </p>
<p><em>index</em> == CFS_PERCPT_LOCK_EX exclusively lock  and nobody can take private lock </p>

<p>Definition at line <a class="el" href="libcfs__lock_8c_source.html#l00101">101</a> of file <a class="el" href="libcfs__lock_8c_source.html">libcfs_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00093">cfs_cpt_number()</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00234">CFS_PERCPT_LOCK_EX</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>.</p>

<p>Referenced by <a class="el" href="lib-lnet_8h_source.html#l00153">lnet_net_lock()</a>, and <a class="el" href="lib-lnet_8h_source.html#l00132">lnet_res_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8d7e720b8045dff9c0c73b629406b2d"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_lock_create" ref="aa8d7e720b8045dff9c0c73b629406b2d" args="(struct cfs_cpt_table *cptab, struct lock_class_key *keys)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a>* cfs_percpt_lock_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lock_class_key *&nbsp;</td>
          <td class="paramname"> <em>keys</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>create cpu-partition lock, see <a class="el" href="libcfs__private_8h.html">libcfs_private.h</a> for more detail. </p>
<p>cpu-partition lock is designed for large-scale SMP system, so we need to reduce cacheline conflict as possible as we can, that's the reason we always allocate cacheline-aligned memory block. </p>

<p>Definition at line <a class="el" href="libcfs__lock_8c_source.html#l00057">57</a> of file <a class="el" href="libcfs__lock_8c_source.html">libcfs_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__mem_8c_source.html#l00078">cfs_percpt_alloc()</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00213">cfs_percpt_for_each</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__private_8h_source.html#l00291">LIBCFS_ALLOC</a>, <a class="el" href="libcfs__private_8h_source.html#l00290">LIBCFS_FREE</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00239">cfs_percpt_lock::pcl_cptab</a>, and <a class="el" href="libcfs__cpu_8h_source.html#l00243">cfs_percpt_lock::pcl_locks</a>.</p>

</div>
</div>
<a class="anchor" id="ab05ade01ac41f6efe9433fc32d00df7f"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_lock_free" ref="ab05ade01ac41f6efe9433fc32d00df7f" args="(struct cfs_percpt_lock *pcl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_percpt_lock_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>pcl</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>destroy cpu-partition lock, see <a class="el" href="libcfs__private_8h.html">libcfs_private.h</a> for more detail </p>

<p>Definition at line <a class="el" href="libcfs__lock_8c_source.html#l00039">39</a> of file <a class="el" href="libcfs__lock_8c_source.html">libcfs_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__mem_8c_source.html#l00049">cfs_percpt_free()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00290">LIBCFS_FREE</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00241">cfs_percpt_lock::pcl_locked</a>, and <a class="el" href="libcfs__cpu_8h_source.html#l00243">cfs_percpt_lock::pcl_locks</a>.</p>

<p>Referenced by <a class="el" href="api-ni_8c_source.html#l00147">lnet_destroy_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d11ef957193366cf975497907ed6dd7"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_number" ref="a0d11ef957193366cf975497907ed6dd7" args="(void *vars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_percpt_number </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>vars</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__mem_8c_source.html#l00111">111</a> of file <a class="el" href="libcfs__mem_8c_source.html">libcfs_mem.c</a>.</p>

<p>References <a class="el" href="libcfs__mem_8c_source.html#l00039">cfs_var_array::va_count</a>, and <a class="el" href="libcfs__mem_8c_source.html#l00042">cfs_var_array::va_ptrs</a>.</p>

<p>Referenced by <a class="el" href="peer_8c_source.html#l00393">lnet_get_peer_info()</a>.</p>

</div>
</div>
<a class="anchor" id="af53b174c4b89f74dd90773500b656389"></a><!-- doxytag: member="libcfs_cpu.h::cfs_percpt_unlock" ref="af53b174c4b89f74dd90773500b656389" args="(struct cfs_percpt_lock *pcl, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_percpt_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__percpt__lock.html">cfs_percpt_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>pcl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>unlock a CPU partition </p>

<p>Definition at line <a class="el" href="libcfs__lock_8c_source.html#l00136">136</a> of file <a class="el" href="libcfs__lock_8c_source.html">libcfs_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00093">cfs_cpt_number()</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00234">CFS_PERCPT_LOCK_EX</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>.</p>

<p>Referenced by <a class="el" href="lib-lnet_8h_source.html#l00159">lnet_net_unlock()</a>, and <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aac711d1a08cd57bfa5b224f4aa284dfa"></a><!-- doxytag: member="libcfs_cpu.h::cfs_cpt_table" ref="aac711d1a08cd57bfa5b224f4aa284dfa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a>* <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:45 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
