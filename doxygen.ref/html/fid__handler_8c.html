<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/fid/fid_handler.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/fid/fid_handler.c File Reference</h1><code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__req__layout_8h_source.html">lustre_req_layout.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="fid__internal_8h_source.html">fid_internal.h</a>&quot;</code><br/>

<p><a href="fid__handler_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_FID</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a273fd25a69ddb27ead49e2d79622f0af">seq_server_proc_fini</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#ga53bc7ceb292e29eecaf782c7f69734bc">seq_server_set_cli</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structlu__client__seq.html">lu_client_seq</a> *cli)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a6b5408783c7e96f9ba474f69e056c9a1">range_alloc</a> (struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *to, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *from, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> width)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a274b254a4a1bdc64d86e2f03c3314a3c">__seq_server_alloc_super</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *out, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">On controller node, allocate new super sequence for regular sequence server.  <a href="#a274b254a4a1bdc64d86e2f03c3314a3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#ga5f7cde3ce0815fafd9325df149caef52">seq_server_alloc_super</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *out, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a7d33c82059751124e1f36195f6bc3655">seq_server_alloc_spec</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *spec, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a18ce4ac8ff866ff803c1c15cd07976ff">__seq_set_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a1cf896b0b8b83cfc3df1eae9fef8f4de">range_alloc_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *out, struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#ga019b809314cad1f1e5152bdc586b9008">seq_server_check_and_alloc_super</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if the sequence server has sequence avaible.  <a href="group__fid.html#ga019b809314cad1f1e5152bdc586b9008"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a64a64610356c64264713ad3bb942b5a8">__seq_server_alloc_meta</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *out, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#gaacb779e85cf7f6a0f541859e5966ba2a">seq_server_alloc_meta</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *out, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#af04f5d456a9ccbf4fcd580e72b5a18a1">seq_server_handle</a> (struct <a class="el" href="structlu__site.html">lu_site</a> *site, const struct <a class="el" href="structlu__env.html">lu_env</a> *env, __u32 opc, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *out)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#ab31958c317733024d414fcb6ff11b4bc">seq_handler</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#ad1d4f36758190065f6773f374252760a">LU_KEY_INIT_FINI</a> (seq, struct seq_thread_info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a8657cc14c1eff0f73ad40cb2f6c9c5bb">LU_CONTEXT_KEY_DEFINE</a> (seq, LCT_MD_THREAD|LCT_DT_THREAD)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a02473526c1ebc65add5081bee2a38cdf">seq_server_proc_init</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#ga6f5cd92f21ffa46908f4c014f17d8b62">seq_server_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, const char *prefix, enum <a class="el" href="group__fid.html#ga8e6152de97f23de7ab474b3a7668f7e8">lu_mgr_type</a> type, struct <a class="el" href="structseq__server__site.html">seq_server_site</a> *ss)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#ga4df90d16c8332c69b7f4585e30693a48">seq_server_fini</a> (struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *seq, const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fid.html#ga10ef4c271de422764a8900fc470ff688">seq_site_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structseq__server__site.html">seq_server_site</a> *ss)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#aa1e34f151c4bd5d8b3a47d6f742af274">fid_server_mod_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a422073252c767d96319591893d644848">fid_server_mod_exit</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtgt__handler.html">tgt_handler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a07f2f8ac8a3382b06263dc9a2684eecf">seq_handlers</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fid__handler_8c.html#a2e15fef174e7ee583b171f681aab42ef">seq_fld_proc_seq_fops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="fid_handler.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_FID</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00043">43</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>Referenced by <a class="el" href="pack__generic_8c_source.html#l02114">lustre_print_user_md()</a>, <a class="el" href="mdt__lib_8c_source.html#l00630">mdt_dump_lmm()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00663">mdt_dump_lmv()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a64a64610356c64264713ad3bb942b5a8"></a><!-- doxytag: member="fid_handler.c::__seq_server_alloc_meta" ref="a64a64610356c64264713ad3bb942b5a8" args="(struct lu_server_seq *seq, struct lu_seq_range *out, const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __seq_server_alloc_meta </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00319">319</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__fid_8h_source.html#l00426">lu_server_seq::lss_name</a>, <a class="el" href="lustre__fid_8h_source.html#l00395">lu_server_seq::lss_space</a>, <a class="el" href="seq__range_8h_source.html#l00146">lu_seq_range_is_sane()</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, <a class="el" href="fid__handler_8c_source.html#l00217">range_alloc_set()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="fid__handler_8c_source.html#l00275">seq_server_check_and_alloc_super()</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00350">seq_server_alloc_meta()</a>.</p>

</div>
</div>
<a class="anchor" id="a274b254a4a1bdc64d86e2f03c3314a3c"></a><!-- doxytag: member="fid_handler.c::__seq_server_alloc_super" ref="a274b254a4a1bdc64d86e2f03c3314a3c" args="(struct lu_server_seq *seq, struct lu_seq_range *out, const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __seq_server_alloc_super </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On controller node, allocate new super sequence for regular sequence server. </p>
<p>As this super sequence controller, this node suppose to maintain fld and update index. <em>out</em> range always has currect mds node number of requester. </p>

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00113">113</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00283">LCONSOLE_INFO</a>, <a class="el" href="lustre__fid_8h_source.html#l00426">lu_server_seq::lss_name</a>, <a class="el" href="lustre__fid_8h_source.html#l00395">lu_server_seq::lss_space</a>, <a class="el" href="lustre__fid_8h_source.html#l00432">lu_server_seq::lss_width</a>, <a class="el" href="seq__range_8h_source.html#l00164">lu_seq_range_is_exhausted()</a>, <a class="el" href="seq__range_8h_source.html#l00146">lu_seq_range_is_sane()</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, <a class="el" href="fid__handler_8c_source.html#l00096">range_alloc()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="fid__store_8c_source.html#l00105">seq_store_update()</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00139">seq_server_alloc_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a18ce4ac8ff866ff803c1c15cd07976ff"></a><!-- doxytag: member="fid_handler.c::__seq_set_init" ref="a18ce4ac8ff866ff803c1c15cd07976ff" args="(const struct lu_env *env, struct lu_server_seq *seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __seq_set_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00188">188</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00399">lu_server_seq::lss_hiwater_set</a>, <a class="el" href="lustre__fid_8h_source.html#l00398">lu_server_seq::lss_lowater_set</a>, <a class="el" href="lustre__fid_8h_source.html#l00438">lu_server_seq::lss_set_width</a>, <a class="el" href="lustre__fid_8h_source.html#l00395">lu_server_seq::lss_space</a>, <a class="el" href="fid__handler_8c_source.html#l00096">range_alloc()</a>, and <a class="el" href="fid__store_8c_source.html#l00105">seq_store_update()</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00217">range_alloc_set()</a>, and <a class="el" href="fid__handler_8c_source.html#l00275">seq_server_check_and_alloc_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a422073252c767d96319591893d644848"></a><!-- doxytag: member="fid_handler.c::fid_server_mod_exit" ref="a422073252c767d96319591893d644848" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fid_server_mod_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00636">636</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="lu__object_8c_source.html#l01455">lu_context_key_degister()</a>.</p>

<p>Referenced by <a class="el" href="fid__request_8c_source.html#l00586">fid_exit()</a>.</p>

</div>
</div>
<a class="anchor" id="aa1e34f151c4bd5d8b3a47d6f742af274"></a><!-- doxytag: member="fid_handler.c::fid_server_mod_init" ref="aa1e34f151c4bd5d8b3a47d6f742af274" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fid_server_mod_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00630">630</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01172">LU_CONTEXT_KEY_INIT</a>, and <a class="el" href="lu__object_8c_source.html#l01401">lu_context_key_register()</a>.</p>

<p>Referenced by <a class="el" href="fid__request_8c_source.html#l00571">fid_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a8657cc14c1eff0f73ad40cb2f6c9c5bb"></a><!-- doxytag: member="fid_handler.c::LU_CONTEXT_KEY_DEFINE" ref="a8657cc14c1eff0f73ad40cb2f6c9c5bb" args="(seq, LCT_MD_THREAD|LCT_DT_THREAD)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LU_CONTEXT_KEY_DEFINE </td>
          <td>(</td>
          <td class="paramtype">seq&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LCT_MD_THREAD|&nbsp;</td>
          <td class="paramname"> <em>LCT_DT_THREAD</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad1d4f36758190065f6773f374252760a"></a><!-- doxytag: member="fid_handler.c::LU_KEY_INIT_FINI" ref="ad1d4f36758190065f6773f374252760a" args="(seq, struct seq_thread_info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LU_KEY_INIT_FINI </td>
          <td>(</td>
          <td class="paramtype">seq&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct seq_thread_info&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6b5408783c7e96f9ba474f69e056c9a1"></a><!-- doxytag: member="fid_handler.c::range_alloc" ref="a6b5408783c7e96f9ba474f69e056c9a1" args="(struct lu_seq_range *to, struct lu_seq_range *from, __u64 width)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void range_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>width</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00096">96</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, and <a class="el" href="seq__range_8h_source.html#l00118">lu_seq_range_space()</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00113">__seq_server_alloc_super()</a>, <a class="el" href="fid__handler_8c_source.html#l00188">__seq_set_init()</a>, and <a class="el" href="fid__handler_8c_source.html#l00217">range_alloc_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a1cf896b0b8b83cfc3df1eae9fef8f4de"></a><!-- doxytag: member="fid_handler.c::range_alloc_set" ref="a1cf896b0b8b83cfc3df1eae9fef8f4de" args="(const struct lu_env *env, struct lu_seq_range *out, struct lu_server_seq *seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int range_alloc_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00217">217</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="fid__handler_8c_source.html#l00188">__seq_set_init()</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lu__object_8h_source.html#l00619">lu_site::ls_top_dev</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="lustre__fid_8h_source.html#l00399">lu_server_seq::lss_hiwater_set</a>, <a class="el" href="lustre__fid_8h_source.html#l00398">lu_server_seq::lss_lowater_set</a>, <a class="el" href="lustre__fid_8h_source.html#l00441">lu_server_seq::lss_need_sync</a>, <a class="el" href="lustre__fid_8h_source.html#l00438">lu_server_seq::lss_set_width</a>, <a class="el" href="lustre__fid_8h_source.html#l00446">lu_server_seq::lss_site</a>, <a class="el" href="lustre__fid_8h_source.html#l00395">lu_server_seq::lss_space</a>, <a class="el" href="lustre__fid_8h_source.html#l00432">lu_server_seq::lss_width</a>, <a class="el" href="seq__range_8h_source.html#l00164">lu_seq_range_is_exhausted()</a>, <a class="el" href="seq__range_8h_source.html#l00146">lu_seq_range_is_sane()</a>, <a class="el" href="seq__range_8h_source.html#l00155">lu_seq_range_is_zero()</a>, <a class="el" href="seq__range_8h_source.html#l00118">lu_seq_range_space()</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00502">OBD_FAIL_SEQ_ALLOC</a>, <a class="el" href="obd_8h_source.html#l00639">obd_device::obd_num_exports</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, <a class="el" href="fid__handler_8c_source.html#l00096">range_alloc()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="fid__store_8c_source.html#l00105">seq_store_update()</a>, and <a class="el" href="lustre__fid_8h_source.html#l00450">seq_server_site::ss_lu</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00319">__seq_server_alloc_meta()</a>.</p>

</div>
</div>
<a class="anchor" id="ab31958c317733024d414fcb6ff11b4bc"></a><!-- doxytag: member="fid_handler.c::seq_handler" ref="ab31958c317733024d414fcb6ff11b4bc" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int seq_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00400">400</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l01154">MSG_REPLAY</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00916">RMF_SEQ_OPC</a>, <a class="el" href="layout_8c_source.html#l00921">RMF_SEQ_RANGE</a>, <a class="el" href="fid__handler_8c_source.html#l00365">seq_server_handle()</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="lu__target_8h_source.html#l00203">tgt_session_info::tsi_env</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, and <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>.</p>

</div>
</div>
<a class="anchor" id="a7d33c82059751124e1f36195f6bc3655"></a><!-- doxytag: member="fid_handler.c::seq_server_alloc_spec" ref="a7d33c82059751124e1f36195f6bc3655" args="(struct lu_server_seq *seq, struct lu_seq_range *spec, const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int seq_server_alloc_spec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00153">153</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00283">LCONSOLE_INFO</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="lustre__fid_8h_source.html#l00420">lu_server_seq::lss_mutex</a>, <a class="el" href="lustre__fid_8h_source.html#l00426">lu_server_seq::lss_name</a>, <a class="el" href="lustre__fid_8h_source.html#l00395">lu_server_seq::lss_space</a>, <a class="el" href="lustre__idl_8h_source.html#l00166">LU_SEQ_RANGE_MDT</a>, <a class="el" href="lustre__idl_8h_source.html#l00167">LU_SEQ_RANGE_OST</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="fid__store_8c_source.html#l00105">seq_store_update()</a>.</p>

</div>
</div>
<a class="anchor" id="af04f5d456a9ccbf4fcd580e72b5a18a1"></a><!-- doxytag: member="fid_handler.c::seq_server_handle" ref="af04f5d456a9ccbf4fcd580e72b5a18a1" args="(struct lu_site *site, const struct lu_env *env, __u32 opc, struct lu_seq_range *out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int seq_server_handle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__site.html">lu_site</a> *&nbsp;</td>
          <td class="paramname"> <em>site</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>opc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00365">365</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00661">lu_site2seq()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__idl_8h_source.html#l02715">SEQ_ALLOC_META</a>, <a class="el" href="lustre__idl_8h_source.html#l02714">SEQ_ALLOC_SUPER</a>, <a class="el" href="fid__handler_8c_source.html#l00350">seq_server_alloc_meta()</a>, <a class="el" href="fid__handler_8c_source.html#l00139">seq_server_alloc_super()</a>, <a class="el" href="lustre__fid_8h_source.html#l00469">seq_server_site::ss_control_seq</a>, and <a class="el" href="lustre__fid_8h_source.html#l00464">seq_server_site::ss_server_seq</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00400">seq_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a273fd25a69ddb27ead49e2d79622f0af"></a><!-- doxytag: member="fid_handler.c::seq_server_proc_fini" ref="a273fd25a69ddb27ead49e2d79622f0af" args="(struct lu_server_seq *seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void seq_server_proc_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00488">488</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, and <a class="el" href="lustre__fid_8h_source.html#l00411">lu_server_seq::lss_proc_dir</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00591">seq_server_fini()</a>, and <a class="el" href="fid__handler_8c_source.html#l00447">seq_server_proc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a02473526c1ebc65add5081bee2a38cdf"></a><!-- doxytag: member="fid_handler.c::seq_server_proc_init" ref="a02473526c1ebc65add5081bee2a38cdf" args="(struct lu_server_seq *seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int seq_server_proc_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__server__seq.html">lu_server_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>seq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00447">447</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lprocfs__status_8h_source.html#l00945">lprocfs_add_vars()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00949">lprocfs_register()</a>, <a class="el" href="lustre__fid_8h_source.html#l00426">lu_server_seq::lss_name</a>, <a class="el" href="lustre__fid_8h_source.html#l00411">lu_server_seq::lss_proc_dir</a>, <a class="el" href="lustre__fid_8h_source.html#l00414">lu_server_seq::lss_type</a>, <a class="el" href="lustre__fid_8h_source.html#l00345">LUSTRE_SEQ_CONTROLLER</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="fid__handler_8c.html#a2e15fef174e7ee583b171f681aab42ef">seq_fld_proc_seq_fops</a>, <a class="el" href="fid__handler_8c_source.html#l00488">seq_server_proc_fini()</a>, and <a class="el" href="fid__request_8c_source.html#l00569">seq_type_proc_dir</a>.</p>

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00501">seq_server_init()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a2e15fef174e7ee583b171f681aab42ef"></a><!-- doxytag: member="fid_handler.c::seq_fld_proc_seq_fops" ref="a2e15fef174e7ee583b171f681aab42ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="fid__handler_8c.html#a2e15fef174e7ee583b171f681aab42ef">seq_fld_proc_seq_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="fid__handler_8c_source.html#l00447">seq_server_proc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a07f2f8ac8a3382b06263dc9a2684eecf"></a><!-- doxytag: member="fid_handler.c::seq_handlers" ref="a07f2f8ac8a3382b06263dc9a2684eecf" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtgt__handler.html">tgt_handler</a> <a class="el" href="lu__target_8h.html#a07f2f8ac8a3382b06263dc9a2684eecf">seq_handlers</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
<a class="code" href="lu__target_8h.html#acf96f38f8b3e82c487ecca96f8125a75">TGT_SEQ_HDL</a>(<a class="code" href="lu__target_8h.html#aef39d10ae3bcbee70c80cd1fdadf8711a5cbf32b3be7eea8d5e71ff21c6882452">HABEO_REFERO</a>,       <a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a73c90cebc9ff49e5f90daf839aa4aaf6">SEQ_QUERY</a>,      <a class="code" href="fid__handler_8c.html#ab31958c317733024d414fcb6ff11b4bc">seq_handler</a>),
}
</pre></div>
<p>Definition at line <a class="el" href="fid__handler_8c_source.html#l00434">434</a> of file <a class="el" href="fid__handler_8c_source.html">fid_handler.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:46 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
