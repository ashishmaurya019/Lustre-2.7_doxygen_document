<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/obdclass/obd_mount.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/obdclass/obd_mount.c File Reference</h1><code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__user_8h_source.html">lustre/lustre_user.h</a>&gt;</code><br/>
<code>#include &lt;linux/version.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__disk_8h_source.html">lustre_disk.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__param_8h_source.html">lustre_param.h</a>&gt;</code><br/>

<p><a href="obd__mount_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlustre__mount__data2.html">lustre_mount_data2</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_CLASS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ad940a854236305adf1c9aacba8bc2d80">D_MOUNT</a>&nbsp;&nbsp;&nbsp;(D_SUPER|D_CONFIG/*|D_WARNING */)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a7d80704e7e66a738cb64543dd64d9d4a">PRINT_CMD</a>&nbsp;&nbsp;&nbsp;CDEBUG</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__log.html#gab379f30f30f88aebf9be8c61b7f55152">lustre_process_log</a> (struct super_block *sb, char *logname, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a config log from the MGS and process it.  <a href="group__log.html#gab379f30f30f88aebf9be8c61b7f55152"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__log.html#gae876fd8eccc7582b545d5e187e5b3e92">lustre_end_log</a> (struct super_block *sb, char *logname, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__param.html#ga017e1a43c87459a5697a96b4102018ca">do_lcfg</a> (char *cfgname, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid, int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, char *s1, char *s2, char *s3, char *s4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="structlustre__cfg__bufs.html">lustre_cfg_bufs</a> are a holdover from 1.4; we can still set these up from lctl (and do for echo cli/srv.  <a href="group__param.html#ga017e1a43c87459a5697a96b4102018ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ab2215d2dbc8df139482c887e00d3226f">lustre_start_simple</a> (char *obdname, char *type, char *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, char *s1, char *s2, char *s3, char *s4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call class_attach and class_setup.  <a href="#ab2215d2dbc8df139482c887e00d3226f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ac66a48121dd07b4946d03464393cbfa0">DEFINE_MUTEX</a> (mgc_start_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#acecf9ab0defaf08de537b20ac51dfcde">lustre_start_mgc</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set up a mgc obd to process startup logs.  <a href="#acecf9ab0defaf08de537b20ac51dfcde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a0c7615a0e0396e4f326ca722e8f45a7e">lustre_stop_mgc</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct lustre_sb_info *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#aa06daf861d475e68b820cff2a97f6012">lustre_init_lsi</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ad726df9a44796620a08260a5540f9ed6">lustre_free_lsi</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a1b56feb69b95d4f934433708e7757235">lustre_put_lsi</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a93e42e786caaa811d8b3cb1ddd45aaa8">server_name2fsname</a> (const char *svname, char *fsname, const char **endptr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the fsname ("lustre") from the server name ("lustre-OST003F").  <a href="#a93e42e786caaa811d8b3cb1ddd45aaa8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ae3a7cdd6425831cd40b1f52972f75e1f">server_name2svname</a> (const char *label, char *svname, const char **endptr, size_t svsize)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get service name (svname) from string rc &lt; 0 on error if endptr isn't NULL it is set to end of fsname *.  <a href="#ae3a7cdd6425831cd40b1f52972f75e1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ac571377102715cb0233282fe774f77d1">server_name_is_ost</a> (const char *svname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check server name is OST.  <a href="#ac571377102715cb0233282fe774f77d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a61dde88a36c94244efef6bb220540652">target_name2index</a> (const char *tgtname, __u32 *idx, const char **endptr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the index from the target name MDTXXXX/OSTXXXX rc = server type, or rc &lt; 0 on error.  <a href="#a61dde88a36c94244efef6bb220540652"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a2de68e08b86703a60d591bc665dada3b">server_name2index</a> (const char *svname, __u32 *idx, const char **endptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a10b2e81a5334c05e96a32d0323c3c806">lustre_common_put_super</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a0f1b34483327ad6300cf7b91f9df05dd">lmd_print</a> (struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *lmd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a8e02c45766282777eaabc13d6b079408">lustre_check_exclusion</a> (struct super_block *sb, char *svname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ac06de2ccdd6f4c1bc513480915b09090">lmd_make_exclusion</a> (struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *lmd, const char *ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a4ec63851a683e6b86e3d52af1e2d0866">lmd_parse_mgssec</a> (struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *lmd, char *ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a6a24041034e4621cc1ef960974f3adf8">lmd_parse_string</a> (char **handle, char *ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a4c2ccd4837626f8d29ae406ce082d67d">lmd_parse_mgs</a> (struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *lmd, char **ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a66a90e65eb6e03fc59b22cd5f3313db4">lmd_find_comma</a> (char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, char **endh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first comma delimiter from the specified <em>buf</em> and make <em>*endh</em> point to the string starting with the comma.  <a href="#a66a90e65eb6e03fc59b22cd5f3313db4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#ad0d7c01fe1f8d92ac3d2adb3e6be9051">lmd_parse_nidlist</a> (char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, char **endh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first valid string delimited by comma from the specified <em>buf</em> # and parse it to see whether it's a valid nid list.  <a href="#ad0d7c01fe1f8d92ac3d2adb3e6be9051"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a5990f48b2e1d514481cfac2bdd97f279">lmd_parse</a> (char *<a class="el" href="structoptions.html">options</a>, struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *lmd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse mount line <a class="el" href="structoptions.html">options</a> e.g.  <a href="#a5990f48b2e1d514481cfac2bdd97f279"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a8eb7c2936c215278a160f4e2038875e2">lustre_fill_super</a> (struct super_block *sb, void *data, int silent)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the entry point for the mount call into Lustre.  <a href="#a8eb7c2936c215278a160f4e2038875e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#afc5e3288eb4e49594ad26e616f7d886b">lustre_register_client_fill_super</a> (int(*cfs)(struct super_block *sb, struct vfsmount *mnt))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a6771c552fd72e2f0e5e5aa58c4dc6ce9">lustre_register_kill_super_cb</a> (void(*cfs)(struct super_block *sb))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#affde48f54db8b823f0c76eebf0ec2624">lustre_get_sb</a> (struct file_system_type *fs_type, int flags, const char *<a class="el" href="llverdev_8c.html#a48d51caca654a80a7ea9eb13c3ddbb7b">devname</a>, void *data, struct vfsmount *mnt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a25ef094ae693aaae00678c3eaab563ae">lustre_kill_super</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#accf8bf509525d146e8c4bfc07d11080a">MODULE_ALIAS_FS</a> (&quot;lustre&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a163c9760fb152b4bafaed87a71ace7a5">lustre_register_fs</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a5428713c3207c3619df0b5d3b1594082">lustre_unregister_fs</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a50f91f40098d0eb27693962e611b88c9">client_fill_super</a> )(struct super_block *sb, struct vfsmount *mnt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#abcbf5be7c98d6cb14a14f95c18c432dc">kill_super_cb</a> )(struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct file_system_type&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount_8c.html#a4d8778fea6f229f197393e646e714da4">lustre_fs_type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register the "lustre" fs type.  <a href="#a4d8778fea6f229f197393e646e714da4"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad940a854236305adf1c9aacba8bc2d80"></a><!-- doxytag: member="obd_mount.c::D_MOUNT" ref="ad940a854236305adf1c9aacba8bc2d80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D_MOUNT&nbsp;&nbsp;&nbsp;(D_SUPER|D_CONFIG/*|D_WARNING */)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00045">45</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l00896">lmd_make_exclusion()</a>, <a class="el" href="obd__mount_8c_source.html#l00842">lmd_print()</a>, <a class="el" href="obd__mount_8c_source.html#l00870">lustre_check_exclusion()</a>, <a class="el" href="obd__mount_8c_source.html#l00817">lustre_common_put_super()</a>, <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>, <a class="el" href="obd__mount_8c_source.html#l00594">lustre_free_lsi()</a>, <a class="el" href="obd__mount_8c_source.html#l00646">lustre_put_lsi()</a>, <a class="el" href="obd__mount_8c_source.html#l00217">lustre_start_mgc()</a>, <a class="el" href="obd__mount_8c_source.html#l00190">lustre_start_simple()</a>, <a class="el" href="obd__mount_8c_source.html#l00492">lustre_stop_mgc()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01723">osd_start()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00131">server_deregister_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01689">server_fill_super_common()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00157">server_get_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00314">server_mgc_clear_fs()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00295">server_mgc_set_fs()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00193">server_put_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00092">server_register_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01166">server_register_target()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00266">server_stop_mgs()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01606">server_umount_begin()</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="obd_mount.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_CLASS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00044">44</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7d80704e7e66a738cb64543dd64d9d4a"></a><!-- doxytag: member="obd_mount.c::PRINT_CMD" ref="a7d80704e7e66a738cb64543dd64d9d4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRINT_CMD&nbsp;&nbsp;&nbsp;CDEBUG</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00046">46</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l00842">lmd_print()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01081">server_mti_print()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac66a48121dd07b4946d03464393cbfa0"></a><!-- doxytag: member="obd_mount.c::DEFINE_MUTEX" ref="ac66a48121dd07b4946d03464393cbfa0" args="(mgc_start_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DEFINE_MUTEX </td>
          <td>(</td>
          <td class="paramtype">mgc_start_lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a66a90e65eb6e03fc59b22cd5f3313db4"></a><!-- doxytag: member="obd_mount.c::lmd_find_comma" ref="a66a90e65eb6e03fc59b22cd5f3313db4" args="(char *buf, char **endh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_find_comma </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>endh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the first comma delimiter from the specified <em>buf</em> and make <em>*endh</em> point to the string starting with the comma. </p>
<p>The commas in expression list [...] will be skipped.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>a comma-separated string </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>endh</em>&nbsp;</td><td>a pointer to a pointer that will point to the string starting with the comma</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if comma delimiter is found </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>if comma delimiter is not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01057">1057</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>, and <a class="el" href="obd__mount_8c_source.html#l01095">lmd_parse_nidlist()</a>.</p>

</div>
</div>
<a class="anchor" id="ac06de2ccdd6f4c1bc513480915b09090"></a><!-- doxytag: member="obd_mount.c::lmd_make_exclusion" ref="ac06de2ccdd6f4c1bc513480915b09090" args="(struct lustre_mount_data *lmd, const char *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_make_exclusion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00896">896</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>, <a class="el" href="lustre__disk_8h_source.html#l00235">lustre_mount_data::lmd_exclude</a>, <a class="el" href="lustre__disk_8h_source.html#l00225">lustre_mount_data::lmd_exclude_count</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="a5990f48b2e1d514481cfac2bdd97f279"></a><!-- doxytag: member="obd_mount.c::lmd_parse" ref="a5990f48b2e1d514481cfac2bdd97f279" args="(char *options, struct lustre_mount_data *lmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_parse </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lmd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parse mount line <a class="el" href="structoptions.html">options</a> e.g. </p>
<p>mount -v -t lustre -o abort_recov uml1:uml2:/lustre-client /mnt/lustre dev is passed as device=uml1:/lustre by mount.lustre </p>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01132">1132</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="llverdev_8c_source.html#l00112">devname</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="lustre__disk_8h_source.html#l00228">lustre_mount_data::lmd_dev</a>, <a class="el" href="lustre__disk_8h_source.html#l00230">lustre_mount_data::lmd_fileset</a>, <a class="el" href="obd__mount_8c_source.html#l01057">lmd_find_comma()</a>, <a class="el" href="lustre__disk_8h_source.html#l00223">lustre_mount_data::lmd_flags</a>, <a class="el" href="lustre__disk_8h_source.html#l00243">LMD_FLG_ABORT_RECOV</a>, <a class="el" href="lustre__disk_8h_source.html#l00241">LMD_FLG_CLIENT</a>, <a class="el" href="lustre__disk_8h_source.html#l00251">LMD_FLG_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00253">LMD_FLG_NO_PRIMNODE</a>, <a class="el" href="lustre__disk_8h_source.html#l00249">LMD_FLG_NOIR</a>, <a class="el" href="lustre__disk_8h_source.html#l00246">LMD_FLG_NOMGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00250">LMD_FLG_NOSCRUB</a>, <a class="el" href="lustre__disk_8h_source.html#l00244">LMD_FLG_NOSVC</a>, <a class="el" href="lustre__disk_8h_source.html#l00242">LMD_FLG_SKIP_LFSCK</a>, <a class="el" href="lustre__disk_8h_source.html#l00255">LMD_FLG_UPDATE</a>, <a class="el" href="lustre__disk_8h_source.html#l00254">LMD_FLG_VIRGIN</a>, <a class="el" href="lustre__disk_8h_source.html#l00248">LMD_FLG_WRITECONF</a>, <a class="el" href="lustre__disk_8h_source.html#l00217">LMD_MAGIC</a>, <a class="el" href="lustre__disk_8h_source.html#l00222">lustre_mount_data::lmd_magic</a>, <a class="el" href="obd__mount_8c_source.html#l00896">lmd_make_exclusion()</a>, <a class="el" href="lustre__disk_8h_source.html#l00232">lustre_mount_data::lmd_opts</a>, <a class="el" href="lustre__disk_8h_source.html#l00237">lustre_mount_data::lmd_osd_type</a>, <a class="el" href="lustre__disk_8h_source.html#l00234">lustre_mount_data::lmd_params</a>, <a class="el" href="lustre__disk_8h_source.html#l00218">LMD_PARAMS_MAXLEN</a>, <a class="el" href="obd__mount_8c_source.html#l01008">lmd_parse_mgs()</a>, <a class="el" href="obd__mount_8c_source.html#l00953">lmd_parse_mgssec()</a>, <a class="el" href="obd__mount_8c_source.html#l01095">lmd_parse_nidlist()</a>, <a class="el" href="obd__mount_8c_source.html#l00978">lmd_parse_string()</a>, <a class="el" href="obd__mount_8c_source.html#l00842">lmd_print()</a>, <a class="el" href="lustre__disk_8h_source.html#l00229">lustre_mount_data::lmd_profile</a>, <a class="el" href="lustre__disk_8h_source.html#l00227">lustre_mount_data::lmd_recovery_time_hard</a>, <a class="el" href="lustre__disk_8h_source.html#l00226">lustre_mount_data::lmd_recovery_time_soft</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00145">OBD_RECOVERY_TIME_MIN</a>, <a class="el" href="lustre__param_8h_source.html#l00098">PARAM_MGSNODE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="string_8c_source.html#l00072">strlcat()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c2ccd4837626f8d29ae406ce082d67d"></a><!-- doxytag: member="obd_mount.c::lmd_parse_mgs" ref="a4c2ccd4837626f8d29ae406ce082d67d" args="(struct lustre_mount_data *lmd, char **ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_parse_mgs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01008">1008</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__config_8c_source.html#l00281">class_parse_nid_quiet()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="lustre__disk_8h_source.html#l00236">lustre_mount_data::lmd_mgs</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ec63851a683e6b86e3d52af1e2d0866"></a><!-- doxytag: member="obd_mount.c::lmd_parse_mgssec" ref="a4ec63851a683e6b86e3d52af1e2d0866" args="(struct lustre_mount_data *lmd, char *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_parse_mgssec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00953">953</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="lustre__disk_8h_source.html#l00231">lustre_mount_data::lmd_mgssec</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0d7c01fe1f8d92ac3d2adb3e6be9051"></a><!-- doxytag: member="obd_mount.c::lmd_parse_nidlist" ref="ad0d7c01fe1f8d92ac3d2adb3e6be9051" args="(char *buf, char **endh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_parse_nidlist </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>endh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the first valid string delimited by comma from the specified <em>buf</em> # and parse it to see whether it's a valid nid list. </p>
<p>If yes, <em>*endh</em> will point to the next string starting with the comma.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>a comma-separated string </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>endh</em>&nbsp;</td><td>a pointer to a pointer that will point to the string starting with the comma</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the string is a valid nid list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>if the string is not a valid nid list </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01095">1095</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="lnet_2lnet_2nidstrings_8c_source.html#l00305">cfs_free_nidlist()</a>, <a class="el" href="lnet_2lnet_2nidstrings_8c_source.html#l00333">cfs_parse_nidlist()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, and <a class="el" href="obd__mount_8c_source.html#l01057">lmd_find_comma()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a24041034e4621cc1ef960974f3adf8"></a><!-- doxytag: member="obd_mount.c::lmd_parse_string" ref="a6a24041034e4621cc1ef960974f3adf8" args="(char **handle, char *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmd_parse_string </td>
          <td>(</td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00978">978</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f1b34483327ad6300cf7b91f9df05dd"></a><!-- doxytag: member="obd_mount.c::lmd_print" ref="a0f1b34483327ad6300cf7b91f9df05dd" args="(struct lustre_mount_data *lmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lmd_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__mount__data.html">lustre_mount_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lmd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00842">842</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="lustre__disk_8h_source.html#l00228">lustre_mount_data::lmd_dev</a>, <a class="el" href="lustre__disk_8h_source.html#l00235">lustre_mount_data::lmd_exclude</a>, <a class="el" href="lustre__disk_8h_source.html#l00225">lustre_mount_data::lmd_exclude_count</a>, <a class="el" href="lustre__disk_8h_source.html#l00223">lustre_mount_data::lmd_flags</a>, <a class="el" href="lustre__disk_8h_source.html#l00258">lmd_is_client</a>, <a class="el" href="lustre__disk_8h_source.html#l00232">lustre_mount_data::lmd_opts</a>, <a class="el" href="lustre__disk_8h_source.html#l00229">lustre_mount_data::lmd_profile</a>, <a class="el" href="lustre__disk_8h_source.html#l00227">lustre_mount_data::lmd_recovery_time_hard</a>, <a class="el" href="lustre__disk_8h_source.html#l00226">lustre_mount_data::lmd_recovery_time_soft</a>, and <a class="el" href="obd__mount_8c_source.html#l00046">PRINT_CMD</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e02c45766282777eaabc13d6b079408"></a><!-- doxytag: member="obd_mount.c::lustre_check_exclusion" ref="a8e02c45766282777eaabc13d6b079408" args="(struct super_block *sb, char *svname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_check_exclusion </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>svname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00870">870</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>, <a class="el" href="lustre__disk_8h_source.html#l00228">lustre_mount_data::lmd_dev</a>, <a class="el" href="lustre__disk_8h_source.html#l00235">lustre_mount_data::lmd_exclude</a>, <a class="el" href="lustre__disk_8h_source.html#l00225">lustre_mount_data::lmd_exclude_count</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>.</p>

<p>Referenced by <a class="el" href="obd__config_8c_source.html#l01451">class_config_llog_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a10b2e81a5334c05e96a32d0323c3c806"></a><!-- doxytag: member="obd_mount.c::lustre_common_put_super" ref="a10b2e81a5334c05e96a32d0323c3c806" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_common_put_super </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00817">817</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd__mount_8c_source.html#l00646">lustre_put_lsi()</a>, <a class="el" href="obd__mount_8c_source.html#l00492">lustre_stop_mgc()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="llite__lib_8c_source.html#l01099">ll_put_super()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a8eb7c2936c215278a160f4e2038875e2"></a><!-- doxytag: member="obd_mount.c::lustre_fill_super" ref="a8eb7c2936c215278a160f4e2038875e2" args="(struct super_block *sb, void *data, int silent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_fill_super </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>silent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is the entry point for the mount call into Lustre. </p>
<p>This is called when a server or client is mounted, and this is where we start setting things up. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Mount <a class="el" href="structoptions.html">options</a> (e.g. -o flock,abort_recov) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01376">1376</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c.html#a50f91f40098d0eb27693962e611b88c9">client_fill_super</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00131">D_SUPER</a>, <a class="el" href="libcfs__debug_8h_source.html#l00150">D_VFSTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="obd__mount_8c_source.html#l01367">lustre_mount_data2::lmd2_data</a>, <a class="el" href="obd__mount_8c_source.html#l01368">lustre_mount_data2::lmd2_mnt</a>, <a class="el" href="lustre__disk_8h_source.html#l00228">lustre_mount_data::lmd_dev</a>, <a class="el" href="lustre__disk_8h_source.html#l00258">lmd_is_client</a>, <a class="el" href="obd__mount_8c_source.html#l01132">lmd_parse()</a>, <a class="el" href="lustre__disk_8h_source.html#l00229">lustre_mount_data::lmd_profile</a>, <a class="el" href="obd__mount_8c_source.html#l00565">lustre_init_lsi()</a>, <a class="el" href="obd__mount_8c_source.html#l00646">lustre_put_lsi()</a>, <a class="el" href="obd__mount_8c_source.html#l00217">lustre_start_mgc()</a>, <a class="el" href="genops_8c_source.html#l01745">obd_zombie_barrier()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01485">lustre_get_sb()</a>.</p>

</div>
</div>
<a class="anchor" id="ad726df9a44796620a08260a5540f9ed6"></a><!-- doxytag: member="obd_mount.c::lustre_free_lsi" ref="ad726df9a44796620a08260a5540f9ed6" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_free_lsi </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00594">594</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l00646">lustre_put_lsi()</a>.</p>

</div>
</div>
<a class="anchor" id="affde48f54db8b823f0c76eebf0ec2624"></a><!-- doxytag: member="obd_mount.c::lustre_get_sb" ref="affde48f54db8b823f0c76eebf0ec2624" args="(struct file_system_type *fs_type, int flags, const char *devname, void *data, struct vfsmount *mnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_get_sb </td>
          <td>(</td>
          <td class="paramtype">struct file_system_type *&nbsp;</td>
          <td class="paramname"> <em>fs_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>devname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vfsmount *&nbsp;</td>
          <td class="paramname"> <em>mnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01485">1485</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="aa06daf861d475e68b820cff2a97f6012"></a><!-- doxytag: member="obd_mount.c::lustre_init_lsi" ref="aa06daf861d475e68b820cff2a97f6012" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct lustre_sb_info* lustre_init_lsi </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00565">565</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a25ef094ae693aaae00678c3eaab563ae"></a><!-- doxytag: member="obd_mount.c::lustre_kill_super" ref="a25ef094ae693aaae00678c3eaab563ae" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lustre_kill_super </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01494">1494</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, and <a class="el" href="obd__mount_8c.html#abcbf5be7c98d6cb14a14f95c18c432dc">kill_super_cb</a>.</p>

</div>
</div>
<a class="anchor" id="a1b56feb69b95d4f934433708e7757235"></a><!-- doxytag: member="obd_mount.c::lustre_put_lsi" ref="a1b56feb69b95d4f934433708e7757235" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_put_lsi </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00646">646</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8c_source.html#l01190">lu_device_put()</a>, <a class="el" href="obd__mount_8c_source.html#l00594">lustre_free_lsi()</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="genops_8c_source.html#l01745">obd_zombie_barrier()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l00817">lustre_common_put_super()</a>, <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00193">server_put_mount()</a>.</p>

</div>
</div>
<a class="anchor" id="afc5e3288eb4e49594ad26e616f7d886b"></a><!-- doxytag: member="obd_mount.c::lustre_register_client_fill_super" ref="afc5e3288eb4e49594ad26e616f7d886b" args="(int(*cfs)(struct super_block *sb, struct vfsmount *mnt))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_register_client_fill_super </td>
          <td>(</td>
          <td class="paramtype">int(*)(struct super_block *sb, struct vfsmount *mnt)&nbsp;</td>
          <td class="paramname"> <em>cfs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01462">1462</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__mount_8c.html#a50f91f40098d0eb27693962e611b88c9">client_fill_super</a>.</p>

<p>Referenced by <a class="el" href="super25_8c_source.html#l00213">lustre_exit()</a>, and <a class="el" href="super25_8c_source.html#l00105">lustre_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a163c9760fb152b4bafaed87a71ace7a5"></a><!-- doxytag: member="obd_mount.c::lustre_register_fs" ref="a163c9760fb152b4bafaed87a71ace7a5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_register_fs </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01519">1519</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>Referenced by <a class="el" href="class__obd_8c_source.html#l00495">obdclass_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a6771c552fd72e2f0e5e5aa58c4dc6ce9"></a><!-- doxytag: member="obd_mount.c::lustre_register_kill_super_cb" ref="a6771c552fd72e2f0e5e5aa58c4dc6ce9" args="(void(*cfs)(struct super_block *sb))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_register_kill_super_cb </td>
          <td>(</td>
          <td class="paramtype">void(*)(struct super_block *sb)&nbsp;</td>
          <td class="paramname"> <em>cfs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01469">1469</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__mount_8c.html#abcbf5be7c98d6cb14a14f95c18c432dc">kill_super_cb</a>.</p>

<p>Referenced by <a class="el" href="super25_8c_source.html#l00213">lustre_exit()</a>, and <a class="el" href="super25_8c_source.html#l00105">lustre_init()</a>.</p>

</div>
</div>
<a class="anchor" id="acecf9ab0defaf08de537b20ac51dfcde"></a><!-- doxytag: member="obd_mount.c::lustre_start_mgc" ref="acecf9ab0defaf08de537b20ac51dfcde" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_start_mgc </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set up a mgc obd to process startup logs. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sb</em>&nbsp;</td><td>[in] super block of the mgc obd</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success, otherwise error code </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00217">217</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd_8h_source.html#l00308">client_obd::cl_mgc_refcount</a>, <a class="el" href="obd__config_8c_source.html#l00063">class_find_param()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd__config_8c_source.html#l00275">class_parse_nid()</a>, <a class="el" href="obd__config_8c_source.html#l00281">class_parse_nid_quiet()</a>, <a class="el" href="uuid_8c_source.html#l00070">class_uuid_unparse()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="obd__mount_8c_source.html#l00158">do_lcfg()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00187">IS_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="obd_8h_source.html#l00741">KEY_CONN_DATA</a>, <a class="el" href="obd_8h_source.html#l00747">KEY_INIT_RECOV_BACKUP</a>, <a class="el" href="obd_8h_source.html#l00753">KEY_MGSSEC</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00082">LCFG_ADD_CONN</a>, <a class="el" href="lustre__cfg_8h_source.html#l00076">LCFG_ADD_UUID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lnet_2lnet_2nidstrings_8c_source.html#l01127">libcfs_nid2str_r()</a>, <a class="el" href="obd__class_8h_source.html#l01712">ll_generate_random_uuid</a>, <a class="el" href="lustre__disk_8h_source.html#l00249">LMD_FLG_NOIR</a>, <a class="el" href="lustre__disk_8h_source.html#l00258">lmd_is_client</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00105">LNET_NETTYP()</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00090">LNET_NIDNET()</a>, <a class="el" href="nidstr_8h_source.html#l00057">LNET_NIDSTR_SIZE</a>, <a class="el" href="api-ni_8c_source.html#l02129">LNetGetId()</a>, <a class="el" href="nidstr_8h_source.html#l00046">LOLND</a>, <a class="el" href="obd_8h_source.html#l00466">LUSTRE_MGC_NAME</a>, <a class="el" href="obd_8h_source.html#l00476">LUSTRE_MGC_OBDNAME</a>, <a class="el" href="obd_8h_source.html#l00475">LUSTRE_MGS_OBDNAME</a>, <a class="el" href="obd__mount_8c_source.html#l00190">lustre_start_simple()</a>, <a class="el" href="lustre__ver_8h_source.html#l00023">LUSTRE_VERSION_CODE</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00796">obd_connect()</a>, <a class="el" href="lustre__idl_8h_source.html#l01207">OBD_CONNECT_AT</a>, <a class="el" href="lustre__idl_8h_source.html#l01250">OBD_CONNECT_BULK_MBITS</a>, <a class="el" href="lustre__idl_8h_source.html#l01219">OBD_CONNECT_FULL20</a>, <a class="el" href="lustre__idl_8h_source.html#l01224">OBD_CONNECT_IMP_RECOV</a>, <a class="el" href="lustre__idl_8h_source.html#l01233">OBD_CONNECT_LVB_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l01266">OBD_CONNECT_MNE_SWAB</a>, <a class="el" href="lustre__idl_8h_source.html#l01184">OBD_CONNECT_VERSION</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00505">obd_get_info()</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_stopping</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01268">OCD_HAS_FLAG</a>, <a class="el" href="lustre__idl_8h_source.html#l01337">obd_connect_data::ocd_version</a>, <a class="el" href="lustre__param_8h_source.html#l00098">PARAM_MGSNODE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2215d2dbc8df139482c887e00d3226f"></a><!-- doxytag: member="obd_mount.c::lustre_start_simple" ref="ab2215d2dbc8df139482c887e00d3226f" args="(char *obdname, char *type, char *uuid, char *s1, char *s2, char *s3, char *s4)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_start_simple </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>obdname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s4</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Call class_attach and class_setup. </p>
<p>These methods in turn call obd type-specific methods. </p>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00190">190</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="obd__mount_8c_source.html#l00158">do_lcfg()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00072">LCFG_ATTACH</a>, <a class="el" href="lustre__cfg_8h_source.html#l00073">LCFG_DETACH</a>, and <a class="el" href="lustre__cfg_8h_source.html#l00074">LCFG_SETUP</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00619">lustre_lwp_setup()</a>, <a class="el" href="obd__mount_8c_source.html#l00217">lustre_start_mgc()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01723">osd_start()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00224">server_start_mgs()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c7615a0e0396e4f326ca722e8f45a7e"></a><!-- doxytag: member="obd_mount.c::lustre_stop_mgc" ref="a0c7615a0e0396e4f326ca722e8f45a7e" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_stop_mgc </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00492">492</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd_8h_source.html#l00308">client_obd::cl_mgc_refcount</a>, <a class="el" href="obd__config_8c_source.html#l01909">class_manual_cleanup()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="obd__mount_8c_source.html#l00158">do_lcfg()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00077">LCFG_DEL_UUID</a>, <a class="el" href="obd_8h_source.html#l00476">LUSTRE_MGC_OBDNAME</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_no_recov</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l00817">lustre_common_put_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a5428713c3207c3619df0b5d3b1594082"></a><!-- doxytag: member="obd_mount.c::lustre_unregister_fs" ref="a5428713c3207c3619df0b5d3b1594082" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_unregister_fs </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01524">1524</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>Referenced by <a class="el" href="class__obd_8c_source.html#l00610">obdclass_exit()</a>.</p>

</div>
</div>
<a class="anchor" id="accf8bf509525d146e8c4bfc07d11080a"></a><!-- doxytag: member="obd_mount.c::MODULE_ALIAS_FS" ref="accf8bf509525d146e8c4bfc07d11080a" args="(&quot;lustre&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_ALIAS_FS </td>
          <td>(</td>
          <td class="paramtype">&quot;lustre&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a93e42e786caaa811d8b3cb1ddd45aaa8"></a><!-- doxytag: member="obd_mount.c::server_name2fsname" ref="a93e42e786caaa811d8b3cb1ddd45aaa8" args="(const char *svname, char *fsname, const char **endptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_name2fsname </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>svname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fsname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>endptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the fsname ("lustre") from the server name ("lustre-OST003F"). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svname</em>&nbsp;</td><td>server name including type and index </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>fsname</em>&nbsp;</td><td>Buffer to copy filesystem name prefix into. Must have at least 'strlen(fsname) + 1' chars. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>endptr</em>&nbsp;</td><td>if endptr isn't NULL it is set to end of fsname rc &lt; 0 on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00685">685</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="lnet_2utils_2wirecheck_8c_source.html#l00051">strnlen</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00890">lustre_disconnect_lwp()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00476">lustre_find_lwp_by_index()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01000">lustre_start_lwp()</a>, <a class="el" href="mgs__llog_8c_source.html#l01128">mgs_parse_devname()</a>, <a class="el" href="qsd__lib_8c_source.html#l00557">qsd_init()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01093">server_lsi2mti()</a>, <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>, <a class="el" href="obd__mount_8c_source.html#l00712">server_name2svname()</a>, <a class="el" href="obd__mount_8c_source.html#l00736">server_name_is_ost()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00349">tgt_name2lwp_name()</a>.</p>

</div>
</div>
<a class="anchor" id="a2de68e08b86703a60d591bc665dada3b"></a><!-- doxytag: member="obd_mount.c::server_name2index" ref="a2de68e08b86703a60d591bc665dada3b" args="(const char *svname, __u32 *idx, const char **endptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_name2index </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>svname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>endptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00790">790</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00460">LUSTRE_MDC_NAME</a>, <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>, and <a class="el" href="obd__mount_8c_source.html#l00758">target_name2index()</a>.</p>

<p>Referenced by <a class="el" href="obd__config_8c_source.html#l01451">class_config_llog_handler()</a>, <a class="el" href="obd__mount_8c_source.html#l00896">lmd_make_exclusion()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01423">lsi_prepare()</a>, <a class="el" href="obd__mount_8c_source.html#l00870">lustre_check_exclusion()</a>, <a class="el" href="mgs__llog_8c_source.html#l00161">mgs_fsdb_handler()</a>, <a class="el" href="mgs__llog_8c_source.html#l01128">mgs_parse_devname()</a>, <a class="el" href="mgs__llog_8c_source.html#l03970">mgs_setparam()</a>, <a class="el" href="mgs__llog_8c_source.html#l03258">mgs_write_log_param()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l06404">osd_device_init0()</a>, <a class="el" href="qsd__lib_8c_source.html#l00557">qsd_init()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01093">server_lsi2mti()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00336">tgt_is_mdt()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">tgt_server_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3a7cdd6425831cd40b1f52972f75e1f"></a><!-- doxytag: member="obd_mount.c::server_name2svname" ref="ae3a7cdd6425831cd40b1f52972f75e1f" args="(const char *label, char *svname, const char **endptr, size_t svsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_name2svname </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>svname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>endptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>svsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get service name (svname) from string rc &lt; 0 on error if endptr isn't NULL it is set to end of fsname *. </p>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00712">712</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01329">mgc_apply_recover_logs()</a>.</p>

</div>
</div>
<a class="anchor" id="ac571377102715cb0233282fe774f77d1"></a><!-- doxytag: member="obd_mount.c::server_name_is_ost" ref="ac571377102715cb0233282fe774f77d1" args="(const char *svname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_name_is_ost </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>svname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check server name is OST. </p>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00736">736</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__handler_8c_source.html#l00947">osd_mount()</a>.</p>

</div>
</div>
<a class="anchor" id="a61dde88a36c94244efef6bb220540652"></a><!-- doxytag: member="obd_mount.c::target_name2index" ref="a61dde88a36c94244efef6bb220540652" args="(const char *tgtname, __u32 *idx, const char **endptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int target_name2index </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tgtname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>endptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the index from the target name MDTXXXX/OSTXXXX rc = server type, or rc &lt; 0 on error. </p>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l00758">758</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

<p>References <a class="el" href="lustre__disk_8h_source.html#l00086">LDD_F_SV_ALL</a>, <a class="el" href="lustre__disk_8h_source.html#l00080">LDD_F_SV_TYPE_MDT</a>, and <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>.</p>

<p>Referenced by <a class="el" href="fld__handler_8c_source.html#l00110">fld_name_to_index()</a>, and <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a50f91f40098d0eb27693962e611b88c9"></a><!-- doxytag: member="obd_mount.c::client_fill_super" ref="a50f91f40098d0eb27693962e611b88c9" args=")(struct super_block *sb, struct vfsmount *mnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* <a class="el" href="obd__mount_8c.html#a50f91f40098d0eb27693962e611b88c9">client_fill_super</a>)(struct super_block *sb, struct vfsmount *mnt)<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>, and <a class="el" href="obd__mount_8c_source.html#l01462">lustre_register_client_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="abcbf5be7c98d6cb14a14f95c18c432dc"></a><!-- doxytag: member="obd_mount.c::kill_super_cb" ref="abcbf5be7c98d6cb14a14f95c18c432dc" args=")(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="obd__mount_8c.html#abcbf5be7c98d6cb14a14f95c18c432dc">kill_super_cb</a>)(struct super_block *sb)<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01494">lustre_kill_super()</a>, and <a class="el" href="obd__mount_8c_source.html#l01469">lustre_register_kill_super_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d8778fea6f229f197393e646e714da4"></a><!-- doxytag: member="obd_mount.c::lustre_fs_type" ref="a4d8778fea6f229f197393e646e714da4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_system_type <a class="el" href="obd__mount_8c.html#a4d8778fea6f229f197393e646e714da4">lustre_fs_type</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .owner        = THIS_MODULE,
        .name         = <span class="stringliteral">&quot;lustre&quot;</span>,



        .get_sb       = <a class="code" href="obd__mount_8c.html#affde48f54db8b823f0c76eebf0ec2624">lustre_get_sb</a>,

        .kill_sb      = <a class="code" href="obd__mount_8c.html#a25ef094ae693aaae00678c3eaab563ae">lustre_kill_super</a>,
        .fs_flags     = FS_REQUIRES_DEV | <a class="code" href="lustre__compat_8h.html#afc739368a43ab8f27101616387cf817b">FS_HAS_FIEMAP</a> | FS_RENAME_DOES_D_MOVE,
}
</pre></div>
<p>Register the "lustre" fs type. </p>

<p>Definition at line <a class="el" href="obd__mount_8c_source.html#l01506">1506</a> of file <a class="el" href="obd__mount_8c_source.html">obd_mount.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
