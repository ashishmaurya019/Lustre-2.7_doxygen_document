<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lib</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lib</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structl__wait__info.html">l_wait_info</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga69a4bdb69d1ddb62665b4b936e4b37ea">LWI_ON_SIGNAL_NOOP</a>&nbsp;&nbsp;&nbsp;((void (*)(void *))(-1))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga2c8a9c91f1f21e7ff21abedc365140f9">LWI_TIMEOUT</a>(time, cb, data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga551c4c576557c71d5d420704bc9206b0">LWI_TIMEOUT_INTERVAL</a>(time, interval, cb, data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga62c286be2c5fae04dc329e2d67ece19b">LWI_TIMEOUT_INTR</a>(time, time_cb, sig_cb, data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gab5290ac11914c764f80117e25f3926ce">LWI_TIMEOUT_INTR_ALL</a>(time, time_cb, sig_cb, data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gab125226712d6a6cb7eaf8833b5c8565e">LWI_INTR</a>(cb, data)&nbsp;&nbsp;&nbsp;LWI_TIMEOUT_INTR(0, NULL, cb, data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga7d2f4808ef9f41663e1e40bf527c4509">LUSTRE_FATAL_SIGS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gafa8e2750e27464c8a43db62e9ff969e6">add_wait_queue_exclusive_head</a>(waitq, link)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wait_queue_t of Linux (version &lt; 2.6.34) is a FIFO list for exclusively waiting threads, which is not always desirable because all threads will be waken up again and again, even user only needs a few of them to be active most time.  <a href="#gafa8e2750e27464c8a43db62e9ff969e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga6ceb1ccb9463c4f21b22382207cc4c7d">__l_wait_event</a>(wq, condition, info, <a class="el" href="utils_2wiretest_8c.html#a6baa346e44f4c2158d2be4f9b77b8203">ret</a>, l_add_wait)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga277da3a4d12da2eb0be28a20ba56d900">l_wait_event</a>(wq, condition, info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gaf2dfb2fca671ff2c1156e18582d2bd03">l_wait_event_exclusive</a>(wq, condition, info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga44238bd6042bb29adc0735ba6efc808f">l_wait_event_exclusive_head</a>(wq, condition, info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga6070101353394203e1505e9bb2e32413">l_wait_condition</a>(wq, condition)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga5e071607217fbdc689a9c6c84e529df1">l_wait_condition_exclusive</a>(wq, condition)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gaca146888178fcc6e639dd359eede62de">l_wait_condition_exclusive_head</a>(wq, condition)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gafdb6e70a2f301ef0c9e594f8871d9b40">target_pack_pool_reply</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Packs current SLV and Limit into <em>req</em>.  <a href="#gafdb6e70a2f301ef0c9e594f8871d9b40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gafc5cf9a5b2924b90734e720301742315">do_set_info_async</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp, int opcode, int <a class="el" href="mount__lustre_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>, size_t keylen, void *key, size_t vallen, void *val, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a remote set_info_async.  <a href="#gafc5cf9a5b2924b90734e720301742315"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga85f5aad1f6441ed3a0d44b17c6b99c7b">target_send_reply</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int rc, int fail_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#gab24c6fe5b65e802c446d53e3ad5c35ac">back_to_sleep</a> (void *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lib.html#ga56cbf240288b641ac8be1803d9d072ec">__add_wait_queue_exclusive</a> (wait_queue_head_t *q, wait_queue_t *wait)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga6ceb1ccb9463c4f21b22382207cc4c7d"></a><!-- doxytag: member="lustre_lib.h::__l_wait_event" ref="ga6ceb1ccb9463c4f21b22382207cc4c7d" args="(wq, condition, info, ret, l_add_wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __l_wait_event</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">info, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="utils_2wiretest_8c.html#a6baa346e44f4c2158d2be4f9b77b8203">ret</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">l_add_wait&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00253">253</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafa8e2750e27464c8a43db62e9ff969e6"></a><!-- doxytag: member="lustre_lib.h::add_wait_queue_exclusive_head" ref="gafa8e2750e27464c8a43db62e9ff969e6" args="(waitq, link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define add_wait_queue_exclusive_head</td>
          <td>(</td>
          <td class="paramtype">waitq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">link&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{                                                               \
        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;                                    \
                                                                \
        spin_lock_irqsave(&amp;((waitq)-&gt;lock), flags);             \
        <a class="code" href="group__lib.html#ga56cbf240288b641ac8be1803d9d072ec">__add_wait_queue_exclusive</a>(waitq, link);                \
        spin_unlock_irqrestore(&amp;((waitq)-&gt;lock), flags);        \
}
</pre></div>
<p>wait_queue_t of Linux (version &lt; 2.6.34) is a FIFO list for exclusively waiting threads, which is not always desirable because all threads will be waken up again and again, even user only needs a few of them to be active most time. </p>
<p>This is not good for performance because cache can be polluted by different threads.</p>
<p>LIFO list can resolve this problem because we always wakeup the most recent active thread by default.</p>
<p>NB: please don't call non-exclusive &amp; exclusive wait on the same waitq if add_wait_queue_exclusive_head is used. </p>

<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00240">240</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6070101353394203e1505e9bb2e32413"></a><!-- doxytag: member="lustre_lib.h::l_wait_condition" ref="ga6070101353394203e1505e9bb2e32413" args="(wq, condition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_wait_condition</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a> lwi = { 0 };                         \
        <a class="code" href="group__lib.html#ga277da3a4d12da2eb0be28a20ba56d900">l_wait_event</a>(wq, condition, &amp;lwi);                      \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00359">359</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02578">ptlrpc_hr_main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5e071607217fbdc689a9c6c84e529df1"></a><!-- doxytag: member="lustre_lib.h::l_wait_condition_exclusive" ref="ga5e071607217fbdc689a9c6c84e529df1" args="(wq, condition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_wait_condition_exclusive</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a> lwi = { 0 };                         \
        <a class="code" href="group__lib.html#gaf2dfb2fca671ff2c1156e18582d2bd03">l_wait_event_exclusive</a>(wq, condition, &amp;lwi);            \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00365">365</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaca146888178fcc6e639dd359eede62de"></a><!-- doxytag: member="lustre_lib.h::l_wait_condition_exclusive_head" ref="gaca146888178fcc6e639dd359eede62de" args="(wq, condition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_wait_condition_exclusive_head</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a> lwi = { 0 };                         \
        <a class="code" href="group__lib.html#ga44238bd6042bb29adc0735ba6efc808f">l_wait_event_exclusive_head</a>(wq, condition, &amp;lwi);       \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00371">371</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga277da3a4d12da2eb0be28a20ba56d900"></a><!-- doxytag: member="lustre_lib.h::l_wait_event" ref="ga277da3a4d12da2eb0be28a20ba56d900" args="(wq, condition, info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_wait_event</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">info&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keywordtype">int</span>                 __ret;                              \
        <span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a> *__info = (info);                    \
                                                                \
        <a class="code" href="group__lib.html#ga6ceb1ccb9463c4f21b22382207cc4c7d">__l_wait_event</a>(wq, condition, __info,                   \
                       __ret, add_wait_queue);                  \
        __ret;                                                  \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00329">329</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="cl__io_8c_source.html#l01221">cl_sync_io_wait()</a>, <a class="el" href="update__trans_8c_source.html#l01544">distribute_txn_commit_thread()</a>, <a class="el" href="update__trans_8c_source.html#l01681">distribute_txn_init()</a>, <a class="el" href="osd__scrub_8c_source.html#l02377">do_osd_scrub_start()</a>, <a class="el" href="osd__scrub_8c_source.html#l02455">do_osd_scrub_stop()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02531">lfsck_checkpoint_generic()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01857">lfsck_control_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01874">lfsck_control_speed_by_self()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00617">lfsck_double_scan()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02580">lfsck_double_scan_generic()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04094">lfsck_namespace_exec_dir()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02551">lfsck_post_generic()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02613">lfsck_quit_generic()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02484">lfsck_start_assistant()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>, <a class="el" href="statahead_8c_source.html#l00868">ll_agl_thread()</a>, <a class="el" href="llite__lib_8c_source.html#l01099">ll_put_super()</a>, <a class="el" href="statahead_8c_source.html#l00940">ll_start_agl()</a>, <a class="el" href="statahead_8c_source.html#l00967">ll_statahead_thread()</a>, <a class="el" href="llog__obd_8c_source.html#l00108">llog_cleanup()</a>, <a class="el" href="lod__dev_8c_source.html#l00578">lod_sub_init_llog()</a>, <a class="el" href="lov__request_8c_source.html#l00132">lov_check_and_wait_active()</a>, <a class="el" href="lov__object_8c_source.html#l00713">lov_layout_wait()</a>, <a class="el" href="pack__generic_8c_source.html#l00283">lustre_get_emerg_rs()</a>, <a class="el" href="lwp__dev_8c_source.html#l00358">lwp_device_fini()</a>, <a class="el" href="lwp__dev_8c_source.html#l00427">lwp_notify_users()</a>, <a class="el" href="mdc__request_8c_source.html#l00874">mdc_getpage()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>, <a class="el" href="mgs__nids_8c_source.html#l00419">mgs_ir_notify()</a>, <a class="el" href="genops_8c_source.html#l02229">obd_get_mod_rpc_slot()</a>, <a class="el" href="genops_8c_source.html#l01965">obd_get_request_slot()</a>, <a class="el" href="genops_8c_source.html#l01745">obd_zombie_barrier()</a>, <a class="el" href="genops_8c_source.html#l01830">obd_zombie_impexp_thread()</a>, <a class="el" href="ofd__io_8c_source.html#l00154">ofd_inconsistency_verification_main()</a>, <a class="el" href="ofd__io_8c_source.html#l00247">ofd_start_inconsistency_verification_thread()</a>, <a class="el" href="ofd__io_8c_source.html#l00288">ofd_stop_inconsistency_verification_thread()</a>, <a class="el" href="osc__cache_8c_source.html#l01557">osc_enter_cache()</a>, <a class="el" href="osc__cache_8c_source.html#l00915">osc_extent_wait()</a>, <a class="el" href="osc__page_8c_source.html#l00887">osc_lru_alloc()</a>, <a class="el" href="osc__object_8c_source.html#l00457">osc_object_invalidate()</a>, <a class="el" href="osd__scrub_8c_source.html#l01259">osd_inode_iteration()</a>, <a class="el" href="osd__scrub_8c_source.html#l02779">osd_otable_it_next()</a>, <a class="el" href="osd__scrub_8c_source.html#l01100">osd_scrub_exec()</a>, <a class="el" href="osd__scrub_8c_source.html#l01471">osd_scrub_main()</a>, <a class="el" href="osd__scrub_8c_source.html#l00989">osd_scrub_next()</a>, <a class="el" href="osp__precreate_8c_source.html#l01531">osp_init_precreate()</a>, <a class="el" href="osp__precreate_8c_source.html#l00768">osp_precreate_cleanup_orphans()</a>, <a class="el" href="osp__precreate_8c_source.html#l01292">osp_precreate_reserve()</a>, <a class="el" href="osp__precreate_8c_source.html#l01082">osp_precreate_thread()</a>, <a class="el" href="osp__trans_8c_source.html#l01423">osp_send_update_thread()</a>, <a class="el" href="osp__dev_8c_source.html#l00781">osp_sync()</a>, <a class="el" href="osp__sync_8c_source.html#l01381">osp_sync_init()</a>, <a class="el" href="osp__sync_8c_source.html#l01076">osp_sync_process_queues()</a>, <a class="el" href="osp__sync_8c_source.html#l01142">osp_sync_thread()</a>, <a class="el" href="osp__dev_8c_source.html#l00498">osp_update_init()</a>, <a class="el" href="pinger_8c_source.html#l00605">ping_evictor_main()</a>, <a class="el" href="import_8c_source.html#l01550">ptlrpc_disconnect_import()</a>, <a class="el" href="import_8c_source.html#l00286">ptlrpc_invalidate_import()</a>, <a class="el" href="events_8c_source.html#l00542">ptlrpc_ni_fini()</a>, <a class="el" href="pinger_8c_source.html#l00245">ptlrpc_pinger_main()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, <a class="el" href="recover_8c_source.html#l00333">ptlrpc_recover_import()</a>, <a class="el" href="service_8c_source.html#l02998">ptlrpc_service_unlink_rqbd()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, <a class="el" href="pinger_8c_source.html#l00322">ptlrpc_start_pinger()</a>, <a class="el" href="service_8c_source.html#l02782">ptlrpc_start_thread()</a>, <a class="el" href="pinger_8c_source.html#l00363">ptlrpc_stop_pinger()</a>, <a class="el" href="service_8c_source.html#l02683">ptlrpc_svcpt_stop_threads()</a>, <a class="el" href="niobuf_8c_source.html#l00420">ptlrpc_unregister_bulk()</a>, <a class="el" href="client_8c_source.html#l02512">ptlrpc_unregister_reply()</a>, <a class="el" href="service_8c_source.html#l02968">ptlrpc_wait_replies()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00427">ptlrpcd()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>, <a class="el" href="qmt__lock_8c_source.html#l00710">qmt_reba_thread()</a>, <a class="el" href="qmt__lock_8c_source.html#l00766">qmt_start_reba_thread()</a>, <a class="el" href="qmt__lock_8c_source.html#l00792">qmt_stop_reba_thread()</a>, <a class="el" href="qsd__handler_8c_source.html#l00686">qsd_op_begin0()</a>, <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, <a class="el" href="qsd__reint_8c_source.html#l00624">qsd_start_reint_thread()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00493">qsd_start_upd_thread()</a>, <a class="el" href="qsd__reint_8c_source.html#l00544">qsd_stop_reint_thread()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00563">qsd_stop_upd_thread()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>, <a class="el" href="statahead_8c_source.html#l01394">revalidate_statahead_dentry()</a>, <a class="el" href="sec__gc_8c_source.html#l00163">sec_gc_main()</a>, <a class="el" href="sec__gc_8c_source.html#l00247">sptlrpc_gc_fini()</a>, <a class="el" href="sec__gc_8c_source.html#l00220">sptlrpc_gc_init()</a>, <a class="el" href="sec_8c_source.html#l00675">sptlrpc_req_refresh_ctx()</a>, <a class="el" href="statahead_8c_source.html#l01534">start_statahead_thread()</a>, <a class="el" href="tgt__handler_8c_source.html#l01837">tgt_brw_read()</a>, and <a class="el" href="update__trans_8c_source.html#l00912">top_trans_wait_result()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf2dfb2fca671ff2c1156e18582d2bd03"></a><!-- doxytag: member="lustre_lib.h::l_wait_event_exclusive" ref="gaf2dfb2fca671ff2c1156e18582d2bd03" args="(wq, condition, info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_wait_event_exclusive</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">info&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keywordtype">int</span>                 __ret;                              \
        <span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a> *__info = (info);                    \
                                                                \
        <a class="code" href="group__lib.html#ga6ceb1ccb9463c4f21b22382207cc4c7d">__l_wait_event</a>(wq, condition, __info,                   \
                       __ret, add_wait_queue_exclusive);        \
        __ret;                                                  \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00339">339</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>, and <a class="el" href="osc__request_8c_source.html#l00606">osc_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga44238bd6042bb29adc0735ba6efc808f"></a><!-- doxytag: member="lustre_lib.h::l_wait_event_exclusive_head" ref="ga44238bd6042bb29adc0735ba6efc808f" args="(wq, condition, info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_wait_event_exclusive_head</td>
          <td>(</td>
          <td class="paramtype">wq, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">condition, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">info&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keywordtype">int</span>                 __ret;                              \
        <span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a> *__info = (info);                    \
                                                                \
        <a class="code" href="group__lib.html#ga6ceb1ccb9463c4f21b22382207cc4c7d">__l_wait_event</a>(wq, condition, __info,                   \
                       __ret, <a class="code" href="group__lib.html#gafa8e2750e27464c8a43db62e9ff969e6" title="wait_queue_t of Linux (version &amp;lt; 2.6.34) is a FIFO list for exclusively waiting...">add_wait_queue_exclusive_head</a>);   \
        __ret;                                                  \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00349">349</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02345">__attribute__()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7d2f4808ef9f41663e1e40bf527c4509"></a><!-- doxytag: member="lustre_lib.h::LUSTRE_FATAL_SIGS" ref="ga7d2f4808ef9f41663e1e40bf527c4509" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUSTRE_FATAL_SIGS</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(sigmask(SIGKILL) | sigmask(SIGINT) | sigmask(SIGTERM) | \
         sigmask(SIGQUIT) | sigmask(SIGALRM))
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00211">211</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>.</p>

</div>
</div>
<a class="anchor" id="gab125226712d6a6cb7eaf8833b5c8565e"></a><!-- doxytag: member="lustre_lib.h::LWI_INTR" ref="gab125226712d6a6cb7eaf8833b5c8565e" args="(cb, data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LWI_INTR</td>
          <td>(</td>
          <td class="paramtype">cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">data&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LWI_TIMEOUT_INTR(0, NULL, cb, data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00209">209</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="llite__lib_8c_source.html#l01099">ll_put_super()</a>, <a class="el" href="llog__obd_8c_source.html#l00108">llog_cleanup()</a>, <a class="el" href="genops_8c_source.html#l02229">obd_get_mod_rpc_slot()</a>, <a class="el" href="genops_8c_source.html#l01965">obd_get_request_slot()</a>, <a class="el" href="osc__request_8c_source.html#l00606">osc_destroy()</a>, <a class="el" href="osc__cache_8c_source.html#l00915">osc_extent_wait()</a>, <a class="el" href="osc__page_8c_source.html#l00887">osc_lru_alloc()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01837">tgt_brw_read()</a>.</p>

</div>
</div>
<a class="anchor" id="ga69a4bdb69d1ddb62665b4b936e4b37ea"></a><!-- doxytag: member="lustre_lib.h::LWI_ON_SIGNAL_NOOP" ref="ga69a4bdb69d1ddb62665b4b936e4b37ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LWI_ON_SIGNAL_NOOP&nbsp;&nbsp;&nbsp;((void (*)(void *))(-1))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00159">159</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01857">lfsck_control_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01874">lfsck_control_speed_by_self()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>, <a class="el" href="llite__lib_8c_source.html#l01099">ll_put_super()</a>, <a class="el" href="llog__obd_8c_source.html#l00108">llog_cleanup()</a>, <a class="el" href="genops_8c_source.html#l01965">obd_get_request_slot()</a>, <a class="el" href="osc__request_8c_source.html#l00606">osc_destroy()</a>, <a class="el" href="osc__cache_8c_source.html#l01557">osc_enter_cache()</a>, <a class="el" href="osc__cache_8c_source.html#l00915">osc_extent_wait()</a>, <a class="el" href="osc__page_8c_source.html#l00887">osc_lru_alloc()</a>, <a class="el" href="import_8c_source.html#l01550">ptlrpc_disconnect_import()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, and <a class="el" href="statahead_8c_source.html#l01394">revalidate_statahead_dentry()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2c8a9c91f1f21e7ff21abedc365140f9"></a><!-- doxytag: member="lustre_lib.h::LWI_TIMEOUT" ref="ga2c8a9c91f1f21e7ff21abedc365140f9" args="(time, cb, data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LWI_TIMEOUT</td>
          <td>(</td>
          <td class="paramtype">time, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">data&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a>) {                         \
        .lwi_timeout    = time,                 \
        .lwi_on_timeout = <a class="code" href="it__test_8c.html#a3edc96db5310d665bb056d7adc554a8f">cb</a>,                   \
        .lwi_cb_data    = data,                 \
        .lwi_interval   = 0,                    \
        .lwi_allow_intr = 0                     \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00171">171</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02345">__attribute__()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>, <a class="el" href="statahead_8c_source.html#l00967">ll_statahead_thread()</a>, <a class="el" href="pack__generic_8c_source.html#l00283">lustre_get_emerg_rs()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>, <a class="el" href="osd__scrub_8c_source.html#l00989">osd_scrub_next()</a>, <a class="el" href="osp__precreate_8c_source.html#l01292">osp_precreate_reserve()</a>, <a class="el" href="osp__dev_8c_source.html#l00781">osp_sync()</a>, <a class="el" href="osp__sync_8c_source.html#l01142">osp_sync_thread()</a>, <a class="el" href="events_8c_source.html#l00542">ptlrpc_ni_fini()</a>, <a class="el" href="pinger_8c_source.html#l00245">ptlrpc_pinger_main()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, <a class="el" href="recover_8c_source.html#l00333">ptlrpc_recover_import()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, <a class="el" href="service_8c_source.html#l02968">ptlrpc_wait_replies()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00427">ptlrpcd()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>, <a class="el" href="qsd__handler_8c_source.html#l00686">qsd_op_begin0()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>, and <a class="el" href="sec__gc_8c_source.html#l00163">sec_gc_main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga551c4c576557c71d5d420704bc9206b0"></a><!-- doxytag: member="lustre_lib.h::LWI_TIMEOUT_INTERVAL" ref="ga551c4c576557c71d5d420704bc9206b0" args="(time, interval, cb, data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LWI_TIMEOUT_INTERVAL</td>
          <td>(</td>
          <td class="paramtype">time, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">interval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">data&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a>) {                                 \
        .lwi_timeout    = time,                         \
        .lwi_on_timeout = <a class="code" href="it__test_8c.html#a3edc96db5310d665bb056d7adc554a8f">cb</a>,                           \
        .lwi_cb_data    = data,                         \
        .lwi_interval   = interval,                     \
        .lwi_allow_intr = 0                             \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00180">180</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lov__request_8c_source.html#l00132">lov_check_and_wait_active()</a>, <a class="el" href="import_8c_source.html#l00286">ptlrpc_invalidate_import()</a>, <a class="el" href="service_8c_source.html#l02998">ptlrpc_service_unlink_rqbd()</a>, <a class="el" href="niobuf_8c_source.html#l00420">ptlrpc_unregister_bulk()</a>, and <a class="el" href="client_8c_source.html#l02512">ptlrpc_unregister_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="ga62c286be2c5fae04dc329e2d67ece19b"></a><!-- doxytag: member="lustre_lib.h::LWI_TIMEOUT_INTR" ref="ga62c286be2c5fae04dc329e2d67ece19b" args="(time, time_cb, sig_cb, data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LWI_TIMEOUT_INTR</td>
          <td>(</td>
          <td class="paramtype">time, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sig_cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">data&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a>) {                                 \
        .lwi_timeout    = time,                         \
        .lwi_on_timeout = time_cb,                      \
        .lwi_on_signal  = sig_cb,                       \
        .lwi_cb_data    = data,                         \
        .lwi_interval   = 0,                            \
        .lwi_allow_intr = 0                             \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00189">189</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l01221">cl_sync_io_wait()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01857">lfsck_control_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01874">lfsck_control_speed_by_self()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>, <a class="el" href="mdc__request_8c_source.html#l00874">mdc_getpage()</a>, <a class="el" href="osc__cache_8c_source.html#l01557">osc_enter_cache()</a>, <a class="el" href="osc__cache_8c_source.html#l00915">osc_extent_wait()</a>, <a class="el" href="import_8c_source.html#l01550">ptlrpc_disconnect_import()</a>, <a class="el" href="statahead_8c_source.html#l01394">revalidate_statahead_dentry()</a>, <a class="el" href="sec_8c_source.html#l00675">sptlrpc_req_refresh_ctx()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01837">tgt_brw_read()</a>.</p>

</div>
</div>
<a class="anchor" id="gab5290ac11914c764f80117e25f3926ce"></a><!-- doxytag: member="lustre_lib.h::LWI_TIMEOUT_INTR_ALL" ref="gab5290ac11914c764f80117e25f3926ce" args="(time, time_cb, sig_cb, data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LWI_TIMEOUT_INTR_ALL</td>
          <td>(</td>
          <td class="paramtype">time, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sig_cb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">data&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<span class="keyword">struct </span><a class="code" href="structl__wait__info.html">l_wait_info</a>) {                                         \
        .lwi_timeout    = time,                                 \
        .lwi_on_timeout = time_cb,                              \
        .lwi_on_signal  = sig_cb,                               \
        .lwi_cb_data    = data,                                 \
        .lwi_interval   = 0,                                    \
        .lwi_allow_intr = 1                                     \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00199">199</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga56cbf240288b641ac8be1803d9d072ec"></a><!-- doxytag: member="lustre_lib.h::__add_wait_queue_exclusive" ref="ga56cbf240288b641ac8be1803d9d072ec" args="(wait_queue_head_t *q, wait_queue_t *wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __add_wait_queue_exclusive </td>
          <td>(</td>
          <td class="paramtype">wait_queue_head_t *&nbsp;</td>
          <td class="paramname"> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wait_queue_t *&nbsp;</td>
          <td class="paramname"> <em>wait</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00219">219</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab24c6fe5b65e802c446d53e3ad5c35ac"></a><!-- doxytag: member="lustre_lib.h::back_to_sleep" ref="gab24c6fe5b65e802c446d53e3ad5c35ac" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int back_to_sleep </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__lib_8h_source.html#l00154">154</a> of file <a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>.</p>

<p>Referenced by <a class="el" href="import_8c_source.html#l01550">ptlrpc_disconnect_import()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>.</p>

</div>
</div>
<a class="anchor" id="gafc5cf9a5b2924b90734e720301742315"></a><!-- doxytag: member="lustre_lib.h::do_set_info_async" ref="gafc5cf9a5b2924b90734e720301742315" args="(struct obd_import *imp, int opcode, int version, size_t keylen, void *key, size_t vallen, void *val, struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_set_info_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a remote set_info_async. </p>
<p>This may go from client to server or server to client. </p>

<p>Definition at line <a class="el" href="pack__generic_8c_source.html#l01574">1574</a> of file <a class="el" href="pack__generic_8c_source.html">pack_generic.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="client_8c_source.html#l01644">ptlrpc_check_set()</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="client_8c_source.html#l01050">ptlrpc_set_add_req()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00974">RMF_SETINFO_KEY</a>, <a class="el" href="layout_8c_source.html#l00899">RMF_SETINFO_VAL</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01274">RQF_OBD_SET_INFO</a>.</p>

<p>Referenced by <a class="el" href="mdc__request_8c_source.html#l02378">mdc_set_info_async()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="gafdb6e70a2f301ef0c9e594f8871d9b40"></a><!-- doxytag: member="lustre_lib.h::target_pack_pool_reply" ref="gafdb6e70a2f301ef0c9e594f8871d9b40" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int target_pack_pool_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Packs current SLV and Limit into <em>req</em>. </p>

<p>Definition at line <a class="el" href="ldlm__lib_8c_source.html#l02810">2810</a> of file <a class="el" href="ldlm__lib_8c_source.html">ldlm_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00336">exp_connect_lru_resize()</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="pack__generic_8c_source.html#l01170">lustre_msg_set_limit()</a>, <a class="el" href="pack__generic_8c_source.html#l01134">lustre_msg_set_slv()</a>, <a class="el" href="obd_8h_source.html#l00726">obd_device::obd_pool_limit</a>, <a class="el" href="obd_8h_source.html#l00724">obd_device::obd_pool_lock</a>, <a class="el" href="obd_8h_source.html#l00725">obd_device::obd_pool_slv</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00528">ptlrpc_send_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="ga85f5aad1f6441ed3a0d44b17c6b99c7b"></a><!-- doxytag: member="lustre_lib.h::target_send_reply" ref="ga85f5aad1f6441ed3a0d44b17c6b99c7b" args="(struct ptlrpc_request *req, int rc, int fail_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void target_send_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fail_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lib_8c_source.html#l02860">2860</a> of file <a class="el" href="ldlm__lib_8c_source.html">ldlm_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00138">D_NET</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00231">obd_export::exp_last_committed</a>, <a class="el" href="lustre__export_8h_source.html#l00240">obd_export::exp_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00227">obd_export::exp_outstanding_replies</a>, <a class="el" href="lustre__export_8h_source.html#l00228">obd_export::exp_uncommitted_replies</a>, <a class="el" href="lustre__export_8h_source.html#l00229">obd_export::exp_uncommitted_replies_lock</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="service_8c_source.html#l00369">ptlrpc_dispatch_difficult_reply()</a>, <a class="el" href="lustre__net_8h_source.html#l02511">ptlrpc_rs_addref()</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_no_reply</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01034">ptlrpc_request::rq_transno</a>, <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>, <a class="el" href="lustre__net_8h_source.html#l00664">ptlrpc_reply_state::rs_difficult</a>, <a class="el" href="lustre__net_8h_source.html#l00655">ptlrpc_reply_state::rs_exp_list</a>, <a class="el" href="lustre__net_8h_source.html#l00687">ptlrpc_reply_state::rs_export</a>, <a class="el" href="lustre__net_8h_source.html#l00669">ptlrpc_reply_state::rs_handled</a>, <a class="el" href="lustre__net_8h_source.html#l00653">ptlrpc_reply_state::rs_list</a>, <a class="el" href="lustre__net_8h_source.html#l00662">ptlrpc_reply_state::rs_lock</a>, <a class="el" href="lustre__net_8h_source.html#l00665">ptlrpc_reply_state::rs_no_ack</a>, <a class="el" href="lustre__net_8h_source.html#l00657">ptlrpc_reply_state::rs_obd_list</a>, <a class="el" href="lustre__net_8h_source.html#l00670">ptlrpc_reply_state::rs_on_net</a>, <a class="el" href="lustre__net_8h_source.html#l00682">ptlrpc_reply_state::rs_opc</a>, <a class="el" href="lustre__net_8h_source.html#l00667">ptlrpc_reply_state::rs_scheduled</a>, <a class="el" href="lustre__net_8h_source.html#l00668">ptlrpc_reply_state::rs_scheduled_ever</a>, <a class="el" href="lustre__net_8h_source.html#l00688">ptlrpc_reply_state::rs_svcpt</a>, <a class="el" href="lustre__net_8h_source.html#l00684">ptlrpc_reply_state::rs_transno</a>, <a class="el" href="lustre__net_8h_source.html#l00686">ptlrpc_reply_state::rs_xid</a>, <a class="el" href="lustre__net_8h_source.html#l01854">ptlrpc_service_part::scp_nreps_difficult</a>, <a class="el" href="lustre__net_8h_source.html#l01848">ptlrpc_service_part::scp_rep_active</a>, and <a class="el" href="ldlm__lib_8c_source.html#l02835">target_send_reply_msg()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01835">ptlrpc_server_handle_req_in()</a>, and <a class="el" href="tgt__handler_8c_source.html#l00371">tgt_handle_request0()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
