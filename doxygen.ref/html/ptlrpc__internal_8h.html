<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ptlrpc/ptlrpc_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ptlrpc/ptlrpc_internal.h File Reference</h1><code>#include &quot;../ldlm/ldlm_internal.h&quot;</code><br/>

<p><a href="ptlrpc__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnrs__core.html">nrs_core</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRS core object.  <a href="structnrs__core.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a840cfd893cfd1ea1f4ac7b04382ed44d">test_req_buffer_pressure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a9bbbe993837b9f20a26325525bc76bfb">ptlrpc_all_services</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds a list of all PTLRPC services.  <a href="#a9bbbe993837b9f20a26325525bc76bfb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a9e88c117c1eccb6da9707b1f9430d4f3">ptlrpc_all_services_mutex</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to protect the <em>ptlrpc_all_services</em> list.  <a href="#a9e88c117c1eccb6da9707b1f9430d4f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__nrs__pol__conf.html">ptlrpc_nrs_pol_conf</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ae6199396044abe1d7985dac1cd676d3f">nrs_conf_fifo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">FIFO policy configuration.  <a href="#ae6199396044abe1d7985dac1cd676d3f"></a><br/></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aab8f753dcc744d942854530a5586924b">ptlrpc_lprocfs_register_service</a>(params...)&nbsp;&nbsp;&nbsp;do{}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a61b45eea1de14b46fdfb6f7748400879">ptlrpc_lprocfs_unregister_service</a>(params...)&nbsp;&nbsp;&nbsp;do{}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a506659e796a8fcb8b773409fff74454c">ptlrpc_lprocfs_rpc_sent</a>(params...)&nbsp;&nbsp;&nbsp;do{}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a28c0dd24670d44316a28092d730e7262">ptlrpc_lprocfs_do_request_stat</a>(params...)&nbsp;&nbsp;&nbsp;do{}while(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aaa9cf96d0f5f9092b2c742a899493122">NRS_LPROCFS_QUANTUM_NAME_REG</a>&nbsp;&nbsp;&nbsp;&quot;reg_quantum:&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a9db970bb5440b6175dfef51a308b7292">NRS_LPROCFS_QUANTUM_NAME_HP</a>&nbsp;&nbsp;&nbsp;&quot;hp_quantum:&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a5c2c46437e539b070026cdefdd46f154">LPROCFS_NRS_QUANTUM_MAX</a>&nbsp;&nbsp;&nbsp;65535</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the maximum size of <a class="el" href="structnrs__crrn__client.html#a5ed35aa99de786d6d2fa29e148d52211" title="Round Robin quantum; the maximum number of RPCs the client is allowed to schedule...">nrs_crrn_client::cc_quantum</a> and <a class="el" href="structnrs__orr__data.html#af0ea79af64d1d65364e08e33fed143eb" title="Round Robin quantum; the maxium number of RPCs that each request batch for each object...">nrs_orr_data::od_quantum</a>.  <a href="#a5c2c46437e539b070026cdefdd46f154"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad610dd3ad3ace84af222a80cd74e5283">LPROCFS_NRS_WR_QUANTUM_MAX_CMD</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Max valid command string is the size of the labels, plus "65535" twice, plus a separating space character.  <a href="#ad610dd3ad3ace84af222a80cd74e5283"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structnrs__core.html">nrs_core</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad543d45ab909c062d714baabb15576ca">nrs_core</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">nrs  <a href="#ad543d45ab909c062d714baabb15576ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga7723c3e0086e4476292c06bb0fa8db00">ptlrpcd_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a58c2a7b4fdd945d66970db39edc52273">pinger_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ae010a629f5f836492d7726dcf2692a0e">ptlrpc_start_thread</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, int wait)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga92e1290b388e5bd6c5ae97f5c753589a">ptlrpcd_start</a> (struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a5ba563478c05c9e93c9a322e6b2803c4">ptlrpc_at_adj_net_latency</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, unsigned int service_time)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__bulk__desc.html">ptlrpc_bulk_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aef4db99bd8fe919f2cbd633eb11454a8">ptlrpc_new_bulk</a> (unsigned npages, unsigned max_brw, enum <a class="el" href="group__net.html#gaa3f75b2ff04d1cf65bcbbe7ab0ea1bef">ptlrpc_bulk_op_type</a> type, unsigned portal, const struct <a class="el" href="structptlrpc__bulk__frag__ops.html">ptlrpc_bulk_frag_ops</a> *ops)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate and initialize new bulk descriptor on the sender.  <a href="#aef4db99bd8fe919f2cbd633eb11454a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#adf2f9b7a11e7944536c9232a455bb43a">ptlrpc_request_cache_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a522ac1657e956ed4312113516aec1e6f">ptlrpc_request_cache_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#af6ed95facf669fc40ac53a9ffa67cf1b">ptlrpc_request_cache_alloc</a> (gfp_t flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a62d5a40d5504554ad53443f0ccae0cb2">ptlrpc_request_cache_free</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a2c3a77dc12500211df2df050eae99040">ptlrpc_init_xid</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a6978d733f46bb41c9ac9b5195aff2837">ptlrpc_set_add_new_req</a> (struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a request to a request with dedicated server thread and wake the thread to make any necessary processing.  <a href="#a6978d733f46bb41c9ac9b5195aff2837"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ac5d7cfee5628090111ef04b2e7054a3e">ptlrpc_expired_set</a> (void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time out all uncompleted requests in request set pointed by <em>data</em> Callback used when waiting on sets with l_wait_event.  <a href="#ac5d7cfee5628090111ef04b2e7054a3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a897eeb312b5bd34eba0c401b1502c7c8">ptlrpc_set_next_timeout</a> (struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the smallest timeout in the set; this does NOT set a timeout.  <a href="#a897eeb312b5bd34eba0c401b1502c7c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a5226e81fe53ec9f761df1c040404b670">ptlrpc_resend_req</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *request)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedule previously sent request for resend.  <a href="#a5226e81fe53ec9f761df1c040404b670"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad93d8710b114f9917eda916dd057035e">ptlrpc_set_bulk_mbits</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If request has a new allocated XID (new request or EINPROGRESS resend), use this XID as matchbits of bulk, otherwise allocate a new matchbits for request to ensure previous bulk fails and avoid problems with lost replies and therefore several transfers landing into the same buffer from different sending attempts.  <a href="#ad93d8710b114f9917eda916dd057035e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ac179b6ddfe8bdcc1dddfa84f0f5178b3">ptlrpc_assign_next_xid_nolock</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a61c8458a53357bfdd5228af942c30c55">ptlrpc_known_replied_xid</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ae067008055fbc59b0c9f72abe8531fac">ptlrpc_add_unreplied</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#adfbc17abb450b19c63d879220cc98ec3">ptlrpc_init_portals</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a8d388441b7daf6d1f8c54fea371404e8">ptlrpc_exit_portals</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ae4d751a148dd84a855d068e9452c85f1">ptlrpc_request_handle_notconn</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a31e10f29ae4389ba88af51cc6d07bbe4">lustre_assert_wire_constants</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a2c8c7a9090a531c4cdd1a4621698c816">ptlrpc_import_in_recovery</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a08bb6b823019ef9a42f65210821e8750">ptlrpc_set_import_discon</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp, __u32 conn_cnt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if import was FULL, false if import was already not connected.  <a href="#a08bb6b823019ef9a42f65210821e8750"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a1e60d77cf17000baa5ffdabd3ddd9b5a">ptlrpc_handle_failed_import</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a77cdc1b5ffce57e1f72b9407b500866b">ptlrpc_replay_next</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp, int *inflight)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Identify what request from replay list needs to be replayed next (based on what we have already replayed) and send it to server.  <a href="#a77cdc1b5ffce57e1f72b9407b500866b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a4fe157068d0691ef598aee85d69a92b0">ptlrpc_initiate_recovery</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start recovery on disconnected import.  <a href="#a4fe157068d0691ef598aee85d69a92b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a75e70c906ed859881dddce7a938c5e9d">lustre_unpack_req_ptlrpc_body</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a32c0e0049701f1cbef3380e8718c5983">lustre_unpack_rep_ptlrpc_body</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a107d0adae381864f5c53de6cc805a59f">ptlrpc_service_nrs_setup</a> (struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *svc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup NRS heads on all service partitions of service <em>svc</em>, and register all compatible policies on those NRS heads.  <a href="#a107d0adae381864f5c53de6cc805a59f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#addde07332222429e28ec6cb0a78ca460">ptlrpc_service_nrs_cleanup</a> (struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *svc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregisters all policies on all service partitions of service <em>svc</em>.  <a href="#addde07332222429e28ec6cb0a78ca460"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a040685413af9d845199d4866c37316b8">ptlrpc_nrs_req_initialize</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, bool hp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtains NRS head resources for request <em>req</em>.  <a href="#a040685413af9d845199d4866c37316b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aa35053963b23dd9e0dc17f6b214da481">ptlrpc_nrs_req_finalize</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Releases resources for a request; is called after the request has been handled.  <a href="#aa35053963b23dd9e0dc17f6b214da481"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a41d6af6b26aebda69530fe3537266dfd">ptlrpc_nrs_req_stop_nolock</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a376ea8577919ec8eb729d36195bcbf1a">ptlrpc_nrs_req_add</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, bool hp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enqueues request <em>req</em> on either the regular or high-priority NRS head of service partition <em>svcpt</em>.  <a href="#a376ea8577919ec8eb729d36195bcbf1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a54ec453671a55cf9b6012577c03eaca6">ptlrpc_nrs_req_get_nolock0</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, bool hp, bool peek, bool force)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtains a request for handling from an NRS head of service partition <em>svcpt</em>.  <a href="#a54ec453671a55cf9b6012577c03eaca6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad92335242ec3763ecf8874e00c41efee">ptlrpc_nrs_req_get_nolock</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, bool hp, bool force)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a2b75bda47bbc05dc96217fa09e392107">ptlrpc_nrs_req_peek_nolock</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, bool hp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a7da7205147ceea7096dc6bdfe96a2d4c">ptlrpc_nrs_req_del_nolock</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dequeues request <em>req</em> from the policy it has been enqueued on.  <a href="#a7da7205147ceea7096dc6bdfe96a2d4c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#acd9117d134d826c1aaed14e2e8d5f57d">ptlrpc_nrs_req_pending_nolock</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, bool hp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns whether there are any requests currently enqueued on any of the policies of service partition's <em>svcpt</em> NRS head specified by <em>hp</em>.  <a href="#acd9117d134d826c1aaed14e2e8d5f57d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#adca0e099406dbe4e2f80aed92e475774">ptlrpc_nrs_req_throttling_nolock</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, bool hp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns whether NRS policy is throttling reqeust.  <a href="#adca0e099406dbe4e2f80aed92e475774"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a4970fb4b913c82e5566a7ecbcd8a26b7">ptlrpc_nrs_policy_control</a> (const struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *svc, enum <a class="el" href="group__nrs.html#ga79e63c48a144326744316f397c52a883">ptlrpc_nrs_queue_type</a> queue, char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, enum <a class="el" href="group__nrs.html#gaa3db631148675f8074864fa452691540">ptlrpc_nrs_ctl</a> opc, bool single, void *arg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Carries out a control operation <em>opc</em> on the policy identified by the human-readable <em>name</em>, on either all partitions, or only on the first partition of service <em>svc</em>.  <a href="#a4970fb4b913c82e5566a7ecbcd8a26b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a88b6333c295cad770117c12285bc8382">ptlrpc_nrs_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds all policies that ship with the ptlrpc module, to NRS core's list of policies <em><a class="el" href="structnrs__core.html#a6bd6f7f96d860c488aff9d4e638d272d" title="List of all policy descriptors registered with NRS core; protected by nrs_core::nrs_mutex...">nrs_core.nrs_policies</a></em>.  <a href="#a88b6333c295cad770117c12285bc8382"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ab94623e611d2b1ab7143fc656f8df4b3">ptlrpc_nrs_fini</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes all policy descriptors from <a class="el" href="structnrs__core.html#a6bd6f7f96d860c488aff9d4e638d272d" title="List of all policy descriptors registered with NRS core; protected by nrs_core::nrs_mutex...">nrs_core::nrs_policies</a>, and frees the policy descriptors.  <a href="#ab94623e611d2b1ab7143fc656f8df4b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aaf4ffa9c17fffb706e83c266967827f0">nrs_svcpt_has_hp</a> (const struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aafe49adbbec8b2a2c6d31a336474c200">nrs_svc_has_hp</a> (const struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *svc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__nrs.html">ptlrpc_nrs</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a12a3fc5ebcced2d0102d16c587421595">nrs_svcpt2nrs</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt, bool hp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#af200f6621e663dc556db992bae06b14f">nrs_pol2cptid</a> (const struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *policy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a06ddfd3cdb832cb44eda6902661f6c10">nrs_pol2svc</a> (struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *policy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a30a76e679b41a89a6b11699378a5d610">nrs_pol2svcpt</a> (struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *policy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a10d9dd9f058422d6216b9f8dc5d61b81">nrs_pol2cptab</a> (struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *policy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__nrs__resource.html">ptlrpc_nrs_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad7c2772ccb9d6f71e23858d1d7143c98">nrs_request_resource</a> (struct <a class="el" href="structptlrpc__nrs__request.html">ptlrpc_nrs_request</a> *nrq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a8eb74cfa0282b5b2f72952bcd176a97d">nrs_request_policy</a> (struct <a class="el" href="structptlrpc__nrs__request.html">ptlrpc_nrs_request</a> *nrq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a9b3fbdcfa3f3e2d017c7fcc37c3e7ae5">ptlrpc_expire_one_request</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int async_unlink)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time out request <em>req</em>.  <a href="#a9b3fbdcfa3f3e2d017c7fcc37c3e7ae5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ae7d47586db15c8cb1c637fa6fe4b369b">ptlrpc_fill_bulk_md</a> (<a class="el" href="structlnet__md__t.html">lnet_md_t</a> *md, struct <a class="el" href="structptlrpc__bulk__desc.html">ptlrpc_bulk_desc</a> *desc, int mdcnt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__reply__state.html">ptlrpc_reply_state</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ac6bc1814a6d8c411e923f7691095ba94">lustre_get_emerg_rs</a> (struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *svcpt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a2616d6293a96a4c602d5b649af8f1496">lustre_put_emerg_rs</a> (struct <a class="el" href="structptlrpc__reply__state.html">ptlrpc_reply_state</a> *rs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a8c091a9e37e1c0c043b95c33080d1c59">ptlrpc_start_pinger</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad6097c404920f7f3b6becb1200ab4855">ptlrpc_stop_pinger</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a7fef8e60275ec1d9d8599ca55923fe81">ptlrpc_pinger_sending_on_import</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a8ab218d674e68c86418b19144736aae1">ptlrpc_pinger_commit_expected</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a0c704c39022fb4392b8743576a317f86">ptlrpc_pinger_wake_up</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a31372574ecd5215aadf8e4d926e461e5">ptlrpc_ping_import_soon</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ae27ab38649b956801ef131bc5661361a">ping_evictor_wake</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a679495cbd270ad7b5a9ce24e8e04e1b2">sptlrpc_null_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#af0ab041c15fc69766264b1acfb39ecbf">sptlrpc_null_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a23216ad6e2d24a13d5215f054fb44e39">sptlrpc_plain_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a0be38fa801e146b6fcf9e0c1585f677e">sptlrpc_plain_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ad8778f41d65ee10d482bc7bed49d9447">sptlrpc_enc_pool_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aa7a23630b6b94a9491c36a715c9f7ed9">sptlrpc_enc_pool_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#af24986faec4d656ded28414d50774cde">sptlrpc_proc_enc_pool_seq_show</a> (struct seq_file *m, void *v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#ace2140fb87ac93c52fa15ffd20f75dc5">sptlrpc_lproc_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a0e82be1ce1f2c65154ba34fb1667818c">sptlrpc_lproc_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a56347d0e77ff61db79bbcd2de3775ea8">sptlrpc_gc_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a5c722840514227e6b5f6568d69373f2c">sptlrpc_gc_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a3653af559e4fad3b3c71877c309ea556">sptlrpc_conf_choose_flavor</a> (enum <a class="el" href="group__sptlrpc.html#gaceeb8c40afd0179b5b42fc19aa58d177">lustre_sec_part</a> from, enum <a class="el" href="group__sptlrpc.html#gaceeb8c40afd0179b5b42fc19aa58d177">lustre_sec_part</a> to, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *target, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid, struct <a class="el" href="structsptlrpc__flavor.html">sptlrpc_flavor</a> *sf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a7957986d1e28dfc797ff3472de181045">sptlrpc_conf_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#afe08db8d0e80c75017172faf58afb021">sptlrpc_conf_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a0330af347241e0a92cc6a786f6c2bce3">lustre_rename</a> (struct dentry *<a class="el" href="mdsrate_8c.html#a929b6cee0a8e867ee7380bf26947cef2">dir</a>, struct vfsmount *mnt, char *old_name, char *new_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a85cf05726ee3abcf3a3c9d82b267445d">sptlrpc_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#af4c088cbb797dc841ec45509b2626147">sptlrpc_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a18f3f87975dafee6e1c2b367c0c2db5c">ptlrpc_recoverable_error</a> (int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a2a009541aa17bcafe9f76d383668f2bf">tgt_mod_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#addcc5c6902e8ee4d4a93162c9a811fa7">tgt_mod_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a9599d13fd0042e9eaaf5f415e7c2f46e">nodemap_mod_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a9c2ce56e9afc4491bce4f3841540d85e">nodemap_mod_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a8125370d60343843a20c56bb811ffd4b">ptlrpc_reqset_put</a> (struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a5cfb5431d2e0fc8562e6baba474521e9">ptlrpc_req_comm_init</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialise ptlrpc common fields  <a href="#a5cfb5431d2e0fc8562e6baba474521e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aab29a99944d2ec08540df8db699e6c94">ptlrpc_cli_req_init</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialise client side ptlrpc request  <a href="#aab29a99944d2ec08540df8db699e6c94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a86e0377a7d6a14f59100bb063f41dd14">ptlrpc_srv_req_init</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialise server side ptlrpc request  <a href="#a86e0377a7d6a14f59100bb063f41dd14"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#a5b7b51f484074d5b89cf858dcc60bda0">ptlrpc_req_is_connect</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptlrpc__internal_8h.html#aa6a968ba843521337097fcbbed39308b">ptlrpc_req_is_disconnect</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a5c2c46437e539b070026cdefdd46f154"></a><!-- doxytag: member="ptlrpc_internal.h::LPROCFS_NRS_QUANTUM_MAX" ref="a5c2c46437e539b070026cdefdd46f154" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LPROCFS_NRS_QUANTUM_MAX&nbsp;&nbsp;&nbsp;65535</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the maximum size of <a class="el" href="structnrs__crrn__client.html#a5ed35aa99de786d6d2fa29e148d52211" title="Round Robin quantum; the maximum number of RPCs the client is allowed to schedule...">nrs_crrn_client::cc_quantum</a> and <a class="el" href="structnrs__orr__data.html#af0ea79af64d1d65364e08e33fed143eb" title="Round Robin quantum; the maxium number of RPCs that each request batch for each object...">nrs_orr_data::od_quantum</a>. </p>

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00249">249</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad610dd3ad3ace84af222a80cd74e5283"></a><!-- doxytag: member="ptlrpc_internal.h::LPROCFS_NRS_WR_QUANTUM_MAX_CMD" ref="ad610dd3ad3ace84af222a80cd74e5283" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LPROCFS_NRS_WR_QUANTUM_MAX_CMD</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">sizeof</span>(<a class="code" href="ptlrpc__internal_8h.html#aaa9cf96d0f5f9092b2c742a899493122">NRS_LPROCFS_QUANTUM_NAME_REG</a> __stringify(<a class="code" href="ptlrpc__internal_8h.html#a5c2c46437e539b070026cdefdd46f154" title="the maximum size of nrs_crrn_client::cc_quantum and nrs_orr_data::od_quantum.">LPROCFS_NRS_QUANTUM_MAX</a>) <span class="stringliteral">&quot; &quot;</span>  \
        <a class="code" href="ptlrpc__internal_8h.html#a9db970bb5440b6175dfef51a308b7292">NRS_LPROCFS_QUANTUM_NAME_HP</a> __stringify(<a class="code" href="ptlrpc__internal_8h.html#a5c2c46437e539b070026cdefdd46f154" title="the maximum size of nrs_crrn_client::cc_quantum and nrs_orr_data::od_quantum.">LPROCFS_NRS_QUANTUM_MAX</a>))
</pre></div>
<p>Max valid command string is the size of the labels, plus "65535" twice, plus a separating space character. </p>

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00255">255</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9db970bb5440b6175dfef51a308b7292"></a><!-- doxytag: member="ptlrpc_internal.h::NRS_LPROCFS_QUANTUM_NAME_HP" ref="a9db970bb5440b6175dfef51a308b7292" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NRS_LPROCFS_QUANTUM_NAME_HP&nbsp;&nbsp;&nbsp;&quot;hp_quantum:&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00244">244</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaa9cf96d0f5f9092b2c742a899493122"></a><!-- doxytag: member="ptlrpc_internal.h::NRS_LPROCFS_QUANTUM_NAME_REG" ref="aaa9cf96d0f5f9092b2c742a899493122" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NRS_LPROCFS_QUANTUM_NAME_REG&nbsp;&nbsp;&nbsp;&quot;reg_quantum:&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00243">243</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a28c0dd24670d44316a28092d730e7262"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_lprocfs_do_request_stat" ref="a28c0dd24670d44316a28092d730e7262" args="(params...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ptlrpc_lprocfs_do_request_stat</td>
          <td>(</td>
          <td class="paramtype">params...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;do{}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00122">122</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="aab8f753dcc744d942854530a5586924b"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_lprocfs_register_service" ref="aab8f753dcc744d942854530a5586924b" args="(params...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ptlrpc_lprocfs_register_service</td>
          <td>(</td>
          <td class="paramtype">params...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;do{}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00119">119</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a506659e796a8fcb8b773409fff74454c"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_lprocfs_rpc_sent" ref="a506659e796a8fcb8b773409fff74454c" args="(params...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ptlrpc_lprocfs_rpc_sent</td>
          <td>(</td>
          <td class="paramtype">params...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;do{}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00121">121</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01297">after_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a61b45eea1de14b46fdfb6f7748400879"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_lprocfs_unregister_service" ref="a61b45eea1de14b46fdfb6f7748400879" args="(params...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ptlrpc_lprocfs_unregister_service</td>
          <td>(</td>
          <td class="paramtype">params...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;do{}while(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00120">120</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l03160">ptlrpc_unregister_service()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a31e10f29ae4389ba88af51cc6d07bbe4"></a><!-- doxytag: member="ptlrpc_internal.h::lustre_assert_wire_constants" ref="a31e10f29ae4389ba88af51cc6d07bbe4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_assert_wire_constants </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="utils_2wiretest_8c_source.html#l00064">64</a> of file <a class="el" href="utils_2wiretest_8c_source.html">wiretest.c</a>.</p>

<p>Referenced by <a class="el" href="utils_2wirehdr_8c_source.html#l00051">main()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6bc1814a6d8c411e923f7691095ba94"></a><!-- doxytag: member="ptlrpc_internal.h::lustre_get_emerg_rs" ref="ac6bc1814a6d8c411e923f7691095ba94" args="(struct ptlrpc_service_part *svcpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__reply__state.html">ptlrpc_reply_state</a>* lustre_get_emerg_rs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pack__generic_8c_source.html#l00283">283</a> of file <a class="el" href="pack__generic_8c_source.html">pack_generic.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="lustre__net_8h_source.html#l00653">ptlrpc_reply_state::rs_list</a>, <a class="el" href="lustre__net_8h_source.html#l00671">ptlrpc_reply_state::rs_prealloc</a>, <a class="el" href="lustre__net_8h_source.html#l00680">ptlrpc_reply_state::rs_size</a>, <a class="el" href="lustre__net_8h_source.html#l00688">ptlrpc_reply_state::rs_svcpt</a>, <a class="el" href="lustre__net_8h_source.html#l01850">ptlrpc_service_part::scp_rep_idle</a>, and <a class="el" href="lustre__net_8h_source.html#l01852">ptlrpc_service_part::scp_rep_waitq</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02130">sptlrpc_svc_alloc_rs()</a>.</p>

</div>
</div>
<a class="anchor" id="a2616d6293a96a4c602d5b649af8f1496"></a><!-- doxytag: member="ptlrpc_internal.h::lustre_put_emerg_rs" ref="a2616d6293a96a4c602d5b649af8f1496" args="(struct ptlrpc_reply_state *rs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_put_emerg_rs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__reply__state.html">ptlrpc_reply_state</a> *&nbsp;</td>
          <td class="paramname"> <em>rs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pack__generic_8c_source.html#l00319">319</a> of file <a class="el" href="pack__generic_8c_source.html">pack_generic.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="lustre__net_8h_source.html#l00653">ptlrpc_reply_state::rs_list</a>, <a class="el" href="lustre__net_8h_source.html#l00688">ptlrpc_reply_state::rs_svcpt</a>, <a class="el" href="lustre__net_8h_source.html#l01850">ptlrpc_service_part::scp_rep_idle</a>, and <a class="el" href="lustre__net_8h_source.html#l01852">ptlrpc_service_part::scp_rep_waitq</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02130">sptlrpc_svc_alloc_rs()</a>, and <a class="el" href="sec_8c_source.html#l02201">sptlrpc_svc_free_rs()</a>.</p>

</div>
</div>
<a class="anchor" id="a0330af347241e0a92cc6a786f6c2bce3"></a><!-- doxytag: member="ptlrpc_internal.h::lustre_rename" ref="a0330af347241e0a92cc6a786f6c2bce3" args="(struct dentry *dir, struct vfsmount *mnt, char *old_name, char *new_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_rename </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vfsmount *&nbsp;</td>
          <td class="paramname"> <em>mnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>old_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>new_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__ctx_8c_source.html#l00102">102</a> of file <a class="el" href="sec__ctx_8c_source.html">sec_ctx.c</a>.</p>

<p>References <a class="el" href="sec__ctx_8c_source.html#l00042">ASSERT_KERNEL_CTXT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lvfs_8h_source.html#l00084">ll_lookup_one_len()</a>, <a class="el" href="lustre__compat_8h_source.html#l00364">ll_vfs_rename</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="sec__config_8c_source.html#l01000">sptlrpc_target_local_copy_conf()</a>.</p>

</div>
</div>
<a class="anchor" id="a32c0e0049701f1cbef3380e8718c5983"></a><!-- doxytag: member="ptlrpc_internal.h::lustre_unpack_rep_ptlrpc_body" ref="a32c0e0049701f1cbef3380e8718c5983" args="(struct ptlrpc_request *req, int offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_unpack_rep_ptlrpc_body </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pack__generic_8c_source.html#l00661">661</a> of file <a class="el" href="pack__generic_8c_source.html">pack_generic.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="packet-lustre_8c_source.html#l00048">LUSTRE_MSG_MAGIC_V2</a>, <a class="el" href="pack__generic_8c_source.html#l00622">lustre_unpack_ptlrpc_body_v2()</a>, and <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00397">unpack_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a75e70c906ed859881dddce7a938c5e9d"></a><!-- doxytag: member="ptlrpc_internal.h::lustre_unpack_req_ptlrpc_body" ref="a75e70c906ed859881dddce7a938c5e9d" args="(struct ptlrpc_request *req, int offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_unpack_req_ptlrpc_body </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pack__generic_8c_source.html#l00649">649</a> of file <a class="el" href="pack__generic_8c_source.html">pack_generic.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="packet-lustre_8c_source.html#l00048">LUSTRE_MSG_MAGIC_V2</a>, <a class="el" href="pack__generic_8c_source.html#l00622">lustre_unpack_ptlrpc_body_v2()</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01835">ptlrpc_server_handle_req_in()</a>.</p>

</div>
</div>
<a class="anchor" id="a9c2ce56e9afc4491bce4f3841540d85e"></a><!-- doxytag: member="ptlrpc_internal.h::nodemap_mod_exit" ref="a9c2ce56e9afc4491bce4f3841540d85e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void nodemap_mod_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00346">346</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9599d13fd0042e9eaaf5f415e7c2f46e"></a><!-- doxytag: member="ptlrpc_internal.h::nodemap_mod_init" ref="a9599d13fd0042e9eaaf5f415e7c2f46e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int nodemap_mod_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00341">341</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a10d9dd9f058422d6216b9f8dc5d61b81"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_pol2cptab" ref="a10d9dd9f058422d6216b9f8dc5d61b81" args="(struct ptlrpc_nrs_policy *policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a>* nrs_pol2cptab </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00223">223</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="ptlrpc__internal_8h_source.html#l00211">nrs_pol2svc()</a>, and <a class="el" href="lustre__net_8h_source.html#l01724">ptlrpc_service::srv_cptable</a>.</p>

<p>Referenced by <a class="el" href="nrs__fifo_8c_source.html#l00079">nrs_fifo_start()</a>.</p>

</div>
</div>
<a class="anchor" id="af200f6621e663dc556db992bae06b14f"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_pol2cptid" ref="af200f6621e663dc556db992bae06b14f" args="(const struct ptlrpc_nrs_policy *policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int nrs_pol2cptid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00205">205</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="lustre__nrs_8h_source.html#l00342">ptlrpc_nrs::nrs_svcpt</a>, <a class="el" href="lustre__nrs_8h_source.html#l00618">ptlrpc_nrs_policy::pol_nrs</a>, and <a class="el" href="lustre__net_8h_source.html#l01753">ptlrpc_service_part::scp_cpt</a>.</p>

<p>Referenced by <a class="el" href="nrs__fifo_8c_source.html#l00079">nrs_fifo_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a06ddfd3cdb832cb44eda6902661f6c10"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_pol2svc" ref="a06ddfd3cdb832cb44eda6902661f6c10" args="(struct ptlrpc_nrs_policy *policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a>* nrs_pol2svc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00211">211</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="lustre__nrs_8h_source.html#l00342">ptlrpc_nrs::nrs_svcpt</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00618">ptlrpc_nrs_policy::pol_nrs</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00223">nrs_pol2cptab()</a>.</p>

</div>
</div>
<a class="anchor" id="a30a76e679b41a89a6b11699378a5d610"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_pol2svcpt" ref="a30a76e679b41a89a6b11699378a5d610" args="(struct ptlrpc_nrs_policy *policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a>* nrs_pol2svcpt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00217">217</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="lustre__nrs_8h_source.html#l00342">ptlrpc_nrs::nrs_svcpt</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00618">ptlrpc_nrs_policy::pol_nrs</a>.</p>

</div>
</div>
<a class="anchor" id="a8eb74cfa0282b5b2f72952bcd176a97d"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_request_policy" ref="a8eb74cfa0282b5b2f72952bcd176a97d" args="(struct ptlrpc_nrs_request *nrq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__nrs__policy.html">ptlrpc_nrs_policy</a>* nrs_request_policy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__nrs__request.html">ptlrpc_nrs_request</a> *&nbsp;</td>
          <td class="paramname"> <em>nrq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00238">238</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="ptlrpc__internal_8h_source.html#l00229">nrs_request_resource()</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00665">ptlrpc_nrs_resource::res_policy</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l00559">nrs_request_get()</a>, <a class="el" href="nrs_8c_source.html#l00623">nrs_request_stop()</a>, <a class="el" href="nrs_8c_source.html#l00836">ptlrpc_nrs_req_add_nolock()</a>, and <a class="el" href="nrs_8c_source.html#l01619">ptlrpc_nrs_req_del_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7c2772ccb9d6f71e23858d1d7143c98"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_request_resource" ref="ad7c2772ccb9d6f71e23858d1d7143c98" args="(struct ptlrpc_nrs_request *nrq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__nrs__resource.html">ptlrpc_nrs_resource</a>* nrs_request_resource </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__nrs__request.html">ptlrpc_nrs_request</a> *&nbsp;</td>
          <td class="paramname"> <em>nrq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00229">229</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__nrs_8h_source.html#l00702">ptlrpc_nrs_request::nr_finalized</a>, <a class="el" href="lustre__nrs_8h_source.html#l00699">ptlrpc_nrs_request::nr_initialized</a>, <a class="el" href="lustre__nrs_8h_source.html#l00698">ptlrpc_nrs_request::nr_res_idx</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00691">ptlrpc_nrs_request::nr_res_ptrs</a>.</p>

<p>Referenced by <a class="el" href="nrs__fifo_8c_source.html#l00194">nrs_fifo_req_add()</a>, and <a class="el" href="ptlrpc__internal_8h_source.html#l00238">nrs_request_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="aafe49adbbec8b2a2c6d31a336474c200"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_svc_has_hp" ref="aafe49adbbec8b2a2c6d31a336474c200" args="(const struct ptlrpc_service *svc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool nrs_svc_has_hp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *&nbsp;</td>
          <td class="paramname"> <em>svc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>If the first service partition has an HP NRS head, all service partitions will.</p>
</p>

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00189">189</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="ptlrpc__internal_8h_source.html#l00184">nrs_svcpt_has_hp()</a>, and <a class="el" href="lustre__net_8h_source.html#l01728">ptlrpc_service::srv_parts</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l01099">nrs_policy_unregister_locked()</a>, and <a class="el" href="nrs_8c_source.html#l01165">ptlrpc_nrs_policy_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a12a3fc5ebcced2d0102d16c587421595"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_svcpt2nrs" ref="a12a3fc5ebcced2d0102d16c587421595" args="(struct ptlrpc_service_part *svcpt, bool hp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__nrs.html">ptlrpc_nrs</a>* nrs_svcpt2nrs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00199">199</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00184">nrs_svcpt_has_hp()</a>, <a class="el" href="lustre__net_8h_source.html#l01821">ptlrpc_service_part::scp_nrs_hp</a>, and <a class="el" href="lustre__net_8h_source.html#l01818">ptlrpc_service_part::scp_nrs_reg</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l01099">nrs_policy_unregister_locked()</a>, <a class="el" href="nrs_8c_source.html#l00983">nrs_svcpt_setup_locked()</a>, <a class="el" href="nrs_8c_source.html#l01738">ptlrpc_nrs_policy_control()</a>, <a class="el" href="nrs_8c_source.html#l01165">ptlrpc_nrs_policy_register()</a>, <a class="el" href="nrs_8c_source.html#l01583">ptlrpc_nrs_req_get_nolock0()</a>, <a class="el" href="nrs_8c_source.html#l01673">ptlrpc_nrs_req_hp_move()</a>, <a class="el" href="nrs_8c_source.html#l01475">ptlrpc_nrs_req_initialize()</a>, <a class="el" href="nrs_8c_source.html#l01643">ptlrpc_nrs_req_pending_nolock()</a>, and <a class="el" href="nrs_8c_source.html#l01660">ptlrpc_nrs_req_throttling_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf4ffa9c17fffb706e83c266967827f0"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_svcpt_has_hp" ref="aaf4ffa9c17fffb706e83c266967827f0" args="(const struct ptlrpc_service_part *svcpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool nrs_svcpt_has_hp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00184">184</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l01821">ptlrpc_service_part::scp_nrs_hp</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00189">nrs_svc_has_hp()</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>, <a class="el" href="nrs_8c_source.html#l01026">nrs_svcpt_cleanup_locked()</a>, <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, and <a class="el" href="service_8c_source.html#l01734">ptlrpc_server_allow_normal()</a>.</p>

</div>
</div>
<a class="anchor" id="ae27ab38649b956801ef131bc5661361a"></a><!-- doxytag: member="ptlrpc_internal.h::ping_evictor_wake" ref="ae27ab38649b956801ef131bc5661361a" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ping_evictor_wake </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00583">583</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="obd__config_8c_source.html#l00717">class_incref()</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="obd_8h_source.html#l00719">obd_device::obd_evict_list</a>, <a class="el" href="pinger_8c_source.html#l00580">pet_list</a>, <a class="el" href="pinger_8c_source.html#l00574">PET_READY</a>, <a class="el" href="pinger_8c_source.html#l00578">pet_state</a>, and <a class="el" href="pinger_8c_source.html#l00579">pet_waitq</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01037">ptlrpc_update_export_timer()</a>.</p>

</div>
</div>
<a class="anchor" id="ae067008055fbc59b0c9f72abe8531fac"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_add_unreplied" ref="ae067008055fbc59b0c9f72abe8531fac" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_add_unreplied </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00658">658</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00200">obd_import::imp_unreplied_list</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00449">list_for_each_prev</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l00875">rq_unreplied_list</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00681">ptlrpc_assign_next_xid_nolock()</a>, <a class="el" href="import_8c_source.html#l00952">ptlrpc_prepare_replay()</a>, and <a class="el" href="recover_8c_source.html#l00072">ptlrpc_replay_next()</a>.</p>

</div>
</div>
<a class="anchor" id="ac179b6ddfe8bdcc1dddfa84f0f5178b3"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_assign_next_xid_nolock" ref="ac179b6ddfe8bdcc1dddfa84f0f5178b3" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_assign_next_xid_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00681">681</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="client_8c_source.html#l00658">ptlrpc_add_unreplied()</a>, <a class="el" href="client_8c_source.html#l03177">ptlrpc_next_xid()</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, and <a class="el" href="client_8c_source.html#l00687">ptlrpc_assign_next_xid()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ba563478c05c9e93c9a322e6b2803c4"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_at_adj_net_latency" ref="a5ba563478c05c9e93c9a322e6b2803c4" args="(struct ptlrpc_request *req, unsigned int service_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_at_adj_net_latency </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>service_time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00357">357</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00373">at_get()</a>, <a class="el" href="import_8c_source.html#l01665">at_measured()</a>, <a class="el" href="lustre__net_8h_source.html#l00523">ptlrpc_connection::c_remote_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00263">CFS_DURATION_T</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__time_8h_source.html#l00051">cfs_time_sub()</a>, <a class="el" href="lustre__import_8h_source.html#l00059">D_ADAPTTO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00139">D_WARNING</a>, <a class="el" href="lustre__import_8h_source.html#l00089">imp_at::iat_net_latency</a>, <a class="el" href="lustre__import_8h_source.html#l00323">obd_import::imp_at</a>, <a class="el" href="lustre__import_8h_source.html#l00170">obd_import::imp_connection</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, and <a class="el" href="lustre__net_8h_source.html#l01117">ptlrpc_request::rq_sent</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01297">after_reply()</a>, <a class="el" href="client_8c_source.html#l00421">ptlrpc_at_recv_early_reply()</a>, and <a class="el" href="import_8c_source.html#l00984">ptlrpc_connect_interpret()</a>.</p>

</div>
</div>
<a class="anchor" id="aab29a99944d2ec08540df8db699e6c94"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_cli_req_init" ref="aab29a99944d2ec08540df8db699e6c94" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_cli_req_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialise client side ptlrpc request </p>

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00368">368</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00812">ptlrpc_cli_req::cr_ctx_chain</a>, <a class="el" href="lustre__net_8h_source.html#l00824">ptlrpc_cli_req::cr_reply_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l00810">ptlrpc_cli_req::cr_set_chain</a>, <a class="el" href="lustre__net_8h_source.html#l00808">ptlrpc_cli_req::cr_set_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l00836">ptlrpc_cli_req::cr_unreplied_list</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00359">ptlrpc_req_comm_init()</a>, <a class="el" href="lustre__net_8h_source.html#l01048">ptlrpc_request::rq_cli</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_receiving_reply</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_reply_unlinked</a>, and <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_req_unlinked</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00799">__ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l03315">ptlrpcd_alloc_work()</a>, <a class="el" href="sec_8c_source.html#l01130">sptlrpc_cli_unwrap_early_reply()</a>, and <a class="el" href="sec_8c_source.html#l00926">sptlrpc_import_check_ctx()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d388441b7daf6d1f8c54fea371404e8"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_exit_portals" ref="a8d388441b7daf6d1f8c54fea371404e8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_exit_portals </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00632">632</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="events_8c_source.html#l00542">ptlrpc_ni_fini()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b3fbdcfa3f3e2d017c7fcc37c3e7ae5"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_expire_one_request" ref="a9b3fbdcfa3f3e2d017c7fcc37c3e7ae5" args="(struct ptlrpc_request *req, int async_unlink)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_expire_one_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>async_unlink</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time out request <em>req</em>. </p>
<p>is <em>async_unlink</em> is set, that means do not wait until LNet actually confirms <a class="el" href="structnetwork.html">network</a> buffer unlinking. Return 1 if we should give up further retrying attempts or 0 otherwise. </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l02050">2050</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00521">ptlrpc_connection::c_peer</a>, <a class="el" href="linux-time_8h_source.html#l00263">CFS_DURATION_T</a>, <a class="el" href="libcfs__time_8h_source.html#l00061">cfs_time_aftereq()</a>, <a class="el" href="linux-time_8h_source.html#l00142">cfs_time_before()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00139">D_WARNING</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__import_8h_source.html#l00170">obd_import::imp_connection</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_dlm_fake</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="lustre__import_8h_source.html#l00228">obd_import::imp_timeouts</a>, <a class="el" href="libcfs_2libcfs_2debug_8c_source.html#l00251">libcfs_debug_dumplog()</a>, <a class="el" href="api-ni_8c_source.html#l02111">LNetDebugPeer()</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, <a class="el" href="pack__generic_8c_source.html#l01188">lustre_msg_get_conn_cnt()</a>, <a class="el" href="class__obd_8c_source.html#l00073">obd_debug_peer_on_timeout</a>, <a class="el" href="class__obd_8c_source.html#l00075">obd_dump_on_timeout</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_no_recov</a>, <a class="el" href="import_8c_source.html#l00429">ptlrpc_fail_import()</a>, <a class="el" href="lustre__import_8h_source.html#l00111">ptlrpc_import_state_name()</a>, <a class="el" href="lustre__net_8h_source.html#l02563">ptlrpc_no_resend()</a>, <a class="el" href="niobuf_8c_source.html#l00420">ptlrpc_unregister_bulk()</a>, <a class="el" href="client_8c_source.html#l02512">ptlrpc_unregister_reply()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_ctx_fini</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_ctx_init</a>, <a class="el" href="lustre__net_8h_source.html#l01119">ptlrpc_request::rq_deadline</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_err</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l00966">ptlrpc_request::rq_lock</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_net_err</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01117">ptlrpc_request::rq_sent</a>, <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>, and <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_timedout</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l00622">ctx_refresh_timeout()</a>, <a class="el" href="client_8c_source.html#l01644">ptlrpc_check_set()</a>, and <a class="el" href="client_8c_source.html#l02121">ptlrpc_expired_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5d7cfee5628090111ef04b2e7054a3e"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_expired_set" ref="ac5d7cfee5628090111ef04b2e7054a3e" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_expired_set </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time out all uncompleted requests in request set pointed by <em>data</em> Callback used when waiting on sets with l_wait_event. </p>
<p>Always returns 1. </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l02121">2121</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="client_8c_source.html#l02050">ptlrpc_expire_one_request()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01119">ptlrpc_request::rq_deadline</a>, <a class="el" href="lustre__net_8h_source.html#l01009">ptlrpc_request::rq_phase</a>, <a class="el" href="lustre__net_8h_source.html#l00719">RQ_PHASE_BULK</a>, <a class="el" href="lustre__net_8h_source.html#l00718">RQ_PHASE_RPC</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_resend</a>, <a class="el" href="lustre__net_8h_source.html#l00861">rq_set_chain</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_timedout</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_wait_ctx</a>, and <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_waiting</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00427">ptlrpcd()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7d47586db15c8cb1c637fa6fe4b369b"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_fill_bulk_md" ref="ae7d47586db15c8cb1c637fa6fe4b369b" args="(lnet_md_t *md, struct ptlrpc_bulk_desc *desc, int mdcnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_fill_bulk_md </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__md__t.html">lnet_md_t</a> *&nbsp;</td>
          <td class="paramname"> <em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__bulk__desc.html">ptlrpc_bulk_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mdcnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pers_8c_source.html#l00048">48</a> of file <a class="el" href="pers_8c_source.html">pers.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l01487">BD_GET_ENC_KIOV</a>, <a class="el" href="lustre__net_8h_source.html#l01491">BD_GET_ENC_KVEC</a>, <a class="el" href="lustre__net_8h_source.html#l01485">BD_GET_KIOV</a>, <a class="el" href="lustre__net_8h_source.html#l01489">BD_GET_KVEC</a>, <a class="el" href="lustre__net_8h_source.html#l01453">ptlrpc_bulk_desc::bd_iov_count</a>, <a class="el" href="lustre__net_8h_source.html#l01442">ptlrpc_bulk_desc::bd_type</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="lustre__net_8h_source.html#l01486">GET_ENC_KIOV</a>, <a class="el" href="lustre__net_8h_source.html#l01490">GET_ENC_KVEC</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00370">lnet_md_t::length</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00450">LNET_MAX_IOV</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00466">LNET_MD_IOVEC</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00470">LNET_MD_KIOV</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00473">LNET_MD_PHYS</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00426">lnet_md_t::options</a>, <a class="el" href="lustre__net_8h_source.html#l01375">ptlrpc_is_bulk_desc_kiov()</a>, <a class="el" href="lustre__net_8h_source.html#l01369">ptlrpc_is_bulk_desc_kvec()</a>, <a class="el" href="lustre__net_8h_source.html#l00105">PTLRPC_MAX_BRW_PAGES</a>, and <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00369">lnet_md_t::start</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e60d77cf17000baa5ffdabd3ddd9b5a"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_handle_failed_import" ref="a1e60d77cf17000baa5ffdabd3ddd9b5a" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_handle_failed_import </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2c8c7a9090a531c4cdd1a4621698c816"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_import_in_recovery" ref="a2c8c7a9090a531c4cdd1a4621698c816" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_import_in_recovery </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="recover_8c_source.html#l00393">393</a> of file <a class="el" href="recover_8c_source.html">recover.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="lustre__import_8h_source.html#l00098">LUSTRE_IMP_CLOSED</a>, <a class="el" href="lustre__import_8h_source.html#l00100">LUSTRE_IMP_DISCON</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, and <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_no_recov</a>.</p>

<p>Referenced by <a class="el" href="import_8c_source.html#l01550">ptlrpc_disconnect_import()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, and <a class="el" href="recover_8c_source.html#l00333">ptlrpc_recover_import()</a>.</p>

</div>
</div>
<a class="anchor" id="adfbc17abb450b19c63d879220cc98ec3"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_init_portals" ref="adfbc17abb450b19c63d879220cc98ec3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_init_portals </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="events_8c_source.html#l00615">615</a> of file <a class="el" href="events_8c_source.html">events.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="events_8c_source.html#l00542">ptlrpc_ni_fini()</a>, <a class="el" href="events_8c_source.html#l00583">ptlrpc_ni_init()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00955">ptlrpcd_addref()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c3a77dc12500211df2df050eae99040"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_init_xid" ref="a2c3a77dc12500211df2df050eae99040" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_init_xid </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l03147">3147</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="prng_8c_source.html#l00111">cfs_get_random_bytes()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="lustre__net_8h_source.html#l00086">PTLRPC_BULK_OPS_COUNT</a>, <a class="el" href="lustre__net_8h_source.html#l00094">PTLRPC_BULK_OPS_MASK</a>, and <a class="el" href="client_8c_source.html#l03146">YEAR_2004</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a4fe157068d0691ef598aee85d69a92b0"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_initiate_recovery" ref="a4fe157068d0691ef598aee85d69a92b0" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_initiate_recovery </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start recovery on disconnected import. </p>
<p>This is done by just attempting a connect </p>

<p>Definition at line <a class="el" href="recover_8c_source.html#l00058">58</a> of file <a class="el" href="recover_8c_source.html">recover.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="obd_8h_source.html#l00332">obd2cli_tgt</a>, and <a class="el" href="import_8c_source.html#l00648">ptlrpc_connect_import()</a>.</p>

<p>Referenced by <a class="el" href="pinger_8c_source.html#l00187">ptlrpc_pinger_process_import()</a>.</p>

</div>
</div>
<a class="anchor" id="a61c8458a53357bfdd5228af942c30c55"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_known_replied_xid" ref="a61c8458a53357bfdd5228af942c30c55" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ptlrpc_known_replied_xid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l01272">1272</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00202">obd_import::imp_known_replied_xid</a>, <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00200">obd_import::imp_unreplied_list</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="lustre__net_8h_source.html#l00875">rq_unreplied_list</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="import_8c_source.html#l00952">ptlrpc_prepare_replay()</a>, and <a class="el" href="client_8c_source.html#l01494">ptlrpc_send_new_req()</a>.</p>

</div>
</div>
<a class="anchor" id="aef4db99bd8fe919f2cbd633eb11454a8"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_new_bulk" ref="aef4db99bd8fe919f2cbd633eb11454a8" args="(unsigned npages, unsigned max_brw, enum ptlrpc_bulk_op_type type, unsigned portal, const struct ptlrpc_bulk_frag_ops *ops)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__bulk__desc.html">ptlrpc_bulk_desc</a>* ptlrpc_new_bulk </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>nfrags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>max_brw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__net.html#gaa3f75b2ff04d1cf65bcbbe7ab0ea1bef">ptlrpc_bulk_op_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>portal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structptlrpc__bulk__frag__ops.html">ptlrpc_bulk_frag_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate and initialize new bulk descriptor on the sender. </p>
<p>Returns pointer to the descriptor or NULL on error. </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l00117">117</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="structptlrpc__bulk__frag__ops.html#a071eacf4504ae84799e0f989a0e43229">ptlrpc_bulk_frag_ops::add_iov_frag</a>, <a class="el" href="structptlrpc__bulk__frag__ops.html#a3338125828618910ae190978e235d52a">ptlrpc_bulk_frag_ops::add_kiov_frag</a>, <a class="el" href="lustre__net_8h_source.html#l01451">ptlrpc_bulk_desc::bd_frag_ops</a>, <a class="el" href="lustre__net_8h_source.html#l01453">ptlrpc_bulk_desc::bd_iov_count</a>, <a class="el" href="lustre__net_8h_source.html#l01438">ptlrpc_bulk_desc::bd_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01454">ptlrpc_bulk_desc::bd_max_iov</a>, <a class="el" href="lustre__net_8h_source.html#l01462">ptlrpc_bulk_desc::bd_md_count</a>, <a class="el" href="lustre__net_8h_source.html#l01463">ptlrpc_bulk_desc::bd_md_max_brw</a>, <a class="el" href="lustre__net_8h_source.html#l01465">ptlrpc_bulk_desc::bd_mds</a>, <a class="el" href="lustre__net_8h_source.html#l01444">ptlrpc_bulk_desc::bd_portal</a>, <a class="el" href="lustre__net_8h_source.html#l01442">ptlrpc_bulk_desc::bd_type</a>, <a class="el" href="lustre__net_8h_source.html#l01452">ptlrpc_bulk_desc::bd_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01484">GET_KIOV</a>, <a class="el" href="lustre__net_8h_source.html#l01488">GET_KVEC</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00274">LNetInvalidateHandle()</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__net_8h_source.html#l01337">PTLRPC_BULK_BUF_KIOV</a>, <a class="el" href="lustre__net_8h_source.html#l00086">PTLRPC_BULK_OPS_COUNT</a>, <a class="el" href="lustre__net_8h_source.html#l01375">ptlrpc_is_bulk_desc_kiov()</a>, and <a class="el" href="lustre__net_8h_source.html#l01369">ptlrpc_is_bulk_desc_kvec()</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00174">ptlrpc_prep_bulk_imp()</a>.</p>

</div>
</div>
<a class="anchor" id="ab94623e611d2b1ab7143fc656f8df4b3"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_fini" ref="ab94623e611d2b1ab7143fc656f8df4b3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_nrs_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes all policy descriptors from <a class="el" href="structnrs__core.html#a6bd6f7f96d860c488aff9d4e638d272d" title="List of all policy descriptors registered with NRS core; protected by nrs_core::nrs_mutex...">nrs_core::nrs_policies</a>, and frees the policy descriptors. </p>
<p>Since all PTLRPC services are stopped at this point, there are no more instances of any policies, because each service will have stopped its policy instances in <a class="el" href="nrs_8c.html#addde07332222429e28ec6cb0a78ca460" title="Unregisters all policies on all service partitions of service svc.">ptlrpc_service_nrs_cleanup()</a>, so we just need to free the descriptors here. </p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01836">1836</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00445">ptlrpc_nrs_pol_desc::pd_list</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>, and <a class="el" href="nrs_8c_source.html#l01787">ptlrpc_nrs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a88b6333c295cad770117c12285bc8382"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_init" ref="a88b6333c295cad770117c12285bc8382" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_nrs_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds all policies that ship with the ptlrpc module, to NRS core's list of policies <em><a class="el" href="structnrs__core.html#a6bd6f7f96d860c488aff9d4e638d272d" title="List of all policy descriptors registered with NRS core; protected by nrs_core::nrs_mutex...">nrs_core.nrs_policies</a></em>. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>all policies have been registered successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p><p>Since no PTLRPC services have been started at this point, all we need to do for cleanup is to free the descriptors.</p>
</p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01787">1787</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="nrs__fifo_8c_source.html#l00260">nrs_conf_fifo</a>, <a class="el" href="nrs_8c_source.html#l01836">ptlrpc_nrs_fini()</a>, <a class="el" href="nrs_8c_source.html#l01165">ptlrpc_nrs_policy_register()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a4970fb4b913c82e5566a7ecbcd8a26b7"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_policy_control" ref="a4970fb4b913c82e5566a7ecbcd8a26b7" args="(const struct ptlrpc_service *svc, enum ptlrpc_nrs_queue_type queue, char *name, enum ptlrpc_nrs_ctl opc, bool single, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_nrs_policy_control </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *&nbsp;</td>
          <td class="paramname"> <em>svc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__nrs.html#ga79e63c48a144326744316f397c52a883">ptlrpc_nrs_queue_type</a>&nbsp;</td>
          <td class="paramname"> <em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__nrs.html#gaa3db631148675f8074864fa452691540">ptlrpc_nrs_ctl</a>&nbsp;</td>
          <td class="paramname"> <em>opc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>single</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Carries out a control operation <em>opc</em> on the policy identified by the human-readable <em>name</em>, on either all partitions, or only on the first partition of service <em>svc</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svc</em>&nbsp;</td><td>the service the policy belongs to. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>queue</em>&nbsp;</td><td>whether to carry out the command on the policy which belongs to the regular, high-priority, or both NRS heads of service partitions of <em>svc</em>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the policy to act upon, by human-readable name </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>opc</em>&nbsp;</td><td>the opcode of the operation to carry out </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>single</em>&nbsp;</td><td>when set, the operation will only be carried out on the NRS heads of the first service partition of <em>svc</em>. This is useful for some policies which e.g. share identical values on the same parameters of different service partitions; when reading these parameters via lprocfs, these policies may just want to obtain and print out the values from the first service partition. Storing these values centrally elsewhere then could be another solution for this. </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>arg</em>&nbsp;</td><td>can be used as a generic in/out buffer between control operations and the user environment.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>error condition </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>operation was carried out successfully </td></tr>
  </table>
  </dd>
</dl>

<p><p>XXX: We could optionally check for nrs_svc_has_hp(svc) here, and return an error if it is false. Right now we rely on the policies' lprocfs handlers that call the present function to make this check; if they fail to do so, they might hit the assertion inside <a class="el" href="ptlrpc__internal_8h.html#a12a3fc5ebcced2d0102d16c587421595">nrs_svcpt2nrs()</a> below.</p>
</p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01738">1738</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="nrs_8c_source.html#l00655">nrs_policy_ctl()</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>, <a class="el" href="lustre__nrs_8h_source.html#l00052">PTLRPC_NRS_CTL_INVALID</a>, <a class="el" href="lustre__nrs_8h_source.html#l00294">PTLRPC_NRS_QUEUE_BOTH</a>, <a class="el" href="lustre__nrs_8h_source.html#l00293">PTLRPC_NRS_QUEUE_HP</a>, <a class="el" href="lustre__nrs_8h_source.html#l00292">PTLRPC_NRS_QUEUE_REG</a>, <a class="el" href="lustre__net_8h_source.html#l01857">ptlrpc_service_for_each_part</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a376ea8577919ec8eb729d36195bcbf1a"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_add" ref="a376ea8577919ec8eb729d36195bcbf1a" args="(struct ptlrpc_service_part *svcpt, struct ptlrpc_request *req, bool hp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_nrs_req_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enqueues request <em>req</em> on either the regular or high-priority NRS head of service partition <em>svcpt</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svcpt</em>&nbsp;</td><td>the service partition </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>req</em>&nbsp;</td><td>the request to be enqueued </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hp</em>&nbsp;</td><td>whether to enqueue the request on the regular or high-priority NRS head. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01524">1524</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="nrs_8c_source.html#l00861">ptlrpc_nrs_hpreq_add_nolock()</a>, and <a class="el" href="nrs_8c_source.html#l00836">ptlrpc_nrs_req_add_nolock()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01634">ptlrpc_server_request_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a7da7205147ceea7096dc6bdfe96a2d4c"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_del_nolock" ref="a7da7205147ceea7096dc6bdfe96a2d4c" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_nrs_req_del_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dequeues request <em>req</em> from the policy it has been enqueued on. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>req</em>&nbsp;</td><td>the request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01619">1619</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="ptlrpc__internal_8h_source.html#l00238">nrs_request_policy()</a>, <a class="el" href="nrs_8c_source.html#l01537">nrs_request_removed()</a>, <a class="el" href="structptlrpc__nrs__pol__ops.html#a1eb83c9a1da21c4090e85c6711dbf6d6">ptlrpc_nrs_pol_ops::op_req_dequeue</a>, <a class="el" href="lustre__nrs_8h_source.html#l00449">ptlrpc_nrs_pol_desc::pd_ops</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00626">ptlrpc_nrs_policy::pol_desc</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l01673">ptlrpc_nrs_req_hp_move()</a>.</p>

</div>
</div>
<a class="anchor" id="aa35053963b23dd9e0dc17f6b214da481"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_finalize" ref="aa35053963b23dd9e0dc17f6b214da481" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_nrs_req_finalize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Releases resources for a request; is called after the request has been handled. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>req</em>&nbsp;</td><td>the request</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="service_8c.html#a2d71c5442a9a62c66bd99bc984d2c8d1" title="to finish a request: stop sending more early replies, and release the request.">ptlrpc_server_finish_request()</a> </dd></dl>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01499">1499</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="nrs_8c_source.html#l00511">nrs_resource_put_safe()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01013">ptlrpc_server_finish_active_request()</a>, and <a class="el" href="service_8c_source.html#l01634">ptlrpc_server_request_add()</a>.</p>

</div>
</div>
<a class="anchor" id="ad92335242ec3763ecf8874e00c41efee"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_get_nolock" ref="ad92335242ec3763ecf8874e00c41efee" args="(struct ptlrpc_service_part *svcpt, bool hp, bool force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a>* ptlrpc_nrs_req_get_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00160">160</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="nrs_8c_source.html#l01583">ptlrpc_nrs_req_get_nolock0()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01789">ptlrpc_server_request_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a54ec453671a55cf9b6012577c03eaca6"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_get_nolock0" ref="a54ec453671a55cf9b6012577c03eaca6" args="(struct ptlrpc_service_part *svcpt, bool hp, bool peek, bool force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a>* ptlrpc_nrs_req_get_nolock0 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>peek</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtains a request for handling from an NRS head of service partition <em>svcpt</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svcpt</em>&nbsp;</td><td>the service partition </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hp</em>&nbsp;</td><td>whether to obtain a request from the regular or high-priority NRS head. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>peek</em>&nbsp;</td><td>when set, signifies that we just want to examine the request, and not handle it, so the request is not removed from the policy. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>force</em>&nbsp;</td><td>when set, it will force a policy to return a request if it has one pending</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>the</em>&nbsp;</td><td>request to be handled </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>the head has no requests to serve </td></tr>
  </table>
  </dd>
</dl>

<p><p>Always try to drain requests from all NRS polices even if they are inactive, because the user can change policy status at runtime.</p>
</p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01583">1583</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__nrs_8h_source.html#l00701">ptlrpc_nrs_request::nr_started</a>, <a class="el" href="lustre__nrs_8h_source.html#l00338">ptlrpc_nrs::nrs_policy_queued</a>, <a class="el" href="lustre__nrs_8h_source.html#l00362">ptlrpc_nrs::nrs_req_started</a>, <a class="el" href="nrs_8c_source.html#l00559">nrs_request_get()</a>, <a class="el" href="nrs_8c_source.html#l01537">nrs_request_removed()</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>, <a class="el" href="lustre__nrs_8h_source.html#l00618">ptlrpc_nrs_policy::pol_nrs</a>, <a class="el" href="lustre__nrs_8h_source.html#l00606">ptlrpc_nrs_policy::pol_req_started</a>, and <a class="el" href="lustre__net_8h_source.html#l00939">rq_nrq</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00160">ptlrpc_nrs_req_get_nolock()</a>, and <a class="el" href="ptlrpc__internal_8h_source.html#l00167">ptlrpc_nrs_req_peek_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="a040685413af9d845199d4866c37316b8"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_initialize" ref="a040685413af9d845199d4866c37316b8" args="(struct ptlrpc_service_part *svcpt, struct ptlrpc_request *req, bool hp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_nrs_req_initialize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtains NRS head resources for request <em>req</em>. </p>
<p>These could be either on the regular or HP NRS head of <em>svcpt</em>; resources taken on the regular head can later be swapped for HP head resources by ldlm_lock_reorder_req().</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svcpt</em>&nbsp;</td><td>the service partition </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>req</em>&nbsp;</td><td>the request </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hp</em>&nbsp;</td><td>which NRS head of <em>svcpt</em> to use </td></tr>
  </table>
  </dd>
</dl>

<p><p>It is fine to access <em>nr_initialized</em> without locking as there is no contention at this early stage.</p>
</p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01475">1475</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="nrs_8c_source.html#l00457">nrs_resource_get_safe()</a>, and <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01634">ptlrpc_server_request_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a2b75bda47bbc05dc96217fa09e392107"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_peek_nolock" ref="a2b75bda47bbc05dc96217fa09e392107" args="(struct ptlrpc_service_part *svcpt, bool hp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a>* ptlrpc_nrs_req_peek_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00167">167</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="nrs_8c_source.html#l01583">ptlrpc_nrs_req_get_nolock0()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l03193">ptlrpc_svcpt_health_check()</a>.</p>

</div>
</div>
<a class="anchor" id="acd9117d134d826c1aaed14e2e8d5f57d"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_pending_nolock" ref="acd9117d134d826c1aaed14e2e8d5f57d" args="(struct ptlrpc_service_part *svcpt, bool hp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ptlrpc_nrs_req_pending_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns whether there are any requests currently enqueued on any of the policies of service partition's <em>svcpt</em> NRS head specified by <em>hp</em>. </p>
<p>Should be called while holding ptlrpc_service_part::scp_req_lock to get a reliable result.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svcpt</em>&nbsp;</td><td>the service partition to enquire. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hp</em>&nbsp;</td><td>whether the regular or high-priority NRS head is to be enquired.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>the indicated NRS head has no enqueued requests. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>the indicated NRS head has some enqueued requests. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01643">1643</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="lustre__nrs_8h_source.html#l00358">ptlrpc_nrs::nrs_req_queued</a>, and <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, <a class="el" href="service_8c_source.html#l01718">ptlrpc_server_high_pending()</a>, and <a class="el" href="service_8c_source.html#l01761">ptlrpc_server_normal_pending()</a>.</p>

</div>
</div>
<a class="anchor" id="a41d6af6b26aebda69530fe3537266dfd"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_stop_nolock" ref="a41d6af6b26aebda69530fe3537266dfd" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_nrs_req_stop_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01509">1509</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="nrs_8c_source.html#l00623">nrs_request_stop()</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01013">ptlrpc_server_finish_active_request()</a>.</p>

</div>
</div>
<a class="anchor" id="adca0e099406dbe4e2f80aed92e475774"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_nrs_req_throttling_nolock" ref="adca0e099406dbe4e2f80aed92e475774" args="(struct ptlrpc_service_part *svcpt, bool hp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ptlrpc_nrs_req_throttling_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>hp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns whether NRS policy is throttling reqeust. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svcpt</em>&nbsp;</td><td>the service partition to enquire. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hp</em>&nbsp;</td><td>whether the regular or high-priority NRS head is to be enquired.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>the indicated NRS head has no enqueued requests. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>the indicated NRS head has some enqueued requests. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01660">1660</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>, and <a class="el" href="lustre__nrs_8h_source.html#l00379">ptlrpc_nrs::nrs_throttling</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, and <a class="el" href="service_8c_source.html#l01734">ptlrpc_server_allow_normal()</a>.</p>

</div>
</div>
<a class="anchor" id="a31372574ecd5215aadf8e4d926e461e5"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_ping_import_soon" ref="a31372574ecd5215aadf8e4d926e461e5" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_ping_import_soon </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00132">132</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, and <a class="el" href="lustre__import_8h_source.html#l00262">obd_import::imp_next_ping</a>.</p>

</div>
</div>
<a class="anchor" id="a8ab218d674e68c86418b19144736aae1"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_pinger_commit_expected" ref="a8ab218d674e68c86418b19144736aae1" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_pinger_commit_expected </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00390">390</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00316">obd_import::imp_connect_data</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_force_next_verify</a>, <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, <a class="el" href="lustre__idl_8h_source.html#l01268">OCD_HAS_FLAG</a>, and <a class="el" href="pinger_8c_source.html#l00118">ptlrpc_update_next_ping()</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01297">after_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a7fef8e60275ec1d9d8599ca55923fe81"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_pinger_sending_on_import" ref="a7fef8e60275ec1d9d8599ca55923fe81" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_pinger_sending_on_import </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00385">385</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="pinger_8c_source.html#l00118">ptlrpc_update_next_ping()</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c704c39022fb4392b8743576a317f86"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_pinger_wake_up" ref="a0c704c39022fb4392b8743576a317f86" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_pinger_wake_up </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00565">565</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="pinger_8c_source.html#l00320">pinger_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01498">SVC_EVENT</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01582">thread_add_flags()</a>.</p>

<p>Referenced by <a class="el" href="import_8c_source.html#l00778">ptlrpc_maybe_ping_import_soon()</a>, <a class="el" href="pinger_8c_source.html#l00405">ptlrpc_pinger_add_import()</a>, and <a class="el" href="import_8c_source.html#l00415">ptlrpc_pinger_force()</a>.</p>

</div>
</div>
<a class="anchor" id="a18f3f87975dafee6e1c2b367c0c2db5c"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_recoverable_error" ref="a18f3f87975dafee6e1c2b367c0c2db5c" args="(int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool ptlrpc_recoverable_error </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00320">320</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01297">after_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a77cdc1b5ffce57e1f72b9407b500866b"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_replay_next" ref="a77cdc1b5ffce57e1f72b9407b500866b" args="(struct obd_import *imp, int *inflight)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_replay_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>inflight</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Identify what request from replay list needs to be replayed next (based on what we have already replayed) and send it to server. </p>

<p>Definition at line <a class="el" href="recover_8c_source.html#l00072">72</a> of file <a class="el" href="recover_8c_source.html">recover.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__import_8h_source.html#l00195">obd_import::imp_committed_list</a>, <a class="el" href="lustre__import_8h_source.html#l00246">obd_import::imp_last_replay_transno</a>, <a class="el" href="lustre__import_8h_source.html#l00255">obd_import::imp_last_transno_checked</a>, <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00248">obd_import::imp_peer_committed_transno</a>, <a class="el" href="lustre__import_8h_source.html#l00196">obd_import::imp_replay_cursor</a>, <a class="el" href="lustre__import_8h_source.html#l00183">obd_import::imp_replay_list</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_resend_replay</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00266">list_for_each_safe</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="pack__generic_8c_source.html#l00848">lustre_msg_add_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd_8h_source.html#l00332">obd2cli_tgt</a>, <a class="el" href="list_8h_source.html#l00043">list_head::prev</a>, <a class="el" href="client_8c_source.html#l00658">ptlrpc_add_unreplied()</a>, <a class="el" href="client_8c_source.html#l02626">ptlrpc_free_committed()</a>, <a class="el" href="client_8c_source.html#l03006">ptlrpc_replay_req()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01045">ptlrpc_request::rq_replay_list</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01034">ptlrpc_request::rq_transno</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="import_8c_source.html#l01449">ptlrpc_import_recovery_state_machine()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cfb5431d2e0fc8562e6baba474521e9"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_req_comm_init" ref="a5cfb5431d2e0fc8562e6baba474521e9" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_req_comm_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialise ptlrpc common fields </p>

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00359">359</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__net_8h_source.html#l00962">ptlrpc_request::rq_list</a>, <a class="el" href="lustre__net_8h_source.html#l00966">ptlrpc_request::rq_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01016">ptlrpc_request::rq_refcount</a>, and <a class="el" href="lustre__net_8h_source.html#l01045">ptlrpc_request::rq_replay_list</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00368">ptlrpc_cli_req_init()</a>, and <a class="el" href="ptlrpc__internal_8h_source.html#l00385">ptlrpc_srv_req_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b7b51f484074d5b89cf858dcc60bda0"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_req_is_connect" ref="a5b7b51f484074d5b89cf858dcc60bda0" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool ptlrpc_req_is_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00396">396</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="packet-lustre_8c_source.html#l00206">MDS_CONNECT</a>, <a class="el" href="packet-lustre_8c_source.html#l00309">MGS_CONNECT</a>, <a class="el" href="packet-lustre_8c_source.html#l00171">OST_CONNECT</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01494">ptlrpc_send_new_req()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6a968ba843521337097fcbbed39308b"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_req_is_disconnect" ref="aa6a968ba843521337097fcbbed39308b" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool ptlrpc_req_is_disconnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00406">406</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="packet-lustre_8c_source.html#l00207">MDS_DISCONNECT</a>, <a class="el" href="packet-lustre_8c_source.html#l00310">MGS_DISCONNECT</a>, <a class="el" href="packet-lustre_8c_source.html#l00172">OST_DISCONNECT</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01494">ptlrpc_send_new_req()</a>.</p>

</div>
</div>
<a class="anchor" id="a8125370d60343843a20c56bb811ffd4b"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_reqset_put" ref="a8125370d60343843a20c56bb811ffd4b" args="(struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_reqset_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00352">352</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00316">ptlrpcd_check()</a>.</p>

</div>
</div>
<a class="anchor" id="af6ed95facf669fc40ac53a9ffa67cf1b"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_request_cache_alloc" ref="af6ed95facf669fc40ac53a9ffa67cf1b" args="(gfp_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a>* ptlrpc_request_cache_alloc </td>
          <td>(</td>
          <td class="paramtype">gfp_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00492">492</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00851">OBD_SLAB_ALLOC_PTR_GFP</a>, and <a class="el" href="client_8c_source.html#l00477">request_cache</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00799">__ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00533">ptlrpc_add_rqs_to_pool()</a>, <a class="el" href="service_8c_source.html#l01259">ptlrpc_at_send_early_reply()</a>, <a class="el" href="client_8c_source.html#l03315">ptlrpcd_alloc_work()</a>, <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>, <a class="el" href="sec_8c_source.html#l01130">sptlrpc_cli_unwrap_early_reply()</a>, and <a class="el" href="sec_8c_source.html#l00926">sptlrpc_import_check_ctx()</a>.</p>

</div>
</div>
<a class="anchor" id="a522ac1657e956ed4312113516aec1e6f"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_request_cache_fini" ref="a522ac1657e956ed4312113516aec1e6f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_request_cache_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00487">487</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="client_8c_source.html#l00477">request_cache</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a62d5a40d5504554ad53443f0ccae0cb2"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_request_cache_free" ref="a62d5a40d5504554ad53443f0ccae0cb2" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_request_cache_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00500">500</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, and <a class="el" href="client_8c_source.html#l00477">request_cache</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l02389">__ptlrpc_free_req()</a>, <a class="el" href="client_8c_source.html#l00533">ptlrpc_add_rqs_to_pool()</a>, <a class="el" href="service_8c_source.html#l01259">ptlrpc_at_send_early_reply()</a>, <a class="el" href="client_8c_source.html#l00509">ptlrpc_free_rq_pool()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="service_8c_source.html#l00836">ptlrpc_server_free_request()</a>, <a class="el" href="sec_8c_source.html#l01221">sptlrpc_cli_finish_early_reply()</a>, <a class="el" href="sec_8c_source.html#l01130">sptlrpc_cli_unwrap_early_reply()</a>, and <a class="el" href="sec_8c_source.html#l00926">sptlrpc_import_check_ctx()</a>.</p>

</div>
</div>
<a class="anchor" id="adf2f9b7a11e7944536c9232a455bb43a"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_request_cache_init" ref="adf2f9b7a11e7944536c9232a455bb43a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_request_cache_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="client_8c_source.html#l00479">479</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="client_8c_source.html#l00477">request_cache</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4d751a148dd84a855d068e9452c85f1"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_request_handle_notconn" ref="ae4d751a148dd84a855d068e9452c85f1" args="(struct ptlrpc_request *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_request_handle_notconn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="recover_8c_source.html#l00249">249</a> of file <a class="el" href="recover_8c_source.html">recover.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00523">ptlrpc_connection::c_remote_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__import_8h_source.html#l00170">obd_import::imp_connection</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_deactive</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_replayable</a>, <a class="el" href="pack__generic_8c_source.html#l01188">lustre_msg_get_conn_cnt()</a>, <a class="el" href="obd_8h_source.html#l00332">obd2cli_tgt</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="import_8c_source.html#l00648">ptlrpc_connect_import()</a>, <a class="el" href="import_8c_source.html#l00233">ptlrpc_deactivate_import()</a>, <a class="el" href="import_8c_source.html#l00163">ptlrpc_set_import_discon()</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l00966">ptlrpc_request::rq_lock</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_resend</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_resend</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l01297">after_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a5226e81fe53ec9f761df1c040404b670"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_resend_req" ref="a5226e81fe53ec9f761df1c040404b670" args="(struct ptlrpc_request *request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_resend_req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schedule previously sent request for resend. </p>
<p>For bulk requests we assign new xid (to avoid problems with lost replies and therefore several transfers landing into same buffer from different sending attempts). </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l02717">2717</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="pack__generic_8c_source.html#l01320">lustre_msg_set_handle()</a>, <a class="el" href="lustre__net_8h_source.html#l02466">ptlrpc_client_replied()</a>, <a class="el" href="lustre__net_8h_source.html#l00966">ptlrpc_request::rq_lock</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="recover_8c_source.html#l00196">ptlrpc_resend()</a>.</p>

</div>
</div>
<a class="anchor" id="addde07332222429e28ec6cb0a78ca460"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_service_nrs_cleanup" ref="addde07332222429e28ec6cb0a78ca460" args="(struct ptlrpc_service *svc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_service_nrs_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *&nbsp;</td>
          <td class="paramname"> <em>svc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregisters all policies on all service partitions of service <em>svc</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svc</em>&nbsp;</td><td>the PTLRPC service to unregister </td></tr>
  </table>
  </dd>
</dl>

<p><p>Clean up NRS heads on all service partitions</p>
<p>Clean up lprocfs interfaces for all supported policies for the service.</p>
</p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01435">1435</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="nrs_8c_source.html#l00885">nrs_policy_compatible()</a>, <a class="el" href="nrs_8c_source.html#l01026">nrs_svcpt_cleanup_locked()</a>, <a class="el" href="structptlrpc__nrs__pol__ops.html#a4278270d8cf6849261467dd6a69bd19a">ptlrpc_nrs_pol_ops::op_lprocfs_fini</a>, <a class="el" href="lustre__nrs_8h_source.html#l00445">ptlrpc_nrs_pol_desc::pd_list</a>, <a class="el" href="lustre__nrs_8h_source.html#l00449">ptlrpc_nrs_pol_desc::pd_ops</a>, and <a class="el" href="lustre__net_8h_source.html#l01857">ptlrpc_service_for_each_part</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l03160">ptlrpc_unregister_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a107d0adae381864f5c53de6cc805a59f"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_service_nrs_setup" ref="a107d0adae381864f5c53de6cc805a59f" args="(struct ptlrpc_service *svc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_service_nrs_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *&nbsp;</td>
          <td class="paramname"> <em>svc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup NRS heads on all service partitions of service <em>svc</em>, and register all compatible policies on those NRS heads. </p>
<p>To be called from withing ptl </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>svc</em>&nbsp;</td><td>the service to setup</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>error, the calling logic should eventually call <a class="el" href="nrs_8c.html#addde07332222429e28ec6cb0a78ca460" title="Unregisters all policies on all service partitions of service svc.">ptlrpc_service_nrs_cleanup()</a> to undo any work performed by this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__net.html#ga13835bf69545de9744051ff7ef02a4c3" title="Initialize service on a given portal.">ptlrpc_register_service()</a> </dd>
<dd>
<a class="el" href="nrs_8c.html#addde07332222429e28ec6cb0a78ca460" title="Unregisters all policies on all service partitions of service svc.">ptlrpc_service_nrs_cleanup()</a> </dd></dl>

<p><p>Initialize NRS heads on all service CPTs.</p>
<p>Set up lprocfs interfaces for all supported policies for the service.</p>
</p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l01390">1390</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

<p>References <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="nrs_8c_source.html#l00885">nrs_policy_compatible()</a>, <a class="el" href="nrs_8c_source.html#l00983">nrs_svcpt_setup_locked()</a>, <a class="el" href="structptlrpc__nrs__pol__ops.html#ad81393abaf1277b8fdebc3f67903c55a">ptlrpc_nrs_pol_ops::op_lprocfs_init</a>, <a class="el" href="lustre__nrs_8h_source.html#l00445">ptlrpc_nrs_pol_desc::pd_list</a>, <a class="el" href="lustre__nrs_8h_source.html#l00449">ptlrpc_nrs_pol_desc::pd_ops</a>, <a class="el" href="lustre__net_8h_source.html#l01857">ptlrpc_service_for_each_part</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a6978d733f46bb41c9ac9b5195aff2837"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_set_add_new_req" ref="a6978d733f46bb41c9ac9b5195aff2837" args="(struct ptlrpcd_ctl *pc, struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_set_add_new_req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td>
          <td class="paramname"> <em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a request to a request with dedicated server thread and wake the thread to make any necessary processing. </p>
<p>Currently only used for <a class="el" href="structptlrpcd.html">ptlrpcd</a>. </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l01079">1079</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__net_8h_source.html#l01930">LIOD_STOP</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lustre__net_8h_source.html#l01870">ptlrpcd_ctl::pc_flags</a>, <a class="el" href="lustre__net_8h_source.html#l01910">ptlrpcd_ctl::pc_npartners</a>, <a class="el" href="lustre__net_8h_source.html#l01906">ptlrpcd_ctl::pc_partners</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, and <a class="el" href="lustre__net_8h_source.html#l00579">ptlrpc_request_set::set_waitq</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>.</p>

</div>
</div>
<a class="anchor" id="ad93d8710b114f9917eda916dd057035e"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_set_bulk_mbits" ref="ad93d8710b114f9917eda916dd057035e" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpc_set_bulk_mbits </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If request has a new allocated XID (new request or EINPROGRESS resend), use this XID as matchbits of bulk, otherwise allocate a new matchbits for request to ensure previous bulk fails and avoid problems with lost replies and therefore several transfers landing into the same buffer from different sending attempts. </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l03196">3196</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__net_8h_source.html#l01448">ptlrpc_bulk_desc::bd_import</a>, <a class="el" href="lustre__net_8h_source.html#l01453">ptlrpc_bulk_desc::bd_iov_count</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__import_8h_source.html#l00316">obd_import::imp_connect_data</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00450">LNET_MAX_IOV</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__idl_8h_source.html#l01250">OBD_CONNECT_BULK_MBITS</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="client_8c_source.html#l03177">ptlrpc_next_xid()</a>, <a class="el" href="lustre__net_8h_source.html#l01038">ptlrpc_request::rq_mbits</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_resend</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>.</p>

</div>
</div>
<a class="anchor" id="a08bb6b823019ef9a42f65210821e8750"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_set_import_discon" ref="a08bb6b823019ef9a42f65210821e8750" args="(struct obd_import *imp, __u32 conn_cnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_set_import_discon </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>conn_cnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if import was FULL, false if import was already not connected. </p>
<p>- import to be disconnected  - connection count (epoch) of the request that timed out and caused the disconnection. In some cases, multiple inflight requests can fail to a single target (e.g. OST bulk requests) and if one has already caused a reconnection (increasing the import-&gt;conn_cnt) the older failure should not also cause a reconnection. If zero it forces a reconnect. </p>

<p>Definition at line <a class="el" href="import_8c_source.html#l00163">163</a> of file <a class="el" href="import_8c_source.html">import.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00521">ptlrpc_connection::c_peer</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__net_8h_source.html#l00535">ptlrpc_client::cli_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="import_8c_source.html#l00137">deuuidify()</a>, <a class="el" href="lustre__import_8h_source.html#l00172">obd_import::imp_client</a>, <a class="el" href="lustre__import_8h_source.html#l00239">obd_import::imp_conn_cnt</a>, <a class="el" href="lustre__import_8h_source.html#l00170">obd_import::imp_connection</a>, <a class="el" href="lustre__import_8h_source.html#l00127">IMP_EVENT_DISCON</a>, <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_replayable</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="import_8c_source.html#l00088">IMPORT_SET_STATE_NOLOCK</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="libcfs_2libcfs_2debug_8c_source.html#l00251">libcfs_debug_dumplog()</a>, <a class="el" href="nidstr_8h_source.html#l00077">libcfs_nid2str()</a>, <a class="el" href="lustre__import_8h_source.html#l00100">LUSTRE_IMP_DISCON</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="obd_8h_source.html#l00332">obd2cli_tgt</a>, <a class="el" href="class__obd_8c_source.html#l00075">obd_dump_on_timeout</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="lustre__import_8h_source.html#l00111">ptlrpc_import_state_name()</a>.</p>

<p>Referenced by <a class="el" href="import_8c_source.html#l00429">ptlrpc_fail_import()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, <a class="el" href="recover_8c_source.html#l00333">ptlrpc_recover_import()</a>, and <a class="el" href="recover_8c_source.html#l00249">ptlrpc_request_handle_notconn()</a>.</p>

</div>
</div>
<a class="anchor" id="a897eeb312b5bd34eba0c401b1502c7c8"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_set_next_timeout" ref="a897eeb312b5bd34eba0c401b1502c7c8" args="(struct ptlrpc_request_set *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_set_next_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the smallest timeout in the set; this does NOT set a timeout. </p>

<p>Definition at line <a class="el" href="client_8c_source.html#l02207">2207</a> of file <a class="el" href="client_8c_source.html">client.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01009">ptlrpc_request::rq_phase</a>, <a class="el" href="lustre__net_8h_source.html#l00719">RQ_PHASE_BULK</a>, <a class="el" href="lustre__net_8h_source.html#l00717">RQ_PHASE_NEW</a>, <a class="el" href="lustre__net_8h_source.html#l00718">RQ_PHASE_RPC</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_resend</a>, <a class="el" href="lustre__net_8h_source.html#l01117">ptlrpc_request::rq_sent</a>, <a class="el" href="lustre__net_8h_source.html#l00861">rq_set_chain</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_timedout</a>, <a class="el" href="lustre__net_8h_source.html#l01113">ptlrpc_request::rq_timeout</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_wait_ctx</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_waiting</a>, and <a class="el" href="gnilnd__modparams_8c_source.html#l00052">timeout</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00427">ptlrpcd()</a>.</p>

</div>
</div>
<a class="anchor" id="a86e0377a7d6a14f59100bb063f41dd14"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_srv_req_init" ref="a86e0377a7d6a14f59100bb063f41dd14" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_srv_req_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialise server side ptlrpc request </p>

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00385">385</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00359">ptlrpc_req_comm_init()</a>, <a class="el" href="lustre__net_8h_source.html#l01049">ptlrpc_request::rq_srv</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_srv_req</a>, <a class="el" href="lustre__net_8h_source.html#l00891">ptlrpc_srv_req::sr_exp_list</a>, <a class="el" href="lustre__net_8h_source.html#l00893">ptlrpc_srv_req::sr_hist_list</a>, and <a class="el" href="lustre__net_8h_source.html#l00889">ptlrpc_srv_req::sr_timed_list</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c091a9e37e1c0c043b95c33080d1c59"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_start_pinger" ref="a8c091a9e37e1c0c043b95c33080d1c59" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_start_pinger </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00322">322</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="pinger_8c_source.html#l00320">pinger_thread</a>, <a class="el" href="pinger_8c_source.html#l00245">ptlrpc_pinger_main()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="pinger_8c_source.html#l00048">suppress_pings</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01534">ptlrpc_thread::t_name</a>, <a class="el" href="lustre__net_8h_source.html#l01537">thread_is_init()</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae010a629f5f836492d7726dcf2692a0e"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_start_thread" ref="ae010a629f5f836492d7726dcf2692a0e" args="(struct ptlrpc_service_part *svcpt, int wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_start_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__service__part.html">ptlrpc_service_part</a> *&nbsp;</td>
          <td class="paramname"> <em>svcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wait</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="service_8c_source.html#l02782">2782</a> of file <a class="el" href="service_8c_source.html">service.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="obd__support_8h_source.html#l00719">OBD_CPT_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00435">OBD_FAIL_TGT_TOOMANY_THREADS</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="lustre__net_8h_source.html#l01502">PTLRPC_THR_NAME_LEN</a>, <a class="el" href="service_8c_source.html#l02297">ptlrpc_threads_increasable()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01753">ptlrpc_service_part::scp_cpt</a>, <a class="el" href="lustre__net_8h_source.html#l01761">ptlrpc_service_part::scp_nthrs_running</a>, <a class="el" href="lustre__net_8h_source.html#l01757">ptlrpc_service_part::scp_nthrs_starting</a>, <a class="el" href="lustre__net_8h_source.html#l01755">ptlrpc_service_part::scp_thr_nextid</a>, <a class="el" href="lustre__net_8h_source.html#l01763">ptlrpc_service_part::scp_threads</a>, <a class="el" href="lustre__net_8h_source.html#l01724">ptlrpc_service::srv_cptable</a>, <a class="el" href="lustre__net_8h_source.html#l01713">ptlrpc_service::srv_is_stopping</a>, <a class="el" href="lustre__net_8h_source.html#l01678">ptlrpc_service::srv_name</a>, <a class="el" href="lustre__net_8h_source.html#l01684">ptlrpc_service::srv_nthrs_cpt_init</a>, <a class="el" href="lustre__net_8h_source.html#l01686">ptlrpc_service::srv_nthrs_cpt_limit</a>, <a class="el" href="lustre__net_8h_source.html#l01680">ptlrpc_service::srv_thread_name</a>, <a class="el" href="lustre__net_8h_source.html#l01496">SVC_STARTING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01519">ptlrpc_thread::t_id</a>, <a class="el" href="lustre__net_8h_source.html#l01510">ptlrpc_thread::t_link</a>, <a class="el" href="lustre__net_8h_source.html#l01534">ptlrpc_thread::t_name</a>, <a class="el" href="lustre__net_8h_source.html#l01531">ptlrpc_thread::t_svcpt</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01582">thread_add_flags()</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, <a class="el" href="lustre__net_8h_source.html#l01547">thread_is_stopping()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, and <a class="el" href="service_8c_source.html#l02751">ptlrpc_start_threads()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6097c404920f7f3b6becb1200ab4855"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_stop_pinger" ref="ad6097c404920f7f3b6becb1200ab4855" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_stop_pinger </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00363">363</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="pinger_8c_source.html#l00320">pinger_thread</a>, <a class="el" href="pinger_8c_source.html#l00551">ptlrpc_pinger_remove_timeouts()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01537">thread_is_init()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a3653af559e4fad3b3c71877c309ea556"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_conf_choose_flavor" ref="a3653af559e4fad3b3c71877c309ea556" args="(enum lustre_sec_part from, enum lustre_sec_part to, struct obd_uuid *target, lnet_nid_t nid, struct sptlrpc_flavor *sf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_conf_choose_flavor </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__sptlrpc.html#gaceeb8c40afd0179b5b42fc19aa58d177">lustre_sec_part</a>&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__sptlrpc.html#gaceeb8c40afd0179b5b42fc19aa58d177">lustre_sec_part</a>&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsptlrpc__flavor.html">sptlrpc_flavor</a> *&nbsp;</td>
          <td class="paramname"> <em>sf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__config_8c_source.html#l00843">843</a> of file <a class="el" href="sec__config_8c_source.html">sec_config.c</a>.</p>

<p>References <a class="el" href="sec__config_8c_source.html#l00818">flavor_set_flags()</a>, <a class="el" href="sec__config_8c_source.html#l00165">get_default_flavor()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="sec__config_8c_source.html#l00504">sptlrpc_conf::sc_rset</a>, <a class="el" href="sec__config_8c_source.html#l00495">sptlrpc_conf_tgt::sct_rset</a>, <a class="el" href="sec__config_8c_source.html#l00595">sptlrpc_conf_get()</a>, <a class="el" href="sec__config_8c_source.html#l00570">sptlrpc_conf_get_tgt()</a>, <a class="el" href="sec__config_8c_source.html#l00508">sptlrpc_conf_lock</a>, <a class="el" href="sec__config_8c_source.html#l00404">sptlrpc_rule_set_choose()</a>, <a class="el" href="sec__config_8c_source.html#l00517">target2fsname()</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l01438">sptlrpc_import_sec_adapt()</a>.</p>

</div>
</div>
<a class="anchor" id="afe08db8d0e80c75017172faf58afb021"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_conf_fini" ref="afe08db8d0e80c75017172faf58afb021" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_conf_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__config_8c_source.html#l01217">1217</a> of file <a class="el" href="sec__config_8c_source.html">sec_config.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="sec__config_8c_source.html#l00499">sptlrpc_conf::sc_list</a>, <a class="el" href="sec__config_8c_source.html#l00560">sptlrpc_conf_free()</a>, <a class="el" href="sec__config_8c_source.html#l00508">sptlrpc_conf_lock</a>, and <a class="el" href="sec__config_8c_source.html#l00509">sptlrpc_confs</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02590">sptlrpc_fini()</a>, and <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a7957986d1e28dfc797ff3472de181045"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_conf_init" ref="a7957986d1e28dfc797ff3472de181045" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_conf_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__config_8c_source.html#l01210">1210</a> of file <a class="el" href="sec__config_8c_source.html">sec_config.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="sec__config_8c_source.html#l00508">sptlrpc_conf_lock</a>, and <a class="el" href="sec__config_8c_source.html#l00509">sptlrpc_confs</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7a23630b6b94a9491c36a715c9f7ed9"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_enc_pool_fini" ref="aa7a23630b6b94a9491c36a715c9f7ed9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_enc_pool_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__bulk_8c_source.html#l00827">827</a> of file <a class="el" href="sec__bulk_8c_source.html">sec_bulk.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00262">CFS_TIME_T</a>, <a class="el" href="libcfs__debug_8h_source.html#l00156">D_SEC</a>, <a class="el" href="sec__bulk_8c_source.html#l00318">enc_pools_cleanup()</a>, <a class="el" href="sec__bulk_8c_source.html#l00767">enc_pools_free()</a>, <a class="el" href="sec__bulk_8c_source.html#l00108">ptlrpc_enc_page_pool::epp_free_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00126">ptlrpc_enc_page_pool::epp_pools</a>, <a class="el" href="sec__bulk_8c_source.html#l00117">ptlrpc_enc_page_pool::epp_st_access</a>, <a class="el" href="sec__bulk_8c_source.html#l00115">ptlrpc_enc_page_pool::epp_st_grow_fails</a>, <a class="el" href="sec__bulk_8c_source.html#l00114">ptlrpc_enc_page_pool::epp_st_grows</a>, <a class="el" href="sec__bulk_8c_source.html#l00113">ptlrpc_enc_page_pool::epp_st_max_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00121">ptlrpc_enc_page_pool::epp_st_max_wait</a>, <a class="el" href="sec__bulk_8c_source.html#l00120">ptlrpc_enc_page_pool::epp_st_max_wqlen</a>, <a class="el" href="sec__bulk_8c_source.html#l00118">ptlrpc_enc_page_pool::epp_st_missings</a>, <a class="el" href="sec__bulk_8c_source.html#l00122">ptlrpc_enc_page_pool::epp_st_outofmem</a>, <a class="el" href="sec__bulk_8c_source.html#l00116">ptlrpc_enc_page_pool::epp_st_shrinks</a>, <a class="el" href="sec__bulk_8c_source.html#l00107">ptlrpc_enc_page_pool::epp_total_pages</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="sec__bulk_8c_source.html#l00310">npages_to_npools()</a>, <a class="el" href="sec__bulk_8c.html#a982c76f6e4121326b404f2b9e4ccab1e">page_pools</a>, <a class="el" href="sec__bulk_8c_source.html#l00133">pools_shrinker</a>, and <a class="el" href="linux-mem_8h_source.html#l00127">remove_shrinker()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02590">sptlrpc_fini()</a>, and <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8778f41d65ee10d482bc7bed49d9447"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_enc_pool_init" ref="ad8778f41d65ee10d482bc7bed49d9447" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_enc_pool_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__bulk_8c_source.html#l00777">777</a> of file <a class="el" href="sec__bulk_8c_source.html">sec_bulk.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="linux-mem_8h_source.html#l00099">DEF_SHRINKER_VAR</a>, <a class="el" href="sec__bulk_8c_source.html#l00057">enc_pool_max_memory_mb</a>, <a class="el" href="sec__bulk_8c_source.html#l00759">enc_pools_alloc()</a>, <a class="el" href="sec__bulk_8c_source.html#l00767">enc_pools_free()</a>, <a class="el" href="sec__bulk_8c_source.html#l00292">enc_pools_shrink()</a>, <a class="el" href="sec__bulk_8c_source.html#l00234">enc_pools_shrink_count()</a>, <a class="el" href="sec__bulk_8c_source.html#l00256">enc_pools_shrink_scan()</a>, <a class="el" href="sec__bulk_8c_source.html#l00108">ptlrpc_enc_page_pool::epp_free_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00088">ptlrpc_enc_page_pool::epp_growing</a>, <a class="el" href="sec__bulk_8c_source.html#l00097">ptlrpc_enc_page_pool::epp_idle_idx</a>, <a class="el" href="sec__bulk_8c_source.html#l00101">ptlrpc_enc_page_pool::epp_last_access</a>, <a class="el" href="sec__bulk_8c_source.html#l00100">ptlrpc_enc_page_pool::epp_last_shrink</a>, <a class="el" href="sec__bulk_8c_source.html#l00106">ptlrpc_enc_page_pool::epp_lock</a>, <a class="el" href="sec__bulk_8c_source.html#l00079">ptlrpc_enc_page_pool::epp_max_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00080">ptlrpc_enc_page_pool::epp_max_pools</a>, <a class="el" href="sec__bulk_8c_source.html#l00087">ptlrpc_enc_page_pool::epp_pages_short</a>, <a class="el" href="sec__bulk_8c_source.html#l00126">ptlrpc_enc_page_pool::epp_pools</a>, <a class="el" href="sec__bulk_8c_source.html#l00117">ptlrpc_enc_page_pool::epp_st_access</a>, <a class="el" href="sec__bulk_8c_source.html#l00115">ptlrpc_enc_page_pool::epp_st_grow_fails</a>, <a class="el" href="sec__bulk_8c_source.html#l00114">ptlrpc_enc_page_pool::epp_st_grows</a>, <a class="el" href="sec__bulk_8c_source.html#l00119">ptlrpc_enc_page_pool::epp_st_lowfree</a>, <a class="el" href="sec__bulk_8c_source.html#l00113">ptlrpc_enc_page_pool::epp_st_max_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00121">ptlrpc_enc_page_pool::epp_st_max_wait</a>, <a class="el" href="sec__bulk_8c_source.html#l00120">ptlrpc_enc_page_pool::epp_st_max_wqlen</a>, <a class="el" href="sec__bulk_8c_source.html#l00118">ptlrpc_enc_page_pool::epp_st_missings</a>, <a class="el" href="sec__bulk_8c_source.html#l00122">ptlrpc_enc_page_pool::epp_st_outofmem</a>, <a class="el" href="sec__bulk_8c_source.html#l00116">ptlrpc_enc_page_pool::epp_st_shrinks</a>, <a class="el" href="sec__bulk_8c_source.html#l00107">ptlrpc_enc_page_pool::epp_total_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00085">ptlrpc_enc_page_pool::epp_waitq</a>, <a class="el" href="sec__bulk_8c_source.html#l00086">ptlrpc_enc_page_pool::epp_waitqlen</a>, <a class="el" href="sec__bulk_8c_source.html#l00056">mult</a>, <a class="el" href="sec__bulk_8c_source.html#l00310">npages_to_npools()</a>, <a class="el" href="sec__bulk_8c.html#a982c76f6e4121326b404f2b9e4ccab1e">page_pools</a>, <a class="el" href="sec__bulk_8c_source.html#l00133">pools_shrinker</a>, <a class="el" href="sec__bulk_8c_source.html#l00132">pools_shrinker_seeks</a>, and <a class="el" href="linux-mem_8h_source.html#l00105">set_shrinker()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af4c088cbb797dc841ec45509b2626147"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_fini" ref="af4c088cbb797dc841ec45509b2626147" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec_8c_source.html#l02590">2590</a> of file <a class="el" href="sec_8c_source.html">sec.c</a>.</p>

<p>References <a class="el" href="sec__config_8c_source.html#l01217">sptlrpc_conf_fini()</a>, <a class="el" href="sec__bulk_8c_source.html#l00827">sptlrpc_enc_pool_fini()</a>, <a class="el" href="sec__gc_8c_source.html#l00247">sptlrpc_gc_fini()</a>, <a class="el" href="sec__lproc_8c_source.html#l00202">sptlrpc_lproc_fini()</a>, <a class="el" href="sec__null_8c_source.html#l00453">sptlrpc_null_fini()</a>, and <a class="el" href="sec__plain_8c_source.html#l01032">sptlrpc_plain_fini()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5c722840514227e6b5f6568d69373f2c"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_gc_fini" ref="a5c722840514227e6b5f6568d69373f2c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_gc_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__gc_8c_source.html#l00247">247</a> of file <a class="el" href="sec__gc_8c_source.html">sec_gc.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="sec__gc_8c_source.html#l00063">sec_gc_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02590">sptlrpc_fini()</a>, and <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a56347d0e77ff61db79bbcd2de3775ea8"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_gc_init" ref="a56347d0e77ff61db79bbcd2de3775ea8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_gc_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__gc_8c_source.html#l00220">220</a> of file <a class="el" href="sec__gc_8c_source.html">sec_gc.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="sec__gc_8c_source.html#l00061">sec_gc_ctx_list</a>, <a class="el" href="sec__gc_8c_source.html#l00060">sec_gc_ctx_list_lock</a>, <a class="el" href="sec__gc_8c_source.html#l00058">sec_gc_list</a>, <a class="el" href="sec__gc_8c_source.html#l00057">sec_gc_list_lock</a>, <a class="el" href="sec__gc_8c_source.html#l00163">sec_gc_main()</a>, <a class="el" href="sec__gc_8c_source.html#l00056">sec_gc_mutex</a>, <a class="el" href="sec__gc_8c_source.html#l00063">sec_gc_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a85cf05726ee3abcf3a3c9d82b267445d"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_init" ref="a85cf05726ee3abcf3a3c9d82b267445d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec_8c_source.html#l02544">2544</a> of file <a class="el" href="sec_8c_source.html">sec.c</a>.</p>

<p>References <a class="el" href="sec_8c_source.html#l00065">policy_lock</a>, <a class="el" href="sec__config_8c_source.html#l01217">sptlrpc_conf_fini()</a>, <a class="el" href="sec__config_8c_source.html#l01210">sptlrpc_conf_init()</a>, <a class="el" href="sec__bulk_8c_source.html#l00827">sptlrpc_enc_pool_fini()</a>, <a class="el" href="sec__bulk_8c_source.html#l00777">sptlrpc_enc_pool_init()</a>, <a class="el" href="sec__gc_8c_source.html#l00247">sptlrpc_gc_fini()</a>, <a class="el" href="sec__gc_8c_source.html#l00220">sptlrpc_gc_init()</a>, <a class="el" href="sec__lproc_8c_source.html#l00186">sptlrpc_lproc_init()</a>, <a class="el" href="sec__null_8c_source.html#l00453">sptlrpc_null_fini()</a>, <a class="el" href="sec__null_8c_source.html#l00440">sptlrpc_null_init()</a>, <a class="el" href="sec__plain_8c_source.html#l01032">sptlrpc_plain_fini()</a>, and <a class="el" href="sec__plain_8c_source.html#l01017">sptlrpc_plain_init()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e82be1ce1f2c65154ba34fb1667818c"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_lproc_fini" ref="a0e82be1ce1f2c65154ba34fb1667818c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_lproc_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__lproc_8c_source.html#l00202">202</a> of file <a class="el" href="sec__lproc_8c_source.html">sec_lproc.c</a>.</p>

<p>References <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, and <a class="el" href="sec__lproc_8c_source.html#l00057">sptlrpc_proc_root</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02590">sptlrpc_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ace2140fb87ac93c52fa15ffd20f75dc5"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_lproc_init" ref="ace2140fb87ac93c52fa15ffd20f75dc5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_lproc_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__lproc_8c_source.html#l00186">186</a> of file <a class="el" href="sec__lproc_8c_source.html">sec_lproc.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lprocfs__status_8h_source.html#l00949">lprocfs_register()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00864">proc_lustre_root</a>, and <a class="el" href="sec__lproc_8c_source.html#l00057">sptlrpc_proc_root</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af0ab041c15fc69766264b1acfb39ecbf"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_null_fini" ref="af0ab041c15fc69766264b1acfb39ecbf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_null_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__null_8c_source.html#l00453">453</a> of file <a class="el" href="sec__null_8c_source.html">sec_null.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__sec_8h_source.html#l00826">ptlrpc_sec_policy::sp_name</a>, and <a class="el" href="sec_8c_source.html#l00094">sptlrpc_unregister_policy()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02590">sptlrpc_fini()</a>, and <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a679495cbd270ad7b5a9ce24e8e04e1b2"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_null_init" ref="a679495cbd270ad7b5a9ce24e8e04e1b2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_null_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__null_8c_source.html#l00440">440</a> of file <a class="el" href="sec__null_8c_source.html">sec_null.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="sec__null_8c_source.html#l00409">null_init_internal()</a>, <a class="el" href="lustre__sec_8h_source.html#l00826">ptlrpc_sec_policy::sp_name</a>, and <a class="el" href="sec_8c_source.html#l00070">sptlrpc_register_policy()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a0be38fa801e146b6fcf9e0c1585f677e"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_plain_fini" ref="a0be38fa801e146b6fcf9e0c1585f677e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sptlrpc_plain_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__plain_8c_source.html#l01032">1032</a> of file <a class="el" href="sec__plain_8c_source.html">sec_plain.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, and <a class="el" href="sec_8c_source.html#l00094">sptlrpc_unregister_policy()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02590">sptlrpc_fini()</a>, and <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a23216ad6e2d24a13d5215f054fb44e39"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_plain_init" ref="a23216ad6e2d24a13d5215f054fb44e39" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_plain_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__plain_8c_source.html#l01017">1017</a> of file <a class="el" href="sec__plain_8c_source.html">sec_plain.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="pack__generic_8c_source.html#l00121">lustre_msg_early_size()</a>, <a class="el" href="pack__generic_8c_source.html#l00139">lustre_msg_size_v2()</a>, <a class="el" href="sec__plain_8c_source.html#l00067">plain_at_offset</a>, <a class="el" href="sec__plain_8c_source.html#l00075">PLAIN_PACK_MSG_OFF</a>, <a class="el" href="sec__plain_8c_source.html#l00072">PLAIN_PACK_SEGMENTS</a>, and <a class="el" href="sec_8c_source.html#l00070">sptlrpc_register_policy()</a>.</p>

<p>Referenced by <a class="el" href="sec_8c_source.html#l02544">sptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af24986faec4d656ded28414d50774cde"></a><!-- doxytag: member="ptlrpc_internal.h::sptlrpc_proc_enc_pool_seq_show" ref="af24986faec4d656ded28414d50774cde" args="(struct seq_file *m, void *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sptlrpc_proc_enc_pool_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sec__bulk_8c_source.html#l00139">139</a> of file <a class="el" href="sec__bulk_8c_source.html">sec_bulk.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00262">CFS_TIME_T</a>, <a class="el" href="sec__bulk_8c_source.html#l00108">ptlrpc_enc_page_pool::epp_free_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00097">ptlrpc_enc_page_pool::epp_idle_idx</a>, <a class="el" href="sec__bulk_8c_source.html#l00101">ptlrpc_enc_page_pool::epp_last_access</a>, <a class="el" href="sec__bulk_8c_source.html#l00100">ptlrpc_enc_page_pool::epp_last_shrink</a>, <a class="el" href="sec__bulk_8c_source.html#l00106">ptlrpc_enc_page_pool::epp_lock</a>, <a class="el" href="sec__bulk_8c_source.html#l00079">ptlrpc_enc_page_pool::epp_max_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00080">ptlrpc_enc_page_pool::epp_max_pools</a>, <a class="el" href="sec__bulk_8c_source.html#l00117">ptlrpc_enc_page_pool::epp_st_access</a>, <a class="el" href="sec__bulk_8c_source.html#l00115">ptlrpc_enc_page_pool::epp_st_grow_fails</a>, <a class="el" href="sec__bulk_8c_source.html#l00114">ptlrpc_enc_page_pool::epp_st_grows</a>, <a class="el" href="sec__bulk_8c_source.html#l00119">ptlrpc_enc_page_pool::epp_st_lowfree</a>, <a class="el" href="sec__bulk_8c_source.html#l00113">ptlrpc_enc_page_pool::epp_st_max_pages</a>, <a class="el" href="sec__bulk_8c_source.html#l00121">ptlrpc_enc_page_pool::epp_st_max_wait</a>, <a class="el" href="sec__bulk_8c_source.html#l00120">ptlrpc_enc_page_pool::epp_st_max_wqlen</a>, <a class="el" href="sec__bulk_8c_source.html#l00118">ptlrpc_enc_page_pool::epp_st_missings</a>, <a class="el" href="sec__bulk_8c_source.html#l00122">ptlrpc_enc_page_pool::epp_st_outofmem</a>, <a class="el" href="sec__bulk_8c_source.html#l00116">ptlrpc_enc_page_pool::epp_st_shrinks</a>, <a class="el" href="sec__bulk_8c_source.html#l00107">ptlrpc_enc_page_pool::epp_total_pages</a>, <a class="el" href="sec__bulk_8c.html#a982c76f6e4121326b404f2b9e4ccab1e">page_pools</a>, and <a class="el" href="sec__bulk_8c_source.html#l00068">PAGES_PER_POOL</a>.</p>

</div>
</div>
<a class="anchor" id="addcc5c6902e8ee4d4a93162c9a811fa7"></a><!-- doxytag: member="ptlrpc_internal.h::tgt_mod_exit" ref="addcc5c6902e8ee4d4a93162c9a811fa7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tgt_mod_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00336">336</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2a009541aa17bcafe9f76d383668f2bf"></a><!-- doxytag: member="ptlrpc_internal.h::tgt_mod_init" ref="a2a009541aa17bcafe9f76d383668f2bf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_mod_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpc__internal_8h_source.html#l00331">331</a> of file <a class="el" href="ptlrpc__internal_8h_source.html">ptlrpc_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ae6199396044abe1d7985dac1cd676d3f"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_conf_fifo" ref="ae6199396044abe1d7985dac1cd676d3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__nrs__pol__conf.html">ptlrpc_nrs_pol_conf</a> <a class="el" href="ptlrpc__internal_8h.html#ae6199396044abe1d7985dac1cd676d3f">nrs_conf_fifo</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>FIFO policy configuration. </p>

<p>Definition at line <a class="el" href="nrs__fifo_8c_source.html#l00260">260</a> of file <a class="el" href="nrs__fifo_8c_source.html">nrs_fifo.c</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l01787">ptlrpc_nrs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad543d45ab909c062d714baabb15576ca"></a><!-- doxytag: member="ptlrpc_internal.h::nrs_core" ref="ad543d45ab909c062d714baabb15576ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structnrs__core.html">nrs_core</a> <a class="el" href="structnrs__core.html">nrs_core</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>nrs </p>

<p>Definition at line <a class="el" href="nrs_8c_source.html#l00053">53</a> of file <a class="el" href="nrs_8c_source.html">nrs.c</a>.</p>

</div>
</div>
<a class="anchor" id="a58c2a7b4fdd945d66970db39edc52273"></a><!-- doxytag: member="ptlrpc_internal.h::pinger_mutex" ref="a58c2a7b4fdd945d66970db39edc52273" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="ptlrpc__internal_8h.html#a58c2a7b4fdd945d66970db39edc52273">pinger_mutex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pinger_8c_source.html#l00052">52</a> of file <a class="el" href="pinger_8c_source.html">pinger.c</a>.</p>

<p>Referenced by <a class="el" href="pinger_8c_source.html#l00151">pinger_check_timeout()</a>, <a class="el" href="pinger_8c_source.html#l00504">ptlrpc_add_timeout_client()</a>, <a class="el" href="pinger_8c_source.html#l00522">ptlrpc_del_timeout_client()</a>, <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>, <a class="el" href="pinger_8c_source.html#l00405">ptlrpc_pinger_add_import()</a>, <a class="el" href="pinger_8c_source.html#l00428">ptlrpc_pinger_del_import()</a>, <a class="el" href="pinger_8c_source.html#l00245">ptlrpc_pinger_main()</a>, <a class="el" href="pinger_8c_source.html#l00476">ptlrpc_pinger_register_timeout()</a>, and <a class="el" href="pinger_8c_source.html#l00551">ptlrpc_pinger_remove_timeouts()</a>.</p>

</div>
</div>
<a class="anchor" id="a9bbbe993837b9f20a26325525bc76bfb"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_all_services" ref="a9bbbe993837b9f20a26325525bc76bfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="service_8c.html#a9bbbe993837b9f20a26325525bc76bfb">ptlrpc_all_services</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds a list of all PTLRPC services. </p>

<p>Definition at line <a class="el" href="service_8c_source.html#l00068">68</a> of file <a class="el" href="service_8c_source.html">service.c</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l01099">nrs_policy_unregister_locked()</a>, <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>, <a class="el" href="nrs_8c_source.html#l01165">ptlrpc_nrs_policy_register()</a>, and <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e88c117c1eccb6da9707b1f9430d4f3"></a><!-- doxytag: member="ptlrpc_internal.h::ptlrpc_all_services_mutex" ref="a9e88c117c1eccb6da9707b1f9430d4f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="service_8c.html#a9e88c117c1eccb6da9707b1f9430d4f3">ptlrpc_all_services_mutex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used to protect the <em>ptlrpc_all_services</em> list. </p>

<p>Definition at line <a class="el" href="service_8c_source.html#l00070">70</a> of file <a class="el" href="service_8c_source.html">service.c</a>.</p>

<p>Referenced by <a class="el" href="nrs_8c_source.html#l01099">nrs_policy_unregister_locked()</a>, <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>, <a class="el" href="nrs_8c_source.html#l01165">ptlrpc_nrs_policy_register()</a>, <a class="el" href="nrs_8c_source.html#l01323">ptlrpc_nrs_policy_unregister()</a>, <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>, and <a class="el" href="service_8c_source.html#l03160">ptlrpc_unregister_service()</a>.</p>

</div>
</div>
<a class="anchor" id="a840cfd893cfd1ea1f4ac7b04382ed44d"></a><!-- doxytag: member="ptlrpc_internal.h::test_req_buffer_pressure" ref="a840cfd893cfd1ea1f4ac7b04382ed44d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="service_8c.html#a840cfd893cfd1ea1f4ac7b04382ed44d">test_req_buffer_pressure</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="service_8c_source.html#l00047">47</a> of file <a class="el" href="service_8c_source.html">service.c</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02252">ptlrpc_check_rqbd_pool()</a>, <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>, and <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
