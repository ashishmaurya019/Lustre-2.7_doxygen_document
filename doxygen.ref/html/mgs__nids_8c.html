<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mgs/mgs_nids.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mgs/mgs_nids.c File Reference</h1><code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;linux/pagemap.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__disk_8h_source.html">lustre_disk.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mgs__internal_8h_source.html">mgs_internal.h</a>&quot;</code><br/>

<p><a href="mgs__nids_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlproc__ir__cmd.html">lproc_ir_cmd</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MGS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#af23e54b10918d3dafa26a91b8096ed5b">D_MGS</a>&nbsp;&nbsp;&nbsp;D_CONFIG</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a9dcf4442ff93cf8fc688703bd81f04d6">MGS_NIDTBL_VERSION_INIT</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="mgs__nids_8c.html#a4efaf4e07364d6302f598569aa7e55dcac286a420eb9e6dd0644f98d00c7f9242">IR_CLIENT</a> =  1, 
<a class="el" href="mgs__nids_8c.html#a4efaf4e07364d6302f598569aa7e55dcaec3275c37b591d2354c3643ab1bf0a27">IR_MDT</a> =  2
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a16feab9df8d3674c81a39cb5f10ccaed">nidtbl_is_sane</a> (struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *tbl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a46715a33238a1c21d42a6b3aeb13dd05">mgs_nidtbl_read</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *tbl, struct <a class="el" href="structmgs__config__res.html">mgs_config_res</a> *res, struct page **pages, int nrpages, int units_total, int unit_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fetch nidtbl entries whose version are not less than.  <a href="#a46715a33238a1c21d42a6b3aeb13dd05"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a2f489488aece501a1f200e5c6506dc25">nidtbl_update_version</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmgs__device.html">mgs_device</a> *mgs, struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *tbl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a7f7c135f6006623f8707956f0dd5b40c">nidtbl_read_version</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmgs__device.html">mgs_device</a> *mgs, struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *tbl, u64 *<a class="el" href="mount__lustre_8c.html#aad880fc4455c253781e8968f2239d56f">version</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a8f81eb7ab525c2ce467a2a0efe5824c1">mgs_nidtbl_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb, struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a4591f6ff785f66ab5f0b0e7affd244ce">mgs_nidtbl_fini_fs</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a692527491a0c809546fe01f2106b2b34">mgs_nidtbl_init_fs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a9921820a7627bb61d950e4348a549669">mgs_ir_notify_complete</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a3bf50cf940399bbbd7bbf511eef93ce4">mgs_ir_notify</a> (void *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#ad73b0228beb2fb6fb3b4b9dad025fde5">mgs_ir_init_fs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmgs__device.html">mgs_device</a> *mgs, struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a1ecfe16762c3e19e559c17066fb0e917">mgs_ir_fini_fs</a> (struct <a class="el" href="structmgs__device.html">mgs_device</a> *mgs, struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a38c670ddfea261f8c14da88d85eb713a">ir_state_graduate</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a23cb17395ac476421e2be760747d98f5">mgs_ir_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmgs__device.html">mgs_device</a> *mgs, struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#ab512fe1c2ac898a24d8c1f57daba91df">delogname</a> (char *logname, char *fsname, int *typ)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a54b4462c5931809e87dac0ef4d188674">mgs_get_ir_logs</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#acfca5b800ae900b897a529eabc817d79">lprocfs_ir_set_state</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb, const char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a0adef07f525044e28b0c27fc91ea0602">lprocfs_ir_set_timeout</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb, const char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#afdd3422b634669d1180ac7374579f9b7">lprocfs_ir_clear_stats</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb, const char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a6253023dd4dd371cf5d88158cf487db8">lprocfs_wr_ir_state</a> (struct file *file, const char __user *buffer, size_t count, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#ab0fe5d54aeb9b89e4ad277bcfc67ebfe">lprocfs_rd_ir_state</a> (struct seq_file *seq, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a73ced42a16dbcd6bd2c7d89b472cddc6">lprocfs_ir_timeout_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a3bff4d3994d47d1ae9b5369a18433309">lprocfs_ir_timeout_seq_write</a> (struct file *file, const char __user *buffer, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a451023afa1a4b3ed8fe2acc59209fcbc">mgs_fsc_attach</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, char *fsname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a2e87c901daed10df54f27602f7358244">mgs_fsc_cleanup</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a4895da9f3960c0bbf55168c07d162b68">mgs_fsc_cleanup_by_fsdb</a> (struct <a class="el" href="structfs__db.html">fs_db</a> *fsdb)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a18a054c51c080003ef5863d156d7ccc6">ir_timeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlproc__ir__cmd.html">lproc_ir_cmd</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgs__nids_8c.html#a8528cd5f96777c22d4179dbd1394a079">ir_cmds</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="af23e54b10918d3dafa26a91b8096ed5b"></a><!-- doxytag: member="mgs_nids.c::D_MGS" ref="af23e54b10918d3dafa26a91b8096ed5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D_MGS&nbsp;&nbsp;&nbsp;D_CONFIG</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00044">44</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mgs_nids.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MGS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00043">43</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9dcf4442ff93cf8fc688703bd81f04d6"></a><!-- doxytag: member="mgs_nids.c::MGS_NIDTBL_VERSION_INIT" ref="a9dcf4442ff93cf8fc688703bd81f04d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGS_NIDTBL_VERSION_INIT&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00258">258</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00260">nidtbl_read_version()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a4efaf4e07364d6302f598569aa7e55dc"></a><!-- doxytag: member="mgs_nids.c::@128" ref="a4efaf4e07364d6302f598569aa7e55dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a4efaf4e07364d6302f598569aa7e55dcac286a420eb9e6dd0644f98d00c7f9242"></a><!-- doxytag: member="IR_CLIENT" ref="a4efaf4e07364d6302f598569aa7e55dcac286a420eb9e6dd0644f98d00c7f9242" args="" -->IR_CLIENT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4efaf4e07364d6302f598569aa7e55dcaec3275c37b591d2354c3643ab1bf0a27"></a><!-- doxytag: member="IR_MDT" ref="a4efaf4e07364d6302f598569aa7e55dcaec3275c37b591d2354c3643ab1bf0a27" args="" -->IR_MDT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00562">562</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab512fe1c2ac898a24d8c1f57daba91df"></a><!-- doxytag: member="mgs_nids.c::delogname" ref="ab512fe1c2ac898a24d8c1f57daba91df" args="(char *logname, char *fsname, int *typ)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int delogname </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fsname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>typ</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00567">567</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="mgs__nids_8c_source.html#l00563">IR_CLIENT</a>, and <a class="el" href="mgs__nids_8c_source.html#l00564">IR_MDT</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00598">mgs_get_ir_logs()</a>.</p>

</div>
</div>
<a class="anchor" id="a38c670ddfea261f8c14da88d85eb713a"></a><!-- doxytag: member="mgs_nids.c::ir_state_graduate" ref="a38c670ddfea261f8c14da88d85eb713a" args="(struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ir_state_graduate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00504">504</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00142">cfs_time_before()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00148">fs_db::fsdb_mgs</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00068">IR_PARTIAL</a>, <a class="el" href="mgs__internal_8h_source.html#l00066">IR_STARTUP</a>, <a class="el" href="mgs__nids_8c_source.html#l00055">ir_timeout</a>, and <a class="el" href="mgs__internal_8h_source.html#l00174">mgs_device::mgs_start_time</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00798">lprocfs_rd_ir_state()</a>, and <a class="el" href="mgs__nids_8c_source.html#l00516">mgs_ir_update()</a>.</p>

</div>
</div>
<a class="anchor" id="afdd3422b634669d1180ac7374579f9b7"></a><!-- doxytag: member="mgs_nids.c::lprocfs_ir_clear_stats" ref="afdd3422b634669d1180ac7374579f9b7" args="(struct fs_db *fsdb, const char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lprocfs_ir_clear_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00719">719</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="mgs__internal_8h_source.html#l00158">fs_db::fsdb_notify_count</a>, <a class="el" href="mgs__internal_8h_source.html#l00157">fs_db::fsdb_notify_max</a>, and <a class="el" href="mgs__internal_8h_source.html#l00156">fs_db::fsdb_notify_total</a>.</p>

</div>
</div>
<a class="anchor" id="acfca5b800ae900b897a529eabc817d79"></a><!-- doxytag: member="mgs_nids.c::lprocfs_ir_set_state" ref="acfca5b800ae900b897a529eabc817d79" args="(struct fs_db *fsdb, const char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lprocfs_ir_set_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00688">688</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00126">fs_db::fsdb_mutex</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00068">IR_PARTIAL</a>, <a class="el" href="mgs__internal_8h_source.html#l00071">IR_STRINGS</a>, and <a class="el" href="fsx_8c_source.html#l00124">state</a>.</p>

</div>
</div>
<a class="anchor" id="a0adef07f525044e28b0c27fc91ea0602"></a><!-- doxytag: member="mgs_nids.c::lprocfs_ir_set_timeout" ref="a0adef07f525044e28b0c27fc91ea0602" args="(struct fs_db *fsdb, const char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lprocfs_ir_set_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00714">714</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

</div>
</div>
<a class="anchor" id="a73ced42a16dbcd6bd2c7d89b472cddc6"></a><!-- doxytag: member="mgs_nids.c::lprocfs_ir_timeout_seq_show" ref="a73ced42a16dbcd6bd2c7d89b472cddc6" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lprocfs_ir_timeout_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00830">830</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="mgs__nids_8c_source.html#l00055">ir_timeout</a>.</p>

</div>
</div>
<a class="anchor" id="a3bff4d3994d47d1ae9b5369a18433309"></a><!-- doxytag: member="mgs_nids.c::lprocfs_ir_timeout_seq_write" ref="a3bff4d3994d47d1ae9b5369a18433309" args="(struct file *file, const char __user *buffer, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t lprocfs_ir_timeout_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00835">835</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="mgs__nids_8c_source.html#l00055">ir_timeout</a>.</p>

</div>
</div>
<a class="anchor" id="ab0fe5d54aeb9b89e4ad277bcfc67ebfe"></a><!-- doxytag: member="mgs_nids.c::lprocfs_rd_ir_state" ref="ab0fe5d54aeb9b89e4ad277bcfc67ebfe" args="(struct seq_file *seq, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lprocfs_rd_ir_state </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00798">798</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00194">cfs_duration_usec()</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00145">fs_db::fsdb_nidtbl</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00158">fs_db::fsdb_notify_count</a>, <a class="el" href="mgs__internal_8h_source.html#l00157">fs_db::fsdb_notify_max</a>, <a class="el" href="mgs__internal_8h_source.html#l00156">fs_db::fsdb_notify_total</a>, <a class="el" href="mgs__nids_8c_source.html#l00504">ir_state_graduate()</a>, <a class="el" href="mgs__internal_8h_source.html#l00071">IR_STRINGS</a>, and <a class="el" href="mgs__internal_8h_source.html#l00102">mgs_nidtbl::mn_version</a>.</p>

</div>
</div>
<a class="anchor" id="a6253023dd4dd371cf5d88158cf487db8"></a><!-- doxytag: member="mgs_nids.c::lprocfs_wr_ir_state" ref="a6253023dd4dd371cf5d88158cf487db8" args="(struct file *file, const char __user *buffer, size_t count, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lprocfs_wr_ir_state </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00740">740</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="mdsrate_8c_source.html#l00115">cmd</a>, <a class="el" href="structlproc__ir__cmd.html#a045302bd5fe8e37d25c6fbbf34253bed">lproc_ir_cmd::handler</a>, <a class="el" href="mgs__nids_8c.html#a8528cd5f96777c22d4179dbd1394a079">ir_cmds</a>, <a class="el" href="mgs__nids_8c_source.html#l00731">lproc_ir_cmd::name</a>, <a class="el" href="mgs__nids_8c_source.html#l00732">lproc_ir_cmd::namelen</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

</div>
</div>
<a class="anchor" id="a451023afa1a4b3ed8fe2acc59209fcbc"></a><!-- doxytag: member="mgs_nids.c::mgs_fsc_attach" ref="a451023afa1a4b3ed8fe2acc59209fcbc" args="(const struct lu_env *env, struct obd_export *exp, char *fsname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mgs_fsc_attach </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fsname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00844">844</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00283">obd_export::eu_mgs_data</a>, <a class="el" href="mgs__internal_8h_source.html#l00331">exp2mgs_dev()</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="mgs__internal_8h_source.html#l00140">fs_db::fsdb_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00126">fs_db::fsdb_mutex</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00068">IR_PARTIAL</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__export_8h_source.html#l00124">mgs_export_data::med_clients</a>, <a class="el" href="lustre__export_8h_source.html#l00125">mgs_export_data::med_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00085">mgs_fsc::mfc_export</a>, <a class="el" href="mgs__internal_8h_source.html#l00090">mgs_fsc::mfc_export_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00081">mgs_fsc::mfc_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00094">mgs_fsc::mfc_fsdb_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00095">mgs_fsc::mfc_ir_capable</a>, <a class="el" href="mgs__llog_8c_source.html#l00428">mgs_find_or_make_fsdb()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01224">OBD_CONNECT_IMP_RECOV</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__export.html#a566c348c59ec91da3ef339d2b54f0d7d">obd_export::u</a>.</p>

<p>Referenced by <a class="el" href="mgs__handler_8c_source.html#l00528">mgs_llog_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e87c901daed10df54f27602f7358244"></a><!-- doxytag: member="mgs_nids.c::mgs_fsc_cleanup" ref="a2e87c901daed10df54f27602f7358244" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mgs_fsc_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00909">909</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="lustre__export_8h_source.html#l00283">obd_export::eu_mgs_data</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00126">fs_db::fsdb_mutex</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00068">IR_PARTIAL</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="list_8h_source.html#l00046">LIST_HEAD_INIT</a>, <a class="el" href="list_8h_source.html#l00227">list_splice_init()</a>, <a class="el" href="lustre__export_8h_source.html#l00124">mgs_export_data::med_clients</a>, <a class="el" href="lustre__export_8h_source.html#l00125">mgs_export_data::med_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00085">mgs_fsc::mfc_export</a>, <a class="el" href="mgs__internal_8h_source.html#l00090">mgs_fsc::mfc_export_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00081">mgs_fsc::mfc_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00094">mgs_fsc::mfc_fsdb_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00095">mgs_fsc::mfc_ir_capable</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="structobd__export.html#a566c348c59ec91da3ef339d2b54f0d7d">obd_export::u</a>.</p>

<p>Referenced by <a class="el" href="mgs__handler_8c_source.html#l01521">mgs_obd_disconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="a4895da9f3960c0bbf55168c07d162b68"></a><!-- doxytag: member="mgs_nids.c::mgs_fsc_cleanup_by_fsdb" ref="a4895da9f3960c0bbf55168c07d162b68" args="(struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mgs_fsc_cleanup_by_fsdb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00941">941</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="lustre__export_8h_source.html#l00283">obd_export::eu_mgs_data</a>, <a class="el" href="mgs__internal_8h_source.html#l00140">fs_db::fsdb_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00068">IR_PARTIAL</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__export_8h_source.html#l00125">mgs_export_data::med_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00085">mgs_fsc::mfc_export</a>, <a class="el" href="mgs__internal_8h_source.html#l00090">mgs_fsc::mfc_export_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00081">mgs_fsc::mfc_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00094">mgs_fsc::mfc_fsdb_list</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="structobd__export.html#a566c348c59ec91da3ef339d2b54f0d7d">obd_export::u</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00487">mgs_ir_fini_fs()</a>.</p>

</div>
</div>
<a class="anchor" id="a54b4462c5931809e87dac0ef4d188674"></a><!-- doxytag: member="mgs_nids.c::mgs_get_ir_logs" ref="a54b4462c5931809e87dac0ef4d188674" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mgs_get_ir_logs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00598">598</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="structptlrpc__bulk__frag__ops.html#a3338125828618910ae190978e235d52a">ptlrpc_bulk_frag_ops::add_kiov_frag</a>, <a class="el" href="lustre__net_8h_source.html#l01451">ptlrpc_bulk_desc::bd_frag_ops</a>, <a class="el" href="multiop_8c_source.html#l00065">bufsize</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00185">CONFIG_T_RECOVER</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="mgs__nids_8c_source.html#l00567">delogname()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mgs__internal_8h_source.html#l00331">exp2mgs_dev()</a>, <a class="el" href="mgs__internal_8h_source.html#l00145">fs_db::fsdb_nidtbl</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02995">mgs_config_body::mcb_bits</a>, <a class="el" href="lustre__idl_8h_source.html#l02991">mgs_config_body::mcb_name</a>, <a class="el" href="lustre__idl_8h_source.html#l02992">mgs_config_body::mcb_offset</a>, <a class="el" href="lustre__idl_8h_source.html#l02993">mgs_config_body::mcb_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02996">mgs_config_body::mcb_units</a>, <a class="el" href="lustre__idl_8h_source.html#l03000">mgs_config_res::mcr_offset</a>, <a class="el" href="lustre__idl_8h_source.html#l00123">MGS_BULK_PORTAL</a>, <a class="el" href="mgs__llog_8c_source.html#l00428">mgs_find_or_make_fsdb()</a>, <a class="el" href="mgs__nids_8c_source.html#l00080">mgs_nidtbl_read()</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__net_8h_source.html#l01337">PTLRPC_BULK_BUF_KIOV</a>, <a class="el" href="client_8c_source.html#l00050">ptlrpc_bulk_kiov_pin_ops</a>, <a class="el" href="lustre__net_8h_source.html#l01341">PTLRPC_BULK_PUT_SOURCE</a>, <a class="el" href="client_8c_source.html#l00257">ptlrpc_free_bulk()</a>, <a class="el" href="lustre__net_8h_source.html#l00105">PTLRPC_MAX_BRW_PAGES</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00882">RMF_MGS_CONFIG_BODY</a>, <a class="el" href="layout_8c_source.html#l00888">RMF_MGS_CONFIG_RES</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

<p>Referenced by <a class="el" href="mgs__handler_8c_source.html#l00499">mgs_config_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a1ecfe16762c3e19e559c17066fb0e917"></a><!-- doxytag: member="mgs_nids.c::mgs_ir_fini_fs" ref="a1ecfe16762c3e19e559c17066fb0e917" args="(struct mgs_device *mgs, struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mgs_ir_fini_fs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmgs__device.html">mgs_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00487">487</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="mgs__internal_8h_source.html#l00140">fs_db::fsdb_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00132">fs_db::fsdb_flags</a>, <a class="el" href="mgs__internal_8h_source.html#l00118">FSDB_MGS_SELF</a>, <a class="el" href="mgs__internal_8h_source.html#l00150">fs_db::fsdb_notify_comp</a>, <a class="el" href="mgs__internal_8h_source.html#l00153">fs_db::fsdb_notify_stop</a>, <a class="el" href="mgs__internal_8h_source.html#l00149">fs_db::fsdb_notify_waitq</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="mgs__nids_8c_source.html#l00941">mgs_fsc_cleanup_by_fsdb()</a>, and <a class="el" href="mgs__nids_8c_source.html#l00359">mgs_nidtbl_fini_fs()</a>.</p>

<p>Referenced by <a class="el" href="mgs__llog_8c_source.html#l00387">mgs_free_fsdb()</a>.</p>

</div>
</div>
<a class="anchor" id="ad73b0228beb2fb6fb3b4b9dad025fde5"></a><!-- doxytag: member="mgs_nids.c::mgs_ir_init_fs" ref="ad73b0228beb2fb6fb3b4b9dad025fde5" args="(const struct lu_env *env, struct mgs_device *mgs, struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mgs_ir_init_fs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__device.html">mgs_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00455">455</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00142">cfs_time_before()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="mgs__internal_8h_source.html#l00140">fs_db::fsdb_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00148">fs_db::fsdb_mgs</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00141">fs_db::fsdb_nonir_clients</a>, <a class="el" href="mgs__internal_8h_source.html#l00150">fs_db::fsdb_notify_comp</a>, <a class="el" href="mgs__internal_8h_source.html#l00152">fs_db::fsdb_notify_phase</a>, <a class="el" href="mgs__internal_8h_source.html#l00149">fs_db::fsdb_notify_waitq</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00066">IR_STARTUP</a>, <a class="el" href="mgs__nids_8c_source.html#l00055">ir_timeout</a>, <a class="el" href="mgs__nids_8c_source.html#l00419">mgs_ir_notify()</a>, <a class="el" href="mgs__nids_8c_source.html#l00377">mgs_nidtbl_init_fs()</a>, <a class="el" href="mgs__internal_8h_source.html#l00174">mgs_device::mgs_start_time</a>, and <a class="el" href="obd__support_8h_source.html#l00150">OBD_IR_MGS_TIMEOUT</a>.</p>

<p>Referenced by <a class="el" href="mgs__llog_8c_source.html#l00328">mgs_new_fsdb()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bf50cf940399bbbd7bbf511eef93ce4"></a><!-- doxytag: member="mgs_nids.c::mgs_ir_notify" ref="a3bf50cf940399bbbd7bbf511eef93ce4" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgs_ir_notify </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00419">419</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="obd__class_8h_source.html#l00185">CONFIG_T_RECOVER</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="mgs__internal_8h_source.html#l00148">fs_db::fsdb_mgs</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00150">fs_db::fsdb_notify_comp</a>, <a class="el" href="mgs__internal_8h_source.html#l00152">fs_db::fsdb_notify_phase</a>, <a class="el" href="mgs__internal_8h_source.html#l00151">fs_db::fsdb_notify_start</a>, <a class="el" href="mgs__internal_8h_source.html#l00153">fs_db::fsdb_notify_stop</a>, <a class="el" href="mgs__internal_8h_source.html#l00149">fs_db::fsdb_notify_waitq</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="mgc__request_8c_source.html#l00094">mgc_fsname2resid()</a>, <a class="el" href="mgs__handler_8c_source.html#l00227">mgs_revoke_lock()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00455">mgs_ir_init_fs()</a>.</p>

</div>
</div>
<a class="anchor" id="a9921820a7627bb61d950e4348a549669"></a><!-- doxytag: member="mgs_nids.c::mgs_ir_notify_complete" ref="a9921820a7627bb61d950e4348a549669" args="(struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mgs_ir_notify_complete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00400">400</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00194">cfs_duration_usec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="libcfs__time_8h_source.html#l00051">cfs_time_sub()</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00158">fs_db::fsdb_notify_count</a>, <a class="el" href="mgs__internal_8h_source.html#l00157">fs_db::fsdb_notify_max</a>, <a class="el" href="mgs__internal_8h_source.html#l00152">fs_db::fsdb_notify_phase</a>, <a class="el" href="mgs__internal_8h_source.html#l00151">fs_db::fsdb_notify_start</a>, and <a class="el" href="mgs__internal_8h_source.html#l00156">fs_db::fsdb_notify_total</a>.</p>

<p>Referenced by <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>.</p>

</div>
</div>
<a class="anchor" id="a23cb17395ac476421e2be760747d98f5"></a><!-- doxytag: member="mgs_nids.c::mgs_ir_update" ref="a23cb17395ac476421e2be760747d98f5" args="(const struct lu_env *env, struct mgs_device *mgs, struct mgs_target_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mgs_ir_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__device.html">mgs_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00516">516</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="mgs__internal_8h_source.html#l00142">fs_db::fsdb_ir_state</a>, <a class="el" href="mgs__internal_8h_source.html#l00126">fs_db::fsdb_mutex</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00152">fs_db::fsdb_notify_phase</a>, <a class="el" href="mgs__internal_8h_source.html#l00149">fs_db::fsdb_notify_waitq</a>, <a class="el" href="mgs__internal_8h_source.html#l00067">IR_DISABLED</a>, <a class="el" href="mgs__internal_8h_source.html#l00065">IR_FULL</a>, <a class="el" href="mgs__internal_8h_source.html#l00068">IR_PARTIAL</a>, <a class="el" href="mgs__internal_8h_source.html#l00066">IR_STARTUP</a>, <a class="el" href="mgs__nids_8c_source.html#l00504">ir_state_graduate()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__disk_8h_source.html#l00104">LDD_F_IR_CAPABLE</a>, <a class="el" href="mgs__llog_8c_source.html#l00428">mgs_find_or_make_fsdb()</a>, <a class="el" href="mgs__nids_8c_source.html#l00306">mgs_nidtbl_write()</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02969">mgs_target_info::mti_fsname</a>, and <a class="el" href="lustre__idl_8h_source.html#l02968">mgs_target_info::mti_instance</a>.</p>

<p>Referenced by <a class="el" href="mgs__handler_8c_source.html#l00340">mgs_target_reg()</a>.</p>

</div>
</div>
<a class="anchor" id="a4591f6ff785f66ab5f0b0e7affd244ce"></a><!-- doxytag: member="mgs_nids.c::mgs_nidtbl_fini_fs" ref="a4591f6ff785f66ab5f0b0e7affd244ce" args="(struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mgs_nidtbl_fini_fs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00359">359</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="mgs__internal_8h_source.html#l00145">fs_db::fsdb_nidtbl</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00046">LIST_HEAD_INIT</a>, <a class="el" href="list_8h_source.html#l00227">list_splice_init()</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00103">mgs_nidtbl::mn_nr_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00104">mgs_nidtbl::mn_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00056">mgs_nidtbl_target::mnt_list</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00487">mgs_ir_fini_fs()</a>.</p>

</div>
</div>
<a class="anchor" id="a692527491a0c809546fe01f2106b2b34"></a><!-- doxytag: member="mgs_nids.c::mgs_nidtbl_init_fs" ref="a692527491a0c809546fe01f2106b2b34" args="(const struct lu_env *env, struct fs_db *fsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgs_nidtbl_init_fs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00377">377</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="mgs__internal_8h_source.html#l00148">fs_db::fsdb_mgs</a>, <a class="el" href="mgs__internal_8h_source.html#l00145">fs_db::fsdb_nidtbl</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="mgs__internal_8h_source.html#l00175">mgs_device::mgs_obd</a>, <a class="el" href="mgs__internal_8h_source.html#l00099">mgs_nidtbl::mn_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00103">mgs_nidtbl::mn_nr_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00104">mgs_nidtbl::mn_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00102">mgs_nidtbl::mn_version</a>, <a class="el" href="mgs__nids_8c_source.html#l00260">nidtbl_read_version()</a>, and <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00455">mgs_ir_init_fs()</a>.</p>

</div>
</div>
<a class="anchor" id="a46715a33238a1c21d42a6b3aeb13dd05"></a><!-- doxytag: member="mgs_nids.c::mgs_nidtbl_read" ref="a46715a33238a1c21d42a6b3aeb13dd05" args="(struct obd_export *exp, struct mgs_nidtbl *tbl, struct mgs_config_res *res, struct page **pages, int nrpages, int units_total, int unit_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgs_nidtbl_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *&nbsp;</td>
          <td class="paramname"> <em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__config__res.html">mgs_config_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page **&nbsp;</td>
          <td class="paramname"> <em>pages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nrpages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>units_total</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>unit_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fetch nidtbl entries whose version are not less than. </p>
<dl class="version"><dt><b>Version:</b></dt><dd>nidtbl entries will be packed in  by  units - entries shouldn't cross unit boundaries. </dd></dl>

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00080">80</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="mgs__handler_8c_source.html#l00044">D_MGS</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l03000">mgs_config_res::mcr_offset</a>, <a class="el" href="lustre__idl_8h_source.html#l03001">mgs_config_res::mcr_size</a>, <a class="el" href="mgs__internal_8h_source.html#l00099">mgs_nidtbl::mn_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00104">mgs_nidtbl::mn_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00102">mgs_nidtbl::mn_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02979">mgs_nidtbl_entry::mne_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02978">mgs_nidtbl_entry::mne_instance</a>, <a class="el" href="lustre__idl_8h_source.html#l02980">mgs_nidtbl_entry::mne_length</a>, <a class="el" href="lustre__idl_8h_source.html#l02984">mgs_nidtbl_entry::mne_nid_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02983">mgs_nidtbl_entry::mne_nid_size</a>, <a class="el" href="lustre__idl_8h_source.html#l02982">mgs_nidtbl_entry::mne_nid_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02981">mgs_nidtbl_entry::mne_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02977">mgs_nidtbl_entry::mne_version</a>, <a class="el" href="mgs__internal_8h_source.html#l00061">mgs_nidtbl_target::mnt_mti</a>, <a class="el" href="mgs__internal_8h_source.html#l00059">mgs_nidtbl_target::mnt_type</a>, <a class="el" href="mgs__internal_8h_source.html#l00058">mgs_nidtbl_target::mnt_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02968">mgs_target_info::mti_instance</a>, <a class="el" href="lustre__idl_8h_source.html#l02967">mgs_target_info::mti_nid_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02972">mgs_target_info::mti_nids</a>, <a class="el" href="lustre__idl_8h_source.html#l02961">MTI_NIDS_MAX</a>, <a class="el" href="lustre__idl_8h_source.html#l02964">mgs_target_info::mti_stripe_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02986">mgs_nidtbl_entry::nids</a>, <a class="el" href="mgs__nids_8c_source.html#l00057">nidtbl_is_sane()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="structmgs__nidtbl__entry.html#afeb30a15efab5b5bb10f53cdb051aa38">mgs_nidtbl_entry::u</a>, and <a class="el" href="packet-lnet_8c_source.html#l00255">version</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00598">mgs_get_ir_logs()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f81eb7ab525c2ce467a2a0efe5824c1"></a><!-- doxytag: member="mgs_nids.c::mgs_nidtbl_write" ref="a8f81eb7ab525c2ce467a2a0efe5824c1" args="(const struct lu_env *env, struct fs_db *fsdb, struct mgs_target_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgs_nidtbl_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfs__db.html">fs_db</a> *&nbsp;</td>
          <td class="paramname"> <em>fsdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00306">306</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mgs__internal_8h_source.html#l00148">fs_db::fsdb_mgs</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="mgs__internal_8h_source.html#l00145">fs_db::fsdb_nidtbl</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00083">LDD_F_SV_TYPE_MASK</a>, <a class="el" href="lustre__disk_8h_source.html#l00082">LDD_F_SV_TYPE_MGS</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00103">mgs_nidtbl::mn_nr_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00104">mgs_nidtbl::mn_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00102">mgs_nidtbl::mn_version</a>, <a class="el" href="mgs__internal_8h_source.html#l00057">mgs_nidtbl_target::mnt_fs</a>, <a class="el" href="mgs__internal_8h_source.html#l00056">mgs_nidtbl_target::mnt_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00061">mgs_nidtbl_target::mnt_mti</a>, <a class="el" href="mgs__internal_8h_source.html#l00059">mgs_nidtbl_target::mnt_type</a>, <a class="el" href="mgs__internal_8h_source.html#l00058">mgs_nidtbl_target::mnt_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02964">mgs_target_info::mti_stripe_index</a>, <a class="el" href="mgs__nids_8c_source.html#l00212">nidtbl_update_version()</a>, and <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00516">mgs_ir_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a16feab9df8d3674c81a39cb5f10ccaed"></a><!-- doxytag: member="mgs_nids.c::nidtbl_is_sane" ref="a16feab9df8d3674c81a39cb5f10ccaed" args="(struct mgs_nidtbl *tbl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int nidtbl_is_sane </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *&nbsp;</td>
          <td class="paramname"> <em>tbl</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00057">57</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00104">mgs_nidtbl::mn_targets</a>, <a class="el" href="mgs__internal_8h_source.html#l00056">mgs_nidtbl_target::mnt_list</a>, <a class="el" href="mgs__internal_8h_source.html#l00058">mgs_nidtbl_target::mnt_version</a>, and <a class="el" href="packet-lnet_8c_source.html#l00255">version</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00080">mgs_nidtbl_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f7c135f6006623f8707956f0dd5b40c"></a><!-- doxytag: member="mgs_nids.c::nidtbl_read_version" ref="a7f7c135f6006623f8707956f0dd5b40c" args="(const struct lu_env *env, struct mgs_device *mgs, struct mgs_nidtbl *tbl, u64 *version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int nidtbl_read_version </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__device.html">mgs_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *&nbsp;</td>
          <td class="paramname"> <em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&nbsp;</td>
          <td class="paramname"> <em>version</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00260">260</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8c_source.html#l00236">dt_locate_at()</a>, <a class="el" href="dt__object_8c_source.html#l00224">dt_lookup_dir()</a>, <a class="el" href="dt__object_8c_source.html#l00469">dt_read()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="mgs__internal_8h_source.html#l00164">mgs_device::mgs_bottom</a>, <a class="el" href="mgs__internal_8h_source.html#l00162">mgs_device::mgs_dt_dev</a>, <a class="el" href="mgs__internal_8h_source.html#l00167">mgs_device::mgs_nidtbl_dir</a>, <a class="el" href="mgs__nids_8c_source.html#l00258">MGS_NIDTBL_VERSION_INIT</a>, <a class="el" href="mgs__internal_8h_source.html#l00175">mgs_device::mgs_obd</a>, <a class="el" href="mgs__internal_8h_source.html#l00099">mgs_nidtbl::mn_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00377">mgs_nidtbl_init_fs()</a>.</p>

</div>
</div>
<a class="anchor" id="a2f489488aece501a1f200e5c6506dc25"></a><!-- doxytag: member="mgs_nids.c::nidtbl_update_version" ref="a2f489488aece501a1f200e5c6506dc25" args="(const struct lu_env *env, struct mgs_device *mgs, struct mgs_nidtbl *tbl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int nidtbl_update_version </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__device.html">mgs_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__nidtbl.html">mgs_nidtbl</a> *&nbsp;</td>
          <td class="paramname"> <em>tbl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00212">212</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mgs__internal_8h_source.html#l00124">fs_db::fsdb_name</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="local__storage_8c_source.html#l00432">local_file_find_or_create()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="mgs__internal_8h_source.html#l00164">mgs_device::mgs_bottom</a>, <a class="el" href="mgs__internal_8h_source.html#l00176">mgs_device::mgs_los</a>, <a class="el" href="mgs__internal_8h_source.html#l00167">mgs_device::mgs_nidtbl_dir</a>, <a class="el" href="mgs__internal_8h_source.html#l00099">mgs_nidtbl::mn_fsdb</a>, <a class="el" href="mgs__internal_8h_source.html#l00101">mgs_nidtbl::mn_lock</a>, <a class="el" href="mgs__internal_8h_source.html#l00102">mgs_nidtbl::mn_version</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, and <a class="el" href="packet-lnet_8c_source.html#l00255">version</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00306">mgs_nidtbl_write()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a8528cd5f96777c22d4179dbd1394a079"></a><!-- doxytag: member="mgs_nids.c::ir_cmds" ref="a8528cd5f96777c22d4179dbd1394a079" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlproc__ir__cmd.html">lproc_ir_cmd</a>  <a class="el" href="mgs__nids_8c.html#a8528cd5f96777c22d4179dbd1394a079">ir_cmds</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00740">lprocfs_wr_ir_state()</a>.</p>

</div>
</div>
<a class="anchor" id="a18a054c51c080003ef5863d156d7ccc6"></a><!-- doxytag: member="mgs_nids.c::ir_timeout" ref="a18a054c51c080003ef5863d156d7ccc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="mgs__nids_8c.html#a18a054c51c080003ef5863d156d7ccc6">ir_timeout</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgs__nids_8c_source.html#l00055">55</a> of file <a class="el" href="mgs__nids_8c_source.html">mgs_nids.c</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00504">ir_state_graduate()</a>, <a class="el" href="mgs__nids_8c_source.html#l00830">lprocfs_ir_timeout_seq_show()</a>, <a class="el" href="mgs__nids_8c_source.html#l00835">lprocfs_ir_timeout_seq_write()</a>, and <a class="el" href="mgs__nids_8c_source.html#l00455">mgs_ir_init_fs()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
