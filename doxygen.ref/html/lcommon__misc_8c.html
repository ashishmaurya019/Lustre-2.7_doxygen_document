<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/llite/lcommon_misc.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/llite/lcommon_misc.c File Reference</h1><code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cl__object_8h_source.html">cl_object.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="llite__internal_8h_source.html">llite_internal.h</a>&quot;</code><br/>

<p><a href="lcommon__misc_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lcommon__misc_8c.html#a101e87a5260f3e26e3dcdafeabab91c7">GROUPLOCK_SCOPE</a>&nbsp;&nbsp;&nbsp;&quot;grouplock&quot;</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lcommon__misc_8c.html#aef8793e0b61898c7188e270d450ab3c6">cl_init_ea_size</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *md_exp, struct <a class="el" href="structobd__export.html">obd_export</a> *dt_exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lcommon__misc_8c.html#a68f09c5d0805b6bf8d5e0f323900c9a0">cl_ocd_update</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *host, struct <a class="el" href="structobd__device.html">obd_device</a> *watched, enum <a class="el" href="obd_8h.html#a2edf5111b5e48090a5f07f11a420c5cc">obd_notify_event</a> ev, void *owner, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is used as an upcall-callback hooked by liblustre and llite clients into <a class="el" href="obd__class_8h.html#a78435b38bbe27a808d506a0ce2222e2d">obd_notify()</a> listeners chain to handle notifications about change of import connect_flags.  <a href="#a68f09c5d0805b6bf8d5e0f323900c9a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lcommon__misc_8c.html#a373733bddc1a55f1cf035d34dcabe2a2">cl_get_grouplock</a> (struct <a class="el" href="structcl__object.html">cl_object</a> *obj, unsigned long gid, int nonblock, struct <a class="el" href="structll__grouplock.html">ll_grouplock</a> *lg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lcommon__misc_8c.html#a033cfe6fdb3ff72dc6fbaf2081d67f38">cl_put_grouplock</a> (struct <a class="el" href="structll__grouplock.html">ll_grouplock</a> *lg)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a101e87a5260f3e26e3dcdafeabab91c7"></a><!-- doxytag: member="lcommon_misc.c::GROUPLOCK_SCOPE" ref="a101e87a5260f3e26e3dcdafeabab91c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GROUPLOCK_SCOPE&nbsp;&nbsp;&nbsp;&quot;grouplock&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lcommon__misc_8c_source.html#l00122">122</a> of file <a class="el" href="lcommon__misc_8c_source.html">lcommon_misc.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a373733bddc1a55f1cf035d34dcabe2a2"></a><!-- doxytag: member="lcommon_misc.c::cl_get_grouplock" ref="a373733bddc1a55f1cf035d34dcabe2a2" args="(struct cl_object *obj, unsigned long gid, int nonblock, struct ll_grouplock *lg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_get_grouplock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcl__object.html">cl_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nonblock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structll__grouplock.html">ll_grouplock</a> *&nbsp;</td>
          <td class="paramname"> <em>lg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lcommon__misc_8c_source.html#l00124">124</a> of file <a class="el" href="lcommon__misc_8c_source.html">lcommon_misc.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01625">CEF_MUST</a>, <a class="el" href="cl__object_8h_source.html#l01606">CEF_NONBLOCK</a>, <a class="el" href="cl__object_8h_source.html#l01820">cl_io::ci_ignore_layout</a>, <a class="el" href="cl__object_8h_source.html#l01752">cl_io::ci_obj</a>, <a class="el" href="cl__object_8h_source.html#l01397">CIT_MISC</a>, <a class="el" href="cl__object_8c_source.html#l00906">cl_env_get()</a>, <a class="el" href="cl__object_8c_source.html#l00989">cl_env_put()</a>, <a class="el" href="cl__object_8c_source.html#l01066">cl_env_unplant()</a>, <a class="el" href="cl__io_8c_source.html#l00103">cl_io_fini()</a>, <a class="el" href="cl__io_8c_source.html#l00211">cl_io_init()</a>, <a class="el" href="cl__lock_8c_source.html#l00195">cl_lock_request()</a>, <a class="el" href="cl__object_8h_source.html#l00470">CL_PAGE_EOF</a>, <a class="el" href="cl__object_8h_source.html#l01167">cl_lock_descr::cld_end</a>, <a class="el" href="cl__object_8h_source.html#l01176">cl_lock_descr::cld_enq_flags</a>, <a class="el" href="cl__object_8h_source.html#l01169">cl_lock_descr::cld_gid</a>, <a class="el" href="cl__object_8h_source.html#l01171">cl_lock_descr::cld_mode</a>, <a class="el" href="cl__object_8h_source.html#l01163">cl_lock_descr::cld_obj</a>, <a class="el" href="cl__object_8h_source.html#l01165">cl_lock_descr::cld_start</a>, <a class="el" href="cl__object_8h_source.html#l01193">cl_lock::cll_descr</a>, <a class="el" href="cl__object_8h_source.html#l00779">CLM_GROUP</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="llite__internal_8h_source.html#l00117">ll_grouplock::lg_env</a>, <a class="el" href="llite__internal_8h_source.html#l00120">ll_grouplock::lg_gid</a>, <a class="el" href="llite__internal_8h_source.html#l00118">ll_grouplock::lg_io</a>, <a class="el" href="llite__internal_8h_source.html#l00119">ll_grouplock::lg_lock</a>, <a class="el" href="vvp__internal_8h_source.html#l00168">vvp_env_lock()</a>, and <a class="el" href="vvp__internal_8h_source.html#l00186">vvp_env_thread_io()</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l01629">ll_get_grouplock()</a>.</p>

</div>
</div>
<a class="anchor" id="aef8793e0b61898c7188e270d450ab3c6"></a><!-- doxytag: member="lcommon_misc.c::cl_init_ea_size" ref="aef8793e0b61898c7188e270d450ab3c6" args="(struct obd_export *md_exp, struct obd_export *dt_exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cl_init_ea_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>md_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lcommon__misc_8c_source.html#l00051">51</a> of file <a class="el" href="lcommon__misc_8c_source.html">lcommon_misc.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00752">KEY_DEFAULT_EASIZE</a>, <a class="el" href="obd_8h_source.html#l00751">KEY_MAX_EASIZE</a>, <a class="el" href="obd__class_8h_source.html#l01568">md_init_ea_size()</a>, <a class="el" href="obd__class_8h_source.html#l00505">obd_get_info()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lcommon__misc_8c_source.html#l00086">cl_ocd_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a68f09c5d0805b6bf8d5e0f323900c9a0"></a><!-- doxytag: member="lcommon_misc.c::cl_ocd_update" ref="a68f09c5d0805b6bf8d5e0f323900c9a0" args="(struct obd_device *host, struct obd_device *watched, enum obd_notify_event ev, void *owner, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_ocd_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>watched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="obd_8h.html#a2edf5111b5e48090a5f07f11a420c5cc">obd_notify_event</a>&nbsp;</td>
          <td class="paramname"> <em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function is used as an upcall-callback hooked by liblustre and llite clients into <a class="el" href="obd__class_8h.html#a78435b38bbe27a808d506a0ce2222e2d">obd_notify()</a> listeners chain to handle notifications about change of import connect_flags. </p>
<p>See llu_fsswop_mount() and lustre_common_fill_super(). </p>

<p>Definition at line <a class="el" href="lcommon__misc_8c_source.html#l00086">86</a> of file <a class="el" href="lcommon__misc_8c_source.html">lcommon_misc.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="lcommon__misc_8c_source.html#l00051">cl_init_ea_size()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="libcfs__debug_8h_source.html#l00131">D_SUPER</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__import_8h_source.html#l00316">obd_import::imp_connect_data</a>, <a class="el" href="llite__internal_8h_source.html#l00513">lustre_client_ocd::lco_dt_exp</a>, <a class="el" href="llite__internal_8h_source.html#l00510">lustre_client_ocd::lco_flags</a>, <a class="el" href="llite__internal_8h_source.html#l00511">lustre_client_ocd::lco_lock</a>, <a class="el" href="llite__internal_8h_source.html#l00512">lustre_client_ocd::lco_md_exp</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="obd_8h_source.html#l00463">LUSTRE_OSC_NAME</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_set_up</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_stopping</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="llite__lib_8c_source.html#l00164">client_common_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a033cfe6fdb3ff72dc6fbaf2081d67f38"></a><!-- doxytag: member="lcommon_misc.c::cl_put_grouplock" ref="a033cfe6fdb3ff72dc6fbaf2081d67f38" args="(struct ll_grouplock *lg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_put_grouplock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structll__grouplock.html">ll_grouplock</a> *&nbsp;</td>
          <td class="paramname"> <em>lg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lcommon__misc_8c_source.html#l00181">181</a> of file <a class="el" href="lcommon__misc_8c_source.html">lcommon_misc.c</a>.</p>

<p>References <a class="el" href="cl__object_8c_source.html#l01051">cl_env_implant()</a>, <a class="el" href="cl__object_8c_source.html#l00989">cl_env_put()</a>, <a class="el" href="cl__io_8c_source.html#l00103">cl_io_fini()</a>, <a class="el" href="cl__lock_8c_source.html#l00233">cl_lock_release()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="llite__internal_8h_source.html#l00117">ll_grouplock::lg_env</a>, <a class="el" href="llite__internal_8h_source.html#l00120">ll_grouplock::lg_gid</a>, <a class="el" href="llite__internal_8h_source.html#l00118">ll_grouplock::lg_io</a>, and <a class="el" href="llite__internal_8h_source.html#l00119">ll_grouplock::lg_lock</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l01629">ll_get_grouplock()</a>, and <a class="el" href="file_8c_source.html#l01676">ll_put_grouplock()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
