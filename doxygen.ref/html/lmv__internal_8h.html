<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lmv/lmv_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lmv/lmv_internal.h File Reference</h1><code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lmv_8h_source.html">lustre_lmv.h</a>&gt;</code><br/>

<p><a href="lmv__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a83e97e7f2c1bf4cc9892c1440389f5ef">LMV_MAX_TGT_COUNT</a>&nbsp;&nbsp;&nbsp;128</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#afd65dd6f6497317885b1a36c3efa79cd">LL_IT2STR</a>(it)&nbsp;&nbsp;&nbsp;((it) ? ldlm_it2str((it)-&gt;it_op) : &quot;0&quot;)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a09085a484116271aa4133de80a41928c">lmv_check_connect</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a1b0e21180a6bf9e10164dab2b5ac957d">lmv_intent_lock</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **reqp, <a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a> cb_blocking, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> extra_lock_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a0e5d5e0cb3d58a3af14c3040ee1aaad0">lmv_blocking_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *, void *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a0ccd70c3e89b531f7ca3d300501ff064">lmv_fld_lookup</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u32 *mds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a279e2f8b9987a90b0b37d05e8f89c345">__lmv_fid_alloc</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u32 mds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#aa4764c5b00212c1e2a298d6c4780d248">lmv_fid_alloc</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a3ff8414d51b08994bb17879b951542dd">lmv_revalidate_slaves</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm, <a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a> cb_blocking, int extra_lock_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a02912124b39a10b175b8a275963d9c19">lmv2obd_dev</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a8e5f17e406c63cfdc26419d34cf57d94">lmv_get_target</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, u32 mdt_idx, int *index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a072e2d2eccdde38ed4a0006b0a66c92d">lmv_find_target_index</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a136efad105412cd25591e27d97fa7c5f">lmv_find_target</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a3f57f90e28ad49923ee90a90c190b743">lmv_stripe_md_size</a> (int stripe_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlmv__oinfo.html">lmv_oinfo</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a8314a1634e7809a525c9b510c62f6f54">lsm_name_to_stripe_info</a> (const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a9a4be4c974a1bc3d3173f0fe61243af9">lmv_need_try_all_stripes</a> (const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#a6cbec485d68de683ee9aa59560c1b9b4">lmv_locate_mds</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Locate mds by fid or name.  <a href="#a6cbec485d68de683ee9aa59560c1b9b4"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__internal_8h.html#abd2bf8b8a13612db803c68e532c0babd">lmv_proc_target_fops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="afd65dd6f6497317885b1a36c3efa79cd"></a><!-- doxytag: member="lmv_internal.h::LL_IT2STR" ref="afd65dd6f6497317885b1a36c3efa79cd" args="(it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LL_IT2STR</td>
          <td>(</td>
          <td class="paramtype">it&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((it) ? ldlm_it2str((it)-&gt;it_op) : &quot;0&quot;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00046">46</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a83e97e7f2c1bf4cc9892c1440389f5ef"></a><!-- doxytag: member="lmv_internal.h::LMV_MAX_TGT_COUNT" ref="a83e97e7f2c1bf4cc9892c1440389f5ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LMV_MAX_TGT_COUNT&nbsp;&nbsp;&nbsp;128</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00044">44</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a279e2f8b9987a90b0b37d05e8f89c345"></a><!-- doxytag: member="lmv_internal.h::__lmv_fid_alloc" ref="a279e2f8b9987a90b0b37d05e8f89c345" args="(struct lmv_obd *lmv, struct lu_fid *fid, u32 mds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __lmv_fid_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>mds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01276">1276</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00399">lmv_tgt_desc::ltd_fid_mutex</a>, <a class="el" href="obd__class_8h_source.html#l00879">obd_fid_alloc()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01310">lmv_fid_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="a02912124b39a10b175b8a275963d9c19"></a><!-- doxytag: member="lmv_internal.h::lmv2obd_dev" ref="a02912124b39a10b175b8a275963d9c19" args="(struct lmv_obd *lmv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structobd__device.html">obd_device</a>* lmv2obd_dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00068">68</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__fld_8c_source.html#l00056">lmv_fld_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e5d5e0cb3d58a3af14c3040ee1aaad0"></a><!-- doxytag: member="lmv_internal.h::lmv_blocking_ast" ref="a0e5d5e0cb3d58a3af14c3040ee1aaad0" args="(struct ldlm_lock *, struct ldlm_lock_desc *, void *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_blocking_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a09085a484116271aa4133de80a41928c"></a><!-- doxytag: member="lmv_internal.h::lmv_check_connect" ref="a09085a484116271aa4133de80a41928c" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_check_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00524">524</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l01220">class_disconnect()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="obd_8h_source.html#l00418">lmv_obd::cluuid</a>, <a class="el" href="obd_8h_source.html#l00423">lmv_obd::connected</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00419">lmv_obd::exp</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02563">lmv_desc::ld_active_tgt_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00315">lmv_connect_mdc()</a>, <a class="el" href="lmv__obd_8c_source.html#l00270">lmv_init_ea_size()</a>, <a class="el" href="obd_8h_source.html#l00422">lmv_obd::lmv_init_mutex</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02658">lmv_mds_md_size()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01624">lmv_close()</a>, <a class="el" href="lmv__obd_8c_source.html#l00207">lmv_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__obd_8c_source.html#l01805">lmv_enqueue()</a>, <a class="el" href="lmv__obd_8c_source.html#l02190">lmv_fsync()</a>, <a class="el" href="lmv__obd_8c_source.html#l02732">lmv_get_info()</a>, <a class="el" href="lmv__obd_8c_source.html#l03122">lmv_get_remote_perm()</a>, <a class="el" href="lmv__obd_8c_source.html#l01501">lmv_get_root()</a>, <a class="el" href="lmv__obd_8c_source.html#l01569">lmv_getattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01837">lmv_getattr_name()</a>, <a class="el" href="lmv__obd_8c_source.html#l01517">lmv_getxattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l03143">lmv_intent_getattr_async()</a>, <a class="el" href="lmv__intent_8c_source.html#l00469">lmv_intent_lock()</a>, <a class="el" href="lmv__obd_8c_source.html#l01937">lmv_link()</a>, <a class="el" href="lmv__obd_8c_source.html#l01596">lmv_null_inode()</a>, <a class="el" href="lmv__obd_8c_source.html#l02498">lmv_read_page()</a>, <a class="el" href="lmv__obd_8c_source.html#l02373">lmv_read_striped_page()</a>, <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>, <a class="el" href="lmv__obd_8c_source.html#l03182">lmv_revalidate_lock()</a>, <a class="el" href="lmv__obd_8c_source.html#l02164">lmv_setattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01542">lmv_setxattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01446">lmv_statfs()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4764c5b00212c1e2a298d6c4780d248"></a><!-- doxytag: member="lmv_internal.h::lmv_fid_alloc" ref="aa4764c5b00212c1e2a298d6c4780d248" args="(const struct lu_env *env, struct obd_export *exp, struct lu_fid *fid, struct md_op_data *op_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_fid_alloc </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01310">1310</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lmv__obd_8c_source.html#l01276">__lmv_fid_alloc()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l01232">lmv_placement_policy()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__intent_8c_source.html#l00265">lmv_intent_open()</a>, and <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="a136efad105412cd25591e27d97fa7c5f"></a><!-- doxytag: member="lmv_internal.h::lmv_find_target" ref="a136efad105412cd25591e27d97fa7c5f" args="(struct lmv_obd *lmv, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a>* lmv_find_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00114">114</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="lmv__internal_8h_source.html#l00093">lmv_find_target_index()</a>, and <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l03107">lmv_clear_open_replay_data()</a>, <a class="el" href="lmv__obd_8c_source.html#l01624">lmv_close()</a>, <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__obd_8c_source.html#l01898">lmv_early_cancel()</a>, <a class="el" href="lmv__obd_8c_source.html#l00686">lmv_fid2path()</a>, <a class="el" href="lmv__obd_8c_source.html#l02190">lmv_fsync()</a>, <a class="el" href="lmv__obd_8c_source.html#l03122">lmv_get_remote_perm()</a>, <a class="el" href="lmv__obd_8c_source.html#l01569">lmv_getattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01837">lmv_getattr_name()</a>, <a class="el" href="lmv__obd_8c_source.html#l01517">lmv_getxattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l00792">lmv_hsm_req_build()</a>, <a class="el" href="lmv__obd_8c_source.html#l00775">lmv_hsm_req_count()</a>, <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, <a class="el" href="lmv__intent_8c_source.html#l00265">lmv_intent_open()</a>, <a class="el" href="lmv__intent_8c_source.html#l00058">lmv_intent_remote()</a>, <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="lmv__obd_8c_source.html#l02498">lmv_read_page()</a>, <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>, <a class="el" href="lmv__obd_8c_source.html#l03182">lmv_revalidate_lock()</a>, <a class="el" href="lmv__obd_8c_source.html#l03091">lmv_set_open_replay_data()</a>, <a class="el" href="lmv__obd_8c_source.html#l02164">lmv_setattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01542">lmv_setxattr()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a072e2d2eccdde38ed4a0006b0a66c92d"></a><!-- doxytag: member="lmv_internal.h::lmv_find_target_index" ref="a072e2d2eccdde38ed4a0006b0a66c92d" args="(struct lmv_obd *lmv, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_find_target_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00093">93</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="lmv__fld_8c_source.html#l00056">lmv_fld_lookup()</a>, and <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>.</p>

<p>Referenced by <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, and <a class="el" href="lmv__obd_8c_source.html#l03019">lmv_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ccd70c3e89b531f7ca3d300501ff064"></a><!-- doxytag: member="lmv_internal.h::lmv_fld_lookup" ref="a0ccd70c3e89b531f7ca3d300501ff064" args="(struct lmv_obd *lmv, const struct lu_fid *fid, u32 *mds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_fld_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&nbsp;</td>
          <td class="paramname"> <em>mds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__fld_8c_source.html#l00056">56</a> of file <a class="el" href="lmv__fld_8c_source.html">lmv_fld.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__fid_8h_source.html#l00312">fid_seq_in_fldb()</a>, <a class="el" href="lustre__idl_8h_source.html#l00383">fid_seq_is_local_file()</a>, <a class="el" href="fld__request_8c_source.html#l00465">fld_client_lookup()</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="lmv__internal_8h_source.html#l00068">lmv2obd_dev()</a>, <a class="el" href="obd_8h_source.html#l00414">lmv_obd::lmv_fld</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l00166">LU_SEQ_RANGE_MDT</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__internal_8h_source.html#l00093">lmv_find_target_index()</a>, <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02850">lmv_unpack_md_v1()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e5f17e406c63cfdc26419d34cf57d94"></a><!-- doxytag: member="lmv_internal.h::lmv_get_target" ref="a8e5f17e406c63cfdc26419d34cf57d94" args="(struct lmv_obd *lmv, u32 mdt_idx, int *index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a>* lmv_get_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>mdt_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00074">74</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, and <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01276">__lmv_fid_alloc()</a>, <a class="el" href="lmv__internal_8h_source.html#l00093">lmv_find_target_index()</a>, <a class="el" href="lmv__obd_8c_source.html#l02239">lmv_get_min_striped_entry()</a>, <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="lmv__obd_8c_source.html#l01653">lmv_locate_target_for_name()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b0e21180a6bf9e10164dab2b5ac957d"></a><!-- doxytag: member="lmv_internal.h::lmv_intent_lock" ref="a1b0e21180a6bf9e10164dab2b5ac957d" args="(struct obd_export *exp, struct md_op_data *op_data, struct lookup_intent *it, struct ptlrpc_request **reqp, ldlm_blocking_callback cb_blocking, __u64 extra_lock_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_intent_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>reqp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a>&nbsp;</td>
          <td class="paramname"> <em>cb_blocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>extra_lock_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__intent_8c_source.html#l00469">469</a> of file <a class="el" href="lmv__intent_8c_source.html">lmv_intent.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="packet-lustre_8c_source.html#l00236">IT_GETATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l02880">IT_LAYOUT</a>, <a class="el" href="lustre__intent_8h_source.html#l00048">lookup_intent::it_lock_handle</a>, <a class="el" href="lustre__intent_8h_source.html#l00050">lookup_intent::it_lock_mode</a>, <a class="el" href="packet-lustre_8c_source.html#l00237">IT_LOOKUP</a>, <a class="el" href="lustre__intent_8h_source.html#l00043">lookup_intent::it_op</a>, <a class="el" href="packet-lustre_8c_source.html#l00233">IT_OPEN</a>, <a class="el" href="lustre__intent_8h_source.html#l00052">lookup_intent::it_remote_lock_handle</a>, <a class="el" href="lustre__intent_8h_source.html#l00051">lookup_intent::it_remote_lock_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, <a class="el" href="llite__internal_8h_source.html#l00077">LL_IT2STR</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, <a class="el" href="lmv__intent_8c_source.html#l00265">lmv_intent_open()</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a6cbec485d68de683ee9aa59560c1b9b4"></a><!-- doxytag: member="lmv_internal.h::lmv_locate_mds" ref="a6cbec485d68de683ee9aa59560c1b9b4" args="(struct lmv_obd *lmv, struct md_op_data *op_data, struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a>* lmv_locate_mds </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Locate mds by fid or name. </p>
<p>For striped directory (lsm != NULL), it will locate the stripe by name hash (see <a class="el" href="lmv__internal_8h.html#a8314a1634e7809a525c9b510c62f6f54">lsm_name_to_stripe_info()</a>). Note: if the hash_type is unknown, it will return -EBADFD, and lmv_intent_lookup might need walk through all of stripes to locate the entry.</p>
<p>For normal direcotry, it will locate MDS by FID directly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lmv</em>&nbsp;</td><td>LMV device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op_data</em>&nbsp;</td><td>client MD stack parameters, name, namelen mds_num etc. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>object FID used to locate MDS.</td></tr>
  </table>
  </dd>
</dl>
<p>retval pointer to the <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> if succeed. ERR_PTR(errno) if failed. </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01700">1700</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00039">lmv_oinfo::lmo_mds</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="lmv__obd_8c_source.html#l01653">lmv_locate_target_for_name()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l02368">MDS_CREATE_VOLATILE</a>, <a class="el" href="obd_8h_source.html#l00831">md_op_data::op_bias</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, and <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__obd_8c_source.html#l01805">lmv_enqueue()</a>, <a class="el" href="lmv__obd_8c_source.html#l01837">lmv_getattr_name()</a>, <a class="el" href="lmv__obd_8c_source.html#l03143">lmv_intent_getattr_async()</a>, <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, <a class="el" href="lmv__intent_8c_source.html#l00265">lmv_intent_open()</a>, <a class="el" href="lmv__obd_8c_source.html#l01937">lmv_link()</a>, <a class="el" href="lmv__intent_8c_source.html#l00155">lmv_revalidate_slaves()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a4be4c974a1bc3d3173f0fe61243af9"></a><!-- doxytag: member="lmv_internal.h::lmv_need_try_all_stripes" ref="a9a4be4c974a1bc3d3173f0fe61243af9" args="(const struct lmv_stripe_md *lsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool lmv_need_try_all_stripes </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00152">152</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__lmv_8h_source.html#l00173">lmv_is_known_hash_type()</a>, and <a class="el" href="lustre__lmv_8h_source.html#l00047">lmv_stripe_md::lsm_md_hash_type</a>.</p>

<p>Referenced by <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ff8414d51b08994bb17879b951542dd"></a><!-- doxytag: member="lmv_internal.h::lmv_revalidate_slaves" ref="a3ff8414d51b08994bb17879b951542dd" args="(struct obd_export *exp, const struct lmv_stripe_md *lsm, ldlm_blocking_callback cb_blocking, int extra_lock_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_revalidate_slaves </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a>&nbsp;</td>
          <td class="paramname"> <em>cb_blocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>extra_lock_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>revalidate slaves has some problems, temporarily return, we may not need that</p>
<p>Loop over the stripe information, check validity and update them from MDS if needed.</p>
</p>

<p>Definition at line <a class="el" href="lmv__intent_8c_source.html#l00155">155</a> of file <a class="el" href="lmv__intent_8c_source.html">lmv_intent.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="fsx_8c_source.html#l01082">cleanup()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="packet-lustre_8c_source.html#l00236">IT_GETATTR</a>, <a class="el" href="lustre__intent_8h_source.html#l00048">lookup_intent::it_lock_handle</a>, <a class="el" href="lustre__intent_8h_source.html#l00050">lookup_intent::it_lock_mode</a>, <a class="el" href="lustre__intent_8h_source.html#l00043">lookup_intent::it_op</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00040">lmv_oinfo::lmo_root</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="lustre__compat_8h_source.html#l00094">LTIME_S</a>, <a class="el" href="lustre__idl_8h_source.html#l02195">mdt_body::mbo_atime</a>, <a class="el" href="lustre__idl_8h_source.html#l02197">mdt_body::mbo_blocks</a>, <a class="el" href="lustre__idl_8h_source.html#l02196">mdt_body::mbo_ctime</a>, <a class="el" href="lustre__idl_8h_source.html#l02194">mdt_body::mbo_mtime</a>, <a class="el" href="lustre__idl_8h_source.html#l02210">mdt_body::mbo_nlink</a>, <a class="el" href="lustre__idl_8h_source.html#l02193">mdt_body::mbo_size</a>, <a class="el" href="obd__class_8h_source.html#l01359">md_intent_lock()</a>, <a class="el" href="obd__class_8h_source.html#l01529">md_set_lock_data()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00819">md_op_data::op_data</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="lustre__compat_8h_source.html#l00316">set_nlink()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, and <a class="el" href="lmv__obd_8c_source.html#l03272">lmv_merge_attr()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f57f90e28ad49923ee90a90c190b743"></a><!-- doxytag: member="lmv_internal.h::lmv_stripe_md_size" ref="a3f57f90e28ad49923ee90a90c190b743" args="(int stripe_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_stripe_md_size </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stripe_count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00125">125</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l02894">lmv_unpackmd()</a>.</p>

</div>
</div>
<a class="anchor" id="a8314a1634e7809a525c9b510c62f6f54"></a><!-- doxytag: member="lmv_internal.h::lsm_name_to_stripe_info" ref="a8314a1634e7809a525c9b510c62f6f54" args="(const struct lmv_stripe_md *lsm, const char *name, int namelen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlmv__oinfo.html">lmv_oinfo</a>* lsm_name_to_stripe_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__internal_8h_source.html#l00133">133</a> of file <a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__lmv_8h_source.html#l00140">lmv_name_to_stripe_index()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00047">lmv_stripe_md::lsm_md_hash_type</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, and <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l03203">lmv_get_fid_from_lsm()</a>, <a class="el" href="lmv__obd_8c_source.html#l01937">lmv_link()</a>, and <a class="el" href="lmv__obd_8c_source.html#l01653">lmv_locate_target_for_name()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abd2bf8b8a13612db803c68e532c0babd"></a><!-- doxytag: member="lmv_internal.h::lmv_proc_target_fops" ref="abd2bf8b8a13612db803c68e532c0babd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="lmv__internal_8h.html#abd2bf8b8a13612db803c68e532c0babd">lmv_proc_target_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01338">lmv_setup()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
