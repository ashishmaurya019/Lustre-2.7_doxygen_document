<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/obdclass/obd_mount_server.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/obdclass/obd_mount_server.c File Reference</h1><code>#include &lt;linux/types.h&gt;</code><br/>
<code>#include &lt;linux/selinux.h&gt;</code><br/>
<code>#include &lt;linux/statfs.h&gt;</code><br/>
<code>#include &lt;linux/version.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__user_8h_source.html">lustre/lustre_user.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="llog__swab_8h_source.html">llog_swab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__disk_8h_source.html">lustre_disk.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__ioctl_8h_source.html">lustre_ioctl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__param_8h_source.html">lustre_param.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>

<p><a href="obd__mount__server_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_CLASS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#ad940a854236305adf1c9aacba8bc2d80">D_MOUNT</a>&nbsp;&nbsp;&nbsp;(D_SUPER | D_CONFIG /* | D_WARNING */)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a7d80704e7e66a738cb64543dd64d9d4a">PRINT_CMD</a>&nbsp;&nbsp;&nbsp;CDEBUG</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a3a2ab262a46fe4c399fc6a98bd200e50">PRINT_MASK</a>&nbsp;&nbsp;&nbsp;(D_SUPER | D_CONFIG)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a4e01d9dd11652310b7f305656c5d511f">DEFINE_MUTEX</a> (lustre_mount_info_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlustre__mount__info.html">lustre_mount_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a6023b0aa7a0487f358e5188234578c7c">server_find_mount</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#af3546004203436bca76573ee708bcfbd">server_register_mount</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a2b0d2bf3a6795186caa1625853b40e97">server_deregister_mount</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlustre__mount__info.html">lustre_mount_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a192f5a0be0733dd8112a73f1910311de">server_get_mount</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a97e98d5d7439c6b467ebe5f578e74ca5">server_mount_info_list</a></td></tr>
<tr><td colspan="2"><h2>: obd name</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp066ca4cd3ea9b8724570088a8095977d"></a>server_put_mount: to be called from obd_cleanup methods</p>
<p>: 0 or 1 depending on whether the mount is to be deregistered or not</p>
<p>The caller decides whether <a class="el" href="obd__mount__server_8c.html#a2b0d2bf3a6795186caa1625853b40e97">server_deregister_mount()</a> needs to be called or not. Calling of <a class="el" href="obd__mount__server_8c.html#a2b0d2bf3a6795186caa1625853b40e97">server_deregister_mount()</a> does not depend on refcounting on lsi because we could have say the mgs and mds on the same node and we unmount the mds, then the ref on the lsi would still be non-zero but we would still want to deregister the mds mount. </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a23bc612dab6d9f55625f581fa8b8c431">log2</a>(n)&nbsp;&nbsp;&nbsp;ffz(~(n))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a2d0f49b0ba923f52672bdc244f339421">LUSTRE_SUPER_MAGIC</a>&nbsp;&nbsp;&nbsp;0x0BD00BD1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a572ab5d467e8727acbdba364e26712f6">lwp_register_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct super_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a3525aa238b953cac58829b4bff0038eb">server_ops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The operations we support directly on the superblock: mount, umount, and df.  <a href="#a3525aa238b953cac58829b4bff0038eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct inode_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a48ff51a028e6af974a19925dfeb3f15e">server_inode_operations</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a974e24c9dd3d06edfa63a3fdd2ce74bb">server_put_mount</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, bool dereg_mnt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#aae2cbcdbc576e87f4f5b74e31843e15a">server_start_mgs</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a460d1e213c50fd857f448edff8de7556">server_stop_mgs</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a42236e9bc10805e9e20c9293fdfb4cea">server_mgc_set_fs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *mgc, struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a40f8e76e3dc2863ceb053bace267ac4a">server_mgc_clear_fs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *mgc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a9289a12df87d6343a01d7712836e85ee">is_mdc_device</a> (const char *<a class="el" href="llverdev_8c.html#a48d51caca654a80a7ea9eb13c3ddbb7b">devname</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a96b1c185a9cebc9017537595075ee382">tgt_is_mdt</a> (const char *tgtname, __u32 *idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#ad152b3ec604780efa86d8410109e2150">tgt_name2lwp_name</a> (const char *tgt_name, char *lwp_name, int len, __u32 idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert OST/MDT name(fsname-{MDT,OST}xxxx) to a lwp name with the :yyyy (fsname-MDTyyyy-lwp-{MDT,OST}xxxx).  <a href="#ad152b3ec604780efa86d8410109e2150"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#aeaa5709b47d448a54c2e1bd5c9de65b9">DEFINE_SPINLOCK</a> (lwp_register_list_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a6ce75ba9daf988b99134b77cff9c73e8">lustre_put_lwp_item</a> (struct <a class="el" href="structlwp__register__item.html">lwp_register_item</a> *lri)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a2d336dd256c1b7020d86a0996a062860">lustre_register_lwp_item</a> (const char *lwpname, struct <a class="el" href="structobd__export.html">obd_export</a> **exp, <a class="el" href="obd__class_8h.html#ae8fcc2ff79d0cf0d4450bac526aa0aad">register_lwp_cb</a> cb_func, void *cb_data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#aff0ad2f9e6e3d3146f300839b645f117">lustre_deregister_lwp_item</a> (struct <a class="el" href="structobd__export.html">obd_export</a> **exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#aeed510017bf082f1b241fff55e8dd75c">lustre_find_lwp_by_index</a> (const char *dev, __u32 idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a07058f73b2e7ec49843f73c7dede3f92">lustre_notify_lwp_list</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a8208b5c22da29ee8f014f5eeb6ea3fb8">lustre_lwp_connect</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *lwp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#abd93495a5f1d66b7d57eb60d34ebe86e">lustre_lwp_setup</a> (struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *lcfg, struct lustre_sb_info *lsi, __u32 idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lwp is used by slaves (Non-MDT0 targets) to manage the connection to MDT0, or from the OSTx to MDTy.  <a href="#abd93495a5f1d66b7d57eb60d34ebe86e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a5a8d75a579cb3e89d979d3c12806f001">lustre_find_lwp</a> (struct lustre_sb_info *lsi, char **lwpname, __u32 idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a884bd6d89fa9cda4ba07442fdcb9320f">lustre_lwp_add_conn</a> (struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *cfg, struct lustre_sb_info *lsi, __u32 idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#ae2ec68aeaea4410a0e8a83243530ada9">client_lwp_config_process</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *handle, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *rec, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve MDT nids from the client log, then start the lwp device.  <a href="#ae2ec68aeaea4410a0e8a83243530ada9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a35d7fa9b91dbb55d10f2749f13ebc22e">lustre_disconnect_lwp</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#abbbe71680a89d2bdf9ea7f2079c825c0">lustre_stop_lwp</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the lwp for an OST/MDT target.  <a href="#abbbe71680a89d2bdf9ea7f2079c825c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a4fb320a72945c1e2b915ee06dcdca6c9">lustre_start_lwp</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the lwp(fsname-MDTyyyy-lwp-{MDT,OST}xxxx) for a MDT/OST or MDT target.  <a href="#a4fb320a72945c1e2b915ee06dcdca6c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a37a026253ad7ecfecc234f4896b89374">DEFINE_MUTEX</a> (server_start_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#aaf4a265d8bb9c066a203504f5a87902a">server_stop_servers</a> (int lsiflags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#af1c27c91b23a35bd36624be00fb3a1b6">server_mti_print</a> (const char *title, struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a529e9f94ebd7cc3470ee0cd538762f1f">server_lsi2mti</a> (struct lustre_sb_info *lsi, struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a090549e8446bbe2e71f19450ec265c85">server_register_target</a> (struct lustre_sb_info *lsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a31b5fb67dd5dc8e6178f333bedd5fbd5">server_notify_target</a> (struct super_block *sb, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notify the MGS that this target is ready.  <a href="#a31b5fb67dd5dc8e6178f333bedd5fbd5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a8e8f66cbde677ae401ae47b0ba9598e5">server_start_targets</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start server targets: MDTs and OSTs.  <a href="#a8e8f66cbde677ae401ae47b0ba9598e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a030a6b04431c49cc500d4a6c8dce3f7d">lsi_prepare</a> (struct lustre_sb_info *lsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a32e7f607fc5d716a99ad7c6adf0abb47">server_put_super</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the shutdown of servers at umount.  <a href="#a32e7f607fc5d716a99ad7c6adf0abb47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a24be59d2312952d4c09230e8db6c60e4">server_umount_begin</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called only for 'umount -f'.  <a href="#a24be59d2312952d4c09230e8db6c60e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a63e02523a78c87535edab42b6b92ddbd">server_statfs</a> (struct dentry *dentry, struct kstatfs *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a916359b06cbd3572e3407e5f66f86407">lustre_getxattr</a> (struct dentry *dentry, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, void *buffer, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a1839091197076f4062498aaef70c5878">lustre_setxattr</a> (struct dentry *dentry, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const void *value, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, int flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a4d1f28f328e188a17d23e98ff257edd1">lustre_listxattr</a> (struct dentry *d_entry, char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a11e043c255f7604bcd0ad45bb60769ef">server_fill_super_common</a> (struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a128cc45401245774fa492855a2432998">osd_start</a> (struct lustre_sb_info *lsi, unsigned long mflags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a272f352eed0439f1300b49c455b24768">server_fill_super</a> (struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fill in the superblock info for a Lustre server.  <a href="#a272f352eed0439f1300b49c455b24768"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="obd__mount__server_8c.html#a92a895d9293014b4439e8bb60de73066">server_calc_timeout</a> (struct lustre_sb_info *lsi, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad940a854236305adf1c9aacba8bc2d80"></a><!-- doxytag: member="obd_mount_server.c::D_MOUNT" ref="ad940a854236305adf1c9aacba8bc2d80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D_MOUNT&nbsp;&nbsp;&nbsp;(D_SUPER | D_CONFIG /* | D_WARNING */)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00045">45</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="obd_mount_server.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_CLASS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00044">44</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a23bc612dab6d9f55625f581fa8b8c431"></a><!-- doxytag: member="obd_mount_server.c::log2" ref="a23bc612dab6d9f55625f581fa8b8c431" args="(n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define log2</td>
          <td>(</td>
          <td class="paramtype">n&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;ffz(~(n))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01686">1686</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2d0f49b0ba923f52672bdc244f339421"></a><!-- doxytag: member="obd_mount_server.c::LUSTRE_SUPER_MAGIC" ref="a2d0f49b0ba923f52672bdc244f339421" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUSTRE_SUPER_MAGIC&nbsp;&nbsp;&nbsp;0x0BD00BD1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01687">1687</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01689">server_fill_super_common()</a>.</p>

</div>
</div>
<a class="anchor" id="a7d80704e7e66a738cb64543dd64d9d4a"></a><!-- doxytag: member="obd_mount_server.c::PRINT_CMD" ref="a7d80704e7e66a738cb64543dd64d9d4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRINT_CMD&nbsp;&nbsp;&nbsp;CDEBUG</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00046">46</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3a2ab262a46fe4c399fc6a98bd200e50"></a><!-- doxytag: member="obd_mount_server.c::PRINT_MASK" ref="a3a2ab262a46fe4c399fc6a98bd200e50" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRINT_MASK&nbsp;&nbsp;&nbsp;(D_SUPER | D_CONFIG)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00047">47</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01081">server_mti_print()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae2ec68aeaea4410a0e8a83243530ada9"></a><!-- doxytag: member="obd_mount_server.c::client_lwp_config_process" ref="ae2ec68aeaea4410a0e8a83243530ada9" args="(const struct lu_env *env, struct llog_handle *handle, struct llog_rec_hdr *rec, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int client_lwp_config_process </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve MDT nids from the client log, then start the lwp device. </p>
<p>there are only two scenarios which would include mdt nid. 1. marker 5 (flags=0x01, v2.1.54.0) lustre-MDTyyyy 'add mdc' xxx- add_uuid nid=192.168.122.162(0x20000c0a87aa2) 0: 1:192.168.122.162 attach 0:lustre-MDTyyyy-mdc 1:mdc 2:lustre-clilmv_UUID setup 0:lustre-MDTyyyy-mdc 1:lustre-MDTyyyy_UUID 2:192.168.122.162 add_uuid nid=192.168.172.1(0x20000c0a8ac01) 0: 1:192.168.172.1 add_conn 0:lustre-MDTyyyy-mdc 1:192.168.172.1 modify_mdc_tgts add 0:lustre-clilmv 1:lustre-MDTyyyy_UUID xxxx marker 5 (flags=0x02, v2.1.54.0) lustre-MDTyyyy 'add mdc' xxxx- 2. marker 7 (flags=0x01, v2.1.54.0) lustre-MDTyyyy 'add failnid' xxxx- add_uuid nid=192.168.122.2(0x20000c0a87a02) 0: 1:192.168.122.2 add_conn 0:lustre-MDTyyyy-mdc 1:192.168.122.2 marker 7 (flags=0x02, v2.1.54.0) lustre-MDTyyyy 'add failnid' xxxx- </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00780">780</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00039">__swab32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00163">CFG_F_MARKER</a>, <a class="el" href="obd__class_8h_source.html#l00164">CFG_F_SKIP</a>, <a class="el" href="obd__class_8h_source.html#l00176">config_llog_instance::cfg_flags</a>, <a class="el" href="obd__class_8h_source.html#l00177">config_llog_instance::cfg_lwp_idx</a>, <a class="el" href="obd__class_8h_source.html#l00172">config_llog_instance::cfg_sb</a>, <a class="el" href="lustre__peer_8c_source.html#l00097">class_add_uuid()</a>, <a class="el" href="lustre__idl_8h_source.html#l03020">cfg_marker::cm_comment</a>, <a class="el" href="lustre__idl_8h_source.html#l03006">CM_END</a>, <a class="el" href="lustre__idl_8h_source.html#l03009">CM_EXCLUDE</a>, <a class="el" href="lustre__idl_8h_source.html#l03014">cfg_marker::cm_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03007">CM_SKIP</a>, <a class="el" href="lustre__idl_8h_source.html#l03005">CM_START</a>, <a class="el" href="lustre__idl_8h_source.html#l03019">cfg_marker::cm_tgtname</a>, <a class="el" href="llverdev_8c_source.html#l00112">devname</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="obd__mount__server_8c_source.html#l00328">is_mdc_device()</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00082">LCFG_ADD_CONN</a>, <a class="el" href="lustre__cfg_8h_source.html#l00076">LCFG_ADD_UUID</a>, <a class="el" href="lustre__cfg_8h_source.html#l00130">lustre_cfg::lcfg_command</a>, <a class="el" href="lustre__cfg_8h_source.html#l00087">LCFG_MARKER</a>, <a class="el" href="lustre__cfg_8h_source.html#l00134">lustre_cfg::lcfg_nid</a>, <a class="el" href="lustre__cfg_8h_source.html#l00129">lustre_cfg::lcfg_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="lustre__cfg_8h_source.html#l00182">lustre_cfg_buf()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00146">LUSTRE_CFG_BUFLEN</a>, <a class="el" href="lustre__cfg_8h_source.html#l00299">lustre_cfg_sanity_check()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00210">lustre_cfg_string()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00059">LUSTRE_CFG_VERSION</a>, <a class="el" href="obd__mount__server_8c_source.html#l00719">lustre_lwp_add_conn()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00619">lustre_lwp_setup()</a>, <a class="el" href="llog__swab_8c_source.html#l00416">lustre_swab_cfg_marker()</a>, <a class="el" href="llog__swab_8c_source.html#l00374">lustre_swab_lustre_cfg()</a>, <a class="el" href="packet-lustre_8c_source.html#l00345">OBD_CFG_REC</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00336">tgt_is_mdt()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01000">lustre_start_lwp()</a>.</p>

</div>
</div>
<a class="anchor" id="a37a026253ad7ecfecc234f4896b89374"></a><!-- doxytag: member="obd_mount_server.c::DEFINE_MUTEX" ref="a37a026253ad7ecfecc234f4896b89374" args="(server_start_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DEFINE_MUTEX </td>
          <td>(</td>
          <td class="paramtype">server_start_lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4e01d9dd11652310b7f305656c5d511f"></a><!-- doxytag: member="obd_mount_server.c::DEFINE_MUTEX" ref="a4e01d9dd11652310b7f305656c5d511f" args="(lustre_mount_info_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DEFINE_MUTEX </td>
          <td>(</td>
          <td class="paramtype">lustre_mount_info_lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aeaa5709b47d448a54c2e1bd5c9de65b9"></a><!-- doxytag: member="obd_mount_server.c::DEFINE_SPINLOCK" ref="aeaa5709b47d448a54c2e1bd5c9de65b9" args="(lwp_register_list_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DEFINE_SPINLOCK </td>
          <td>(</td>
          <td class="paramtype">lwp_register_list_lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9289a12df87d6343a01d7712836e85ee"></a><!-- doxytag: member="obd_mount_server.c::is_mdc_device" ref="a9289a12df87d6343a01d7712836e85ee" args="(const char *devname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_mdc_device </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>devname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00328">328</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00780">client_lwp_config_process()</a>.</p>

</div>
</div>
<a class="anchor" id="a030a6b04431c49cc500d4a6c8dce3f7d"></a><!-- doxytag: member="obd_mount_server.c::lsi_prepare" ref="a030a6b04431c49cc500d4a6c8dce3f7d" args="(struct lustre_sb_info *lsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lsi_prepare </td>
          <td>(</td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01423">1423</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00287">LCONSOLE_ERROR</a>, <a class="el" href="lustre__disk_8h_source.html#l00102">LDD_F_NO_PRIMNODE</a>, <a class="el" href="lustre__disk_8h_source.html#l00082">LDD_F_SV_TYPE_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00092">LDD_F_UPDATE</a>, <a class="el" href="lustre__disk_8h_source.html#l00090">LDD_F_VIRGIN</a>, <a class="el" href="lustre__disk_8h_source.html#l00096">LDD_F_WRITECONF</a>, <a class="el" href="lustre__disk_8h_source.html#l00251">LMD_FLG_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00253">LMD_FLG_NO_PRIMNODE</a>, <a class="el" href="lustre__disk_8h_source.html#l00244">LMD_FLG_NOSVC</a>, <a class="el" href="lustre__disk_8h_source.html#l00255">LMD_FLG_UPDATE</a>, <a class="el" href="lustre__disk_8h_source.html#l00254">LMD_FLG_VIRGIN</a>, <a class="el" href="lustre__disk_8h_source.html#l00248">LMD_FLG_WRITECONF</a>, <a class="el" href="obd_8h_source.html#l00447">LUSTRE_OSD_LDISKFS_NAME</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="aff0ad2f9e6e3d3146f300839b645f117"></a><!-- doxytag: member="obd_mount_server.c::lustre_deregister_lwp_item" ref="aff0ad2f9e6e3d3146f300839b645f117" args="(struct obd_export **exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_deregister_lwp_item </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> **&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00458">458</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="obd__class_8h_source.html#l01665">lwp_register_item::lri_exp</a>, <a class="el" href="obd__class_8h_source.html#l01668">lwp_register_item::lri_list</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00394">lustre_put_lwp_item()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03668">mdt_deregister_seq_exp()</a>, <a class="el" href="mdt__handler_8c_source.html#l03746">mdt_register_seq_exp()</a>, <a class="el" href="ofd__fs_8c_source.html#l00259">ofd_deregister_seq_exp()</a>, <a class="el" href="ofd__fs_8c_source.html#l00527">ofd_register_seq_exp()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00474">qsd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a35d7fa9b91dbb55d10f2749f13ebc22e"></a><!-- doxytag: member="obd_mount_server.c::lustre_disconnect_lwp" ref="a35d7fa9b91dbb55d10f2749f13ebc22e" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_disconnect_lwp </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00890">890</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__cfg_8h_source.html#l00075">LCFG_CLEANUP</a>, <a class="el" href="lu__object_8h_source.html#l00279">lu_device::ld_ops</a>, <a class="el" href="structlu__device__operations.html#a892c61097c7e02dd33e5a9148d339dae">lu_device_operations::ldo_process_config</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__cfg_8h_source.html#l00175">lustre_cfg_bufs_reset()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00168">lustre_cfg_bufs_set_string()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00290">lustre_cfg_free()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00273">lustre_cfg_new()</a>, <a class="el" href="obd__mount_8c_source.html#l00126">lustre_end_log()</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00656">obd_device::obd_lwp_export</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a8d75a579cb3e89d979d3c12806f001"></a><!-- doxytag: member="obd_mount_server.c::lustre_find_lwp" ref="a5a8d75a579cb3e89d979d3c12806f001" args="(struct lustre_sb_info *lsi, char **lwpname, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structobd__device.html">obd_device</a>* lustre_find_lwp </td>
          <td>(</td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>lwpname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00684">684</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00186">IS_OST</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00349">tgt_name2lwp_name()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00719">lustre_lwp_add_conn()</a>.</p>

</div>
</div>
<a class="anchor" id="aeed510017bf082f1b241fff55e8dd75c"></a><!-- doxytag: member="obd_mount_server.c::lustre_find_lwp_by_index" ref="aeed510017bf082f1b241fff55e8dd75c" args="(const char *dev, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__export.html">obd_export</a>* lustre_find_lwp_by_index </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00476">476</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="obd_8h_source.html#l00656">obd_device::obd_lwp_export</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd__mount__server_8c_source.html#l00157">server_get_mount()</a>, <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00193">server_put_mount()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03789">lfsck_layout_slave_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>.</p>

</div>
</div>
<a class="anchor" id="a916359b06cbd3572e3407e5f66f86407"></a><!-- doxytag: member="obd_mount_server.c::lustre_getxattr" ref="a916359b06cbd3572e3407e5f66f86407" args="(struct dentry *dentry, const char *name, void *buffer, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t lustre_getxattr </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01660">1660</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4d1f28f328e188a17d23e98ff257edd1"></a><!-- doxytag: member="obd_mount_server.c::lustre_listxattr" ref="a4d1f28f328e188a17d23e98ff257edd1" args="(struct dentry *d_entry, char *name, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t lustre_listxattr </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&nbsp;</td>
          <td class="paramname"> <em>d_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01674">1674</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a884bd6d89fa9cda4ba07442fdcb9320f"></a><!-- doxytag: member="obd_mount_server.c::lustre_lwp_add_conn" ref="a884bd6d89fa9cda4ba07442fdcb9320f" args="(struct lustre_cfg *cfg, struct lustre_sb_info *lsi, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_lwp_add_conn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00719">719</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__config_8c_source.html#l00775">class_add_conn()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00082">LCFG_ADD_CONN</a>, <a class="el" href="lustre__cfg_8h_source.html#l00175">lustre_cfg_bufs_reset()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00168">lustre_cfg_bufs_set_string()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00290">lustre_cfg_free()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00273">lustre_cfg_new()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00210">lustre_cfg_string()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00684">lustre_find_lwp()</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00780">client_lwp_config_process()</a>.</p>

</div>
</div>
<a class="anchor" id="a8208b5c22da29ee8f014f5eeb6ea3fb8"></a><!-- doxytag: member="obd_mount_server.c::lustre_lwp_connect" ref="a8208b5c22da29ee8f014f5eeb6ea3fb8" args="(struct obd_device *lwp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_lwp_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>lwp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00548">548</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00964">lu_context::lc_thread</a>, <a class="el" href="lu__object_8h_source.html#l01028">LCT_SERVER_SESSION</a>, <a class="el" href="lu__object_8h_source.html#l00275">lu_device::ld_type</a>, <a class="el" href="lu__object_8h_source.html#l00336">lu_device_type::ldt_ctx_tags</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8c_source.html#l01776">lu_context_enter()</a>, <a class="el" href="lu__object_8c_source.html#l01786">lu_context_exit()</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01729">lu_context_init()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="lustre__ver_8h_source.html#l00023">LUSTRE_VERSION_CODE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00796">obd_connect()</a>, <a class="el" href="lustre__idl_8h_source.html#l01207">OBD_CONNECT_AT</a>, <a class="el" href="lustre__idl_8h_source.html#l01250">OBD_CONNECT_BULK_MBITS</a>, <a class="el" href="lustre__idl_8h_source.html#l01213">OBD_CONNECT_FID</a>, <a class="el" href="lustre__idl_8h_source.html#l01219">OBD_CONNECT_FULL20</a>, <a class="el" href="lustre__idl_8h_source.html#l01180">OBD_CONNECT_INDEX</a>, <a class="el" href="lustre__idl_8h_source.html#l01242">OBD_CONNECT_LFSCK</a>, <a class="el" href="lustre__idl_8h_source.html#l01235">OBD_CONNECT_LIGHTWEIGHT</a>, <a class="el" href="lustre__idl_8h_source.html#l01208">OBD_CONNECT_LRU_RESIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01233">OBD_CONNECT_LVB_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l01209">OBD_CONNECT_MDS_MDS</a>, <a class="el" href="lustre__idl_8h_source.html#l01184">OBD_CONNECT_VERSION</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00656">obd_device::obd_lwp_export</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01337">obd_connect_data::ocd_version</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00619">lustre_lwp_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="abd93495a5f1d66b7d57eb60d34ebe86e"></a><!-- doxytag: member="obd_mount_server.c::lustre_lwp_setup" ref="abd93495a5f1d66b7d57eb60d34ebe86e" args="(struct lustre_cfg *lcfg, struct lustre_sb_info *lsi, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_lwp_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *&nbsp;</td>
          <td class="paramname"> <em>lcfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lwp is used by slaves (Non-MDT0 targets) to manage the connection to MDT0, or from the OSTx to MDTy. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00619">619</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00183">client_obd::cl_max_mds_easize</a>, <a class="el" href="lustre__peer_8c_source.html#l00097">class_add_uuid()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00134">lustre_cfg::lcfg_nid</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00210">lustre_cfg_string()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00548">lustre_lwp_connect()</a>, <a class="el" href="obd_8h_source.html#l00454">LUSTRE_LWP_NAME</a>, <a class="el" href="obd__mount_8c_source.html#l00190">lustre_start_simple()</a>, <a class="el" href="lustre__idl_8h_source.html#l01579">MAX_MD_SIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00637">obd_device::obd_lwp_list</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l00349">tgt_name2lwp_name()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00780">client_lwp_config_process()</a>.</p>

</div>
</div>
<a class="anchor" id="a07058f73b2e7ec49843f73c7dede3f92"></a><!-- doxytag: member="obd_mount_server.c::lustre_notify_lwp_list" ref="a07058f73b2e7ec49843f73c7dede3f92" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_notify_lwp_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00517">517</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="obd__class_8h_source.html#l01667">lwp_register_item::lri_cb_data</a>, <a class="el" href="obd__class_8h_source.html#l01666">lwp_register_item::lri_cb_func</a>, <a class="el" href="obd__class_8h_source.html#l01665">lwp_register_item::lri_exp</a>, <a class="el" href="obd__class_8h_source.html#l01668">lwp_register_item::lri_list</a>, <a class="el" href="obd__class_8h_source.html#l01670">lwp_register_item::lri_name</a>, <a class="el" href="obd__class_8h_source.html#l01669">lwp_register_item::lri_ref</a>, <a class="el" href="obd__mount__server_8c_source.html#l00394">lustre_put_lwp_item()</a>, and <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>.</p>

<p>Referenced by <a class="el" href="lwp__dev_8c_source.html#l00402">lwp_notify_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a6ce75ba9daf988b99134b77cff9c73e8"></a><!-- doxytag: member="obd_mount_server.c::lustre_put_lwp_item" ref="a6ce75ba9daf988b99134b77cff9c73e8" args="(struct lwp_register_item *lri)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lustre_put_lwp_item </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlwp__register__item.html">lwp_register_item</a> *&nbsp;</td>
          <td class="paramname"> <em>lri</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00394">394</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="obd__class_8h_source.html#l01665">lwp_register_item::lri_exp</a>, <a class="el" href="obd__class_8h_source.html#l01668">lwp_register_item::lri_list</a>, <a class="el" href="obd__class_8h_source.html#l01669">lwp_register_item::lri_ref</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00458">lustre_deregister_lwp_item()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00517">lustre_notify_lwp_list()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00405">lustre_register_lwp_item()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d336dd256c1b7020d86a0996a062860"></a><!-- doxytag: member="obd_mount_server.c::lustre_register_lwp_item" ref="a2d336dd256c1b7020d86a0996a062860" args="(const char *lwpname, struct obd_export **exp, register_lwp_cb cb_func, void *cb_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lustre_register_lwp_item </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lwpname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> **&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="obd__class_8h.html#ae8fcc2ff79d0cf0d4450bac526aa0aad">register_lwp_cb</a>&nbsp;</td>
          <td class="paramname"> <em>cb_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cb_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00405">405</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="obd__class_8h_source.html#l01667">lwp_register_item::lri_cb_data</a>, <a class="el" href="obd__class_8h_source.html#l01666">lwp_register_item::lri_cb_func</a>, <a class="el" href="obd__class_8h_source.html#l01665">lwp_register_item::lri_exp</a>, <a class="el" href="obd__class_8h_source.html#l01668">lwp_register_item::lri_list</a>, <a class="el" href="obd__class_8h_source.html#l01670">lwp_register_item::lri_name</a>, <a class="el" href="obd__class_8h_source.html#l01669">lwp_register_item::lri_ref</a>, <a class="el" href="obd__mount__server_8c_source.html#l00394">lustre_put_lwp_item()</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_set_up</a>, <a class="el" href="obd_8h_source.html#l00626">obd_device::obd_uuid_hash</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03746">mdt_register_seq_exp()</a>, <a class="el" href="ofd__fs_8c_source.html#l00527">ofd_register_seq_exp()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00656">qsd_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a1839091197076f4062498aaef70c5878"></a><!-- doxytag: member="obd_mount_server.c::lustre_setxattr" ref="a1839091197076f4062498aaef70c5878" args="(struct dentry *dentry, const char *name, const void *value, size_t size, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_setxattr </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01668">1668</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4fb320a72945c1e2b915ee06dcdca6c9"></a><!-- doxytag: member="obd_mount_server.c::lustre_start_lwp" ref="a4fb320a72945c1e2b915ee06dcdca6c9" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_start_lwp </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start the lwp(fsname-MDTyyyy-lwp-{MDT,OST}xxxx) for a MDT/OST or MDT target. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01000">1000</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00174">config_llog_instance::cfg_callback</a>, <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__mount__server_8c_source.html#l00780">client_lwp_config_process()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="obd__mount_8c_source.html#l00075">lustre_process_log()</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="abbbe71680a89d2bdf9ea7f2079c825c0"></a><!-- doxytag: member="obd_mount_server.c::lustre_stop_lwp" ref="abbbe71680a89d2bdf9ea7f2079c825c0" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lustre_stop_lwp </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop the lwp for an OST/MDT target. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00973">973</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__config_8c_source.html#l01909">class_manual_cleanup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="obd_8h_source.html#l00637">obd_device::obd_lwp_list</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a128cc45401245774fa492855a2432998"></a><!-- doxytag: member="obd_mount_server.c::osd_start" ref="a128cc45401245774fa492855a2432998" args="(struct lustre_sb_info *lsi, unsigned long mflags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_start </td>
          <td>(</td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>mflags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01723">1723</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__config_8c_source.html#l01909">class_manual_cleanup()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="lvfs_8h_source.html#l00061">lvfs_run_ctxt::dt</a>, <a class="el" href="dt__object_8h_source.html#l02455">dt_conf_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00187">IS_MGS</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00228">lustre_mount_data::lmd_dev</a>, <a class="el" href="lustre__disk_8h_source.html#l00223">lustre_mount_data::lmd_flags</a>, <a class="el" href="lustre__disk_8h_source.html#l00246">LMD_FLG_NOMGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00244">LMD_FLG_NOSVC</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, <a class="el" href="lu__object_8c_source.html#l01181">lu_device_get()</a>, <a class="el" href="obd__mount_8c_source.html#l00190">lustre_start_simple()</a>, <a class="el" href="obd__class_8h_source.html#l00796">obd_connect()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00650">obd_device::obd_lvfs_ctxt</a>, <a class="el" href="lvfs_8h_source.html#l00067">OBD_SET_CTXT_MAGIC()</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a92a895d9293014b4439e8bb60de73066"></a><!-- doxytag: member="obd_mount_server.c::server_calc_timeout" ref="a92a895d9293014b4439e8bb60de73066" args="(struct lustre_sb_info *lsi, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void server_calc_timeout </td>
          <td>(</td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01875">1875</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00283">LCONSOLE_INFO</a>, <a class="el" href="lustre__disk_8h_source.html#l00104">LDD_F_IR_CAPABLE</a>, <a class="el" href="lustre__disk_8h_source.html#l00223">lustre_mount_data::lmd_flags</a>, <a class="el" href="lustre__disk_8h_source.html#l00249">LMD_FLG_NOIR</a>, <a class="el" href="lustre__disk_8h_source.html#l00227">lustre_mount_data::lmd_recovery_time_hard</a>, <a class="el" href="lustre__disk_8h_source.html#l00226">lustre_mount_data::lmd_recovery_time_soft</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="obd__support_8h_source.html#l00148">OBD_IR_FACTOR_DEFAULT</a>, <a class="el" href="obd__support_8h_source.html#l00147">OBD_IR_FACTOR_MAX</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_no_ir</a>, <a class="el" href="obd_8h_source.html#l00679">obd_device::obd_recovery_ir_factor</a>, <a class="el" href="obd_8h_source.html#l00677">obd_device::obd_recovery_time_hard</a>, <a class="el" href="obd__support_8h_source.html#l00116">OBD_RECOVERY_TIME_HARD</a>, <a class="el" href="obd__support_8h_source.html#l00145">OBD_RECOVERY_TIME_MIN</a>, <a class="el" href="obd__support_8h_source.html#l00119">OBD_RECOVERY_TIME_SOFT</a>, and <a class="el" href="obd_8h_source.html#l00678">obd_device::obd_recovery_timeout</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="a2b0d2bf3a6795186caa1625853b40e97"></a><!-- doxytag: member="obd_mount_server.c::server_deregister_mount" ref="a2b0d2bf3a6795186caa1625853b40e97" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_deregister_mount </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00131">131</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="lustre__disk_8h_source.html#l00563">lustre_mount_info::lmi_list_chain</a>, <a class="el" href="lustre__disk_8h_source.html#l00561">lustre_mount_info::lmi_name</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00074">server_find_mount()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00193">server_put_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00224">server_start_mgs()</a>.</p>

</div>
</div>
<a class="anchor" id="a272f352eed0439f1300b49c455b24768"></a><!-- doxytag: member="obd_mount_server.c::server_fill_super" ref="a272f352eed0439f1300b49c455b24768" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_fill_super </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fill in the superblock info for a Lustre server. </p>
<p>Mount the device with the correct <a class="el" href="structoptions.html">options</a>. Read the on-disk config file. Start the services. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01792">1792</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00187">IS_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00186">IS_OST</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="lustre__disk_8h_source.html#l00246">LMD_FLG_NOMGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00244">LMD_FLG_NOSVC</a>, <a class="el" href="obd__mount__server_8c_source.html#l01423">lsi_prepare()</a>, <a class="el" href="obd__mount_8c_source.html#l00646">lustre_put_lsi()</a>, <a class="el" href="obd__mount_8c_source.html#l00217">lustre_start_mgc()</a>, <a class="el" href="obd__support_8h_source.html#l00445">OBD_FAIL_TGT_MOUNT_RACE</a>, <a class="el" href="obd__support_8h_source.html#l00627">OBD_RACE</a>, <a class="el" href="obd__mount__server_8c_source.html#l01723">osd_start()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l01689">server_fill_super_common()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00224">server_start_mgs()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount_8c_source.html#l01376">lustre_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a11e043c255f7604bcd0ad45bb60769ef"></a><!-- doxytag: member="obd_mount_server.c::server_fill_super_common" ref="a11e043c255f7604bcd0ad45bb60769ef" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_fill_super_common </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01689">1689</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__compat_8h_source.html#l00330">d_make_root()</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="llite__lib_8c_source.html#l00068">log2</a>, <a class="el" href="obd__mount__server_8c_source.html#l01687">LUSTRE_SUPER_MAGIC</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l01680">server_inode_operations</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01651">server_ops</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a6023b0aa7a0487f358e5188234578c7c"></a><!-- doxytag: member="obd_mount_server.c::server_find_mount" ref="a6023b0aa7a0487f358e5188234578c7c" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlustre__mount__info.html">lustre_mount_info</a>* server_find_mount </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00074">74</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="lustre__disk_8h_source.html#l00563">lustre_mount_info::lmi_list_chain</a>, <a class="el" href="lustre__disk_8h_source.html#l00561">lustre_mount_info::lmi_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00131">server_deregister_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00157">server_get_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00193">server_put_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00092">server_register_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00224">server_start_mgs()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00266">server_stop_mgs()</a>.</p>

</div>
</div>
<a class="anchor" id="a192f5a0be0733dd8112a73f1910311de"></a><!-- doxytag: member="obd_mount_server.c::server_get_mount" ref="a192f5a0be0733dd8112a73f1910311de" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlustre__mount__info.html">lustre_mount_info</a>* server_get_mount </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00157">157</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00074">server_find_mount()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00476">lustre_find_lwp_by_index()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mgs__handler_8c_source.html#l01094">mgs_init0()</a>, and <a class="el" href="ofd__dev_8c_source.html#l00163">ofd_stack_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a529e9f94ebd7cc3470ee0cd538762f1f"></a><!-- doxytag: member="obd_mount_server.c::server_lsi2mti" ref="a529e9f94ebd7cc3470ee0cd538762f1f" args="(struct lustre_sb_info *lsi, struct mgs_target_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_lsi2mti </td>
          <td>(</td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01093">1093</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__config_8c_source.html#l00313">class_match_net()</a>, <a class="el" href="obd__config_8c_source.html#l00296">class_match_nid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00118">LDD_F_MASK</a>, <a class="el" href="lustre__disk_8h_source.html#l00088">LDD_F_NEED_INDEX</a>, <a class="el" href="lustre__disk_8h_source.html#l00092">LDD_F_UPDATE</a>, <a class="el" href="lustre__disk_8h_source.html#l00090">LDD_F_VIRGIN</a>, <a class="el" href="lustre__disk_8h_source.html#l00096">LDD_F_WRITECONF</a>, <a class="el" href="lustre__disk_8h_source.html#l00253">LMD_FLG_NO_PRIMNODE</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00105">LNET_NETTYP()</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00090">LNET_NIDNET()</a>, <a class="el" href="api-ni_8c_source.html#l02129">LNetGetId()</a>, <a class="el" href="nidstr_8h_source.html#l00046">LOLND</a>, <a class="el" href="lustre__ver_8h_source.html#l00023">LUSTRE_VERSION_CODE</a>, <a class="el" href="lustre__idl_8h_source.html#l02965">mgs_target_info::mti_config_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02969">mgs_target_info::mti_fsname</a>, <a class="el" href="lustre__idl_8h_source.html#l02963">mgs_target_info::mti_lustre_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l02967">mgs_target_info::mti_nid_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02972">mgs_target_info::mti_nids</a>, <a class="el" href="lustre__idl_8h_source.html#l02961">MTI_NIDS_MAX</a>, <a class="el" href="lustre__idl_8h_source.html#l02973">mgs_target_info::mti_params</a>, <a class="el" href="lustre__idl_8h_source.html#l02964">mgs_target_info::mti_stripe_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02970">mgs_target_info::mti_svname</a>, <a class="el" href="lustre__param_8h_source.html#l00099">PARAM_FAILNODE</a>, <a class="el" href="lustre__param_8h_source.html#l00102">PARAM_NETWORK</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>, <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01232">server_notify_target()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01166">server_register_target()</a>.</p>

</div>
</div>
<a class="anchor" id="a40f8e76e3dc2863ceb053bace267ac4a"></a><!-- doxytag: member="obd_mount_server.c::server_mgc_clear_fs" ref="a40f8e76e3dc2863ceb053bace267ac4a" args="(const struct lu_env *env, struct obd_device *mgc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_mgc_clear_fs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00314">314</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00740">KEY_CLEAR_FS</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="a42236e9bc10805e9e20c9293fdfb4cea"></a><!-- doxytag: member="obd_mount_server.c::server_mgc_set_fs" ref="a42236e9bc10805e9e20c9293fdfb4cea" args="(const struct lu_env *env, struct obd_device *mgc, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_mgc_set_fs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00295">295</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00756">KEY_SET_FS</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="af1c27c91b23a35bd36624be00fb3a1b6"></a><!-- doxytag: member="obd_mount_server.c::server_mti_print" ref="af1c27c91b23a35bd36624be00fb3a1b6" args="(const char *title, struct mgs_target_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_mti_print </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01081">1081</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02965">mgs_target_info::mti_config_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02969">mgs_target_info::mti_fsname</a>, <a class="el" href="lustre__idl_8h_source.html#l02970">mgs_target_info::mti_svname</a>, <a class="el" href="lustre__idl_8h_source.html#l02971">mgs_target_info::mti_uuid</a>, <a class="el" href="obd__mount_8c_source.html#l00046">PRINT_CMD</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00047">PRINT_MASK</a>.</p>

</div>
</div>
<a class="anchor" id="a31b5fb67dd5dc8e6178f333bedd5fbd5"></a><!-- doxytag: member="obd_mount_server.c::server_notify_target" ref="a31b5fb67dd5dc8e6178f333bedd5fbd5" args="(struct super_block *sb, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_notify_target </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify the MGS that this target is ready. </p>
<p>Used by IR - if the MGS receives this message, it will notify clients. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01232">1232</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="obd_8h_source.html#l00755">KEY_REGISTER_TARGET</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00106">LDD_F_ERROR</a>, <a class="el" href="lustre__disk_8h_source.html#l00104">LDD_F_IR_CAPABLE</a>, <a class="el" href="lustre__disk_8h_source.html#l00113">LDD_F_OPC_READY</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02968">mgs_target_info::mti_instance</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l01093">server_lsi2mti()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="a974e24c9dd3d06edfa63a3fdd2ce74bb"></a><!-- doxytag: member="obd_mount_server.c::server_put_mount" ref="a974e24c9dd3d06edfa63a3fdd2ce74bb" args="(const char *name, bool dereg_mnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_put_mount </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>dereg_mnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00193">193</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="obd__mount_8c_source.html#l00646">lustre_put_lsi()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l00131">server_deregister_mount()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00074">server_find_mount()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00476">lustre_find_lwp_by_index()</a>, <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mgs__handler_8c_source.html#l01382">mgs_device_fini()</a>, <a class="el" href="mgs__handler_8c_source.html#l01094">mgs_init0()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02983">ofd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a32e7f607fc5d716a99ad7c6adf0abb47"></a><!-- doxytag: member="obd_mount_server.c::server_put_super" ref="a32e7f607fc5d716a99ad7c6adf0abb47" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void server_put_super </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start the shutdown of servers at umount. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01497">1497</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__config_8c_source.html#l00844">class_get_profile()</a>, <a class="el" href="obd__config_8c_source.html#l01909">class_manual_cleanup()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd__config_8c_source.html#l00941">class_put_profile()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00187">IS_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00186">IS_OST</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lustre__disk_8h_source.html#l00246">LMD_FLG_NOMGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00244">LMD_FLG_NOSVC</a>, <a class="el" href="obd__class_8h_source.html#l00214">lustre_profile::lp_dt</a>, <a class="el" href="obd__mount_8c_source.html#l00817">lustre_common_put_super()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00890">lustre_disconnect_lwp()</a>, <a class="el" href="obd__mount_8c_source.html#l00126">lustre_end_log()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00973">lustre_stop_lwp()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_fail</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="genops_8c_source.html#l01745">obd_zombie_barrier()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00131">server_deregister_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00266">server_stop_mgs()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01046">server_stop_servers()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="af3546004203436bca76573ee708bcfbd"></a><!-- doxytag: member="obd_mount_server.c::server_register_mount" ref="af3546004203436bca76573ee708bcfbd" args="(const char *name, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_register_mount </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00092">92</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="lustre__disk_8h_source.html#l00563">lustre_mount_info::lmi_list_chain</a>, <a class="el" href="lustre__disk_8h_source.html#l00561">lustre_mount_info::lmi_name</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00074">server_find_mount()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00224">server_start_mgs()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="a090549e8446bbe2e71f19450ec265c85"></a><!-- doxytag: member="obd_mount_server.c::server_register_target" ref="a090549e8446bbe2e71f19450ec265c85" args="(struct lustre_sb_info *lsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_register_target </td>
          <td>(</td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01166">1166</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="obd_8h_source.html#l00755">KEY_REGISTER_TARGET</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="lustre__disk_8h_source.html#l00106">LDD_F_ERROR</a>, <a class="el" href="lustre__disk_8h_source.html#l00088">LDD_F_NEED_INDEX</a>, <a class="el" href="lustre__disk_8h_source.html#l00111">LDD_F_OPC_REG</a>, <a class="el" href="lustre__disk_8h_source.html#l00092">LDD_F_UPDATE</a>, <a class="el" href="nidstr_8h_source.html#l00077">libcfs_nid2str()</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02969">mgs_target_info::mti_fsname</a>, <a class="el" href="lustre__idl_8h_source.html#l02972">mgs_target_info::mti_nids</a>, <a class="el" href="lustre__idl_8h_source.html#l02964">mgs_target_info::mti_stripe_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02970">mgs_target_info::mti_svname</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l01093">server_lsi2mti()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="aae2cbcdbc576e87f4f5b74e31843e15a"></a><!-- doxytag: member="obd_mount_server.c::server_start_mgs" ref="aae2cbcdbc576e87f4f5b74e31843e15a" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_start_mgs </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00224">224</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="obd_8h_source.html#l00465">LUSTRE_MGS_NAME</a>, <a class="el" href="obd_8h_source.html#l00475">LUSTRE_MGS_OBDNAME</a>, <a class="el" href="obd__mount_8c_source.html#l00190">lustre_start_simple()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l00131">server_deregister_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00074">server_find_mount()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00092">server_register_mount()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e8f66cbde677ae401ae47b0ba9598e5"></a><!-- doxytag: member="obd_mount_server.c::server_start_targets" ref="a8e8f66cbde677ae401ae47b0ba9598e5" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_start_targets </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start server targets: MDTs and OSTs. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01275">1275</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00174">config_llog_instance::cfg_callback</a>, <a class="el" href="obd__config_8c_source.html#l01451">class_config_llog_handler()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd_8h_source.html#l00558">CONFIG_LOG</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00186">IS_OST</a>, <a class="el" href="lu__object_8h_source.html#l00964">lu_context::lc_thread</a>, <a class="el" href="lu__object_8h_source.html#l01020">LCT_MG_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l01028">LCT_SERVER_SESSION</a>, <a class="el" href="lu__object_8h_source.html#l00279">lu_device::ld_ops</a>, <a class="el" href="lu__object_8h_source.html#l00275">lu_device::ld_type</a>, <a class="el" href="structlu__device__operations.html#aae9b682bd4e9a56b8b74ef52ea9a77a9">lu_device_operations::ldo_prepare</a>, <a class="el" href="lu__object_8h_source.html#l00336">lu_device_type::ldt_ctx_tags</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lustre__disk_8h_source.html#l00243">LMD_FLG_ABORT_RECOV</a>, <a class="el" href="lu__object_8c_source.html#l01776">lu_context_enter()</a>, <a class="el" href="lu__object_8c_source.html#l01786">lu_context_exit()</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01729">lu_context_init()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="obd_8h_source.html#l00458">LUSTRE_MDS_NAME</a>, <a class="el" href="obd_8h_source.html#l00473">LUSTRE_MDS_OBDNAME</a>, <a class="el" href="obd_8h_source.html#l00461">LUSTRE_OSS_NAME</a>, <a class="el" href="obd_8h_source.html#l00474">LUSTRE_OSS_OBDNAME</a>, <a class="el" href="obd__mount_8c_source.html#l00075">lustre_process_log()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01000">lustre_start_lwp()</a>, <a class="el" href="obd__mount_8c_source.html#l00190">lustre_start_simple()</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00355">OBD_IOC_ABORT_RECOVERY</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd__class_8h_source.html#l01162">obd_notify()</a>, <a class="el" href="obd_8h_source.html#l00550">OBD_NOTIFY_CONFIG</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd__class_8h_source.html#l00349">OBP</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount__server_8c_source.html#l01875">server_calc_timeout()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00314">server_mgc_clear_fs()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00295">server_mgc_set_fs()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01232">server_notify_target()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00092">server_register_mount()</a>, <a class="el" href="obd__mount__server_8c_source.html#l01166">server_register_target()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01046">server_stop_servers()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01792">server_fill_super()</a>.</p>

</div>
</div>
<a class="anchor" id="a63e02523a78c87535edab42b6b92ddbd"></a><!-- doxytag: member="obd_mount_server.c::server_statfs" ref="a63e02523a78c87535edab42b6b92ddbd" args="(struct dentry *dentry, struct kstatfs *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_statfs </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kstatfs *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01619">1619</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02437">dt_statfs()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="statfs__pack_8c_source.html#l00065">statfs_unpack()</a>.</p>

</div>
</div>
<a class="anchor" id="a460d1e213c50fd857f448edff8de7556"></a><!-- doxytag: member="obd_mount_server.c::server_stop_mgs" ref="a460d1e213c50fd857f448edff8de7556" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_stop_mgs </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00266">266</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__config_8c_source.html#l01909">class_manual_cleanup()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00562">lustre_mount_info::lmi_sb</a>, <a class="el" href="obd_8h_source.html#l00475">LUSTRE_MGS_OBDNAME</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount__server_8c_source.html#l00074">server_find_mount()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf4a265d8bb9c066a203504f5a87902a"></a><!-- doxytag: member="obd_mount_server.c::server_stop_servers" ref="aaf4a265d8bb9c066a203504f5a87902a" args="(int lsiflags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int server_stop_servers </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lsiflags</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01046">1046</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="obd__config_8c_source.html#l01909">class_manual_cleanup()</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="genops_8c_source.html#l00103">class_search_type()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00080">LDD_F_SV_TYPE_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>, <a class="el" href="obd_8h_source.html#l00473">LUSTRE_MDS_OBDNAME</a>, <a class="el" href="obd_8h_source.html#l00459">LUSTRE_MDT_NAME</a>, <a class="el" href="obd_8h_source.html#l00474">LUSTRE_OSS_OBDNAME</a>, <a class="el" href="obd_8h_source.html#l00462">LUSTRE_OST_NAME</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd_8h_source.html#l00112">obd_type::typ_refcnt</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01497">server_put_super()</a>, and <a class="el" href="obd__mount__server_8c_source.html#l01275">server_start_targets()</a>.</p>

</div>
</div>
<a class="anchor" id="a24be59d2312952d4c09230e8db6c60e4"></a><!-- doxytag: member="obd_mount_server.c::server_umount_begin" ref="a24be59d2312952d4c09230e8db6c60e4" args="(struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void server_umount_begin </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called only for 'umount -f'. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01606">1606</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__mount_8c_source.html#l00045">D_MOUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="flock_8c_source.html#l00090">EXIT</a>.</p>

</div>
</div>
<a class="anchor" id="a96b1c185a9cebc9017537595075ee382"></a><!-- doxytag: member="obd_mount_server.c::tgt_is_mdt" ref="a96b1c185a9cebc9017537595075ee382" args="(const char *tgtname, __u32 *idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool tgt_is_mdt </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tgtname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00336">336</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="lustre__disk_8h_source.html#l00080">LDD_F_SV_TYPE_MDT</a>, and <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00780">client_lwp_config_process()</a>.</p>

</div>
</div>
<a class="anchor" id="ad152b3ec604780efa86d8410109e2150"></a><!-- doxytag: member="obd_mount_server.c::tgt_name2lwp_name" ref="ad152b3ec604780efa86d8410109e2150" args="(const char *tgt_name, char *lwp_name, int len, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_name2lwp_name </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tgt_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>lwp_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert OST/MDT name(fsname-{MDT,OST}xxxx) to a lwp name with the :yyyy (fsname-MDTyyyy-lwp-{MDT,OST}xxxx). </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00349">349</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="fsx_8c_source.html#l01082">cleanup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="obd_8h_source.html#l00454">LUSTRE_LWP_NAME</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd__mount_8c_source.html#l00685">server_name2fsname()</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l00684">lustre_find_lwp()</a>, <a class="el" href="obd__mount__server_8c_source.html#l00619">lustre_lwp_setup()</a>, <a class="el" href="mdt__handler_8c_source.html#l03746">mdt_register_seq_exp()</a>, <a class="el" href="ofd__fs_8c_source.html#l00527">ofd_register_seq_exp()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00656">qsd_prepare()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a572ab5d467e8727acbdba364e26712f6"></a><!-- doxytag: member="obd_mount_server.c::lwp_register_list" ref="a572ab5d467e8727acbdba364e26712f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="obd__mount__server_8c.html#a572ab5d467e8727acbdba364e26712f6">lwp_register_list</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
        <a class="code" href="list_8h.html#a4642d4b7df28478bb762fe43c85b5c63">LIST_HEAD_INIT</a>(<a class="code" href="obd__mount__server_8c.html#a572ab5d467e8727acbdba364e26712f6">lwp_register_list</a>)
</pre></div>
<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00390">390</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a48ff51a028e6af974a19925dfeb3f15e"></a><!-- doxytag: member="obd_mount_server.c::server_inode_operations" ref="a48ff51a028e6af974a19925dfeb3f15e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct inode_operations <a class="el" href="obd__mount__server_8c.html#a48ff51a028e6af974a19925dfeb3f15e">server_inode_operations</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .setxattr       = <a class="code" href="obd__mount__server_8c.html#a1839091197076f4062498aaef70c5878">lustre_setxattr</a>,
        .getxattr       = <a class="code" href="obd__mount__server_8c.html#a916359b06cbd3572e3407e5f66f86407">lustre_getxattr</a>,
        .listxattr      = <a class="code" href="obd__mount__server_8c.html#a4d1f28f328e188a17d23e98ff257edd1">lustre_listxattr</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01680">1680</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01689">server_fill_super_common()</a>.</p>

</div>
</div>
<a class="anchor" id="a97e98d5d7439c6b467ebe5f578e74ca5"></a><!-- doxytag: member="obd_mount_server.c::server_mount_info_list" ref="a97e98d5d7439c6b467ebe5f578e74ca5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="obd__mount__server_8c.html#a97e98d5d7439c6b467ebe5f578e74ca5">server_mount_info_list</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
        <a class="code" href="list_8h.html#a4642d4b7df28478bb762fe43c85b5c63">LIST_HEAD_INIT</a>(<a class="code" href="obd__mount__server_8c.html#a97e98d5d7439c6b467ebe5f578e74ca5">server_mount_info_list</a>)
</pre></div>
<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l00071">71</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3525aa238b953cac58829b4bff0038eb"></a><!-- doxytag: member="obd_mount_server.c::server_ops" ref="a3525aa238b953cac58829b4bff0038eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct super_operations <a class="el" href="obd__mount__server_8c.html#a3525aa238b953cac58829b4bff0038eb">server_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .put_super      = <a class="code" href="obd__mount__server_8c.html#a32e7f607fc5d716a99ad7c6adf0abb47" title="Start the shutdown of servers at umount.">server_put_super</a>,
        .umount_begin   = <a class="code" href="obd__mount__server_8c.html#a24be59d2312952d4c09230e8db6c60e4" title="Called only for &amp;#39;umount -f&amp;#39;.">server_umount_begin</a>, 
        .statfs         = <a class="code" href="obd__mount__server_8c.html#a63e02523a78c87535edab42b6b92ddbd">server_statfs</a>,
}
</pre></div>
<p>The operations we support directly on the superblock: mount, umount, and df. </p>

<p>Definition at line <a class="el" href="obd__mount__server_8c_source.html#l01651">1651</a> of file <a class="el" href="obd__mount__server_8c_source.html">obd_mount_server.c</a>.</p>

<p>Referenced by <a class="el" href="obd__mount__server_8c_source.html#l01689">server_fill_super_common()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
