<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/osc/osc_quota.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/osc/osc_quota.c File Reference</h1><code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="osc__internal_8h_source.html">osc_internal.h</a>&quot;</code><br/>

<p><a href="osc__quota_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a5007e9c5713259df7880ea7c557045e8">MD_QUOTA_FLAG</a>(type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a1e002d1873cd75c6fc1ad75569eef699">FL_QUOTA_FLAG</a>(type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#aab812e189147c7bbd79ccd3306d68d57">HASH_QUOTA_BKT_BITS</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#ab7149939a12ca71d4303f1c19052044b">HASH_QUOTA_CUR_BITS</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a6b46f6aa053b196d8d6e8e2745c649c1">HASH_QUOTA_MAX_BITS</a>&nbsp;&nbsp;&nbsp;15</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structosc__quota__info.html">osc_quota_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#aaa3206507d45b135d1132bc76ca2d087">osc_oqi_alloc</a> (u32 id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a1f51814353304e21a57f0a1364f9ba29">osc_quota_chkdq</a> (struct <a class="el" href="structclient__obd.html">client_obd</a> *cli, const unsigned int qid[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a9b5198d7a4e4b9d3e140637c8b026be3">osc_quota_setdq</a> (struct <a class="el" href="structclient__obd.html">client_obd</a> *cli, const unsigned int qid[], u64 valid, u32 flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a37c2caef9816d98b352e62792275b721">oqi_hashfn</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, const void *key, unsigned mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a262e871af82be1f5725a02f144acd1c8">oqi_keycmp</a> (const void *key, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#aaa86e136d3d6036d99ee978f21dfe1cb">oqi_key</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a7fcf2435b58ba0587d5a630c4444ca46">oqi_object</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a241449060b0b0a4efe00a48e70d8d60d">oqi_get</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#ac23ee046d1afd282093ac716ad77b22a">oqi_put_locked</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a5eef36c25caaf657114a7a34286b3609">oqi_exit</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a4e27cb486abbbacbaa64f1114008a891">osc_quota_setup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a0a545d9c0566c69930c5fdefafa0cc87">osc_quota_cleanup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#ad397cf8e319601fa2af9db561af49b96">osc_quotactl</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *unused, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *oqctl)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osc__quota_8c.html#a060e8d1746eb6f0cea0f931c869702f1">quota_hash_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a1e002d1873cd75c6fc1ad75569eef699"></a><!-- doxytag: member="osc_quota.c::FL_QUOTA_FLAG" ref="a1e002d1873cd75c6fc1ad75569eef699" args="(type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FL_QUOTA_FLAG</td>
          <td>(</td>
          <td class="paramtype">type&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((type == USRQUOTA) ? <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342aae227374dac2774fecb0beb2c2fc3f1a">OBD_FL_NO_USRQUOTA</a> \
                                                : <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342afd21cf2e4e6b3157339f829c2274b4ea">OBD_FL_NO_GRPQUOTA</a>)
</pre></div>
<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00071">71</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>Referenced by <a class="el" href="osc__quota_8c_source.html#l00074">osc_quota_setdq()</a>.</p>

</div>
</div>
<a class="anchor" id="aab812e189147c7bbd79ccd3306d68d57"></a><!-- doxytag: member="osc_quota.c::HASH_QUOTA_BKT_BITS" ref="aab812e189147c7bbd79ccd3306d68d57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_QUOTA_BKT_BITS&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00193">193</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>Referenced by <a class="el" href="osc__quota_8c_source.html#l00207">osc_quota_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="ab7149939a12ca71d4303f1c19052044b"></a><!-- doxytag: member="osc_quota.c::HASH_QUOTA_CUR_BITS" ref="ab7149939a12ca71d4303f1c19052044b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_QUOTA_CUR_BITS&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00194">194</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>Referenced by <a class="el" href="osc__quota_8c_source.html#l00207">osc_quota_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b46f6aa053b196d8d6e8e2745c649c1"></a><!-- doxytag: member="osc_quota.c::HASH_QUOTA_MAX_BITS" ref="a6b46f6aa053b196d8d6e8e2745c649c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_QUOTA_MAX_BITS&nbsp;&nbsp;&nbsp;15</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00195">195</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>Referenced by <a class="el" href="osc__quota_8c_source.html#l00207">osc_quota_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a5007e9c5713259df7880ea7c557045e8"></a><!-- doxytag: member="osc_quota.c::MD_QUOTA_FLAG" ref="a5007e9c5713259df7880ea7c557045e8" args="(type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MD_QUOTA_FLAG</td>
          <td>(</td>
          <td class="paramtype">type&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((type == USRQUOTA) ? <a class="code" href="group__lustreidl.html#ga72239cea00c6cd09f89e8259e05c18e6">OBD_MD_FLUSRQUOTA</a> \
                                                : <a class="code" href="group__lustreidl.html#ga6dbdc4dc42d3bec1f591de4cd9d231c8">OBD_MD_FLGRPQUOTA</a>)
</pre></div>
<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00069">69</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>Referenced by <a class="el" href="osc__quota_8c_source.html#l00074">osc_quota_setdq()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5eef36c25caaf657114a7a34286b3609"></a><!-- doxytag: member="osc_quota.c::oqi_exit" ref="a5eef36c25caaf657114a7a34286b3609" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void oqi_exit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00184">184</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="osc__internal_8h_source.html#l00205">osc_quota_info::oqi_hash</a>, and <a class="el" href="osc__dev_8c_source.html#l00057">osc_quota_kmem</a>.</p>

</div>
</div>
<a class="anchor" id="a241449060b0b0a4efe00a48e70d8d60d"></a><!-- doxytag: member="osc_quota.c::oqi_get" ref="a241449060b0b0a4efe00a48e70d8d60d" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void oqi_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00174">174</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

</div>
</div>
<a class="anchor" id="a37c2caef9816d98b352e62792275b721"></a><!-- doxytag: member="osc_quota.c::oqi_hashfn" ref="a37c2caef9816d98b352e62792275b721" args="(struct cfs_hash *hs, const void *key, unsigned mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned oqi_hashfn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00141">141</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="libcfs__hash_8h_source.html#l00829">cfs_hash_u32_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa86e136d3d6036d99ee978f21dfe1cb"></a><!-- doxytag: member="osc_quota.c::oqi_key" ref="aaa86e136d3d6036d99ee978f21dfe1cb" args="(struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* oqi_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00160">160</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="osc__internal_8h_source.html#l00205">osc_quota_info::oqi_hash</a>, and <a class="el" href="osc__internal_8h_source.html#l00206">osc_quota_info::oqi_id</a>.</p>

</div>
</div>
<a class="anchor" id="a262e871af82be1f5725a02f144acd1c8"></a><!-- doxytag: member="osc_quota.c::oqi_keycmp" ref="a262e871af82be1f5725a02f144acd1c8" args="(const void *key, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int oqi_keycmp </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00147">147</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osc__internal_8h_source.html#l00205">osc_quota_info::oqi_hash</a>, and <a class="el" href="osc__internal_8h_source.html#l00206">osc_quota_info::oqi_id</a>.</p>

</div>
</div>
<a class="anchor" id="a7fcf2435b58ba0587d5a630c4444ca46"></a><!-- doxytag: member="osc_quota.c::oqi_object" ref="a7fcf2435b58ba0587d5a630c4444ca46" args="(struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* oqi_object </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00168">168</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, and <a class="el" href="osc__internal_8h_source.html#l00205">osc_quota_info::oqi_hash</a>.</p>

</div>
</div>
<a class="anchor" id="ac23ee046d1afd282093ac716ad77b22a"></a><!-- doxytag: member="osc_quota.c::oqi_put_locked" ref="ac23ee046d1afd282093ac716ad77b22a" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void oqi_put_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00179">179</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaa3206507d45b135d1132bc76ca2d087"></a><!-- doxytag: member="osc_quota.c::osc_oqi_alloc" ref="aaa3206507d45b135d1132bc76ca2d087" args="(u32 id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structosc__quota__info.html">osc_quota_info</a>* osc_oqi_alloc </td>
          <td>(</td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00034">34</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00845">OBD_SLAB_ALLOC_PTR</a>, <a class="el" href="osc__internal_8h_source.html#l00206">osc_quota_info::oqi_id</a>, and <a class="el" href="osc__dev_8c_source.html#l00057">osc_quota_kmem</a>.</p>

<p>Referenced by <a class="el" href="osc__quota_8c_source.html#l00074">osc_quota_setdq()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f51814353304e21a57f0a1364f9ba29"></a><!-- doxytag: member="osc_quota.c::osc_quota_chkdq" ref="a1f51814353304e21a57f0a1364f9ba29" args="(struct client_obd *cli, const unsigned int qid[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osc_quota_chkdq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structclient__obd.html">client_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>cli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&nbsp;</td>
          <td class="paramname"> <em>qid</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00045">45</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="obd_8h_source.html#l00330">client_obd::cl_quota_hash</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__compat_8h_source.html#l00254">NO_QUOTA</a>, <a class="el" href="lustre__compat_8h_source.html#l00251">QUOTA_OK</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a0a545d9c0566c69930c5fdefafa0cc87"></a><!-- doxytag: member="osc_quota.c::osc_quota_cleanup" ref="a0a545d9c0566c69930c5fdefafa0cc87" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osc_quota_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00236">236</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="obd_8h_source.html#l00330">client_obd::cl_quota_hash</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="osc__request_8c_source.html#l02874">osc_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b5198d7a4e4b9d3e140637c8b026be3"></a><!-- doxytag: member="osc_quota.c::osc_quota_setdq" ref="a9b5198d7a4e4b9d3e140637c8b026be3" args="(struct client_obd *cli, const unsigned int qid[], u64 valid, u32 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osc_quota_setdq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structclient__obd.html">client_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>cli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&nbsp;</td>
          <td class="paramname"> <em>qid</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>valid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00074">74</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01259">cfs_hash_add_unique()</a>, <a class="el" href="hash_8c_source.html#l01331">cfs_hash_del_key()</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="obd_8h_source.html#l00330">client_obd::cl_quota_hash</a>, <a class="el" href="osc__internal_8h_source.html#l00171">cli_name()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osc__quota_8c_source.html#l00071">FL_QUOTA_FLAG</a>, <a class="el" href="osc__quota_8c_source.html#l00069">MD_QUOTA_FLAG</a>, <a class="el" href="lustre__idl_8h_source.html#l01686">OBD_MD_FLGRPQUOTA</a>, <a class="el" href="lustre__idl_8h_source.html#l01685">OBD_MD_FLUSRQUOTA</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="osc__internal_8h_source.html#l00205">osc_quota_info::oqi_hash</a>, <a class="el" href="osc__quota_8c_source.html#l00034">osc_oqi_alloc()</a>, <a class="el" href="osc__dev_8c_source.html#l00057">osc_quota_kmem</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osc__request_8c_source.html#l01369">osc_brw_fini_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a4e27cb486abbbacbaa64f1114008a891"></a><!-- doxytag: member="osc_quota.c::osc_quota_setup" ref="a4e27cb486abbbacbaa64f1114008a891" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osc_quota_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00207">207</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00165">CFS_HASH_DEFAULT</a>, <a class="el" href="libcfs__hash_8h_source.html#l00775">CFS_HASH_MAX_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00774">CFS_HASH_MIN_THETA</a>, <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="obd_8h_source.html#l00330">client_obd::cl_quota_hash</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osc__quota_8c_source.html#l00193">HASH_QUOTA_BKT_BITS</a>, <a class="el" href="osc__quota_8c_source.html#l00194">HASH_QUOTA_CUR_BITS</a>, <a class="el" href="osc__quota_8c_source.html#l00195">HASH_QUOTA_MAX_BITS</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="osc__request_8c_source.html#l02738">osc_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="ad397cf8e319601fa2af9db561af49b96"></a><!-- doxytag: member="osc_quota.c::osc_quotactl" ref="ad397cf8e319601fa2af9db561af49b96" args="(struct obd_device *unused, struct obd_export *exp, struct obd_quotactl *oqctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osc_quotactl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>unused</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *&nbsp;</td>
          <td class="paramname"> <em>oqctl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00248">248</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="packet-lustre_8c_source.html#l00078">LUSTRE_OST_VERSION</a>, <a class="el" href="packet-lustre_8c_source.html#l00182">OST_QUOTACTL</a>, <a class="el" href="client_8c_source.html#l00293">ptlrpc_at_set_req_timeout()</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00891">ptlrpc_request_alloc_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00943">RMF_OBD_QUOTACTL</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_resend</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, and <a class="el" href="layout_8c_source.html#l01323">RQF_OST_QUOTACTL</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a060e8d1746eb6f0cea0f931c869702f1"></a><!-- doxytag: member="osc_quota.c::quota_hash_ops" ref="a060e8d1746eb6f0cea0f931c869702f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a> <a class="el" href="osc__quota_8c.html#a060e8d1746eb6f0cea0f931c869702f1">quota_hash_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .hs_hash        = <a class="code" href="osc__quota_8c.html#a37c2caef9816d98b352e62792275b721">oqi_hashfn</a>,
        .hs_keycmp      = <a class="code" href="osc__quota_8c.html#a262e871af82be1f5725a02f144acd1c8">oqi_keycmp</a>,
        .hs_key         = <a class="code" href="osc__quota_8c.html#aaa86e136d3d6036d99ee978f21dfe1cb">oqi_key</a>,
        .hs_object      = <a class="code" href="osc__quota_8c.html#a7fcf2435b58ba0587d5a630c4444ca46">oqi_object</a>,
        .hs_get         = <a class="code" href="osc__quota_8c.html#a241449060b0b0a4efe00a48e70d8d60d">oqi_get</a>,
        .hs_put_locked  = <a class="code" href="osc__quota_8c.html#ac23ee046d1afd282093ac716ad77b22a">oqi_put_locked</a>,
        .hs_exit        = <a class="code" href="osc__quota_8c.html#a5eef36c25caaf657114a7a34286b3609">oqi_exit</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="osc__quota_8c_source.html#l00197">197</a> of file <a class="el" href="osc__quota_8c_source.html">osc_quota.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
