<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lfsck/lfsck_engine.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lfsck/lfsck_engine.c File Reference</h1><code>#include &lt;<a class="el" href="lu__object_8h_source.html">lu_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>&quot;</code><br/>

<p><a href="lfsck__engine_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LFSCK</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a6d82da3d39b3f8ece030b7ebe9c795d8">lfsck_unpack_ent</a> (struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *ent, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *cookie, __u16 *type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a371bac4bb27ce2401e3f202871cbb795">lfsck_di_oit_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a64178ad643311faf3ee648152345a743">lfsck_di_dir_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a694b4fa58d10b4f31948a609ffe14308">lfsck_parent_fid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a621b958b795d0c6a94adb4fb66a34548">lfsck_needs_scan_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether needs to scan the directory or not.  <a href="#a621b958b795d0c6a94adb4fb66a34548"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a4b392b4fb138335f877c76564415f2f8">lfsck_load_stripe_lmv</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#ab58e31f592d4b3bbe7ca94595cefff49">lfsck_fail</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, bool new_checked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#ace551cca750b4f93d390e7cfe358f872">lfsck_close_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, int result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#ae12b9de56925df21d23623b31717bb38">lfsck_open_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#ae9d8b848c4f04e25027eb1ffe4163012">lfsck_checkpoint</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#aabb1a50d2f6eea7a58b880979c4772d4">lfsck_prep</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *lsp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a197784b63a5ebd48a881787eca209752">lfsck_exec_oit</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#ad2463ca82d8be8bcd16e55378671ec95">lfsck_exec_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso, struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *ent, __u16 type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#aac93c35fa71119e1346f74d87467b49e">lfsck_master_dir_engine</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a709901a324ff7bc017a1927f7e8c6b06">lfsck_post</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, int result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a8d8850434e9596607f9e8e4781c2fef9">lfsck_double_scan</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#aeb4b53364b9481ac973a6957219dae66">lfsck_quit</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#aff8dda7a19016b504d781b3c7da9fba9">lfsck_master_oit_engine</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Object-table based iteration engine.  <a href="#aff8dda7a19016b504d781b3c7da9fba9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a0cfcafda3509ba234d752164ac56754f">lfsck_master_engine</a> (void *args)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#aeb5779e25f92798aafd74693f9d2438f">lfsck_assistant_req_empty</a> (struct <a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a> *lad)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#af8aaff2d4db601bd0a124fa13fe783ad">lfsck_assistant_query_others</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query the LFSCK status from the instatnces on remote servers.  <a href="#af8aaff2d4db601bd0a124fa13fe783ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#a79a2f0b4e2a486d0a91465e1004fe2db">lfsck_assistant_notify_others</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notify the LFSCK event to the instances on remote servers.  <a href="#a79a2f0b4e2a486d0a91465e1004fe2db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__engine_8c.html#aef963a42c4d33910f66d304fb29a101e">lfsck_assistant_engine</a> (void *args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The LFSCK assistant thread is triggered by the LFSCK main engine.  <a href="#aef963a42c4d33910f66d304fb29a101e"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="lfsck_engine.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LFSCK</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00031">31</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aef963a42c4d33910f66d304fb29a101e"></a><!-- doxytag: member="lfsck_engine.c::lfsck_assistant_engine" ref="aef963a42c4d33910f66d304fb29a101e" args="(void *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_assistant_engine </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The LFSCK assistant thread is triggered by the LFSCK main engine. </p>
<p>They co-work together as an asynchronous pipeline: the LFSCK main engine scans the system and pre-fetches the objects, attributes, or name entries, etc, and pushes them into the pipeline as input requests for the LFSCK assistant thread; on the other end of the pipeline, the LFSCK assistant thread performs the real check and repair for every request from the main engine.</p>
<p>Generally, the assistant engine may be blocked when check/repair something, so the LFSCK main engine will run some faster. On the other hand, the LFSCK main engine will drive multiple assistant threads in parallel, means for each LFSCK component on the master (such as layout LFSCK, namespace LFSCK), there is an independent LFSCK assistant thread. So under such 1:N multiple asynchronous pipelines mode, the whole LFSCK performance will be much better than check/repair everything by the LFSCK main engine itself. </p>

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l01543">1543</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l02465">dt_sync()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="structlfsck__assistant__operations.html#a4685cd01fa262cb4103be7c925cd8738">lfsck_assistant_operations::la_double_scan_result</a>, <a class="el" href="structlfsck__assistant__operations.html#af96714cea710e972beb127ff305fd55f">lfsck_assistant_operations::la_fill_pos</a>, <a class="el" href="structlfsck__assistant__operations.html#ac72b81752b3e68d507135580e7d1312e">lfsck_assistant_operations::la_handler_p1</a>, <a class="el" href="structlfsck__assistant__operations.html#a0595011e4f5f571f5fec77e77bdebfbd">lfsck_assistant_operations::la_handler_p2</a>, <a class="el" href="structlfsck__assistant__operations.html#a5bf116339a7158c05aa075cbbde2133d">lfsck_assistant_operations::la_req_fini</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_in_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00804">lfsck_assistant_data::lad_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00829">lfsck_assistant_data::lad_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00836">lfsck_assistant_data::lad_post_result</a>, <a class="el" href="lfsck__internal_8h_source.html#l00834">lfsck_assistant_data::lad_prefetched</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00827">lfsck_assistant_data::lad_task</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_post</a>, <a class="el" href="lfsck__internal_8h_source.html#l00756">lfsck_assistant_req::lar_list</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00559">lfsck_component::lc_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00537">lfsck_component::lc_pos_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00548">lfsck_component::lc_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00551">lfsck_component::lc_time_next_checkpoint</a>, <a class="el" href="lustre__idl_8h_source.html#l03466">LE_PEER_EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03462">LE_START</a>, <a class="el" href="lustre__idl_8h_source.html#l03463">LE_STOP</a>, <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01106">lfsck_assistant_req_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00051">LFSCK_CHECKPOINT_INTERVAL</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01396">lfsck_phase2_next_ready()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00658">lfsck_instance::li_double_scan_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00728">lfsck_instance::li_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00669">lfsck_instance::li_next</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00725">lfsck_instance::li_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00145">LPF_ALL_TGT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00136">LPF_RESET</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03441">lfsck_request::lr_param</a>, <a class="el" href="lustre__idl_8h_source.html#l03436">lfsck_request::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00100">LS_CO_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00106">LS_CO_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00103">LS_CO_STOPPED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00751">lfsck_thread_args::lta_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00749">lfsck_thread_args::lta_env</a>, <a class="el" href="lfsck__internal_8h_source.html#l00750">lfsck_thread_args::lta_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="lustre__lib_8h_source.html#l00180">LWI_TIMEOUT_INTERVAL</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00533">OBD_FAIL_LFSCK_NO_DOUBLESCAN</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02484">lfsck_start_assistant()</a>.</p>

</div>
</div>
<a class="anchor" id="a79a2f0b4e2a486d0a91465e1004fe2db"></a><!-- doxytag: member="lfsck_engine.c::lfsck_assistant_notify_others" ref="a79a2f0b4e2a486d0a91465e1004fe2db" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *lr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_assistant_notify_others </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify the LFSCK event to the instances on remote servers. </p>
<p>The LFSCK assistant thread notifies the LFSCK instances on other servers (MDT/OST) about some events, such as start new scanning, stop the scanning, this LFSCK instance will exit, and so on.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lr</em>&nbsp;</td><td>pointer to the LFSCK event request</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l01248">1248</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="structlfsck__assistant__operations.html#a866b7666c49b25f5dfa2518f0b26c051">lfsck_assistant_operations::la_sync_failures</a>, <a class="el" href="lfsck__internal_8h_source.html#l00817">lfsck_assistant_data::lad_mdt_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00829">lfsck_assistant_data::lad_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00808">lfsck_assistant_data::lad_ost_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00833">lfsck_assistant_data::lad_touch_gen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00739">lfsck_async_interpret_args::laia_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00742">lfsck_async_interpret_args::laia_lr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00741">lfsck_async_interpret_args::laia_ltd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00740">lfsck_async_interpret_args::laia_ltds</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00093">lfsck_bookmark::lb_speed_limit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00087">lfsck_bookmark::lb_version</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03466">LE_PEER_EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03462">LE_START</a>, <a class="el" href="lustre__idl_8h_source.html#l03463">LE_STOP</a>, <a class="el" href="lustre__idl_8h_source.html#l03476">LEF_TO_OST</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02369">lfsck_async_request()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lustre__idl_8h_source.html#l02726">LFSCK_NOTIFY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01326">lfsck_tgt_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lnetctl_8c_source.html#l00969">list</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00145">LPF_ALL_TGT</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03442">lfsck_request::lr_async_windows</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03443">lfsck_request::lr_flags2</a>, <a class="el" href="lustre__idl_8h_source.html#l03431">lfsck_request::lr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03441">lfsck_request::lr_param</a>, <a class="el" href="lustre__idl_8h_source.html#l03435">lfsck_request::lr_speed</a>, <a class="el" href="lustre__idl_8h_source.html#l03433">lfsck_request::lr_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l03439">lfsck_request::lr_version</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00190">LSV_DRYRUN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00189">LSV_ERROR_HANDLE</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00188">LSV_SPEED_LIMIT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00450">lfsck_tgt_desc::ltd_exp</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00461">lfsck_tgt_desc::ltd_layout_gen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00451">lfsck_tgt_desc::ltd_layout_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00462">lfsck_tgt_desc::ltd_namespace_gen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00453">lfsck_tgt_desc::ltd_namespace_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00454">lfsck_tgt_desc::ltd_namespace_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00459">lfsck_tgt_desc::ltd_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00484">lfsck_tgt_descs::ltd_rw_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00463">lfsck_tgt_desc::ltd_synced_failures</a>, <a class="el" href="lfsck__internal_8h_source.html#l00478">lfsck_tgt_descs::ltd_tgts_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00879">lfsck_thread_info::lti_laia</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="af8aaff2d4db601bd0a124fa13fe783ad"></a><!-- doxytag: member="lfsck_engine.c::lfsck_assistant_query_others" ref="af8aaff2d4db601bd0a124fa13fe783ad" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_assistant_query_others </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query the LFSCK status from the instatnces on remote servers. </p>
<p>The LFSCK assistant thread queries the LFSCK instances on other servers (MDT/OST) about their status, such as whether they have finished the phase1/phase2 scanning or not, and so on.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l01131">1131</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00833">lfsck_assistant_data::lad_touch_gen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00739">lfsck_async_interpret_args::laia_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00742">lfsck_async_interpret_args::laia_lr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00741">lfsck_async_interpret_args::laia_ltd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00740">lfsck_async_interpret_args::laia_ltds</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03464">LE_QUERY</a>, <a class="el" href="lustre__idl_8h_source.html#l03476">LEF_TO_OST</a>, <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02369">lfsck_async_request()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l02727">LFSCK_QUERY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00450">lfsck_tgt_desc::ltd_exp</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00461">lfsck_tgt_desc::ltd_layout_gen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00462">lfsck_tgt_desc::ltd_namespace_gen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00454">lfsck_tgt_desc::ltd_namespace_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00459">lfsck_tgt_desc::ltd_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00879">lfsck_thread_info::lti_laia</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb5779e25f92798aafd74693f9d2438f"></a><!-- doxytag: member="lfsck_engine.c::lfsck_assistant_req_empty" ref="aeb5779e25f92798aafd74693f9d2438f" args="(struct lfsck_assistant_data *lad)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool lfsck_assistant_req_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lad</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l01106">1106</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="layout_8c_source.html#l00074">empty</a>, <a class="el" href="lfsck__internal_8h_source.html#l00804">lfsck_assistant_data::lad_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, and <a class="el" href="list_8h_source.html#l00161">list_empty()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9d8b848c4f04e25027eb1ffe4163012"></a><!-- doxytag: member="lfsck_engine.c::lfsck_checkpoint" ref="ae9d8b848c4f04e25027eb1ffe4163012" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_checkpoint </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00389">389</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00147">cfs_time_beforeq()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#ac6189eae9f69e48777e033d18821845b">lfsck_operations::lfsck_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00051">LFSCK_CHECKPOINT_INTERVAL</a>, <a class="el" href="lfsck__lib_8c_source.html#l01796">lfsck_pos_fill()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00665">lfsck_instance::li_time_next_checkpoint</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, and <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="ace551cca750b4f93d390e7cfe358f872"></a><!-- doxytag: member="lfsck_engine.c::lfsck_close_dir" ref="ace551cca750b4f93d390e7cfe358f872" args="(const struct lu_env *env, struct lfsck_instance *lfsck, int result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_close_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00297">297</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#a6d6512749b0f55779af0c7d4fb46ac74">lfsck_operations::lfsck_close_dir</a>, <a class="el" href="lfsck__engine_8c_source.html#l00082">lfsck_di_dir_put()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">lfsck_lmv_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00597">lfsck_lmv::ll_exit_value</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00337">lfsck_open_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="a64178ad643311faf3ee648152345a743"></a><!-- doxytag: member="lfsck_engine.c::lfsck_di_dir_put" ref="a64178ad643311faf3ee648152345a743" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_di_dir_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00082">82</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00707">lfsck_instance::li_cookie_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a371bac4bb27ce2401e3f202871cbb795"></a><!-- doxytag: member="lfsck_engine.c::lfsck_di_oit_put" ref="a371bac4bb27ce2401e3f202871cbb795" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_di_oit_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00069">69</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d8850434e9596607f9e8e4781c2fef9"></a><!-- doxytag: member="lfsck_engine.c::lfsck_double_scan" ref="a8d8850434e9596607f9e8e4781c2fef9" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_double_scan </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00617">617</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#a58e7c046382c1ed8c788cd9f2c8fe619">lfsck_operations::lfsck_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00658">lfsck_instance::li_double_scan_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00725">lfsck_instance::li_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00106">LS_CO_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2463ca82d8be8bcd16e55378671ec95"></a><!-- doxytag: member="lfsck_engine.c::lfsck_exec_dir" ref="ad2463ca82d8be8bcd16e55378671ec95" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lfsck_assistant_object *lso, struct lu_dirent *ent, __u16 type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_exec_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *&nbsp;</td>
          <td class="paramname"> <em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00551">551</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#ad1709f30571861cedea2eba88099b2da">lfsck_operations::lfsck_exec_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, and <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="a197784b63a5ebd48a881787eca209752"></a><!-- doxytag: member="lfsck_engine.c::lfsck_exec_oit" ref="a197784b63a5ebd48a881787eca209752" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_exec_oit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00516">516</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="structlfsck__operations.html#a2b2f088f98d964eb6a55524a0c1bac42">lfsck_operations::lfsck_exec_oit</a>, <a class="el" href="lfsck__engine_8c_source.html#l00287">lfsck_fail()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00337">lfsck_open_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="ab58e31f592d4b3bbe7ca94595cefff49"></a><!-- doxytag: member="lfsck_engine.c::lfsck_fail" ref="ab58e31f592d4b3bbe7ca94595cefff49" args="(const struct lu_env *env, struct lfsck_instance *lfsck, bool new_checked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_fail </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>new_checked</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00287">287</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#a8e7181930fa9d20e1e670d6442195881">lfsck_operations::lfsck_fail</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, and <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b392b4fb138335f877c76564415f2f8"></a><!-- doxytag: member="lfsck_engine.c::lfsck_load_stripe_lmv" ref="a4b392b4fb138335f877c76564415f2f8" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_load_stripe_lmv </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00225">225</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00565">LFSCK_LMV_DEF_STRIPES</a>, <a class="el" href="lfsck__internal_8h_source.html#l00564">LFSCK_LMV_MAX_STRIPES</a>, <a class="el" href="lfsck__internal_8h_source.html#l01213">lfsck_object_get()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00600">lfsck_lmv::ll_hash_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_slave</a>, <a class="el" href="lfsck__internal_8h_source.html#l00608">lfsck_lmv::ll_lslr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00594">lfsck_lmv::ll_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00595">lfsck_lmv::ll_stripes_allocated</a>, <a class="el" href="lustre__user_8h_source.html#l00447">LMV_HASH_TYPE_UNKNOWN</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00896">lfsck_thread_info::lti_lmv</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mdsrate_8c_source.html#l00129">stripes</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="aac93c35fa71119e1346f74d87467b49e"></a><!-- doxytag: member="lfsck_engine.c::lfsck_master_dir_engine" ref="aac93c35fa71119e1346f74d87467b49e" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_master_dir_engine </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00678">678</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__fail_8h_source.html#l00139">CFS_FAIL_TIMEOUT</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="mmap__sanity_8c_source.html#l00053">dir</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__lib_8c_source.html#l01959">lfsck_assistant_object_init()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00389">lfsck_checkpoint()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01857">lfsck_control_speed()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00551">lfsck_exec_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00287">lfsck_fail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00042">lfsck_unpack_ent()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00713">lfsck_instance::li_args_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00707">lfsck_instance::li_cookie_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00722">lfsck_instance::li_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00683">lfsck_instance::li_pos_current</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lfsck__internal_8h_source.html#l00875">lfsck_thread_info::lti_key</a>, <a class="el" href="lustre__idl_8h_source.html#l00880">LUDA_IGNORE</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00524">OBD_FAIL_LFSCK_DELAY2</a>, <a class="el" href="obd__support_8h_source.html#l00530">OBD_FAIL_LFSCK_FATAL2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>.</p>

</div>
</div>
<a class="anchor" id="a0cfcafda3509ba234d752164ac56754f"></a><!-- doxytag: member="lfsck_engine.c::lfsck_master_engine" ref="a0cfcafda3509ba234d752164ac56754f" args="(void *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_master_engine </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00996">996</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux_2libcfs_8h_source.html#l00145">current_pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00069">lfsck_di_oit_put()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00617">lfsck_double_scan()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01796">lfsck_pos_fill()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00649">lfsck_quit()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00713">lfsck_instance::li_args_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00710">lfsck_instance::li_args_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_start_unplug</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lfsck__internal_8h_source.html#l00749">lfsck_thread_args::lta_env</a>, <a class="el" href="lfsck__internal_8h_source.html#l00750">lfsck_thread_args::lta_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00752">lfsck_thread_args::lta_lsp</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00531">OBD_FAIL_LFSCK_CRASH</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>.</p>

</div>
</div>
<a class="anchor" id="aff8dda7a19016b504d781b3c7da9fba9"></a><!-- doxytag: member="lfsck_engine.c::lfsck_master_oit_engine" ref="aff8dda7a19016b504d781b3c7da9fba9" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_master_oit_engine </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Object-table based iteration engine. </p>
<p>Object-table based iteration is the basic linear engine to scan all the objects on current device in turn. For each object, it calls all the registered LFSCK component(s)' API to perform related consistency verification.</p>
<p>It flushes related LFSCK trace files to disk via making checkpoint periodically. Then if the server crashed or the LFSCK is paused, the LFSCK can resume from the latest checkpoint.</p>
<p>It also controls the whole LFSCK speed via <a class="el" href="lfsck__internal_8h.html#ac409556d9d200cda4725c66911141f9e">lfsck_control_speed()</a> to avoid the server to become overload.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number if all objects have been scanned </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the iteration is stopped or paused </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00811">811</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__fail_8h_source.html#l00139">CFS_FAIL_TIMEOUT</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00525">fid_idif_ost_idx()</a>, <a class="el" href="lustre__idl_8h_source.html#l00462">fid_is_idif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00447">fid_is_igif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00725">fid_is_last_id()</a>, <a class="el" href="lustre__idl_8h_source.html#l00477">fid_is_norm()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l00706">fid_to_ostid()</a>, <a class="el" href="fld__handler_8c_source.html#l00205">fld_local_lookup()</a>, <a class="el" href="seq__range_8h_source.html#l00091">fld_range_set_mdt()</a>, <a class="el" href="seq__range_8h_source.html#l00100">fld_range_set_ost()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__engine_8c_source.html#l00389">lfsck_checkpoint()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01857">lfsck_control_speed()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00287">lfsck_fail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01213">lfsck_object_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00337">lfsck_open_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_current_oit_processed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00675">lfsck_instance::li_global_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00655">lfsck_instance::li_list_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00722">lfsck_instance::li_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_oit_over</a>, <a class="el" href="lfsck__internal_8h_source.html#l00683">lfsck_instance::li_pos_current</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="lfsck__internal_8h_source.html#l00619">lfsck_lmv_unit::llu_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00620">lfsck_lmv_unit::llu_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00621">lfsck_lmv_unit::llu_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00531">OBD_FAIL_LFSCK_CRASH</a>, <a class="el" href="obd__support_8h_source.html#l00523">OBD_FAIL_LFSCK_DELAY1</a>, <a class="el" href="obd__support_8h_source.html#l00529">OBD_FAIL_LFSCK_FATAL1</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="a621b958b795d0c6a94adb4fb66a34548"></a><!-- doxytag: member="lfsck_engine.c::lfsck_needs_scan_dir" ref="a621b958b795d0c6a94adb4fb66a34548" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_needs_scan_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether needs to scan the directory or not. </p>
<p>1) If we are not doing namespace LFSCK, or the given  is not directory, then needs not to scan the . Otherwise, 2) Global /ROOT needs to be scanned, backend root needs not to be scanned. 3) If the  is neither IGIF nor normal FID (including .lustre and its sub-directories that have been scanned when the LFSCK engine start), then needs not to be scanned. 4) If it is a remote object, then scanning the object will be done on the MDT on which the object really resides. 5) If the local object has normal FID, then needs to be scanned. Otherwise, 6) If the object has linkEA, then needs to be scanned. Otherwise, 7) If none of the previous conditions are true, we need to check the parent directories whether this subdirectory is in a tree that should be scanned. Set the parent as current , repeat 2)-7).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the object to be checked</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number if the directory needs to be scanned </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the directory needs NOT to be scanned </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00132">132</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l00447">fid_is_igif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00477">fid_is_norm()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="fld__handler_8c_source.html#l00205">fld_local_lookup()</a>, <a class="el" href="seq__range_8h_source.html#l00091">fld_range_set_mdt()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00096">lfsck_parent_fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00675">lfsck_instance::li_global_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00674">lfsck_instance::li_local_root_fid</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="ae12b9de56925df21d23623b31717bb38"></a><!-- doxytag: member="lfsck_engine.c::lfsck_open_dir" ref="ae12b9de56925df21d23623b31717bb38" args="(const struct lu_env *env, struct lfsck_instance *lfsck, __u64 cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_open_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00337">337</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="structlfsck__operations.html#a0f17b6351c430903278a1ee3b87457a3">lfsck_operations::lfsck_open_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00713">lfsck_instance::li_args_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00707">lfsck_instance::li_cookie_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="a694b4fa58d10b4f31948a609ffe14308"></a><!-- doxytag: member="lfsck_engine.c::lfsck_parent_fid" ref="a694b4fa58d10b4f31948a609ffe14308" args="(const struct lu_env *env, struct dt_object *obj, struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_parent_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00096">96</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a709901a324ff7bc017a1927f7e8c6b06"></a><!-- doxytag: member="lfsck_engine.c::lfsck_post" ref="a709901a324ff7bc017a1927f7e8c6b06" args="(const struct lu_env *env, struct lfsck_instance *lfsck, int result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_post </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00570">570</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00051">LFSCK_CHECKPOINT_INTERVAL</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01213">lfsck_object_get()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00337">lfsck_open_dir()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01796">lfsck_pos_fill()</a>, <a class="el" href="structlfsck__operations.html#a4d42dc8439e56bb809344bf67cbabbe5">lfsck_operations::lfsck_post</a>, <a class="el" href="lfsck__internal_8h_source.html#l00655">lfsck_instance::li_list_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00665">lfsck_instance::li_time_next_checkpoint</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__internal_8h_source.html#l00619">lfsck_lmv_unit::llu_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00620">lfsck_lmv_unit::llu_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00621">lfsck_lmv_unit::llu_obj</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, and <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="aabb1a50d2f6eea7a58b880979c4772d4"></a><!-- doxytag: member="lfsck_engine.c::lfsck_prep" ref="aabb1a50d2f6eea7a58b880979c4772d4" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lfsck_start_param *lsp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_prep </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *&nbsp;</td>
          <td class="paramname"> <em>lsp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00413">413</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00537">lfsck_component::lc_pos_start</a>, <a class="el" href="structlfsck__operations.html#ac6189eae9f69e48777e033d18821845b">lfsck_operations::lfsck_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00051">LFSCK_CHECKPOINT_INTERVAL</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00337">lfsck_open_dir()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01796">lfsck_pos_fill()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01153">lfsck_pos_is_eq()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01148">lfsck_pos_is_zero()</a>, <a class="el" href="structlfsck__operations.html#a4d42dc8439e56bb809344bf67cbabbe5">lfsck_operations::lfsck_post</a>, <a class="el" href="structlfsck__operations.html#a1ae6b87d5b50acd8b92f4611874240c0">lfsck_operations::lfsck_prep</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_current_oit_processed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_oit_over</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00683">lfsck_instance::li_pos_current</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00665">lfsck_instance::li_time_next_checkpoint</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb4b53364b9481ac973a6957219dae66"></a><!-- doxytag: member="lfsck_engine.c::lfsck_quit" ref="aeb4b53364b9481ac973a6957219dae66" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_quit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00649">649</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#a1a5b2eb731f570c6a19cff0bc98ec786">lfsck_operations::lfsck_quit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, and <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d82da3d39b3f8ece030b7ebe9c795d8"></a><!-- doxytag: member="lfsck_engine.c::lfsck_unpack_ent" ref="a6d82da3d39b3f8ece030b7ebe9c795d8" args="(struct lu_dirent *ent, __u64 *cookie, __u16 *type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_unpack_ent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *&nbsp;</td>
          <td class="paramname"> <em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16 *&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00042">42</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00908">lu_dirent::lde_attrs</a>, <a class="el" href="lustre__idl_8h_source.html#l00898">lu_dirent::lde_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00900">lu_dirent::lde_hash</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="lustre__idl_8h_source.html#l00902">lu_dirent::lde_reclen</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l00941">luda_type::lt_type</a>, <a class="el" href="lustre__idl_8h_source.html#l00871">LUDA_TYPE</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01089">lfsck_allow_regenerate_master_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
