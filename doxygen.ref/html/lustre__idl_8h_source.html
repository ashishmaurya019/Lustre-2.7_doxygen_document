<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/include/lustre/lustre_idl.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>lustre/include/lustre/lustre_idl.h</h1><a href="lustre__idl_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * GPL HEADER START</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment"> * it under the terms of the GNU General Public License version 2 only,</span>
<a name="l00008"></a>00008 <span class="comment"> * as published by the Free Software Foundation.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * This program is distributed in the hope that it will be useful, but</span>
<a name="l00011"></a>00011 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00013"></a>00013 <span class="comment"> * General Public License version 2 for more details (a copy is included</span>
<a name="l00014"></a>00014 <span class="comment"> * in the LICENSE file that accompanied this code).</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> * version 2 along with this program; If not, see</span>
<a name="l00018"></a>00018 <span class="comment"> * http://www.sun.com/software/products/lustre/docs/GPLv2.pdf</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> * Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,</span>
<a name="l00021"></a>00021 <span class="comment"> * CA 95054 USA or visit www.sun.com if you need additional information or</span>
<a name="l00022"></a>00022 <span class="comment"> * have any questions.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * GPL HEADER END</span>
<a name="l00025"></a>00025 <span class="comment"> */</span>
<a name="l00026"></a>00026 <span class="comment">/*</span>
<a name="l00027"></a>00027 <span class="comment"> * Copyright (c) 2007, 2010, Oracle and/or its affiliates. All rights reserved.</span>
<a name="l00028"></a>00028 <span class="comment"> * Use is subject to license terms.</span>
<a name="l00029"></a>00029 <span class="comment"> *</span>
<a name="l00030"></a>00030 <span class="comment"> * Copyright (c) 2011, 2015, Intel Corporation.</span>
<a name="l00031"></a>00031 <span class="comment"> */</span>
<a name="l00032"></a>00032 <span class="comment">/*</span>
<a name="l00033"></a>00033 <span class="comment"> * This file is part of Lustre, http://www.lustre.org/</span>
<a name="l00034"></a>00034 <span class="comment"> * Lustre is a trademark of Sun Microsystems, Inc.</span>
<a name="l00035"></a>00035 <span class="comment"> *</span>
<a name="l00036"></a>00036 <span class="comment"> * lustre/include/lustre/lustre_idl.h</span>
<a name="l00037"></a>00037 <span class="comment"> *</span>
<a name="l00038"></a>00038 <span class="comment"> * Lustre wire protocol definitions.</span>
<a name="l00039"></a>00039 <span class="comment"> */</span>
<a name="l00040"></a>00040 
<a name="l00073"></a>00073 <span class="preprocessor">#ifndef _LUSTRE_IDL_H_</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">#define _LUSTRE_IDL_H_</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span>
<a name="l00076"></a>00076 <span class="preprocessor">#include &lt;linux/types.h&gt;</span>
<a name="l00077"></a>00077 <span class="preprocessor">#include &lt;<a class="code" href="libcfs_8h.html">libcfs/libcfs.h</a>&gt;</span>
<a name="l00078"></a>00078 <span class="preprocessor">#include &lt;<a class="code" href="lnet_2include_2lnet_2types_8h.html">lnet/types.h</a>&gt;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include &lt;<a class="code" href="lustre__user_8h.html">lustre/lustre_user.h</a>&gt;</span> <span class="comment">/* Defn&apos;s shared with user-space. */</span>
<a name="l00080"></a>00080 <span class="preprocessor">#include &lt;<a class="code" href="lustre__errno_8h.html">lustre/lustre_errno.h</a>&gt;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &lt;<a class="code" href="lustre__ver_8h.html">lustre_ver.h</a>&gt;</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">/*</span>
<a name="l00084"></a>00084 <span class="comment"> *  GENERAL STUFF</span>
<a name="l00085"></a>00085 <span class="comment"> */</span>
<a name="l00086"></a>00086 <span class="comment">/* FOO_REQUEST_PORTAL is for incoming requests on the FOO</span>
<a name="l00087"></a>00087 <span class="comment"> * FOO_REPLY_PORTAL   is for incoming replies on the FOO</span>
<a name="l00088"></a>00088 <span class="comment"> * FOO_BULK_PORTAL    is for incoming bulk on the FOO</span>
<a name="l00089"></a>00089 <span class="comment"> */</span>
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="group__lustreidl.html#ga555a729b68dd448db4629ce25f11a17a">00091</a> <span class="preprocessor">#define CONNMGR_REQUEST_PORTAL          1</span>
<a name="l00092"></a><a class="code" href="group__lustreidl.html#gaf6f43544a6f5c315f83bc213e57f0c6b">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define CONNMGR_REPLY_PORTAL            2</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="comment">//#define OSC_REQUEST_PORTAL            3</span>
<a name="l00094"></a><a class="code" href="group__lustreidl.html#gaca24c96b20f45e97db052b5c0331e11f">00094</a> <span class="preprocessor">#define OSC_REPLY_PORTAL                4</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span><span class="comment">//#define OSC_BULK_PORTAL               5</span>
<a name="l00096"></a><a class="code" href="group__lustreidl.html#ga400f7c1586e3c60050d698eaf9a736a1">00096</a> <span class="preprocessor">#define OST_IO_PORTAL                   6</span>
<a name="l00097"></a><a class="code" href="group__lustreidl.html#ga0260c942bbfc169fbdc220d069957779">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_CREATE_PORTAL               7</span>
<a name="l00098"></a><a class="code" href="group__lustreidl.html#ga7f295bc820b370632e49c1ef17efede8">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_BULK_PORTAL                 8</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span><span class="comment">//#define MDC_REQUEST_PORTAL            9</span>
<a name="l00100"></a><a class="code" href="group__lustreidl.html#ga707ef86844d3cf0e648657b75693c1e4">00100</a> <span class="preprocessor">#define MDC_REPLY_PORTAL               10</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span><span class="comment">//#define MDC_BULK_PORTAL              11</span>
<a name="l00102"></a><a class="code" href="group__lustreidl.html#gae1a831d1e4f8f13199c0cf757f876b56">00102</a> <span class="preprocessor">#define MDS_REQUEST_PORTAL             12</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span><span class="comment">//#define MDS_REPLY_PORTAL             13</span>
<a name="l00104"></a><a class="code" href="group__lustreidl.html#gac210a1be14d1b168fe72282311cbd266">00104</a> <span class="preprocessor">#define MDS_BULK_PORTAL                14</span>
<a name="l00105"></a><a class="code" href="group__lustreidl.html#ga883599ce993cb81b24792b68f9660768">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define LDLM_CB_REQUEST_PORTAL         15</span>
<a name="l00106"></a><a class="code" href="group__lustreidl.html#ga28423e6ccdb7f07b3f8a873218100270">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define LDLM_CB_REPLY_PORTAL           16</span>
<a name="l00107"></a><a class="code" href="group__lustreidl.html#gaa35475b1ae665098bbf313e64ec4ec0d">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define LDLM_CANCEL_REQUEST_PORTAL     17</span>
<a name="l00108"></a><a class="code" href="group__lustreidl.html#ga5d775d3ec1d28303469eb35d17d23659">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define LDLM_CANCEL_REPLY_PORTAL       18</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="comment">//#define PTLBD_REQUEST_PORTAL           19</span>
<a name="l00110"></a>00110 <span class="comment">//#define PTLBD_REPLY_PORTAL             20</span>
<a name="l00111"></a>00111 <span class="comment">//#define PTLBD_BULK_PORTAL              21</span>
<a name="l00112"></a><a class="code" href="group__lustreidl.html#ga15a6e3d1a32e0381b3217acfc0af9195">00112</a> <span class="preprocessor">#define MDS_SETATTR_PORTAL             22</span>
<a name="l00113"></a><a class="code" href="group__lustreidl.html#ga50c0883424fca9ca791060a29db00a3f">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_READPAGE_PORTAL            23</span>
<a name="l00114"></a><a class="code" href="group__lustreidl.html#ga02469a55d6be96614c7b6c5a3f03c126">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define OUT_PORTAL                      24</span>
<a name="l00115"></a><a class="code" href="group__lustreidl.html#ga702b324166415a6f9862eb46ddc87f62">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define MGC_REPLY_PORTAL               25</span>
<a name="l00116"></a><a class="code" href="group__lustreidl.html#gac6209f096d3dac567ede98913b7e6641">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define MGS_REQUEST_PORTAL             26</span>
<a name="l00117"></a><a class="code" href="group__lustreidl.html#ga86b0dea895b33382a9056480e10a0f8c">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define MGS_REPLY_PORTAL               27</span>
<a name="l00118"></a><a class="code" href="group__lustreidl.html#gac3fa7f83106b6d72ac1463d2778b6b10">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_REQUEST_PORTAL             28</span>
<a name="l00119"></a><a class="code" href="group__lustreidl.html#gab0299b4c2c869fa10e9a06c3975a1f94">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define FLD_REQUEST_PORTAL             29</span>
<a name="l00120"></a><a class="code" href="group__lustreidl.html#ga1f1aa830c3215d36eaff422d4aa487ad">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define SEQ_METADATA_PORTAL            30</span>
<a name="l00121"></a><a class="code" href="group__lustreidl.html#gac08e4fd710c8b0862e39f7b793cf6b2b">00121</a> <span class="preprocessor"></span><span class="preprocessor">#define SEQ_DATA_PORTAL                31</span>
<a name="l00122"></a><a class="code" href="group__lustreidl.html#ga0f90e6a48a0030ccdd4502e61d3c4ee0">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define SEQ_CONTROLLER_PORTAL          32</span>
<a name="l00123"></a><a class="code" href="group__lustreidl.html#ga74a71982962a1e8e51ca205cd590514b">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define MGS_BULK_PORTAL                33</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>
<a name="l00125"></a>00125 <span class="comment">/* Portal 63 is reserved for the Cray Inc DVS - nic@cray.com, roe@cray.com, n8851@cray.com */</span>
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="comment">/* packet types */</span>
<a name="l00128"></a><a class="code" href="group__lustreidl.html#ga4965948d628638ee970ac34ce3dec462">00128</a> <span class="preprocessor">#define PTL_RPC_MSG_REQUEST 4711</span>
<a name="l00129"></a><a class="code" href="group__lustreidl.html#ga6d5da660bbb1050e506026b75bc59c85">00129</a> <span class="preprocessor"></span><span class="preprocessor">#define PTL_RPC_MSG_ERR     4712</span>
<a name="l00130"></a><a class="code" href="group__lustreidl.html#gaed5030fa9fc5564c75ab75e353fe4d04">00130</a> <span class="preprocessor"></span><span class="preprocessor">#define PTL_RPC_MSG_REPLY   4713</span>
<a name="l00131"></a>00131 <span class="preprocessor"></span>
<a name="l00132"></a>00132 <span class="comment">/* DON&apos;T use swabbed values of MAGIC as magic! */</span>
<a name="l00133"></a><a class="code" href="group__lustreidl.html#ga745c3076b2fe6f786cd50e65d37fcf3d">00133</a> <span class="preprocessor">#define LUSTRE_MSG_MAGIC_V2 0x0BD00BD3</span>
<a name="l00134"></a><a class="code" href="group__lustreidl.html#ga72e42577fd7b937f1e8de91ec225b892">00134</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_MSG_MAGIC_V2_SWABBED 0xD30BD00B</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a><a class="code" href="group__lustreidl.html#ga637cd43f69aa461b91dab2db096449dd">00136</a> <span class="preprocessor">#define LUSTRE_MSG_MAGIC LUSTRE_MSG_MAGIC_V2</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>
<a name="l00138"></a><a class="code" href="group__lustreidl.html#gafd8fb38cd999df7c7b4eafca9aeafd78">00138</a> <span class="preprocessor">#define PTLRPC_MSG_VERSION  0x00000003</span>
<a name="l00139"></a><a class="code" href="group__lustreidl.html#ga8023d23bbb5d4c5c63320f368f171c23">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_VERSION_MASK 0xffff0000</span>
<a name="l00140"></a><a class="code" href="group__lustreidl.html#ga9884139930c6d7f650a56cde56a33881">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_OBD_VERSION  0x00010000</span>
<a name="l00141"></a><a class="code" href="group__lustreidl.html#gafcf32f128ad9957cb577d79b1b522a7b">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_MDS_VERSION  0x00020000</span>
<a name="l00142"></a><a class="code" href="group__lustreidl.html#ga6b1a253db533723015288b6fd2a43df1">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_OST_VERSION  0x00030000</span>
<a name="l00143"></a><a class="code" href="group__lustreidl.html#gaf5ee75ae2ca4c44922ca5d1be3180989">00143</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_DLM_VERSION  0x00040000</span>
<a name="l00144"></a><a class="code" href="group__lustreidl.html#ga09426b09fa606a4a627c12f216a1abf0">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_LOG_VERSION  0x00050000</span>
<a name="l00145"></a><a class="code" href="group__lustreidl.html#gabbd40ab4d60e61ad5cbd3850d02566cd">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_MGS_VERSION  0x00060000</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span>
<a name="l00153"></a><a class="code" href="structlu__seq__range.html">00153</a> <span class="keyword">struct </span><a class="code" href="structlu__seq__range.html" title="Describes a range of sequence, lsr_start is included but lsr_end is not in the range...">lu_seq_range</a> {
<a name="l00154"></a><a class="code" href="structlu__seq__range.html#a44a726063b550db043c1c8826d9351e6">00154</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlu__seq__range.html#a44a726063b550db043c1c8826d9351e6">lsr_start</a>;
<a name="l00155"></a><a class="code" href="structlu__seq__range.html#a8a85ad7b63d45223cb21acc73565df0b">00155</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlu__seq__range.html#a8a85ad7b63d45223cb21acc73565df0b">lsr_end</a>;
<a name="l00156"></a><a class="code" href="structlu__seq__range.html#afa70b044bd582efcc3a9c28f6a3f56fe">00156</a>         __u32 <a class="code" href="structlu__seq__range.html#afa70b044bd582efcc3a9c28f6a3f56fe">lsr_index</a>;
<a name="l00157"></a><a class="code" href="structlu__seq__range.html#a1cb8f0551ced1edae13e9f3cfc0df13b">00157</a>         __u32 <a class="code" href="structlu__seq__range.html#a1cb8f0551ced1edae13e9f3cfc0df13b">lsr_flags</a>;
<a name="l00158"></a>00158 };
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="structlu__seq__range__array.html">00160</a> <span class="keyword">struct </span><a class="code" href="structlu__seq__range__array.html">lu_seq_range_array</a> {
<a name="l00161"></a><a class="code" href="structlu__seq__range__array.html#aa4a08b4632e6dd12d4681fd27549984c">00161</a>         __u32 <a class="code" href="structlu__seq__range__array.html#aa4a08b4632e6dd12d4681fd27549984c">lsra_count</a>;
<a name="l00162"></a><a class="code" href="structlu__seq__range__array.html#aa2b2bf755bbb3db841e7b16b90e6ebbd">00162</a>         __u32 <a class="code" href="structlu__seq__range__array.html#aa2b2bf755bbb3db841e7b16b90e6ebbd">lsra_padding</a>;
<a name="l00163"></a><a class="code" href="structlu__seq__range__array.html#ae93c065c5a38c085f7ec873e186407df">00163</a>         <span class="keyword">struct </span><a class="code" href="structlu__seq__range.html" title="Describes a range of sequence, lsr_start is included but lsr_end is not in the range...">lu_seq_range</a> <a class="code" href="structlu__seq__range__array.html#ae93c065c5a38c085f7ec873e186407df">lsra_lsr</a>[0];
<a name="l00164"></a>00164 };
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="group__lustreidl.html#gad908f571ea4756a145878ade71027708">00166</a> <span class="preprocessor">#define LU_SEQ_RANGE_MDT        0x0</span>
<a name="l00167"></a><a class="code" href="group__lustreidl.html#gaaf126972dfc8e09f2d3a4e53fc551351">00167</a> <span class="preprocessor"></span><span class="preprocessor">#define LU_SEQ_RANGE_OST        0x1</span>
<a name="l00168"></a><a class="code" href="group__lustreidl.html#ga856ee8c7f4abaa5508965ec3903016ce">00168</a> <span class="preprocessor"></span><span class="preprocessor">#define LU_SEQ_RANGE_ANY        0x3</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>
<a name="l00170"></a><a class="code" href="group__lustreidl.html#gac1662519ad061939d6d8d896b399f751">00170</a> <span class="preprocessor">#define LU_SEQ_RANGE_MASK       0x3</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span>
<a name="l00180"></a><a class="code" href="group__lu__fid.html#ga081d8a344dc74bcb57c19b9f45ddb7c0">00180</a> <span class="keyword">enum</span> <a class="code" href="group__lu__fid.html#ga081d8a344dc74bcb57c19b9f45ddb7c0" title="Flags for lustre_mdt_attrs::lma_compat and lustre_mdt_attrs::lma_incompat.">lma_compat</a> {
<a name="l00181"></a><a class="code" href="group__lu__fid.html#gga081d8a344dc74bcb57c19b9f45ddb7c0a94e5d0bc07e80be97f24aecc89ce191a">00181</a>         <a class="code" href="group__lu__fid.html#gga081d8a344dc74bcb57c19b9f45ddb7c0a94e5d0bc07e80be97f24aecc89ce191a">LMAC_HSM</a>        = 0x00000001,
<a name="l00182"></a>00182 <span class="comment">/*      LMAC_SOM        = 0x00000002, obsolete since 2.8.0 */</span>
<a name="l00183"></a><a class="code" href="group__lu__fid.html#gga081d8a344dc74bcb57c19b9f45ddb7c0a2b4872b73b32f94f9a9ddbfee7b731b5">00183</a>         <a class="code" href="group__lu__fid.html#gga081d8a344dc74bcb57c19b9f45ddb7c0a2b4872b73b32f94f9a9ddbfee7b731b5">LMAC_NOT_IN_OI</a>  = 0x00000004, <span class="comment">/* the object does NOT need OI mapping */</span>
<a name="l00184"></a><a class="code" href="group__lu__fid.html#gga081d8a344dc74bcb57c19b9f45ddb7c0abe59d2fe1ad6629d6aad61f8e3043d85">00184</a>         <a class="code" href="group__lu__fid.html#gga081d8a344dc74bcb57c19b9f45ddb7c0abe59d2fe1ad6629d6aad61f8e3043d85">LMAC_FID_ON_OST</a> = 0x00000008, <span class="comment">/* For OST-object, its OI mapping is</span>
<a name="l00185"></a>00185 <span class="comment">                                       * under /O/&lt;seq&gt;/d&lt;x&gt;. */</span>
<a name="l00186"></a>00186 };
<a name="l00187"></a>00187 
<a name="l00193"></a><a class="code" href="group__lu__fid.html#ga5c86b0d816a99aa2ef2c9f6f41d4f893">00193</a> <span class="keyword">enum</span> <a class="code" href="group__lu__fid.html#ga5c86b0d816a99aa2ef2c9f6f41d4f893" title="Masks for all features that should be supported by a Lustre version to access a specific...">lma_incompat</a> {
<a name="l00194"></a><a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad6bedcac15e83abfd4e69d3575fed05d">00194</a>         <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad6bedcac15e83abfd4e69d3575fed05d">LMAI_RELEASED</a>           = 0x00000001, <span class="comment">/* file is released */</span>
<a name="l00195"></a><a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a383b3a335147a491c302cfc8fb94dafd">00195</a>         <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a383b3a335147a491c302cfc8fb94dafd">LMAI_AGENT</a>              = 0x00000002, <span class="comment">/* agent inode */</span>
<a name="l00196"></a><a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad9f81afa57c9deabbab52746d57a9f21">00196</a>         <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad9f81afa57c9deabbab52746d57a9f21">LMAI_REMOTE_PARENT</a>      = 0x00000004, <span class="comment">/* the parent of the object</span>
<a name="l00197"></a>00197 <span class="comment">                                                 is on the remote MDT */</span>
<a name="l00198"></a><a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a3ce69b5d01218a9671cc47a529599a27">00198</a>         <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a3ce69b5d01218a9671cc47a529599a27">LMAI_STRIPED</a>            = 0x00000008, <span class="comment">/* striped directory inode */</span>
<a name="l00199"></a><a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad22e50174ad69c460d21fd7308de2bc1">00199</a>         <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad22e50174ad69c460d21fd7308de2bc1">LMAI_ORPHAN</a>             = 0x00000010, <span class="comment">/* inode is orphan */</span>
<a name="l00200"></a><a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a07908b7c86e6743b5361e521cb1b8d0c">00200</a>         <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a07908b7c86e6743b5361e521cb1b8d0c">LMA_INCOMPAT_SUPP</a>       = (<a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a383b3a335147a491c302cfc8fb94dafd">LMAI_AGENT</a> | <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad9f81afa57c9deabbab52746d57a9f21">LMAI_REMOTE_PARENT</a> | \
<a name="l00201"></a>00201                                    <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893a3ce69b5d01218a9671cc47a529599a27">LMAI_STRIPED</a> | <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad22e50174ad69c460d21fd7308de2bc1">LMAI_ORPHAN</a>)
<a name="l00202"></a>00202 };
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga57ce2f0700c0cc37b3d423df0ff5e3aa" title="Swab, if needed, LMA structure which is stored on-disk in little-endian order.">lustre_lma_swab</a>(<span class="keyword">struct</span> <a class="code" href="structlustre__mdt__attrs.html" title="Following struct for object attributes, that will be kept inode&amp;#39;s EA.">lustre_mdt_attrs</a> *lma);
<a name="l00205"></a>00205 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gad6d276486e37db88948da19fc7b6cf89" title="Initialize new lma.">lustre_lma_init</a>(<span class="keyword">struct</span> <a class="code" href="structlustre__mdt__attrs.html" title="Following struct for object attributes, that will be kept inode&amp;#39;s EA.">lustre_mdt_attrs</a> *lma,
<a name="l00206"></a>00206                             <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid,
<a name="l00207"></a>00207                             __u32 compat, __u32 incompat);
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="comment">/* copytool uses a 32b bitmask field to encode archive-Ids during register</span>
<a name="l00210"></a>00210 <span class="comment"> * with MDT thru kuc.</span>
<a name="l00211"></a>00211 <span class="comment"> * archive num = 0 =&gt; all</span>
<a name="l00212"></a>00212 <span class="comment"> * archive num from 1 to 32</span>
<a name="l00213"></a>00213 <span class="comment"> */</span>
<a name="l00214"></a><a class="code" href="group__lu__fid.html#gad52b5f8afab108fb06b8a0a1ca116be2">00214</a> <span class="preprocessor">#define LL_HSM_MAX_ARCHIVE (sizeof(__u32) * 8)</span>
<a name="l00215"></a>00215 <span class="preprocessor"></span>
<a name="l00219"></a><a class="code" href="structhsm__attrs.html">00219</a> <span class="keyword">struct </span><a class="code" href="structhsm__attrs.html" title="HSM on-disk attributes stored in a separate xattr.">hsm_attrs</a> {
<a name="l00221"></a><a class="code" href="structhsm__attrs.html#a784c34a6bd2cc72df8b8503f424b0521">00221</a>         __u32   <a class="code" href="structhsm__attrs.html#a784c34a6bd2cc72df8b8503f424b0521" title="Bitfield for supported data in this structure.">hsm_compat</a>;
<a name="l00222"></a>00222 
<a name="l00224"></a><a class="code" href="structhsm__attrs.html#aef839e4efceb4c5950040a81dd1ced4b">00224</a>         __u32   <a class="code" href="structhsm__attrs.html#aef839e4efceb4c5950040a81dd1ced4b" title="HSM flags, see hsm_flags enum below.">hsm_flags</a>;
<a name="l00226"></a><a class="code" href="structhsm__attrs.html#ac16d2ab278b3116decbd9f88f98049cb">00226</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structhsm__attrs.html#ac16d2ab278b3116decbd9f88f98049cb" title="backend archive id associated with the file">hsm_arch_id</a>;
<a name="l00228"></a><a class="code" href="structhsm__attrs.html#a24b51da015e8ee16579f7dde21d772e6">00228</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structhsm__attrs.html#a24b51da015e8ee16579f7dde21d772e6" title="version associated with the last archiving, if any">hsm_arch_ver</a>;
<a name="l00229"></a>00229 };
<a name="l00230"></a>00230 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga5ca354ba0913bf236001c307b119ef21" title="Swab, if needed, HSM structure which is stored on-disk in little-endian order.">lustre_hsm_swab</a>(<span class="keyword">struct</span> <a class="code" href="structhsm__attrs.html" title="HSM on-disk attributes stored in a separate xattr.">hsm_attrs</a> *attrs);
<a name="l00231"></a>00231 
<a name="l00235"></a>00235 <span class="keyword">enum</span> {
<a name="l00237"></a><a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a8b43011f1da1d645f997f4750219e307">00237</a>         <a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a8b43011f1da1d645f997f4750219e307" title="LASTID file has zero OID.">LUSTRE_FID_LASTID_OID</a> = 0UL,
<a name="l00239"></a><a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97">00239</a>         <a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97" title="initial fid id value">LUSTRE_FID_INIT_OID</a>  = 1UL
<a name="l00240"></a>00240 };
<a name="l00241"></a>00241 
<a name="l00243"></a><a class="code" href="group__lu__fid.html#gade9b9d89f109960b714a90751bdffce8">00243</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00244"></a>00244 {
<a name="l00245"></a>00245         <span class="keywordflow">return</span> fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a>;
<a name="l00246"></a>00246 }
<a name="l00247"></a>00247 
<a name="l00249"></a><a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04">00249</a> <span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00250"></a>00250 {
<a name="l00251"></a>00251         <span class="keywordflow">return</span> fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a>;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00255"></a><a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4">00255</a> <span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257         <span class="keywordflow">return</span> fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a>;
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="group__lu__fid.html#gaa77321011b62f241577403a563514f41">00260</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gaa77321011b62f241577403a563514f41">fid_zero</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262         memset(fid, 0, <span class="keyword">sizeof</span>(*fid));
<a name="l00263"></a>00263 }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="group__lu__fid.html#gabf00b0afd9454bb9515cdb7cf4c2606b">00265</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lu__fid.html#gabf00b0afd9454bb9515cdb7cf4c2606b">fid_ver_oid</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00266"></a>00266 {
<a name="l00267"></a>00267         <span class="keywordflow">return</span> ((<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)<a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(fid) &lt;&lt; 32 | <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(fid));
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00278"></a><a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f">00278</a> <span class="keyword">enum</span> <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a> {
<a name="l00279"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">00279</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a>        = 0,
<a name="l00280"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb5a0b1fcb09f642e99349906abc3fb7">00280</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb5a0b1fcb09f642e99349906abc3fb7">FID_SEQ_LLOG</a>            = 1, <span class="comment">/* unnamed llogs */</span>
<a name="l00281"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa05651217568fc724220e2551dce8ad46">00281</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa05651217568fc724220e2551dce8ad46">FID_SEQ_ECHO</a>            = 2,
<a name="l00282"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa23637875dcdab64cc798dc56c3c7044f">00282</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa23637875dcdab64cc798dc56c3c7044f">FID_SEQ_UNUSED_START</a>    = 3,
<a name="l00283"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fac760ae85a4638d21a451eecd0a9fe9e1">00283</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fac760ae85a4638d21a451eecd0a9fe9e1">FID_SEQ_UNUSED_END</a>      = 9,
<a name="l00284"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2faab3d80a1a02d646532b7ffa540b2ee87">00284</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2faab3d80a1a02d646532b7ffa540b2ee87">FID_SEQ_LLOG_NAME</a>       = 10, <span class="comment">/* named llogs */</span>
<a name="l00285"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa55b1b852a81162288423eb19596f6d35">00285</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa55b1b852a81162288423eb19596f6d35">FID_SEQ_RSVD</a>            = 11,
<a name="l00286"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb072d1ca73f880a6d97bbb4aeeff330">00286</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb072d1ca73f880a6d97bbb4aeeff330">FID_SEQ_IGIF</a>            = 12,
<a name="l00287"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa86dfed33c3ba3f4fbc868e0dfa0f7270">00287</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa86dfed33c3ba3f4fbc868e0dfa0f7270">FID_SEQ_IGIF_MAX</a>        = 0x0ffffffffULL,
<a name="l00288"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fae6a74bb9ec6421adb21718d3a6f10d61">00288</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fae6a74bb9ec6421adb21718d3a6f10d61">FID_SEQ_IDIF</a>            = 0x100000000ULL,
<a name="l00289"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa0800013072f48fd968b5a481ca3dfe40">00289</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa0800013072f48fd968b5a481ca3dfe40">FID_SEQ_IDIF_MAX</a>        = 0x1ffffffffULL,
<a name="l00290"></a>00290         <span class="comment">/* Normal FID sequence starts from this value, i.e. 1&lt;&lt;33 */</span>
<a name="l00291"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa0d29fa99c95f9884eef3f820465a6cb3">00291</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa0d29fa99c95f9884eef3f820465a6cb3">FID_SEQ_START</a>           = 0x200000000ULL,
<a name="l00292"></a>00292         <span class="comment">/* sequence for local pre-defined FIDs listed in local_oid */</span>
<a name="l00293"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa2b03629fdc163625ed37dc9961171aaa">00293</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa2b03629fdc163625ed37dc9961171aaa">FID_SEQ_LOCAL_FILE</a>      = 0x200000001ULL,
<a name="l00294"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab4f64c953ed40b5e363022f03c1a12ba">00294</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab4f64c953ed40b5e363022f03c1a12ba">FID_SEQ_DOT_LUSTRE</a>      = 0x200000002ULL,
<a name="l00295"></a>00295         <span class="comment">/* sequence is used for local named objects FIDs generated</span>
<a name="l00296"></a>00296 <span class="comment">         * by local_object_storage library */</span>
<a name="l00297"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab988e2bb11f8ea59a696995ef469b482">00297</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab988e2bb11f8ea59a696995ef469b482">FID_SEQ_LOCAL_NAME</a>      = 0x200000003ULL,
<a name="l00298"></a>00298         <span class="comment">/* Because current FLD will only cache the fid sequence, instead</span>
<a name="l00299"></a>00299 <span class="comment">         * of oid on the client side, if the FID needs to be exposed to</span>
<a name="l00300"></a>00300 <span class="comment">         * clients sides, it needs to make sure all of fids under one</span>
<a name="l00301"></a>00301 <span class="comment">         * sequence will be located in one MDT. */</span>
<a name="l00302"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa62d5f5a58b032710ad2089ca71259a46">00302</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa62d5f5a58b032710ad2089ca71259a46">FID_SEQ_SPECIAL</a>         = 0x200000004ULL,
<a name="l00303"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2faadd046565072ae426115d62a1cc0c76f">00303</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2faadd046565072ae426115d62a1cc0c76f">FID_SEQ_QUOTA</a>           = 0x200000005ULL,
<a name="l00304"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa8cbd27ab7d7c843c46c932426e6945d7">00304</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa8cbd27ab7d7c843c46c932426e6945d7">FID_SEQ_QUOTA_GLB</a>       = 0x200000006ULL,
<a name="l00305"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6b49e3b5c37113a8a157dbd1dcc94fe9">00305</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6b49e3b5c37113a8a157dbd1dcc94fe9">FID_SEQ_ROOT</a>            = 0x200000007ULL,  <span class="comment">/* Located on MDT0 */</span>
<a name="l00306"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa33e3f25e3be4f37d3a2d57521f4d04d8">00306</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa33e3f25e3be4f37d3a2d57521f4d04d8">FID_SEQ_LAYOUT_RBTREE</a>   = 0x200000008ULL,
<a name="l00307"></a>00307         <span class="comment">/* sequence is used for update logs of cross-MDT operation */</span>
<a name="l00308"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab564c37ab7cc6bec76ef3f0e2acca621">00308</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab564c37ab7cc6bec76ef3f0e2acca621">FID_SEQ_UPDATE_LOG</a>      = 0x200000009ULL,
<a name="l00309"></a>00309         <span class="comment">/* Sequence is used for the directory under which update logs</span>
<a name="l00310"></a>00310 <span class="comment">         * are created. */</span>
<a name="l00311"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa9bae843fc7e3e8bff2e6dfd528b159b3">00311</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa9bae843fc7e3e8bff2e6dfd528b159b3">FID_SEQ_UPDATE_LOG_DIR</a>  = 0x20000000aULL,
<a name="l00312"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fac7954692bcd28401a6ab5630dec8ebb0">00312</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fac7954692bcd28401a6ab5630dec8ebb0">FID_SEQ_NORMAL</a>          = 0x200000400ULL,
<a name="l00313"></a><a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6332bfd9ba0fa6e07a72d8c48d0af5a4">00313</a>         <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6332bfd9ba0fa6e07a72d8c48d0af5a4">FID_SEQ_LOV_DEFAULT</a>     = 0xffffffffffffffffULL
<a name="l00314"></a>00314 };
<a name="l00315"></a>00315 
<a name="l00316"></a><a class="code" href="group__lu__fid.html#ga82e5f168e7b82d3e23a7d7643fbaf09c">00316</a> <span class="preprocessor">#define OBIF_OID_MAX_BITS           32</span>
<a name="l00317"></a><a class="code" href="group__lu__fid.html#gaf9e7f5a4b386166a6ca7ee989660121f">00317</a> <span class="preprocessor"></span><span class="preprocessor">#define OBIF_MAX_OID                (1ULL &lt;&lt; OBIF_OID_MAX_BITS)</span>
<a name="l00318"></a><a class="code" href="group__lu__fid.html#ga91fe98c708b9fa8398a9d5d55a7995b9">00318</a> <span class="preprocessor"></span><span class="preprocessor">#define OBIF_OID_MASK               ((1ULL &lt;&lt; OBIF_OID_MAX_BITS) - 1)</span>
<a name="l00319"></a><a class="code" href="group__lu__fid.html#gaa7537b1d0de8b04494e3149e866ad9fe">00319</a> <span class="preprocessor"></span><span class="preprocessor">#define IDIF_OID_MAX_BITS           48</span>
<a name="l00320"></a><a class="code" href="group__lu__fid.html#ga57419850700ffa0fe5b7a485853676ef">00320</a> <span class="preprocessor"></span><span class="preprocessor">#define IDIF_MAX_OID                (1ULL &lt;&lt; IDIF_OID_MAX_BITS)</span>
<a name="l00321"></a><a class="code" href="group__lu__fid.html#gae97a6c0a6463f085856d744b1699491f">00321</a> <span class="preprocessor"></span><span class="preprocessor">#define IDIF_OID_MASK               ((1ULL &lt;&lt; IDIF_OID_MAX_BITS) - 1)</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span>
<a name="l00324"></a><a class="code" href="group__lu__fid.html#gaabd104e6a31a8938c432ca2e879df604">00324</a> <span class="keyword">enum</span> <a class="code" href="group__lu__fid.html#gaabd104e6a31a8938c432ca2e879df604" title="OID for FID_SEQ_SPECIAL.">special_oid</a> {
<a name="l00325"></a>00325         <span class="comment">/* Big Filesystem Lock to serialize rename operations */</span>
<a name="l00326"></a><a class="code" href="group__lu__fid.html#ggaabd104e6a31a8938c432ca2e879df604af896d4cda31ba624b844058aa9c8c2d3">00326</a>         <a class="code" href="group__lu__fid.html#ggaabd104e6a31a8938c432ca2e879df604af896d4cda31ba624b844058aa9c8c2d3">FID_OID_SPECIAL_BFL</a>     = 1UL,
<a name="l00327"></a>00327 };
<a name="l00328"></a>00328 
<a name="l00330"></a><a class="code" href="group__lu__fid.html#ga75ebbd83cf9ff73571541e51c26ce786">00330</a> <span class="keyword">enum</span> <a class="code" href="group__lu__fid.html#ga75ebbd83cf9ff73571541e51c26ce786" title="OID for FID_SEQ_DOT_LUSTRE.">dot_lustre_oid</a> {
<a name="l00331"></a><a class="code" href="group__lu__fid.html#gga75ebbd83cf9ff73571541e51c26ce786a20bc81a0531a41eea3df96555ec9825e">00331</a>         <a class="code" href="group__lu__fid.html#gga75ebbd83cf9ff73571541e51c26ce786a20bc81a0531a41eea3df96555ec9825e">FID_OID_DOT_LUSTRE</a>      = 1UL,
<a name="l00332"></a><a class="code" href="group__lu__fid.html#gga75ebbd83cf9ff73571541e51c26ce786a8752d7ea98a30b874a2b4ea43d85af70">00332</a>         <a class="code" href="group__lu__fid.html#gga75ebbd83cf9ff73571541e51c26ce786a8752d7ea98a30b874a2b4ea43d85af70">FID_OID_DOT_LUSTRE_OBF</a>  = 2UL,
<a name="l00333"></a><a class="code" href="group__lu__fid.html#gga75ebbd83cf9ff73571541e51c26ce786a325279215753aa4fb3e38a52c7514196">00333</a>         <a class="code" href="group__lu__fid.html#gga75ebbd83cf9ff73571541e51c26ce786a325279215753aa4fb3e38a52c7514196">FID_OID_DOT_LUSTRE_LPF</a>  = 3UL,
<a name="l00334"></a>00334 };
<a name="l00335"></a>00335 
<a name="l00337"></a><a class="code" href="group__lu__fid.html#ga363203a813dc870a46b320f5e4ba5718">00337</a> <span class="keyword">enum</span> <a class="code" href="group__lu__fid.html#ga363203a813dc870a46b320f5e4ba5718" title="OID for FID_SEQ_ROOT.">root_oid</a> {
<a name="l00338"></a><a class="code" href="group__lu__fid.html#gga363203a813dc870a46b320f5e4ba5718a25d7ee613b50aa5ded3b7d9bc2810f60">00338</a>         <a class="code" href="group__lu__fid.html#gga363203a813dc870a46b320f5e4ba5718a25d7ee613b50aa5ded3b7d9bc2810f60">FID_OID_ROOT</a>            = 1UL,
<a name="l00339"></a><a class="code" href="group__lu__fid.html#gga363203a813dc870a46b320f5e4ba5718a9b8ef5540313c12921de8100927b931a">00339</a>         <a class="code" href="group__lu__fid.html#gga363203a813dc870a46b320f5e4ba5718a9b8ef5540313c12921de8100927b931a">FID_OID_ECHO_ROOT</a>       = 2UL,
<a name="l00340"></a>00340 };
<a name="l00341"></a>00341 
<a name="l00342"></a><a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">00342</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00343"></a>00343 {
<a name="l00344"></a>00344         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a>;
<a name="l00345"></a>00345 }
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="group__lu__fid.html#ga545073210c0af1ffa2111b7a52da266a">00347</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga545073210c0af1ffa2111b7a52da266a">fid_seq_is_mdt</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00348"></a>00348 {
<a name="l00349"></a>00349         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a> || seq &gt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fac7954692bcd28401a6ab5630dec8ebb0">FID_SEQ_NORMAL</a>;
<a name="l00350"></a>00350 };
<a name="l00351"></a>00351 
<a name="l00352"></a><a class="code" href="group__lu__fid.html#gafdbc5758c2260c958219d29207074c2e">00352</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gafdbc5758c2260c958219d29207074c2e">fid_seq_is_echo</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00353"></a>00353 {
<a name="l00354"></a>00354         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa05651217568fc724220e2551dce8ad46">FID_SEQ_ECHO</a>;
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00357"></a><a class="code" href="group__lu__fid.html#gac7822787236a4e21204d90c0c8e977e5">00357</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gac7822787236a4e21204d90c0c8e977e5">fid_is_echo</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00358"></a>00358 {
<a name="l00359"></a>00359         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gafdbc5758c2260c958219d29207074c2e">fid_seq_is_echo</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00360"></a>00360 }
<a name="l00361"></a>00361 
<a name="l00362"></a><a class="code" href="group__lu__fid.html#ga7df915a75dd3a76c7f39419e30f4e9de">00362</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga7df915a75dd3a76c7f39419e30f4e9de">fid_seq_is_llog</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00363"></a>00363 {
<a name="l00364"></a>00364         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb5a0b1fcb09f642e99349906abc3fb7">FID_SEQ_LLOG</a>;
<a name="l00365"></a>00365 }
<a name="l00366"></a>00366 
<a name="l00367"></a><a class="code" href="group__lu__fid.html#ga415f1ea10ca77a1c59e32540528c09ae">00367</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga415f1ea10ca77a1c59e32540528c09ae">fid_is_llog</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00368"></a>00368 {
<a name="l00369"></a>00369         <span class="comment">/* file with OID == 0 is not llog but contains last oid */</span>
<a name="l00370"></a>00370         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga7df915a75dd3a76c7f39419e30f4e9de">fid_seq_is_llog</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid)) &amp;&amp; <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(fid) &gt; 0;
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="group__lu__fid.html#ga0a571593081d86e292d2d0735481fd68">00373</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga0a571593081d86e292d2d0735481fd68">fid_seq_is_rsvd</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375         <span class="keywordflow">return</span> seq &gt; <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a> &amp;&amp; seq &lt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa55b1b852a81162288423eb19596f6d35">FID_SEQ_RSVD</a>;
<a name="l00376"></a>00376 };
<a name="l00377"></a>00377 
<a name="l00378"></a><a class="code" href="group__lu__fid.html#gaab961fb89d9ad2939c4a09140479e32c">00378</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gaab961fb89d9ad2939c4a09140479e32c">fid_seq_is_special</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00379"></a>00379 {
<a name="l00380"></a>00380         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa62d5f5a58b032710ad2089ca71259a46">FID_SEQ_SPECIAL</a>;
<a name="l00381"></a>00381 };
<a name="l00382"></a>00382 
<a name="l00383"></a><a class="code" href="group__lu__fid.html#ga50deffee825e8ca0e7d151bf9a929df5">00383</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga50deffee825e8ca0e7d151bf9a929df5">fid_seq_is_local_file</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00384"></a>00384 {
<a name="l00385"></a>00385         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa2b03629fdc163625ed37dc9961171aaa">FID_SEQ_LOCAL_FILE</a> ||
<a name="l00386"></a>00386                seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab988e2bb11f8ea59a696995ef469b482">FID_SEQ_LOCAL_NAME</a>;
<a name="l00387"></a>00387 };
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="group__lu__fid.html#ga6317452b990aa0a91c441cdebdbc49f7">00389</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga6317452b990aa0a91c441cdebdbc49f7">fid_seq_is_root</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6b49e3b5c37113a8a157dbd1dcc94fe9">FID_SEQ_ROOT</a>;
<a name="l00392"></a>00392 }
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="group__lu__fid.html#gadf93b248adf49e5c4c0cca9ab9b88423">00394</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gadf93b248adf49e5c4c0cca9ab9b88423">fid_seq_is_dot</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00395"></a>00395 {
<a name="l00396"></a>00396         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab4f64c953ed40b5e363022f03c1a12ba">FID_SEQ_DOT_LUSTRE</a>;
<a name="l00397"></a>00397 }
<a name="l00398"></a>00398 
<a name="l00399"></a><a class="code" href="group__lu__fid.html#ga2d7aed8842b06cbf6e824738e223bf40">00399</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga2d7aed8842b06cbf6e824738e223bf40">fid_seq_is_default</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00400"></a>00400 {
<a name="l00401"></a>00401         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6332bfd9ba0fa6e07a72d8c48d0af5a4">FID_SEQ_LOV_DEFAULT</a>;
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a><a class="code" href="group__lu__fid.html#ga597b005d9a1e27847f51976fd9985173">00404</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga597b005d9a1e27847f51976fd9985173">fid_is_mdt0</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00405"></a>00405 {
<a name="l00406"></a>00406         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 
<a name="l00409"></a><a class="code" href="group__lu__fid.html#ga973a18343bbbbf8870843df4f3f111fa">00409</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga973a18343bbbbf8870843df4f3f111fa">lu_root_fid</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00410"></a>00410 {
<a name="l00411"></a>00411         fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6b49e3b5c37113a8a157dbd1dcc94fe9">FID_SEQ_ROOT</a>;
<a name="l00412"></a>00412         fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="group__lu__fid.html#gga363203a813dc870a46b320f5e4ba5718a25d7ee613b50aa5ded3b7d9bc2810f60">FID_OID_ROOT</a>;
<a name="l00413"></a>00413         fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = 0;
<a name="l00414"></a>00414 }
<a name="l00415"></a>00415 
<a name="l00416"></a><a class="code" href="group__lu__fid.html#ga0f52d91bea02045d7e6501535d3d4231">00416</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga0f52d91bea02045d7e6501535d3d4231">lu_echo_root_fid</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00417"></a>00417 {
<a name="l00418"></a>00418         fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6b49e3b5c37113a8a157dbd1dcc94fe9">FID_SEQ_ROOT</a>;
<a name="l00419"></a>00419         fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="group__lu__fid.html#gga363203a813dc870a46b320f5e4ba5718a9b8ef5540313c12921de8100927b931a">FID_OID_ECHO_ROOT</a>;
<a name="l00420"></a>00420         fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = 0;
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00423"></a><a class="code" href="group__lu__fid.html#gaffe099707d216360f0a4a80ceb710a1a">00423</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gaffe099707d216360f0a4a80ceb710a1a">lu_update_log_fid</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid, __u32 index)
<a name="l00424"></a>00424 {
<a name="l00425"></a>00425         fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab564c37ab7cc6bec76ef3f0e2acca621">FID_SEQ_UPDATE_LOG</a>;
<a name="l00426"></a>00426         fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = index;
<a name="l00427"></a>00427         fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = 0;
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="group__lu__fid.html#ga29c3eaf81897727c0131e9fb1480064f">00430</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga29c3eaf81897727c0131e9fb1480064f">lu_update_log_dir_fid</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid, __u32 index)
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432         fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa9bae843fc7e3e8bff2e6dfd528b159b3">FID_SEQ_UPDATE_LOG_DIR</a>;
<a name="l00433"></a>00433         fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = index;
<a name="l00434"></a>00434         fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = 0;
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00442"></a><a class="code" href="group__lu__fid.html#ga14c8344c9652401f3b7c23313a0146b2">00442</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga14c8344c9652401f3b7c23313a0146b2" title="Check if a fid is igif or not.">fid_seq_is_igif</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00443"></a>00443 {
<a name="l00444"></a>00444         <span class="keywordflow">return</span> seq &gt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb072d1ca73f880a6d97bbb4aeeff330">FID_SEQ_IGIF</a> &amp;&amp; seq &lt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa86dfed33c3ba3f4fbc868e0dfa0f7270">FID_SEQ_IGIF_MAX</a>;
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 
<a name="l00447"></a><a class="code" href="group__lu__fid.html#ga300d656c3f013286a189975707c7e6a6">00447</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga300d656c3f013286a189975707c7e6a6">fid_is_igif</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00448"></a>00448 {
<a name="l00449"></a>00449         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga14c8344c9652401f3b7c23313a0146b2" title="Check if a fid is igif or not.">fid_seq_is_igif</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00450"></a>00450 }
<a name="l00451"></a>00451 
<a name="l00457"></a><a class="code" href="group__lu__fid.html#gaf9efd16eb96f872e24c9f3afb466d4d1">00457</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gaf9efd16eb96f872e24c9f3afb466d4d1" title="Check if a fid is idif or not.">fid_seq_is_idif</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00458"></a>00458 {
<a name="l00459"></a>00459         <span class="keywordflow">return</span> seq &gt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fae6a74bb9ec6421adb21718d3a6f10d61">FID_SEQ_IDIF</a> &amp;&amp; seq &lt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa0800013072f48fd968b5a481ca3dfe40">FID_SEQ_IDIF_MAX</a>;
<a name="l00460"></a>00460 }
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">00462</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gaf9efd16eb96f872e24c9f3afb466d4d1" title="Check if a fid is idif or not.">fid_seq_is_idif</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00467"></a><a class="code" href="group__lu__fid.html#ga3eb83e6210fc4b06a0dfb071686f405a">00467</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga3eb83e6210fc4b06a0dfb071686f405a">fid_is_local_file</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00468"></a>00468 {
<a name="l00469"></a>00469         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga50deffee825e8ca0e7d151bf9a929df5">fid_seq_is_local_file</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00470"></a>00470 }
<a name="l00471"></a>00471 
<a name="l00472"></a><a class="code" href="group__lu__fid.html#gab1bf59b816680ba2653f899c7ef5c6de">00472</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gab1bf59b816680ba2653f899c7ef5c6de">fid_seq_is_norm</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00473"></a>00473 {
<a name="l00474"></a>00474         <span class="keywordflow">return</span> (seq &gt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fac7954692bcd28401a6ab5630dec8ebb0">FID_SEQ_NORMAL</a>);
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="group__lu__fid.html#ga76ec0d3e1080d6007f6e14359dd191a5">00477</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga76ec0d3e1080d6007f6e14359dd191a5">fid_is_norm</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00478"></a>00478 {
<a name="l00479"></a>00479         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gab1bf59b816680ba2653f899c7ef5c6de">fid_seq_is_norm</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00480"></a>00480 }
<a name="l00481"></a>00481 
<a name="l00482"></a><a class="code" href="group__lu__fid.html#ga1a888e3d69d41fd77c9423c1a44b2188">00482</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lu__fid.html#ga1a888e3d69d41fd77c9423c1a44b2188">fid_is_layout_rbtree</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00483"></a>00483 {
<a name="l00484"></a>00484         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid) == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa33e3f25e3be4f37d3a2d57521f4d04d8">FID_SEQ_LAYOUT_RBTREE</a>;
<a name="l00485"></a>00485 }
<a name="l00486"></a>00486 
<a name="l00487"></a><a class="code" href="group__lu__fid.html#ga37ad7323e9b8aab6f7be6e787ca85339">00487</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga37ad7323e9b8aab6f7be6e787ca85339">fid_seq_is_update_log</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00488"></a>00488 {
<a name="l00489"></a>00489         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab564c37ab7cc6bec76ef3f0e2acca621">FID_SEQ_UPDATE_LOG</a>;
<a name="l00490"></a>00490 }
<a name="l00491"></a>00491 
<a name="l00492"></a><a class="code" href="group__lu__fid.html#ga7b9c2c92671cb81e55d49dfc9cee9e4e">00492</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga7b9c2c92671cb81e55d49dfc9cee9e4e">fid_is_update_log</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00493"></a>00493 {
<a name="l00494"></a>00494         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga37ad7323e9b8aab6f7be6e787ca85339">fid_seq_is_update_log</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00495"></a>00495 }
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="group__lu__fid.html#gac46616a161085a3a1146ef13b67c3230">00497</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gac46616a161085a3a1146ef13b67c3230">fid_seq_is_update_log_dir</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499         <span class="keywordflow">return</span> seq == <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa9bae843fc7e3e8bff2e6dfd528b159b3">FID_SEQ_UPDATE_LOG_DIR</a>;
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a><a class="code" href="group__lu__fid.html#ga666fe5c84e78833aa4d0f705aaa55139">00502</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga666fe5c84e78833aa4d0f705aaa55139">fid_is_update_log_dir</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gac46616a161085a3a1146ef13b67c3230">fid_seq_is_update_log_dir</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00505"></a>00505 }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 <span class="comment">/* convert an OST objid into an IDIF FID SEQ number */</span>
<a name="l00508"></a><a class="code" href="group__lu__fid.html#ga274eed63d4b75486c97826d7d99f8fc7">00508</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lu__fid.html#ga274eed63d4b75486c97826d7d99f8fc7">fid_idif_seq</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <span class="keywordtype">id</span>, __u32 ost_idx)
<a name="l00509"></a>00509 {
<a name="l00510"></a>00510         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fae6a74bb9ec6421adb21718d3a6f10d61">FID_SEQ_IDIF</a> | (ost_idx &lt;&lt; 16) | ((id &gt;&gt; 32) &amp; 0xffff);
<a name="l00511"></a>00511 }
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 <span class="comment">/* convert a packed IDIF FID into an OST objid */</span>
<a name="l00514"></a><a class="code" href="group__lu__fid.html#gaa4e73a24d02f04095a491574384e665a">00514</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lu__fid.html#gaa4e73a24d02f04095a491574384e665a">fid_idif_id</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq, __u32 oid, __u32 ver)
<a name="l00515"></a>00515 {
<a name="l00516"></a>00516         <span class="keywordflow">return</span> ((<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)ver &lt;&lt; 48) | ((seq &amp; 0xffff) &lt;&lt; 32) | oid;
<a name="l00517"></a>00517 }
<a name="l00518"></a>00518 
<a name="l00519"></a><a class="code" href="group__lu__fid.html#ga4d96e070ad422ebe7172c25efac57498">00519</a> <span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="group__lu__fid.html#ga4d96e070ad422ebe7172c25efac57498">idif_ost_idx</a>(<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00520"></a>00520 {
<a name="l00521"></a>00521         <span class="keywordflow">return</span> (seq &gt;&gt; 16) &amp; 0xffff;
<a name="l00522"></a>00522 }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="comment">/* extract ost index from IDIF FID */</span>
<a name="l00525"></a><a class="code" href="group__lu__fid.html#gaa0966510a27044279f5014741a7defb7">00525</a> <span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="group__lu__fid.html#gaa0966510a27044279f5014741a7defb7">fid_idif_ost_idx</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga4d96e070ad422ebe7172c25efac57498">idif_ost_idx</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid));
<a name="l00528"></a>00528 }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 <span class="comment">/* extract OST sequence (group) from a wire ost_id (id/seq) pair */</span>
<a name="l00531"></a><a class="code" href="group__lu__fid.html#ga55a38b1a4563e06997d5696d86a70d3f">00531</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lu__fid.html#ga55a38b1a4563e06997d5696d86a70d3f">ostid_seq</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *ostid)
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(ostid-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq))
<a name="l00534"></a>00534                 <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a>;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536         <span class="keywordflow">if</span> (<a class="code" href="libcfs__private_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="group__lu__fid.html#ga2d7aed8842b06cbf6e824738e223bf40">fid_seq_is_default</a>(ostid-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq)))
<a name="l00537"></a>00537                 <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa6332bfd9ba0fa6e07a72d8c48d0af5a4">FID_SEQ_LOV_DEFAULT</a>;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(&amp;ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>))
<a name="l00540"></a>00540                 <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a>;
<a name="l00541"></a>00541 
<a name="l00542"></a>00542         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(&amp;ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>);
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <span class="comment">/* extract OST objid from a wire ost_id (id/seq) pair */</span>
<a name="l00546"></a><a class="code" href="group__lu__fid.html#gae170c03ac79b0ef0ac57ff115eea190b">00546</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lu__fid.html#gae170c03ac79b0ef0ac57ff115eea190b">ostid_id</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *ostid)
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(ostid-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq))
<a name="l00549"></a>00549                 <span class="keywordflow">return</span> ostid-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id &amp; <a class="code" href="group__lu__fid.html#gae97a6c0a6463f085856d744b1699491f">IDIF_OID_MASK</a>;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (<a class="code" href="libcfs__private_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="group__lu__fid.html#ga2d7aed8842b06cbf6e824738e223bf40">fid_seq_is_default</a>(ostid-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq)))
<a name="l00552"></a>00552                 <span class="keywordflow">return</span> ostid-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(&amp;ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>))
<a name="l00555"></a>00555                 <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#gaa4e73a24d02f04095a491574384e665a">fid_idif_id</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(&amp;ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>),
<a name="l00556"></a>00556                                    <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(&amp;ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>), 0);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(&amp;ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>);
<a name="l00559"></a>00559 }
<a name="l00560"></a>00560 
<a name="l00561"></a><a class="code" href="group__lu__fid.html#gacea2324bf5556682174a5c4299b9aeb4">00561</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gacea2324bf5556682174a5c4299b9aeb4">ostid_set_seq</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi, <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l00562"></a>00562 {
<a name="l00563"></a>00563         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(seq) || <a class="code" href="group__lu__fid.html#ga2d7aed8842b06cbf6e824738e223bf40">fid_seq_is_default</a>(seq)) {
<a name="l00564"></a>00564                 oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = seq;
<a name="l00565"></a>00565         } <span class="keywordflow">else</span> {
<a name="l00566"></a>00566                 oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = seq;
<a name="l00567"></a>00567                 <span class="comment">/* Note: if f_oid + f_ver is zero, we need init it</span>
<a name="l00568"></a>00568 <span class="comment">                 * to be 1, otherwise, ostid_seq will treat this</span>
<a name="l00569"></a>00569 <span class="comment">                 * as old ostid (oi_seq == 0) */</span>
<a name="l00570"></a>00570                 <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> == 0 &amp;&amp; oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> == 0)
<a name="l00571"></a>00571                         oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97" title="initial fid id value">LUSTRE_FID_INIT_OID</a>;
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573 }
<a name="l00574"></a>00574 
<a name="l00575"></a><a class="code" href="group__lu__fid.html#ga84249453659ffd4ae5d9f92654160065">00575</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga84249453659ffd4ae5d9f92654160065">ostid_set_seq_mdt0</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi)
<a name="l00576"></a>00576 {
<a name="l00577"></a>00577         <a class="code" href="group__lu__fid.html#gacea2324bf5556682174a5c4299b9aeb4">ostid_set_seq</a>(oi, <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa361a0cd815696d70a100cf323fe6455c">FID_SEQ_OST_MDT0</a>);
<a name="l00578"></a>00578 }
<a name="l00579"></a>00579 
<a name="l00580"></a><a class="code" href="group__lu__fid.html#ga0cde6965908328dc3a67a072b94db153">00580</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga0cde6965908328dc3a67a072b94db153">ostid_set_seq_echo</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi)
<a name="l00581"></a>00581 {
<a name="l00582"></a>00582         <a class="code" href="group__lu__fid.html#gacea2324bf5556682174a5c4299b9aeb4">ostid_set_seq</a>(oi, <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa05651217568fc724220e2551dce8ad46">FID_SEQ_ECHO</a>);
<a name="l00583"></a>00583 }
<a name="l00584"></a>00584 
<a name="l00585"></a><a class="code" href="group__lu__fid.html#ga02832bbd46d8aef92c574199590f6ae4">00585</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga02832bbd46d8aef92c574199590f6ae4">ostid_set_seq_llog</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi)
<a name="l00586"></a>00586 {
<a name="l00587"></a>00587         <a class="code" href="group__lu__fid.html#gacea2324bf5556682174a5c4299b9aeb4">ostid_set_seq</a>(oi, <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fadb5a0b1fcb09f642e99349906abc3fb7">FID_SEQ_LLOG</a>);
<a name="l00588"></a>00588 }
<a name="l00589"></a>00589 
<a name="l00594"></a><a class="code" href="group__lu__fid.html#gac30e4a6f8dc9985395d6da3afb8127d4">00594</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gac30e4a6f8dc9985395d6da3afb8127d4" title="Note: we need check oi_seq to decide where to set oi_id, so oi_seq should always...">ostid_set_id</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi, <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> oid)
<a name="l00595"></a>00595 {
<a name="l00596"></a>00596         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq)) {
<a name="l00597"></a>00597                 <span class="keywordflow">if</span> (oid &gt;= <a class="code" href="group__lu__fid.html#ga57419850700ffa0fe5b7a485853676ef">IDIF_MAX_OID</a>) {
<a name="l00598"></a>00598                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;Too large OID %#llx to set MDT0 &quot;</span><a class="code" href="group__lustreuser.html#gac64b04c9d195f0918fc22b881d2260e5">DOSTID</a><span class="stringliteral">&quot;\n&quot;</span>,
<a name="l00599"></a>00599                                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)oid, <a class="code" href="group__lustreuser.html#gad3b44cf710fe39c4adc4ae65a2a98543">POSTID</a>(oi));
<a name="l00600"></a>00600                         <span class="keywordflow">return</span>;
<a name="l00601"></a>00601                 }
<a name="l00602"></a>00602                 oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = oid;
<a name="l00603"></a>00603         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(&amp;oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>)) {
<a name="l00604"></a>00604                 <span class="keywordflow">if</span> (oid &gt;= <a class="code" href="group__lu__fid.html#ga57419850700ffa0fe5b7a485853676ef">IDIF_MAX_OID</a>) {
<a name="l00605"></a>00605                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;Too large OID %#llx to set IDIF &quot;</span><a class="code" href="group__lustreuser.html#gac64b04c9d195f0918fc22b881d2260e5">DOSTID</a><span class="stringliteral">&quot;\n&quot;</span>,
<a name="l00606"></a>00606                                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)oid, <a class="code" href="group__lustreuser.html#gad3b44cf710fe39c4adc4ae65a2a98543">POSTID</a>(oi));
<a name="l00607"></a>00607                         <span class="keywordflow">return</span>;
<a name="l00608"></a>00608                 }
<a name="l00609"></a>00609                 oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#ga274eed63d4b75486c97826d7d99f8fc7">fid_idif_seq</a>(oid,
<a name="l00610"></a>00610                                                 <a class="code" href="group__lu__fid.html#gaa0966510a27044279f5014741a7defb7">fid_idif_ost_idx</a>(&amp;oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>));
<a name="l00611"></a>00611                 oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = oid;
<a name="l00612"></a>00612                 oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = oid &gt;&gt; 48;
<a name="l00613"></a>00613         } <span class="keywordflow">else</span> {
<a name="l00614"></a>00614                 <span class="keywordflow">if</span> (oid &gt; <a class="code" href="group__lu__fid.html#gaf9e7f5a4b386166a6ca7ee989660121f">OBIF_MAX_OID</a>) {
<a name="l00615"></a>00615                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;Too large oid %#llx to set REG &quot;</span><a class="code" href="group__lustreuser.html#gac64b04c9d195f0918fc22b881d2260e5">DOSTID</a><span class="stringliteral">&quot;\n&quot;</span>,
<a name="l00616"></a>00616                                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)oid, <a class="code" href="group__lustreuser.html#gad3b44cf710fe39c4adc4ae65a2a98543">POSTID</a>(oi));
<a name="l00617"></a>00617                         <span class="keywordflow">return</span>;
<a name="l00618"></a>00618                 }
<a name="l00619"></a>00619                 oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = oid;
<a name="l00620"></a>00620         }
<a name="l00621"></a>00621 }
<a name="l00622"></a>00622 
<a name="l00623"></a><a class="code" href="group__lu__fid.html#ga8d0226e51fe7041d2ab978c26e29a441">00623</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lu__fid.html#ga8d0226e51fe7041d2ab978c26e29a441">fid_set_id</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid, <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> oid)
<a name="l00624"></a>00624 {
<a name="l00625"></a>00625         <span class="keywordflow">if</span> (<a class="code" href="libcfs__private_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="group__lu__fid.html#ga14c8344c9652401f3b7c23313a0146b2" title="Check if a fid is igif or not.">fid_seq_is_igif</a>(fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a>))) {
<a name="l00626"></a>00626                 <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;bad IGIF, &quot;</span><a class="code" href="group__lustreuser.html#gada965b87689690ab45635c329842df61">DFID</a><span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="group__lustreuser.html#ga00397843677b819317199a3198f5ecc2">PFID</a>(fid));
<a name="l00627"></a>00627                 <span class="keywordflow">return</span> -EBADF;
<a name="l00628"></a>00628         }
<a name="l00629"></a>00629 
<a name="l00630"></a>00630         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(fid)) {
<a name="l00631"></a>00631                 <span class="keywordflow">if</span> (oid &gt;= <a class="code" href="group__lu__fid.html#ga57419850700ffa0fe5b7a485853676ef">IDIF_MAX_OID</a>) {
<a name="l00632"></a>00632                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;Too large OID %#llx to set IDIF &quot;</span><a class="code" href="group__lustreuser.html#gada965b87689690ab45635c329842df61">DFID</a><span class="stringliteral">&quot;\n&quot;</span>,
<a name="l00633"></a>00633                                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)oid, <a class="code" href="group__lustreuser.html#ga00397843677b819317199a3198f5ecc2">PFID</a>(fid));
<a name="l00634"></a>00634                         <span class="keywordflow">return</span> -EBADF;
<a name="l00635"></a>00635                 }
<a name="l00636"></a>00636                 fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#ga274eed63d4b75486c97826d7d99f8fc7">fid_idif_seq</a>(oid, <a class="code" href="group__lu__fid.html#gaa0966510a27044279f5014741a7defb7">fid_idif_ost_idx</a>(fid));
<a name="l00637"></a>00637                 fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = oid;
<a name="l00638"></a>00638                 fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = oid &gt;&gt; 48;
<a name="l00639"></a>00639         } <span class="keywordflow">else</span> {
<a name="l00640"></a>00640                 <span class="keywordflow">if</span> (oid &gt; <a class="code" href="group__lu__fid.html#gaf9e7f5a4b386166a6ca7ee989660121f">OBIF_MAX_OID</a>) {
<a name="l00641"></a>00641                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;Too large OID %#llx to set REG &quot;</span><a class="code" href="group__lustreuser.html#gada965b87689690ab45635c329842df61">DFID</a><span class="stringliteral">&quot;\n&quot;</span>,
<a name="l00642"></a>00642                                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)oid, <a class="code" href="group__lustreuser.html#ga00397843677b819317199a3198f5ecc2">PFID</a>(fid));
<a name="l00643"></a>00643                         <span class="keywordflow">return</span> -EBADF;
<a name="l00644"></a>00644                 }
<a name="l00645"></a>00645                 fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = oid;
<a name="l00646"></a>00646         }
<a name="l00647"></a>00647         <span class="keywordflow">return</span> 0;
<a name="l00648"></a>00648 }
<a name="l00649"></a>00649 
<a name="l00659"></a><a class="code" href="group__lu__fid.html#ga5fb4aeb064e1363dd87397d92b4e23e1">00659</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lu__fid.html#ga5fb4aeb064e1363dd87397d92b4e23e1" title="Unpack an OST object id/seq (group) into a FID.">ostid_to_fid</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *ostid,
<a name="l00660"></a>00660                                __u32 ost_idx)
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq = <a class="code" href="group__lu__fid.html#ga55a38b1a4563e06997d5696d86a70d3f">ostid_seq</a>(ostid);
<a name="l00663"></a>00663 
<a name="l00664"></a>00664         <span class="keywordflow">if</span> (ost_idx &gt; 0xffff) {
<a name="l00665"></a>00665                 <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;bad ost_idx, &quot;</span><a class="code" href="group__lustreuser.html#gac64b04c9d195f0918fc22b881d2260e5">DOSTID</a><span class="stringliteral">&quot; ost_idx:%u\n&quot;</span>, <a class="code" href="group__lustreuser.html#gad3b44cf710fe39c4adc4ae65a2a98543">POSTID</a>(ostid),
<a name="l00666"></a>00666                        ost_idx);
<a name="l00667"></a>00667                 <span class="keywordflow">return</span> -EBADF;
<a name="l00668"></a>00668         }
<a name="l00669"></a>00669 
<a name="l00670"></a>00670         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(seq)) {
<a name="l00671"></a>00671                 <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> oid = <a class="code" href="group__lu__fid.html#gae170c03ac79b0ef0ac57ff115eea190b">ostid_id</a>(ostid);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673                 <span class="comment">/* This is a &quot;legacy&quot; (old 1.x/2.early) OST object in &quot;group 0&quot;</span>
<a name="l00674"></a>00674 <span class="comment">                 * that we map into the IDIF namespace.  It allows up to 2^48</span>
<a name="l00675"></a>00675 <span class="comment">                 * objects per OST, as this is the object namespace that has</span>
<a name="l00676"></a>00676 <span class="comment">                 * been in production for years.  This can handle create rates</span>
<a name="l00677"></a>00677 <span class="comment">                 * of 1M objects/s/OST for 9 years, or combinations thereof. */</span>
<a name="l00678"></a>00678                 <span class="keywordflow">if</span> (oid &gt;= <a class="code" href="group__lu__fid.html#ga57419850700ffa0fe5b7a485853676ef">IDIF_MAX_OID</a>) {
<a name="l00679"></a>00679                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;bad MDT0 id(1), &quot;</span><a class="code" href="group__lustreuser.html#gac64b04c9d195f0918fc22b881d2260e5">DOSTID</a><span class="stringliteral">&quot; ost_idx:%u\n&quot;</span>,
<a name="l00680"></a>00680                                <a class="code" href="group__lustreuser.html#gad3b44cf710fe39c4adc4ae65a2a98543">POSTID</a>(ostid), ost_idx);
<a name="l00681"></a>00681                         <span class="keywordflow">return</span> -EBADF;
<a name="l00682"></a>00682                 }
<a name="l00683"></a>00683                 fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="group__lu__fid.html#ga274eed63d4b75486c97826d7d99f8fc7">fid_idif_seq</a>(oid, ost_idx);
<a name="l00684"></a>00684                 <span class="comment">/* truncate to 32 bits by assignment */</span>
<a name="l00685"></a>00685                 fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = oid;
<a name="l00686"></a>00686                 <span class="comment">/* in theory, not currently used */</span>
<a name="l00687"></a>00687                 fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = oid &gt;&gt; 48;
<a name="l00688"></a>00688         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="libcfs__private_8h.html#a217a0bd562b98ae8c2ffce44935351e1">likely</a>(!<a class="code" href="group__lu__fid.html#ga2d7aed8842b06cbf6e824738e223bf40">fid_seq_is_default</a>(seq)))
<a name="l00689"></a>00689                 <span class="comment">/* if (fid_seq_is_idif(seq) || fid_seq_is_norm(seq)) */</span> {
<a name="l00690"></a>00690                 <span class="comment">/* This is either an IDIF object, which identifies objects</span>
<a name="l00691"></a>00691 <span class="comment">                 * across all OSTs, or a regular FID.  The IDIF namespace maps</span>
<a name="l00692"></a>00692 <span class="comment">                 * legacy OST objects into the FID namespace.  In both cases,</span>
<a name="l00693"></a>00693 <span class="comment">                 * we just pass the FID through, no conversion needed. */</span>
<a name="l00694"></a>00694                 <span class="keywordflow">if</span> (ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>.<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> != 0) {
<a name="l00695"></a>00695                         <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;bad MDT0 id(2), &quot;</span><a class="code" href="group__lustreuser.html#gac64b04c9d195f0918fc22b881d2260e5">DOSTID</a><span class="stringliteral">&quot; ost_idx:%u\n&quot;</span>,
<a name="l00696"></a>00696                                 <a class="code" href="group__lustreuser.html#gad3b44cf710fe39c4adc4ae65a2a98543">POSTID</a>(ostid), ost_idx);
<a name="l00697"></a>00697                         <span class="keywordflow">return</span> -EBADF;
<a name="l00698"></a>00698                 }
<a name="l00699"></a>00699                 *fid = ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>;
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701 
<a name="l00702"></a>00702         <span class="keywordflow">return</span> 0;
<a name="l00703"></a>00703 }
<a name="l00704"></a>00704 
<a name="l00705"></a>00705 <span class="comment">/* pack any OST FID into an ostid (id/seq) for the wire/disk */</span>
<a name="l00706"></a><a class="code" href="group__lu__fid.html#ga5ef061c91d3eddf2177e252a420c1e42">00706</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lu__fid.html#ga5ef061c91d3eddf2177e252a420c1e42">fid_to_ostid</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid, <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *ostid)
<a name="l00707"></a>00707 {
<a name="l00708"></a>00708         <span class="keywordflow">if</span> (<a class="code" href="libcfs__private_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="group__lu__fid.html#ga14c8344c9652401f3b7c23313a0146b2" title="Check if a fid is igif or not.">fid_seq_is_igif</a>(fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a>))) {
<a name="l00709"></a>00709                 <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;bad IGIF, &quot;</span><a class="code" href="group__lustreuser.html#gada965b87689690ab45635c329842df61">DFID</a><span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="group__lustreuser.html#ga00397843677b819317199a3198f5ecc2">PFID</a>(fid));
<a name="l00710"></a>00710                 <span class="keywordflow">return</span> -EBADF;
<a name="l00711"></a>00711         }
<a name="l00712"></a>00712 
<a name="l00713"></a>00713         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(fid)) {
<a name="l00714"></a>00714                 <a class="code" href="group__lu__fid.html#ga84249453659ffd4ae5d9f92654160065">ostid_set_seq_mdt0</a>(ostid);
<a name="l00715"></a>00715                 <a class="code" href="group__lu__fid.html#gac30e4a6f8dc9985395d6da3afb8127d4" title="Note: we need check oi_seq to decide where to set oi_id, so oi_seq should always...">ostid_set_id</a>(ostid, <a class="code" href="group__lu__fid.html#gaa4e73a24d02f04095a491574384e665a">fid_idif_id</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid), <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(fid),
<a name="l00716"></a>00716                                                 <a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(fid)));
<a name="l00717"></a>00717         } <span class="keywordflow">else</span> {
<a name="l00718"></a>00718                 ostid-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a> = *fid;
<a name="l00719"></a>00719         }
<a name="l00720"></a>00720 
<a name="l00721"></a>00721         <span class="keywordflow">return</span> 0;
<a name="l00722"></a>00722 }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 <span class="comment">/* Check whether the fid is for LAST_ID */</span>
<a name="l00725"></a><a class="code" href="group__lu__fid.html#gaf7cf854e7bfd117237b16739fb243a5b">00725</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#gaf7cf854e7bfd117237b16739fb243a5b">fid_is_last_id</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00726"></a>00726 {
<a name="l00727"></a>00727         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(fid) == 0 &amp;&amp; <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid) != <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fab564c37ab7cc6bec76ef3f0e2acca621">FID_SEQ_UPDATE_LOG</a> &amp;&amp;
<a name="l00728"></a>00728                <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid) != <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa9bae843fc7e3e8bff2e6dfd528b159b3">FID_SEQ_UPDATE_LOG_DIR</a>;
<a name="l00729"></a>00729 }
<a name="l00730"></a>00730 
<a name="l00736"></a><a class="code" href="group__lu__fid.html#ga2b4afadd9a8bd863442f906f36bede70">00736</a> <span class="keyword">static</span> <span class="keyword">inline</span> ino_t <a class="code" href="group__lu__fid.html#ga2b4afadd9a8bd863442f906f36bede70" title="Get inode number from an igif.">lu_igif_ino</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00737"></a>00737 {
<a name="l00738"></a>00738         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid);
<a name="l00739"></a>00739 }
<a name="l00740"></a>00740 
<a name="l00746"></a><a class="code" href="group__lu__fid.html#ga9af7ed3ff31646274d7089077f16b3c0">00746</a> <span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="group__lu__fid.html#ga9af7ed3ff31646274d7089077f16b3c0" title="Get inode generation from an igif.">lu_igif_gen</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00747"></a>00747 {
<a name="l00748"></a>00748         <span class="keywordflow">return</span> <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(fid);
<a name="l00749"></a>00749 }
<a name="l00750"></a>00750 
<a name="l00754"></a><a class="code" href="group__lu__fid.html#gab2afacda234018dae0955d065afb5460">00754</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gab2afacda234018dae0955d065afb5460" title="Build igif from the inode number/generation.">lu_igif_build</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid, __u32 ino, __u32 gen)
<a name="l00755"></a>00755 {
<a name="l00756"></a>00756         fid-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = ino;
<a name="l00757"></a>00757         fid-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = gen;
<a name="l00758"></a>00758         fid-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = 0;
<a name="l00759"></a>00759 }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761 <span class="comment">/*</span>
<a name="l00762"></a>00762 <span class="comment"> * Fids are transmitted across network (in the sender byte-ordering),</span>
<a name="l00763"></a>00763 <span class="comment"> * and stored on disk in big-endian order.</span>
<a name="l00764"></a>00764 <span class="comment"> */</span>
<a name="l00765"></a><a class="code" href="group__lu__fid.html#ga67ad15a9c2e4676b57dd84272d2e6849">00765</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga67ad15a9c2e4676b57dd84272d2e6849">fid_cpu_to_le</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *dst, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *src)
<a name="l00766"></a>00766 {
<a name="l00767"></a>00767         dst-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="byteorder_8h.html#aa170dc4b2dae5b00bdec3a307427240f">cpu_to_le64</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(src));
<a name="l00768"></a>00768         dst-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="byteorder_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(src));
<a name="l00769"></a>00769         dst-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = <a class="code" href="byteorder_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(src));
<a name="l00770"></a>00770 }
<a name="l00771"></a>00771 
<a name="l00772"></a><a class="code" href="group__lu__fid.html#ga4ec200cce2c251b81f3c49154ab9198e">00772</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga4ec200cce2c251b81f3c49154ab9198e">fid_le_to_cpu</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *dst, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *src)
<a name="l00773"></a>00773 {
<a name="l00774"></a>00774         dst-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="byteorder_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(src));
<a name="l00775"></a>00775         dst-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(<a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(src));
<a name="l00776"></a>00776         dst-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = <a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(<a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(src));
<a name="l00777"></a>00777 }
<a name="l00778"></a>00778 
<a name="l00779"></a><a class="code" href="group__lu__fid.html#ga29f631f588b9332657843f274a7dd2c9">00779</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga29f631f588b9332657843f274a7dd2c9">fid_cpu_to_be</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *dst, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *src)
<a name="l00780"></a>00780 {
<a name="l00781"></a>00781         dst-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="byteorder_8h.html#a608cce26a6f758edaba84a5dc1a08649">cpu_to_be64</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(src));
<a name="l00782"></a>00782         dst-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="byteorder_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(<a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(src));
<a name="l00783"></a>00783         dst-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = <a class="code" href="byteorder_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(<a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(src));
<a name="l00784"></a>00784 }
<a name="l00785"></a>00785 
<a name="l00786"></a><a class="code" href="group__lu__fid.html#ga6800f90e4de0a0dc60d696ead981623f">00786</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#ga6800f90e4de0a0dc60d696ead981623f">fid_be_to_cpu</a>(<span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *dst, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *src)
<a name="l00787"></a>00787 {
<a name="l00788"></a>00788         dst-&gt;<a class="code" href="structlu__fid.html#a05477e45a42f0e5ae1b438c2d9e6cf30" title="FID sequence.">f_seq</a> = <a class="code" href="byteorder_8h.html#a979d5021bdb216431673199c4aeafef4">be64_to_cpu</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(src));
<a name="l00789"></a>00789         dst-&gt;<a class="code" href="structlu__fid.html#a48aec36397824074ed1624b09edef75a">f_oid</a> = <a class="code" href="byteorder_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(<a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(src));
<a name="l00790"></a>00790         dst-&gt;<a class="code" href="structlu__fid.html#af6a6857838bb5594da2fe4101985242d" title="FID version, used to distinguish different versions (in the sense of snapshots, etc...">f_ver</a> = <a class="code" href="byteorder_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(<a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(src));
<a name="l00791"></a>00791 }
<a name="l00792"></a>00792 
<a name="l00793"></a><a class="code" href="group__lu__fid.html#ga4e4ae31eef33a87852483e02806e914a">00793</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga4e4ae31eef33a87852483e02806e914a">fid_is_sane</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid)
<a name="l00794"></a>00794 {
<a name="l00795"></a>00795         <span class="keywordflow">return</span> fid != NULL &amp;&amp;
<a name="l00796"></a>00796                ((<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid) &gt;= <a class="code" href="group__lu__fid.html#gga962ff98f105cccff448c45b0c7b77e2fa0d29fa99c95f9884eef3f820465a6cb3">FID_SEQ_START</a> &amp;&amp; <a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(fid) == 0) ||
<a name="l00797"></a>00797                 <a class="code" href="group__lu__fid.html#ga300d656c3f013286a189975707c7e6a6">fid_is_igif</a>(fid) || <a class="code" href="group__lu__fid.html#ga83302b8605d68196a1f095f0cff1530f">fid_is_idif</a>(fid) ||
<a name="l00798"></a>00798                 <a class="code" href="group__lu__fid.html#ga0a571593081d86e292d2d0735481fd68">fid_seq_is_rsvd</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid)));
<a name="l00799"></a>00799 }
<a name="l00800"></a>00800 
<a name="l00801"></a><a class="code" href="group__lu__fid.html#ga7d05f4f2cdf8da0d1221216426313c13">00801</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lu__fid.html#ga7d05f4f2cdf8da0d1221216426313c13">lu_fid_eq</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *f0, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *f1)
<a name="l00802"></a>00802 {
<a name="l00803"></a>00803         <span class="keywordflow">return</span> memcmp(f0, f1, <span class="keyword">sizeof</span> *f0) == 0;
<a name="l00804"></a>00804 }
<a name="l00805"></a>00805 
<a name="l00806"></a><a class="code" href="group__lu__fid.html#ga5ea504724eb8d727307fe110dd971282">00806</a> <span class="preprocessor">#define __diff_normalize(val0, val1)                            \</span>
<a name="l00807"></a>00807 <span class="preprocessor">({                                                              \</span>
<a name="l00808"></a>00808 <span class="preprocessor">        typeof(val0) __val0 = (val0);                           \</span>
<a name="l00809"></a>00809 <span class="preprocessor">        typeof(val1) __val1 = (val1);                           \</span>
<a name="l00810"></a>00810 <span class="preprocessor">                                                                \</span>
<a name="l00811"></a>00811 <span class="preprocessor">        (__val0 == __val1 ? 0 : __val0 &gt; __val1 ? +1 : -1);     \</span>
<a name="l00812"></a>00812 <span class="preprocessor">})</span>
<a name="l00813"></a>00813 <span class="preprocessor"></span>
<a name="l00814"></a><a class="code" href="group__lu__fid.html#ga11cb40759a1f89afa0e47fb8c20caaba">00814</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lu__fid.html#ga11cb40759a1f89afa0e47fb8c20caaba">lu_fid_cmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *f0,
<a name="l00815"></a>00815                              <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *f1)
<a name="l00816"></a>00816 {
<a name="l00817"></a>00817         <span class="keywordflow">return</span>
<a name="l00818"></a>00818                 <a class="code" href="group__lu__fid.html#ga5ea504724eb8d727307fe110dd971282">__diff_normalize</a>(<a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(f0), <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(f1)) ?:
<a name="l00819"></a>00819                 <a class="code" href="group__lu__fid.html#ga5ea504724eb8d727307fe110dd971282">__diff_normalize</a>(<a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(f0), <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(f1)) ?:
<a name="l00820"></a>00820                 <a class="code" href="group__lu__fid.html#ga5ea504724eb8d727307fe110dd971282">__diff_normalize</a>(<a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(f0), <a class="code" href="group__lu__fid.html#ga46a83dbb6d463a3610eb662d3844cee4" title="returns fid object version">fid_ver</a>(f1));
<a name="l00821"></a>00821 }
<a name="l00822"></a>00822 
<a name="l00823"></a><a class="code" href="group__lu__fid.html#gad450e17983d482f5142580df852200b4">00823</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gad450e17983d482f5142580df852200b4">ostid_cpu_to_le</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *src_oi,
<a name="l00824"></a>00824                                    <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *dst_oi)
<a name="l00825"></a>00825 {
<a name="l00826"></a>00826         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq)) {
<a name="l00827"></a>00827                 dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = <a class="code" href="byteorder_8h.html#aa170dc4b2dae5b00bdec3a307427240f">cpu_to_le64</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id);
<a name="l00828"></a>00828                 dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = <a class="code" href="byteorder_8h.html#aa170dc4b2dae5b00bdec3a307427240f">cpu_to_le64</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq);
<a name="l00829"></a>00829         } <span class="keywordflow">else</span> {
<a name="l00830"></a>00830                 <a class="code" href="group__lu__fid.html#ga67ad15a9c2e4676b57dd84272d2e6849">fid_cpu_to_le</a>(&amp;dst_oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>, &amp;src_oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>);
<a name="l00831"></a>00831         }
<a name="l00832"></a>00832 }
<a name="l00833"></a>00833 
<a name="l00834"></a><a class="code" href="group__lu__fid.html#gae3cfc41ca6c8ed54abe7af53a41497ba">00834</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lu__fid.html#gae3cfc41ca6c8ed54abe7af53a41497ba">ostid_le_to_cpu</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *src_oi,
<a name="l00835"></a>00835                                    <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *dst_oi)
<a name="l00836"></a>00836 {
<a name="l00837"></a>00837         <span class="keywordflow">if</span> (<a class="code" href="group__lu__fid.html#gae3a3f1b44da823b5f00eb93e02055b56">fid_seq_is_mdt0</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq)) {
<a name="l00838"></a>00838                 dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = <a class="code" href="byteorder_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id);
<a name="l00839"></a>00839                 dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = <a class="code" href="byteorder_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq);
<a name="l00840"></a>00840         } <span class="keywordflow">else</span> {
<a name="l00841"></a>00841                 <a class="code" href="group__lu__fid.html#ga4ec200cce2c251b81f3c49154ab9198e">fid_le_to_cpu</a>(&amp;dst_oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>, &amp;src_oi-&gt;<a class="code" href="structost__id.html#a04d4b2f6051e3ca320a852cbac7aaeda">oi_fid</a>);
<a name="l00842"></a>00842         }
<a name="l00843"></a>00843 }
<a name="l00844"></a>00844 
<a name="l00845"></a><a class="code" href="structlu__orphan__rec.html">00845</a> <span class="keyword">struct </span><a class="code" href="structlu__orphan__rec.html">lu_orphan_rec</a> {
<a name="l00846"></a>00846         <span class="comment">/* The MDT-object&apos;s FID referenced by the orphan OST-object */</span>
<a name="l00847"></a><a class="code" href="structlu__orphan__rec.html#a32d6aa1329fb389162945a03772fbbcf">00847</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structlu__orphan__rec.html#a32d6aa1329fb389162945a03772fbbcf">lor_fid</a>;
<a name="l00848"></a><a class="code" href="structlu__orphan__rec.html#a6d6a8a12e4c5b6a59ca8efbe36e7fb9f">00848</a>         __u32           <a class="code" href="structlu__orphan__rec.html#a6d6a8a12e4c5b6a59ca8efbe36e7fb9f">lor_uid</a>;
<a name="l00849"></a><a class="code" href="structlu__orphan__rec.html#a7af949aef6d088c42d4eb904d750081e">00849</a>         __u32           <a class="code" href="structlu__orphan__rec.html#a7af949aef6d088c42d4eb904d750081e">lor_gid</a>;
<a name="l00850"></a>00850 };
<a name="l00851"></a>00851 
<a name="l00852"></a><a class="code" href="structlu__orphan__ent.html">00852</a> <span class="keyword">struct </span><a class="code" href="structlu__orphan__ent.html">lu_orphan_ent</a> {
<a name="l00853"></a>00853         <span class="comment">/* The orphan OST-object&apos;s FID */</span>
<a name="l00854"></a><a class="code" href="structlu__orphan__ent.html#a368371b7c73be04ee5409d865b43f9df">00854</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>           <a class="code" href="structlu__orphan__ent.html#a368371b7c73be04ee5409d865b43f9df">loe_key</a>;
<a name="l00855"></a><a class="code" href="structlu__orphan__ent.html#a9455457d96bc3fa64ca7fe3a01bef07b">00855</a>         <span class="keyword">struct </span><a class="code" href="structlu__orphan__rec.html">lu_orphan_rec</a>    <a class="code" href="structlu__orphan__ent.html#a9455457d96bc3fa64ca7fe3a01bef07b">loe_rec</a>;
<a name="l00856"></a>00856 };
<a name="l00857"></a>00857 
<a name="l00869"></a><a class="code" href="group__lu__dir.html#gadf424fa0b5a6cfc7859f55b85f3548aa">00869</a> <span class="keyword">enum</span> <a class="code" href="group__lu__dir.html#gadf424fa0b5a6cfc7859f55b85f3548aa" title="Enumeration of possible directory entry attributes.">lu_dirent_attrs</a> {
<a name="l00870"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaf2a1895a83b93d1a52421c0570533fdd">00870</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaf2a1895a83b93d1a52421c0570533fdd">LUDA_FID</a>                = 0x0001,
<a name="l00871"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa7cd75f2afad6ccd1a159bba648e02631">00871</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa7cd75f2afad6ccd1a159bba648e02631">LUDA_TYPE</a>               = 0x0002,
<a name="l00872"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaff8382d8ce85b0044dd4bfe807226bbd">00872</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaff8382d8ce85b0044dd4bfe807226bbd">LUDA_64BITHASH</a>          = 0x0004,
<a name="l00873"></a>00873 
<a name="l00874"></a>00874         <span class="comment">/* The following attrs are used for MDT internal only,</span>
<a name="l00875"></a>00875 <span class="comment">         * not visible to client */</span>
<a name="l00876"></a>00876 
<a name="l00877"></a>00877         <span class="comment">/* Something in the record is unknown, to be verified in further. */</span>
<a name="l00878"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaac64178880ca90c710bb978ccb9780c6">00878</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaac64178880ca90c710bb978ccb9780c6">LUDA_UNKNOWN</a>            = 0x0400,
<a name="l00879"></a>00879         <span class="comment">/* Ignore this record, go to next directly. */</span>
<a name="l00880"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa04e35e05eb40c029a8ce3037817111da">00880</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa04e35e05eb40c029a8ce3037817111da">LUDA_IGNORE</a>             = 0x0800,
<a name="l00881"></a>00881         <span class="comment">/* The system is upgraded, has beed or to be repaired (dryrun). */</span>
<a name="l00882"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaf65884c52fbcec0dbf5d0424b4245278">00882</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaaf65884c52fbcec0dbf5d0424b4245278">LUDA_UPGRADE</a>            = 0x1000,
<a name="l00883"></a>00883         <span class="comment">/* The dirent has been repaired, or to be repaired (dryrun). */</span>
<a name="l00884"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaafbedec5f8d354aaaac4e57c7ecbc91bf">00884</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaafbedec5f8d354aaaac4e57c7ecbc91bf">LUDA_REPAIR</a>             = 0x2000,
<a name="l00885"></a>00885         <span class="comment">/* Only check but not repair the dirent inconsistency */</span>
<a name="l00886"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaad3c14df052ddcd16cbef9c185b9d19eb">00886</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaad3c14df052ddcd16cbef9c185b9d19eb">LUDA_VERIFY_DRYRUN</a>      = 0x4000,
<a name="l00887"></a>00887         <span class="comment">/* Verify the dirent consistency */</span>
<a name="l00888"></a><a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa7038a964aed8f5c35982affb7d41de95">00888</a>         <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa7038a964aed8f5c35982affb7d41de95">LUDA_VERIFY</a>             = 0x8000,
<a name="l00889"></a>00889 };
<a name="l00890"></a>00890 
<a name="l00891"></a><a class="code" href="group__lu__dir.html#ga680081111faef43e243a37781d0a7404">00891</a> <span class="preprocessor">#define LU_DIRENT_ATTRS_MASK    0xff00</span>
<a name="l00892"></a>00892 <span class="preprocessor"></span>
<a name="l00896"></a><a class="code" href="structlu__dirent.html">00896</a> <span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> {
<a name="l00898"></a><a class="code" href="structlu__dirent.html#a58764bd31894298ed7ab119d7a245308">00898</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> <a class="code" href="structlu__dirent.html#a58764bd31894298ed7ab119d7a245308" title="valid if LUDA_FID is set.">lde_fid</a>;
<a name="l00900"></a><a class="code" href="structlu__dirent.html#a93db8cf242015f8192bd7263f8a50e2e">00900</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>         <a class="code" href="structlu__dirent.html#a93db8cf242015f8192bd7263f8a50e2e" title="a unique entry identifier: a hash or an offset.">lde_hash</a>;
<a name="l00902"></a><a class="code" href="structlu__dirent.html#a241bc48a83ebfb3219722f6a6afbe66a">00902</a>         __u16         <a class="code" href="structlu__dirent.html#a241bc48a83ebfb3219722f6a6afbe66a" title="total record length, including all attributes.">lde_reclen</a>;
<a name="l00904"></a><a class="code" href="structlu__dirent.html#a6cf011f9cdc36e619bad6e893a537c02">00904</a>         __u16         <a class="code" href="structlu__dirent.html#a6cf011f9cdc36e619bad6e893a537c02" title="name length">lde_namelen</a>;
<a name="l00908"></a><a class="code" href="structlu__dirent.html#af1fe2598c44bab695e849de0a2ca80dc">00908</a>         __u32         <a class="code" href="structlu__dirent.html#af1fe2598c44bab695e849de0a2ca80dc" title="optional variable size attributes following this entry.">lde_attrs</a>;
<a name="l00913"></a><a class="code" href="structlu__dirent.html#a3e3b5a552269757293891e23de373a3f">00913</a>         <span class="keywordtype">char</span>          <a class="code" href="structlu__dirent.html#a3e3b5a552269757293891e23de373a3f" title="name is followed by the attributes indicated in -&amp;gt;ldp_attrs, in their natural...">lde_name</a>[0];
<a name="l00914"></a>00914 };
<a name="l00915"></a>00915 
<a name="l00916"></a>00916 <span class="comment">/*</span>
<a name="l00917"></a>00917 <span class="comment"> * Definitions of optional directory entry attributes formats.</span>
<a name="l00918"></a>00918 <span class="comment"> *</span>
<a name="l00919"></a>00919 <span class="comment"> * Individual attributes do not have their length encoded in a generic way. It</span>
<a name="l00920"></a>00920 <span class="comment"> * is assumed that consumer of an attribute knows its format. This means that</span>
<a name="l00921"></a>00921 <span class="comment"> * it is impossible to skip over an unknown attribute, except by skipping over all</span>
<a name="l00922"></a>00922 <span class="comment"> * remaining attributes (by using -&gt;lde_reclen), which is not too</span>
<a name="l00923"></a>00923 <span class="comment"> * constraining, because new server versions will append new attributes at</span>
<a name="l00924"></a>00924 <span class="comment"> * the end of an entry.</span>
<a name="l00925"></a>00925 <span class="comment"> */</span>
<a name="l00926"></a>00926 
<a name="l00933"></a>00933 <span class="comment">/* To have compatibility with 1.8, lets have fid in lu_dirent struct. */</span>
<a name="l00934"></a>00934 
<a name="l00940"></a><a class="code" href="structluda__type.html">00940</a> <span class="keyword">struct </span><a class="code" href="structluda__type.html" title="Fid directory attribute: a fid of an object referenced by the entry.">luda_type</a> {
<a name="l00941"></a><a class="code" href="structluda__type.html#a448766f447559e5a1ac1b3aaa6a80e4e">00941</a>         __u16 <a class="code" href="structluda__type.html#a448766f447559e5a1ac1b3aaa6a80e4e">lt_type</a>;
<a name="l00942"></a>00942 };
<a name="l00943"></a>00943 
<a name="l00944"></a><a class="code" href="structlu__dirpage.html">00944</a> <span class="keyword">struct </span><a class="code" href="structlu__dirpage.html">lu_dirpage</a> {
<a name="l00945"></a><a class="code" href="structlu__dirpage.html#acc1b482af185225738f5ce6caca3278c">00945</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>            <a class="code" href="structlu__dirpage.html#acc1b482af185225738f5ce6caca3278c">ldp_hash_start</a>;
<a name="l00946"></a><a class="code" href="structlu__dirpage.html#ae0ed53931187baf0548edcafe31345b1">00946</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>            <a class="code" href="structlu__dirpage.html#ae0ed53931187baf0548edcafe31345b1">ldp_hash_end</a>;
<a name="l00947"></a><a class="code" href="structlu__dirpage.html#ab9d7b9e4ef1334aac58c111b83b7abd3">00947</a>         __u32            <a class="code" href="structlu__dirpage.html#ab9d7b9e4ef1334aac58c111b83b7abd3">ldp_flags</a>;
<a name="l00948"></a><a class="code" href="structlu__dirpage.html#ad2f0f292fee8bfa8b5e0280c6e4f6dda">00948</a>         __u32            <a class="code" href="structlu__dirpage.html#ad2f0f292fee8bfa8b5e0280c6e4f6dda">ldp_pad0</a>;
<a name="l00949"></a><a class="code" href="structlu__dirpage.html#a6fbd4465bd650d16eed9e39b327e06a4">00949</a>         <span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> <a class="code" href="structlu__dirpage.html#a6fbd4465bd650d16eed9e39b327e06a4">ldp_entries</a>[0];
<a name="l00950"></a>00950 };
<a name="l00951"></a>00951 
<a name="l00952"></a><a class="code" href="group__lu__dir.html#ga8e36a5c3ab28f2a81a6a17c6397bffee">00952</a> <span class="keyword">enum</span> <a class="code" href="group__lu__dir.html#ga8e36a5c3ab28f2a81a6a17c6397bffee">lu_dirpage_flags</a> {
<a name="l00956"></a><a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6">00956</a>         <a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6" title="dirpage contains no entry.">LDF_EMPTY</a>   = 1 &lt;&lt; 0,
<a name="l00960"></a><a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea2e5d9d6700b40d5386cd4a6597e74ab2">00960</a>         <a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea2e5d9d6700b40d5386cd4a6597e74ab2" title="last entry&amp;#39;s lde_hash equals ldp_hash_end.">LDF_COLLIDE</a> = 1 &lt;&lt; 1
<a name="l00961"></a>00961 };
<a name="l00962"></a>00962 
<a name="l00963"></a><a class="code" href="group__lu__dir.html#ga066a659ac9079ed9a992bc549addf78f">00963</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> *<a class="code" href="group__lu__dir.html#ga066a659ac9079ed9a992bc549addf78f">lu_dirent_start</a>(<span class="keyword">struct</span> <a class="code" href="structlu__dirpage.html">lu_dirpage</a> *dp)
<a name="l00964"></a>00964 {
<a name="l00965"></a>00965         <span class="keywordflow">if</span> (<a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(dp-&gt;<a class="code" href="structlu__dirpage.html#ab9d7b9e4ef1334aac58c111b83b7abd3">ldp_flags</a>) &amp; <a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6" title="dirpage contains no entry.">LDF_EMPTY</a>)
<a name="l00966"></a>00966                 <span class="keywordflow">return</span> NULL;
<a name="l00967"></a>00967         <span class="keywordflow">else</span>
<a name="l00968"></a>00968                 <span class="keywordflow">return</span> dp-&gt;<a class="code" href="structlu__dirpage.html#a6fbd4465bd650d16eed9e39b327e06a4">ldp_entries</a>;
<a name="l00969"></a>00969 }
<a name="l00970"></a>00970 
<a name="l00971"></a><a class="code" href="group__lu__dir.html#gaa37cab0269c41a9d76a9c12e6c351f65">00971</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> *<a class="code" href="group__lu__dir.html#gaa37cab0269c41a9d76a9c12e6c351f65">lu_dirent_next</a>(<span class="keyword">struct</span> <a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> *ent)
<a name="l00972"></a>00972 {
<a name="l00973"></a>00973         <span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> *next;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975         <span class="keywordflow">if</span> (<a class="code" href="byteorder_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(ent-&gt;<a class="code" href="structlu__dirent.html#a241bc48a83ebfb3219722f6a6afbe66a" title="total record length, including all attributes.">lde_reclen</a>) != 0)
<a name="l00976"></a>00976                 next = ((<span class="keywordtype">void</span> *)ent) + <a class="code" href="byteorder_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(ent-&gt;<a class="code" href="structlu__dirent.html#a241bc48a83ebfb3219722f6a6afbe66a" title="total record length, including all attributes.">lde_reclen</a>);
<a name="l00977"></a>00977         <span class="keywordflow">else</span>
<a name="l00978"></a>00978                 next = NULL;
<a name="l00979"></a>00979 
<a name="l00980"></a>00980         <span class="keywordflow">return</span> next;
<a name="l00981"></a>00981 }
<a name="l00982"></a>00982 
<a name="l00983"></a><a class="code" href="group__lu__dir.html#ga4618cc1ec302c51ae82b9a80f4fdc1c8">00983</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="group__lu__dir.html#ga4618cc1ec302c51ae82b9a80f4fdc1c8">lu_dirent_calc_size</a>(<span class="keywordtype">size_t</span> namelen, __u16 attr)
<a name="l00984"></a>00984 {
<a name="l00985"></a>00985         <span class="keywordtype">size_t</span> <a class="code" href="lp__utils_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;
<a name="l00986"></a>00986 
<a name="l00987"></a>00987         <span class="keywordflow">if</span> (attr &amp; <a class="code" href="group__lu__dir.html#ggadf424fa0b5a6cfc7859f55b85f3548aaa7cd75f2afad6ccd1a159bba648e02631">LUDA_TYPE</a>) {
<a name="l00988"></a>00988                 <span class="keyword">const</span> <span class="keywordtype">size_t</span> align = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structluda__type.html" title="Fid directory attribute: a fid of an object referenced by the entry.">luda_type</a>) - 1;
<a name="l00989"></a>00989                 size = (<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a>) + namelen + align) &amp; ~align;
<a name="l00990"></a>00990                 size += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structluda__type.html" title="Fid directory attribute: a fid of an object referenced by the entry.">luda_type</a>);
<a name="l00991"></a>00991         } <span class="keywordflow">else</span>
<a name="l00992"></a>00992                 size = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a>) + namelen;
<a name="l00993"></a>00993 
<a name="l00994"></a>00994         <span class="keywordflow">return</span> (size + 7) &amp; ~7;
<a name="l00995"></a>00995 }
<a name="l00996"></a>00996 
<a name="l00997"></a><a class="code" href="group__lu__dir.html#ga396a3df870ba4c0ad044488c8174bc43">00997</a> <span class="preprocessor">#define MDS_DIR_END_OFF 0xfffffffffffffffeULL</span>
<a name="l00998"></a>00998 <span class="preprocessor"></span>
<a name="l01008"></a><a class="code" href="group__lu__dir.html#ga7606e5469f1ecc97b2ef8616d3023fbb">01008</a> <span class="preprocessor">#define LU_PAGE_SHIFT 12</span>
<a name="l01009"></a><a class="code" href="group__lu__dir.html#ga789315660991e121ca57b17c12265cc8">01009</a> <span class="preprocessor"></span><span class="preprocessor">#define LU_PAGE_SIZE  (1UL &lt;&lt; LU_PAGE_SHIFT)</span>
<a name="l01010"></a><a class="code" href="group__lu__dir.html#ga73deca52843ae910c4010d5b881ec66c">01010</a> <span class="preprocessor"></span><span class="preprocessor">#define LU_PAGE_MASK  (~(LU_PAGE_SIZE - 1))</span>
<a name="l01011"></a>01011 <span class="preprocessor"></span>
<a name="l01012"></a><a class="code" href="group__lu__dir.html#ga8e1a5358acbdadf0c2d0c6d4288740f9">01012</a> <span class="preprocessor">#define LU_PAGE_COUNT (1 &lt;&lt; (PAGE_CACHE_SHIFT - LU_PAGE_SHIFT))</span>
<a name="l01013"></a>01013 <span class="preprocessor"></span>
<a name="l01016"></a><a class="code" href="structlustre__handle.html">01016</a> <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> {
<a name="l01017"></a><a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">01017</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">cookie</a>;
<a name="l01018"></a>01018 };
<a name="l01019"></a><a class="code" href="group__lustreidl.html#ga5b853414e206bf80f5876d0642d37af9">01019</a> <span class="preprocessor">#define DEAD_HANDLE_MAGIC 0xdeadbeefcafebabeULL</span>
<a name="l01020"></a>01020 <span class="preprocessor"></span>
<a name="l01021"></a><a class="code" href="group__lustreidl.html#ga1382ead1fe9dd82db2821a82c4d2de11">01021</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lustreidl.html#ga1382ead1fe9dd82db2821a82c4d2de11">lustre_handle_is_used</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlustre__handle.html">lustre_handle</a> *lh)
<a name="l01022"></a>01022 {
<a name="l01023"></a>01023         <span class="keywordflow">return</span> lh-&gt;<a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">cookie</a> != 0;
<a name="l01024"></a>01024 }
<a name="l01025"></a>01025 
<a name="l01026"></a><a class="code" href="group__lustreidl.html#gac9f19e7bcacef016b5fafda31ee31773">01026</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lustreidl.html#gac9f19e7bcacef016b5fafda31ee31773">lustre_handle_equal</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlustre__handle.html">lustre_handle</a> *lh1,
<a name="l01027"></a>01027                                        <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlustre__handle.html">lustre_handle</a> *lh2)
<a name="l01028"></a>01028 {
<a name="l01029"></a>01029         <span class="keywordflow">return</span> lh1-&gt;<a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">cookie</a> == lh2-&gt;<a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">cookie</a>;
<a name="l01030"></a>01030 }
<a name="l01031"></a>01031 
<a name="l01032"></a><a class="code" href="group__lustreidl.html#ga80949fd91d76a5021e11f4ac3c17e682">01032</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga80949fd91d76a5021e11f4ac3c17e682">lustre_handle_copy</a>(<span class="keyword">struct</span> <a class="code" href="structlustre__handle.html">lustre_handle</a> *tgt,
<a name="l01033"></a>01033                                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlustre__handle.html">lustre_handle</a> *src)
<a name="l01034"></a>01034 {
<a name="l01035"></a>01035         tgt-&gt;<a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">cookie</a> = src-&gt;<a class="code" href="structlustre__handle.html#a735d65d1a27d9cafdc17245e4574000a">cookie</a>;
<a name="l01036"></a>01036 }
<a name="l01037"></a>01037 
<a name="l01038"></a><a class="code" href="structlustre__handle__array.html">01038</a> <span class="keyword">struct </span><a class="code" href="structlustre__handle__array.html">lustre_handle_array</a> {
<a name="l01039"></a><a class="code" href="structlustre__handle__array.html#a550331cb981ace08068164ef2cb04025">01039</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>            <a class="code" href="structlustre__handle__array.html#a550331cb981ace08068164ef2cb04025">count</a>;
<a name="l01040"></a><a class="code" href="structlustre__handle__array.html#af5475adaa3fb5d338ecd9b36c24e5b5a">01040</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a>    <a class="code" href="structlustre__handle__array.html#af5475adaa3fb5d338ecd9b36c24e5b5a">handles</a>[0];
<a name="l01041"></a>01041 };
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 <span class="comment">/* flags for lm_flags */</span>
<a name="l01044"></a><a class="code" href="group__lustreidl.html#ga3f2d351b95a850943970bf309b7dc61f">01044</a> <span class="preprocessor">#define MSGHDR_AT_SUPPORT               0x1</span>
<a name="l01045"></a><a class="code" href="group__lustreidl.html#ga2b44508eccd40623a24d4bf99b881c57">01045</a> <span class="preprocessor"></span><span class="preprocessor">#define MSGHDR_CKSUM_INCOMPAT18         0x2</span>
<a name="l01046"></a>01046 <span class="preprocessor"></span>
<a name="l01047"></a><a class="code" href="group__lustreidl.html#ga89e700d146c2a3e6d25089bdf59fb0b9">01047</a> <span class="preprocessor">#define lustre_msg lustre_msg_v2</span>
<a name="l01048"></a>01048 <span class="preprocessor"></span><span class="comment">/* we depend on this structure to be 8-byte aligned */</span>
<a name="l01049"></a>01049 <span class="comment">/* this type is only endian-adjusted in lustre_unpack_msg() */</span>
<a name="l01050"></a><a class="code" href="structlustre__msg__v2.html">01050</a> <span class="keyword">struct </span><a class="code" href="structlustre__msg__v2.html">lustre_msg_v2</a> {
<a name="l01051"></a><a class="code" href="structlustre__msg__v2.html#a167ed64e146e829e87fb5b1053710e8f">01051</a>         __u32 <a class="code" href="structlustre__msg__v2.html#a167ed64e146e829e87fb5b1053710e8f">lm_bufcount</a>;
<a name="l01052"></a><a class="code" href="structlustre__msg__v2.html#a9227f7537b44687f631625944b0609d7">01052</a>         __u32 <a class="code" href="structlustre__msg__v2.html#a9227f7537b44687f631625944b0609d7">lm_secflvr</a>;
<a name="l01053"></a><a class="code" href="structlustre__msg__v2.html#a27b4fa911830bfadb492098308a557af">01053</a>         __u32 <a class="code" href="structlustre__msg__v2.html#a27b4fa911830bfadb492098308a557af">lm_magic</a>;
<a name="l01054"></a><a class="code" href="structlustre__msg__v2.html#a1604394cf4092ad85baaf9ebb34f1e5d">01054</a>         __u32 <a class="code" href="structlustre__msg__v2.html#a1604394cf4092ad85baaf9ebb34f1e5d">lm_repsize</a>;
<a name="l01055"></a><a class="code" href="structlustre__msg__v2.html#a04f127d509818748cc27548bd8874af7">01055</a>         __u32 <a class="code" href="structlustre__msg__v2.html#a04f127d509818748cc27548bd8874af7">lm_cksum</a>;
<a name="l01056"></a><a class="code" href="structlustre__msg__v2.html#af3b557908a6e7b59fca49edad23295cc">01056</a>         __u32 <a class="code" href="structlustre__msg__v2.html#af3b557908a6e7b59fca49edad23295cc">lm_flags</a>;
<a name="l01057"></a><a class="code" href="structlustre__msg__v2.html#a8225c49bd3fe66714cc6c8a188d643bb">01057</a>         __u32 <a class="code" href="structlustre__msg__v2.html#a8225c49bd3fe66714cc6c8a188d643bb">lm_padding_2</a>;
<a name="l01058"></a><a class="code" href="structlustre__msg__v2.html#af97e1db7cf1fb0b60e23558e74ba5829">01058</a>         __u32 <a class="code" href="structlustre__msg__v2.html#af97e1db7cf1fb0b60e23558e74ba5829">lm_padding_3</a>;
<a name="l01059"></a><a class="code" href="structlustre__msg__v2.html#ad8278e717a21ee38d132268058ee05d8">01059</a>         __u32 <a class="code" href="structlustre__msg__v2.html#ad8278e717a21ee38d132268058ee05d8">lm_buflens</a>[0];
<a name="l01060"></a>01060 };
<a name="l01061"></a>01061 
<a name="l01062"></a>01062 <span class="comment">/* without gss, ptlrpc_body is put at the first buffer. */</span>
<a name="l01063"></a><a class="code" href="group__lustreidl.html#gadca7b584108331a8f44bc466f16d60cc">01063</a> <span class="preprocessor">#define PTLRPC_NUM_VERSIONS     4</span>
<a name="l01064"></a><a class="code" href="structptlrpc__body__v3.html">01064</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structptlrpc__body__v3.html">ptlrpc_body_v3</a> {
<a name="l01065"></a><a class="code" href="structptlrpc__body__v3.html#a37122f6be2a46146f22fe8c46fa61624">01065</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structptlrpc__body__v3.html#a37122f6be2a46146f22fe8c46fa61624">pb_handle</a>;
<a name="l01066"></a><a class="code" href="structptlrpc__body__v3.html#a7f9247f5aa5e67a64e14e2bdf0ddce8d">01066</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#a7f9247f5aa5e67a64e14e2bdf0ddce8d">pb_type</a>;
<a name="l01067"></a><a class="code" href="structptlrpc__body__v3.html#a52aaaf49dae8e509feaca047604ddfc8">01067</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#a52aaaf49dae8e509feaca047604ddfc8">pb_version</a>;
<a name="l01068"></a><a class="code" href="structptlrpc__body__v3.html#acdb4e4a8136203bb1dcbfdbd802633f6">01068</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#acdb4e4a8136203bb1dcbfdbd802633f6">pb_opc</a>;
<a name="l01069"></a><a class="code" href="structptlrpc__body__v3.html#a9a904fe2961023a0052b3a3874086b2a">01069</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#a9a904fe2961023a0052b3a3874086b2a">pb_status</a>;
<a name="l01070"></a><a class="code" href="structptlrpc__body__v3.html#ac8f7da3d0e939c0b45f5c561f8ba247a">01070</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#ac8f7da3d0e939c0b45f5c561f8ba247a">pb_last_xid</a>; <span class="comment">/* highest replied XID without lower unreplied XID */</span>
<a name="l01071"></a><a class="code" href="structptlrpc__body__v3.html#a96e4ed51b79c4c3a09ebe117f133a15d">01071</a>         __u16 <a class="code" href="structptlrpc__body__v3.html#a96e4ed51b79c4c3a09ebe117f133a15d">pb_tag</a>;      <span class="comment">/* virtual slot idx for multiple modifying RPCs */</span>
<a name="l01072"></a><a class="code" href="structptlrpc__body__v3.html#a58437d6720c43ed308fe5cd9b7665e76">01072</a>         __u16 <a class="code" href="structptlrpc__body__v3.html#a58437d6720c43ed308fe5cd9b7665e76">pb_padding0</a>;
<a name="l01073"></a><a class="code" href="structptlrpc__body__v3.html#abb8b154262b9fe29227cd9e4b49b97e0">01073</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#abb8b154262b9fe29227cd9e4b49b97e0">pb_padding1</a>;
<a name="l01074"></a><a class="code" href="structptlrpc__body__v3.html#a9204ff15eb75fa1c395ede11678e563a">01074</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#a9204ff15eb75fa1c395ede11678e563a">pb_last_committed</a>;
<a name="l01075"></a><a class="code" href="structptlrpc__body__v3.html#aeb010dc92b002e11cf333c8b4927e89d">01075</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#aeb010dc92b002e11cf333c8b4927e89d">pb_transno</a>;
<a name="l01076"></a><a class="code" href="structptlrpc__body__v3.html#a2afdd5f9d559872d465a9fd7207a2911">01076</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#a2afdd5f9d559872d465a9fd7207a2911">pb_flags</a>;
<a name="l01077"></a><a class="code" href="structptlrpc__body__v3.html#a4e8663d5d671b8ce72e4bb1fad0fef06">01077</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#a4e8663d5d671b8ce72e4bb1fad0fef06">pb_op_flags</a>;
<a name="l01078"></a><a class="code" href="structptlrpc__body__v3.html#ace58a68564f228bf248cd85c287e5097">01078</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#ace58a68564f228bf248cd85c287e5097">pb_conn_cnt</a>;
<a name="l01079"></a><a class="code" href="structptlrpc__body__v3.html#a2088ac83d84f4219f93d6a9d75c055c1">01079</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#a2088ac83d84f4219f93d6a9d75c055c1">pb_timeout</a>;  <span class="comment">/* for req, the deadline, for rep, the service est */</span>
<a name="l01080"></a><a class="code" href="structptlrpc__body__v3.html#aa1a6966c0eaf29ed10ff44e3e2466d3f">01080</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#aa1a6966c0eaf29ed10ff44e3e2466d3f">pb_service_time</a>; <span class="comment">/* for rep, actual service time */</span>
<a name="l01081"></a><a class="code" href="structptlrpc__body__v3.html#aaed5e40439a4986103ae6a4cc230a715">01081</a>         __u32 <a class="code" href="structptlrpc__body__v3.html#aaed5e40439a4986103ae6a4cc230a715">pb_limit</a>;
<a name="l01082"></a><a class="code" href="structptlrpc__body__v3.html#a5ba0e7c677382c9d478d5f61aaefee4f">01082</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#a5ba0e7c677382c9d478d5f61aaefee4f">pb_slv</a>;
<a name="l01083"></a>01083         <span class="comment">/* VBR: pre-versions */</span>
<a name="l01084"></a><a class="code" href="structptlrpc__body__v3.html#a9b1a2020e51f0da30a5a44d59dd3b875">01084</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#a9b1a2020e51f0da30a5a44d59dd3b875">pb_pre_versions</a>[<a class="code" href="group__lustreidl.html#gadca7b584108331a8f44bc466f16d60cc">PTLRPC_NUM_VERSIONS</a>];
<a name="l01085"></a><a class="code" href="structptlrpc__body__v3.html#a87b7dfbfeb3e9c39a10a2113e560f9c0">01085</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#a87b7dfbfeb3e9c39a10a2113e560f9c0" title="match bits for bulk request">pb_mbits</a>; 
<a name="l01086"></a>01086         <span class="comment">/* padding for future needs */</span>
<a name="l01087"></a><a class="code" href="structptlrpc__body__v3.html#aa65b61a72f3112bd8a0df3023f612f6f">01087</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#aa65b61a72f3112bd8a0df3023f612f6f">pb_padding64_0</a>;
<a name="l01088"></a><a class="code" href="structptlrpc__body__v3.html#ae13af6adf6b50ceb844dfec699857455">01088</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#ae13af6adf6b50ceb844dfec699857455">pb_padding64_1</a>;
<a name="l01089"></a><a class="code" href="structptlrpc__body__v3.html#aa2088e71057067959562d0ae511af266">01089</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v3.html#aa2088e71057067959562d0ae511af266">pb_padding64_2</a>;
<a name="l01090"></a><a class="code" href="structptlrpc__body__v3.html#af39324a4a73898dd939c9c9ba2f79d82">01090</a>         <span class="keywordtype">char</span>  <a class="code" href="structptlrpc__body__v3.html#af39324a4a73898dd939c9c9ba2f79d82">pb_jobid</a>[<a class="code" href="group__lustreuser.html#ga0c0d05b1c505aa119e08771fbc1f0f72">LUSTRE_JOBID_SIZE</a>];
<a name="l01091"></a>01091 };
<a name="l01092"></a><a class="code" href="group__lustreidl.html#ga56927184b0ee7605c8d10e55ee50da69">01092</a> <span class="preprocessor">#define ptlrpc_body     ptlrpc_body_v3</span>
<a name="l01093"></a>01093 <span class="preprocessor"></span>
<a name="l01094"></a><a class="code" href="structptlrpc__body__v2.html">01094</a> <span class="keyword">struct </span><a class="code" href="structptlrpc__body__v2.html">ptlrpc_body_v2</a> {
<a name="l01095"></a><a class="code" href="structptlrpc__body__v2.html#a89aac71f0d727e57570b713025ca5412">01095</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structptlrpc__body__v2.html#a89aac71f0d727e57570b713025ca5412">pb_handle</a>;
<a name="l01096"></a><a class="code" href="structptlrpc__body__v2.html#a7c0a781d11c3d918e28c53e9a161ac66">01096</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#a7c0a781d11c3d918e28c53e9a161ac66">pb_type</a>;
<a name="l01097"></a><a class="code" href="structptlrpc__body__v2.html#a94c8531931b785bcd78f7257bfb8f483">01097</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#a94c8531931b785bcd78f7257bfb8f483">pb_version</a>;
<a name="l01098"></a><a class="code" href="structptlrpc__body__v2.html#ad5232220ad65b58d5f4c593cc135558c">01098</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#ad5232220ad65b58d5f4c593cc135558c">pb_opc</a>;
<a name="l01099"></a><a class="code" href="structptlrpc__body__v2.html#a6410a3875699eb852a39455770d4326c">01099</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#a6410a3875699eb852a39455770d4326c">pb_status</a>;
<a name="l01100"></a><a class="code" href="structptlrpc__body__v2.html#a193a5409162daf1a89f758f725b1e0de">01100</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a193a5409162daf1a89f758f725b1e0de">pb_last_xid</a>; <span class="comment">/* highest replied XID without lower unreplied XID */</span>
<a name="l01101"></a><a class="code" href="structptlrpc__body__v2.html#afa3cc81d293beba8953c1568a2989c86">01101</a>         __u16 <a class="code" href="structptlrpc__body__v2.html#afa3cc81d293beba8953c1568a2989c86">pb_tag</a>;      <span class="comment">/* virtual slot idx for multiple modifying RPCs */</span>
<a name="l01102"></a><a class="code" href="structptlrpc__body__v2.html#a4c66bfd653070f97dbd0d36ee61a3d9e">01102</a>         __u16 <a class="code" href="structptlrpc__body__v2.html#a4c66bfd653070f97dbd0d36ee61a3d9e">pb_padding0</a>;
<a name="l01103"></a><a class="code" href="structptlrpc__body__v2.html#afe8c14680b40c60826940d65fa7e562a">01103</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#afe8c14680b40c60826940d65fa7e562a">pb_padding1</a>;
<a name="l01104"></a><a class="code" href="structptlrpc__body__v2.html#a97e5a8bb3a182f6ec83b851330244724">01104</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a97e5a8bb3a182f6ec83b851330244724">pb_last_committed</a>;
<a name="l01105"></a><a class="code" href="structptlrpc__body__v2.html#a5f143b4d61c13959192bb58464a29491">01105</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a5f143b4d61c13959192bb58464a29491">pb_transno</a>;
<a name="l01106"></a><a class="code" href="structptlrpc__body__v2.html#a4e81cf72b08837c3d85a8431bd275b59">01106</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#a4e81cf72b08837c3d85a8431bd275b59">pb_flags</a>;
<a name="l01107"></a><a class="code" href="structptlrpc__body__v2.html#acef1f44192c905ab79aadd49cef690cd">01107</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#acef1f44192c905ab79aadd49cef690cd">pb_op_flags</a>;
<a name="l01108"></a><a class="code" href="structptlrpc__body__v2.html#aaac9c13f3211d110d50f28f27b35398e">01108</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#aaac9c13f3211d110d50f28f27b35398e">pb_conn_cnt</a>;
<a name="l01109"></a><a class="code" href="structptlrpc__body__v2.html#ac8b1a0313cb6c73994a12af6ab2b3fef">01109</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#ac8b1a0313cb6c73994a12af6ab2b3fef">pb_timeout</a>;  <span class="comment">/* for req, the deadline, for rep, the service est */</span>
<a name="l01110"></a><a class="code" href="structptlrpc__body__v2.html#a8449861a3b27808bc372e062eeff4131">01110</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#a8449861a3b27808bc372e062eeff4131">pb_service_time</a>; <span class="comment">/* for rep, actual service time, also used for</span>
<a name="l01111"></a>01111 <span class="comment">                                  net_latency of req */</span>
<a name="l01112"></a><a class="code" href="structptlrpc__body__v2.html#ad5aedb624e075f58c226d402755ac9bb">01112</a>         __u32 <a class="code" href="structptlrpc__body__v2.html#ad5aedb624e075f58c226d402755ac9bb">pb_limit</a>;
<a name="l01113"></a><a class="code" href="structptlrpc__body__v2.html#a662fdc71fe47253d175f3b83120c9166">01113</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a662fdc71fe47253d175f3b83120c9166">pb_slv</a>;
<a name="l01114"></a>01114         <span class="comment">/* VBR: pre-versions */</span>
<a name="l01115"></a><a class="code" href="structptlrpc__body__v2.html#af8e6419370f2916060e767636310a8c3">01115</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#af8e6419370f2916060e767636310a8c3">pb_pre_versions</a>[<a class="code" href="group__lustreidl.html#gadca7b584108331a8f44bc466f16d60cc">PTLRPC_NUM_VERSIONS</a>];
<a name="l01116"></a><a class="code" href="structptlrpc__body__v2.html#a29cf9d652892ce480416f228ce7a422a">01116</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a29cf9d652892ce480416f228ce7a422a" title="unused in V2">pb_mbits</a>; 
<a name="l01117"></a>01117         <span class="comment">/* padding for future needs */</span>
<a name="l01118"></a><a class="code" href="structptlrpc__body__v2.html#a4b43a933739b2881a4b90121b60d44e3">01118</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a4b43a933739b2881a4b90121b60d44e3">pb_padding64_0</a>;
<a name="l01119"></a><a class="code" href="structptlrpc__body__v2.html#ac0a53d2a3cc725df0c0fe95b24b41013">01119</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#ac0a53d2a3cc725df0c0fe95b24b41013">pb_padding64_1</a>;
<a name="l01120"></a><a class="code" href="structptlrpc__body__v2.html#a94fdafa0906550902a063754d9417c39">01120</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structptlrpc__body__v2.html#a94fdafa0906550902a063754d9417c39">pb_padding64_2</a>;
<a name="l01121"></a>01121 };
<a name="l01122"></a>01122 
<a name="l01123"></a>01123 <span class="comment">/* message body offset for lustre_msg_v2 */</span>
<a name="l01124"></a>01124 <span class="comment">/* ptlrpc body offset in all request/reply messages */</span>
<a name="l01125"></a><a class="code" href="group__lustreidl.html#gad7ddfc6368a84f8cf442c0d4aabcbdc8">01125</a> <span class="preprocessor">#define MSG_PTLRPC_BODY_OFF             0</span>
<a name="l01126"></a>01126 <span class="preprocessor"></span>
<a name="l01127"></a>01127 <span class="comment">/* normal request/reply message record offset */</span>
<a name="l01128"></a><a class="code" href="group__lustreidl.html#ga7be349782215f6ab5a21a0f80faefcf1">01128</a> <span class="preprocessor">#define REQ_REC_OFF                     1</span>
<a name="l01129"></a><a class="code" href="group__lustreidl.html#gae6879b479faa1c7c592fe360609876f1">01129</a> <span class="preprocessor"></span><span class="preprocessor">#define REPLY_REC_OFF                   1</span>
<a name="l01130"></a>01130 <span class="preprocessor"></span>
<a name="l01131"></a>01131 <span class="comment">/* ldlm request message body offset */</span>
<a name="l01132"></a><a class="code" href="group__lustreidl.html#gaeb090725d67e0667882bb5bcb90c27e9">01132</a> <span class="preprocessor">#define DLM_LOCKREQ_OFF                 1 </span><span class="comment">/* lockreq offset */</span>
<a name="l01133"></a><a class="code" href="group__lustreidl.html#ga15c3b621d68d7f53aefcdec1725153e7">01133</a> <span class="preprocessor">#define DLM_REQ_REC_OFF                 2 </span><span class="comment">/* normal dlm request record offset */</span>
<a name="l01134"></a>01134 
<a name="l01135"></a>01135 <span class="comment">/* ldlm intent lock message body offset */</span>
<a name="l01136"></a><a class="code" href="group__lustreidl.html#gae48181cec1d1dfe44802dac4003acebf">01136</a> <span class="preprocessor">#define DLM_INTENT_IT_OFF               2 </span><span class="comment">/* intent lock it offset */</span>
<a name="l01137"></a><a class="code" href="group__lustreidl.html#gaeaa5056e1aa1a03b517a8514bb523cb2">01137</a> <span class="preprocessor">#define DLM_INTENT_REC_OFF              3 </span><span class="comment">/* intent lock record offset */</span>
<a name="l01138"></a>01138 
<a name="l01139"></a>01139 <span class="comment">/* ldlm reply message body offset */</span>
<a name="l01140"></a><a class="code" href="group__lustreidl.html#gade06a3f1785d73658f2d9e66bdbbcd4b">01140</a> <span class="preprocessor">#define DLM_LOCKREPLY_OFF               1 </span><span class="comment">/* lockrep offset */</span>
<a name="l01141"></a><a class="code" href="group__lustreidl.html#gaa97727f0338295944d529eed3445f10e">01141</a> <span class="preprocessor">#define DLM_REPLY_REC_OFF               2 </span><span class="comment">/* reply record offset */</span>
<a name="l01142"></a>01142 
<a name="l01144"></a><a class="code" href="group__lustreidl.html#gafa5c71e7497acfe5dea4f5efd14ef8ec">01144</a> <span class="preprocessor">#define MSG_PTLRPC_HEADER_OFF           31</span>
<a name="l01145"></a>01145 <span class="preprocessor"></span>
<a name="l01146"></a>01146 <span class="comment">/* Flags that are operation-specific go in the top 16 bits. */</span>
<a name="l01147"></a><a class="code" href="group__lustreidl.html#ga3e8babd0ae5c012a651f89c23908110a">01147</a> <span class="preprocessor">#define MSG_OP_FLAG_MASK   0xffff0000</span>
<a name="l01148"></a><a class="code" href="group__lustreidl.html#ga277490d17be6acfa3d7d89884e6ba8bd">01148</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_OP_FLAG_SHIFT  16</span>
<a name="l01149"></a>01149 <span class="preprocessor"></span>
<a name="l01150"></a>01150 <span class="comment">/* Flags that apply to all requests are in the bottom 16 bits */</span>
<a name="l01151"></a><a class="code" href="group__lustreidl.html#ga1df57268180a6a4acc4e0b12392d3aae">01151</a> <span class="preprocessor">#define MSG_GEN_FLAG_MASK     0x0000ffff</span>
<a name="l01152"></a><a class="code" href="group__lustreidl.html#ga0c99a444ebedc0d82ea2a92b59a61ca2">01152</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_LAST_REPLAY           0x0001</span>
<a name="l01153"></a><a class="code" href="group__lustreidl.html#ga7f730b08ce34af6895312a959831a719">01153</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_RESENT                0x0002</span>
<a name="l01154"></a><a class="code" href="group__lustreidl.html#gab6581834223318f6050e245588723c96">01154</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_REPLAY                0x0004</span>
<a name="l01155"></a>01155 <span class="preprocessor"></span><span class="comment">/* #define MSG_AT_SUPPORT         0x0008</span>
<a name="l01156"></a>01156 <span class="comment"> * This was used in early prototypes of adaptive timeouts, and while there</span>
<a name="l01157"></a>01157 <span class="comment"> * shouldn&apos;t be any users of that code there also isn&apos;t a need for using this</span>
<a name="l01158"></a>01158 <span class="comment"> * bits. Defer usage until at least 1.10 to avoid potential conflict. */</span>
<a name="l01159"></a><a class="code" href="group__lustreidl.html#gab5b836bfd68fb403d81ec282af6d43f0">01159</a> <span class="preprocessor">#define MSG_DELAY_REPLAY          0x0010</span>
<a name="l01160"></a><a class="code" href="group__lustreidl.html#ga124b633b60612df4f0d4a88ee9f4edfa">01160</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_VERSION_REPLAY        0x0020</span>
<a name="l01161"></a><a class="code" href="group__lustreidl.html#ga58c5a8d05a96b9e39636f2b9e46e540b">01161</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_REQ_REPLAY_DONE       0x0040</span>
<a name="l01162"></a><a class="code" href="group__lustreidl.html#gae966d47b53fb59afa92ba2d0d9163bfc">01162</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_LOCK_REPLAY_DONE      0x0080</span>
<a name="l01163"></a>01163 <span class="preprocessor"></span>
<a name="l01164"></a>01164 <span class="comment">/*</span>
<a name="l01165"></a>01165 <span class="comment"> * Flags for all connect opcodes (MDS_CONNECT, OST_CONNECT)</span>
<a name="l01166"></a>01166 <span class="comment"> */</span>
<a name="l01167"></a>01167 
<a name="l01168"></a><a class="code" href="group__lustreidl.html#ga8c7d545bae007000d003d819f604da4d">01168</a> <span class="preprocessor">#define MSG_CONNECT_RECOVERING  0x00000001</span>
<a name="l01169"></a><a class="code" href="group__lustreidl.html#gafa1eed48737489ac8950720ff8017dfd">01169</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_CONNECT_RECONNECT   0x00000002</span>
<a name="l01170"></a><a class="code" href="group__lustreidl.html#ga733021643846f7701fd1e252f3f389f0">01170</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_CONNECT_REPLAYABLE  0x00000004</span>
<a name="l01171"></a>01171 <span class="preprocessor"></span><span class="comment">//#define MSG_CONNECT_PEER        0x8</span>
<a name="l01172"></a><a class="code" href="group__lustreidl.html#ga0bea3814ada7dfc40c16d4a8a1cf2db8">01172</a> <span class="preprocessor">#define MSG_CONNECT_LIBCLIENT   0x00000010</span>
<a name="l01173"></a><a class="code" href="group__lustreidl.html#ga8d06cec5ed8fa9670b99cdedf8ab79be">01173</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_CONNECT_INITIAL     0x00000020</span>
<a name="l01174"></a><a class="code" href="group__lustreidl.html#ga337ff18b4c15652ede373c680ae3d71d">01174</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_CONNECT_ASYNC       0x00000040</span>
<a name="l01175"></a><a class="code" href="group__lustreidl.html#gab38c8d430505444805562ac9e33cdad7">01175</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_CONNECT_NEXT_VER    0x00000080 </span><span class="comment">/* use next version of lustre_msg */</span>
<a name="l01176"></a><a class="code" href="group__lustreidl.html#gadcb903a173b5f90556bb2d35ba96cd76">01176</a> <span class="preprocessor">#define MSG_CONNECT_TRANSNO     0x00000100 </span><span class="comment">/* report transno */</span>
<a name="l01177"></a>01177 
<a name="l01178"></a>01178 <span class="comment">/* Connect flags */</span>
<a name="l01179"></a><a class="code" href="group__lustreidl.html#ga0771a5f591477827ba5730f41da0b866">01179</a> <span class="preprocessor">#define OBD_CONNECT_RDONLY                0x1ULL </span><span class="comment">/*client has read-only access*/</span>
<a name="l01180"></a><a class="code" href="group__lustreidl.html#ga50b199dc03333fade0ddc4b9f8be061b">01180</a> <span class="preprocessor">#define OBD_CONNECT_INDEX                 0x2ULL </span><span class="comment">/*connect specific LOV idx */</span>
<a name="l01181"></a><a class="code" href="group__lustreidl.html#gaecd440aa08dcff8b5c7eb547668032b9">01181</a> <span class="preprocessor">#define OBD_CONNECT_MDS                   0x4ULL </span><span class="comment">/*connect from MDT to OST */</span>
<a name="l01182"></a><a class="code" href="group__lustreidl.html#ga774a90f8a6c324edc7a02ac6eca6f736">01182</a> <span class="preprocessor">#define OBD_CONNECT_GRANT                 0x8ULL </span><span class="comment">/*OSC gets grant at connect */</span>
<a name="l01183"></a><a class="code" href="group__lustreidl.html#gab4e4305bf5a9861a7eca289a6bf0168e">01183</a> <span class="preprocessor">#define OBD_CONNECT_SRVLOCK              0x10ULL </span><span class="comment">/*server takes locks for cli */</span>
<a name="l01184"></a><a class="code" href="group__lustreidl.html#ga0260fee05e21e4b8fd3135f73f98964c">01184</a> <span class="preprocessor">#define OBD_CONNECT_VERSION              0x20ULL </span><span class="comment">/*Lustre versions in ocd */</span>
<a name="l01185"></a><a class="code" href="group__lustreidl.html#ga4e44a11bd5a62ebb6972d14e4e332d3c">01185</a> <span class="preprocessor">#define OBD_CONNECT_REQPORTAL            0x40ULL </span><span class="comment">/*Separate non-IO req portal */</span>
<a name="l01186"></a><a class="code" href="group__lustreidl.html#ga93bab8b46feab6ead022e387b2bc2e0f">01186</a> <span class="preprocessor">#define OBD_CONNECT_ACL                  0x80ULL </span><span class="comment">/*access control lists */</span>
<a name="l01187"></a><a class="code" href="group__lustreidl.html#ga8c4d9002339b86a0a4652ca9bc4f2746">01187</a> <span class="preprocessor">#define OBD_CONNECT_XATTR               0x100ULL </span><span class="comment">/*client use extended attr */</span>
<a name="l01188"></a><a class="code" href="group__lustreidl.html#ga91f9e36bbc0c1186f11bff2a78790d9e">01188</a> <span class="preprocessor">#define OBD_CONNECT_CROW                0x200ULL </span><span class="comment">/*MDS+OST create obj on write*/</span>
<a name="l01189"></a><a class="code" href="group__lustreidl.html#gaccf9e49103b8bd0f9e12ff896d03ed3b">01189</a> <span class="preprocessor">#define OBD_CONNECT_TRUNCLOCK           0x400ULL </span><span class="comment">/*locks on server for punch */</span>
<a name="l01190"></a><a class="code" href="group__lustreidl.html#gad825c0084bcdee59c1996df27b76e1e6">01190</a> <span class="preprocessor">#define OBD_CONNECT_TRANSNO             0x800ULL </span><span class="comment">/*replay sends init transno */</span>
<a name="l01191"></a><a class="code" href="group__lustreidl.html#gabe58aba8499faae7e24f1e106bf315e2">01191</a> <span class="preprocessor">#define OBD_CONNECT_IBITS              0x1000ULL </span><span class="comment">/*support for inodebits locks*/</span>
<a name="l01192"></a><a class="code" href="group__lustreidl.html#gac267c26dca9a0637788a97919fb6411c">01192</a> <span class="preprocessor">#define OBD_CONNECT_JOIN               0x2000ULL </span><span class="comment">/*files can be concatenated.</span>
<a name="l01193"></a>01193 <span class="comment">                                                  *We do not support JOIN FILE</span>
<a name="l01194"></a>01194 <span class="comment">                                                  *anymore, reserve this flags</span>
<a name="l01195"></a>01195 <span class="comment">                                                  *just for preventing such bit</span>
<a name="l01196"></a>01196 <span class="comment">                                                  *to be reused.*/</span>
<a name="l01197"></a><a class="code" href="group__lustreidl.html#gaf9ae81d195dd91d6260676230bb7eeb6">01197</a> <span class="preprocessor">#define OBD_CONNECT_ATTRFID            0x4000ULL </span><span class="comment">/*Server can GetAttr By Fid*/</span>
<a name="l01198"></a><a class="code" href="group__lustreidl.html#ga367444ac098f26ad2df33a32a1d7255f">01198</a> <span class="preprocessor">#define OBD_CONNECT_NODEVOH            0x8000ULL </span><span class="comment">/*No open hndl on specl nodes*/</span>
<a name="l01199"></a><a class="code" href="group__lustreidl.html#ga4dfdd0df06bc23c8d7aa0393e41507a9">01199</a> <span class="preprocessor">#define OBD_CONNECT_RMT_CLIENT        0x10000ULL </span><span class="comment">/*Remote client */</span>
<a name="l01200"></a><a class="code" href="group__lustreidl.html#ga01999b6356d8c203773c3ff9a8ce28da">01200</a> <span class="preprocessor">#define OBD_CONNECT_RMT_CLIENT_FORCE  0x20000ULL </span><span class="comment">/*Remote client by force */</span>
<a name="l01201"></a><a class="code" href="group__lustreidl.html#gae3b83872ac568efe0d50f26996747e35">01201</a> <span class="preprocessor">#define OBD_CONNECT_BRW_SIZE          0x40000ULL </span><span class="comment">/*Max bytes per rpc */</span>
<a name="l01202"></a><a class="code" href="group__lustreidl.html#gaf3985f579923730705fb79f742e33715">01202</a> <span class="preprocessor">#define OBD_CONNECT_QUOTA64           0x80000ULL </span><span class="comment">/*Not used since 2.4 */</span>
<a name="l01203"></a><a class="code" href="group__lustreidl.html#ga15bdfd0789ee92cc6a00a22eeab66c23">01203</a> <span class="preprocessor">#define OBD_CONNECT_MDS_CAPA         0x100000ULL </span><span class="comment">/*MDS capability */</span>
<a name="l01204"></a><a class="code" href="group__lustreidl.html#ga54969c2e98034542a1bbe9eb4163e72b">01204</a> <span class="preprocessor">#define OBD_CONNECT_OSS_CAPA         0x200000ULL </span><span class="comment">/*OSS capability */</span>
<a name="l01205"></a><a class="code" href="group__lustreidl.html#ga8aedd0fe2dafb0142593611a9986db7c">01205</a> <span class="preprocessor">#define OBD_CONNECT_CANCELSET        0x400000ULL </span><span class="comment">/*Early batched cancels. */</span>
<a name="l01206"></a><a class="code" href="group__lustreidl.html#ga7b10ec118492011822fae0112aee2071">01206</a> <span class="preprocessor">#define OBD_CONNECT_SOM              0x800000ULL </span><span class="comment">/*Size on MDS */</span>
<a name="l01207"></a><a class="code" href="group__lustreidl.html#ga8af5c9c4a75fcc93c320fdd8b8b61dfe">01207</a> <span class="preprocessor">#define OBD_CONNECT_AT              0x1000000ULL </span><span class="comment">/*client uses AT */</span>
<a name="l01208"></a><a class="code" href="group__lustreidl.html#gad7c613e0467ffdb2add882ff9c75f8bb">01208</a> <span class="preprocessor">#define OBD_CONNECT_LRU_RESIZE      0x2000000ULL </span><span class="comment">/*LRU resize feature. */</span>
<a name="l01209"></a><a class="code" href="group__lustreidl.html#ga4e72aafbfa545217cc30536aa01995e3">01209</a> <span class="preprocessor">#define OBD_CONNECT_MDS_MDS         0x4000000ULL </span><span class="comment">/*MDS-MDS connection */</span>
<a name="l01210"></a><a class="code" href="group__lustreidl.html#gac4ab629b037b8ab7780299de8c8f4f22">01210</a> <span class="preprocessor">#define OBD_CONNECT_REAL            0x8000000ULL </span><span class="comment">/*real connection */</span>
<a name="l01211"></a><a class="code" href="group__lustreidl.html#ga50d5c5f523eb7025c92e9c94e603f1a3">01211</a> <span class="preprocessor">#define OBD_CONNECT_CHANGE_QS      0x10000000ULL </span><span class="comment">/*Not used since 2.4 */</span>
<a name="l01212"></a><a class="code" href="group__lustreidl.html#ga25c30c40ce2575601a3c2da831db2115">01212</a> <span class="preprocessor">#define OBD_CONNECT_CKSUM          0x20000000ULL </span><span class="comment">/*support several cksum algos*/</span>
<a name="l01213"></a><a class="code" href="group__lustreidl.html#gae4daef108cda97b5ccd7ecd329cb92d0">01213</a> <span class="preprocessor">#define OBD_CONNECT_FID            0x40000000ULL </span><span class="comment">/*FID is supported by server */</span>
<a name="l01214"></a><a class="code" href="group__lustreidl.html#ga65c75a4cd5dbd9f46a6fa6ed65cad4e7">01214</a> <span class="preprocessor">#define OBD_CONNECT_VBR            0x80000000ULL </span><span class="comment">/*version based recovery */</span>
<a name="l01215"></a><a class="code" href="group__lustreidl.html#gacb9c1cd065ae9a8ad1eae3e6a8544d16">01215</a> <span class="preprocessor">#define OBD_CONNECT_LOV_V3        0x100000000ULL </span><span class="comment">/*client supports LOV v3 EA */</span>
<a name="l01216"></a><a class="code" href="group__lustreidl.html#ga25e02ea2e5f6d49208b1927539d201ca">01216</a> <span class="preprocessor">#define OBD_CONNECT_GRANT_SHRINK  0x200000000ULL </span><span class="comment">/* support grant shrink */</span>
<a name="l01217"></a><a class="code" href="group__lustreidl.html#gae9c3050867fa788e7323b0148f4bb54d">01217</a> <span class="preprocessor">#define OBD_CONNECT_SKIP_ORPHAN   0x400000000ULL </span><span class="comment">/* don&apos;t reuse orphan objids */</span>
<a name="l01218"></a><a class="code" href="group__lustreidl.html#gae59a2b9eba9b1184fad4aa4eec604381">01218</a> <span class="preprocessor">#define OBD_CONNECT_MAX_EASIZE    0x800000000ULL </span><span class="comment">/* preserved for large EA */</span>
<a name="l01219"></a><a class="code" href="group__lustreidl.html#ga82cf2142f3efc306c322e81ea36d725b">01219</a> <span class="preprocessor">#define OBD_CONNECT_FULL20       0x1000000000ULL </span><span class="comment">/* it is 2.0 client */</span>
<a name="l01220"></a><a class="code" href="group__lustreidl.html#gaa52f66af0314e073bbd36af2dcbd95fe">01220</a> <span class="preprocessor">#define OBD_CONNECT_LAYOUTLOCK   0x2000000000ULL </span><span class="comment">/* client uses layout lock */</span>
<a name="l01221"></a><a class="code" href="group__lustreidl.html#ga5a6c9038bb0da8337515b837be4e30cb">01221</a> <span class="preprocessor">#define OBD_CONNECT_64BITHASH    0x4000000000ULL </span><span class="comment">/* client supports 64-bits</span>
<a name="l01222"></a>01222 <span class="comment">                                                  * directory hash */</span>
<a name="l01223"></a><a class="code" href="group__lustreidl.html#gad251fc9c8bffd5f3379d6054ffdbf039">01223</a> <span class="preprocessor">#define OBD_CONNECT_MAXBYTES     0x8000000000ULL </span><span class="comment">/* max stripe size */</span>
<a name="l01224"></a><a class="code" href="group__lustreidl.html#ga89aeb8241ba804df1eca46069207163a">01224</a> <span class="preprocessor">#define OBD_CONNECT_IMP_RECOV   0x10000000000ULL </span><span class="comment">/* imp recovery support */</span>
<a name="l01225"></a><a class="code" href="group__lustreidl.html#ga78748a6ce1a8dd1a3e3bf0980bb9b004">01225</a> <span class="preprocessor">#define OBD_CONNECT_JOBSTATS    0x20000000000ULL </span><span class="comment">/* jobid in ptlrpc_body */</span>
<a name="l01226"></a><a class="code" href="group__lustreidl.html#ga80c2130f6306c560a816d67753cac345">01226</a> <span class="preprocessor">#define OBD_CONNECT_UMASK       0x40000000000ULL </span><span class="comment">/* create uses client umask */</span>
<a name="l01227"></a><a class="code" href="group__lustreidl.html#gaf6f29846aba05df5cd59ec5c5838cc90">01227</a> <span class="preprocessor">#define OBD_CONNECT_EINPROGRESS 0x80000000000ULL </span><span class="comment">/* client handles -EINPROGRESS</span>
<a name="l01228"></a>01228 <span class="comment">                                                  * RPC error properly */</span>
<a name="l01229"></a><a class="code" href="group__lustreidl.html#gac0ea5e9bd8ea9e2d0c5e815e751cc6cf">01229</a> <span class="preprocessor">#define OBD_CONNECT_GRANT_PARAM 0x100000000000ULL</span><span class="comment">/* extra grant params used for</span>
<a name="l01230"></a>01230 <span class="comment">                                                  * finer space reservation */</span>
<a name="l01231"></a><a class="code" href="group__lustreidl.html#ga751e9b25ca9a874780944a19e67b1561">01231</a> <span class="preprocessor">#define OBD_CONNECT_FLOCK_OWNER 0x200000000000ULL </span><span class="comment">/* for the fixed 1.8</span>
<a name="l01232"></a>01232 <span class="comment">                                                   * policy and 2.x server */</span>
<a name="l01233"></a><a class="code" href="group__lustreidl.html#gae08a40d357007b4b4c5a634fb685744c">01233</a> <span class="preprocessor">#define OBD_CONNECT_LVB_TYPE    0x400000000000ULL </span><span class="comment">/* variable type of LVB */</span>
<a name="l01234"></a><a class="code" href="group__lustreidl.html#ga5f6fd12075ebce0783a01bf5e5d54962">01234</a> <span class="preprocessor">#define OBD_CONNECT_NANOSEC_TIME 0x800000000000ULL </span><span class="comment">/* nanosecond timestamps */</span>
<a name="l01235"></a><a class="code" href="group__lustreidl.html#ga2cc29f654f7faafdf9fa7a3da778d976">01235</a> <span class="preprocessor">#define OBD_CONNECT_LIGHTWEIGHT 0x1000000000000ULL</span><span class="comment">/* lightweight connection */</span>
<a name="l01236"></a><a class="code" href="group__lustreidl.html#ga2b5af2deac0a601efb49ef1e185de94b">01236</a> <span class="preprocessor">#define OBD_CONNECT_SHORTIO     0x2000000000000ULL</span><span class="comment">/* short io */</span>
<a name="l01237"></a><a class="code" href="group__lustreidl.html#gae7a8e37994e179864a3657505999a10b">01237</a> <span class="preprocessor">#define OBD_CONNECT_PINGLESS    0x4000000000000ULL</span><span class="comment">/* pings not required */</span>
<a name="l01238"></a><a class="code" href="group__lustreidl.html#ga9d8dba40f627e0203b47c8a2b70f47cb">01238</a> <span class="preprocessor">#define OBD_CONNECT_FLOCK_DEAD  0x8000000000000ULL</span><span class="comment">/* improved flock deadlock detection */</span>
<a name="l01239"></a><a class="code" href="group__lustreidl.html#ga31a62bd23596f3bfd937d7b38974ea4f">01239</a> <span class="preprocessor">#define OBD_CONNECT_DISP_STRIPE 0x10000000000000ULL</span><span class="comment">/* create stripe disposition*/</span>
<a name="l01240"></a><a class="code" href="group__lustreidl.html#ga2697d7997d2d17e40ccc5a21047f3c9f">01240</a> <span class="preprocessor">#define OBD_CONNECT_OPEN_BY_FID 0x20000000000000ULL </span><span class="comment">/* open by fid won&apos;t pack</span>
<a name="l01241"></a>01241 <span class="comment">                                                       name in request */</span>
<a name="l01242"></a><a class="code" href="group__lustreidl.html#ga4e98470eb3a7da2bac2cea0af8dcf572">01242</a> <span class="preprocessor">#define OBD_CONNECT_LFSCK      0x40000000000000ULL</span><span class="comment">/* support online LFSCK */</span>
<a name="l01243"></a><a class="code" href="group__lustreidl.html#gaa4667a29b48e20f74b10515bbb5195c8">01243</a> <span class="preprocessor">#define OBD_CONNECT_UNLINK_CLOSE 0x100000000000000ULL</span><span class="comment">/* close file in unlink */</span>
<a name="l01244"></a><a class="code" href="group__lustreidl.html#ga6602fc82ea0e11fa5946c8cdf802550d">01244</a> <span class="preprocessor">#define OBD_CONNECT_MULTIMODRPCS 0x200000000000000ULL </span><span class="comment">/* support multiple modify</span>
<a name="l01245"></a>01245 <span class="comment">                                                         RPCs in parallel */</span>
<a name="l01246"></a><a class="code" href="group__lustreidl.html#ga46a1fd92cfe553a62ea70ebed7dd5b38">01246</a> <span class="preprocessor">#define OBD_CONNECT_DIR_STRIPE   0x400000000000000ULL </span><span class="comment">/* striped DNE dir */</span>
<a name="l01247"></a><a class="code" href="group__lustreidl.html#ga64842ab7419fac623e64afea3203c25a">01247</a> <span class="preprocessor">#define OBD_CONNECT_SUBTREE     0x800000000000000ULL </span><span class="comment">/* fileset mount */</span>
<a name="l01248"></a><a class="code" href="group__lustreidl.html#ga1afc21bbc113a752f20746c916207de1">01248</a> <span class="preprocessor">#define OBD_CONNECT_LOCK_AHEAD   0x1000000000000000ULL </span><span class="comment">/* lock ahead */</span>
<a name="l01249"></a>01249 
<a name="l01250"></a><a class="code" href="group__lustreidl.html#ga456effb777dd41a46a6288fd71193f5c">01250</a> <span class="preprocessor">#define OBD_CONNECT_BULK_MBITS   0x2000000000000000ULL</span>
<a name="l01251"></a><a class="code" href="group__lustreidl.html#ga2bc46663870e579050a17a2346149874">01251</a> <span class="preprocessor"></span><span class="preprocessor">#define OBD_CONNECT_OBDOPACK     0x4000000000000000ULL </span><span class="comment">/* compact OUT obdo */</span>
<a name="l01252"></a><a class="code" href="group__lustreidl.html#gaf225799e6a152fa01e31609931fdb52c">01252</a> <span class="preprocessor">#define OBD_CONNECT_FLAGS2       0x8000000000000000ULL </span><span class="comment">/* second flags word */</span>
<a name="l01253"></a>01253 <span class="comment">/* XXX README XXX:</span>
<a name="l01254"></a>01254 <span class="comment"> * Please DO NOT add flag values here before first ensuring that this same</span>
<a name="l01255"></a>01255 <span class="comment"> * flag value is not in use on some other branch.  Please clear any such</span>
<a name="l01256"></a>01256 <span class="comment"> * changes with senior engineers before starting to use a new flag.  Then,</span>
<a name="l01257"></a>01257 <span class="comment"> * submit a small patch against EVERY branch that ONLY adds the new flag,</span>
<a name="l01258"></a>01258 <span class="comment"> * updates obd_connect_names[] for lprocfs_rd_connect_flags(), adds the</span>
<a name="l01259"></a>01259 <span class="comment"> * flag to check_obd_connect_data(), and updates wiretests accordingly, so it</span>
<a name="l01260"></a>01260 <span class="comment"> * can be approved and landed easily to reserve the flag for future use. */</span>
<a name="l01261"></a>01261 
<a name="l01262"></a>01262 <span class="comment">/* The MNE_SWAB flag is overloading the MDS_MDS bit only for the MGS</span>
<a name="l01263"></a>01263 <span class="comment"> * connection.  It is a temporary bug fix for Imperative Recovery interop</span>
<a name="l01264"></a>01264 <span class="comment"> * between 2.2 and 2.3 x86/ppc nodes, and can be removed when interop for</span>
<a name="l01265"></a>01265 <span class="comment"> * 2.2 clients/servers is no longer needed.  LU-1252/LU-1644. */</span>
<a name="l01266"></a><a class="code" href="group__lustreidl.html#gaa1e86dcb1ff8ae4d9e98484759197b59">01266</a> <span class="preprocessor">#define OBD_CONNECT_MNE_SWAB             OBD_CONNECT_MDS_MDS</span>
<a name="l01267"></a>01267 <span class="preprocessor"></span>
<a name="l01268"></a><a class="code" href="group__lustreidl.html#gaba43b45d10bb56d928c2d650da2ef860">01268</a> <span class="preprocessor">#define OCD_HAS_FLAG(ocd, flg)  \</span>
<a name="l01269"></a>01269 <span class="preprocessor">        (!!((ocd)-&gt;ocd_connect_flags &amp; OBD_CONNECT_##flg))</span>
<a name="l01270"></a>01270 <span class="preprocessor"></span>
<a name="l01271"></a>01271 
<a name="l01272"></a>01272 <span class="preprocessor">#ifdef HAVE_LRU_RESIZE_SUPPORT</span>
<a name="l01273"></a>01273 <span class="preprocessor"></span><span class="preprocessor">#define LRU_RESIZE_CONNECT_FLAG OBD_CONNECT_LRU_RESIZE</span>
<a name="l01274"></a>01274 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l01275"></a><a class="code" href="group__lustreidl.html#gaf1fb449a7a6312846a500e3db7ecdf11">01275</a> <span class="preprocessor"></span><span class="preprocessor">#define LRU_RESIZE_CONNECT_FLAG 0</span>
<a name="l01276"></a>01276 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01277"></a>01277 <span class="preprocessor"></span>
<a name="l01278"></a><a class="code" href="group__lustreidl.html#ga0e6fb23b5eecd63bdfeafa7736589285">01278</a> <span class="preprocessor">#define MDT_CONNECT_SUPPORTED  (OBD_CONNECT_RDONLY | OBD_CONNECT_VERSION | \</span>
<a name="l01279"></a>01279 <span class="preprocessor">                                OBD_CONNECT_ACL | OBD_CONNECT_XATTR | \</span>
<a name="l01280"></a>01280 <span class="preprocessor">                                OBD_CONNECT_IBITS | \</span>
<a name="l01281"></a>01281 <span class="preprocessor">                                OBD_CONNECT_NODEVOH | OBD_CONNECT_ATTRFID | \</span>
<a name="l01282"></a>01282 <span class="preprocessor">                                OBD_CONNECT_CANCELSET | OBD_CONNECT_AT | \</span>
<a name="l01283"></a>01283 <span class="preprocessor">                                OBD_CONNECT_RMT_CLIENT | \</span>
<a name="l01284"></a>01284 <span class="preprocessor">                                OBD_CONNECT_RMT_CLIENT_FORCE | \</span>
<a name="l01285"></a>01285 <span class="preprocessor">                                OBD_CONNECT_BRW_SIZE | OBD_CONNECT_MDS_MDS | \</span>
<a name="l01286"></a>01286 <span class="preprocessor">                                OBD_CONNECT_FID | LRU_RESIZE_CONNECT_FLAG | \</span>
<a name="l01287"></a>01287 <span class="preprocessor">                                OBD_CONNECT_VBR | OBD_CONNECT_LOV_V3 | \</span>
<a name="l01288"></a>01288 <span class="preprocessor">                                OBD_CONNECT_FULL20 | \</span>
<a name="l01289"></a>01289 <span class="preprocessor">                                OBD_CONNECT_64BITHASH | OBD_CONNECT_JOBSTATS | \</span>
<a name="l01290"></a>01290 <span class="preprocessor">                                OBD_CONNECT_EINPROGRESS | \</span>
<a name="l01291"></a>01291 <span class="preprocessor">                                OBD_CONNECT_LIGHTWEIGHT | OBD_CONNECT_UMASK | \</span>
<a name="l01292"></a>01292 <span class="preprocessor">                                OBD_CONNECT_LVB_TYPE | OBD_CONNECT_LAYOUTLOCK |\</span>
<a name="l01293"></a>01293 <span class="preprocessor">                                OBD_CONNECT_PINGLESS | OBD_CONNECT_MAX_EASIZE |\</span>
<a name="l01294"></a>01294 <span class="preprocessor">                                OBD_CONNECT_FLOCK_DEAD | \</span>
<a name="l01295"></a>01295 <span class="preprocessor">                                OBD_CONNECT_DISP_STRIPE | OBD_CONNECT_LFSCK | \</span>
<a name="l01296"></a>01296 <span class="preprocessor">                                OBD_CONNECT_OPEN_BY_FID | \</span>
<a name="l01297"></a>01297 <span class="preprocessor">                                OBD_CONNECT_DIR_STRIPE | \</span>
<a name="l01298"></a>01298 <span class="preprocessor">                                OBD_CONNECT_BULK_MBITS | \</span>
<a name="l01299"></a>01299 <span class="preprocessor">                                OBD_CONNECT_MULTIMODRPCS | \</span>
<a name="l01300"></a>01300 <span class="preprocessor">                                OBD_CONNECT_SUBTREE)</span>
<a name="l01301"></a>01301 <span class="preprocessor"></span>
<a name="l01302"></a><a class="code" href="group__lustreidl.html#ga59363d16880c7aeecc9712431ee00f86">01302</a> <span class="preprocessor">#define OST_CONNECT_SUPPORTED  (OBD_CONNECT_SRVLOCK | OBD_CONNECT_GRANT | \</span>
<a name="l01303"></a>01303 <span class="preprocessor">                                OBD_CONNECT_REQPORTAL | OBD_CONNECT_VERSION | \</span>
<a name="l01304"></a>01304 <span class="preprocessor">                                OBD_CONNECT_TRUNCLOCK | OBD_CONNECT_INDEX | \</span>
<a name="l01305"></a>01305 <span class="preprocessor">                                OBD_CONNECT_BRW_SIZE | \</span>
<a name="l01306"></a>01306 <span class="preprocessor">                                OBD_CONNECT_CANCELSET | OBD_CONNECT_AT | \</span>
<a name="l01307"></a>01307 <span class="preprocessor">                                LRU_RESIZE_CONNECT_FLAG | OBD_CONNECT_CKSUM | \</span>
<a name="l01308"></a>01308 <span class="preprocessor">                                OBD_CONNECT_RMT_CLIENT | \</span>
<a name="l01309"></a>01309 <span class="preprocessor">                                OBD_CONNECT_RMT_CLIENT_FORCE | OBD_CONNECT_VBR | \</span>
<a name="l01310"></a>01310 <span class="preprocessor">                                OBD_CONNECT_MDS | OBD_CONNECT_SKIP_ORPHAN | \</span>
<a name="l01311"></a>01311 <span class="preprocessor">                                OBD_CONNECT_GRANT_SHRINK | OBD_CONNECT_FULL20 | \</span>
<a name="l01312"></a>01312 <span class="preprocessor">                                OBD_CONNECT_64BITHASH | OBD_CONNECT_MAXBYTES | \</span>
<a name="l01313"></a>01313 <span class="preprocessor">                                OBD_CONNECT_MAX_EASIZE | \</span>
<a name="l01314"></a>01314 <span class="preprocessor">                                OBD_CONNECT_EINPROGRESS | \</span>
<a name="l01315"></a>01315 <span class="preprocessor">                                OBD_CONNECT_JOBSTATS | \</span>
<a name="l01316"></a>01316 <span class="preprocessor">                                OBD_CONNECT_LIGHTWEIGHT | OBD_CONNECT_LVB_TYPE|\</span>
<a name="l01317"></a>01317 <span class="preprocessor">                                OBD_CONNECT_LAYOUTLOCK | OBD_CONNECT_FID | \</span>
<a name="l01318"></a>01318 <span class="preprocessor">                                OBD_CONNECT_PINGLESS | OBD_CONNECT_LFSCK | \</span>
<a name="l01319"></a>01319 <span class="preprocessor">                                OBD_CONNECT_BULK_MBITS | \</span>
<a name="l01320"></a>01320 <span class="preprocessor">                                OBD_CONNECT_GRANT_PARAM)</span>
<a name="l01321"></a><a class="code" href="group__lustreidl.html#ga9a8418907afb96a45d8ccd0bfa3ee925">01321</a> <span class="preprocessor"></span><span class="preprocessor">#define ECHO_CONNECT_SUPPORTED (0)</span>
<a name="l01322"></a><a class="code" href="group__lustreidl.html#gaeb8755f276b8ca65cabe6676217c4f74">01322</a> <span class="preprocessor"></span><span class="preprocessor">#define MGS_CONNECT_SUPPORTED  (OBD_CONNECT_VERSION | OBD_CONNECT_AT | \</span>
<a name="l01323"></a>01323 <span class="preprocessor">                                OBD_CONNECT_FULL20 | OBD_CONNECT_IMP_RECOV | \</span>
<a name="l01324"></a>01324 <span class="preprocessor">                                OBD_CONNECT_MNE_SWAB | OBD_CONNECT_PINGLESS |\</span>
<a name="l01325"></a>01325 <span class="preprocessor">                                OBD_CONNECT_BULK_MBITS)</span>
<a name="l01326"></a>01326 <span class="preprocessor"></span>
<a name="l01327"></a>01327 <span class="comment">/* Features required for this version of the client to work with server */</span>
<a name="l01328"></a><a class="code" href="group__lustreidl.html#gab367e989aa190ce126c6db4abd636f5f">01328</a> <span class="preprocessor">#define CLIENT_CONNECT_MDT_REQD (OBD_CONNECT_IBITS | OBD_CONNECT_FID | \</span>
<a name="l01329"></a>01329 <span class="preprocessor">                                 OBD_CONNECT_FULL20)</span>
<a name="l01330"></a>01330 <span class="preprocessor"></span>
<a name="l01331"></a>01331 <span class="comment">/* This structure is used for both request and reply.</span>
<a name="l01332"></a>01332 <span class="comment"> *</span>
<a name="l01333"></a>01333 <span class="comment"> * If we eventually have separate connect data for different types, which we</span>
<a name="l01334"></a>01334 <span class="comment"> * almost certainly will, then perhaps we stick a union in here. */</span>
<a name="l01335"></a><a class="code" href="structobd__connect__data.html">01335</a> <span class="keyword">struct </span><a class="code" href="structobd__connect__data.html">obd_connect_data</a> {
<a name="l01336"></a><a class="code" href="structobd__connect__data.html#a056d6aaded7f397e902843b52a36a6a5">01336</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a056d6aaded7f397e902843b52a36a6a5">ocd_connect_flags</a>; <span class="comment">/* OBD_CONNECT_* per above */</span>
<a name="l01337"></a><a class="code" href="structobd__connect__data.html#a39eb02ac915328a18a07c5888c8fc3bc">01337</a>         __u32 <a class="code" href="structobd__connect__data.html#a39eb02ac915328a18a07c5888c8fc3bc">ocd_version</a>;       <span class="comment">/* lustre release version number */</span>
<a name="l01338"></a><a class="code" href="structobd__connect__data.html#a8f4d1b80cefb3a1b0a4e07a7ee7a0a77">01338</a>         __u32 <a class="code" href="structobd__connect__data.html#a8f4d1b80cefb3a1b0a4e07a7ee7a0a77">ocd_grant</a>;         <span class="comment">/* initial cache grant amount (bytes) */</span>
<a name="l01339"></a><a class="code" href="structobd__connect__data.html#a437db419961240accf336a58e5a25b2c">01339</a>         __u32 <a class="code" href="structobd__connect__data.html#a437db419961240accf336a58e5a25b2c">ocd_index</a>;         <span class="comment">/* LOV index to connect to */</span>
<a name="l01340"></a><a class="code" href="structobd__connect__data.html#a30da77f33210cf12e0d487bb723c0063">01340</a>         __u32 <a class="code" href="structobd__connect__data.html#a30da77f33210cf12e0d487bb723c0063">ocd_brw_size</a>;      <span class="comment">/* Maximum BRW size in bytes */</span>
<a name="l01341"></a><a class="code" href="structobd__connect__data.html#ab074e17beaa68f6b18b8934e3c787f95">01341</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#ab074e17beaa68f6b18b8934e3c787f95">ocd_ibits_known</a>;   <span class="comment">/* inode bits this client understands */</span>
<a name="l01342"></a><a class="code" href="structobd__connect__data.html#a27343a77bc7d51f071e6a0d824eaedc9">01342</a>         __u8  <a class="code" href="structobd__connect__data.html#a27343a77bc7d51f071e6a0d824eaedc9">ocd_grant_blkbits</a>; <span class="comment">/* log2 of the backend filesystem blocksize */</span>
<a name="l01343"></a><a class="code" href="structobd__connect__data.html#ac743bc6920edf6a1c9fd9cb30db2d5e2">01343</a>         __u8  <a class="code" href="structobd__connect__data.html#ac743bc6920edf6a1c9fd9cb30db2d5e2">ocd_grant_inobits</a>; <span class="comment">/* log2 of the per-inode space consumption */</span>
<a name="l01344"></a><a class="code" href="structobd__connect__data.html#a1941b5ac51e8b44534da5d987923b711">01344</a>         __u16 <a class="code" href="structobd__connect__data.html#a1941b5ac51e8b44534da5d987923b711">ocd_grant_tax_kb</a>;  <span class="comment">/* extent insertion overhead, in 1K blocks */</span>
<a name="l01345"></a><a class="code" href="structobd__connect__data.html#af260bc118148cf4809a1d8855e3d735f">01345</a>         __u32 <a class="code" href="structobd__connect__data.html#af260bc118148cf4809a1d8855e3d735f">ocd_grant_max_blks</a>;<span class="comment">/* maximum number of blocks per extent */</span>
<a name="l01346"></a><a class="code" href="structobd__connect__data.html#ac24e4159252d1cb7eaa53090f7931420">01346</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#ac24e4159252d1cb7eaa53090f7931420">ocd_transno</a>;       <span class="comment">/* first transno from client to be replayed */</span>
<a name="l01347"></a><a class="code" href="structobd__connect__data.html#a42b5555b86633a89977d423b4213af7c">01347</a>         __u32 <a class="code" href="structobd__connect__data.html#a42b5555b86633a89977d423b4213af7c">ocd_group</a>;         <span class="comment">/* MDS group on OST */</span>
<a name="l01348"></a><a class="code" href="structobd__connect__data.html#a442fc0152071cb5e1da477b5e33f39b8">01348</a>         __u32 <a class="code" href="structobd__connect__data.html#a442fc0152071cb5e1da477b5e33f39b8">ocd_cksum_types</a>;   <span class="comment">/* supported checksum algorithms */</span>
<a name="l01349"></a><a class="code" href="structobd__connect__data.html#ae3bc0a28d591a67258c46c63887aac34">01349</a>         __u32 <a class="code" href="structobd__connect__data.html#ae3bc0a28d591a67258c46c63887aac34">ocd_max_easize</a>;    <span class="comment">/* How big LOV EA can be on MDS */</span>
<a name="l01350"></a><a class="code" href="structobd__connect__data.html#a9eb3f8950d1915976618e34bee8630b7">01350</a>         __u32 <a class="code" href="structobd__connect__data.html#a9eb3f8950d1915976618e34bee8630b7">ocd_instance</a>;      <span class="comment">/* instance # of this target */</span>
<a name="l01351"></a><a class="code" href="structobd__connect__data.html#a2347ee8bf8c372b1cae104685de8e523">01351</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a2347ee8bf8c372b1cae104685de8e523">ocd_maxbytes</a>;      <span class="comment">/* Maximum stripe size in bytes */</span>
<a name="l01352"></a>01352         <span class="comment">/* Fields after ocd_maxbytes are only accessible by the receiver</span>
<a name="l01353"></a>01353 <span class="comment">         * if the corresponding flag in ocd_connect_flags is set. Accessing</span>
<a name="l01354"></a>01354 <span class="comment">         * any field after ocd_maxbytes on the receiver without a valid flag</span>
<a name="l01355"></a>01355 <span class="comment">         * may result in out-of-bound memory access and kernel oops. */</span>
<a name="l01356"></a><a class="code" href="structobd__connect__data.html#ae08b7631fcbf24b410a9f38c2057e154">01356</a>         __u16 <a class="code" href="structobd__connect__data.html#ae08b7631fcbf24b410a9f38c2057e154">ocd_maxmodrpcs</a>;    <span class="comment">/* Maximum modify RPCs in parallel */</span>
<a name="l01357"></a><a class="code" href="structobd__connect__data.html#a89f371f21b3d6c48a82cb36532044d8c">01357</a>         __u16 <a class="code" href="structobd__connect__data.html#a89f371f21b3d6c48a82cb36532044d8c">padding0</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01358"></a><a class="code" href="structobd__connect__data.html#af34fea26e9a8fce2df2b880d7d011bf3">01358</a>         __u32 <a class="code" href="structobd__connect__data.html#af34fea26e9a8fce2df2b880d7d011bf3">padding1</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01359"></a><a class="code" href="structobd__connect__data.html#a103c494bcf8379f539036bcb42b3d4be">01359</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a103c494bcf8379f539036bcb42b3d4be">ocd_connect_flags2</a>;
<a name="l01360"></a><a class="code" href="structobd__connect__data.html#afa009220696877a1e2af9b8a1f95b03a">01360</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#afa009220696877a1e2af9b8a1f95b03a">padding3</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01361"></a><a class="code" href="structobd__connect__data.html#a6dcb2e3dd9694726392251812cd79546">01361</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a6dcb2e3dd9694726392251812cd79546">padding4</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01362"></a><a class="code" href="structobd__connect__data.html#a415f23caa6c62cd88a31412b0d82c3d0">01362</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a415f23caa6c62cd88a31412b0d82c3d0">padding5</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01363"></a><a class="code" href="structobd__connect__data.html#ae73be1afd57d5aa1852b93f71870f301">01363</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#ae73be1afd57d5aa1852b93f71870f301">padding6</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01364"></a><a class="code" href="structobd__connect__data.html#a50ec5aba719e1b42beaee6d205be572b">01364</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a50ec5aba719e1b42beaee6d205be572b">padding7</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01365"></a><a class="code" href="structobd__connect__data.html#a7ba20985d699a7a80fa62119f6731c31">01365</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a7ba20985d699a7a80fa62119f6731c31">padding8</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01366"></a><a class="code" href="structobd__connect__data.html#a39747d441c50402bf16b8a7b24c84af6">01366</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a39747d441c50402bf16b8a7b24c84af6">padding9</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01367"></a><a class="code" href="structobd__connect__data.html#ac56d7356f0011c5bae7118d46fb8aa4a">01367</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#ac56d7356f0011c5bae7118d46fb8aa4a">paddingA</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01368"></a><a class="code" href="structobd__connect__data.html#a18e85ab5bd254ca4a1d859f2c4b7ce7e">01368</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a18e85ab5bd254ca4a1d859f2c4b7ce7e">paddingB</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01369"></a><a class="code" href="structobd__connect__data.html#a3625de67c9682c4affa7d2091d9cff74">01369</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a3625de67c9682c4affa7d2091d9cff74">paddingC</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01370"></a><a class="code" href="structobd__connect__data.html#af5f6f37dccba9dc88ee9efdf3de4ae1d">01370</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#af5f6f37dccba9dc88ee9efdf3de4ae1d">paddingD</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01371"></a><a class="code" href="structobd__connect__data.html#a330f3f6c3d97e22d269ad0d200cc7baf">01371</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a330f3f6c3d97e22d269ad0d200cc7baf">paddingE</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01372"></a><a class="code" href="structobd__connect__data.html#a2d6ee331cc5a2f4b33f2dd5d71180142">01372</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structobd__connect__data.html#a2d6ee331cc5a2f4b33f2dd5d71180142">paddingF</a>;          <span class="comment">/* added 2.1.0. also fix lustre_swab_connect */</span>
<a name="l01373"></a>01373 };
<a name="l01374"></a>01374 <span class="comment">/* XXX README XXX:</span>
<a name="l01375"></a>01375 <span class="comment"> * Please DO NOT use any fields here before first ensuring that this same</span>
<a name="l01376"></a>01376 <span class="comment"> * field is not in use on some other branch.  Please clear any such changes</span>
<a name="l01377"></a>01377 <span class="comment"> * with senior engineers before starting to use a new field.  Then, submit</span>
<a name="l01378"></a>01378 <span class="comment"> * a small patch against EVERY branch that ONLY adds the new field along with</span>
<a name="l01379"></a>01379 <span class="comment"> * the matching OBD_CONNECT flag, so that can be approved and landed easily to</span>
<a name="l01380"></a>01380 <span class="comment"> * reserve the flag for future use. */</span>
<a name="l01381"></a>01381 
<a name="l01382"></a>01382 <span class="comment">/*</span>
<a name="l01383"></a>01383 <span class="comment"> * Supported checksum algorithms. Up to 32 checksum types are supported.</span>
<a name="l01384"></a>01384 <span class="comment"> * (32-bit mask stored in obd_connect_data::ocd_cksum_types)</span>
<a name="l01385"></a>01385 <span class="comment"> * Please update DECLARE_CKSUM_NAME/OBD_CKSUM_ALL in obd.h when adding a new</span>
<a name="l01386"></a>01386 <span class="comment"> * algorithm and also the OBD_FL_CKSUM* flags.</span>
<a name="l01387"></a>01387 <span class="comment"> */</span>
<a name="l01388"></a><a class="code" href="group__lustreidl.html#ga86f1ec8087bf1bf82585bcc3a023c7fc">01388</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l01389"></a><a class="code" href="group__lustreidl.html#gga86f1ec8087bf1bf82585bcc3a023c7fca3e313efaecad24d6c8ab4db0db135e81">01389</a>         <a class="code" href="group__lustreidl.html#gga86f1ec8087bf1bf82585bcc3a023c7fca3e313efaecad24d6c8ab4db0db135e81">OBD_CKSUM_CRC32</a> = 0x00000001,
<a name="l01390"></a><a class="code" href="group__lustreidl.html#gga86f1ec8087bf1bf82585bcc3a023c7fca074e5ddd580d8ab95d1698bcc139b693">01390</a>         <a class="code" href="group__lustreidl.html#gga86f1ec8087bf1bf82585bcc3a023c7fca074e5ddd580d8ab95d1698bcc139b693">OBD_CKSUM_ADLER</a> = 0x00000002,
<a name="l01391"></a><a class="code" href="group__lustreidl.html#gga86f1ec8087bf1bf82585bcc3a023c7fca2653f62d81a11b58523ae7aa0cb77d26">01391</a>         <a class="code" href="group__lustreidl.html#gga86f1ec8087bf1bf82585bcc3a023c7fca2653f62d81a11b58523ae7aa0cb77d26">OBD_CKSUM_CRC32C</a>= 0x00000004,
<a name="l01392"></a>01392 } <a class="code" href="group__lustreidl.html#ga86f1ec8087bf1bf82585bcc3a023c7fc">cksum_type_t</a>;
<a name="l01393"></a>01393 
<a name="l01394"></a>01394 <span class="comment">/*</span>
<a name="l01395"></a>01395 <span class="comment"> *   OST requests: OBDO &amp; OBD request records</span>
<a name="l01396"></a>01396 <span class="comment"> */</span>
<a name="l01397"></a>01397 
<a name="l01398"></a>01398 <span class="comment">/* opcodes */</span>
<a name="l01399"></a><a class="code" href="group__lustreidl.html#gadeda0b7c376c32e2a7c49c7eee01c065">01399</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l01400"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a8856278cde927fd559b1a40c2696e5ba">01400</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a8856278cde927fd559b1a40c2696e5ba">OST_REPLY</a>      =  0,       <span class="comment">/* reply ? */</span>
<a name="l01401"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a8c2a6aa99fb7588ad5f5f1efcd5ef18f">01401</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a8c2a6aa99fb7588ad5f5f1efcd5ef18f">OST_GETATTR</a>    =  1,
<a name="l01402"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ac8347b9ed2627ee4afe75952448ff614">01402</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ac8347b9ed2627ee4afe75952448ff614">OST_SETATTR</a>    =  2,
<a name="l01403"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a7589e2943348fad089d6db86ac47456a">01403</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a7589e2943348fad089d6db86ac47456a">OST_READ</a>       =  3,
<a name="l01404"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a703556bbce21846e103b1953a31c8bbd">01404</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a703556bbce21846e103b1953a31c8bbd">OST_WRITE</a>      =  4,
<a name="l01405"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ae628921be3e0adc1c5d6001f9ca3e8de">01405</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ae628921be3e0adc1c5d6001f9ca3e8de">OST_CREATE</a>     =  5,
<a name="l01406"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ac9ad1c1e18c81c69ef9f7981a51d1ca0">01406</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ac9ad1c1e18c81c69ef9f7981a51d1ca0">OST_DESTROY</a>    =  6,
<a name="l01407"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ad945e15270d80ca8063178968dd276b0">01407</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ad945e15270d80ca8063178968dd276b0">OST_GET_INFO</a>   =  7,
<a name="l01408"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a23f1aabf5552c06b8f22165c11332259">01408</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a23f1aabf5552c06b8f22165c11332259">OST_CONNECT</a>    =  8,
<a name="l01409"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a9427256297bb4e41a895574b16c7d95d">01409</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a9427256297bb4e41a895574b16c7d95d">OST_DISCONNECT</a> =  9,
<a name="l01410"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ae92e211936b6291220237d6fdc7c91cd">01410</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ae92e211936b6291220237d6fdc7c91cd">OST_PUNCH</a>      = 10,
<a name="l01411"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a48c139c5131bd5d96ebf05f2b62f7604">01411</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a48c139c5131bd5d96ebf05f2b62f7604">OST_OPEN</a>       = 11,
<a name="l01412"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a141df75c1f46866e47742e0ce43034a1">01412</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a141df75c1f46866e47742e0ce43034a1">OST_CLOSE</a>      = 12,
<a name="l01413"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ae60285d8fe5c0137f3d82e7201ae232c">01413</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ae60285d8fe5c0137f3d82e7201ae232c">OST_STATFS</a>     = 13,
<a name="l01414"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ada343065dc9b702e69891b68356ec1fb">01414</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065ada343065dc9b702e69891b68356ec1fb">OST_SYNC</a>       = 16,
<a name="l01415"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a8b76b6e9711e534f66c92576d1ab3037">01415</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a8b76b6e9711e534f66c92576d1ab3037">OST_SET_INFO</a>   = 17,
<a name="l01416"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a7deaacafe140abe70834adad2d4eb752">01416</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a7deaacafe140abe70834adad2d4eb752">OST_QUOTACHECK</a> = 18, <span class="comment">/* not used since 2.4 */</span>
<a name="l01417"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a5ab44e2b4f3b616b44f26271d9ab7038">01417</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a5ab44e2b4f3b616b44f26271d9ab7038">OST_QUOTACTL</a>   = 19,
<a name="l01418"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a5b291dd70233834e175f332fc91c0dae">01418</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a5b291dd70233834e175f332fc91c0dae">OST_QUOTA_ADJUST_QUNIT</a> = 20, <span class="comment">/* not used since 2.4 */</span>
<a name="l01419"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a056f8106d67d4b6492434bd3f02d4154">01419</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a056f8106d67d4b6492434bd3f02d4154">OST_LADVISE</a>    = 21,
<a name="l01420"></a><a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a0522580c56e6eb26e1a5aedb0f86c7ba">01420</a>         <a class="code" href="group__lustreidl.html#ggadeda0b7c376c32e2a7c49c7eee01c065a0522580c56e6eb26e1a5aedb0f86c7ba">OST_LAST_OPC</a> <span class="comment">/* must be &lt; 33 to avoid MDS_GETATTR */</span>
<a name="l01421"></a>01421 } <a class="code" href="packet-lustre_8c.html#adeda0b7c376c32e2a7c49c7eee01c065">ost_cmd_t</a>;
<a name="l01422"></a><a class="code" href="group__lustreidl.html#gab90542891cd4083f65fd8c7453a12994">01422</a> <span class="preprocessor">#define OST_FIRST_OPC  OST_REPLY</span>
<a name="l01423"></a>01423 <span class="preprocessor"></span>
<a name="l01424"></a><a class="code" href="group__lustreidl.html#ga2f796947801a3613799e559dc81c0342">01424</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga2f796947801a3613799e559dc81c0342">obdo_flags</a> {
<a name="l01425"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342adbdb0e04eda7bd6dc291f8dfa82e900d">01425</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342adbdb0e04eda7bd6dc291f8dfa82e900d">OBD_FL_INLINEDATA</a>   = 0x00000001,
<a name="l01426"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a523ae115807db6badb8b344707dbd184">01426</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a523ae115807db6badb8b344707dbd184">OBD_FL_OBDMDEXISTS</a>  = 0x00000002,
<a name="l01427"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a1dcbbc2b54ac5f935c9e22011c64db21">01427</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a1dcbbc2b54ac5f935c9e22011c64db21">OBD_FL_DELORPHAN</a>    = 0x00000004, <span class="comment">/* if set in o_flags delete orphans */</span>
<a name="l01428"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a14b1b9525dd231c725fd9054b7d25705">01428</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a14b1b9525dd231c725fd9054b7d25705">OBD_FL_NORPC</a>        = 0x00000008, <span class="comment">/* set in o_flags do in OSC not OST */</span>
<a name="l01429"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a4040b47a0af4a0fe391ca9b3ce6ce95c">01429</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a4040b47a0af4a0fe391ca9b3ce6ce95c">OBD_FL_IDONLY</a>       = 0x00000010, <span class="comment">/* set in o_flags only adjust obj id*/</span>
<a name="l01430"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a86a624f058c98027d09706f37f1c4344">01430</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a86a624f058c98027d09706f37f1c4344">OBD_FL_RECREATE_OBJS</a>= 0x00000020, <span class="comment">/* recreate missing obj */</span>
<a name="l01431"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a3c64ab9af9256019d99dc2b63546fdc8">01431</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a3c64ab9af9256019d99dc2b63546fdc8">OBD_FL_DEBUG_CHECK</a>  = 0x00000040, <span class="comment">/* echo client/server debug check */</span>
<a name="l01432"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342aae227374dac2774fecb0beb2c2fc3f1a">01432</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342aae227374dac2774fecb0beb2c2fc3f1a">OBD_FL_NO_USRQUOTA</a>  = 0x00000100, <span class="comment">/* the object&apos;s owner is over quota */</span>
<a name="l01433"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342afd21cf2e4e6b3157339f829c2274b4ea">01433</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342afd21cf2e4e6b3157339f829c2274b4ea">OBD_FL_NO_GRPQUOTA</a>  = 0x00000200, <span class="comment">/* the object&apos;s group is over quota */</span>
<a name="l01434"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a20920af67308c033a85aebbd5d8d0fba">01434</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a20920af67308c033a85aebbd5d8d0fba">OBD_FL_CREATE_CROW</a>  = 0x00000400, <span class="comment">/* object should be create on write */</span>
<a name="l01435"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a67ae2b1e513881864aa045bd8e39d588">01435</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a67ae2b1e513881864aa045bd8e39d588">OBD_FL_SRVLOCK</a>      = 0x00000800, <span class="comment">/* delegate DLM locking to server */</span>
<a name="l01436"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342adce94b3c6b6370ba960b488101e6ea18">01436</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342adce94b3c6b6370ba960b488101e6ea18">OBD_FL_CKSUM_CRC32</a>  = 0x00001000, <span class="comment">/* CRC32 checksum type */</span>
<a name="l01437"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a4517bfddf5c6c0eb25ab11c2581d6e29">01437</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a4517bfddf5c6c0eb25ab11c2581d6e29">OBD_FL_CKSUM_ADLER</a>  = 0x00002000, <span class="comment">/* ADLER checksum type */</span>
<a name="l01438"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a55f20ee33d53dc8e5038a40e94af1a51">01438</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a55f20ee33d53dc8e5038a40e94af1a51">OBD_FL_CKSUM_CRC32C</a> = 0x00004000, <span class="comment">/* CRC32C checksum type */</span>
<a name="l01439"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342ac9d44a5ff084a520a890825a83c698a3">01439</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342ac9d44a5ff084a520a890825a83c698a3">OBD_FL_CKSUM_RSVD2</a>  = 0x00008000, <span class="comment">/* for future cksum types */</span>
<a name="l01440"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a0331c236a2c86bc36326997fc9ef236a">01440</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a0331c236a2c86bc36326997fc9ef236a">OBD_FL_CKSUM_RSVD3</a>  = 0x00010000, <span class="comment">/* for future cksum types */</span>
<a name="l01441"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a35395af951a0f29072b1ca95b333c63e">01441</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a35395af951a0f29072b1ca95b333c63e">OBD_FL_SHRINK_GRANT</a> = 0x00020000, <span class="comment">/* object shrink the grant */</span>
<a name="l01442"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a9560480399d637a012767858493d85df">01442</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a9560480399d637a012767858493d85df">OBD_FL_MMAP</a>         = 0x00040000, <span class="comment">/* object is mmapped on the client.</span>
<a name="l01443"></a>01443 <span class="comment">                                           * XXX: obsoleted - reserved for old</span>
<a name="l01444"></a>01444 <span class="comment">                                           * clients prior than 2.2 */</span>
<a name="l01445"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a734eb1ca96f0a9d1693708435a31b1b9">01445</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a734eb1ca96f0a9d1693708435a31b1b9">OBD_FL_RECOV_RESEND</a> = 0x00080000, <span class="comment">/* recoverable resent */</span>
<a name="l01446"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a3563e8d037c08a6d5d6103b0f141d8d7">01446</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a3563e8d037c08a6d5d6103b0f141d8d7">OBD_FL_NOSPC_BLK</a>    = 0x00100000, <span class="comment">/* no more block space on OST */</span>
<a name="l01447"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a0658d36835f1ad96522d031e2d28e54a">01447</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a0658d36835f1ad96522d031e2d28e54a">OBD_FL_FLUSH</a>        = 0x00200000, <span class="comment">/* flush pages on the OST */</span>
<a name="l01448"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342ab75ea0d56b45c465464e40f77db20b44">01448</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342ab75ea0d56b45c465464e40f77db20b44">OBD_FL_SHORT_IO</a>     = 0x00400000, <span class="comment">/* short io request */</span>
<a name="l01449"></a>01449 
<a name="l01450"></a>01450         <span class="comment">/* Note that while these checksum values are currently separate bits,</span>
<a name="l01451"></a>01451 <span class="comment">         * in 2.x we can actually allow all values from 1-31 if we wanted. */</span>
<a name="l01452"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a75faccb91326e9bf214c797498deddb8">01452</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a75faccb91326e9bf214c797498deddb8">OBD_FL_CKSUM_ALL</a>    = <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342adce94b3c6b6370ba960b488101e6ea18">OBD_FL_CKSUM_CRC32</a> | <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a4517bfddf5c6c0eb25ab11c2581d6e29">OBD_FL_CKSUM_ADLER</a> |
<a name="l01453"></a>01453                               <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a55f20ee33d53dc8e5038a40e94af1a51">OBD_FL_CKSUM_CRC32C</a>,
<a name="l01454"></a>01454 
<a name="l01455"></a>01455         <span class="comment">/* mask for local-only flag, which won&apos;t be sent over network */</span>
<a name="l01456"></a><a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a8067e0e2676ecb7f8c09fd01d955c2c2">01456</a>         <a class="code" href="group__lustreidl.html#gga2f796947801a3613799e559dc81c0342a8067e0e2676ecb7f8c09fd01d955c2c2">OBD_FL_LOCAL_MASK</a>   = 0xF0000000,
<a name="l01457"></a>01457 };
<a name="l01458"></a>01458 
<a name="l01459"></a>01459 <span class="comment">/*</span>
<a name="l01460"></a>01460 <span class="comment"> * All LOV EA magics should have the same postfix, if some new version</span>
<a name="l01461"></a>01461 <span class="comment"> * Lustre instroduces new LOV EA magic, then when down-grade to an old</span>
<a name="l01462"></a>01462 <span class="comment"> * Lustre, even though the old version system does not recognizes such</span>
<a name="l01463"></a>01463 <span class="comment"> * new magic, it still can distinguish the corrupted cases by checking</span>
<a name="l01464"></a>01464 <span class="comment"> * the magic&apos;s postfix.</span>
<a name="l01465"></a>01465 <span class="comment"> */</span>
<a name="l01466"></a><a class="code" href="group__lustreidl.html#ga6967f61a78249facf0eb9bb1b7068d3b">01466</a> <span class="preprocessor">#define LOV_MAGIC_MAGIC 0x0BD0</span>
<a name="l01467"></a><a class="code" href="group__lustreidl.html#ga057975447a1b227fd69151c86db2ace9">01467</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_MAGIC_MASK  0xFFFF</span>
<a name="l01468"></a>01468 <span class="preprocessor"></span>
<a name="l01469"></a><a class="code" href="group__lustreidl.html#gada11336fa80616348f207b7629418f0b">01469</a> <span class="preprocessor">#define LOV_MAGIC_V1            (0x0BD10000 | LOV_MAGIC_MAGIC)</span>
<a name="l01470"></a><a class="code" href="group__lustreidl.html#ga69141a98e647a2c9ba3b291ec0b7d0c7">01470</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_MAGIC_JOIN_V1       (0x0BD20000 | LOV_MAGIC_MAGIC)</span>
<a name="l01471"></a><a class="code" href="group__lustreidl.html#gae8cb34c56846064d179aa2d4aeddbece">01471</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_MAGIC_V3            (0x0BD30000 | LOV_MAGIC_MAGIC)</span>
<a name="l01472"></a><a class="code" href="group__lustreidl.html#ga2b1fd37a25bc3e45d3cfd76f0ad53f09">01472</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_MAGIC_MIGRATE       (0x0BD40000 | LOV_MAGIC_MAGIC)</span>
<a name="l01473"></a>01473 <span class="preprocessor"></span><span class="comment">/* reserved for specifying OSTs */</span>
<a name="l01474"></a><a class="code" href="group__lustreidl.html#gad69528fe254ef48b91a392829e0d05fa">01474</a> <span class="preprocessor">#define LOV_MAGIC_SPECIFIC      (0x0BD50000 | LOV_MAGIC_MAGIC)</span>
<a name="l01475"></a><a class="code" href="group__lustreidl.html#ga480b72096e7b98140648003debd480fe">01475</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_MAGIC               LOV_MAGIC_V1</span>
<a name="l01476"></a>01476 <span class="preprocessor"></span>
<a name="l01477"></a>01477 <span class="comment">/*</span>
<a name="l01478"></a>01478 <span class="comment"> * magic for fully defined striping</span>
<a name="l01479"></a>01479 <span class="comment"> * the idea is that we should have different magics for striping &quot;hints&quot;</span>
<a name="l01480"></a>01480 <span class="comment"> * (struct lov_user_md_v[13]) and defined ready-to-use striping (struct</span>
<a name="l01481"></a>01481 <span class="comment"> * lov_mds_md_v[13]). at the moment the magics are used in wire protocol,</span>
<a name="l01482"></a>01482 <span class="comment"> * we can&apos;t just change it w/o long way preparation, but we still need a</span>
<a name="l01483"></a>01483 <span class="comment"> * mechanism to allow LOD to differentiate hint versus ready striping.</span>
<a name="l01484"></a>01484 <span class="comment"> * so, at the moment we do a trick: MDT knows what to expect from request</span>
<a name="l01485"></a>01485 <span class="comment"> * depending on the case (replay uses ready striping, non-replay req uses</span>
<a name="l01486"></a>01486 <span class="comment"> * hints), so MDT replaces magic with appropriate one and now LOD can</span>
<a name="l01487"></a>01487 <span class="comment"> * easily understand what&apos;s inside -bzzz</span>
<a name="l01488"></a>01488 <span class="comment"> */</span>
<a name="l01489"></a><a class="code" href="group__lustreidl.html#ga8d869a0b16d7a54e8bab4adc0391c9db">01489</a> <span class="preprocessor">#define LOV_MAGIC_V1_DEF  0x0CD10BD0</span>
<a name="l01490"></a><a class="code" href="group__lustreidl.html#gab6f2ff71d65027164f66cd3ccc06cc52">01490</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_MAGIC_V3_DEF  0x0CD30BD0</span>
<a name="l01491"></a>01491 <span class="preprocessor"></span>
<a name="l01492"></a><a class="code" href="group__lustreidl.html#ga3ff36a82c7bce4d5e6d8a84b56410b25">01492</a> <span class="preprocessor">#define lov_pattern(pattern)            (pattern &amp; ~LOV_PATTERN_F_MASK)</span>
<a name="l01493"></a><a class="code" href="group__lustreidl.html#gad13aed24da14d1817fc2ece4e5df0d96">01493</a> <span class="preprocessor"></span><span class="preprocessor">#define lov_pattern_flags(pattern)      (pattern &amp; LOV_PATTERN_F_MASK)</span>
<a name="l01494"></a>01494 <span class="preprocessor"></span>
<a name="l01495"></a><a class="code" href="group__lustreidl.html#ga8156de0e81d1d413e2af48976131d656">01495</a> <span class="preprocessor">#define lov_ost_data lov_ost_data_v1</span>
<a name="l01496"></a><a class="code" href="structlov__ost__data__v1.html">01496</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> {          <span class="comment">/* per-stripe data structure (little-endian)*/</span>
<a name="l01497"></a><a class="code" href="structlov__ost__data__v1.html#a70d7c90790d5dfb9f75c223033a0a5a5">01497</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> <a class="code" href="structlov__ost__data__v1.html#a70d7c90790d5dfb9f75c223033a0a5a5">l_ost_oi</a>;   <span class="comment">/* OST object ID */</span>
<a name="l01498"></a><a class="code" href="structlov__ost__data__v1.html#a6c85e6a4cb47855412c8791e22d4cb33">01498</a>         __u32 <a class="code" href="structlov__ost__data__v1.html#a6c85e6a4cb47855412c8791e22d4cb33">l_ost_gen</a>;          <span class="comment">/* generation of this l_ost_idx */</span>
<a name="l01499"></a><a class="code" href="structlov__ost__data__v1.html#aa66bbb466cc1f24f4b2a3485443ab102">01499</a>         __u32 <a class="code" href="structlov__ost__data__v1.html#aa66bbb466cc1f24f4b2a3485443ab102">l_ost_idx</a>;          <span class="comment">/* OST index in LOV (lov_tgt_desc-&gt;tgts) */</span>
<a name="l01500"></a>01500 };
<a name="l01501"></a>01501 
<a name="l01502"></a><a class="code" href="group__lustreidl.html#ga120d1e282e1d65132fbcd7f17ae908c7">01502</a> <span class="preprocessor">#define lov_mds_md lov_mds_md_v1</span>
<a name="l01503"></a><a class="code" href="structlov__mds__md__v1.html">01503</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> {            <span class="comment">/* LOV EA mds/wire data (little-endian) */</span>
<a name="l01504"></a><a class="code" href="structlov__mds__md__v1.html#a20badeadf70fe719014bce99a58824aa">01504</a>         __u32 <a class="code" href="structlov__mds__md__v1.html#a20badeadf70fe719014bce99a58824aa">lmm_magic</a>;          <span class="comment">/* magic number = LOV_MAGIC_V1 */</span>
<a name="l01505"></a><a class="code" href="structlov__mds__md__v1.html#a51c5aef4c9943d2d06620ac739eb455d">01505</a>         __u32 <a class="code" href="structlov__mds__md__v1.html#a51c5aef4c9943d2d06620ac739eb455d">lmm_pattern</a>;        <span class="comment">/* LOV_PATTERN_RAID0, LOV_PATTERN_RAID1 */</span>
<a name="l01506"></a><a class="code" href="structlov__mds__md__v1.html#ad9eed9e1b1f0d83acbf922688d7075f2">01506</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a>   <a class="code" href="structlov__mds__md__v1.html#ad9eed9e1b1f0d83acbf922688d7075f2">lmm_oi</a>;   <span class="comment">/* LOV object ID */</span>
<a name="l01507"></a><a class="code" href="structlov__mds__md__v1.html#aae494ae37bb5bb165650c5a111e8c455">01507</a>         __u32 <a class="code" href="structlov__mds__md__v1.html#aae494ae37bb5bb165650c5a111e8c455">lmm_stripe_size</a>;    <span class="comment">/* size of stripe in bytes */</span>
<a name="l01508"></a>01508         <span class="comment">/* lmm_stripe_count used to be __u32 */</span>
<a name="l01509"></a><a class="code" href="structlov__mds__md__v1.html#add4ef78673e19c11edbbefbeb579833c">01509</a>         __u16 <a class="code" href="structlov__mds__md__v1.html#add4ef78673e19c11edbbefbeb579833c">lmm_stripe_count</a>;   <span class="comment">/* num stripes in use for this object */</span>
<a name="l01510"></a><a class="code" href="structlov__mds__md__v1.html#a64e019d439b11a8c127eacd9d7851ba2">01510</a>         __u16 <a class="code" href="structlov__mds__md__v1.html#a64e019d439b11a8c127eacd9d7851ba2">lmm_layout_gen</a>;     <span class="comment">/* layout generation number */</span>
<a name="l01511"></a><a class="code" href="structlov__mds__md__v1.html#af4f73d20b2731ce42fba441c2b61d807">01511</a>         <span class="keyword">struct </span><a class="code" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> <a class="code" href="structlov__mds__md__v1.html#af4f73d20b2731ce42fba441c2b61d807">lmm_objects</a>[0]; <span class="comment">/* per-stripe data */</span>
<a name="l01512"></a>01512 };
<a name="l01513"></a>01513 
<a name="l01538"></a><a class="code" href="group__lustreidl.html#ga0f9fe913af24edd5309726a224c89d8f">01538</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga0f9fe913af24edd5309726a224c89d8f" title="Sigh, because pre-2.4 uses struct lov_mds_md_v1 { .">fid_to_lmm_oi</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> *fid,
<a name="l01539"></a>01539                                  <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi)
<a name="l01540"></a>01540 {
<a name="l01541"></a>01541         oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = <a class="code" href="group__lu__fid.html#ga441955d99c568091c05e3df799456d04" title="returns fid object id">fid_oid</a>(fid);
<a name="l01542"></a>01542         oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = <a class="code" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f" title="Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the...">fid_seq</a>(fid);
<a name="l01543"></a>01543 }
<a name="l01544"></a>01544 
<a name="l01545"></a><a class="code" href="group__lustreidl.html#ga607e8d9cef86f6b01ff40bc2f10a039e">01545</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga607e8d9cef86f6b01ff40bc2f10a039e">lmm_oi_set_seq</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi, <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)
<a name="l01546"></a>01546 {
<a name="l01547"></a>01547         oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = seq;
<a name="l01548"></a>01548 }
<a name="l01549"></a>01549 
<a name="l01550"></a><a class="code" href="group__lustreidl.html#ga38b29b511fed524b1e5dfaf0310e802f">01550</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga38b29b511fed524b1e5dfaf0310e802f">lmm_oi_set_id</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi, <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> oid)
<a name="l01551"></a>01551 {
<a name="l01552"></a>01552         oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = oid;
<a name="l01553"></a>01553 }
<a name="l01554"></a>01554 
<a name="l01555"></a><a class="code" href="group__lustreidl.html#gadbfa52aacd66d86a733ecbe18b45707e">01555</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lustreidl.html#gadbfa52aacd66d86a733ecbe18b45707e">lmm_oi_id</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi)
<a name="l01556"></a>01556 {
<a name="l01557"></a>01557         <span class="keywordflow">return</span> oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id;
<a name="l01558"></a>01558 }
<a name="l01559"></a>01559 
<a name="l01560"></a><a class="code" href="group__lustreidl.html#ga8c5b2cb7772e96f94b2fa1a96db928b5">01560</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lustreidl.html#ga8c5b2cb7772e96f94b2fa1a96db928b5">lmm_oi_seq</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *oi)
<a name="l01561"></a>01561 {
<a name="l01562"></a>01562         <span class="keywordflow">return</span> oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq;
<a name="l01563"></a>01563 }
<a name="l01564"></a>01564 
<a name="l01565"></a><a class="code" href="group__lustreidl.html#ga903590ef8ebc640c63c1321c92d560ba">01565</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga903590ef8ebc640c63c1321c92d560ba">lmm_oi_le_to_cpu</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *dst_oi,
<a name="l01566"></a>01566                                     <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *src_oi)
<a name="l01567"></a>01567 {
<a name="l01568"></a>01568         dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = <a class="code" href="byteorder_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id);
<a name="l01569"></a>01569         dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = <a class="code" href="byteorder_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq);
<a name="l01570"></a>01570 }
<a name="l01571"></a>01571 
<a name="l01572"></a><a class="code" href="group__lustreidl.html#ga13005d50160df3cd91356819f965c211">01572</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga13005d50160df3cd91356819f965c211">lmm_oi_cpu_to_le</a>(<span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *dst_oi,
<a name="l01573"></a>01573                                     <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a> *src_oi)
<a name="l01574"></a>01574 {
<a name="l01575"></a>01575         dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id = <a class="code" href="byteorder_8h.html#aa170dc4b2dae5b00bdec3a307427240f">cpu_to_le64</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id);
<a name="l01576"></a>01576         dst_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq = <a class="code" href="byteorder_8h.html#aa170dc4b2dae5b00bdec3a307427240f">cpu_to_le64</a>(src_oi-&gt;<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq);
<a name="l01577"></a>01577 }
<a name="l01578"></a>01578 
<a name="l01579"></a><a class="code" href="group__lustreidl.html#ga5476170b22c039c7ad7587bc0908feda">01579</a> <span class="preprocessor">#define MAX_MD_SIZE (sizeof(struct lov_mds_md) + 4 * sizeof(struct lov_ost_data))</span>
<a name="l01580"></a><a class="code" href="group__lustreidl.html#gada884ec8a5dfcc16b94229cc00bf1e11">01580</a> <span class="preprocessor"></span><span class="preprocessor">#define MIN_MD_SIZE (sizeof(struct lov_mds_md) + 1 * sizeof(struct lov_ost_data))</span>
<a name="l01581"></a>01581 <span class="preprocessor"></span>
<a name="l01582"></a>01582 <span class="comment">/* This is the default MDT reply size allocated, should the striping be bigger,</span>
<a name="l01583"></a>01583 <span class="comment"> * it will be reallocated in mdt_fix_reply.</span>
<a name="l01584"></a>01584 <span class="comment"> * 100 stripes is a bit less than 2.5k of data */</span>
<a name="l01585"></a><a class="code" href="group__lustreidl.html#gab79e384c7af3a92fb24707f3f8e0e39e">01585</a> <span class="preprocessor">#define DEF_REP_MD_SIZE (sizeof(struct lov_mds_md) + \</span>
<a name="l01586"></a>01586 <span class="preprocessor">                         100 * sizeof(struct lov_ost_data))</span>
<a name="l01587"></a>01587 <span class="preprocessor"></span>
<a name="l01588"></a><a class="code" href="group__lustreidl.html#ga9c0470d187d4bcaa10ffd1019f147d2d">01588</a> <span class="preprocessor">#define XATTR_NAME_ACL_ACCESS   &quot;system.posix_acl_access&quot;</span>
<a name="l01589"></a><a class="code" href="group__lustreidl.html#ga10644762054bf09fefe2d6f0debdaef8">01589</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_ACL_DEFAULT  &quot;system.posix_acl_default&quot;</span>
<a name="l01590"></a><a class="code" href="group__lustreidl.html#ga61e0c341c646d26a7d0cc3435faba4f9">01590</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_USER_PREFIX       &quot;user.&quot;</span>
<a name="l01591"></a><a class="code" href="group__lustreidl.html#ga832941448ee0fc667828f0b98128923c">01591</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_TRUSTED_PREFIX    &quot;trusted.&quot;</span>
<a name="l01592"></a><a class="code" href="group__lustreidl.html#ga4409a68a58b74d6293fb6f25669dd408">01592</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_SECURITY_PREFIX   &quot;security.&quot;</span>
<a name="l01593"></a>01593 <span class="preprocessor"></span>
<a name="l01594"></a><a class="code" href="group__lustreidl.html#ga82abc6b3bdd7354d981236b8627a3bcc">01594</a> <span class="preprocessor">#define XATTR_NAME_LOV          &quot;trusted.lov&quot;</span>
<a name="l01595"></a><a class="code" href="group__lustreidl.html#ga23ba3b45511fcdf0b0816931592a6849">01595</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_LMA          &quot;trusted.lma&quot;</span>
<a name="l01596"></a><a class="code" href="group__lustreidl.html#ga6f9ac148544059772bcf85a2606fe0b2">01596</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_LMV          &quot;trusted.lmv&quot;</span>
<a name="l01597"></a><a class="code" href="group__lustreidl.html#ga0fe5dbf968e868c3326a1f7405d67b18">01597</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_DEFAULT_LMV  &quot;trusted.dmv&quot;</span>
<a name="l01598"></a><a class="code" href="group__lustreidl.html#gabe34338fec3bb49b20c3e980a1cb2e88">01598</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_LINK         &quot;trusted.link&quot;</span>
<a name="l01599"></a><a class="code" href="group__lustreidl.html#ga6f433d886a2e8cce3deb78b03795cf5b">01599</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_FID          &quot;trusted.fid&quot;</span>
<a name="l01600"></a><a class="code" href="group__lustreidl.html#ga0605ab86fa1814d0027c58516b50a25a">01600</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_VERSION      &quot;trusted.version&quot;</span>
<a name="l01601"></a><a class="code" href="group__lustreidl.html#ga7123b2dce8b146617adcb5239c93c362">01601</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_SOM          &quot;trusted.som&quot;</span>
<a name="l01602"></a><a class="code" href="group__lustreidl.html#ga6684d05c4ebccef629fea21a7c8c8f3d">01602</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_HSM          &quot;trusted.hsm&quot;</span>
<a name="l01603"></a><a class="code" href="group__lustreidl.html#ga1b77763fe564eae0f34514a1c9204491">01603</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_LFSCK_BITMAP &quot;trusted.lfsck_bitmap&quot;</span>
<a name="l01604"></a><a class="code" href="group__lustreidl.html#ga54047870b1bd1c4f0671214e4883fae3">01604</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_DUMMY        &quot;trusted.dummy&quot;</span>
<a name="l01605"></a>01605 <span class="preprocessor"></span>
<a name="l01606"></a><a class="code" href="group__lustreidl.html#gadf6246686d950b31f218e4f0be2f0ced">01606</a> <span class="preprocessor">#define XATTR_NAME_LFSCK_NAMESPACE &quot;trusted.lfsck_ns&quot;</span>
<a name="l01607"></a><a class="code" href="group__lustreidl.html#gaa76f1144b01fb3cc7599fb652f875f98">01607</a> <span class="preprocessor"></span><span class="preprocessor">#define XATTR_NAME_MAX_LEN      32 </span><span class="comment">/* increase this, if there is longer name. */</span>
<a name="l01608"></a>01608 
<a name="l01609"></a><a class="code" href="structlov__mds__md__v3.html">01609</a> <span class="keyword">struct </span><a class="code" href="structlov__mds__md__v3.html">lov_mds_md_v3</a> {            <span class="comment">/* LOV EA mds/wire data (little-endian) */</span>
<a name="l01610"></a><a class="code" href="structlov__mds__md__v3.html#acbe51aa6e84b66f7906eb1676eb7b1f9">01610</a>         __u32 <a class="code" href="structlov__mds__md__v3.html#acbe51aa6e84b66f7906eb1676eb7b1f9">lmm_magic</a>;          <span class="comment">/* magic number = LOV_MAGIC_V3 */</span>
<a name="l01611"></a><a class="code" href="structlov__mds__md__v3.html#acf8e27b85ec04517ddb8388fd624b985">01611</a>         __u32 <a class="code" href="structlov__mds__md__v3.html#acf8e27b85ec04517ddb8388fd624b985">lmm_pattern</a>;        <span class="comment">/* LOV_PATTERN_RAID0, LOV_PATTERN_RAID1 */</span>
<a name="l01612"></a><a class="code" href="structlov__mds__md__v3.html#aa15eff282e69177d74a1959098acd4ce">01612</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a>   <a class="code" href="structlov__mds__md__v3.html#aa15eff282e69177d74a1959098acd4ce">lmm_oi</a>;   <span class="comment">/* LOV object ID */</span>
<a name="l01613"></a><a class="code" href="structlov__mds__md__v3.html#a991fcec3bc93f9053fc4cac1eb5a4386">01613</a>         __u32 <a class="code" href="structlov__mds__md__v3.html#a991fcec3bc93f9053fc4cac1eb5a4386">lmm_stripe_size</a>;    <span class="comment">/* size of stripe in bytes */</span>
<a name="l01614"></a>01614         <span class="comment">/* lmm_stripe_count used to be __u32 */</span>
<a name="l01615"></a><a class="code" href="structlov__mds__md__v3.html#ae519466e4c5fd3ce7f0bb1cf9ee3aeea">01615</a>         __u16 <a class="code" href="structlov__mds__md__v3.html#ae519466e4c5fd3ce7f0bb1cf9ee3aeea">lmm_stripe_count</a>;   <span class="comment">/* num stripes in use for this object */</span>
<a name="l01616"></a><a class="code" href="structlov__mds__md__v3.html#af1cba5e136f3b658e4154019f939e590">01616</a>         __u16 <a class="code" href="structlov__mds__md__v3.html#af1cba5e136f3b658e4154019f939e590">lmm_layout_gen</a>;     <span class="comment">/* layout generation number */</span>
<a name="l01617"></a><a class="code" href="structlov__mds__md__v3.html#accaf13039bae665e4f7a2438a02e2bae">01617</a>         <span class="keywordtype">char</span>  <a class="code" href="structlov__mds__md__v3.html#accaf13039bae665e4f7a2438a02e2bae">lmm_pool_name</a>[<a class="code" href="group__lustreuser.html#gaff040b96729bd1570b96fa43d7b40f35">LOV_MAXPOOLNAME</a> + 1]; <span class="comment">/* must be 32bit aligned */</span>
<a name="l01618"></a><a class="code" href="structlov__mds__md__v3.html#ae564871140712c2e2a94fa7f6a228009">01618</a>         <span class="keyword">struct </span><a class="code" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> <a class="code" href="structlov__mds__md__v3.html#ae564871140712c2e2a94fa7f6a228009">lmm_objects</a>[0]; <span class="comment">/* per-stripe data */</span>
<a name="l01619"></a>01619 };
<a name="l01620"></a>01620 
<a name="l01621"></a><a class="code" href="group__lustreidl.html#ga5c64d81a7d9f9828ff94f0ce69b06864">01621</a> <span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="group__lustreidl.html#ga5c64d81a7d9f9828ff94f0ce69b06864">lov_mds_md_size</a>(__u16 <a class="code" href="mdsrate_8c.html#ad772c21043d0158114c40cad5c2f3d4c">stripes</a>, __u32 lmm_magic)
<a name="l01622"></a>01622 {
<a name="l01623"></a>01623         <span class="keywordflow">if</span> (lmm_magic == <a class="code" href="group__lustreidl.html#gae8cb34c56846064d179aa2d4aeddbece">LOV_MAGIC_V3</a>)
<a name="l01624"></a>01624                 <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlov__mds__md__v3.html">lov_mds_md_v3</a>) +
<a name="l01625"></a>01625                                 stripes * <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlov__ost__data__v1.html">lov_ost_data_v1</a>);
<a name="l01626"></a>01626         <span class="keywordflow">else</span>
<a name="l01627"></a>01627                 <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlov__mds__md__v1.html">lov_mds_md_v1</a>) +
<a name="l01628"></a>01628                                 stripes * <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlov__ost__data__v1.html">lov_ost_data_v1</a>);
<a name="l01629"></a>01629 }
<a name="l01630"></a>01630 
<a name="l01631"></a>01631 <span class="keyword">static</span> <span class="keyword">inline</span> __u32
<a name="l01632"></a><a class="code" href="group__lustreidl.html#ga7de74624f0b73eea9633e5121e41e690">01632</a> <a class="code" href="group__lustreidl.html#ga7de74624f0b73eea9633e5121e41e690">lov_mds_md_max_stripe_count</a>(<span class="keywordtype">size_t</span> buf_size, __u32 lmm_magic)
<a name="l01633"></a>01633 {
<a name="l01634"></a>01634         <span class="keywordflow">switch</span> (lmm_magic) {
<a name="l01635"></a>01635         <span class="keywordflow">case</span> <a class="code" href="packet-lustre_8c.html#ada11336fa80616348f207b7629418f0b">LOV_MAGIC_V1</a>: {
<a name="l01636"></a>01636                 <span class="keyword">struct </span><a class="code" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> lmm;
<a name="l01637"></a>01637 
<a name="l01638"></a>01638                 <span class="keywordflow">if</span> (buf_size &lt; <span class="keyword">sizeof</span>(lmm))
<a name="l01639"></a>01639                         <span class="keywordflow">return</span> 0;
<a name="l01640"></a>01640 
<a name="l01641"></a>01641                 <span class="keywordflow">return</span> (buf_size - <span class="keyword">sizeof</span>(lmm)) / <span class="keyword">sizeof</span>(lmm.<a class="code" href="structlov__mds__md__v1.html#af4f73d20b2731ce42fba441c2b61d807">lmm_objects</a>[0]);
<a name="l01642"></a>01642         }
<a name="l01643"></a>01643         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#gae8cb34c56846064d179aa2d4aeddbece">LOV_MAGIC_V3</a>: {
<a name="l01644"></a>01644                 <span class="keyword">struct </span><a class="code" href="structlov__mds__md__v3.html">lov_mds_md_v3</a> lmm;
<a name="l01645"></a>01645 
<a name="l01646"></a>01646                 <span class="keywordflow">if</span> (buf_size &lt; <span class="keyword">sizeof</span>(lmm))
<a name="l01647"></a>01647                         <span class="keywordflow">return</span> 0;
<a name="l01648"></a>01648 
<a name="l01649"></a>01649                 <span class="keywordflow">return</span> (buf_size - <span class="keyword">sizeof</span>(lmm)) / <span class="keyword">sizeof</span>(lmm.<a class="code" href="structlov__mds__md__v3.html#ae564871140712c2e2a94fa7f6a228009">lmm_objects</a>[0]);
<a name="l01650"></a>01650         }
<a name="l01651"></a>01651         <span class="keywordflow">default</span>:
<a name="l01652"></a>01652                 <span class="keywordflow">return</span> 0;
<a name="l01653"></a>01653         }
<a name="l01654"></a>01654 }
<a name="l01655"></a>01655 
<a name="l01656"></a><a class="code" href="group__lustreidl.html#ga2e8f30d9b26c4985fd2fb686cabaa1b6">01656</a> <span class="preprocessor">#define OBD_MD_FLID        (0x00000001ULL) </span><span class="comment">/* object ID */</span>
<a name="l01657"></a><a class="code" href="group__lustreidl.html#ga16c7309c5c639a04e530c54874dc2d17">01657</a> <span class="preprocessor">#define OBD_MD_FLATIME     (0x00000002ULL) </span><span class="comment">/* access time */</span>
<a name="l01658"></a><a class="code" href="group__lustreidl.html#ga9821990b5b356600bc6c27b9c6ee99b7">01658</a> <span class="preprocessor">#define OBD_MD_FLMTIME     (0x00000004ULL) </span><span class="comment">/* data modification time */</span>
<a name="l01659"></a><a class="code" href="group__lustreidl.html#ga766c92a3dc8cd7907c01c9605593a38a">01659</a> <span class="preprocessor">#define OBD_MD_FLCTIME     (0x00000008ULL) </span><span class="comment">/* change time */</span>
<a name="l01660"></a><a class="code" href="group__lustreidl.html#ga1dd583375ea509f04945ef68fbcb46e8">01660</a> <span class="preprocessor">#define OBD_MD_FLSIZE      (0x00000010ULL) </span><span class="comment">/* size */</span>
<a name="l01661"></a><a class="code" href="group__lustreidl.html#ga855af6035d66c69ff392f2f25efcf6bb">01661</a> <span class="preprocessor">#define OBD_MD_FLBLOCKS    (0x00000020ULL) </span><span class="comment">/* allocated blocks count */</span>
<a name="l01662"></a><a class="code" href="group__lustreidl.html#ga0e836c19bb20865ba94baba369be188c">01662</a> <span class="preprocessor">#define OBD_MD_FLBLKSZ     (0x00000040ULL) </span><span class="comment">/* block size */</span>
<a name="l01663"></a><a class="code" href="group__lustreidl.html#gaca15d069858d54a300fba1bb6ac56f22">01663</a> <span class="preprocessor">#define OBD_MD_FLMODE      (0x00000080ULL) </span><span class="comment">/* access bits (mode &amp; ~S_IFMT) */</span>
<a name="l01664"></a><a class="code" href="group__lustreidl.html#ga2e19bb58077cca13212ca78a6b355363">01664</a> <span class="preprocessor">#define OBD_MD_FLTYPE      (0x00000100ULL) </span><span class="comment">/* object type (mode &amp; S_IFMT) */</span>
<a name="l01665"></a><a class="code" href="group__lustreidl.html#ga80680d36ac760d896540bfd9291b2a80">01665</a> <span class="preprocessor">#define OBD_MD_FLUID       (0x00000200ULL) </span><span class="comment">/* user ID */</span>
<a name="l01666"></a><a class="code" href="group__lustreidl.html#ga2dc4d52439af7e068c1c6b150821e66c">01666</a> <span class="preprocessor">#define OBD_MD_FLGID       (0x00000400ULL) </span><span class="comment">/* group ID */</span>
<a name="l01667"></a><a class="code" href="group__lustreidl.html#ga4a3edb54367cb7a576d55e717d11d569">01667</a> <span class="preprocessor">#define OBD_MD_FLFLAGS     (0x00000800ULL) </span><span class="comment">/* flags word */</span>
<a name="l01668"></a><a class="code" href="group__lustreidl.html#gae64278d2583eb9547a14eb915347ce22">01668</a> <span class="preprocessor">#define OBD_MD_FLNLINK     (0x00002000ULL) </span><span class="comment">/* link count */</span>
<a name="l01669"></a><a class="code" href="group__lustreidl.html#ga586968eb6f1213407a2e1552f1fa8e5e">01669</a> <span class="preprocessor">#define OBD_MD_FLGENER     (0x00004000ULL) </span><span class="comment">/* generation number */</span>
<a name="l01670"></a>01670 <span class="comment">/*#define OBD_MD_FLINLINE    (0x00008000ULL)  inline data. used until 1.6.5 */</span>
<a name="l01671"></a><a class="code" href="group__lustreidl.html#ga11e0758d63f8fb18ae5a079b9d2455e0">01671</a> <span class="preprocessor">#define OBD_MD_FLRDEV      (0x00010000ULL) </span><span class="comment">/* device number */</span>
<a name="l01672"></a><a class="code" href="group__lustreidl.html#gaf6b704abd564fda328839ddc4a189e5e">01672</a> <span class="preprocessor">#define OBD_MD_FLEASIZE    (0x00020000ULL) </span><span class="comment">/* extended attribute data */</span>
<a name="l01673"></a><a class="code" href="group__lustreidl.html#gad63284a85f025a5ed811b6de37274940">01673</a> <span class="preprocessor">#define OBD_MD_LINKNAME    (0x00040000ULL) </span><span class="comment">/* symbolic link target */</span>
<a name="l01674"></a><a class="code" href="group__lustreidl.html#gaf2a9ddc93e62b79d118dcb7cf2d40299">01674</a> <span class="preprocessor">#define OBD_MD_FLHANDLE    (0x00080000ULL) </span><span class="comment">/* file/lock handle */</span>
<a name="l01675"></a><a class="code" href="group__lustreidl.html#gac9c4291663ad6019ca07d368e6d1637b">01675</a> <span class="preprocessor">#define OBD_MD_FLCKSUM     (0x00100000ULL) </span><span class="comment">/* bulk data checksum */</span>
<a name="l01676"></a><a class="code" href="group__lustreidl.html#gab6af8f0e11c55df67a53b15db5d8e0a4">01676</a> <span class="preprocessor">#define OBD_MD_FLQOS       (0x00200000ULL) </span><span class="comment">/* quality of service stats */</span>
<a name="l01677"></a>01677 <span class="comment">/*#define OBD_MD_FLOSCOPQ    (0x00400000ULL) osc opaque data, never used */</span>
<a name="l01678"></a>01678 <span class="comment">/*      OBD_MD_FLCOOKIE    (0x00800000ULL)    obsolete in 2.8 */</span>
<a name="l01679"></a><a class="code" href="group__lustreidl.html#ga1fb8147fa29c56130f65186326126353">01679</a> <span class="preprocessor">#define OBD_MD_FLGROUP     (0x01000000ULL) </span><span class="comment">/* group */</span>
<a name="l01680"></a><a class="code" href="group__lustreidl.html#ga9e1f3283939c1689d17be2824e262c8a">01680</a> <span class="preprocessor">#define OBD_MD_FLFID       (0x02000000ULL) </span><span class="comment">/* -&gt;ost write inline fid */</span>
<a name="l01681"></a><a class="code" href="group__lustreidl.html#ga18e4e2b1736b078b6b929ad4cc764e57">01681</a> <span class="preprocessor">#define OBD_MD_FLEPOCH     (0x04000000ULL) </span><span class="comment">/* -&gt;ost write with ioepoch */</span>
<a name="l01682"></a>01682                                            <span class="comment">/* -&gt;mds if epoch opens or closes */</span>
<a name="l01683"></a><a class="code" href="group__lustreidl.html#ga5acd524f7c56dec4c715418b9cf51c1b">01683</a> <span class="preprocessor">#define OBD_MD_FLGRANT     (0x08000000ULL) </span><span class="comment">/* ost preallocation space grant */</span>
<a name="l01684"></a><a class="code" href="group__lustreidl.html#gabdeac1706a55137ccedcc71a13de4836">01684</a> <span class="preprocessor">#define OBD_MD_FLDIREA     (0x10000000ULL) </span><span class="comment">/* dir&apos;s extended attribute data */</span>
<a name="l01685"></a><a class="code" href="group__lustreidl.html#ga72239cea00c6cd09f89e8259e05c18e6">01685</a> <span class="preprocessor">#define OBD_MD_FLUSRQUOTA  (0x20000000ULL) </span><span class="comment">/* over quota flags sent from ost */</span>
<a name="l01686"></a><a class="code" href="group__lustreidl.html#ga6dbdc4dc42d3bec1f591de4cd9d231c8">01686</a> <span class="preprocessor">#define OBD_MD_FLGRPQUOTA  (0x40000000ULL) </span><span class="comment">/* over quota flags sent from ost */</span>
<a name="l01687"></a><a class="code" href="group__lustreidl.html#ga08221f78680a03ef54897f8c368bb3fd">01687</a> <span class="preprocessor">#define OBD_MD_FLMODEASIZE (0x80000000ULL) </span><span class="comment">/* EA size will be changed */</span>
<a name="l01688"></a>01688 
<a name="l01689"></a><a class="code" href="group__lustreidl.html#ga9cad3716fc653975a6f2e1853515c49f">01689</a> <span class="preprocessor">#define OBD_MD_MDS         (0x0000000100000000ULL) </span><span class="comment">/* where an inode lives on */</span>
<a name="l01690"></a><a class="code" href="group__lustreidl.html#ga537b165c524e3a40b7c89093ebf9688f">01690</a> <span class="preprocessor">#define OBD_MD_REINT       (0x0000000200000000ULL) </span><span class="comment">/* reintegrate oa */</span>
<a name="l01691"></a><a class="code" href="group__lustreidl.html#ga1dbe0542524f2a2ae074fcbba017fd08">01691</a> <span class="preprocessor">#define OBD_MD_MEA         (0x0000000400000000ULL) </span><span class="comment">/* CMD split EA  */</span>
<a name="l01692"></a><a class="code" href="group__lustreidl.html#ga12b30f93d440270a05094b04531a2cbc">01692</a> <span class="preprocessor">#define OBD_MD_TSTATE      (0x0000000800000000ULL) </span><span class="comment">/* transient state field */</span>
<a name="l01693"></a>01693 
<a name="l01694"></a><a class="code" href="group__lustreidl.html#ga6b3a0ed5b403f8d16300fb9a5e688bee">01694</a> <span class="preprocessor">#define OBD_MD_FLXATTR       (0x0000001000000000ULL) </span><span class="comment">/* xattr */</span>
<a name="l01695"></a><a class="code" href="group__lustreidl.html#gadc688242c0b04b699474b3867b7ed952">01695</a> <span class="preprocessor">#define OBD_MD_FLXATTRLS     (0x0000002000000000ULL) </span><span class="comment">/* xattr list */</span>
<a name="l01696"></a><a class="code" href="group__lustreidl.html#ga74db72092bc2dbe2567cb2d1b534267e">01696</a> <span class="preprocessor">#define OBD_MD_FLXATTRRM     (0x0000004000000000ULL) </span><span class="comment">/* xattr remove */</span>
<a name="l01697"></a><a class="code" href="group__lustreidl.html#ga32846f9358d20525fea3273a209f33f1">01697</a> <span class="preprocessor">#define OBD_MD_FLACL         (0x0000008000000000ULL) </span><span class="comment">/* ACL */</span>
<a name="l01698"></a><a class="code" href="group__lustreidl.html#ga2c0b6a4fd09defb807a7c53478fdef57">01698</a> <span class="preprocessor">#define OBD_MD_FLRMTPERM     (0x0000010000000000ULL) </span><span class="comment">/* remote permission */</span>
<a name="l01699"></a><a class="code" href="group__lustreidl.html#gadffc76a5fa84efc06849e525a3ea0ca0">01699</a> <span class="preprocessor">#define OBD_MD_FLMDSCAPA     (0x0000020000000000ULL) </span><span class="comment">/* MDS capability */</span>
<a name="l01700"></a><a class="code" href="group__lustreidl.html#ga198153280100a22aec38fdfe887ad16b">01700</a> <span class="preprocessor">#define OBD_MD_FLOSSCAPA     (0x0000040000000000ULL) </span><span class="comment">/* OSS capability */</span>
<a name="l01701"></a><a class="code" href="group__lustreidl.html#ga814c2b4b3ed04510e3defe781c3982f1">01701</a> <span class="preprocessor">#define OBD_MD_FLCKSPLIT     (0x0000080000000000ULL) </span><span class="comment">/* Check split on server */</span>
<a name="l01702"></a><a class="code" href="group__lustreidl.html#ga0d85ced5d4204c051bf228079caa85dc">01702</a> <span class="preprocessor">#define OBD_MD_FLCROSSREF    (0x0000100000000000ULL) </span><span class="comment">/* Cross-ref case */</span>
<a name="l01703"></a><a class="code" href="group__lustreidl.html#ga26cd71a70675e53ee66822907978df85">01703</a> <span class="preprocessor">#define OBD_MD_FLGETATTRLOCK (0x0000200000000000ULL) </span><span class="comment">/* Get IOEpoch attributes</span>
<a name="l01704"></a>01704 <span class="comment">                                                      * under lock; for xattr</span>
<a name="l01705"></a>01705 <span class="comment">                                                      * requests means the</span>
<a name="l01706"></a>01706 <span class="comment">                                                      * client holds the lock */</span>
<a name="l01707"></a><a class="code" href="group__lustreidl.html#ga61a868805ef039563b35b49cee0a85cb">01707</a> <span class="preprocessor">#define OBD_MD_FLOBJCOUNT    (0x0000400000000000ULL) </span><span class="comment">/* for multiple destroy */</span>
<a name="l01708"></a>01708 
<a name="l01709"></a><a class="code" href="group__lustreidl.html#gaac99d741e438562118d58ecb1a3bd522">01709</a> <span class="preprocessor">#define OBD_MD_FLRMTLSETFACL (0x0001000000000000ULL) </span><span class="comment">/* lfs lsetfacl case */</span>
<a name="l01710"></a><a class="code" href="group__lustreidl.html#gaaf51eac316cfc1077240fcb08b11465d">01710</a> <span class="preprocessor">#define OBD_MD_FLRMTLGETFACL (0x0002000000000000ULL) </span><span class="comment">/* lfs lgetfacl case */</span>
<a name="l01711"></a><a class="code" href="group__lustreidl.html#ga8c9fb315bf0f98b83afbc82c443555c3">01711</a> <span class="preprocessor">#define OBD_MD_FLRMTRSETFACL (0x0004000000000000ULL) </span><span class="comment">/* lfs rsetfacl case */</span>
<a name="l01712"></a><a class="code" href="group__lustreidl.html#gad51c6520aba5c9d5414bdf2eb88a8a51">01712</a> <span class="preprocessor">#define OBD_MD_FLRMTRGETFACL (0x0008000000000000ULL) </span><span class="comment">/* lfs rgetfacl case */</span>
<a name="l01713"></a>01713 
<a name="l01714"></a><a class="code" href="group__lustreidl.html#ga1db402562320af8cf1a5512f48884c0e">01714</a> <span class="preprocessor">#define OBD_MD_FLDATAVERSION (0x0010000000000000ULL) </span><span class="comment">/* iversion sum */</span>
<a name="l01715"></a><a class="code" href="group__lustreidl.html#ga207cc7554367f52e21f60c88c0e26445">01715</a> <span class="preprocessor">#define OBD_MD_CLOSE_INTENT_EXECED (0x0020000000000000ULL) </span><span class="comment">/* close intent</span>
<a name="l01716"></a>01716 <span class="comment">                                                              executed */</span>
<a name="l01717"></a>01717 
<a name="l01718"></a><a class="code" href="group__lustreidl.html#ga5653803e7a876d1aa066a5f8fbcd4272">01718</a> <span class="preprocessor">#define OBD_MD_DEFAULT_MEA   (0x0040000000000000ULL) </span><span class="comment">/* default MEA */</span>
<a name="l01719"></a>01719 
<a name="l01720"></a><a class="code" href="group__lustreidl.html#ga98f12c8079245e18a8a41dc79630cc81">01720</a> <span class="preprocessor">#define OBD_MD_FLGETATTR (OBD_MD_FLID    | OBD_MD_FLATIME | OBD_MD_FLMTIME | \</span>
<a name="l01721"></a>01721 <span class="preprocessor">                          OBD_MD_FLCTIME | OBD_MD_FLSIZE  | OBD_MD_FLBLKSZ | \</span>
<a name="l01722"></a>01722 <span class="preprocessor">                          OBD_MD_FLMODE  | OBD_MD_FLTYPE  | OBD_MD_FLUID   | \</span>
<a name="l01723"></a>01723 <span class="preprocessor">                          OBD_MD_FLGID   | OBD_MD_FLFLAGS | OBD_MD_FLNLINK | \</span>
<a name="l01724"></a>01724 <span class="preprocessor">                          OBD_MD_FLGENER | OBD_MD_FLRDEV  | OBD_MD_FLGROUP)</span>
<a name="l01725"></a>01725 <span class="preprocessor"></span>
<a name="l01726"></a><a class="code" href="group__lustreidl.html#gaddc4aac93b03963b5879c6bfb389cfe7">01726</a> <span class="preprocessor">#define OBD_MD_FLXATTRALL (OBD_MD_FLXATTR | OBD_MD_FLXATTRLS)</span>
<a name="l01727"></a>01727 <span class="preprocessor"></span>
<a name="l01728"></a>01728 <span class="comment">/* don&apos;t forget obdo_fid which is way down at the bottom so it can</span>
<a name="l01729"></a>01729 <span class="comment"> * come after the definition of llog_cookie */</span>
<a name="l01730"></a>01730 
<a name="l01731"></a><a class="code" href="group__lustreidl.html#ga741de3d43e94a7d3c36ed3832c4cd076">01731</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga741de3d43e94a7d3c36ed3832c4cd076">hss_valid</a> {
<a name="l01732"></a><a class="code" href="group__lustreidl.html#gga741de3d43e94a7d3c36ed3832c4cd076a9031d0f91b4ef9384898f22374d1e2d7">01732</a>         <a class="code" href="group__lustreidl.html#gga741de3d43e94a7d3c36ed3832c4cd076a9031d0f91b4ef9384898f22374d1e2d7">HSS_SETMASK</a>     = 0x01,
<a name="l01733"></a><a class="code" href="group__lustreidl.html#gga741de3d43e94a7d3c36ed3832c4cd076aced73eaf8edbc7ca89ef542bad90a1cb">01733</a>         <a class="code" href="group__lustreidl.html#gga741de3d43e94a7d3c36ed3832c4cd076aced73eaf8edbc7ca89ef542bad90a1cb">HSS_CLEARMASK</a>   = 0x02,
<a name="l01734"></a><a class="code" href="group__lustreidl.html#gga741de3d43e94a7d3c36ed3832c4cd076a07aa45d212bb6b8f5e05a118931fe6d4">01734</a>         <a class="code" href="group__lustreidl.html#gga741de3d43e94a7d3c36ed3832c4cd076a07aa45d212bb6b8f5e05a118931fe6d4">HSS_ARCHIVE_ID</a>  = 0x04,
<a name="l01735"></a>01735 };
<a name="l01736"></a>01736 
<a name="l01737"></a><a class="code" href="structhsm__state__set.html">01737</a> <span class="keyword">struct </span><a class="code" href="structhsm__state__set.html">hsm_state_set</a> {
<a name="l01738"></a><a class="code" href="structhsm__state__set.html#ad4cb9fa809ce8eaa400880e918367c45">01738</a>         __u32   <a class="code" href="group__lustreidl.html#ga741de3d43e94a7d3c36ed3832c4cd076">hss_valid</a>;
<a name="l01739"></a><a class="code" href="structhsm__state__set.html#a0442a3c49dc33809ab6c12a85a171dd1">01739</a>         __u32   <a class="code" href="structhsm__state__set.html#a0442a3c49dc33809ab6c12a85a171dd1">hss_archive_id</a>;
<a name="l01740"></a><a class="code" href="structhsm__state__set.html#aa90d5b674d42639f71b19ec49c61078d">01740</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structhsm__state__set.html#aa90d5b674d42639f71b19ec49c61078d">hss_setmask</a>;
<a name="l01741"></a><a class="code" href="structhsm__state__set.html#a494dd19881d8e68f8acc8999ecefa04d">01741</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structhsm__state__set.html#a494dd19881d8e68f8acc8999ecefa04d">hss_clearmask</a>;
<a name="l01742"></a>01742 };
<a name="l01743"></a>01743 
<a name="l01744"></a>01744 <span class="comment">/* ost_body.data values for OST_BRW */</span>
<a name="l01745"></a>01745 
<a name="l01746"></a><a class="code" href="group__lustreidl.html#ga8ce56382e7157587c1fb9480de8e4fad">01746</a> <span class="preprocessor">#define OBD_BRW_READ            0x01</span>
<a name="l01747"></a><a class="code" href="group__lustreidl.html#ga305b994a950a9c0085eaa60eab16ea95">01747</a> <span class="preprocessor"></span><span class="preprocessor">#define OBD_BRW_WRITE           0x02</span>
<a name="l01748"></a><a class="code" href="group__lustreidl.html#ga5b12944a6770505827c61b499db90c29">01748</a> <span class="preprocessor"></span><span class="preprocessor">#define OBD_BRW_RWMASK          (OBD_BRW_READ | OBD_BRW_WRITE)</span>
<a name="l01749"></a><a class="code" href="group__lustreidl.html#gaff5f1d95436a3a173e262c11fe628ac2">01749</a> <span class="preprocessor"></span><span class="preprocessor">#define OBD_BRW_SYNC            0x08 </span><span class="comment">/* this page is a part of synchronous</span>
<a name="l01750"></a>01750 <span class="comment">                                      * transfer and is not accounted in</span>
<a name="l01751"></a>01751 <span class="comment">                                      * the grant. */</span>
<a name="l01752"></a><a class="code" href="group__lustreidl.html#ga7d3f8bf7180490ef78d2cc530ebaf2b3">01752</a> <span class="preprocessor">#define OBD_BRW_CHECK           0x10</span>
<a name="l01753"></a><a class="code" href="group__lustreidl.html#ga08fd0d4347db03b621c590d2a8dd6603">01753</a> <span class="preprocessor"></span><span class="preprocessor">#define OBD_BRW_FROM_GRANT      0x20 </span><span class="comment">/* the osc manages this under llite */</span>
<a name="l01754"></a><a class="code" href="group__lustreidl.html#ga074e602b9fbb352b4d9b0891185068ef">01754</a> <span class="preprocessor">#define OBD_BRW_GRANTED         0x40 </span><span class="comment">/* the ost manages this */</span>
<a name="l01755"></a><a class="code" href="group__lustreidl.html#gab59f8478c7b96ec313d0fd3a43821236">01755</a> <span class="preprocessor">#define OBD_BRW_NOCACHE         0x80 </span><span class="comment">/* this page is a part of non-cached IO */</span>
<a name="l01756"></a><a class="code" href="group__lustreidl.html#gac1e0b58baa2b71b695ddd819b4a73430">01756</a> <span class="preprocessor">#define OBD_BRW_NOQUOTA        0x100</span>
<a name="l01757"></a><a class="code" href="group__lustreidl.html#ga5effa42cbf2a80561a3ee7c39a25b1b5">01757</a> <span class="preprocessor"></span><span class="preprocessor">#define OBD_BRW_SRVLOCK        0x200 </span><span class="comment">/* Client holds no lock over this page */</span>
<a name="l01758"></a><a class="code" href="group__lustreidl.html#ga3cf89b7ab440764cd6c39eb1d88337bb">01758</a> <span class="preprocessor">#define OBD_BRW_ASYNC          0x400 </span><span class="comment">/* Server may delay commit to disk */</span>
<a name="l01759"></a><a class="code" href="group__lustreidl.html#ga897ed2cc9efd80630af912121b1f48da">01759</a> <span class="preprocessor">#define OBD_BRW_MEMALLOC       0x800 </span><span class="comment">/* Client runs in the &quot;kswapd&quot; context */</span>
<a name="l01760"></a><a class="code" href="group__lustreidl.html#ga6c6ab1e3c62a22be1ce9bb1b4dc84ef7">01760</a> <span class="preprocessor">#define OBD_BRW_OVER_USRQUOTA 0x1000 </span><span class="comment">/* Running out of user quota */</span>
<a name="l01761"></a><a class="code" href="group__lustreidl.html#ga22acbdfcaa10019b68dc2c5cc920f7a5">01761</a> <span class="preprocessor">#define OBD_BRW_OVER_GRPQUOTA 0x2000 </span><span class="comment">/* Running out of group quota */</span>
<a name="l01762"></a><a class="code" href="group__lustreidl.html#ga1d34ac77a7ac74cfc9128af89bd5a7df">01762</a> <span class="preprocessor">#define OBD_BRW_SOFT_SYNC     0x4000 </span><span class="comment">/* This flag notifies the server</span>
<a name="l01763"></a>01763 <span class="comment">                                      * that the client is running low on</span>
<a name="l01764"></a>01764 <span class="comment">                                      * space for unstable pages; asking</span>
<a name="l01765"></a>01765 <span class="comment">                                      * it to sync quickly */</span>
<a name="l01766"></a>01766 
<a name="l01767"></a><a class="code" href="group__lustreidl.html#gaf12bcea9d603cdae847ff2fad712fc77">01767</a> <span class="preprocessor">#define OBD_OBJECT_EOF LUSTRE_EOF</span>
<a name="l01768"></a>01768 <span class="preprocessor"></span>
<a name="l01769"></a><a class="code" href="group__lustreidl.html#gabef4da4aa67dd28560463b77b81e24dc">01769</a> <span class="preprocessor">#define OST_MIN_PRECREATE 32</span>
<a name="l01770"></a><a class="code" href="group__lustreidl.html#gabc914cd261f14409f248b96b5e5b70d9">01770</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_MAX_PRECREATE 20000</span>
<a name="l01771"></a>01771 <span class="preprocessor"></span>
<a name="l01772"></a><a class="code" href="structobd__ioobj.html">01772</a> <span class="keyword">struct </span><a class="code" href="structobd__ioobj.html">obd_ioobj</a> {
<a name="l01773"></a><a class="code" href="structobd__ioobj.html#aa48d826cec9e602ae5f62cd026c489d2">01773</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a>   <a class="code" href="structobd__ioobj.html#aa48d826cec9e602ae5f62cd026c489d2">ioo_oid</a>;        <span class="comment">/* object ID, if multi-obj BRW */</span>
<a name="l01774"></a><a class="code" href="structobd__ioobj.html#a5406884eaae32b0a6c335e2e8bc40605">01774</a>         __u32           <a class="code" href="structobd__ioobj.html#a5406884eaae32b0a6c335e2e8bc40605">ioo_max_brw</a>;    <span class="comment">/* low 16 bits were o_mode before 2.4,</span>
<a name="l01775"></a>01775 <span class="comment">                                         * now (PTLRPC_BULK_OPS_COUNT - 1) in</span>
<a name="l01776"></a>01776 <span class="comment">                                         * high 16 bits in 2.4 and later */</span>
<a name="l01777"></a><a class="code" href="structobd__ioobj.html#acc084a016e4057c2b4e4ba299f940aae">01777</a>         __u32           <a class="code" href="structobd__ioobj.html#acc084a016e4057c2b4e4ba299f940aae">ioo_bufcnt</a>;     <span class="comment">/* number of niobufs for this object */</span>
<a name="l01778"></a>01778 };
<a name="l01779"></a>01779 
<a name="l01780"></a>01780 <span class="comment">/* NOTE: IOOBJ_MAX_BRW_BITS defines the _offset_ of the max_brw field in</span>
<a name="l01781"></a>01781 <span class="comment"> * ioo_max_brw, NOT the maximum number of bits in PTLRPC_BULK_OPS_BITS.</span>
<a name="l01782"></a>01782 <span class="comment"> * That said, ioo_max_brw is a 32-bit field so the limit is also 16 bits. */</span>
<a name="l01783"></a><a class="code" href="group__lustreidl.html#ga64e155fc7a95aebaf5463b0752a38445">01783</a> <span class="preprocessor">#define IOOBJ_MAX_BRW_BITS      16</span>
<a name="l01784"></a><a class="code" href="group__lustreidl.html#gabdbb6f80883603bf20acf22cc36c07da">01784</a> <span class="preprocessor"></span><span class="preprocessor">#define ioobj_max_brw_get(ioo)  (((ioo)-&gt;ioo_max_brw &gt;&gt; IOOBJ_MAX_BRW_BITS) + 1)</span>
<a name="l01785"></a><a class="code" href="group__lustreidl.html#gaee5db82571f76246ac6132fc3ba0f6a7">01785</a> <span class="preprocessor"></span><span class="preprocessor">#define ioobj_max_brw_set(ioo, num)                                     \</span>
<a name="l01786"></a>01786 <span class="preprocessor">do { (ioo)-&gt;ioo_max_brw = ((num) - 1) &lt;&lt; IOOBJ_MAX_BRW_BITS; } while (0)</span>
<a name="l01787"></a>01787 <span class="preprocessor"></span>
<a name="l01788"></a>01788 <span class="comment">/* multiple of 8 bytes =&gt; can array */</span>
<a name="l01789"></a><a class="code" href="structniobuf__remote.html">01789</a> <span class="keyword">struct </span><a class="code" href="structniobuf__remote.html">niobuf_remote</a> {
<a name="l01790"></a><a class="code" href="structniobuf__remote.html#af3d2780ccf8895eab786247d4f69418f">01790</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structniobuf__remote.html#af3d2780ccf8895eab786247d4f69418f">rnb_offset</a>;
<a name="l01791"></a><a class="code" href="structniobuf__remote.html#aa99016bb10a3ca18e16121bd181770fe">01791</a>         __u32   <a class="code" href="structniobuf__remote.html#aa99016bb10a3ca18e16121bd181770fe">rnb_len</a>;
<a name="l01792"></a><a class="code" href="structniobuf__remote.html#aa9a6fcbad64c4395cc6d95bee4bb9f8a">01792</a>         __u32   <a class="code" href="structniobuf__remote.html#aa9a6fcbad64c4395cc6d95bee4bb9f8a">rnb_flags</a>;
<a name="l01793"></a>01793 };
<a name="l01794"></a>01794 
<a name="l01795"></a>01795 <span class="comment">/* lock value block communicated between the filter and llite */</span>
<a name="l01796"></a>01796 
<a name="l01797"></a>01797 <span class="comment">/* OST_LVB_ERR_INIT is needed because the return code in rc is</span>
<a name="l01798"></a>01798 <span class="comment"> * negative, i.e. because ((MASK + rc) &amp; MASK) != MASK. */</span>
<a name="l01799"></a><a class="code" href="group__lustreidl.html#ga48cae72291b3c59b9d2af4d433008a4e">01799</a> <span class="preprocessor">#define OST_LVB_ERR_INIT 0xffbadbad80000000ULL</span>
<a name="l01800"></a><a class="code" href="group__lustreidl.html#ga9e6e89c3da38fc7f77cbcb4ce3e13c49">01800</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_LVB_ERR_MASK 0xffbadbad00000000ULL</span>
<a name="l01801"></a><a class="code" href="group__lustreidl.html#ga3940fc341b71283f42d5a92cf8541e35">01801</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_LVB_IS_ERR(blocks)                                          \</span>
<a name="l01802"></a>01802 <span class="preprocessor">        ((blocks &amp; OST_LVB_ERR_MASK) == OST_LVB_ERR_MASK)</span>
<a name="l01803"></a><a class="code" href="group__lustreidl.html#ga5192b98576ad7af943260df2d63abdad">01803</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_LVB_SET_ERR(blocks, rc)                                     \</span>
<a name="l01804"></a>01804 <span class="preprocessor">        do { blocks = OST_LVB_ERR_INIT + rc; } while (0)</span>
<a name="l01805"></a><a class="code" href="group__lustreidl.html#gaa5cf15925970afcdaa796301e9795bcc">01805</a> <span class="preprocessor"></span><span class="preprocessor">#define OST_LVB_GET_ERR(blocks)    (int)(blocks - OST_LVB_ERR_INIT)</span>
<a name="l01806"></a>01806 <span class="preprocessor"></span>
<a name="l01807"></a><a class="code" href="structost__lvb__v1.html">01807</a> <span class="keyword">struct </span><a class="code" href="structost__lvb__v1.html">ost_lvb_v1</a> {
<a name="l01808"></a><a class="code" href="structost__lvb__v1.html#ace7a022282237c385edbad1c82594640">01808</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structost__lvb__v1.html#ace7a022282237c385edbad1c82594640">lvb_size</a>;
<a name="l01809"></a><a class="code" href="structost__lvb__v1.html#abdb368a7889885f49c62cbbdb6c953de">01809</a>         __s64   <a class="code" href="structost__lvb__v1.html#abdb368a7889885f49c62cbbdb6c953de">lvb_mtime</a>;
<a name="l01810"></a><a class="code" href="structost__lvb__v1.html#a5470704f8ad54d5c96ac727c2516f62d">01810</a>         __s64   <a class="code" href="structost__lvb__v1.html#a5470704f8ad54d5c96ac727c2516f62d">lvb_atime</a>;
<a name="l01811"></a><a class="code" href="structost__lvb__v1.html#a73dd3289d98a372cbc01b71b0af5a4f8">01811</a>         __s64   <a class="code" href="structost__lvb__v1.html#a73dd3289d98a372cbc01b71b0af5a4f8">lvb_ctime</a>;
<a name="l01812"></a><a class="code" href="structost__lvb__v1.html#a45be32aa5a87cedd52b8d3452123b0b1">01812</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structost__lvb__v1.html#a45be32aa5a87cedd52b8d3452123b0b1">lvb_blocks</a>;
<a name="l01813"></a>01813 };
<a name="l01814"></a>01814 
<a name="l01815"></a><a class="code" href="structost__lvb.html">01815</a> <span class="keyword">struct </span><a class="code" href="structost__lvb.html">ost_lvb</a> {
<a name="l01816"></a><a class="code" href="structost__lvb.html#a6e02b563ed2659d7fa0dfed6865db416">01816</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structost__lvb.html#a6e02b563ed2659d7fa0dfed6865db416">lvb_size</a>;
<a name="l01817"></a><a class="code" href="structost__lvb.html#a7deb2297b19d3bd30999a7080e1c9958">01817</a>         __s64   <a class="code" href="structost__lvb.html#a7deb2297b19d3bd30999a7080e1c9958">lvb_mtime</a>;
<a name="l01818"></a><a class="code" href="structost__lvb.html#aaaef6b18a0f1fc3555f89fddc070f3d3">01818</a>         __s64   <a class="code" href="structost__lvb.html#aaaef6b18a0f1fc3555f89fddc070f3d3">lvb_atime</a>;
<a name="l01819"></a><a class="code" href="structost__lvb.html#aa4d41257b0d3fa34f0e37ee2c416655a">01819</a>         __s64   <a class="code" href="structost__lvb.html#aa4d41257b0d3fa34f0e37ee2c416655a">lvb_ctime</a>;
<a name="l01820"></a><a class="code" href="structost__lvb.html#a5a01f47975e892bd6030681836bccf3a">01820</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structost__lvb.html#a5a01f47975e892bd6030681836bccf3a">lvb_blocks</a>;
<a name="l01821"></a><a class="code" href="structost__lvb.html#aec2782039c7e57cd0250e98d1405d620">01821</a>         __u32   <a class="code" href="structost__lvb.html#aec2782039c7e57cd0250e98d1405d620">lvb_mtime_ns</a>;
<a name="l01822"></a><a class="code" href="structost__lvb.html#a2c597566f4be86915c416b329d543dbc">01822</a>         __u32   <a class="code" href="structost__lvb.html#a2c597566f4be86915c416b329d543dbc">lvb_atime_ns</a>;
<a name="l01823"></a><a class="code" href="structost__lvb.html#a54c6c6e2e0b29957495610e3208b2dc2">01823</a>         __u32   <a class="code" href="structost__lvb.html#a54c6c6e2e0b29957495610e3208b2dc2">lvb_ctime_ns</a>;
<a name="l01824"></a><a class="code" href="structost__lvb.html#a793abcd42fcd8be7a3795fe3a03204b9">01824</a>         __u32   <a class="code" href="structost__lvb.html#a793abcd42fcd8be7a3795fe3a03204b9">lvb_padding</a>;
<a name="l01825"></a>01825 };
<a name="l01826"></a>01826 
<a name="l01827"></a>01827 <span class="comment">/*</span>
<a name="l01828"></a>01828 <span class="comment"> *   lquota data structures</span>
<a name="l01829"></a>01829 <span class="comment"> */</span>
<a name="l01830"></a>01830 
<a name="l01831"></a>01831 <span class="preprocessor">#ifndef QUOTABLOCK_BITS</span>
<a name="l01832"></a><a class="code" href="group__lustreidl.html#ga1d5f1d7b6f4c5296a675b09b48e73711">01832</a> <span class="preprocessor"></span><span class="preprocessor"># define QUOTABLOCK_BITS LUSTRE_QUOTABLOCK_BITS</span>
<a name="l01833"></a>01833 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01834"></a>01834 <span class="preprocessor"></span>
<a name="l01835"></a>01835 <span class="preprocessor">#ifndef QUOTABLOCK_SIZE</span>
<a name="l01836"></a><a class="code" href="group__lustreidl.html#ga05affadb9a45fdda93fb537abed2fa8a">01836</a> <span class="preprocessor"></span><span class="preprocessor"># define QUOTABLOCK_SIZE LUSTRE_QUOTABLOCK_SIZE</span>
<a name="l01837"></a>01837 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01838"></a>01838 <span class="preprocessor"></span>
<a name="l01839"></a>01839 <span class="preprocessor">#ifndef toqb</span>
<a name="l01840"></a><a class="code" href="group__lustreidl.html#ga71d89364a6f2c8ee365d49cac1670542">01840</a> <span class="preprocessor"></span><span class="preprocessor"># define toqb lustre_stoqb</span>
<a name="l01841"></a>01841 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01842"></a>01842 <span class="preprocessor"></span>
<a name="l01843"></a>01843 <span class="comment">/* The lquota_id structure is an union of all the possible identifier types that</span>
<a name="l01844"></a>01844 <span class="comment"> * can be used with quota, this includes:</span>
<a name="l01845"></a>01845 <span class="comment"> * - 64-bit user ID</span>
<a name="l01846"></a>01846 <span class="comment"> * - 64-bit group ID</span>
<a name="l01847"></a>01847 <span class="comment"> * - a FID which can be used for per-directory quota in the future */</span>
<a name="l01848"></a><a class="code" href="unionlquota__id.html">01848</a> <span class="keyword">union </span><a class="code" href="unionlquota__id.html">lquota_id</a> {
<a name="l01849"></a><a class="code" href="unionlquota__id.html#a4c90d42fb31dedd1a5ffa93422a173ec">01849</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="unionlquota__id.html#a4c90d42fb31dedd1a5ffa93422a173ec">qid_fid</a>; <span class="comment">/* FID for per-directory quota */</span>
<a name="l01850"></a><a class="code" href="unionlquota__id.html#ae5799149cc97dacd9163962b164da307">01850</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="unionlquota__id.html#ae5799149cc97dacd9163962b164da307">qid_uid</a>; <span class="comment">/* user identifier */</span>
<a name="l01851"></a><a class="code" href="unionlquota__id.html#a1fe6a1826747348b12b8b88faa76945f">01851</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="unionlquota__id.html#a1fe6a1826747348b12b8b88faa76945f">qid_gid</a>; <span class="comment">/* group identifier */</span>
<a name="l01852"></a>01852 };
<a name="l01853"></a>01853 
<a name="l01854"></a>01854 <span class="comment">/* quotactl management */</span>
<a name="l01855"></a><a class="code" href="structobd__quotactl.html">01855</a> <span class="keyword">struct </span><a class="code" href="structobd__quotactl.html">obd_quotactl</a> {
<a name="l01856"></a><a class="code" href="structobd__quotactl.html#aea26e1f46a26a3ff0f7e9d388797cd6e">01856</a>         __u32                   <a class="code" href="structobd__quotactl.html#aea26e1f46a26a3ff0f7e9d388797cd6e">qc_cmd</a>;
<a name="l01857"></a><a class="code" href="structobd__quotactl.html#a40a342769abca58f21055ef8702a91b9">01857</a>         __u32                   <a class="code" href="structobd__quotactl.html#a40a342769abca58f21055ef8702a91b9">qc_type</a>; <span class="comment">/* see Q_* flag below */</span>
<a name="l01858"></a><a class="code" href="structobd__quotactl.html#a02fbc1cb7d7c133b44239b1c859022d9">01858</a>         __u32                   <a class="code" href="structobd__quotactl.html#a02fbc1cb7d7c133b44239b1c859022d9">qc_id</a>;
<a name="l01859"></a><a class="code" href="structobd__quotactl.html#a449a6db2822a4e705bb2e669a1f9a8e3">01859</a>         __u32                   <a class="code" href="structobd__quotactl.html#a449a6db2822a4e705bb2e669a1f9a8e3">qc_stat</a>;
<a name="l01860"></a><a class="code" href="structobd__quotactl.html#a1bd34138ed67b061b745566e3c1c5972">01860</a>         <span class="keyword">struct </span><a class="code" href="structobd__dqinfo.html">obd_dqinfo</a>       <a class="code" href="structobd__quotactl.html#a1bd34138ed67b061b745566e3c1c5972">qc_dqinfo</a>;
<a name="l01861"></a><a class="code" href="structobd__quotactl.html#afc30dadc5b3bbfab38692a28bf4b4d0d">01861</a>         <span class="keyword">struct </span><a class="code" href="structobd__dqblk.html">obd_dqblk</a>        <a class="code" href="structobd__quotactl.html#afc30dadc5b3bbfab38692a28bf4b4d0d">qc_dqblk</a>;
<a name="l01862"></a>01862 };
<a name="l01863"></a>01863 
<a name="l01864"></a><a class="code" href="group__lustreidl.html#ga50b774a49cc4f6453986d03f2033f54e">01864</a> <span class="preprocessor">#define Q_COPY(out, in, member) (out)-&gt;member = (in)-&gt;member</span>
<a name="l01865"></a>01865 <span class="preprocessor"></span>
<a name="l01866"></a><a class="code" href="group__lustreidl.html#ga0031301a60f0ef1ea828048716af4b53">01866</a> <span class="preprocessor">#define QCTL_COPY(out, in)              \</span>
<a name="l01867"></a>01867 <span class="preprocessor">do {                                    \</span>
<a name="l01868"></a>01868 <span class="preprocessor">        Q_COPY(out, in, qc_cmd);        \</span>
<a name="l01869"></a>01869 <span class="preprocessor">        Q_COPY(out, in, qc_type);       \</span>
<a name="l01870"></a>01870 <span class="preprocessor">        Q_COPY(out, in, qc_id);         \</span>
<a name="l01871"></a>01871 <span class="preprocessor">        Q_COPY(out, in, qc_stat);       \</span>
<a name="l01872"></a>01872 <span class="preprocessor">        Q_COPY(out, in, qc_dqinfo);     \</span>
<a name="l01873"></a>01873 <span class="preprocessor">        Q_COPY(out, in, qc_dqblk);      \</span>
<a name="l01874"></a>01874 <span class="preprocessor">} while (0)</span>
<a name="l01875"></a>01875 <span class="preprocessor"></span>
<a name="l01876"></a>01876 <span class="comment">/* Body of quota request used for quota acquire/release RPCs between quota</span>
<a name="l01877"></a>01877 <span class="comment"> * master (aka QMT) and slaves (ak QSD). */</span>
<a name="l01878"></a><a class="code" href="structquota__body.html">01878</a> <span class="keyword">struct </span><a class="code" href="structquota__body.html">quota_body</a> {
<a name="l01879"></a><a class="code" href="structquota__body.html#a80a62de873e93ccf9899986d89c5e48d">01879</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structquota__body.html#a80a62de873e93ccf9899986d89c5e48d">qb_fid</a>;     <span class="comment">/* FID of global index packing the pool ID</span>
<a name="l01880"></a>01880 <span class="comment">                                      * and type (data or metadata) as well as</span>
<a name="l01881"></a>01881 <span class="comment">                                      * the quota type (user or group). */</span>
<a name="l01882"></a><a class="code" href="structquota__body.html#ab7fb0e454a05c4ca50b13b9433a9af49">01882</a>         <span class="keyword">union </span><a class="code" href="unionlquota__id.html">lquota_id</a> <a class="code" href="structquota__body.html#ab7fb0e454a05c4ca50b13b9433a9af49">qb_id</a>;      <span class="comment">/* uid or gid or directory FID */</span>
<a name="l01883"></a><a class="code" href="structquota__body.html#a1c73aa0dbd67cfd9d59c39050e1ad3bb">01883</a>         __u32           <a class="code" href="structquota__body.html#a1c73aa0dbd67cfd9d59c39050e1ad3bb">qb_flags</a>;   <span class="comment">/* see below */</span>
<a name="l01884"></a><a class="code" href="structquota__body.html#ac3c7aef54dde37b3405b2e8c0a1c786d">01884</a>         __u32           <a class="code" href="structquota__body.html#ac3c7aef54dde37b3405b2e8c0a1c786d">qb_padding</a>;
<a name="l01885"></a><a class="code" href="structquota__body.html#a0b1dcb900617e5812a99e8a31958fed7">01885</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structquota__body.html#a0b1dcb900617e5812a99e8a31958fed7">qb_count</a>;   <span class="comment">/* acquire/release count (kbytes/inodes) */</span>
<a name="l01886"></a><a class="code" href="structquota__body.html#a6682a7ba30e177021cd623646a1715c3">01886</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structquota__body.html#a6682a7ba30e177021cd623646a1715c3">qb_usage</a>;   <span class="comment">/* current slave usage (kbytes/inodes) */</span>
<a name="l01887"></a><a class="code" href="structquota__body.html#aaa435fcbd9e7bfdf1d0db14ada29f366">01887</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structquota__body.html#aaa435fcbd9e7bfdf1d0db14ada29f366">qb_slv_ver</a>; <span class="comment">/* slave index file version */</span>
<a name="l01888"></a><a class="code" href="structquota__body.html#a1a501fd3f623bfdb6ad982d8c1479cfd">01888</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a>    <a class="code" href="structquota__body.html#a1a501fd3f623bfdb6ad982d8c1479cfd">qb_lockh</a>;     <span class="comment">/* per-ID lock handle */</span>
<a name="l01889"></a><a class="code" href="structquota__body.html#aa15bd6525def5b885cf70906ea30d3a5">01889</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a>    <a class="code" href="structquota__body.html#aa15bd6525def5b885cf70906ea30d3a5">qb_glb_lockh</a>; <span class="comment">/* global lock handle */</span>
<a name="l01890"></a><a class="code" href="structquota__body.html#ad2c46a9ea5aa18e2cb30d59476bf1d0f">01890</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structquota__body.html#ad2c46a9ea5aa18e2cb30d59476bf1d0f">qb_padding1</a>[4];
<a name="l01891"></a>01891 };
<a name="l01892"></a>01892 
<a name="l01893"></a>01893 <span class="comment">/* When the quota_body is used in the reply of quota global intent</span>
<a name="l01894"></a>01894 <span class="comment"> * lock (IT_QUOTA_CONN) reply, qb_fid contains slave index file FID. */</span>
<a name="l01895"></a><a class="code" href="group__lustreidl.html#gac3d828469afbe0c856641416ff8c9d83">01895</a> <span class="preprocessor">#define qb_slv_fid      qb_fid</span>
<a name="l01896"></a>01896 <span class="preprocessor"></span><span class="comment">/* qb_usage is the current qunit (in kbytes/inodes) when quota_body is used in</span>
<a name="l01897"></a>01897 <span class="comment"> * quota reply */</span>
<a name="l01898"></a><a class="code" href="group__lustreidl.html#ga9185ff6352521acaf64d0591ab54644b">01898</a> <span class="preprocessor">#define qb_qunit        qb_usage</span>
<a name="l01899"></a>01899 <span class="preprocessor"></span>
<a name="l01900"></a><a class="code" href="group__lustreidl.html#ga6e911d23b2e026efa707588671a63e05">01900</a> <span class="preprocessor">#define QUOTA_DQACQ_FL_ACQ      0x1  </span><span class="comment">/* acquire quota */</span>
<a name="l01901"></a><a class="code" href="group__lustreidl.html#ga43e3579a99205730eed0f717db00ebdb">01901</a> <span class="preprocessor">#define QUOTA_DQACQ_FL_PREACQ   0x2  </span><span class="comment">/* pre-acquire */</span>
<a name="l01902"></a><a class="code" href="group__lustreidl.html#ga1fb17ac260f06120296e982da8b1f94e">01902</a> <span class="preprocessor">#define QUOTA_DQACQ_FL_REL      0x4  </span><span class="comment">/* release quota */</span>
<a name="l01903"></a><a class="code" href="group__lustreidl.html#gaa2d19240f98ce38dd0f67a3b189ab148">01903</a> <span class="preprocessor">#define QUOTA_DQACQ_FL_REPORT   0x8  </span><span class="comment">/* report usage */</span>
<a name="l01904"></a>01904 
<a name="l01905"></a>01905 <span class="comment">/* Quota types currently supported */</span>
<a name="l01906"></a>01906 <span class="keyword">enum</span> {
<a name="l01907"></a><a class="code" href="group__lustreidl.html#ggaaf8fd5f0e57d456151c951e0f3715fc4af9e491b758f69e7e40b8d912aa088757">01907</a>         <a class="code" href="group__lustreidl.html#ggaaf8fd5f0e57d456151c951e0f3715fc4af9e491b758f69e7e40b8d912aa088757">LQUOTA_TYPE_USR</a> = 0x00, <span class="comment">/* maps to USRQUOTA */</span>
<a name="l01908"></a><a class="code" href="group__lustreidl.html#ggaaf8fd5f0e57d456151c951e0f3715fc4a91d1f841b5cd1e9d5d5f89936e72cb3c">01908</a>         <a class="code" href="group__lustreidl.html#ggaaf8fd5f0e57d456151c951e0f3715fc4a91d1f841b5cd1e9d5d5f89936e72cb3c">LQUOTA_TYPE_GRP</a> = 0x01, <span class="comment">/* maps to GRPQUOTA */</span>
<a name="l01909"></a><a class="code" href="group__lustreidl.html#ggaaf8fd5f0e57d456151c951e0f3715fc4af2b3f4e6e415dc399ec86392dee4f86a">01909</a>         <a class="code" href="group__lustreidl.html#ggaaf8fd5f0e57d456151c951e0f3715fc4af2b3f4e6e415dc399ec86392dee4f86a">LQUOTA_TYPE_MAX</a>
<a name="l01910"></a>01910 };
<a name="l01911"></a>01911 
<a name="l01912"></a>01912 <span class="comment">/* There are 2 different resource types on which a quota limit can be enforced:</span>
<a name="l01913"></a>01913 <span class="comment"> * - inodes on the MDTs</span>
<a name="l01914"></a>01914 <span class="comment"> * - blocks on the OSTs */</span>
<a name="l01915"></a>01915 <span class="keyword">enum</span> {
<a name="l01916"></a><a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310af1f89d64a556ee90f9e42e3d8b84fd80">01916</a>         <a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310af1f89d64a556ee90f9e42e3d8b84fd80">LQUOTA_RES_MD</a>           = 0x01, <span class="comment">/* skip 0 to avoid null oid in FID */</span>
<a name="l01917"></a><a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310ae89dba55949ca75ccc8ecfaba73a711a">01917</a>         <a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310ae89dba55949ca75ccc8ecfaba73a711a">LQUOTA_RES_DT</a>           = 0x02,
<a name="l01918"></a><a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310acf696247fca30560cc4e8668bb5814ee">01918</a>         <a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310acf696247fca30560cc4e8668bb5814ee">LQUOTA_LAST_RES</a>,
<a name="l01919"></a><a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310a1819e3695f497071ad3144226be12c0a">01919</a>         <a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310a1819e3695f497071ad3144226be12c0a">LQUOTA_FIRST_RES</a>        = <a class="code" href="group__lustreidl.html#gga94798fdadfbf49a7c658ace669a1d310af1f89d64a556ee90f9e42e3d8b84fd80">LQUOTA_RES_MD</a>
<a name="l01920"></a>01920 };
<a name="l01921"></a><a class="code" href="group__lustreidl.html#ga2f2598df8b06b8bcb95ed0d5c9651867">01921</a> <span class="preprocessor">#define LQUOTA_NR_RES (LQUOTA_LAST_RES - LQUOTA_FIRST_RES + 1)</span>
<a name="l01922"></a>01922 <span class="preprocessor"></span>
<a name="l01923"></a>01923 <span class="comment">/*</span>
<a name="l01924"></a>01924 <span class="comment"> * Space accounting support</span>
<a name="l01925"></a>01925 <span class="comment"> * Format of an accounting record, providing disk usage information for a given</span>
<a name="l01926"></a>01926 <span class="comment"> * user or group</span>
<a name="l01927"></a>01927 <span class="comment"> */</span>
<a name="l01928"></a><a class="code" href="structlquota__acct__rec.html">01928</a> <span class="keyword">struct </span><a class="code" href="structlquota__acct__rec.html">lquota_acct_rec</a> { <span class="comment">/* 16 bytes */</span>
<a name="l01929"></a><a class="code" href="structlquota__acct__rec.html#a32133311d2f081525eda1921667dc8ae">01929</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__acct__rec.html#a32133311d2f081525eda1921667dc8ae">bspace</a>;  <span class="comment">/* current space in use */</span>
<a name="l01930"></a><a class="code" href="structlquota__acct__rec.html#a3af9b7868ba640d47df654dd3a5a5d2f">01930</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__acct__rec.html#a3af9b7868ba640d47df654dd3a5a5d2f">ispace</a>;  <span class="comment">/* current # inodes in use */</span>
<a name="l01931"></a>01931 };
<a name="l01932"></a>01932 
<a name="l01933"></a>01933 <span class="comment">/*</span>
<a name="l01934"></a>01934 <span class="comment"> * Global quota index support</span>
<a name="l01935"></a>01935 <span class="comment"> * Format of a global record, providing global quota settings for a given quota</span>
<a name="l01936"></a>01936 <span class="comment"> * identifier</span>
<a name="l01937"></a>01937 <span class="comment"> */</span>
<a name="l01938"></a><a class="code" href="structlquota__glb__rec.html">01938</a> <span class="keyword">struct </span><a class="code" href="structlquota__glb__rec.html">lquota_glb_rec</a> { <span class="comment">/* 32 bytes */</span>
<a name="l01939"></a><a class="code" href="structlquota__glb__rec.html#a9e8e303caa5f8251204646d0518446e8">01939</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__glb__rec.html#a9e8e303caa5f8251204646d0518446e8">qbr_hardlimit</a>; <span class="comment">/* quota hard limit, in #inodes or kbytes */</span>
<a name="l01940"></a><a class="code" href="structlquota__glb__rec.html#aec548d08422ad02aacc3de46fa95b302">01940</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__glb__rec.html#aec548d08422ad02aacc3de46fa95b302">qbr_softlimit</a>; <span class="comment">/* quota soft limit, in #inodes or kbytes */</span>
<a name="l01941"></a><a class="code" href="structlquota__glb__rec.html#ac2cc765cddb4fca3c546d39232c93352">01941</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__glb__rec.html#ac2cc765cddb4fca3c546d39232c93352">qbr_time</a>;      <span class="comment">/* grace time, in seconds */</span>
<a name="l01942"></a><a class="code" href="structlquota__glb__rec.html#a5d9a0de93be4e0cf3530d7314a7a708c">01942</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__glb__rec.html#a5d9a0de93be4e0cf3530d7314a7a708c">qbr_granted</a>;   <span class="comment">/* how much is granted to slaves, in #inodes or</span>
<a name="l01943"></a>01943 <span class="comment">                              * kbytes */</span>
<a name="l01944"></a>01944 };
<a name="l01945"></a>01945 
<a name="l01946"></a>01946 <span class="comment">/*</span>
<a name="l01947"></a>01947 <span class="comment"> * Slave index support</span>
<a name="l01948"></a>01948 <span class="comment"> * Format of a slave record, recording how much space is granted to a given</span>
<a name="l01949"></a>01949 <span class="comment"> * slave</span>
<a name="l01950"></a>01950 <span class="comment"> */</span>
<a name="l01951"></a><a class="code" href="structlquota__slv__rec.html">01951</a> <span class="keyword">struct </span><a class="code" href="structlquota__slv__rec.html">lquota_slv_rec</a> { <span class="comment">/* 8 bytes */</span>
<a name="l01952"></a><a class="code" href="structlquota__slv__rec.html#a38ef901abe53a2efdcb3b8e875095eac">01952</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlquota__slv__rec.html#a38ef901abe53a2efdcb3b8e875095eac">qsr_granted</a>; <span class="comment">/* space granted to the slave for the key=ID,</span>
<a name="l01953"></a>01953 <span class="comment">                            * in #inodes or kbytes */</span>
<a name="l01954"></a>01954 };
<a name="l01955"></a>01955 
<a name="l01956"></a>01956 <span class="comment">/* Data structures associated with the quota locks */</span>
<a name="l01957"></a>01957 
<a name="l01958"></a>01958 <span class="comment">/* Glimpse descriptor used for the index &amp; per-ID quota locks */</span>
<a name="l01959"></a><a class="code" href="structldlm__gl__lquota__desc.html">01959</a> <span class="keyword">struct </span><a class="code" href="structldlm__gl__lquota__desc.html">ldlm_gl_lquota_desc</a> {
<a name="l01960"></a><a class="code" href="structldlm__gl__lquota__desc.html#a7b34439f441bc058e8987a65ad8c750c">01960</a>         <span class="keyword">union </span><a class="code" href="unionlquota__id.html">lquota_id</a> <a class="code" href="structldlm__gl__lquota__desc.html#a7b34439f441bc058e8987a65ad8c750c">gl_id</a>;    <span class="comment">/* quota ID subject to the glimpse */</span>
<a name="l01961"></a><a class="code" href="structldlm__gl__lquota__desc.html#a527461a2937ff35f235e8dfa04730758">01961</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structldlm__gl__lquota__desc.html#a527461a2937ff35f235e8dfa04730758">gl_flags</a>; <span class="comment">/* see LQUOTA_FL* below */</span>
<a name="l01962"></a><a class="code" href="structldlm__gl__lquota__desc.html#af24f12ba741a752499e20ea259c1099f">01962</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structldlm__gl__lquota__desc.html#af24f12ba741a752499e20ea259c1099f">gl_ver</a>;   <span class="comment">/* new index version */</span>
<a name="l01963"></a><a class="code" href="structldlm__gl__lquota__desc.html#ac9dcfc233d19a33fffc24ae90537b7cf">01963</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structldlm__gl__lquota__desc.html#ac9dcfc233d19a33fffc24ae90537b7cf">gl_hardlimit</a>; <span class="comment">/* new hardlimit or qunit value */</span>
<a name="l01964"></a><a class="code" href="structldlm__gl__lquota__desc.html#a466caae243f672826a81b07c6c6f276a">01964</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structldlm__gl__lquota__desc.html#a466caae243f672826a81b07c6c6f276a">gl_softlimit</a>; <span class="comment">/* new softlimit */</span>
<a name="l01965"></a><a class="code" href="structldlm__gl__lquota__desc.html#a68d060248b4e2d3c205e39f45f9ce743">01965</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structldlm__gl__lquota__desc.html#a68d060248b4e2d3c205e39f45f9ce743">gl_time</a>;
<a name="l01966"></a><a class="code" href="structldlm__gl__lquota__desc.html#af780a18868901f71cf77ed2c39c3c2ac">01966</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structldlm__gl__lquota__desc.html#af780a18868901f71cf77ed2c39c3c2ac">gl_pad2</a>;
<a name="l01967"></a>01967 };
<a name="l01968"></a><a class="code" href="group__lustreidl.html#ga5ecd56b5d6dfff81a36327be1afa0506">01968</a> <span class="preprocessor">#define gl_qunit        gl_hardlimit </span><span class="comment">/* current qunit value used when</span>
<a name="l01969"></a>01969 <span class="comment">                                      * glimpsing per-ID quota locks */</span>
<a name="l01970"></a>01970 
<a name="l01971"></a>01971 <span class="comment">/* quota glimpse flags */</span>
<a name="l01972"></a><a class="code" href="group__lustreidl.html#ga3562eefc30b9d982c0684194df9a2368">01972</a> <span class="preprocessor">#define LQUOTA_FL_EDQUOT 0x1 </span><span class="comment">/* user/group out of quota space on QMT */</span>
<a name="l01973"></a>01973 
<a name="l01974"></a>01974 <span class="comment">/* LVB used with quota (global and per-ID) locks */</span>
<a name="l01975"></a><a class="code" href="structlquota__lvb.html">01975</a> <span class="keyword">struct </span><a class="code" href="structlquota__lvb.html">lquota_lvb</a> {
<a name="l01976"></a><a class="code" href="structlquota__lvb.html#ac709a1e09ab716aa6420fbbc83ae1a8b">01976</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlquota__lvb.html#ac709a1e09ab716aa6420fbbc83ae1a8b">lvb_flags</a>;      <span class="comment">/* see LQUOTA_FL* above */</span>
<a name="l01977"></a><a class="code" href="structlquota__lvb.html#a109bb1838dc65de9c5c9f7014761ad1a">01977</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlquota__lvb.html#a109bb1838dc65de9c5c9f7014761ad1a">lvb_id_may_rel</a>; <span class="comment">/* space that might be released later */</span>
<a name="l01978"></a><a class="code" href="structlquota__lvb.html#a1169594fa4ccafa0afa942213be6b348">01978</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlquota__lvb.html#a1169594fa4ccafa0afa942213be6b348">lvb_id_rel</a>;     <span class="comment">/* space released by the slave for this ID */</span>
<a name="l01979"></a><a class="code" href="structlquota__lvb.html#aef8f0eff7a9777be522cb1ef2d1e8452">01979</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlquota__lvb.html#aef8f0eff7a9777be522cb1ef2d1e8452">lvb_id_qunit</a>;   <span class="comment">/* current qunit value */</span>
<a name="l01980"></a><a class="code" href="structlquota__lvb.html#a040f9df7ff9878c1814e408d65fcab54">01980</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlquota__lvb.html#a040f9df7ff9878c1814e408d65fcab54">lvb_pad1</a>;
<a name="l01981"></a>01981 };
<a name="l01982"></a>01982 
<a name="l01983"></a>01983 <span class="comment">/* LVB used with global quota lock */</span>
<a name="l01984"></a><a class="code" href="group__lustreidl.html#gadbd81cc0e2ee8819194d8b03d6cd15eb">01984</a> <span class="preprocessor">#define lvb_glb_ver  lvb_id_may_rel </span><span class="comment">/* current version of the global index */</span>
<a name="l01985"></a>01985 
<a name="l01986"></a>01986 <span class="comment">/* op codes */</span>
<a name="l01987"></a><a class="code" href="group__lustreidl.html#ga5545c07fefb90ace330cbbc739c0f1ba">01987</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l01988"></a><a class="code" href="group__lustreidl.html#gga5545c07fefb90ace330cbbc739c0f1baafc3dd7c62c198921aee1ca161cf3b1bf">01988</a>         <a class="code" href="group__lustreidl.html#gga5545c07fefb90ace330cbbc739c0f1baafc3dd7c62c198921aee1ca161cf3b1bf">QUOTA_DQACQ</a>     = 601,
<a name="l01989"></a><a class="code" href="group__lustreidl.html#gga5545c07fefb90ace330cbbc739c0f1baaaa7768a9ce56845e940de2d1ddd8b73b">01989</a>         <a class="code" href="group__lustreidl.html#gga5545c07fefb90ace330cbbc739c0f1baaaa7768a9ce56845e940de2d1ddd8b73b">QUOTA_DQREL</a>     = 602,
<a name="l01990"></a><a class="code" href="group__lustreidl.html#gga5545c07fefb90ace330cbbc739c0f1baa06c313cf5cd1779b69a4cbfcab67e44a">01990</a>         <a class="code" href="group__lustreidl.html#gga5545c07fefb90ace330cbbc739c0f1baa06c313cf5cd1779b69a4cbfcab67e44a">QUOTA_LAST_OPC</a>
<a name="l01991"></a>01991 } <a class="code" href="group__lustreidl.html#ga5545c07fefb90ace330cbbc739c0f1ba">quota_cmd_t</a>;
<a name="l01992"></a><a class="code" href="group__lustreidl.html#ga5bd21af14fa1339d908c4a9385278be2">01992</a> <span class="preprocessor">#define QUOTA_FIRST_OPC QUOTA_DQACQ</span>
<a name="l01993"></a>01993 <span class="preprocessor"></span>
<a name="l01994"></a>01994 <span class="comment">/*</span>
<a name="l01995"></a>01995 <span class="comment"> *   MDS REQ RECORDS</span>
<a name="l01996"></a>01996 <span class="comment"> */</span>
<a name="l01997"></a>01997 
<a name="l01998"></a>01998 <span class="comment">/* opcodes */</span>
<a name="l01999"></a><a class="code" href="group__lustreidl.html#gafb46b2fd1532fecf64a120ca96d31c25">01999</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02000"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a939a4d06a57b42699d2f90c70c155089">02000</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a939a4d06a57b42699d2f90c70c155089">MDS_GETATTR</a>             = 33,
<a name="l02001"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a16d9b8cc0d1506baf6872d97f161a686">02001</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a16d9b8cc0d1506baf6872d97f161a686">MDS_GETATTR_NAME</a>        = 34,
<a name="l02002"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a0946e267478099abd305528bc445ab1a">02002</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a0946e267478099abd305528bc445ab1a">MDS_CLOSE</a>               = 35,
<a name="l02003"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a943b3833166c1d5bbfdd82db81553065">02003</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a943b3833166c1d5bbfdd82db81553065">MDS_REINT</a>               = 36,
<a name="l02004"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a723527bf5f088c416ff35d13c7ba4ca4">02004</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a723527bf5f088c416ff35d13c7ba4ca4">MDS_READPAGE</a>            = 37,
<a name="l02005"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a5d9da37f79414a20c089a76f4e5a53b9">02005</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a5d9da37f79414a20c089a76f4e5a53b9">MDS_CONNECT</a>             = 38,
<a name="l02006"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25aace3470fa56e09905dae9e4d7ad805c0">02006</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25aace3470fa56e09905dae9e4d7ad805c0">MDS_DISCONNECT</a>          = 39,
<a name="l02007"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ae5a4065ddd8c0fd5a9b3636f2f3907de">02007</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ae5a4065ddd8c0fd5a9b3636f2f3907de">MDS_GET_ROOT</a>            = 40,
<a name="l02008"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25aaea1f5d6f9aea32d9fa351387515d0e4">02008</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25aaea1f5d6f9aea32d9fa351387515d0e4">MDS_STATFS</a>              = 41,
<a name="l02009"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a14e9342a6b06e758c0e66679defdfa4c">02009</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a14e9342a6b06e758c0e66679defdfa4c">MDS_PIN</a>                 = 42, <span class="comment">/* obsolete, never used in a release */</span>
<a name="l02010"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a7f29bcacba39f23cc34622ae35c29087">02010</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a7f29bcacba39f23cc34622ae35c29087">MDS_UNPIN</a>               = 43, <span class="comment">/* obsolete, never used in a release */</span>
<a name="l02011"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a48434a36188efa06c814c85498954874">02011</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a48434a36188efa06c814c85498954874">MDS_SYNC</a>                = 44,
<a name="l02012"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a855e695669b732593bf5f249ea89188d">02012</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a855e695669b732593bf5f249ea89188d">MDS_DONE_WRITING</a>        = 45, <span class="comment">/* obsolete since 2.8.0 */</span>
<a name="l02013"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25af7a81b0f126a09b1d5e83a16218d294f">02013</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25af7a81b0f126a09b1d5e83a16218d294f">MDS_SET_INFO</a>            = 46,
<a name="l02014"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a0c36d37856e3d6e045072f6a60ec85d4">02014</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a0c36d37856e3d6e045072f6a60ec85d4">MDS_QUOTACHECK</a>          = 47, <span class="comment">/* not used since 2.4 */</span>
<a name="l02015"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a6525c16b7c211224dfe40978aea601a9">02015</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a6525c16b7c211224dfe40978aea601a9">MDS_QUOTACTL</a>            = 48,
<a name="l02016"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ab1b81a8481428d97a0ec1b0e606fe8f3">02016</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ab1b81a8481428d97a0ec1b0e606fe8f3">MDS_GETXATTR</a>            = 49,
<a name="l02017"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a51b8f4b13968935e2dd9dc935f36b3ac">02017</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a51b8f4b13968935e2dd9dc935f36b3ac">MDS_SETXATTR</a>            = 50, <span class="comment">/* obsolete, now it&apos;s MDS_REINT op */</span>
<a name="l02018"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a27418318585cef91aa49f39d8ae006f8">02018</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a27418318585cef91aa49f39d8ae006f8">MDS_WRITEPAGE</a>           = 51,
<a name="l02019"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a6f5df98ee47113f7fb297a4829493e83">02019</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a6f5df98ee47113f7fb297a4829493e83">MDS_IS_SUBDIR</a>           = 52, <span class="comment">/* obsolete, never used in a release */</span>
<a name="l02020"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ae794023fd58821b7ce39eb951cb11f8d">02020</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ae794023fd58821b7ce39eb951cb11f8d">MDS_GET_INFO</a>            = 53,
<a name="l02021"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a637323c7278a723afbe92cfdb11795b5">02021</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a637323c7278a723afbe92cfdb11795b5">MDS_HSM_STATE_GET</a>       = 54,
<a name="l02022"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a0fe82dbd102b5aeab06d1e925a01d933">02022</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a0fe82dbd102b5aeab06d1e925a01d933">MDS_HSM_STATE_SET</a>       = 55,
<a name="l02023"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ab0426c19f0338a346acbcb4374652610">02023</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25ab0426c19f0338a346acbcb4374652610">MDS_HSM_ACTION</a>          = 56,
<a name="l02024"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a96d676cdd365c0e4d916a704940e5a05">02024</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a96d676cdd365c0e4d916a704940e5a05">MDS_HSM_PROGRESS</a>        = 57,
<a name="l02025"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a66520ef283a0d77c0f66c049ec12e63c">02025</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a66520ef283a0d77c0f66c049ec12e63c">MDS_HSM_REQUEST</a>         = 58,
<a name="l02026"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a604934422ffcd2cb50b7481ba7a32a3f">02026</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a604934422ffcd2cb50b7481ba7a32a3f">MDS_HSM_CT_REGISTER</a>     = 59,
<a name="l02027"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a48a6205fd940ffe97db93021cd6549f5">02027</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a48a6205fd940ffe97db93021cd6549f5">MDS_HSM_CT_UNREGISTER</a>   = 60,
<a name="l02028"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a248c8a3015e4eee93feab38da757ac59">02028</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a248c8a3015e4eee93feab38da757ac59">MDS_SWAP_LAYOUTS</a>        = 61,
<a name="l02029"></a><a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a10d101254fb7fa2f12a256d13ea95cf1">02029</a>         <a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a10d101254fb7fa2f12a256d13ea95cf1">MDS_LAST_OPC</a>
<a name="l02030"></a>02030 } <a class="code" href="packet-lustre_8c.html#afb46b2fd1532fecf64a120ca96d31c25">mds_cmd_t</a>;
<a name="l02031"></a>02031 
<a name="l02032"></a><a class="code" href="group__lustreidl.html#gabfd6182d3534a3aec682135d0fcf4c19">02032</a> <span class="preprocessor">#define MDS_FIRST_OPC    MDS_GETATTR</span>
<a name="l02033"></a>02033 <span class="preprocessor"></span>
<a name="l02034"></a>02034 
<a name="l02035"></a>02035 <span class="comment">/* opcodes for object update */</span>
<a name="l02036"></a><a class="code" href="group__lustreidl.html#ga6950301f8a5a3745922e1e67f00fdecf">02036</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02037"></a><a class="code" href="group__lustreidl.html#gga6950301f8a5a3745922e1e67f00fdecfa33a3469616644da74db154c9c58eea45">02037</a>         <a class="code" href="group__lustreidl.html#gga6950301f8a5a3745922e1e67f00fdecfa33a3469616644da74db154c9c58eea45">OUT_UPDATE</a>      = 1000,
<a name="l02038"></a><a class="code" href="group__lustreidl.html#gga6950301f8a5a3745922e1e67f00fdecfa895d46a5cf97e59f3e4da9790acb2191">02038</a>         <a class="code" href="group__lustreidl.html#gga6950301f8a5a3745922e1e67f00fdecfa895d46a5cf97e59f3e4da9790acb2191">OUT_UPDATE_LAST_OPC</a>
<a name="l02039"></a>02039 } <a class="code" href="group__lustreidl.html#ga6950301f8a5a3745922e1e67f00fdecf">update_cmd_t</a>;
<a name="l02040"></a>02040 
<a name="l02041"></a><a class="code" href="group__lustreidl.html#ga9c6c756882ea3965a9e9f5cb168cfe52">02041</a> <span class="preprocessor">#define OUT_UPDATE_FIRST_OPC    OUT_UPDATE</span>
<a name="l02042"></a>02042 <span class="preprocessor"></span>
<a name="l02043"></a>02043 <span class="comment">/*</span>
<a name="l02044"></a>02044 <span class="comment"> * Do not exceed 63</span>
<a name="l02045"></a>02045 <span class="comment"> */</span>
<a name="l02046"></a>02046 
<a name="l02047"></a><a class="code" href="group__lustreidl.html#gacc5c69011af4bbd5cf9dd822951bb965">02047</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02048"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965af0326a11d9bfd0156277c09046260312">02048</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965af0326a11d9bfd0156277c09046260312">REINT_SETATTR</a>  = 1,
<a name="l02049"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965abfa83279f6a84ebaf89ca5a5f2e722b3">02049</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965abfa83279f6a84ebaf89ca5a5f2e722b3">REINT_CREATE</a>   = 2,
<a name="l02050"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a252f56843b546dce3f0014337cd93f43">02050</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a252f56843b546dce3f0014337cd93f43">REINT_LINK</a>     = 3,
<a name="l02051"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a61703b92eaf3659dac19c144aface9a3">02051</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a61703b92eaf3659dac19c144aface9a3">REINT_UNLINK</a>   = 4,
<a name="l02052"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965ae552f9bb8f451582b0a7a10baf6f1de8">02052</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965ae552f9bb8f451582b0a7a10baf6f1de8">REINT_RENAME</a>   = 5,
<a name="l02053"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965abfe632f8e86f21a6ad744856581ebf30">02053</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965abfe632f8e86f21a6ad744856581ebf30">REINT_OPEN</a>     = 6,
<a name="l02054"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a59f46ba223896c2d3adc8232913bebc1">02054</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a59f46ba223896c2d3adc8232913bebc1">REINT_SETXATTR</a> = 7,
<a name="l02055"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a34c40eae9d61f1879c9d4e8220883d86">02055</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a34c40eae9d61f1879c9d4e8220883d86">REINT_RMENTRY</a>  = 8,
<a name="l02056"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a7a56acb260e54a8bd411246b9b4d7db4">02056</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a7a56acb260e54a8bd411246b9b4d7db4">REINT_MIGRATE</a>  = 9,
<a name="l02057"></a><a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a3fa0153ffc747ae43ce24c7ac0a45d9a">02057</a>         <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a3fa0153ffc747ae43ce24c7ac0a45d9a">REINT_MAX</a>
<a name="l02058"></a>02058 } <a class="code" href="packet-lustre_8c.html#acc5c69011af4bbd5cf9dd822951bb965">mds_reint_t</a>, <a class="code" href="group__lustreidl.html#ga5dff28b5218a04fc3ac294dde4106bf7">mdt_reint_t</a>;
<a name="l02059"></a>02059 
<a name="l02060"></a>02060 <span class="comment">/* the disposition of the intent outlines what was executed */</span>
<a name="l02061"></a><a class="code" href="group__lustreidl.html#gac6abef6c3f505e8c8bd6bb7e093f1751">02061</a> <span class="preprocessor">#define DISP_IT_EXECD        0x00000001</span>
<a name="l02062"></a><a class="code" href="group__lustreidl.html#ga3bd22002a527dd3b1bbcf962ddf0713d">02062</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_LOOKUP_EXECD    0x00000002</span>
<a name="l02063"></a><a class="code" href="group__lustreidl.html#gaf69e52c5a735acd0adfb65569971e3e9">02063</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_LOOKUP_NEG      0x00000004</span>
<a name="l02064"></a><a class="code" href="group__lustreidl.html#ga6215300b8c2577867161e9cd61be61f1">02064</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_LOOKUP_POS      0x00000008</span>
<a name="l02065"></a><a class="code" href="group__lustreidl.html#ga371ba2cf77c2ba42215005e0b71b6b03">02065</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_OPEN_CREATE     0x00000010</span>
<a name="l02066"></a><a class="code" href="group__lustreidl.html#gafcc1ed1074c5d31f864697092389ef93">02066</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_OPEN_OPEN       0x00000020</span>
<a name="l02067"></a><a class="code" href="group__lustreidl.html#ga987bac7c1615fd3c70fde3636651d7dd">02067</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_ENQ_COMPLETE    0x00400000         </span><span class="comment">/* obsolete and unused */</span>
<a name="l02068"></a><a class="code" href="group__lustreidl.html#gadc609370022b4f1a2cc801656bdb0498">02068</a> <span class="preprocessor">#define DISP_ENQ_OPEN_REF    0x00800000</span>
<a name="l02069"></a><a class="code" href="group__lustreidl.html#ga4c90e98c10564af380ce873edb115e5c">02069</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_ENQ_CREATE_REF  0x01000000</span>
<a name="l02070"></a><a class="code" href="group__lustreidl.html#gaa3bf6fa165ff729b85c916f86f9952be">02070</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_OPEN_LOCK       0x02000000</span>
<a name="l02071"></a><a class="code" href="group__lustreidl.html#ga7f15d6a79c30abe9126371e7a66facae">02071</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_OPEN_LEASE      0x04000000</span>
<a name="l02072"></a><a class="code" href="group__lustreidl.html#gab199cf4366df813bba8807b5c84f5566">02072</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_OPEN_STRIPE     0x08000000</span>
<a name="l02073"></a><a class="code" href="group__lustreidl.html#gaf7951d7ff750a50d1cd4c667af8a7eca">02073</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP_OPEN_DENY       0x10000000</span>
<a name="l02074"></a>02074 <span class="preprocessor"></span>
<a name="l02075"></a>02075 <span class="comment">/* INODE LOCK PARTS */</span>
<a name="l02076"></a><a class="code" href="group__lustreidl.html#ga9d11fad9fae40d3723211869adb181e4">02076</a> <span class="preprocessor">#define MDS_INODELOCK_LOOKUP 0x000001   </span><span class="comment">/* For namespace, dentry etc, and also</span>
<a name="l02077"></a>02077 <span class="comment">                                         * was used to protect permission (mode,</span>
<a name="l02078"></a>02078 <span class="comment">                                         * owner, group etc) before 2.4. */</span>
<a name="l02079"></a><a class="code" href="group__lustreidl.html#ga9d50ae902ff5fd451a9e0454aac20b8c">02079</a> <span class="preprocessor">#define MDS_INODELOCK_UPDATE 0x000002   </span><span class="comment">/* size, links, timestamps */</span>
<a name="l02080"></a><a class="code" href="group__lustreidl.html#ga90f523357f3b1ee171092590bca8d849">02080</a> <span class="preprocessor">#define MDS_INODELOCK_OPEN   0x000004   </span><span class="comment">/* For opened files */</span>
<a name="l02081"></a><a class="code" href="group__lustreidl.html#gaf34fee0fbb2e192ee380c7553bd9be9e">02081</a> <span class="preprocessor">#define MDS_INODELOCK_LAYOUT 0x000008   </span><span class="comment">/* for layout */</span>
<a name="l02082"></a>02082 
<a name="l02083"></a>02083 <span class="comment">/* The PERM bit is added int 2.4, and it is used to protect permission(mode,</span>
<a name="l02084"></a>02084 <span class="comment"> * owner, group, acl etc), so to separate the permission from LOOKUP lock.</span>
<a name="l02085"></a>02085 <span class="comment"> * Because for remote directories(in DNE), these locks will be granted by</span>
<a name="l02086"></a>02086 <span class="comment"> * different MDTs(different ldlm namespace).</span>
<a name="l02087"></a>02087 <span class="comment"> *</span>
<a name="l02088"></a>02088 <span class="comment"> * For local directory, MDT will always grant UPDATE_LOCK|PERM_LOCK together.</span>
<a name="l02089"></a>02089 <span class="comment"> * For Remote directory, the master MDT, where the remote directory is, will</span>
<a name="l02090"></a>02090 <span class="comment"> * grant UPDATE_LOCK|PERM_LOCK, and the remote MDT, where the name entry is,</span>
<a name="l02091"></a>02091 <span class="comment"> * will grant LOOKUP_LOCK. */</span>
<a name="l02092"></a><a class="code" href="group__lustreidl.html#gabf17289eb1c5966155a02bc65a6e8b98">02092</a> <span class="preprocessor">#define MDS_INODELOCK_PERM   0x000010</span>
<a name="l02093"></a><a class="code" href="group__lustreidl.html#ga6a4f87e6de3228a73f0a78a2715bbb6c">02093</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_INODELOCK_XATTR  0x000020   </span><span class="comment">/* extended attributes */</span>
<a name="l02094"></a>02094 
<a name="l02095"></a><a class="code" href="group__lustreidl.html#gad2fdc375d8b0b2acc5686bd73673a8f4">02095</a> <span class="preprocessor">#define MDS_INODELOCK_MAXSHIFT 5</span>
<a name="l02096"></a>02096 <span class="preprocessor"></span><span class="comment">/* This FULL lock is useful to take on unlink sort of operations */</span>
<a name="l02097"></a><a class="code" href="group__lustreidl.html#gade362e25bded32429e29cf9f8322c2d5">02097</a> <span class="preprocessor">#define MDS_INODELOCK_FULL ((1&lt;&lt;(MDS_INODELOCK_MAXSHIFT+1))-1)</span>
<a name="l02098"></a>02098 <span class="preprocessor"></span>
<a name="l02099"></a>02099 <span class="comment">/* NOTE: until Lustre 1.8.7/2.1.1 the fid_ver() was packed into name[2],</span>
<a name="l02100"></a>02100 <span class="comment"> * but was moved into name[1] along with the OID to avoid consuming the</span>
<a name="l02101"></a>02101 <span class="comment"> * name[2,3] fields that need to be used for the quota id (also a FID). */</span>
<a name="l02102"></a>02102 <span class="keyword">enum</span> {
<a name="l02103"></a><a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18a16d776c2c1fe3c3725108d6196bbbee2">02103</a>         <a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18a16d776c2c1fe3c3725108d6196bbbee2">LUSTRE_RES_ID_SEQ_OFF</a> = 0,
<a name="l02104"></a><a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18ac2f6a923c56cc00064109fd5afb03936">02104</a>         <a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18ac2f6a923c56cc00064109fd5afb03936">LUSTRE_RES_ID_VER_OID_OFF</a> = 1,
<a name="l02105"></a><a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18af808d00247a60a1fa00149a92cda822d">02105</a>         <a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18af808d00247a60a1fa00149a92cda822d">LUSTRE_RES_ID_WAS_VER_OFF</a> = 2, <span class="comment">/* see note above */</span>
<a name="l02106"></a><a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18a3cf973882be13fcc4940211252c35773">02106</a>         <a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18a3cf973882be13fcc4940211252c35773">LUSTRE_RES_ID_QUOTA_SEQ_OFF</a> = 2,
<a name="l02107"></a><a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18ac01ea6f71fc2858b91e37622bff37543">02107</a>         <a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18ac01ea6f71fc2858b91e37622bff37543">LUSTRE_RES_ID_QUOTA_VER_OID_OFF</a> = 3,
<a name="l02108"></a><a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18a8e9e23ca6c2bb47f85c4ffb19cabfb01">02108</a>         <a class="code" href="group__lustreidl.html#ggae4d5251432e1a9e6803c0240cc492e18a8e9e23ca6c2bb47f85c4ffb19cabfb01">LUSTRE_RES_ID_HSH_OFF</a> = 3
<a name="l02109"></a>02109 };
<a name="l02110"></a>02110 
<a name="l02111"></a><a class="code" href="group__lustreidl.html#ga04296586542339dbf7bdb0c5b4ff5993">02111</a> <span class="preprocessor">#define MDS_STATUS_CONN 1</span>
<a name="l02112"></a><a class="code" href="group__lustreidl.html#gac4176ef1f1bbd3a3905e7a0682b2e78e">02112</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_STATUS_LOV 2</span>
<a name="l02113"></a>02113 <span class="preprocessor"></span>
<a name="l02114"></a>02114 <span class="keyword">enum</span> {
<a name="l02115"></a>02115         <span class="comment">/* these should be identical to their EXT4_*_FL counterparts, they are</span>
<a name="l02116"></a>02116 <span class="comment">         * redefined here only to avoid dragging in fs/ext4/ext4.h */</span>
<a name="l02117"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba68a86392babbb8dc1f66924e3d3f2df5">02117</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba68a86392babbb8dc1f66924e3d3f2df5">LUSTRE_SYNC_FL</a> = 0x00000008, <span class="comment">/* Synchronous updates */</span>
<a name="l02118"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba67ea88400f67d1a6ebff0c771e06a1af">02118</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba67ea88400f67d1a6ebff0c771e06a1af">LUSTRE_IMMUTABLE_FL</a> = 0x00000010, <span class="comment">/* Immutable file */</span>
<a name="l02119"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baeebdea7ab741a68b3731337bf7d98048">02119</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baeebdea7ab741a68b3731337bf7d98048">LUSTRE_APPEND_FL</a> = 0x00000020, <span class="comment">/* writes to file may only append */</span>
<a name="l02120"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba06efcf7c29e9ec90b41de0fbc0634524">02120</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba06efcf7c29e9ec90b41de0fbc0634524">LUSTRE_NODUMP_FL</a> = 0x00000040, <span class="comment">/* do not dump file */</span>
<a name="l02121"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167bad471cd0afc76c70ae13b6d65125ec496">02121</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167bad471cd0afc76c70ae13b6d65125ec496">LUSTRE_NOATIME_FL</a> = 0x00000080, <span class="comment">/* do not update atime */</span>
<a name="l02122"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba3695a55ce62332407ae466ce66ea15a6">02122</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba3695a55ce62332407ae466ce66ea15a6">LUSTRE_INDEX_FL</a> = 0x00001000, <span class="comment">/* hash-indexed directory */</span>
<a name="l02123"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba09f19ebbff7018cac2b718c084ad8c41">02123</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba09f19ebbff7018cac2b718c084ad8c41">LUSTRE_DIRSYNC_FL</a> = 0x00010000, <span class="comment">/* dirsync behaviour (dir only) */</span>
<a name="l02124"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba15fdac82d170d844e6b53670cd7454a2">02124</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba15fdac82d170d844e6b53670cd7454a2">LUSTRE_TOPDIR_FL</a> = 0x00020000, <span class="comment">/* Top of directory hierarchies*/</span>
<a name="l02125"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba9238daaa0ceb52c8cb4327c1d8badd4c">02125</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba9238daaa0ceb52c8cb4327c1d8badd4c">LUSTRE_DIRECTIO_FL</a> = 0x00100000, <span class="comment">/* Use direct i/o */</span>
<a name="l02126"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba25bf847f48d4ed69bd23a2abbdb66a8f">02126</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba25bf847f48d4ed69bd23a2abbdb66a8f">LUSTRE_INLINE_DATA_FL</a> = 0x10000000, <span class="comment">/* Inode has inline data. */</span>
<a name="l02127"></a>02127 
<a name="l02128"></a>02128         <span class="comment">/* These flags will not be identical to any EXT4_*_FL counterparts,</span>
<a name="l02129"></a>02129 <span class="comment">         * and only reserved for lustre purpose. Note: these flags might</span>
<a name="l02130"></a>02130 <span class="comment">         * be conflict with some of EXT4 flags, so</span>
<a name="l02131"></a>02131 <span class="comment">         * 1. these conflict flags needs to be removed when the flag is</span>
<a name="l02132"></a>02132 <span class="comment">         * wired by la_flags see osd_attr_get().</span>
<a name="l02133"></a>02133 <span class="comment">         * 2. If these flags needs to be stored into inode, they will be</span>
<a name="l02134"></a>02134 <span class="comment">         * stored in LMA. see LMAI_XXXX */</span>
<a name="l02135"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baed967e655ccaf1ef61d52d3f19559595">02135</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baed967e655ccaf1ef61d52d3f19559595">LUSTRE_ORPHAN_FL</a> = 0x00002000,
<a name="l02136"></a>02136 
<a name="l02137"></a><a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba3b2c26e3d8ff387f0d250c477b2de94b">02137</a>         <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba3b2c26e3d8ff387f0d250c477b2de94b">LUSTRE_LMA_FL_MASKS</a> = <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baed967e655ccaf1ef61d52d3f19559595">LUSTRE_ORPHAN_FL</a>,
<a name="l02138"></a>02138 };
<a name="l02139"></a>02139 
<a name="l02140"></a>02140 <span class="comment">/* LUSTRE_LMA_FL_MASKS defines which flags will be stored in LMA */</span>
<a name="l02141"></a>02141 
<a name="l02142"></a><a class="code" href="group__lustreidl.html#ga0b27f6bb86be399dfb498220cd46b4ab">02142</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#ga0b27f6bb86be399dfb498220cd46b4ab">lma_to_lustre_flags</a>(__u32 lma_flags)
<a name="l02143"></a>02143 {
<a name="l02144"></a>02144         <span class="keywordflow">return</span> (lma_flags &amp; <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad22e50174ad69c460d21fd7308de2bc1">LMAI_ORPHAN</a>) ? <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baed967e655ccaf1ef61d52d3f19559595">LUSTRE_ORPHAN_FL</a> : 0;
<a name="l02145"></a>02145 }
<a name="l02146"></a>02146 
<a name="l02147"></a><a class="code" href="group__lustreidl.html#gae549af483a79fdbbb64fa775f929c5f7">02147</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#gae549af483a79fdbbb64fa775f929c5f7">lustre_to_lma_flags</a>(__u32 la_flags)
<a name="l02148"></a>02148 {
<a name="l02149"></a>02149         <span class="keywordflow">return</span> (la_flags &amp; <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baed967e655ccaf1ef61d52d3f19559595">LUSTRE_ORPHAN_FL</a>) ? <a class="code" href="group__lu__fid.html#gga5c86b0d816a99aa2ef2c9f6f41d4f893ad22e50174ad69c460d21fd7308de2bc1">LMAI_ORPHAN</a> : 0;
<a name="l02150"></a>02150 }
<a name="l02151"></a>02151 
<a name="l02152"></a>02152 
<a name="l02153"></a>02153 <span class="preprocessor">#ifdef __KERNEL__</span>
<a name="l02154"></a>02154 <span class="preprocessor"></span><span class="comment">/* Convert wire LUSTRE_*_FL to corresponding client local VFS S_* values</span>
<a name="l02155"></a>02155 <span class="comment"> * for the client inode i_flags.  The LUSTRE_*_FL are the Lustre wire</span>
<a name="l02156"></a>02156 <span class="comment"> * protocol equivalents of LDISKFS_*_FL values stored on disk, while</span>
<a name="l02157"></a>02157 <span class="comment"> * the S_* flags are kernel-internal values that change between kernel</span>
<a name="l02158"></a>02158 <span class="comment"> * versions.  These flags are set/cleared via FSFILT_IOC_{GET,SET}_FLAGS.</span>
<a name="l02159"></a>02159 <span class="comment"> * See b=16526 for a full history. */</span>
<a name="l02160"></a>02160 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> ll_ext_to_inode_flags(<span class="keywordtype">int</span> flags)
<a name="l02161"></a>02161 {
<a name="l02162"></a>02162         <span class="keywordflow">return</span> (((flags &amp; <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba68a86392babbb8dc1f66924e3d3f2df5">LUSTRE_SYNC_FL</a>)      ? S_SYNC      : 0) |
<a name="l02163"></a>02163                 ((flags &amp; <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167bad471cd0afc76c70ae13b6d65125ec496">LUSTRE_NOATIME_FL</a>)   ? S_NOATIME   : 0) |
<a name="l02164"></a>02164                 ((flags &amp; <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167baeebdea7ab741a68b3731337bf7d98048">LUSTRE_APPEND_FL</a>)    ? S_APPEND    : 0) |
<a name="l02165"></a>02165 #<span class="keywordflow">if</span> defined(S_DIRSYNC)
<a name="l02166"></a>02166                 ((flags &amp; <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba09f19ebbff7018cac2b718c084ad8c41">LUSTRE_DIRSYNC_FL</a>)   ? S_DIRSYNC   : 0) |
<a name="l02167"></a>02167 #endif
<a name="l02168"></a>02168                 ((flags &amp; <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba67ea88400f67d1a6ebff0c771e06a1af">LUSTRE_IMMUTABLE_FL</a>) ? S_IMMUTABLE : 0));
<a name="l02169"></a>02169 }
<a name="l02170"></a>02170 
<a name="l02171"></a>02171 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> ll_inode_to_ext_flags(<span class="keywordtype">int</span> iflags)
<a name="l02172"></a>02172 {
<a name="l02173"></a>02173         <span class="keywordflow">return</span> (((iflags &amp; S_SYNC)      ? LUSTRE_SYNC_FL      : 0) |
<a name="l02174"></a>02174                 ((iflags &amp; S_NOATIME)   ? LUSTRE_NOATIME_FL   : 0) |
<a name="l02175"></a>02175                 ((iflags &amp; S_APPEND)    ? LUSTRE_APPEND_FL    : 0) |
<a name="l02176"></a>02176 #<span class="keywordflow">if</span> defined(S_DIRSYNC)
<a name="l02177"></a>02177                 ((iflags &amp; S_DIRSYNC)   ? LUSTRE_DIRSYNC_FL   : 0) |
<a name="l02178"></a>02178 #endif
<a name="l02179"></a>02179                 ((iflags &amp; S_IMMUTABLE) ? <a class="code" href="group__lustreidl.html#gga7ff5f2dff38e7639981794c43dc9167ba67ea88400f67d1a6ebff0c771e06a1af">LUSTRE_IMMUTABLE_FL</a> : 0));
<a name="l02180"></a>02180 }
<a name="l02181"></a>02181 <span class="preprocessor">#endif</span>
<a name="l02182"></a>02182 <span class="preprocessor"></span>
<a name="l02183"></a>02183 <span class="comment">/* 64 possible states */</span>
<a name="l02184"></a><a class="code" href="group__lustreidl.html#ga898929cb62dbec9b4ad3079e0f6977a6">02184</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga898929cb62dbec9b4ad3079e0f6977a6">md_transient_state</a> {
<a name="l02185"></a><a class="code" href="group__lustreidl.html#gga898929cb62dbec9b4ad3079e0f6977a6ab36cb8649a3fb24480fa869dcb7c46a5">02185</a>         <a class="code" href="group__lustreidl.html#gga898929cb62dbec9b4ad3079e0f6977a6ab36cb8649a3fb24480fa869dcb7c46a5">MS_RESTORE</a>      = (1 &lt;&lt; 0),     <span class="comment">/* restore is running */</span>
<a name="l02186"></a>02186 };
<a name="l02187"></a>02187 
<a name="l02188"></a><a class="code" href="structmdt__body.html">02188</a> <span class="keyword">struct </span><a class="code" href="structmdt__body.html">mdt_body</a> {
<a name="l02189"></a><a class="code" href="structmdt__body.html#af95f5f511b3aacf651ad7822ee8b324b">02189</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> <a class="code" href="structmdt__body.html#af95f5f511b3aacf651ad7822ee8b324b">mbo_fid1</a>;
<a name="l02190"></a><a class="code" href="structmdt__body.html#afd6f6a03d5026207695733f18debf281">02190</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> <a class="code" href="structmdt__body.html#afd6f6a03d5026207695733f18debf281">mbo_fid2</a>;
<a name="l02191"></a><a class="code" href="structmdt__body.html#afb8730bbf7943e662122cc8d5acb6138">02191</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structmdt__body.html#afb8730bbf7943e662122cc8d5acb6138">mbo_handle</a>;
<a name="l02192"></a><a class="code" href="structmdt__body.html#a1b206c7182c4ded5e8b9fbb1e8670bb5">02192</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a1b206c7182c4ded5e8b9fbb1e8670bb5">mbo_valid</a>;
<a name="l02193"></a><a class="code" href="structmdt__body.html#a3f93f884a6cdf708923972df37ea0ad9">02193</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a3f93f884a6cdf708923972df37ea0ad9">mbo_size</a>; <span class="comment">/* Offset, in the case of MDS_READPAGE */</span>
<a name="l02194"></a><a class="code" href="structmdt__body.html#a9db74eea42ff8424c332fa31ff5b73cb">02194</a>         __s64   <a class="code" href="structmdt__body.html#a9db74eea42ff8424c332fa31ff5b73cb">mbo_mtime</a>;
<a name="l02195"></a><a class="code" href="structmdt__body.html#a3ff7310065ba9b640686ebd8c0d0e0e4">02195</a>         __s64   <a class="code" href="structmdt__body.html#a3ff7310065ba9b640686ebd8c0d0e0e4">mbo_atime</a>;
<a name="l02196"></a><a class="code" href="structmdt__body.html#a1ab5950fa0a8ee995a466f80fe688c52">02196</a>         __s64   <a class="code" href="structmdt__body.html#a1ab5950fa0a8ee995a466f80fe688c52">mbo_ctime</a>;
<a name="l02197"></a><a class="code" href="structmdt__body.html#a009cacd2be0f8306a0bd2ccf68cb24cd">02197</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a009cacd2be0f8306a0bd2ccf68cb24cd">mbo_blocks</a>; <span class="comment">/* XID, in the case of MDS_READPAGE */</span>
<a name="l02198"></a><a class="code" href="structmdt__body.html#adf0797e4c450742ad0df5f889694317c">02198</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#adf0797e4c450742ad0df5f889694317c">mbo_ioepoch</a>;
<a name="l02199"></a><a class="code" href="structmdt__body.html#a4df278523ad2f8c4374591ac2574038e">02199</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a4df278523ad2f8c4374591ac2574038e">mbo_t_state</a>; <span class="comment">/* transient file state defined in</span>
<a name="l02200"></a>02200 <span class="comment">                              * enum md_transient_state</span>
<a name="l02201"></a>02201 <span class="comment">                              * was &quot;ino&quot; until 2.4.0 */</span>
<a name="l02202"></a><a class="code" href="structmdt__body.html#af163c3cd300a0f129570081d5eac83d9">02202</a>         __u32   <a class="code" href="structmdt__body.html#af163c3cd300a0f129570081d5eac83d9">mbo_fsuid</a>;
<a name="l02203"></a><a class="code" href="structmdt__body.html#a37d4212a0e5abf8a11b5ba29fd02207e">02203</a>         __u32   <a class="code" href="structmdt__body.html#a37d4212a0e5abf8a11b5ba29fd02207e">mbo_fsgid</a>;
<a name="l02204"></a><a class="code" href="structmdt__body.html#ade7c169d995563fc10fea065de871343">02204</a>         __u32   <a class="code" href="structmdt__body.html#ade7c169d995563fc10fea065de871343">mbo_capability</a>;
<a name="l02205"></a><a class="code" href="structmdt__body.html#a4c08c2c6725ffd918c4ef835e1fdd740">02205</a>         __u32   <a class="code" href="structmdt__body.html#a4c08c2c6725ffd918c4ef835e1fdd740">mbo_mode</a>;
<a name="l02206"></a><a class="code" href="structmdt__body.html#aa69f440ff2d167cbf5ea11770bc4d6ce">02206</a>         __u32   <a class="code" href="structmdt__body.html#aa69f440ff2d167cbf5ea11770bc4d6ce">mbo_uid</a>;
<a name="l02207"></a><a class="code" href="structmdt__body.html#a2ca9cca562df5979ad3502db0646db20">02207</a>         __u32   <a class="code" href="structmdt__body.html#a2ca9cca562df5979ad3502db0646db20">mbo_gid</a>;
<a name="l02208"></a><a class="code" href="structmdt__body.html#a377b0b21bc97e0f7c14a9c391d30b053">02208</a>         __u32   <a class="code" href="structmdt__body.html#a377b0b21bc97e0f7c14a9c391d30b053">mbo_flags</a>;   <span class="comment">/* LUSTRE_*_FL file attributes */</span>
<a name="l02209"></a><a class="code" href="structmdt__body.html#a8d5c5c4bf3f224d0bf8c5c251c3ab3b1">02209</a>         __u32   <a class="code" href="structmdt__body.html#a8d5c5c4bf3f224d0bf8c5c251c3ab3b1">mbo_rdev</a>;
<a name="l02210"></a><a class="code" href="structmdt__body.html#a96c642f63e2b6ce21e7672d548185069">02210</a>         __u32   <a class="code" href="structmdt__body.html#a96c642f63e2b6ce21e7672d548185069">mbo_nlink</a>; <span class="comment">/* #bytes to read in the case of MDS_READPAGE */</span>
<a name="l02211"></a><a class="code" href="structmdt__body.html#aa66410231f7ceaf0979ccf3bc7995a8c">02211</a>         __u32   <a class="code" href="structmdt__body.html#aa66410231f7ceaf0979ccf3bc7995a8c">mbo_unused2</a>; <span class="comment">/* was &quot;generation&quot; until 2.4.0 */</span>
<a name="l02212"></a><a class="code" href="structmdt__body.html#a8366be645fd4e8fd5fcba29243b23528">02212</a>         __u32   <a class="code" href="structmdt__body.html#a8366be645fd4e8fd5fcba29243b23528">mbo_suppgid</a>;
<a name="l02213"></a><a class="code" href="structmdt__body.html#a359eea15d049e4e64c13734f1869cfd5">02213</a>         __u32   <a class="code" href="structmdt__body.html#a359eea15d049e4e64c13734f1869cfd5">mbo_eadatasize</a>;
<a name="l02214"></a><a class="code" href="structmdt__body.html#aad4dfd22cdf6492eec9b758fcfd801fd">02214</a>         __u32   <a class="code" href="structmdt__body.html#aad4dfd22cdf6492eec9b758fcfd801fd">mbo_aclsize</a>;
<a name="l02215"></a><a class="code" href="structmdt__body.html#a47fc4e6a0c0ed3628e96eb3c319e9d9d">02215</a>         __u32   <a class="code" href="structmdt__body.html#a47fc4e6a0c0ed3628e96eb3c319e9d9d">mbo_max_mdsize</a>;
<a name="l02216"></a><a class="code" href="structmdt__body.html#a823b2b46eb2141d669df13dbee7cd7c6">02216</a>         __u32   <a class="code" href="structmdt__body.html#a823b2b46eb2141d669df13dbee7cd7c6">mbo_unused3</a>; <span class="comment">/* was max_cookiesize until 2.8 */</span>
<a name="l02217"></a><a class="code" href="structmdt__body.html#aba1dce946be8fc4751096c6b93e170e3">02217</a>         __u32   <a class="code" href="structmdt__body.html#aba1dce946be8fc4751096c6b93e170e3">mbo_uid_h</a>; <span class="comment">/* high 32-bits of uid, for FUID */</span>
<a name="l02218"></a><a class="code" href="structmdt__body.html#a721a32df515d60e1dbb3a6b405b10bde">02218</a>         __u32   <a class="code" href="structmdt__body.html#a721a32df515d60e1dbb3a6b405b10bde">mbo_gid_h</a>; <span class="comment">/* high 32-bits of gid, for FUID */</span>
<a name="l02219"></a><a class="code" href="structmdt__body.html#aeb856396574e9f5c5299e5c3df2164be">02219</a>         __u32   <a class="code" href="structmdt__body.html#aeb856396574e9f5c5299e5c3df2164be">mbo_padding_5</a>; <span class="comment">/* also fix lustre_swab_mdt_body */</span>
<a name="l02220"></a><a class="code" href="structmdt__body.html#a1c2d23d6ccbfb242c294ce708b39eea7">02220</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a1c2d23d6ccbfb242c294ce708b39eea7">mbo_padding_6</a>;
<a name="l02221"></a><a class="code" href="structmdt__body.html#af726d9a046c84a921daba6732ee9a024">02221</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#af726d9a046c84a921daba6732ee9a024">mbo_padding_7</a>;
<a name="l02222"></a><a class="code" href="structmdt__body.html#adbf9af1f35dcf6c6f06bb992f02161c2">02222</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#adbf9af1f35dcf6c6f06bb992f02161c2">mbo_padding_8</a>;
<a name="l02223"></a><a class="code" href="structmdt__body.html#a221194d69e92e67e7decbe5d029002e0">02223</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a221194d69e92e67e7decbe5d029002e0">mbo_padding_9</a>;
<a name="l02224"></a><a class="code" href="structmdt__body.html#a0eb2e85925866b90c75240aae7d1b92e">02224</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structmdt__body.html#a0eb2e85925866b90c75240aae7d1b92e">mbo_padding_10</a>;
<a name="l02225"></a>02225 }; <span class="comment">/* 216 */</span>
<a name="l02226"></a>02226 
<a name="l02227"></a><a class="code" href="structmdt__ioepoch.html">02227</a> <span class="keyword">struct </span><a class="code" href="structmdt__ioepoch.html">mdt_ioepoch</a> {
<a name="l02228"></a><a class="code" href="structmdt__ioepoch.html#ac6aa2642c8dfe44fa873b6984daa3c80">02228</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structmdt__ioepoch.html#ac6aa2642c8dfe44fa873b6984daa3c80">mio_handle</a>;
<a name="l02229"></a><a class="code" href="structmdt__ioepoch.html#ac4c17447ac11e3cae4191559a4ee6e48">02229</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structmdt__ioepoch.html#ac4c17447ac11e3cae4191559a4ee6e48">mio_unused1</a>; <span class="comment">/* was ioepoch */</span>
<a name="l02230"></a><a class="code" href="structmdt__ioepoch.html#aa09fbb21b27fdcb326cb2545746547fc">02230</a>         __u32 <a class="code" href="structmdt__ioepoch.html#aa09fbb21b27fdcb326cb2545746547fc">mio_unused2</a>; <span class="comment">/* was flags */</span>
<a name="l02231"></a><a class="code" href="structmdt__ioepoch.html#a89c406dfe1837133912051a81b7f4a09">02231</a>         __u32 <a class="code" href="structmdt__ioepoch.html#a89c406dfe1837133912051a81b7f4a09">mio_padding</a>;
<a name="l02232"></a>02232 };
<a name="l02233"></a>02233 
<a name="l02234"></a>02234 <span class="comment">/* permissions for md_perm.mp_perm */</span>
<a name="l02235"></a>02235 <span class="keyword">enum</span> {
<a name="l02236"></a><a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8a4d4ed84ea5969ea07b2118f148c41072">02236</a>         <a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8a4d4ed84ea5969ea07b2118f148c41072">CFS_SETUID_PERM</a> = 0x01,
<a name="l02237"></a><a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8af49f727e62f481fabed1f2206024e44a">02237</a>         <a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8af49f727e62f481fabed1f2206024e44a">CFS_SETGID_PERM</a> = 0x02,
<a name="l02238"></a><a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8a3cf02e96b11d73a35a30a7646d2caae0">02238</a>         <a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8a3cf02e96b11d73a35a30a7646d2caae0">CFS_SETGRP_PERM</a> = 0x04,
<a name="l02239"></a><a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8ac135be3c07e0c36dd2b79c65020daa4d">02239</a>         <a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8ac135be3c07e0c36dd2b79c65020daa4d">CFS_RMTACL_PERM</a> = 0x08,
<a name="l02240"></a><a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8ac14a2c56253b83482d9dfcc37e79c434">02240</a>         <a class="code" href="group__lustreidl.html#ggaabfcbcb5ac86a1edac4035264bc7d2b8ac14a2c56253b83482d9dfcc37e79c434">CFS_RMTOWN_PERM</a> = 0x10
<a name="l02241"></a>02241 };
<a name="l02242"></a>02242 
<a name="l02243"></a>02243 <span class="comment">/* inode access permission for remote user, the inode info are omitted,</span>
<a name="l02244"></a>02244 <span class="comment"> * for client knows them. */</span>
<a name="l02245"></a><a class="code" href="structmdt__remote__perm.html">02245</a> <span class="keyword">struct </span><a class="code" href="structmdt__remote__perm.html">mdt_remote_perm</a> {
<a name="l02246"></a><a class="code" href="structmdt__remote__perm.html#a511e153a7d5d3435846fd684a76e4229">02246</a>         __u32           <a class="code" href="structmdt__remote__perm.html#a511e153a7d5d3435846fd684a76e4229">rp_uid</a>;
<a name="l02247"></a><a class="code" href="structmdt__remote__perm.html#adf4e10b44e6cbcbf7c5f06569f1f5ad7">02247</a>         __u32           <a class="code" href="structmdt__remote__perm.html#adf4e10b44e6cbcbf7c5f06569f1f5ad7">rp_gid</a>;
<a name="l02248"></a><a class="code" href="structmdt__remote__perm.html#ac3e2db549e0e04b30d6de693666bcfa4">02248</a>         __u32           <a class="code" href="structmdt__remote__perm.html#ac3e2db549e0e04b30d6de693666bcfa4">rp_fsuid</a>;
<a name="l02249"></a><a class="code" href="structmdt__remote__perm.html#a6cd98540efc8f5bb13575345e1230bb7">02249</a>         __u32           <a class="code" href="structmdt__remote__perm.html#a6cd98540efc8f5bb13575345e1230bb7">rp_fsuid_h</a>;
<a name="l02250"></a><a class="code" href="structmdt__remote__perm.html#aa01b1abc7f46ec9dc108ca80a671cece">02250</a>         __u32           <a class="code" href="structmdt__remote__perm.html#aa01b1abc7f46ec9dc108ca80a671cece">rp_fsgid</a>;
<a name="l02251"></a><a class="code" href="structmdt__remote__perm.html#a60516ce066e0155b0c6e81449920d2a4">02251</a>         __u32           <a class="code" href="structmdt__remote__perm.html#a60516ce066e0155b0c6e81449920d2a4">rp_fsgid_h</a>;
<a name="l02252"></a><a class="code" href="structmdt__remote__perm.html#a3357c9cd8bae50b0897c69b03c4e1262">02252</a>         __u32           <a class="code" href="structmdt__remote__perm.html#a3357c9cd8bae50b0897c69b03c4e1262">rp_access_perm</a>; <span class="comment">/* MAY_READ/WRITE/EXEC */</span>
<a name="l02253"></a><a class="code" href="structmdt__remote__perm.html#acfee4dc7849f4dfc9503abcbd92672bf">02253</a>         __u32           <a class="code" href="structmdt__remote__perm.html#acfee4dc7849f4dfc9503abcbd92672bf">rp_padding</a>;
<a name="l02254"></a>02254 };
<a name="l02255"></a>02255 
<a name="l02256"></a><a class="code" href="structmdt__rec__setattr.html">02256</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__setattr.html">mdt_rec_setattr</a> {
<a name="l02257"></a><a class="code" href="structmdt__rec__setattr.html#ab6d3e8df74a855294ce265f9e7047e46">02257</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#ab6d3e8df74a855294ce265f9e7047e46">sa_opcode</a>;
<a name="l02258"></a><a class="code" href="structmdt__rec__setattr.html#a4c5ea9f4ef58a57868612c7535cd5d64">02258</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a4c5ea9f4ef58a57868612c7535cd5d64">sa_cap</a>;
<a name="l02259"></a><a class="code" href="structmdt__rec__setattr.html#a6ec437acd8b8eab11a995d2b5218337e">02259</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a6ec437acd8b8eab11a995d2b5218337e">sa_fsuid</a>;
<a name="l02260"></a><a class="code" href="structmdt__rec__setattr.html#a2ff288904413aacf3771f905e42900ec">02260</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a2ff288904413aacf3771f905e42900ec">sa_fsuid_h</a>;
<a name="l02261"></a><a class="code" href="structmdt__rec__setattr.html#ab82a2adceb6b1a5525c6c14659c452b7">02261</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#ab82a2adceb6b1a5525c6c14659c452b7">sa_fsgid</a>;
<a name="l02262"></a><a class="code" href="structmdt__rec__setattr.html#a99ab7df28b10a234de2def1c0b185c47">02262</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a99ab7df28b10a234de2def1c0b185c47">sa_fsgid_h</a>;
<a name="l02263"></a><a class="code" href="structmdt__rec__setattr.html#a0b61264cdcfebd8a8fe3ee0a8e263aea">02263</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a0b61264cdcfebd8a8fe3ee0a8e263aea">sa_suppgid</a>;
<a name="l02264"></a><a class="code" href="structmdt__rec__setattr.html#a10befaf4838271ed76acd98753aafea0">02264</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a10befaf4838271ed76acd98753aafea0">sa_suppgid_h</a>;
<a name="l02265"></a><a class="code" href="structmdt__rec__setattr.html#add587584d5cb9060bd1bdb7ec743329e">02265</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#add587584d5cb9060bd1bdb7ec743329e">sa_padding_1</a>;
<a name="l02266"></a><a class="code" href="structmdt__rec__setattr.html#ae7ff2e6cd6424291d674fb2970d7fc93">02266</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#ae7ff2e6cd6424291d674fb2970d7fc93">sa_padding_1_h</a>;
<a name="l02267"></a><a class="code" href="structmdt__rec__setattr.html#a88d752399018009b69d78397ea4ccd1d">02267</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__setattr.html#a88d752399018009b69d78397ea4ccd1d">sa_fid</a>;
<a name="l02268"></a><a class="code" href="structmdt__rec__setattr.html#ae6ff93e02982ea229cf1ec7a31886349">02268</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setattr.html#ae6ff93e02982ea229cf1ec7a31886349">sa_valid</a>;
<a name="l02269"></a><a class="code" href="structmdt__rec__setattr.html#a08968815b90de87021c1666d0d5849e3">02269</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a08968815b90de87021c1666d0d5849e3">sa_uid</a>;
<a name="l02270"></a><a class="code" href="structmdt__rec__setattr.html#abb344a39dbb89f8bd8f3276ce2945b14">02270</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#abb344a39dbb89f8bd8f3276ce2945b14">sa_gid</a>;
<a name="l02271"></a><a class="code" href="structmdt__rec__setattr.html#ac57d318a210aaf958d623020702ed476">02271</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setattr.html#ac57d318a210aaf958d623020702ed476">sa_size</a>;
<a name="l02272"></a><a class="code" href="structmdt__rec__setattr.html#af6b35f904415265902937e06aa575f77">02272</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setattr.html#af6b35f904415265902937e06aa575f77">sa_blocks</a>;
<a name="l02273"></a><a class="code" href="structmdt__rec__setattr.html#a7bb000c90f09a08f325f8f82ad472d42">02273</a>         __s64           <a class="code" href="structmdt__rec__setattr.html#a7bb000c90f09a08f325f8f82ad472d42">sa_mtime</a>;
<a name="l02274"></a><a class="code" href="structmdt__rec__setattr.html#a88fb431b8957e4474c394655478f53c7">02274</a>         __s64           <a class="code" href="structmdt__rec__setattr.html#a88fb431b8957e4474c394655478f53c7">sa_atime</a>;
<a name="l02275"></a><a class="code" href="structmdt__rec__setattr.html#acaf13293ada100b055466e52f1bc86dd">02275</a>         __s64           <a class="code" href="structmdt__rec__setattr.html#acaf13293ada100b055466e52f1bc86dd">sa_ctime</a>;
<a name="l02276"></a><a class="code" href="structmdt__rec__setattr.html#a9b0ca6ca463a74a092cfb523d0e93bff">02276</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a9b0ca6ca463a74a092cfb523d0e93bff">sa_attr_flags</a>;
<a name="l02277"></a><a class="code" href="structmdt__rec__setattr.html#a7eefe547e07ba3ab1e19bb55d83d211b">02277</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a7eefe547e07ba3ab1e19bb55d83d211b">sa_mode</a>;
<a name="l02278"></a><a class="code" href="structmdt__rec__setattr.html#ac9ac1bb4d3c5d4989097ddac1bbd629c">02278</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#ac9ac1bb4d3c5d4989097ddac1bbd629c">sa_bias</a>;      <span class="comment">/* some operation flags */</span>
<a name="l02279"></a><a class="code" href="structmdt__rec__setattr.html#acd6be69fcccb0ee725dc45be766782a0">02279</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#acd6be69fcccb0ee725dc45be766782a0">sa_padding_3</a>;
<a name="l02280"></a><a class="code" href="structmdt__rec__setattr.html#a23080b825fba47cb592beeab6000a096">02280</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a23080b825fba47cb592beeab6000a096">sa_padding_4</a>;
<a name="l02281"></a><a class="code" href="structmdt__rec__setattr.html#a8eb5edf998214808ef72c53b1f6fbd51">02281</a>         __u32           <a class="code" href="structmdt__rec__setattr.html#a8eb5edf998214808ef72c53b1f6fbd51">sa_padding_5</a>;
<a name="l02282"></a>02282 };
<a name="l02283"></a>02283 
<a name="l02284"></a>02284 <span class="comment">/*</span>
<a name="l02285"></a>02285 <span class="comment"> * Attribute flags used in mdt_rec_setattr::sa_valid.</span>
<a name="l02286"></a>02286 <span class="comment"> * The kernel&apos;s #defines for ATTR_* should not be used over the network</span>
<a name="l02287"></a>02287 <span class="comment"> * since the client and MDS may run different kernels (see bug 13828)</span>
<a name="l02288"></a>02288 <span class="comment"> * Therefore, we should only use MDS_ATTR_* attributes for sa_valid.</span>
<a name="l02289"></a>02289 <span class="comment"> */</span>
<a name="l02290"></a><a class="code" href="group__lustreidl.html#ga167bc76a9112cfea6c8bb36221708c03">02290</a> <span class="preprocessor">#define MDS_ATTR_MODE          0x1ULL </span><span class="comment">/* = 1 */</span>
<a name="l02291"></a><a class="code" href="group__lustreidl.html#ga8421d8830f1d8ebcae8c6ac7cb641ea8">02291</a> <span class="preprocessor">#define MDS_ATTR_UID           0x2ULL </span><span class="comment">/* = 2 */</span>
<a name="l02292"></a><a class="code" href="group__lustreidl.html#ga341daf4250c6c8af89d36fbdc40e9d28">02292</a> <span class="preprocessor">#define MDS_ATTR_GID           0x4ULL </span><span class="comment">/* = 4 */</span>
<a name="l02293"></a><a class="code" href="group__lustreidl.html#gaf34752e59cca8ca4a964c95edbef8188">02293</a> <span class="preprocessor">#define MDS_ATTR_SIZE          0x8ULL </span><span class="comment">/* = 8 */</span>
<a name="l02294"></a><a class="code" href="group__lustreidl.html#ga99c33b7058ae5c4c95ca7e891cccaa3a">02294</a> <span class="preprocessor">#define MDS_ATTR_ATIME        0x10ULL </span><span class="comment">/* = 16 */</span>
<a name="l02295"></a><a class="code" href="group__lustreidl.html#ga836d69de64f40ebdb95c984df7fc4168">02295</a> <span class="preprocessor">#define MDS_ATTR_MTIME        0x20ULL </span><span class="comment">/* = 32 */</span>
<a name="l02296"></a><a class="code" href="group__lustreidl.html#ga8a2eb2c8b230225e30c9817a89174b1e">02296</a> <span class="preprocessor">#define MDS_ATTR_CTIME        0x40ULL </span><span class="comment">/* = 64 */</span>
<a name="l02297"></a><a class="code" href="group__lustreidl.html#ga1a3b2bfc66cd164853b206308799b2f3">02297</a> <span class="preprocessor">#define MDS_ATTR_ATIME_SET    0x80ULL </span><span class="comment">/* = 128 */</span>
<a name="l02298"></a><a class="code" href="group__lustreidl.html#ga1e7e9e3982d994a9b1789a2e42854589">02298</a> <span class="preprocessor">#define MDS_ATTR_MTIME_SET   0x100ULL </span><span class="comment">/* = 256 */</span>
<a name="l02299"></a><a class="code" href="group__lustreidl.html#ga13618a3f4692ff17e29b39d917130a9d">02299</a> <span class="preprocessor">#define MDS_ATTR_FORCE       0x200ULL </span><span class="comment">/* = 512, Not a change, but a change it */</span>
<a name="l02300"></a><a class="code" href="group__lustreidl.html#ga1bea0bb409dc7b9743a28fdb3ffc8007">02300</a> <span class="preprocessor">#define MDS_ATTR_ATTR_FLAG   0x400ULL </span><span class="comment">/* = 1024 */</span>
<a name="l02301"></a><a class="code" href="group__lustreidl.html#ga396eb979515d05160d6fd29059f8188e">02301</a> <span class="preprocessor">#define MDS_ATTR_KILL_SUID   0x800ULL </span><span class="comment">/* = 2048 */</span>
<a name="l02302"></a><a class="code" href="group__lustreidl.html#ga860d2aa0075573d27067230d6a9c02ae">02302</a> <span class="preprocessor">#define MDS_ATTR_KILL_SGID  0x1000ULL </span><span class="comment">/* = 4096 */</span>
<a name="l02303"></a><a class="code" href="group__lustreidl.html#gaf431ba9961d4425c221ada8d03c949fc">02303</a> <span class="preprocessor">#define MDS_ATTR_CTIME_SET  0x2000ULL </span><span class="comment">/* = 8192 */</span>
<a name="l02304"></a><a class="code" href="group__lustreidl.html#gaec25ff539e56b701501859527d5009a6">02304</a> <span class="preprocessor">#define MDS_ATTR_FROM_OPEN  0x4000ULL </span><span class="comment">/* = 16384, called from open path, ie O_TRUNC */</span>
<a name="l02305"></a><a class="code" href="group__lustreidl.html#ga06fcfd1259ed2dc086d3c845897ebc54">02305</a> <span class="preprocessor">#define MDS_ATTR_BLOCKS     0x8000ULL </span><span class="comment">/* = 32768 */</span>
<a name="l02306"></a>02306 
<a name="l02307"></a>02307 <span class="preprocessor">#ifndef FMODE_READ</span>
<a name="l02308"></a><a class="code" href="group__lustreidl.html#gaa4953048861776a86cd387c0d96db449">02308</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_READ               00000001</span>
<a name="l02309"></a><a class="code" href="group__lustreidl.html#gae003a38311b8eb87254113b1c57a38f0">02309</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_WRITE              00000002</span>
<a name="l02310"></a>02310 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02311"></a>02311 <span class="preprocessor"></span>
<a name="l02312"></a><a class="code" href="group__lustreidl.html#gae99473b25f675f8c62a975e94c058072">02312</a> <span class="preprocessor">#define MDS_FMODE_CLOSED         00000000</span>
<a name="l02313"></a><a class="code" href="group__lustreidl.html#ga23f7cfdf1ff5d3bf112cc68260d00b69">02313</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_FMODE_EXEC           00000004</span>
<a name="l02314"></a>02314 <span class="preprocessor"></span><span class="comment">/*      MDS_FMODE_EPOCH          01000000 obsolete since 2.8.0 */</span>
<a name="l02315"></a>02315 <span class="comment">/*      MDS_FMODE_TRUNC          02000000 obsolete since 2.8.0 */</span>
<a name="l02316"></a>02316 <span class="comment">/*      MDS_FMODE_SOM            04000000 obsolete since 2.8.0 */</span>
<a name="l02317"></a>02317 
<a name="l02318"></a><a class="code" href="group__lustreidl.html#ga5f3279ffd9353ce6e242e7910a4c08ae">02318</a> <span class="preprocessor">#define MDS_OPEN_CREATED         00000010</span>
<a name="l02319"></a><a class="code" href="group__lustreidl.html#gab2ebefdeeeb819d38be5213426cda740">02319</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_OPEN_CROSS           00000020</span>
<a name="l02320"></a>02320 <span class="preprocessor"></span>
<a name="l02321"></a><a class="code" href="group__lustreidl.html#ga8b6b08ddea7c9a1cf4e14c9162e1c754">02321</a> <span class="preprocessor">#define MDS_OPEN_CREAT           00000100</span>
<a name="l02322"></a><a class="code" href="group__lustreidl.html#ga2c63cb38b4ca789fc4685106c9e89610">02322</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_OPEN_EXCL            00000200</span>
<a name="l02323"></a><a class="code" href="group__lustreidl.html#gac82c16521d4b65248b0707a31a73c221">02323</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_OPEN_TRUNC           00001000</span>
<a name="l02324"></a><a class="code" href="group__lustreidl.html#gab204ba644914655e5a1422ce6acbdd72">02324</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_OPEN_APPEND          00002000</span>
<a name="l02325"></a><a class="code" href="group__lustreidl.html#ga7dfef19025270143eee677cda7ff8e4e">02325</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_OPEN_SYNC            00010000</span>
<a name="l02326"></a><a class="code" href="group__lustreidl.html#ga71c2383784a0b90067892506da650c72">02326</a> <span class="preprocessor"></span><span class="preprocessor">#define MDS_OPEN_DIRECTORY       00200000</span>
<a name="l02327"></a>02327 <span class="preprocessor"></span>
<a name="l02328"></a><a class="code" href="group__lustreidl.html#ga2c33adbf3d6fb98d1f45d30828e259e3">02328</a> <span class="preprocessor">#define MDS_OPEN_BY_FID         040000000 </span><span class="comment">/* open_by_fid for known object */</span>
<a name="l02329"></a><a class="code" href="group__lustreidl.html#gab06831a3fa7e5aaaa8ac3a1c5620b4d8">02329</a> <span class="preprocessor">#define MDS_OPEN_DELAY_CREATE  0100000000 </span><span class="comment">/* delay initial object create */</span>
<a name="l02330"></a><a class="code" href="group__lustreidl.html#gaf61d9c68252e0e49c1f08bc6cbe6f6e7">02330</a> <span class="preprocessor">#define MDS_OPEN_OWNEROVERRIDE 0200000000 </span><span class="comment">/* NFSD rw-reopen ro file for owner */</span>
<a name="l02331"></a><a class="code" href="group__lustreidl.html#ga8060143a2be9252966479f425e4a4fa9">02331</a> <span class="preprocessor">#define MDS_OPEN_JOIN_FILE     0400000000 </span><span class="comment">/* open for join file.</span>
<a name="l02332"></a>02332 <span class="comment">                                           * We do not support JOIN FILE</span>
<a name="l02333"></a>02333 <span class="comment">                                           * anymore, reserve this flags</span>
<a name="l02334"></a>02334 <span class="comment">                                           * just for preventing such bit</span>
<a name="l02335"></a>02335 <span class="comment">                                           * to be reused. */</span>
<a name="l02336"></a>02336 
<a name="l02337"></a><a class="code" href="group__lustreidl.html#ga52d0b50e84afff68789f5ca77f9abe58">02337</a> <span class="preprocessor">#define MDS_OPEN_LOCK         04000000000 </span><span class="comment">/* This open requires open lock */</span>
<a name="l02338"></a><a class="code" href="group__lustreidl.html#ga9f7e279f11f3a153a3aef7160bbb6142">02338</a> <span class="preprocessor">#define MDS_OPEN_HAS_EA      010000000000 </span><span class="comment">/* specify object create pattern */</span>
<a name="l02339"></a><a class="code" href="group__lustreidl.html#ga27837e4f54e07852da09d812d7e85f31">02339</a> <span class="preprocessor">#define MDS_OPEN_HAS_OBJS    020000000000 </span><span class="comment">/* Just set the EA the obj exist */</span>
<a name="l02340"></a><a class="code" href="group__lustreidl.html#gafc28994ae3a3b5bbc088a3093436c4f2">02340</a> <span class="preprocessor">#define MDS_OPEN_NORESTORE  0100000000000ULL </span><span class="comment">/* Do not restore file at open */</span>
<a name="l02341"></a><a class="code" href="group__lustreidl.html#ga060ff536448d76d7e8a35e2c8c1a138b">02341</a> <span class="preprocessor">#define MDS_OPEN_NEWSTRIPE  0200000000000ULL </span><span class="comment">/* New stripe needed (restripe or</span>
<a name="l02342"></a>02342 <span class="comment">                                              * hsm restore) */</span>
<a name="l02343"></a><a class="code" href="group__lustreidl.html#ga7004c7692d38845781fb29a6dff7a358">02343</a> <span class="preprocessor">#define MDS_OPEN_VOLATILE   0400000000000ULL </span><span class="comment">/* File is volatile = created</span>
<a name="l02344"></a>02344 <span class="comment">                                                unlinked */</span>
<a name="l02345"></a><a class="code" href="group__lustreidl.html#ga5b3712b288fb729df990f78ddf4e1798">02345</a> <span class="preprocessor">#define MDS_OPEN_LEASE     01000000000000ULL </span><span class="comment">/* Open the file and grant lease</span>
<a name="l02346"></a>02346 <span class="comment">                                              * delegation, succeed if it&apos;s not</span>
<a name="l02347"></a>02347 <span class="comment">                                              * being opened with conflict mode.</span>
<a name="l02348"></a>02348 <span class="comment">                                              */</span>
<a name="l02349"></a><a class="code" href="group__lustreidl.html#ga1ed373a14102eee3f1b8b61648d98ee7">02349</a> <span class="preprocessor">#define MDS_OPEN_RELEASE   02000000000000ULL </span><span class="comment">/* Open the file for HSM release */</span>
<a name="l02350"></a>02350 
<a name="l02351"></a>02351 <span class="comment">/* lustre internal open flags, which should not be set from user space */</span>
<a name="l02352"></a><a class="code" href="group__lustreidl.html#ga75d554b7a3bc5db7246d17d480ad521b">02352</a> <span class="preprocessor">#define MDS_OPEN_FL_INTERNAL (MDS_OPEN_HAS_EA | MDS_OPEN_HAS_OBJS |     \</span>
<a name="l02353"></a>02353 <span class="preprocessor">                              MDS_OPEN_OWNEROVERRIDE | MDS_OPEN_LOCK |  \</span>
<a name="l02354"></a>02354 <span class="preprocessor">                              MDS_OPEN_BY_FID | MDS_OPEN_LEASE |        \</span>
<a name="l02355"></a>02355 <span class="preprocessor">                              MDS_OPEN_RELEASE)</span>
<a name="l02356"></a>02356 <span class="preprocessor"></span>
<a name="l02357"></a><a class="code" href="group__lustreidl.html#ga4b1c62e9fc5c50b5ad2eff80f77eb0e9">02357</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga4b1c62e9fc5c50b5ad2eff80f77eb0e9">mds_op_bias</a> {
<a name="l02358"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9afa34ba7ba78d825175d62c04910e7ed2">02358</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9afa34ba7ba78d825175d62c04910e7ed2">MDS_CHECK_SPLIT</a>         = 1 &lt;&lt; 0,
<a name="l02359"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9af83ef3683d63932190f743a5aee87703">02359</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9af83ef3683d63932190f743a5aee87703">MDS_CROSS_REF</a>           = 1 &lt;&lt; 1,
<a name="l02360"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a61b31991912feea7c5356c6664cfb5db">02360</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a61b31991912feea7c5356c6664cfb5db">MDS_VTX_BYPASS</a>          = 1 &lt;&lt; 2,
<a name="l02361"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a1f9ddf581962802eb703a0142bd4e502">02361</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a1f9ddf581962802eb703a0142bd4e502">MDS_PERM_BYPASS</a>         = 1 &lt;&lt; 3,
<a name="l02362"></a>02362 <span class="comment">/*      MDS_SOM                 = 1 &lt;&lt; 4, obsolete since 2.8.0 */</span>
<a name="l02363"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9aefca76afe917b8f580b50529298341a8">02363</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9aefca76afe917b8f580b50529298341a8">MDS_QUOTA_IGNORE</a>        = 1 &lt;&lt; 5,
<a name="l02364"></a>02364         <span class="comment">/* Was MDS_CLOSE_CLEANUP (1 &lt;&lt; 6), No more used */</span>
<a name="l02365"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9abe220b698600df572ed638e7a25e2012">02365</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9abe220b698600df572ed638e7a25e2012">MDS_KEEP_ORPHAN</a>         = 1 &lt;&lt; 7,
<a name="l02366"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a210a805942c9da72af4e1925384d389a">02366</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a210a805942c9da72af4e1925384d389a">MDS_RECOV_OPEN</a>          = 1 &lt;&lt; 8,
<a name="l02367"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9aa6fa651aa4baa50d2ba4d99c2d5fb809">02367</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9aa6fa651aa4baa50d2ba4d99c2d5fb809">MDS_DATA_MODIFIED</a>       = 1 &lt;&lt; 9,
<a name="l02368"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a4c6de28d2175f61ec8a03cbfae76c50b">02368</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a4c6de28d2175f61ec8a03cbfae76c50b">MDS_CREATE_VOLATILE</a>     = 1 &lt;&lt; 10,
<a name="l02369"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a70e1c60fa212f371523a04232c9b7863">02369</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a70e1c60fa212f371523a04232c9b7863">MDS_OWNEROVERRIDE</a>       = 1 &lt;&lt; 11,
<a name="l02370"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a62629440272100acec7e15511cb5cf22">02370</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a62629440272100acec7e15511cb5cf22">MDS_HSM_RELEASE</a>         = 1 &lt;&lt; 12,
<a name="l02371"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a133992be9ec3c875b9aa5f244d24f8a8">02371</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a133992be9ec3c875b9aa5f244d24f8a8">MDS_RENAME_MIGRATE</a>      = 1 &lt;&lt; 13,
<a name="l02372"></a><a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a1a25bc3cf985b9afc81b31778895b3c7">02372</a>         <a class="code" href="group__lustreidl.html#gga4b1c62e9fc5c50b5ad2eff80f77eb0e9a1a25bc3cf985b9afc81b31778895b3c7">MDS_CLOSE_LAYOUT_SWAP</a>   = 1 &lt;&lt; 14,
<a name="l02373"></a>02373 };
<a name="l02374"></a>02374 
<a name="l02375"></a>02375 <span class="comment">/* instance of mdt_reint_rec */</span>
<a name="l02376"></a><a class="code" href="structmdt__rec__create.html">02376</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__create.html">mdt_rec_create</a> {
<a name="l02377"></a><a class="code" href="structmdt__rec__create.html#a95aefc9aec9bae827cb9fcc5a7b4d430">02377</a>         __u32           <a class="code" href="structmdt__rec__create.html#a95aefc9aec9bae827cb9fcc5a7b4d430">cr_opcode</a>;
<a name="l02378"></a><a class="code" href="structmdt__rec__create.html#ad911d947419e2177286ec82e72f46e88">02378</a>         __u32           <a class="code" href="structmdt__rec__create.html#ad911d947419e2177286ec82e72f46e88">cr_cap</a>;
<a name="l02379"></a><a class="code" href="structmdt__rec__create.html#aad2fde6bb4e91b4f8a376fb5edbd8acb">02379</a>         __u32           <a class="code" href="structmdt__rec__create.html#aad2fde6bb4e91b4f8a376fb5edbd8acb">cr_fsuid</a>;
<a name="l02380"></a><a class="code" href="structmdt__rec__create.html#aa1e2220d7f696492e0eba27e762dfebc">02380</a>         __u32           <a class="code" href="structmdt__rec__create.html#aa1e2220d7f696492e0eba27e762dfebc">cr_fsuid_h</a>;
<a name="l02381"></a><a class="code" href="structmdt__rec__create.html#a3974ba9cc38b7a71083085fbaccd5221">02381</a>         __u32           <a class="code" href="structmdt__rec__create.html#a3974ba9cc38b7a71083085fbaccd5221">cr_fsgid</a>;
<a name="l02382"></a><a class="code" href="structmdt__rec__create.html#aad1d8fc6ec4200a6ed88deed52b5cc59">02382</a>         __u32           <a class="code" href="structmdt__rec__create.html#aad1d8fc6ec4200a6ed88deed52b5cc59">cr_fsgid_h</a>;
<a name="l02383"></a><a class="code" href="structmdt__rec__create.html#af11755ac9aab7cdadb982f40fda88bf7">02383</a>         __u32           <a class="code" href="structmdt__rec__create.html#af11755ac9aab7cdadb982f40fda88bf7">cr_suppgid1</a>;
<a name="l02384"></a><a class="code" href="structmdt__rec__create.html#abca0e2539539d80cd73bd314009afecd">02384</a>         __u32           <a class="code" href="structmdt__rec__create.html#abca0e2539539d80cd73bd314009afecd">cr_suppgid1_h</a>;
<a name="l02385"></a><a class="code" href="structmdt__rec__create.html#a8d6ad7e5c2faa5efa32e12d2e72f48ff">02385</a>         __u32           <a class="code" href="structmdt__rec__create.html#a8d6ad7e5c2faa5efa32e12d2e72f48ff">cr_suppgid2</a>;
<a name="l02386"></a><a class="code" href="structmdt__rec__create.html#a39ded9717075d877836e3c8adb34f5c5">02386</a>         __u32           <a class="code" href="structmdt__rec__create.html#a39ded9717075d877836e3c8adb34f5c5">cr_suppgid2_h</a>;
<a name="l02387"></a><a class="code" href="structmdt__rec__create.html#a413955918d3a779fb1f3fcff05758a86">02387</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__create.html#a413955918d3a779fb1f3fcff05758a86">cr_fid1</a>;
<a name="l02388"></a><a class="code" href="structmdt__rec__create.html#a1bebbda51fb1faaac4e796b191a46742">02388</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__create.html#a1bebbda51fb1faaac4e796b191a46742">cr_fid2</a>;
<a name="l02389"></a><a class="code" href="structmdt__rec__create.html#aa420ee3cc2b8d508fe8f5d032f31d630">02389</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structmdt__rec__create.html#aa420ee3cc2b8d508fe8f5d032f31d630">cr_old_handle</a>; <span class="comment">/* handle in case of open replay */</span>
<a name="l02390"></a><a class="code" href="structmdt__rec__create.html#a3452bae187dbe8f4ba3fe6754d9a49d0">02390</a>         __s64           <a class="code" href="structmdt__rec__create.html#a3452bae187dbe8f4ba3fe6754d9a49d0">cr_time</a>;
<a name="l02391"></a><a class="code" href="structmdt__rec__create.html#ac5e306c6f7c33644f86987661f8251a6">02391</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__create.html#ac5e306c6f7c33644f86987661f8251a6">cr_rdev</a>;
<a name="l02392"></a><a class="code" href="structmdt__rec__create.html#a5e274e9f04cff3b163eaafd03caba08f">02392</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__create.html#a5e274e9f04cff3b163eaafd03caba08f">cr_ioepoch</a>;
<a name="l02393"></a><a class="code" href="structmdt__rec__create.html#a8e04ee41dd1e3d7d145961251d5eb7fe">02393</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__create.html#a8e04ee41dd1e3d7d145961251d5eb7fe">cr_padding_1</a>;   <span class="comment">/* rr_blocks */</span>
<a name="l02394"></a><a class="code" href="structmdt__rec__create.html#a881a9c7fd2dbe86786b2c3e6bd0b7935">02394</a>         __u32           <a class="code" href="structmdt__rec__create.html#a881a9c7fd2dbe86786b2c3e6bd0b7935">cr_mode</a>;
<a name="l02395"></a><a class="code" href="structmdt__rec__create.html#a89b51b93cf3363bbd1ab3ea1691f1d5a">02395</a>         __u32           <a class="code" href="structmdt__rec__create.html#a89b51b93cf3363bbd1ab3ea1691f1d5a">cr_bias</a>;
<a name="l02396"></a>02396         <span class="comment">/* use of helpers set/get_mrc_cr_flags() is needed to access</span>
<a name="l02397"></a>02397 <span class="comment">         * 64 bits cr_flags [cr_flags_l, cr_flags_h], this is done to</span>
<a name="l02398"></a>02398 <span class="comment">         * extend cr_flags size without breaking 1.8 compat */</span>
<a name="l02399"></a><a class="code" href="structmdt__rec__create.html#a2927bb54fc6c6fce1e72fd2dca31ccb4">02399</a>         __u32           <a class="code" href="structmdt__rec__create.html#a2927bb54fc6c6fce1e72fd2dca31ccb4">cr_flags_l</a>;     <span class="comment">/* for use with open, low  32 bits  */</span>
<a name="l02400"></a><a class="code" href="structmdt__rec__create.html#ad38ce5f767ad28abd59d171e2f2c00b6">02400</a>         __u32           <a class="code" href="structmdt__rec__create.html#ad38ce5f767ad28abd59d171e2f2c00b6">cr_flags_h</a>;     <span class="comment">/* for use with open, high 32 bits */</span>
<a name="l02401"></a><a class="code" href="structmdt__rec__create.html#a145083cccf4a41143d7c2920b16c9cbf">02401</a>         __u32           <a class="code" href="structmdt__rec__create.html#a145083cccf4a41143d7c2920b16c9cbf">cr_umask</a>;       <span class="comment">/* umask for create */</span>
<a name="l02402"></a><a class="code" href="structmdt__rec__create.html#a252c5b836bcdb4d7a6d0f4a2b97b4665">02402</a>         __u32           <a class="code" href="structmdt__rec__create.html#a252c5b836bcdb4d7a6d0f4a2b97b4665">cr_padding_4</a>;   <span class="comment">/* rr_padding_4 */</span>
<a name="l02403"></a>02403 };
<a name="l02404"></a>02404 
<a name="l02405"></a><a class="code" href="group__lustreidl.html#ga9b9c0d1d1347465bcd4a0cd4172cc657">02405</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga9b9c0d1d1347465bcd4a0cd4172cc657">set_mrc_cr_flags</a>(<span class="keyword">struct</span> <a class="code" href="structmdt__rec__create.html">mdt_rec_create</a> *mrc, <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags)
<a name="l02406"></a>02406 {
<a name="l02407"></a>02407         mrc-&gt;<a class="code" href="structmdt__rec__create.html#a2927bb54fc6c6fce1e72fd2dca31ccb4">cr_flags_l</a> = (__u32)(flags &amp; 0xFFFFFFFFUll);
<a name="l02408"></a>02408         mrc-&gt;<a class="code" href="structmdt__rec__create.html#ad38ce5f767ad28abd59d171e2f2c00b6">cr_flags_h</a> = (__u32)(flags &gt;&gt; 32);
<a name="l02409"></a>02409 }
<a name="l02410"></a>02410 
<a name="l02411"></a><a class="code" href="group__lustreidl.html#gac8fa0ba9a974d5cd0fc8ff37663a70e2">02411</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lustreidl.html#gac8fa0ba9a974d5cd0fc8ff37663a70e2">get_mrc_cr_flags</a>(<span class="keyword">struct</span> <a class="code" href="structmdt__rec__create.html">mdt_rec_create</a> *mrc)
<a name="l02412"></a>02412 {
<a name="l02413"></a>02413         <span class="keywordflow">return</span> ((<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)(mrc-&gt;<a class="code" href="structmdt__rec__create.html#a2927bb54fc6c6fce1e72fd2dca31ccb4">cr_flags_l</a>) | ((<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)mrc-&gt;<a class="code" href="structmdt__rec__create.html#ad38ce5f767ad28abd59d171e2f2c00b6">cr_flags_h</a> &lt;&lt; 32));
<a name="l02414"></a>02414 }
<a name="l02415"></a>02415 
<a name="l02416"></a>02416 <span class="comment">/* instance of mdt_reint_rec */</span>
<a name="l02417"></a><a class="code" href="structmdt__rec__link.html">02417</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__link.html">mdt_rec_link</a> {
<a name="l02418"></a><a class="code" href="structmdt__rec__link.html#a5794d2d8689e028e569e57299f0d8c3b">02418</a>         __u32           <a class="code" href="structmdt__rec__link.html#a5794d2d8689e028e569e57299f0d8c3b">lk_opcode</a>;
<a name="l02419"></a><a class="code" href="structmdt__rec__link.html#a65b0c75978baf0b2319c4615c76fff63">02419</a>         __u32           <a class="code" href="structmdt__rec__link.html#a65b0c75978baf0b2319c4615c76fff63">lk_cap</a>;
<a name="l02420"></a><a class="code" href="structmdt__rec__link.html#a16bb2cefb5e688c0e66795a448f3e20c">02420</a>         __u32           <a class="code" href="structmdt__rec__link.html#a16bb2cefb5e688c0e66795a448f3e20c">lk_fsuid</a>;
<a name="l02421"></a><a class="code" href="structmdt__rec__link.html#a22a05b1ba90837edbcdb05951e0d0263">02421</a>         __u32           <a class="code" href="structmdt__rec__link.html#a22a05b1ba90837edbcdb05951e0d0263">lk_fsuid_h</a>;
<a name="l02422"></a><a class="code" href="structmdt__rec__link.html#afabd5f4de6c20ec7ed88018381c02c8f">02422</a>         __u32           <a class="code" href="structmdt__rec__link.html#afabd5f4de6c20ec7ed88018381c02c8f">lk_fsgid</a>;
<a name="l02423"></a><a class="code" href="structmdt__rec__link.html#a4cba3aafefb8d2d9370462128786ade7">02423</a>         __u32           <a class="code" href="structmdt__rec__link.html#a4cba3aafefb8d2d9370462128786ade7">lk_fsgid_h</a>;
<a name="l02424"></a><a class="code" href="structmdt__rec__link.html#acfc205701c30308e452ab07fd1909798">02424</a>         __u32           <a class="code" href="structmdt__rec__link.html#acfc205701c30308e452ab07fd1909798">lk_suppgid1</a>;
<a name="l02425"></a><a class="code" href="structmdt__rec__link.html#ae0f620bf1f87c64408eaeaeb910cca1d">02425</a>         __u32           <a class="code" href="structmdt__rec__link.html#ae0f620bf1f87c64408eaeaeb910cca1d">lk_suppgid1_h</a>;
<a name="l02426"></a><a class="code" href="structmdt__rec__link.html#a6b65c7800ad3701c88d633c916c2d4de">02426</a>         __u32           <a class="code" href="structmdt__rec__link.html#a6b65c7800ad3701c88d633c916c2d4de">lk_suppgid2</a>;
<a name="l02427"></a><a class="code" href="structmdt__rec__link.html#a820b5122d521b120fc66d28054d31379">02427</a>         __u32           <a class="code" href="structmdt__rec__link.html#a820b5122d521b120fc66d28054d31379">lk_suppgid2_h</a>;
<a name="l02428"></a><a class="code" href="structmdt__rec__link.html#a87c010a43b2661f348beee6f83a47eba">02428</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__link.html#a87c010a43b2661f348beee6f83a47eba">lk_fid1</a>;
<a name="l02429"></a><a class="code" href="structmdt__rec__link.html#a8a25f953ce20a80287eb11ff84b4e73d">02429</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__link.html#a8a25f953ce20a80287eb11ff84b4e73d">lk_fid2</a>;
<a name="l02430"></a><a class="code" href="structmdt__rec__link.html#af1fc5160000bf78abe8df99f4341fd00">02430</a>         __s64           <a class="code" href="structmdt__rec__link.html#af1fc5160000bf78abe8df99f4341fd00">lk_time</a>;
<a name="l02431"></a><a class="code" href="structmdt__rec__link.html#abe84e48582c374ae00365fba325c511c">02431</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__link.html#abe84e48582c374ae00365fba325c511c">lk_padding_1</a>;   <span class="comment">/* rr_atime */</span>
<a name="l02432"></a><a class="code" href="structmdt__rec__link.html#a58ade1df7ec6b1ded7a7d2a25da374ea">02432</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__link.html#a58ade1df7ec6b1ded7a7d2a25da374ea">lk_padding_2</a>;   <span class="comment">/* rr_ctime */</span>
<a name="l02433"></a><a class="code" href="structmdt__rec__link.html#abd06abc42d565082668ed04ab41a7043">02433</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__link.html#abd06abc42d565082668ed04ab41a7043">lk_padding_3</a>;   <span class="comment">/* rr_size */</span>
<a name="l02434"></a><a class="code" href="structmdt__rec__link.html#a172094b22f1e87ddd1d562b292f004f9">02434</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__link.html#a172094b22f1e87ddd1d562b292f004f9">lk_padding_4</a>;   <span class="comment">/* rr_blocks */</span>
<a name="l02435"></a><a class="code" href="structmdt__rec__link.html#a477b9b84497d74da1316c38492770bd9">02435</a>         __u32           <a class="code" href="structmdt__rec__link.html#a477b9b84497d74da1316c38492770bd9">lk_bias</a>;
<a name="l02436"></a><a class="code" href="structmdt__rec__link.html#a307c122c22bc656161d053ee64cf6d82">02436</a>         __u32           <a class="code" href="structmdt__rec__link.html#a307c122c22bc656161d053ee64cf6d82">lk_padding_5</a>;   <span class="comment">/* rr_mode */</span>
<a name="l02437"></a><a class="code" href="structmdt__rec__link.html#af78e7b377e279397aacbc82bd0d6aa1e">02437</a>         __u32           <a class="code" href="structmdt__rec__link.html#af78e7b377e279397aacbc82bd0d6aa1e">lk_padding_6</a>;   <span class="comment">/* rr_flags */</span>
<a name="l02438"></a><a class="code" href="structmdt__rec__link.html#a85dac3c531d1f6f7640296743b22728b">02438</a>         __u32           <a class="code" href="structmdt__rec__link.html#a85dac3c531d1f6f7640296743b22728b">lk_padding_7</a>;   <span class="comment">/* rr_padding_2 */</span>
<a name="l02439"></a><a class="code" href="structmdt__rec__link.html#a2f3c80c95d81c163bc019515a386ad39">02439</a>         __u32           <a class="code" href="structmdt__rec__link.html#a2f3c80c95d81c163bc019515a386ad39">lk_padding_8</a>;   <span class="comment">/* rr_padding_3 */</span>
<a name="l02440"></a><a class="code" href="structmdt__rec__link.html#adf555ade90e5271b165157f8c1f14e3d">02440</a>         __u32           <a class="code" href="structmdt__rec__link.html#adf555ade90e5271b165157f8c1f14e3d">lk_padding_9</a>;   <span class="comment">/* rr_padding_4 */</span>
<a name="l02441"></a>02441 };
<a name="l02442"></a>02442 
<a name="l02443"></a>02443 <span class="comment">/* instance of mdt_reint_rec */</span>
<a name="l02444"></a><a class="code" href="structmdt__rec__unlink.html">02444</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__unlink.html">mdt_rec_unlink</a> {
<a name="l02445"></a><a class="code" href="structmdt__rec__unlink.html#afedb4e867c9f8586275873d03e1c6333">02445</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#afedb4e867c9f8586275873d03e1c6333">ul_opcode</a>;
<a name="l02446"></a><a class="code" href="structmdt__rec__unlink.html#a239f7f793d8246d5780d49900e912203">02446</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a239f7f793d8246d5780d49900e912203">ul_cap</a>;
<a name="l02447"></a><a class="code" href="structmdt__rec__unlink.html#a7d2c439676e8ad30f2825237aa491820">02447</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a7d2c439676e8ad30f2825237aa491820">ul_fsuid</a>;
<a name="l02448"></a><a class="code" href="structmdt__rec__unlink.html#abcdd3b4b69aba106327e4873fc90b6d3">02448</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#abcdd3b4b69aba106327e4873fc90b6d3">ul_fsuid_h</a>;
<a name="l02449"></a><a class="code" href="structmdt__rec__unlink.html#a8137f543ac6ecd057d0a91c4af77d5ad">02449</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a8137f543ac6ecd057d0a91c4af77d5ad">ul_fsgid</a>;
<a name="l02450"></a><a class="code" href="structmdt__rec__unlink.html#adfe0055ffce862e43de5b945b45cd07c">02450</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#adfe0055ffce862e43de5b945b45cd07c">ul_fsgid_h</a>;
<a name="l02451"></a><a class="code" href="structmdt__rec__unlink.html#a7a68ecaad5f1cb42690a06c1dd11479a">02451</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a7a68ecaad5f1cb42690a06c1dd11479a">ul_suppgid1</a>;
<a name="l02452"></a><a class="code" href="structmdt__rec__unlink.html#abc321299751bc86c522c0b11ee6a7c73">02452</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#abc321299751bc86c522c0b11ee6a7c73">ul_suppgid1_h</a>;
<a name="l02453"></a><a class="code" href="structmdt__rec__unlink.html#a0c2cd9f1c1df233f1e6f6eadae8240d8">02453</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a0c2cd9f1c1df233f1e6f6eadae8240d8">ul_suppgid2</a>;
<a name="l02454"></a><a class="code" href="structmdt__rec__unlink.html#ae3bf18927a87c8a90b9800633a5ba517">02454</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#ae3bf18927a87c8a90b9800633a5ba517">ul_suppgid2_h</a>;
<a name="l02455"></a><a class="code" href="structmdt__rec__unlink.html#a67408ab67c26c02ab04a28c62ec07e9d">02455</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__unlink.html#a67408ab67c26c02ab04a28c62ec07e9d">ul_fid1</a>;
<a name="l02456"></a><a class="code" href="structmdt__rec__unlink.html#acc054bc6096e1fdb3930b0edd9c39b28">02456</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__unlink.html#acc054bc6096e1fdb3930b0edd9c39b28">ul_fid2</a>;
<a name="l02457"></a><a class="code" href="structmdt__rec__unlink.html#ad7d6bf1fc28e929d8930a0d1b63c1290">02457</a>         __s64           <a class="code" href="structmdt__rec__unlink.html#ad7d6bf1fc28e929d8930a0d1b63c1290">ul_time</a>;
<a name="l02458"></a><a class="code" href="structmdt__rec__unlink.html#a3a43b37db473fa11dfa0adf007cf7b40">02458</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__unlink.html#a3a43b37db473fa11dfa0adf007cf7b40">ul_padding_2</a>;   <span class="comment">/* rr_atime */</span>
<a name="l02459"></a><a class="code" href="structmdt__rec__unlink.html#a6610a9bb2169997b66c0dc1eb9fbfabd">02459</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__unlink.html#a6610a9bb2169997b66c0dc1eb9fbfabd">ul_padding_3</a>;   <span class="comment">/* rr_ctime */</span>
<a name="l02460"></a><a class="code" href="structmdt__rec__unlink.html#a0fd43075341fd586bb597fc2129643c7">02460</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__unlink.html#a0fd43075341fd586bb597fc2129643c7">ul_padding_4</a>;   <span class="comment">/* rr_size */</span>
<a name="l02461"></a><a class="code" href="structmdt__rec__unlink.html#ae4288e64fb8dd310521489d1dde854fe">02461</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__unlink.html#ae4288e64fb8dd310521489d1dde854fe">ul_padding_5</a>;   <span class="comment">/* rr_blocks */</span>
<a name="l02462"></a><a class="code" href="structmdt__rec__unlink.html#a41dbeb2d86b8b8b847d3035511ab0376">02462</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a41dbeb2d86b8b8b847d3035511ab0376">ul_bias</a>;
<a name="l02463"></a><a class="code" href="structmdt__rec__unlink.html#a5bf709402f46e4fbc4b0366733d4247d">02463</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a5bf709402f46e4fbc4b0366733d4247d">ul_mode</a>;
<a name="l02464"></a><a class="code" href="structmdt__rec__unlink.html#ab90e7810ca6b7961194cc7e50679732c">02464</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#ab90e7810ca6b7961194cc7e50679732c">ul_padding_6</a>;   <span class="comment">/* rr_flags */</span>
<a name="l02465"></a><a class="code" href="structmdt__rec__unlink.html#a3ea25d1e50320d6efc4fa75b2fdd5a9b">02465</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a3ea25d1e50320d6efc4fa75b2fdd5a9b">ul_padding_7</a>;   <span class="comment">/* rr_padding_2 */</span>
<a name="l02466"></a><a class="code" href="structmdt__rec__unlink.html#a859a5e024c60b20c3007d4e249184ac6">02466</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a859a5e024c60b20c3007d4e249184ac6">ul_padding_8</a>;   <span class="comment">/* rr_padding_3 */</span>
<a name="l02467"></a><a class="code" href="structmdt__rec__unlink.html#a32e91a998f48cf6b5358340d1ac6d974">02467</a>         __u32           <a class="code" href="structmdt__rec__unlink.html#a32e91a998f48cf6b5358340d1ac6d974">ul_padding_9</a>;   <span class="comment">/* rr_padding_4 */</span>
<a name="l02468"></a>02468 };
<a name="l02469"></a>02469 
<a name="l02470"></a>02470 <span class="comment">/* instance of mdt_reint_rec */</span>
<a name="l02471"></a><a class="code" href="structmdt__rec__rename.html">02471</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__rename.html">mdt_rec_rename</a> {
<a name="l02472"></a><a class="code" href="structmdt__rec__rename.html#a1f439a51f3c78d8ae262cf7b48b6679b">02472</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a1f439a51f3c78d8ae262cf7b48b6679b">rn_opcode</a>;
<a name="l02473"></a><a class="code" href="structmdt__rec__rename.html#a0ba8da4f0e1dccbd00cb407e1d864587">02473</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a0ba8da4f0e1dccbd00cb407e1d864587">rn_cap</a>;
<a name="l02474"></a><a class="code" href="structmdt__rec__rename.html#ab64aa57b36c67e15dd84699ee58c1a41">02474</a>         __u32           <a class="code" href="structmdt__rec__rename.html#ab64aa57b36c67e15dd84699ee58c1a41">rn_fsuid</a>;
<a name="l02475"></a><a class="code" href="structmdt__rec__rename.html#acadd380af6399e2a6138161eba632e70">02475</a>         __u32           <a class="code" href="structmdt__rec__rename.html#acadd380af6399e2a6138161eba632e70">rn_fsuid_h</a>;
<a name="l02476"></a><a class="code" href="structmdt__rec__rename.html#a6739872264c9a22665f960d85ab858eb">02476</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a6739872264c9a22665f960d85ab858eb">rn_fsgid</a>;
<a name="l02477"></a><a class="code" href="structmdt__rec__rename.html#abea75bf0fcd7b5dd3b379a384e41dd7a">02477</a>         __u32           <a class="code" href="structmdt__rec__rename.html#abea75bf0fcd7b5dd3b379a384e41dd7a">rn_fsgid_h</a>;
<a name="l02478"></a><a class="code" href="structmdt__rec__rename.html#ac983a73dfbbce0c52d0ba68c62757eb6">02478</a>         __u32           <a class="code" href="structmdt__rec__rename.html#ac983a73dfbbce0c52d0ba68c62757eb6">rn_suppgid1</a>;
<a name="l02479"></a><a class="code" href="structmdt__rec__rename.html#ac08ede2314c09056919361e7f91a5729">02479</a>         __u32           <a class="code" href="structmdt__rec__rename.html#ac08ede2314c09056919361e7f91a5729">rn_suppgid1_h</a>;
<a name="l02480"></a><a class="code" href="structmdt__rec__rename.html#a07979422f366a829b82a0636e271c5b8">02480</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a07979422f366a829b82a0636e271c5b8">rn_suppgid2</a>;
<a name="l02481"></a><a class="code" href="structmdt__rec__rename.html#a2634cc3f2e593a5f718daec85a767dc0">02481</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a2634cc3f2e593a5f718daec85a767dc0">rn_suppgid2_h</a>;
<a name="l02482"></a><a class="code" href="structmdt__rec__rename.html#af1a7cd04fbd4a909f82cfc1b9e942909">02482</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__rename.html#af1a7cd04fbd4a909f82cfc1b9e942909">rn_fid1</a>;
<a name="l02483"></a><a class="code" href="structmdt__rec__rename.html#a60dc3b1a49f9234a126f04ec426aebe0">02483</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__rename.html#a60dc3b1a49f9234a126f04ec426aebe0">rn_fid2</a>;
<a name="l02484"></a><a class="code" href="structmdt__rec__rename.html#a633e0f4591bd268a0142d3f38dc558f3">02484</a>         __s64           <a class="code" href="structmdt__rec__rename.html#a633e0f4591bd268a0142d3f38dc558f3">rn_time</a>;
<a name="l02485"></a><a class="code" href="structmdt__rec__rename.html#a51838b40ba2205ce2c8ccb019e483520">02485</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__rename.html#a51838b40ba2205ce2c8ccb019e483520">rn_padding_1</a>;   <span class="comment">/* rr_atime */</span>
<a name="l02486"></a><a class="code" href="structmdt__rec__rename.html#a61677b7eaf6747cbd18d5d41fea658be">02486</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__rename.html#a61677b7eaf6747cbd18d5d41fea658be">rn_padding_2</a>;   <span class="comment">/* rr_ctime */</span>
<a name="l02487"></a><a class="code" href="structmdt__rec__rename.html#ac60acd822ecb2ea09b0d975e75a1c8b6">02487</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__rename.html#ac60acd822ecb2ea09b0d975e75a1c8b6">rn_padding_3</a>;   <span class="comment">/* rr_size */</span>
<a name="l02488"></a><a class="code" href="structmdt__rec__rename.html#a6f97a0e6ab768814d8124cee43e9444d">02488</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__rename.html#a6f97a0e6ab768814d8124cee43e9444d">rn_padding_4</a>;   <span class="comment">/* rr_blocks */</span>
<a name="l02489"></a><a class="code" href="structmdt__rec__rename.html#ac2633b2731810b13fbf0cc45efc28b92">02489</a>         __u32           <a class="code" href="structmdt__rec__rename.html#ac2633b2731810b13fbf0cc45efc28b92">rn_bias</a>;        <span class="comment">/* some operation flags */</span>
<a name="l02490"></a><a class="code" href="structmdt__rec__rename.html#a5bc7e92572ec1294f42198409680907e">02490</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a5bc7e92572ec1294f42198409680907e">rn_mode</a>;        <span class="comment">/* cross-ref rename has mode */</span>
<a name="l02491"></a><a class="code" href="structmdt__rec__rename.html#ab6252819e2d7a07c5a0d2bc1c5ce6bfc">02491</a>         __u32           <a class="code" href="structmdt__rec__rename.html#ab6252819e2d7a07c5a0d2bc1c5ce6bfc">rn_padding_5</a>;   <span class="comment">/* rr_flags */</span>
<a name="l02492"></a><a class="code" href="structmdt__rec__rename.html#a8750d4d5219e0655031af737c180950a">02492</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a8750d4d5219e0655031af737c180950a">rn_padding_6</a>;   <span class="comment">/* rr_padding_2 */</span>
<a name="l02493"></a><a class="code" href="structmdt__rec__rename.html#acdc8dc35501de79958a1247b8b3e4087">02493</a>         __u32           <a class="code" href="structmdt__rec__rename.html#acdc8dc35501de79958a1247b8b3e4087">rn_padding_7</a>;   <span class="comment">/* rr_padding_3 */</span>
<a name="l02494"></a><a class="code" href="structmdt__rec__rename.html#a0c8fde5f19811cf6d3ad5c389249cd35">02494</a>         __u32           <a class="code" href="structmdt__rec__rename.html#a0c8fde5f19811cf6d3ad5c389249cd35">rn_padding_8</a>;   <span class="comment">/* rr_padding_4 */</span>
<a name="l02495"></a>02495 };
<a name="l02496"></a>02496 
<a name="l02497"></a>02497 <span class="comment">/* instance of mdt_reint_rec */</span>
<a name="l02498"></a><a class="code" href="structmdt__rec__setxattr.html">02498</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__setxattr.html">mdt_rec_setxattr</a> {
<a name="l02499"></a><a class="code" href="structmdt__rec__setxattr.html#add8bf4c406a1a08645db4e31585a593f">02499</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#add8bf4c406a1a08645db4e31585a593f">sx_opcode</a>;
<a name="l02500"></a><a class="code" href="structmdt__rec__setxattr.html#ab2ee127ea6d866f6df2338bfb94d7791">02500</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#ab2ee127ea6d866f6df2338bfb94d7791">sx_cap</a>;
<a name="l02501"></a><a class="code" href="structmdt__rec__setxattr.html#a663eeb0709beb06f05688c558036fc67">02501</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a663eeb0709beb06f05688c558036fc67">sx_fsuid</a>;
<a name="l02502"></a><a class="code" href="structmdt__rec__setxattr.html#acdd3233029b88a6ede9ecc5e107db870">02502</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#acdd3233029b88a6ede9ecc5e107db870">sx_fsuid_h</a>;
<a name="l02503"></a><a class="code" href="structmdt__rec__setxattr.html#a2b25208d5e1f81794920d15526157be0">02503</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a2b25208d5e1f81794920d15526157be0">sx_fsgid</a>;
<a name="l02504"></a><a class="code" href="structmdt__rec__setxattr.html#a4f77d6db4e2588b84a90f9baa8c43fb6">02504</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a4f77d6db4e2588b84a90f9baa8c43fb6">sx_fsgid_h</a>;
<a name="l02505"></a><a class="code" href="structmdt__rec__setxattr.html#aabeb210cec83d680aa6dec9bd1bf8125">02505</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#aabeb210cec83d680aa6dec9bd1bf8125">sx_suppgid1</a>;
<a name="l02506"></a><a class="code" href="structmdt__rec__setxattr.html#ace0b9d5b394422be1fe5f3cfae99bd34">02506</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#ace0b9d5b394422be1fe5f3cfae99bd34">sx_suppgid1_h</a>;
<a name="l02507"></a><a class="code" href="structmdt__rec__setxattr.html#ac237568859cb700e75ad333ab263838f">02507</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#ac237568859cb700e75ad333ab263838f">sx_suppgid2</a>;
<a name="l02508"></a><a class="code" href="structmdt__rec__setxattr.html#a4240c6ff6f714b40da1565fa23dadd0d">02508</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a4240c6ff6f714b40da1565fa23dadd0d">sx_suppgid2_h</a>;
<a name="l02509"></a><a class="code" href="structmdt__rec__setxattr.html#a0524d2c25e4db09d36b6b07a2eba991b">02509</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__setxattr.html#a0524d2c25e4db09d36b6b07a2eba991b">sx_fid</a>;
<a name="l02510"></a><a class="code" href="structmdt__rec__setxattr.html#a6523c8e09f42fd5d5a7f99f1118b88d0">02510</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setxattr.html#a6523c8e09f42fd5d5a7f99f1118b88d0">sx_padding_1</a>;   <span class="comment">/* These three are rr_fid2 */</span>
<a name="l02511"></a><a class="code" href="structmdt__rec__setxattr.html#a42b933d1973f4207f41980c53600178e">02511</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a42b933d1973f4207f41980c53600178e">sx_padding_2</a>;
<a name="l02512"></a><a class="code" href="structmdt__rec__setxattr.html#a60d3b9067438695a9c71a4912d3c002c">02512</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a60d3b9067438695a9c71a4912d3c002c">sx_padding_3</a>;
<a name="l02513"></a><a class="code" href="structmdt__rec__setxattr.html#a85c67123bde95e3e999e169864c89542">02513</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setxattr.html#a85c67123bde95e3e999e169864c89542">sx_valid</a>;
<a name="l02514"></a><a class="code" href="structmdt__rec__setxattr.html#a793e60278905304f68e2b88c06125bbf">02514</a>         __s64           <a class="code" href="structmdt__rec__setxattr.html#a793e60278905304f68e2b88c06125bbf">sx_time</a>;
<a name="l02515"></a><a class="code" href="structmdt__rec__setxattr.html#a889374c9c7bb2495fb50c11df4c3a32c">02515</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setxattr.html#a889374c9c7bb2495fb50c11df4c3a32c">sx_padding_5</a>;   <span class="comment">/* rr_ctime */</span>
<a name="l02516"></a><a class="code" href="structmdt__rec__setxattr.html#ab823f70cd2bf398a3c13061da71def27">02516</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setxattr.html#ab823f70cd2bf398a3c13061da71def27">sx_padding_6</a>;   <span class="comment">/* rr_size */</span>
<a name="l02517"></a><a class="code" href="structmdt__rec__setxattr.html#aa930061219a7d8d2fe6720d4c5eac5b5">02517</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__setxattr.html#aa930061219a7d8d2fe6720d4c5eac5b5">sx_padding_7</a>;   <span class="comment">/* rr_blocks */</span>
<a name="l02518"></a><a class="code" href="structmdt__rec__setxattr.html#a92d466c835907d31f435d2e004a4eb7d">02518</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a92d466c835907d31f435d2e004a4eb7d">sx_size</a>;
<a name="l02519"></a><a class="code" href="structmdt__rec__setxattr.html#abff25fcbba3c61847f1ec7f7e4893823">02519</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#abff25fcbba3c61847f1ec7f7e4893823">sx_flags</a>;
<a name="l02520"></a><a class="code" href="structmdt__rec__setxattr.html#a6b692318eaf09ff674e8dde4e5a3d402">02520</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a6b692318eaf09ff674e8dde4e5a3d402">sx_padding_8</a>;   <span class="comment">/* rr_flags */</span>
<a name="l02521"></a><a class="code" href="structmdt__rec__setxattr.html#a12438a94038a4b8486ad5477db3e5e8f">02521</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a12438a94038a4b8486ad5477db3e5e8f">sx_padding_9</a>;   <span class="comment">/* rr_padding_2 */</span>
<a name="l02522"></a><a class="code" href="structmdt__rec__setxattr.html#a7e50900bd68edbd5fa0f98d3da21fed6">02522</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#a7e50900bd68edbd5fa0f98d3da21fed6">sx_padding_10</a>;  <span class="comment">/* rr_padding_3 */</span>
<a name="l02523"></a><a class="code" href="structmdt__rec__setxattr.html#aaab41bebe609d622c929a4ca758cbee6">02523</a>         __u32           <a class="code" href="structmdt__rec__setxattr.html#aaab41bebe609d622c929a4ca758cbee6">sx_padding_11</a>;  <span class="comment">/* rr_padding_4 */</span>
<a name="l02524"></a>02524 };
<a name="l02525"></a>02525 
<a name="l02526"></a>02526 <span class="comment">/*</span>
<a name="l02527"></a>02527 <span class="comment"> * mdt_rec_reint is the template for all mdt_reint_xxx structures.</span>
<a name="l02528"></a>02528 <span class="comment"> * Do NOT change the size of various members, otherwise the value</span>
<a name="l02529"></a>02529 <span class="comment"> * will be broken in lustre_swab_mdt_rec_reint().</span>
<a name="l02530"></a>02530 <span class="comment"> *</span>
<a name="l02531"></a>02531 <span class="comment"> * If you add new members in other mdt_reint_xxx structres and need to use the</span>
<a name="l02532"></a>02532 <span class="comment"> * rr_padding_x fields, then update lustre_swab_mdt_rec_reint() also.</span>
<a name="l02533"></a>02533 <span class="comment"> */</span>
<a name="l02534"></a><a class="code" href="structmdt__rec__reint.html">02534</a> <span class="keyword">struct </span><a class="code" href="structmdt__rec__reint.html">mdt_rec_reint</a> {
<a name="l02535"></a><a class="code" href="structmdt__rec__reint.html#aafcc623091a6e5367bad4b6b6f770910">02535</a>         __u32           <a class="code" href="structmdt__rec__reint.html#aafcc623091a6e5367bad4b6b6f770910">rr_opcode</a>;
<a name="l02536"></a><a class="code" href="structmdt__rec__reint.html#afdba24ee40b8dbc9baeb2dc7e9690998">02536</a>         __u32           <a class="code" href="structmdt__rec__reint.html#afdba24ee40b8dbc9baeb2dc7e9690998">rr_cap</a>;
<a name="l02537"></a><a class="code" href="structmdt__rec__reint.html#abd92b2a727ca596a6d1a88ff3a5457c5">02537</a>         __u32           <a class="code" href="structmdt__rec__reint.html#abd92b2a727ca596a6d1a88ff3a5457c5">rr_fsuid</a>;
<a name="l02538"></a><a class="code" href="structmdt__rec__reint.html#a93dad1af31751c8698a81f7f831f2edb">02538</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a93dad1af31751c8698a81f7f831f2edb">rr_fsuid_h</a>;
<a name="l02539"></a><a class="code" href="structmdt__rec__reint.html#a394566a27b1c46756f6fcdeffb7ad907">02539</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a394566a27b1c46756f6fcdeffb7ad907">rr_fsgid</a>;
<a name="l02540"></a><a class="code" href="structmdt__rec__reint.html#aa6008efca3fe2c6db441df6c0341009d">02540</a>         __u32           <a class="code" href="structmdt__rec__reint.html#aa6008efca3fe2c6db441df6c0341009d">rr_fsgid_h</a>;
<a name="l02541"></a><a class="code" href="structmdt__rec__reint.html#ad9ecf91eeea873649bef430d220979bf">02541</a>         __u32           <a class="code" href="structmdt__rec__reint.html#ad9ecf91eeea873649bef430d220979bf">rr_suppgid1</a>;
<a name="l02542"></a><a class="code" href="structmdt__rec__reint.html#a0be92a159178096727a90a4879ec8cc2">02542</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a0be92a159178096727a90a4879ec8cc2">rr_suppgid1_h</a>;
<a name="l02543"></a><a class="code" href="structmdt__rec__reint.html#a9df180013da3d42b39ffd92fcb86b414">02543</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a9df180013da3d42b39ffd92fcb86b414">rr_suppgid2</a>;
<a name="l02544"></a><a class="code" href="structmdt__rec__reint.html#a86310ac728beaa59c57998065700b2e8">02544</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a86310ac728beaa59c57998065700b2e8">rr_suppgid2_h</a>;
<a name="l02545"></a><a class="code" href="structmdt__rec__reint.html#a8f95eb8e3275a598063b9f3551a77712">02545</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__reint.html#a8f95eb8e3275a598063b9f3551a77712">rr_fid1</a>;
<a name="l02546"></a><a class="code" href="structmdt__rec__reint.html#a812f4e27ef9878c6144a1f5b39f931bb">02546</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structmdt__rec__reint.html#a812f4e27ef9878c6144a1f5b39f931bb">rr_fid2</a>;
<a name="l02547"></a><a class="code" href="structmdt__rec__reint.html#a68842b6bc61e499a01018158352f9643">02547</a>         __s64           <a class="code" href="structmdt__rec__reint.html#a68842b6bc61e499a01018158352f9643">rr_mtime</a>;
<a name="l02548"></a><a class="code" href="structmdt__rec__reint.html#ad4c079bfb9a2f93b5ef55b7095951c92">02548</a>         __s64           <a class="code" href="structmdt__rec__reint.html#ad4c079bfb9a2f93b5ef55b7095951c92">rr_atime</a>;
<a name="l02549"></a><a class="code" href="structmdt__rec__reint.html#a1e1701248de1b3edd25b48d9fbd9d987">02549</a>         __s64           <a class="code" href="structmdt__rec__reint.html#a1e1701248de1b3edd25b48d9fbd9d987">rr_ctime</a>;
<a name="l02550"></a><a class="code" href="structmdt__rec__reint.html#afbc040f26ec17aa8e28e4721ea06c444">02550</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__reint.html#afbc040f26ec17aa8e28e4721ea06c444">rr_size</a>;
<a name="l02551"></a><a class="code" href="structmdt__rec__reint.html#a17c7267d2f8dd6a6b9b77d5d05a82b4a">02551</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdt__rec__reint.html#a17c7267d2f8dd6a6b9b77d5d05a82b4a">rr_blocks</a>;
<a name="l02552"></a><a class="code" href="structmdt__rec__reint.html#a9ffa3efb3ac5d951dbf4ba03775fda56">02552</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a9ffa3efb3ac5d951dbf4ba03775fda56">rr_bias</a>;
<a name="l02553"></a><a class="code" href="structmdt__rec__reint.html#a02ea8a2110907a82a819c11becc3de32">02553</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a02ea8a2110907a82a819c11becc3de32">rr_mode</a>;
<a name="l02554"></a><a class="code" href="structmdt__rec__reint.html#a47bcdd0379324cd97778ca3373e6580f">02554</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a47bcdd0379324cd97778ca3373e6580f">rr_flags</a>;
<a name="l02555"></a><a class="code" href="structmdt__rec__reint.html#af253be1342b9df451229ff512beced42">02555</a>         __u32           <a class="code" href="structmdt__rec__reint.html#af253be1342b9df451229ff512beced42">rr_flags_h</a>;
<a name="l02556"></a><a class="code" href="structmdt__rec__reint.html#acc96e46d916031619b67986ce8b6669f">02556</a>         __u32           <a class="code" href="structmdt__rec__reint.html#acc96e46d916031619b67986ce8b6669f">rr_umask</a>;
<a name="l02557"></a><a class="code" href="structmdt__rec__reint.html#a6ab11284c004b4b7199d4e9f156068bf">02557</a>         __u32           <a class="code" href="structmdt__rec__reint.html#a6ab11284c004b4b7199d4e9f156068bf">rr_padding_4</a>; <span class="comment">/* also fix lustre_swab_mdt_rec_reint */</span>
<a name="l02558"></a>02558 };
<a name="l02559"></a>02559 
<a name="l02560"></a>02560 <span class="comment">/* lmv structures */</span>
<a name="l02561"></a><a class="code" href="structlmv__desc.html">02561</a> <span class="keyword">struct </span><a class="code" href="structlmv__desc.html">lmv_desc</a> {
<a name="l02562"></a><a class="code" href="structlmv__desc.html#a4d4d4efe2de62e2d54e49dde2c2e2854">02562</a>         __u32 <a class="code" href="structlmv__desc.html#a4d4d4efe2de62e2d54e49dde2c2e2854">ld_tgt_count</a>;                <span class="comment">/* how many MDS&apos;s */</span>
<a name="l02563"></a><a class="code" href="structlmv__desc.html#a1ba21704d398ca3271311f34748d440e">02563</a>         __u32 <a class="code" href="structlmv__desc.html#a1ba21704d398ca3271311f34748d440e">ld_active_tgt_count</a>;         <span class="comment">/* how many active */</span>
<a name="l02564"></a><a class="code" href="structlmv__desc.html#a7253cc59a16831378c7a495753ba84b0">02564</a>         __u32 <a class="code" href="structlmv__desc.html#a7253cc59a16831378c7a495753ba84b0">ld_default_stripe_count</a>;     <span class="comment">/* how many objects are used */</span>
<a name="l02565"></a><a class="code" href="structlmv__desc.html#a83b1cf4ecfc8759660ad6a7aeef3c922">02565</a>         __u32 <a class="code" href="structlmv__desc.html#a83b1cf4ecfc8759660ad6a7aeef3c922">ld_pattern</a>;                  <span class="comment">/* default hash pattern */</span>
<a name="l02566"></a><a class="code" href="structlmv__desc.html#a434a18f942269c978c11717680e27b60">02566</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlmv__desc.html#a434a18f942269c978c11717680e27b60">ld_default_hash_size</a>;
<a name="l02567"></a><a class="code" href="structlmv__desc.html#ad8947eb5dbe04f2c1c0c56496ba44664">02567</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlmv__desc.html#ad8947eb5dbe04f2c1c0c56496ba44664">ld_padding_1</a>;                <span class="comment">/* also fix lustre_swab_lmv_desc */</span>
<a name="l02568"></a><a class="code" href="structlmv__desc.html#a3abf4fe8877c254709a753eaefc27b26">02568</a>         __u32 <a class="code" href="structlmv__desc.html#a3abf4fe8877c254709a753eaefc27b26">ld_padding_2</a>;                <span class="comment">/* also fix lustre_swab_lmv_desc */</span>
<a name="l02569"></a><a class="code" href="structlmv__desc.html#af8956d75e49ef2512ea80d5c3504c0d2">02569</a>         __u32 <a class="code" href="structlmv__desc.html#af8956d75e49ef2512ea80d5c3504c0d2">ld_qos_maxage</a>;               <span class="comment">/* in second */</span>
<a name="l02570"></a><a class="code" href="structlmv__desc.html#a82ed249c01199883f727e435727cff71">02570</a>         __u32 <a class="code" href="structlmv__desc.html#a82ed249c01199883f727e435727cff71">ld_padding_3</a>;                <span class="comment">/* also fix lustre_swab_lmv_desc */</span>
<a name="l02571"></a><a class="code" href="structlmv__desc.html#a30e7c91defbcac63f622229531c5128e">02571</a>         __u32 <a class="code" href="structlmv__desc.html#a30e7c91defbcac63f622229531c5128e">ld_padding_4</a>;                <span class="comment">/* also fix lustre_swab_lmv_desc */</span>
<a name="l02572"></a><a class="code" href="structlmv__desc.html#a578b89db75fe2aec66f740684377c728">02572</a>         <span class="keyword">struct </span><a class="code" href="structobd__uuid.html">obd_uuid</a> <a class="code" href="structlmv__desc.html#a578b89db75fe2aec66f740684377c728">ld_uuid</a>;
<a name="l02573"></a>02573 };
<a name="l02574"></a>02574 
<a name="l02575"></a>02575 <span class="comment">/* LMV layout EA, and it will be stored both in master and slave object */</span>
<a name="l02576"></a><a class="code" href="structlmv__mds__md__v1.html">02576</a> <span class="keyword">struct </span><a class="code" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> {
<a name="l02577"></a><a class="code" href="structlmv__mds__md__v1.html#ac2b14a45c4dd28ad5872864b645fe944">02577</a>         __u32 <a class="code" href="structlmv__mds__md__v1.html#ac2b14a45c4dd28ad5872864b645fe944">lmv_magic</a>;
<a name="l02578"></a><a class="code" href="structlmv__mds__md__v1.html#a3002cd6110eb9b23fc13986d18d60591">02578</a>         __u32 <a class="code" href="structlmv__mds__md__v1.html#a3002cd6110eb9b23fc13986d18d60591">lmv_stripe_count</a>;
<a name="l02579"></a><a class="code" href="structlmv__mds__md__v1.html#a84b8f3843894cd656966dc846fa36763">02579</a>         __u32 <a class="code" href="structlmv__mds__md__v1.html#a84b8f3843894cd656966dc846fa36763">lmv_master_mdt_index</a>;     <span class="comment">/* On master object, it is master</span>
<a name="l02580"></a>02580 <span class="comment">                                         * MDT index, on slave object, it</span>
<a name="l02581"></a>02581 <span class="comment">                                         * is stripe index of the slave obj */</span>
<a name="l02582"></a><a class="code" href="structlmv__mds__md__v1.html#a319805ff1f68b1bf3354d715fbfdf1d5">02582</a>         __u32 <a class="code" href="group__lustreuser.html#ga87892a6b8b26aa39362f401a2f430b6e">lmv_hash_type</a>;            <span class="comment">/* dir stripe policy, i.e. indicate</span>
<a name="l02583"></a>02583 <span class="comment">                                         * which hash function to be used,</span>
<a name="l02584"></a>02584 <span class="comment">                                         * Note: only lower 16 bits is being</span>
<a name="l02585"></a>02585 <span class="comment">                                         * used for now. Higher 16 bits will</span>
<a name="l02586"></a>02586 <span class="comment">                                         * be used to mark the object status,</span>
<a name="l02587"></a>02587 <span class="comment">                                         * for example migrating or dead. */</span>
<a name="l02588"></a><a class="code" href="structlmv__mds__md__v1.html#ac03443e0880b55f3105b28d2bbd683c1">02588</a>         __u32 <a class="code" href="structlmv__mds__md__v1.html#ac03443e0880b55f3105b28d2bbd683c1">lmv_layout_version</a>;       <span class="comment">/* Used for directory restriping */</span>
<a name="l02589"></a><a class="code" href="structlmv__mds__md__v1.html#a7c7f9c521c9fb72de427105b9cbc3c82">02589</a>         __u32 <a class="code" href="structlmv__mds__md__v1.html#a7c7f9c521c9fb72de427105b9cbc3c82">lmv_padding1</a>;
<a name="l02590"></a><a class="code" href="structlmv__mds__md__v1.html#af8d1089700c7f08fa2c702757e4f1a4c">02590</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlmv__mds__md__v1.html#af8d1089700c7f08fa2c702757e4f1a4c">lmv_padding2</a>;
<a name="l02591"></a><a class="code" href="structlmv__mds__md__v1.html#af8caf2155a6ede732820047f0b84ccfa">02591</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlmv__mds__md__v1.html#af8caf2155a6ede732820047f0b84ccfa">lmv_padding3</a>;
<a name="l02592"></a><a class="code" href="structlmv__mds__md__v1.html#aff7eefa84d5f28635b4886dca8eca7a2">02592</a>         <span class="keywordtype">char</span> <a class="code" href="structlmv__mds__md__v1.html#aff7eefa84d5f28635b4886dca8eca7a2">lmv_pool_name</a>[<a class="code" href="group__lustreuser.html#gaff040b96729bd1570b96fa43d7b40f35">LOV_MAXPOOLNAME</a> + 1];        <span class="comment">/* pool name */</span>
<a name="l02593"></a><a class="code" href="structlmv__mds__md__v1.html#a665969d5fd3737b04b8d5a6c0bf556b7">02593</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a> <a class="code" href="structlmv__mds__md__v1.html#a665969d5fd3737b04b8d5a6c0bf556b7">lmv_stripe_fids</a>[0];       <span class="comment">/* FIDs for each stripe */</span>
<a name="l02594"></a>02594 };
<a name="l02595"></a>02595 
<a name="l02596"></a><a class="code" href="group__lustreidl.html#gab6a609ad077d7b362a74873489238c89">02596</a> <span class="preprocessor">#define LMV_MAGIC_V1    0x0CD20CD0    </span><span class="comment">/* normal stripe lmv magic */</span>
<a name="l02597"></a><a class="code" href="group__lustreidl.html#ga20b8ea4b222fe119e252112c4c571804">02597</a> <span class="preprocessor">#define LMV_MAGIC       LMV_MAGIC_V1</span>
<a name="l02598"></a>02598 <span class="preprocessor"></span>
<a name="l02599"></a>02599 <span class="comment">/* #define LMV_USER_MAGIC 0x0CD30CD0 */</span>
<a name="l02600"></a><a class="code" href="group__lustreidl.html#ga09d0f6853dd711c331db80fb89fcd195">02600</a> <span class="preprocessor">#define LMV_MAGIC_STRIPE 0x0CD40CD0 </span><span class="comment">/* magic for dir sub_stripe */</span>
<a name="l02601"></a>02601 
<a name="l02602"></a>02602 <span class="comment">/* Right now only the lower part(0-16bits) of lmv_hash_type is being used,</span>
<a name="l02603"></a>02603 <span class="comment"> * and the higher part will be the flag to indicate the status of object,</span>
<a name="l02604"></a>02604 <span class="comment"> * for example the object is being migrated. And the hash function</span>
<a name="l02605"></a>02605 <span class="comment"> * might be interpreted differently with different flags. */</span>
<a name="l02606"></a><a class="code" href="group__lustreidl.html#ga1f58be161a73ad6972ab6d061a22d574">02606</a> <span class="preprocessor">#define LMV_HASH_TYPE_MASK 0x0000ffff</span>
<a name="l02607"></a>02607 <span class="preprocessor"></span>
<a name="l02608"></a><a class="code" href="group__lustreidl.html#gabb7a9c882172b0f9b0626528186b2162">02608</a> <span class="preprocessor">#define LMV_HASH_FLAG_MIGRATION 0x80000000</span>
<a name="l02609"></a>02609 <span class="preprocessor"></span>
<a name="l02610"></a>02610 <span class="preprocessor">#if LUSTRE_VERSION_CODE &lt; OBD_OCD_VERSION(2, 10, 53, 0)</span>
<a name="l02611"></a>02611 <span class="preprocessor"></span><span class="comment">/* Since lustre 2.8, this flag will not be needed, instead this DEAD</span>
<a name="l02612"></a>02612 <span class="comment"> * and orphan flags will be stored in LMA (see LMAI_ORPHAN)</span>
<a name="l02613"></a>02613 <span class="comment"> * Keep this flag just for LFSCK, because it still might meet such</span>
<a name="l02614"></a>02614 <span class="comment"> * flag when it checks the old FS */</span>
<a name="l02615"></a>02615 <span class="preprocessor">#define LMV_HASH_FLAG_DEAD      0x40000000</span>
<a name="l02616"></a>02616 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02617"></a><a class="code" href="group__lustreidl.html#ga4a58fca7ad3da203ee56192ed11746dd">02617</a> <span class="preprocessor"></span><span class="preprocessor">#define LMV_HASH_FLAG_BAD_TYPE  0x20000000</span>
<a name="l02618"></a>02618 <span class="preprocessor"></span>
<a name="l02619"></a>02619 <span class="comment">/* The striped directory has ever lost its master LMV EA, then LFSCK</span>
<a name="l02620"></a>02620 <span class="comment"> * re-generated it. This flag is used to indicate such case. It is an</span>
<a name="l02621"></a>02621 <span class="comment"> * on-disk flag. */</span>
<a name="l02622"></a><a class="code" href="group__lustreidl.html#gab369aeee0d970607107dca626bbac980">02622</a> <span class="preprocessor">#define LMV_HASH_FLAG_LOST_LMV  0x10000000</span>
<a name="l02623"></a>02623 <span class="preprocessor"></span>
<a name="l02636"></a><a class="code" href="group__lustreidl.html#ga2774b7d1c0ebda1aaba7d0103f21cdec">02636</a> <span class="preprocessor">#define LUSTRE_FNV_1A_64_PRIME  0x100000001b3ULL</span>
<a name="l02637"></a><a class="code" href="group__lustreidl.html#ga4520044d8d18fe0f20c8a35f281b5a0c">02637</a> <span class="preprocessor"></span><span class="preprocessor">#define LUSTRE_FNV_1A_64_OFFSET_BIAS 0xcbf29ce484222325ULL</span>
<a name="l02638"></a><a class="code" href="group__lustreidl.html#ga4d070c382a19a8132d024e4d8b1e56f1">02638</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="group__lustreidl.html#ga4d070c382a19a8132d024e4d8b1e56f1">lustre_hash_fnv_1a_64</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="parallel__grouplock_8c.html#a30581aaaef7980b9fc6df8f98406097c">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="lp__utils_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)
<a name="l02639"></a>02639 {
<a name="l02640"></a>02640         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hash = <a class="code" href="group__lustreidl.html#ga4520044d8d18fe0f20c8a35f281b5a0c">LUSTRE_FNV_1A_64_OFFSET_BIAS</a>;
<a name="l02641"></a>02641         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p = buf;
<a name="l02642"></a>02642         <span class="keywordtype">size_t</span> i;
<a name="l02643"></a>02643 
<a name="l02644"></a>02644         <span class="keywordflow">for</span> (i = 0; i &lt; size; i++) {
<a name="l02645"></a>02645                 hash ^= p[i];
<a name="l02646"></a>02646                 hash *= <a class="code" href="group__lustreidl.html#ga2774b7d1c0ebda1aaba7d0103f21cdec" title="The FNV-1a hash algorithm is as follows: hash = FNV_offset_basis for each octet_of_data...">LUSTRE_FNV_1A_64_PRIME</a>;
<a name="l02647"></a>02647         }
<a name="l02648"></a>02648 
<a name="l02649"></a>02649         <span class="keywordflow">return</span> hash;
<a name="l02650"></a>02650 }
<a name="l02651"></a>02651 
<a name="l02652"></a><a class="code" href="unionlmv__mds__md.html">02652</a> <span class="keyword">union </span><a class="code" href="unionlmv__mds__md.html">lmv_mds_md</a> {
<a name="l02653"></a><a class="code" href="unionlmv__mds__md.html#a76a8b364103705d95533fd915cbfff17">02653</a>         __u32                    <a class="code" href="unionlmv__mds__md.html#a76a8b364103705d95533fd915cbfff17">lmv_magic</a>;
<a name="l02654"></a><a class="code" href="unionlmv__mds__md.html#a4e9f4a4a56fa910ec829ec890a713130">02654</a>         <span class="keyword">struct </span><a class="code" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a>     <a class="code" href="unionlmv__mds__md.html#a4e9f4a4a56fa910ec829ec890a713130">lmv_md_v1</a>;
<a name="l02655"></a><a class="code" href="unionlmv__mds__md.html#a708e2a14a9ee962db38d8bca8591a5ea">02655</a>         <span class="keyword">struct </span><a class="code" href="unionlmv__mds__md.html#a708e2a14a9ee962db38d8bca8591a5ea">lmv_user_md</a>       <a class="code" href="unionlmv__mds__md.html#a708e2a14a9ee962db38d8bca8591a5ea">lmv_user_md</a>;
<a name="l02656"></a>02656 };
<a name="l02657"></a>02657 
<a name="l02658"></a><a class="code" href="group__lustreidl.html#ga22c12dbd6667b2e09848a6888a119428">02658</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#ga22c12dbd6667b2e09848a6888a119428">lmv_mds_md_size</a>(<span class="keywordtype">int</span> stripe_count, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lmm_magic)
<a name="l02659"></a>02659 {
<a name="l02660"></a>02660         <span class="keywordflow">switch</span> (lmm_magic) {
<a name="l02661"></a>02661         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#gab6a609ad077d7b362a74873489238c89">LMV_MAGIC_V1</a>:{
<a name="l02662"></a>02662                 <span class="keyword">struct </span><a class="code" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *lmm1;
<a name="l02663"></a>02663 
<a name="l02664"></a>02664                 <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(*lmm1) + stripe_count *
<a name="l02665"></a>02665                                        <span class="keyword">sizeof</span>(lmm1-&gt;<a class="code" href="structlmv__mds__md__v1.html#a665969d5fd3737b04b8d5a6c0bf556b7">lmv_stripe_fids</a>[0]);
<a name="l02666"></a>02666         }
<a name="l02667"></a>02667         <span class="keywordflow">default</span>:
<a name="l02668"></a>02668                 <span class="keywordflow">return</span> -EINVAL;
<a name="l02669"></a>02669         }
<a name="l02670"></a>02670 }
<a name="l02671"></a>02671 
<a name="l02672"></a><a class="code" href="group__lustreidl.html#ga807d6c581494603dff0c259f4efc1be5">02672</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#ga807d6c581494603dff0c259f4efc1be5">lmv_mds_md_stripe_count_get</a>(<span class="keyword">const</span> <span class="keyword">union</span> <a class="code" href="unionlmv__mds__md.html">lmv_mds_md</a> *lmm)
<a name="l02673"></a>02673 {
<a name="l02674"></a>02674         <span class="keywordflow">switch</span> (<a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(lmm-&gt;<a class="code" href="unionlmv__mds__md.html#a76a8b364103705d95533fd915cbfff17">lmv_magic</a>)) {
<a name="l02675"></a>02675         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#gab6a609ad077d7b362a74873489238c89">LMV_MAGIC_V1</a>:
<a name="l02676"></a>02676                 <span class="keywordflow">return</span> <a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(lmm-&gt;<a class="code" href="unionlmv__mds__md.html#a4e9f4a4a56fa910ec829ec890a713130">lmv_md_v1</a>.<a class="code" href="structlmv__mds__md__v1.html#a3002cd6110eb9b23fc13986d18d60591">lmv_stripe_count</a>);
<a name="l02677"></a>02677         <span class="keywordflow">case</span> <a class="code" href="group__lustreuser.html#gabdf9dc5944d2440f0739a0d6c02e02e6">LMV_USER_MAGIC</a>:
<a name="l02678"></a>02678                 <span class="keywordflow">return</span> <a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(lmm-&gt;<a class="code" href="unionlmv__mds__md.html#a708e2a14a9ee962db38d8bca8591a5ea">lmv_user_md</a>.lum_stripe_count);
<a name="l02679"></a>02679         <span class="keywordflow">default</span>:
<a name="l02680"></a>02680                 <span class="keywordflow">return</span> -EINVAL;
<a name="l02681"></a>02681         }
<a name="l02682"></a>02682 }
<a name="l02683"></a>02683 
<a name="l02684"></a><a class="code" href="group__lustreidl.html#ga8b77b153852929eb001a7fcd7a8e1bd3">02684</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#ga8b77b153852929eb001a7fcd7a8e1bd3">lmv_mds_md_stripe_count_set</a>(<span class="keyword">union</span> <a class="code" href="unionlmv__mds__md.html">lmv_mds_md</a> *lmm,
<a name="l02685"></a>02685                                               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stripe_count)
<a name="l02686"></a>02686 {
<a name="l02687"></a>02687         <span class="keywordflow">switch</span> (<a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(lmm-&gt;<a class="code" href="unionlmv__mds__md.html#a76a8b364103705d95533fd915cbfff17">lmv_magic</a>)) {
<a name="l02688"></a>02688         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#gab6a609ad077d7b362a74873489238c89">LMV_MAGIC_V1</a>:
<a name="l02689"></a>02689                 lmm-&gt;<a class="code" href="unionlmv__mds__md.html#a4e9f4a4a56fa910ec829ec890a713130">lmv_md_v1</a>.<a class="code" href="structlmv__mds__md__v1.html#a3002cd6110eb9b23fc13986d18d60591">lmv_stripe_count</a> = <a class="code" href="byteorder_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(stripe_count);
<a name="l02690"></a>02690                 <span class="keywordflow">break</span>;
<a name="l02691"></a>02691         <span class="keywordflow">case</span> <a class="code" href="group__lustreuser.html#gabdf9dc5944d2440f0739a0d6c02e02e6">LMV_USER_MAGIC</a>:
<a name="l02692"></a>02692                 lmm-&gt;<a class="code" href="unionlmv__mds__md.html#a708e2a14a9ee962db38d8bca8591a5ea">lmv_user_md</a>.lum_stripe_count = <a class="code" href="byteorder_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(stripe_count);
<a name="l02693"></a>02693                 <span class="keywordflow">break</span>;
<a name="l02694"></a>02694         <span class="keywordflow">default</span>:
<a name="l02695"></a>02695                 <span class="keywordflow">return</span> -EINVAL;
<a name="l02696"></a>02696         }
<a name="l02697"></a>02697         <span class="keywordflow">return</span> 0;
<a name="l02698"></a>02698 }
<a name="l02699"></a>02699 
<a name="l02700"></a><a class="code" href="group__lustreidl.html#ga185d977a533e9a760303731aaba4388b">02700</a> <span class="keyword">enum</span> <a class="code" href="packet-lustre_8c.html#a185d977a533e9a760303731aaba4388b">fld_rpc_opc</a> {
<a name="l02701"></a><a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388baee980d26a62962f622f7fb9aeea5f29a">02701</a>         <a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388baee980d26a62962f622f7fb9aeea5f29a">FLD_QUERY</a>       = 900,
<a name="l02702"></a><a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388ba781cadbeb89f9c3a45cad6f13ef930a5">02702</a>         <a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388ba781cadbeb89f9c3a45cad6f13ef930a5">FLD_READ</a>        = 901,
<a name="l02703"></a><a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388baac88d475dce11604a4ea3bb59ffce0f7">02703</a>         <a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388baac88d475dce11604a4ea3bb59ffce0f7">FLD_LAST_OPC</a>,
<a name="l02704"></a><a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388bae2b0a5d14e7e407bd1b03b1f64dceb16">02704</a>         <a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388bae2b0a5d14e7e407bd1b03b1f64dceb16">FLD_FIRST_OPC</a>   = <a class="code" href="group__lustreidl.html#gga185d977a533e9a760303731aaba4388baee980d26a62962f622f7fb9aeea5f29a">FLD_QUERY</a>
<a name="l02705"></a>02705 };
<a name="l02706"></a>02706 
<a name="l02707"></a><a class="code" href="group__lustreidl.html#ga8cb93eb55524b57eac996fad3361cbc3">02707</a> <span class="keyword">enum</span> <a class="code" href="packet-lustre_8c.html#a8cb93eb55524b57eac996fad3361cbc3">seq_rpc_opc</a> {
<a name="l02708"></a><a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a73c90cebc9ff49e5f90daf839aa4aaf6">02708</a>         <a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a73c90cebc9ff49e5f90daf839aa4aaf6">SEQ_QUERY</a>                       = 700,
<a name="l02709"></a><a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a104d6831ed6b5c2fe8238e5c6819e26a">02709</a>         <a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a104d6831ed6b5c2fe8238e5c6819e26a">SEQ_LAST_OPC</a>,
<a name="l02710"></a><a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a4da6daeb20e2cbc1e29dacad0f09c07c">02710</a>         <a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a4da6daeb20e2cbc1e29dacad0f09c07c">SEQ_FIRST_OPC</a>                   = <a class="code" href="group__lustreidl.html#gga8cb93eb55524b57eac996fad3361cbc3a73c90cebc9ff49e5f90daf839aa4aaf6">SEQ_QUERY</a>
<a name="l02711"></a>02711 };
<a name="l02712"></a>02712 
<a name="l02713"></a><a class="code" href="group__lustreidl.html#ga8e234bf91157cdff094358eab9c9bdfb">02713</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga8e234bf91157cdff094358eab9c9bdfb">seq_op</a> {
<a name="l02714"></a><a class="code" href="group__lustreidl.html#gga8e234bf91157cdff094358eab9c9bdfba2228a23e04da8ed5e87b274e833608c8">02714</a>         <a class="code" href="group__lustreidl.html#gga8e234bf91157cdff094358eab9c9bdfba2228a23e04da8ed5e87b274e833608c8">SEQ_ALLOC_SUPER</a> = 0,
<a name="l02715"></a><a class="code" href="group__lustreidl.html#gga8e234bf91157cdff094358eab9c9bdfbae8246e41a1867873ee76346c7b03d61e">02715</a>         <a class="code" href="group__lustreidl.html#gga8e234bf91157cdff094358eab9c9bdfbae8246e41a1867873ee76346c7b03d61e">SEQ_ALLOC_META</a> = 1
<a name="l02716"></a>02716 };
<a name="l02717"></a>02717 
<a name="l02718"></a><a class="code" href="group__lustreidl.html#ga58f9444918fd19593cc6e333d3669c2a">02718</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga58f9444918fd19593cc6e333d3669c2a">fld_op</a> {
<a name="l02719"></a><a class="code" href="group__lustreidl.html#gga58f9444918fd19593cc6e333d3669c2aa693fb2c73e58ad454e58bf839992dd5a">02719</a>         <a class="code" href="group__lustreidl.html#gga58f9444918fd19593cc6e333d3669c2aa693fb2c73e58ad454e58bf839992dd5a">FLD_CREATE</a> = 0,
<a name="l02720"></a><a class="code" href="group__lustreidl.html#gga58f9444918fd19593cc6e333d3669c2aa4bf50057be3085aa6186c82a1edbe972">02720</a>         <a class="code" href="group__lustreidl.html#gga58f9444918fd19593cc6e333d3669c2aa4bf50057be3085aa6186c82a1edbe972">FLD_DELETE</a> = 1,
<a name="l02721"></a><a class="code" href="group__lustreidl.html#gga58f9444918fd19593cc6e333d3669c2aa05f7b0f8eb883097db11e5c123cc354a">02721</a>         <a class="code" href="group__lustreidl.html#gga58f9444918fd19593cc6e333d3669c2aa05f7b0f8eb883097db11e5c123cc354a">FLD_LOOKUP</a> = 2,
<a name="l02722"></a>02722 };
<a name="l02723"></a>02723 
<a name="l02724"></a>02724 <span class="comment">/* LFSCK opcodes */</span>
<a name="l02725"></a><a class="code" href="group__lustreidl.html#ga9b4b9538cdfa57b61f2346ba69a6d8e7">02725</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02726"></a><a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a648263f609d0b636a956dca34ebb6010">02726</a>         <a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a648263f609d0b636a956dca34ebb6010">LFSCK_NOTIFY</a>            = 1101,
<a name="l02727"></a><a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a1d9feeac77ca2737e97510fd55e10311">02727</a>         <a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a1d9feeac77ca2737e97510fd55e10311">LFSCK_QUERY</a>             = 1102,
<a name="l02728"></a><a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a3faf0719b6f565261830bb59e45167c9">02728</a>         <a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a3faf0719b6f565261830bb59e45167c9">LFSCK_LAST_OPC</a>,
<a name="l02729"></a><a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a87b3198cd0c686c88130d2eb84d19467">02729</a>         <a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a87b3198cd0c686c88130d2eb84d19467">LFSCK_FIRST_OPC</a>         = <a class="code" href="group__lustreidl.html#gga9b4b9538cdfa57b61f2346ba69a6d8e7a648263f609d0b636a956dca34ebb6010">LFSCK_NOTIFY</a>
<a name="l02730"></a>02730 } <a class="code" href="group__lustreidl.html#ga9b4b9538cdfa57b61f2346ba69a6d8e7">lfsck_cmd_t</a>;
<a name="l02731"></a>02731 
<a name="l02732"></a>02732 <span class="comment">/*</span>
<a name="l02733"></a>02733 <span class="comment"> *  LOV data structures</span>
<a name="l02734"></a>02734 <span class="comment"> */</span>
<a name="l02735"></a>02735 
<a name="l02736"></a><a class="code" href="group__lustreidl.html#gace48634be7fc19ff7c0f01c7a67f0238">02736</a> <span class="preprocessor">#define LOV_MAX_UUID_BUFFER_SIZE  8192</span>
<a name="l02737"></a>02737 <span class="preprocessor"></span><span class="comment">/* The size of the buffer the lov/mdc reserves for the</span>
<a name="l02738"></a>02738 <span class="comment"> * array of UUIDs returned by the MDS.  With the current</span>
<a name="l02739"></a>02739 <span class="comment"> * protocol, this will limit the max number of OSTs per LOV */</span>
<a name="l02740"></a>02740 
<a name="l02741"></a><a class="code" href="group__lustreidl.html#gab3c4273eb9ada757df88b4925167bfe4">02741</a> <span class="preprocessor">#define LOV_DESC_MAGIC 0xB0CCDE5C</span>
<a name="l02742"></a><a class="code" href="group__lustreidl.html#ga072529f379f73fc129e94fd89403f3b7">02742</a> <span class="preprocessor"></span><span class="preprocessor">#define LOV_DESC_QOS_MAXAGE_DEFAULT 5  </span><span class="comment">/* Seconds */</span>
<a name="l02743"></a><a class="code" href="group__lustreidl.html#ga507340d189353e5c53cdc85d6c68618a">02743</a> <span class="preprocessor">#define LOV_DESC_STRIPE_SIZE_DEFAULT (1 &lt;&lt; LNET_MTU_BITS)</span>
<a name="l02744"></a>02744 <span class="preprocessor"></span>
<a name="l02745"></a>02745 <span class="comment">/* LOV settings descriptor (should only contain static info) */</span>
<a name="l02746"></a><a class="code" href="structlov__desc.html">02746</a> <span class="keyword">struct </span><a class="code" href="structlov__desc.html">lov_desc</a> {
<a name="l02747"></a><a class="code" href="structlov__desc.html#ae0dab4d70fbf47fb1396118063e29efc">02747</a>         __u32 <a class="code" href="structlov__desc.html#ae0dab4d70fbf47fb1396118063e29efc">ld_tgt_count</a>;                <span class="comment">/* how many OBD&apos;s */</span>
<a name="l02748"></a><a class="code" href="structlov__desc.html#a8982b0377ab59b189c41ca8c54f412d7">02748</a>         __u32 <a class="code" href="structlov__desc.html#a8982b0377ab59b189c41ca8c54f412d7">ld_active_tgt_count</a>;         <span class="comment">/* how many active */</span>
<a name="l02749"></a><a class="code" href="structlov__desc.html#afe1f5e1c047e843ae536aaa0bd97bc80">02749</a>         __u32 <a class="code" href="structlov__desc.html#afe1f5e1c047e843ae536aaa0bd97bc80">ld_default_stripe_count</a>;     <span class="comment">/* how many objects are used */</span>
<a name="l02750"></a><a class="code" href="structlov__desc.html#ac0b3cdfdbc5c4e1e3b7dfcefe461b499">02750</a>         __u32 <a class="code" href="structlov__desc.html#ac0b3cdfdbc5c4e1e3b7dfcefe461b499">ld_pattern</a>;                  <span class="comment">/* default PATTERN_RAID0 */</span>
<a name="l02751"></a><a class="code" href="structlov__desc.html#a2b1139641dc3bb0310e663d947fa2e13">02751</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlov__desc.html#a2b1139641dc3bb0310e663d947fa2e13">ld_default_stripe_size</a>;      <span class="comment">/* in bytes */</span>
<a name="l02752"></a><a class="code" href="structlov__desc.html#a5f0938339dac881d3d82a2fdde68547f">02752</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlov__desc.html#a5f0938339dac881d3d82a2fdde68547f">ld_default_stripe_offset</a>;    <span class="comment">/* in bytes */</span>
<a name="l02753"></a><a class="code" href="structlov__desc.html#a553fcd575b6ac6893fada2695f9fdc3b">02753</a>         __u32 <a class="code" href="structlov__desc.html#a553fcd575b6ac6893fada2695f9fdc3b">ld_padding_0</a>;                <span class="comment">/* unused */</span>
<a name="l02754"></a><a class="code" href="structlov__desc.html#a19eb5f8fa9c4794272f08c2723eda52b">02754</a>         __u32 <a class="code" href="structlov__desc.html#a19eb5f8fa9c4794272f08c2723eda52b">ld_qos_maxage</a>;               <span class="comment">/* in second */</span>
<a name="l02755"></a><a class="code" href="structlov__desc.html#acfde34c1ba39f692f1531b9b557b8568">02755</a>         __u32 <a class="code" href="structlov__desc.html#acfde34c1ba39f692f1531b9b557b8568">ld_padding_1</a>;                <span class="comment">/* also fix lustre_swab_lov_desc */</span>
<a name="l02756"></a><a class="code" href="structlov__desc.html#a1687d317cbc37e56e65440a8d4517db9">02756</a>         __u32 <a class="code" href="structlov__desc.html#a1687d317cbc37e56e65440a8d4517db9">ld_padding_2</a>;                <span class="comment">/* also fix lustre_swab_lov_desc */</span>
<a name="l02757"></a><a class="code" href="structlov__desc.html#af0fa83fcecda7687ff4bbf692af085ab">02757</a>         <span class="keyword">struct </span><a class="code" href="structobd__uuid.html">obd_uuid</a> <a class="code" href="structlov__desc.html#af0fa83fcecda7687ff4bbf692af085ab">ld_uuid</a>;
<a name="l02758"></a>02758 };
<a name="l02759"></a>02759 
<a name="l02760"></a><a class="code" href="group__lustreidl.html#gaa57bdc41eddb95560ae999eeea7ffa8e">02760</a> <span class="preprocessor">#define ld_magic ld_active_tgt_count       </span><span class="comment">/* for swabbing from llogs */</span>
<a name="l02761"></a>02761 
<a name="l02762"></a>02762 <span class="comment">/*</span>
<a name="l02763"></a>02763 <span class="comment"> *   LDLM requests:</span>
<a name="l02764"></a>02764 <span class="comment"> */</span>
<a name="l02765"></a>02765 <span class="comment">/* opcodes -- MUST be distinct from OST/MDS opcodes */</span>
<a name="l02766"></a><a class="code" href="group__lustreidl.html#ga8c7ec74b59dd44ef0a3962fdc078fd45">02766</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02767"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45a07f75daeb81232a29b233fb939e59a34">02767</a>         <a class="code" href="packet-lustre_8c.html#a8321f1254097562570d86daf2af860e8">LDLM_ENQUEUE</a>     = 101,
<a name="l02768"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45ae7b63c68b8316df38c1cd2d880c21c7c">02768</a>         <a class="code" href="packet-lustre_8c.html#a28c62f6fa927d5740e026b60b591b5ed">LDLM_CONVERT</a>     = 102,
<a name="l02769"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45a51ea6f44cd0e4992f380e082b33bb3b8">02769</a>         <a class="code" href="packet-lustre_8c.html#af4aeff90557f9e54771e8de0d443c71c">LDLM_CANCEL</a>      = 103,
<a name="l02770"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45a3475bc3df6b17292644307c23cab2336">02770</a>         <a class="code" href="packet-lustre_8c.html#a84b2e666d9e1e57928d1521c22a3d9f9">LDLM_BL_CALLBACK</a> = 104,
<a name="l02771"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45af65b76753336fac9213152571e986e1e">02771</a>         <a class="code" href="packet-lustre_8c.html#afe6ffdf7867a3e3e20de2e5d26257761">LDLM_CP_CALLBACK</a> = 105,
<a name="l02772"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45aa3e7e9e4f14d08a7af4606a88ca267a7">02772</a>         <a class="code" href="packet-lustre_8c.html#a70035b7ee9554257648ff591d5b088ae">LDLM_GL_CALLBACK</a> = 106,
<a name="l02773"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45acf15d0840d9b59fc2e9482a5b93295a8">02773</a>         <a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45acf15d0840d9b59fc2e9482a5b93295a8">LDLM_SET_INFO</a>    = 107,
<a name="l02774"></a><a class="code" href="group__lustreidl.html#gga8c7ec74b59dd44ef0a3962fdc078fd45a788c00fc2252af3e2dfeb7221dbfb264">02774</a>         <a class="code" href="packet-lustre_8c.html#a0fd02b4d9b347a2c8847e43cb20a2de8a788c00fc2252af3e2dfeb7221dbfb264">LDLM_LAST_OPC</a>
<a name="l02775"></a>02775 } <a class="code" href="group__lustreidl.html#ga8c7ec74b59dd44ef0a3962fdc078fd45">ldlm_cmd_t</a>;
<a name="l02776"></a><a class="code" href="group__lustreidl.html#ga060c9acfc1ac9c6a9f0f7e6296bdb8cb">02776</a> <span class="preprocessor">#define LDLM_FIRST_OPC LDLM_ENQUEUE</span>
<a name="l02777"></a>02777 <span class="preprocessor"></span>
<a name="l02778"></a><a class="code" href="group__lustreidl.html#ga7ab749c7b5d3f9c9b007a9b64a42856c">02778</a> <span class="preprocessor">#define RES_NAME_SIZE 4</span>
<a name="l02779"></a><a class="code" href="structldlm__res__id.html">02779</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structldlm__res__id.html">ldlm_res_id</a> {
<a name="l02780"></a><a class="code" href="structldlm__res__id.html#a0348c56bc955cd6ad2f136605c1fcd4a">02780</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__res__id.html#a0348c56bc955cd6ad2f136605c1fcd4a">name</a>[<a class="code" href="group__lustreidl.html#ga7ab749c7b5d3f9c9b007a9b64a42856c">RES_NAME_SIZE</a>];
<a name="l02781"></a>02781 };
<a name="l02782"></a>02782 
<a name="l02783"></a><a class="code" href="group__lustreidl.html#ga8181dcaae402969b03a5597383ab92bd">02783</a> <span class="preprocessor">#define DLDLMRES        &quot;[%#llx:%#llx:%#llx].%#llx&quot;</span>
<a name="l02784"></a><a class="code" href="group__lustreidl.html#ga6c63f4b243d07c977c9e962dad144b42">02784</a> <span class="preprocessor"></span><span class="preprocessor">#define PLDLMRES(res)   (unsigned long long)(res)-&gt;lr_name.name[0],     \</span>
<a name="l02785"></a>02785 <span class="preprocessor">                        (unsigned long long)(res)-&gt;lr_name.name[1],     \</span>
<a name="l02786"></a>02786 <span class="preprocessor">                        (unsigned long long)(res)-&gt;lr_name.name[2],     \</span>
<a name="l02787"></a>02787 <span class="preprocessor">                        (unsigned long long)(res)-&gt;lr_name.name[3]</span>
<a name="l02788"></a>02788 <span class="preprocessor"></span>
<a name="l02789"></a><a class="code" href="group__lustreidl.html#ga1901b23ceadd6211e7b0cab0d28c871b">02789</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lustreidl.html#ga1901b23ceadd6211e7b0cab0d28c871b">ldlm_res_eq</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structldlm__res__id.html">ldlm_res_id</a> *res0,
<a name="l02790"></a>02790                                <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structldlm__res__id.html">ldlm_res_id</a> *res1)
<a name="l02791"></a>02791 {
<a name="l02792"></a>02792         <span class="keywordflow">return</span> memcmp(res0, res1, <span class="keyword">sizeof</span>(*res0)) == 0;
<a name="l02793"></a>02793 }
<a name="l02794"></a>02794 
<a name="l02795"></a>02795 <span class="comment">/* lock types */</span>
<a name="l02796"></a><a class="code" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">02796</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> {
<a name="l02797"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441ae3927dea5a251e1b82fbe858bbde792b">02797</a>         <a class="code" href="packet-lustre_8c.html#aeb765b44eb9880500021b97a963db8e9">LCK_MINMODE</a>     = 0,
<a name="l02798"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a1a20692e9fd9f7acb31514e1fdac1699">02798</a>         <a class="code" href="packet-lustre_8c.html#a815dc82e9e2dcd1843911ea0bdc3e3c7">LCK_EX</a>          = 1,
<a name="l02799"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a8aef432d8326e300078abf3ba829a611">02799</a>         <a class="code" href="packet-lustre_8c.html#acfddf2f902384575528f1e893c561afc">LCK_PW</a>          = 2,
<a name="l02800"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441abae1b6088e0ca1220a64be8fab10faae">02800</a>         <a class="code" href="packet-lustre_8c.html#a4b1936ce7054752c0a9d74ebc836c5d6">LCK_PR</a>          = 4,
<a name="l02801"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441abd30f7dfeb57c7dd7334e753eff4246a">02801</a>         <a class="code" href="packet-lustre_8c.html#ac60a597e5ebc0742a6171d25d5165902">LCK_CW</a>          = 8,
<a name="l02802"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a4d1dd2435500e294b90ed35a7fc6b929">02802</a>         <a class="code" href="packet-lustre_8c.html#a8532d2ec7dffedbf9e84ef23a16b19fd">LCK_CR</a>          = 16,
<a name="l02803"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441ada193adae27798840c79f836f8ffaa8a">02803</a>         <a class="code" href="packet-lustre_8c.html#a42432356320ac178383bd9f100de1ceb">LCK_NL</a>          = 32,
<a name="l02804"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a5320862d02aa9d677ba41f721bcfe5a5">02804</a>         <a class="code" href="packet-lustre_8c.html#a37496b5479e3e46be8b0be98137baeb1">LCK_GROUP</a>       = 64,
<a name="l02805"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a316b5106c82c6fc0473e08d244a8f4cd">02805</a>         <a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a316b5106c82c6fc0473e08d244a8f4cd">LCK_COS</a>         = 128,
<a name="l02806"></a><a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a0fef13ae3cb670960e19ead2b7d2ad7a">02806</a>         <a class="code" href="group__lustreidl.html#gga78e7c1d7ad283002413a597e75aa7441a0fef13ae3cb670960e19ead2b7d2ad7a">LCK_MAXMODE</a>
<a name="l02807"></a>02807 } <a class="code" href="group__lustreidl.html#gac846fee2f738a4a5a7c2d997f177d263">ldlm_mode_t</a>;
<a name="l02808"></a>02808 
<a name="l02809"></a><a class="code" href="group__lustreidl.html#gaa83e5c5a96d73894603b9245a1c1ee90">02809</a> <span class="preprocessor">#define LCK_MODE_NUM    8</span>
<a name="l02810"></a>02810 <span class="preprocessor"></span>
<a name="l02811"></a><a class="code" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">02811</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> {
<a name="l02812"></a><a class="code" href="group__lustreidl.html#gga5ced9a6707006817f5e2409b368f36b5adccf25f386138ec02b266b719ca3d801">02812</a>         <a class="code" href="packet-lustre_8c.html#ac4397f44dbf94f69e645b89d4bcf3772">LDLM_PLAIN</a>      = 10,
<a name="l02813"></a><a class="code" href="group__lustreidl.html#gga5ced9a6707006817f5e2409b368f36b5a23b1b073cfbd0747b9eafc8fb96cb6d3">02813</a>         <a class="code" href="packet-lustre_8c.html#ab92227eb33b3bc79ee12e10421865cad">LDLM_EXTENT</a>     = 11,
<a name="l02814"></a><a class="code" href="group__lustreidl.html#gga5ced9a6707006817f5e2409b368f36b5a7b0adc63a3b0a96ecddf028f1ec0a108">02814</a>         <a class="code" href="packet-lustre_8c.html#a14b95988a3dcd429fb3a2e85dc317a2c">LDLM_FLOCK</a>      = 12,
<a name="l02815"></a><a class="code" href="group__lustreidl.html#gga5ced9a6707006817f5e2409b368f36b5ab1c0c69d4fd43ef7437572c956db204d">02815</a>         <a class="code" href="packet-lustre_8c.html#afca8e3fd80560e42cd0c6013d34af412">LDLM_IBITS</a>      = 13,
<a name="l02816"></a><a class="code" href="group__lustreidl.html#gga5ced9a6707006817f5e2409b368f36b5a97182fc3733ab75d324fea8095593dd7">02816</a>         <a class="code" href="group__lustreidl.html#gga5ced9a6707006817f5e2409b368f36b5a97182fc3733ab75d324fea8095593dd7">LDLM_MAX_TYPE</a>
<a name="l02817"></a>02817 } <a class="code" href="group__lustreidl.html#gac7b44aad91f6e617661cddd3723f3b38">ldlm_type_t</a>;
<a name="l02818"></a>02818 
<a name="l02819"></a><a class="code" href="group__lustreidl.html#ga47054888fecf3154752fe78a3f2e7307">02819</a> <span class="preprocessor">#define LDLM_MIN_TYPE LDLM_PLAIN</span>
<a name="l02820"></a>02820 <span class="preprocessor"></span>
<a name="l02821"></a><a class="code" href="structldlm__extent.html">02821</a> <span class="keyword">struct </span><a class="code" href="structldlm__extent.html">ldlm_extent</a> {
<a name="l02822"></a><a class="code" href="structldlm__extent.html#af09bacd52ee801eb10e12807fc6ed5b7">02822</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__extent.html#af09bacd52ee801eb10e12807fc6ed5b7">start</a>;
<a name="l02823"></a><a class="code" href="structldlm__extent.html#a46a04a5a0a47f6e4b476bb37648c5ffc">02823</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__extent.html#a46a04a5a0a47f6e4b476bb37648c5ffc">end</a>;
<a name="l02824"></a><a class="code" href="structldlm__extent.html#a26ed2c10540083850c4075cd178ae1c5">02824</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__extent.html#a26ed2c10540083850c4075cd178ae1c5">gid</a>;
<a name="l02825"></a>02825 };
<a name="l02826"></a>02826 
<a name="l02827"></a><a class="code" href="group__lustreidl.html#gab997d2bebb977d2b455ac3c6ee2cccfa">02827</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#gab997d2bebb977d2b455ac3c6ee2cccfa">ldlm_extent_overlap</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structldlm__extent.html">ldlm_extent</a> *ex1,
<a name="l02828"></a>02828                                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structldlm__extent.html">ldlm_extent</a> *ex2)
<a name="l02829"></a>02829 {
<a name="l02830"></a>02830         <span class="keywordflow">return</span> ex1-&gt;<a class="code" href="structldlm__extent.html#af09bacd52ee801eb10e12807fc6ed5b7">start</a> &lt;= ex2-&gt;<a class="code" href="structldlm__extent.html#a46a04a5a0a47f6e4b476bb37648c5ffc">end</a> &amp;&amp; ex2-&gt;<a class="code" href="structldlm__extent.html#af09bacd52ee801eb10e12807fc6ed5b7">start</a> &lt;= ex1-&gt;<a class="code" href="structldlm__extent.html#a46a04a5a0a47f6e4b476bb37648c5ffc">end</a>;
<a name="l02831"></a>02831 }
<a name="l02832"></a>02832 
<a name="l02833"></a>02833 <span class="comment">/* check if @ex1 contains @ex2 */</span>
<a name="l02834"></a><a class="code" href="group__lustreidl.html#gaf66ef86affff760b1e8aad62a0ce285c">02834</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__lustreidl.html#gaf66ef86affff760b1e8aad62a0ce285c">ldlm_extent_contain</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structldlm__extent.html">ldlm_extent</a> *ex1,
<a name="l02835"></a>02835                                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structldlm__extent.html">ldlm_extent</a> *ex2)
<a name="l02836"></a>02836 {
<a name="l02837"></a>02837         <span class="keywordflow">return</span> ex1-&gt;<a class="code" href="structldlm__extent.html#af09bacd52ee801eb10e12807fc6ed5b7">start</a> &lt;= ex2-&gt;<a class="code" href="structldlm__extent.html#af09bacd52ee801eb10e12807fc6ed5b7">start</a> &amp;&amp; ex1-&gt;<a class="code" href="structldlm__extent.html#a46a04a5a0a47f6e4b476bb37648c5ffc">end</a> &gt;= ex2-&gt;<a class="code" href="structldlm__extent.html#a46a04a5a0a47f6e4b476bb37648c5ffc">end</a>;
<a name="l02838"></a>02838 }
<a name="l02839"></a>02839 
<a name="l02840"></a><a class="code" href="structldlm__inodebits.html">02840</a> <span class="keyword">struct </span><a class="code" href="structldlm__inodebits.html">ldlm_inodebits</a> {
<a name="l02841"></a><a class="code" href="structldlm__inodebits.html#ab5ac21017af5d925dd81a7699544ea07">02841</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__inodebits.html#ab5ac21017af5d925dd81a7699544ea07">bits</a>;
<a name="l02842"></a>02842 };
<a name="l02843"></a>02843 
<a name="l02844"></a><a class="code" href="structldlm__flock__wire.html">02844</a> <span class="keyword">struct </span><a class="code" href="structldlm__flock__wire.html">ldlm_flock_wire</a> {
<a name="l02845"></a><a class="code" href="structldlm__flock__wire.html#a7f8e759a0abd5bf942ac43b288f14d07">02845</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__flock__wire.html#a7f8e759a0abd5bf942ac43b288f14d07">lfw_start</a>;
<a name="l02846"></a><a class="code" href="structldlm__flock__wire.html#aeae6cb9b7f0329fd4fc275f294f87e45">02846</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__flock__wire.html#aeae6cb9b7f0329fd4fc275f294f87e45">lfw_end</a>;
<a name="l02847"></a><a class="code" href="structldlm__flock__wire.html#a9565f85a0b1de63ff4388b86b5069b43">02847</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__flock__wire.html#a9565f85a0b1de63ff4388b86b5069b43">lfw_owner</a>;
<a name="l02848"></a><a class="code" href="structldlm__flock__wire.html#a6b4e9d3431f2b62dbb14e53f9f22db73">02848</a>         __u32 <a class="code" href="structldlm__flock__wire.html#a6b4e9d3431f2b62dbb14e53f9f22db73">lfw_padding</a>;
<a name="l02849"></a><a class="code" href="structldlm__flock__wire.html#a1e8c8c5ac1f205d831e551344d5c7a2e">02849</a>         __u32 <a class="code" href="structldlm__flock__wire.html#a1e8c8c5ac1f205d831e551344d5c7a2e">lfw_pid</a>;
<a name="l02850"></a>02850 };
<a name="l02851"></a>02851 
<a name="l02852"></a>02852 <span class="comment">/* it&apos;s important that the fields of the ldlm_extent structure match</span>
<a name="l02853"></a>02853 <span class="comment"> * the first fields of the ldlm_flock structure because there is only</span>
<a name="l02854"></a>02854 <span class="comment"> * one ldlm_swab routine to process the ldlm_policy_data_t union. if</span>
<a name="l02855"></a>02855 <span class="comment"> * this ever changes we will need to swab the union differently based</span>
<a name="l02856"></a>02856 <span class="comment"> * on the resource type. */</span>
<a name="l02857"></a>02857 
<a name="l02858"></a><a class="code" href="unionldlm__wire__policy__data.html">02858</a> <span class="keyword">typedef</span> <span class="keyword">union </span><a class="code" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> {
<a name="l02859"></a><a class="code" href="unionldlm__wire__policy__data.html#a42662e613a5b12c12386661b519d0bba">02859</a>         <span class="keyword">struct </span><a class="code" href="structldlm__extent.html">ldlm_extent</a>      <a class="code" href="unionldlm__wire__policy__data.html#a42662e613a5b12c12386661b519d0bba">l_extent</a>;
<a name="l02860"></a><a class="code" href="unionldlm__wire__policy__data.html#a81322bc0e3346c02e2a5057e83dac997">02860</a>         <span class="keyword">struct </span><a class="code" href="structldlm__flock__wire.html">ldlm_flock_wire</a>  <a class="code" href="unionldlm__wire__policy__data.html#a81322bc0e3346c02e2a5057e83dac997">l_flock</a>;
<a name="l02861"></a><a class="code" href="unionldlm__wire__policy__data.html#a33a4ba289ddf66f7f011910c81afab8b">02861</a>         <span class="keyword">struct </span><a class="code" href="structldlm__inodebits.html">ldlm_inodebits</a>   <a class="code" href="unionldlm__wire__policy__data.html#a33a4ba289ddf66f7f011910c81afab8b">l_inodebits</a>;
<a name="l02862"></a>02862 } <a class="code" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data_t</a>;
<a name="l02863"></a>02863 
<a name="l02864"></a><a class="code" href="unionldlm__gl__desc.html">02864</a> <span class="keyword">union </span><a class="code" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> {
<a name="l02865"></a><a class="code" href="unionldlm__gl__desc.html#a9cb9af1be9ae52e09b836f6570923b2f">02865</a>         <span class="keyword">struct </span><a class="code" href="structldlm__gl__lquota__desc.html">ldlm_gl_lquota_desc</a>      <a class="code" href="unionldlm__gl__desc.html#a9cb9af1be9ae52e09b836f6570923b2f">lquota_desc</a>;
<a name="l02866"></a>02866 };
<a name="l02867"></a>02867 
<a name="l02868"></a><a class="code" href="group__lustreidl.html#ga9c053c844f0d79b44f18bb65850a6081">02868</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga9c053c844f0d79b44f18bb65850a6081">ldlm_intent_flags</a> {
<a name="l02869"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a7aa4de173c082d80c105b05a30261151">02869</a>         <a class="code" href="packet-lustre_8c.html#a8ada3fda4c053e538aed2ea027a02c72">IT_OPEN</a>        = 0x00000001,
<a name="l02870"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081aaaad3cf71358649371a9cdcb5f10b4d2">02870</a>         <a class="code" href="packet-lustre_8c.html#a8074841aaeebb59152d49ac2c70552e7">IT_CREAT</a>       = 0x00000002,
<a name="l02871"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081aff98340481dc0bc31915d6fe46a006a7">02871</a>         <a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081aff98340481dc0bc31915d6fe46a006a7">IT_OPEN_CREAT</a>  = 0x00000003,
<a name="l02872"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a3327ac20c14eedc4999a4c42c96332b7">02872</a>         <a class="code" href="packet-lustre_8c.html#a808ff94ddae608550d662a16d0b6d041">IT_READDIR</a>     = 0x00000004,
<a name="l02873"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a6aafd11d8bcb8d0130360f5f46a33121">02873</a>         <a class="code" href="packet-lustre_8c.html#acbeec9ce74ca64dd688a410bd97279a0">IT_GETATTR</a>     = 0x00000008,
<a name="l02874"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a59991025eb7910ce1ec12a58ff30a0f5">02874</a>         <a class="code" href="packet-lustre_8c.html#a3966f870e5ac8a44a44faa42c36eedf0">IT_LOOKUP</a>      = 0x00000010,
<a name="l02875"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a2bd7f59fc688d8a0d962f6b469fae959">02875</a>         <a class="code" href="packet-lustre_8c.html#a45763a001dd40d9cc33f259d63d84abd">IT_UNLINK</a>      = 0x00000020,
<a name="l02876"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081acec4edcb56cbe027c70e6f53b73ecce3">02876</a>         <a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081acec4edcb56cbe027c70e6f53b73ecce3">IT_TRUNC</a>       = 0x00000040,
<a name="l02877"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a0a7e5eba6ff3a8e12f594410a5e3b1f8">02877</a>         <a class="code" href="packet-lustre_8c.html#a6d499e10f709bbfadcffbf814b7f8420">IT_GETXATTR</a>    = 0x00000080,
<a name="l02878"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a9c29ec2031870a58b2c8bf812fdd0a35">02878</a>         <a class="code" href="packet-lustre_8c.html#ae84e9f49f278fd1f929523d9ba12f727">IT_EXEC</a>        = 0x00000100,
<a name="l02879"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081aa934e8fdbee334761935902f669761f0">02879</a>         <a class="code" href="packet-lustre_8c.html#a267a43fb4e5f3613ff59584a12ef0123">IT_PIN</a>         = 0x00000200,
<a name="l02880"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a6da3f5e52e6ebfbc8720806973497811">02880</a>         <a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a6da3f5e52e6ebfbc8720806973497811">IT_LAYOUT</a>      = 0x00000400,
<a name="l02881"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a8488afde2459d22a65ed72e67b29f31c">02881</a>         <a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a8488afde2459d22a65ed72e67b29f31c">IT_QUOTA_DQACQ</a> = 0x00000800,
<a name="l02882"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a77c86adea21aa4594787264045fad1aa">02882</a>         <a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081a77c86adea21aa4594787264045fad1aa">IT_QUOTA_CONN</a>  = 0x00001000,
<a name="l02883"></a><a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081af0f1358b1d0be5e8fc6d76be4dfe258b">02883</a>         <a class="code" href="group__lustreidl.html#gga9c053c844f0d79b44f18bb65850a6081af0f1358b1d0be5e8fc6d76be4dfe258b">IT_SETXATTR</a>    = 0x00002000,
<a name="l02884"></a>02884 };
<a name="l02885"></a>02885 
<a name="l02886"></a><a class="code" href="structldlm__intent.html">02886</a> <span class="keyword">struct </span><a class="code" href="structldlm__intent.html">ldlm_intent</a> {
<a name="l02887"></a><a class="code" href="structldlm__intent.html#a41b1682357cf32d469db0872570104ae">02887</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structldlm__intent.html#a41b1682357cf32d469db0872570104ae">opc</a>;
<a name="l02888"></a>02888 };
<a name="l02889"></a>02889 
<a name="l02890"></a><a class="code" href="structldlm__resource__desc.html">02890</a> <span class="keyword">struct </span><a class="code" href="structldlm__resource__desc.html">ldlm_resource_desc</a> {
<a name="l02891"></a><a class="code" href="structldlm__resource__desc.html#a96dfe750266ccbd93bf0705e2fc3aa08">02891</a>         <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>     <a class="code" href="structldlm__resource__desc.html#a96dfe750266ccbd93bf0705e2fc3aa08">lr_type</a>;
<a name="l02892"></a><a class="code" href="structldlm__resource__desc.html#a637a95ea8b29b0087366e7229f410e3d">02892</a>         __u32              <a class="code" href="structldlm__resource__desc.html#a637a95ea8b29b0087366e7229f410e3d">lr_pad</a>; <span class="comment">/* also fix lustre_swab_ldlm_resource_desc */</span>
<a name="l02893"></a><a class="code" href="structldlm__resource__desc.html#a07dda1b3727078781399be820e092cb4">02893</a>         <span class="keyword">struct </span><a class="code" href="structldlm__res__id.html">ldlm_res_id</a> <a class="code" href="structldlm__resource__desc.html#a07dda1b3727078781399be820e092cb4">lr_name</a>;
<a name="l02894"></a>02894 };
<a name="l02895"></a>02895 
<a name="l02896"></a><a class="code" href="structldlm__lock__desc.html">02896</a> <span class="keyword">struct </span><a class="code" href="structldlm__lock__desc.html">ldlm_lock_desc</a> {
<a name="l02897"></a><a class="code" href="structldlm__lock__desc.html#ab45b63e3702f60b662708279aed53e05">02897</a>         <span class="keyword">struct </span><a class="code" href="structldlm__resource__desc.html">ldlm_resource_desc</a> <a class="code" href="structldlm__lock__desc.html#ab45b63e3702f60b662708279aed53e05">l_resource</a>;
<a name="l02898"></a><a class="code" href="structldlm__lock__desc.html#a39fa230b781404c56005f3f6aa79d6dc">02898</a>         <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="code" href="structldlm__lock__desc.html#a39fa230b781404c56005f3f6aa79d6dc">l_req_mode</a>;
<a name="l02899"></a><a class="code" href="structldlm__lock__desc.html#a14a52fe2f2dc1dc3bba4e666de40fddb">02899</a>         <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="code" href="structldlm__lock__desc.html#a14a52fe2f2dc1dc3bba4e666de40fddb">l_granted_mode</a>;
<a name="l02900"></a><a class="code" href="structldlm__lock__desc.html#ae8a9e021dca78428840dc492e9047ec3">02900</a>         <span class="keyword">union </span><a class="code" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> <a class="code" href="structldlm__lock__desc.html#ae8a9e021dca78428840dc492e9047ec3">l_policy_data</a>;
<a name="l02901"></a>02901 };
<a name="l02902"></a>02902 
<a name="l02903"></a><a class="code" href="group__lustreidl.html#ga6f2881f23a5d9483f1b5ab8fedac3b1f">02903</a> <span class="preprocessor">#define LDLM_LOCKREQ_HANDLES 2</span>
<a name="l02904"></a><a class="code" href="group__lustreidl.html#ga851c441de6c56ff7965602a502b069ad">02904</a> <span class="preprocessor"></span><span class="preprocessor">#define LDLM_ENQUEUE_CANCEL_OFF 1</span>
<a name="l02905"></a>02905 <span class="preprocessor"></span>
<a name="l02906"></a><a class="code" href="structldlm__request.html">02906</a> <span class="keyword">struct </span><a class="code" href="structldlm__request.html">ldlm_request</a> {
<a name="l02907"></a><a class="code" href="structldlm__request.html#a382cbc1162f0be77ccca5cbdd3a50dcc">02907</a>         __u32 <a class="code" href="structldlm__request.html#a382cbc1162f0be77ccca5cbdd3a50dcc">lock_flags</a>;
<a name="l02908"></a><a class="code" href="structldlm__request.html#a7de36ab10679c38518c469d3c1fcdae1">02908</a>         __u32 <a class="code" href="structldlm__request.html#a7de36ab10679c38518c469d3c1fcdae1">lock_count</a>;
<a name="l02909"></a><a class="code" href="structldlm__request.html#af1937d4ef40e793629fc1f28225e77b2">02909</a>         <span class="keyword">struct </span><a class="code" href="structldlm__lock__desc.html">ldlm_lock_desc</a> <a class="code" href="structldlm__request.html#af1937d4ef40e793629fc1f28225e77b2">lock_desc</a>;
<a name="l02910"></a><a class="code" href="structldlm__request.html#a0bac0fd47cce5ac5c8719cc4226fd4ad">02910</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structldlm__request.html#a0bac0fd47cce5ac5c8719cc4226fd4ad">lock_handle</a>[<a class="code" href="group__lustreidl.html#ga6f2881f23a5d9483f1b5ab8fedac3b1f">LDLM_LOCKREQ_HANDLES</a>];
<a name="l02911"></a>02911 };
<a name="l02912"></a>02912 
<a name="l02913"></a>02913 <span class="comment">/* If LDLM_ENQUEUE, 1 slot is already occupied, 1 is available.</span>
<a name="l02914"></a>02914 <span class="comment"> * Otherwise, 2 are available. */</span>
<a name="l02915"></a><a class="code" href="group__lustreidl.html#ga807e7624e6678f8e0f26866c97987aad">02915</a> <span class="preprocessor">#define ldlm_request_bufsize(count,type)                                \</span>
<a name="l02916"></a>02916 <span class="preprocessor">({                                                                      \</span>
<a name="l02917"></a>02917 <span class="preprocessor">        int _avail = LDLM_LOCKREQ_HANDLES;                              \</span>
<a name="l02918"></a>02918 <span class="preprocessor">        _avail -= (type == LDLM_ENQUEUE ? LDLM_ENQUEUE_CANCEL_OFF : 0); \</span>
<a name="l02919"></a>02919 <span class="preprocessor">        sizeof(struct ldlm_request) +                                   \</span>
<a name="l02920"></a>02920 <span class="preprocessor">        (count &gt; _avail ? count - _avail : 0) *                         \</span>
<a name="l02921"></a>02921 <span class="preprocessor">        sizeof(struct lustre_handle);                                   \</span>
<a name="l02922"></a>02922 <span class="preprocessor">})</span>
<a name="l02923"></a>02923 <span class="preprocessor"></span>
<a name="l02924"></a><a class="code" href="structldlm__reply.html">02924</a> <span class="keyword">struct </span><a class="code" href="structldlm__reply.html">ldlm_reply</a> {
<a name="l02925"></a><a class="code" href="structldlm__reply.html#a44a8fec4dcf5e9d98e6264f8d90034e6">02925</a>         __u32 <a class="code" href="structldlm__reply.html#a44a8fec4dcf5e9d98e6264f8d90034e6">lock_flags</a>;
<a name="l02926"></a><a class="code" href="structldlm__reply.html#ad7cdd37d341d4760f1d78ab467761011">02926</a>         __u32 <a class="code" href="structldlm__reply.html#ad7cdd37d341d4760f1d78ab467761011">lock_padding</a>;     <span class="comment">/* also fix lustre_swab_ldlm_reply */</span>
<a name="l02927"></a><a class="code" href="structldlm__reply.html#a88f4e75680bfeadb157efd2c34a0f2d9">02927</a>         <span class="keyword">struct </span><a class="code" href="structldlm__lock__desc.html">ldlm_lock_desc</a> <a class="code" href="structldlm__reply.html#a88f4e75680bfeadb157efd2c34a0f2d9">lock_desc</a>;
<a name="l02928"></a><a class="code" href="structldlm__reply.html#a46372fadaa3f50cecb294e44f01c4be5">02928</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a> <a class="code" href="structldlm__reply.html#a46372fadaa3f50cecb294e44f01c4be5">lock_handle</a>;
<a name="l02929"></a><a class="code" href="structldlm__reply.html#ab658a9237128f1196e3913df41eff3be">02929</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>  <a class="code" href="structldlm__reply.html#ab658a9237128f1196e3913df41eff3be">lock_policy_res1</a>;
<a name="l02930"></a><a class="code" href="structldlm__reply.html#a9842c6c8c2c13c68c23f4779a40685a2">02930</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>  <a class="code" href="structldlm__reply.html#a9842c6c8c2c13c68c23f4779a40685a2">lock_policy_res2</a>;
<a name="l02931"></a>02931 };
<a name="l02932"></a>02932 
<a name="l02933"></a><a class="code" href="group__lustreidl.html#ga6eb06b9b5bf03b52ecd74aa7d5ac3860">02933</a> <span class="preprocessor">#define ldlm_flags_to_wire(flags)    ((__u32)(flags))</span>
<a name="l02934"></a><a class="code" href="group__lustreidl.html#ga7a48e18648486b841b484206e1bb263a">02934</a> <span class="preprocessor"></span><span class="preprocessor">#define ldlm_flags_from_wire(flags)  ((__u64)(flags))</span>
<a name="l02935"></a>02935 <span class="preprocessor"></span>
<a name="l02936"></a>02936 <span class="comment">/*</span>
<a name="l02937"></a>02937 <span class="comment"> * Opcodes for mountconf (mgs and mgc)</span>
<a name="l02938"></a>02938 <span class="comment"> */</span>
<a name="l02939"></a><a class="code" href="group__lustreidl.html#ga4a3cabbbc37d10b05e826a5027c76c37">02939</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02940"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37af89277900279cd13e16db2d130291908">02940</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37af89277900279cd13e16db2d130291908">MGS_CONNECT</a> = 250,
<a name="l02941"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37af490966245737dbf5c9335b63605aefc">02941</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37af490966245737dbf5c9335b63605aefc">MGS_DISCONNECT</a>,
<a name="l02942"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37a68ef98de3273bda3dafd28da4492df00">02942</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37a68ef98de3273bda3dafd28da4492df00">MGS_EXCEPTION</a>,         <span class="comment">/* node died, etc. */</span>
<a name="l02943"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37a029c7bdacb8061471ae537d4eff280e3">02943</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37a029c7bdacb8061471ae537d4eff280e3">MGS_TARGET_REG</a>,        <span class="comment">/* whenever target starts up */</span>
<a name="l02944"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37a722bfc0808e7b745ea8ef07170af4157">02944</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37a722bfc0808e7b745ea8ef07170af4157">MGS_TARGET_DEL</a>,
<a name="l02945"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37aac1f2b8d6426c289bf73681df1f71ea9">02945</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37aac1f2b8d6426c289bf73681df1f71ea9">MGS_SET_INFO</a>,
<a name="l02946"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37abceaef2da3be2dfa69bba30204bf40fe">02946</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37abceaef2da3be2dfa69bba30204bf40fe">MGS_CONFIG_READ</a>,
<a name="l02947"></a><a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37ab4e67748a068daf081424de59a241016">02947</a>         <a class="code" href="group__lustreidl.html#gga4a3cabbbc37d10b05e826a5027c76c37ab4e67748a068daf081424de59a241016">MGS_LAST_OPC</a>
<a name="l02948"></a>02948 } <a class="code" href="packet-lustre_8c.html#a4a3cabbbc37d10b05e826a5027c76c37">mgs_cmd_t</a>;
<a name="l02949"></a><a class="code" href="group__lustreidl.html#gafb74c995a6801455771e2308ddaccc40">02949</a> <span class="preprocessor">#define MGS_FIRST_OPC MGS_CONNECT</span>
<a name="l02950"></a>02950 <span class="preprocessor"></span>
<a name="l02951"></a><a class="code" href="group__lustreidl.html#gabd100e26fcdc37dbe09490f88dd86cb9">02951</a> <span class="preprocessor">#define MGS_PARAM_MAXLEN 1024</span>
<a name="l02952"></a><a class="code" href="group__lustreidl.html#ga4cb85526b336ae735acfd14c4ff4c2f1">02952</a> <span class="preprocessor"></span><span class="preprocessor">#define KEY_SET_INFO &quot;set_info&quot;</span>
<a name="l02953"></a>02953 <span class="preprocessor"></span>
<a name="l02954"></a><a class="code" href="structmgs__send__param.html">02954</a> <span class="keyword">struct </span><a class="code" href="structmgs__send__param.html">mgs_send_param</a> {
<a name="l02955"></a><a class="code" href="structmgs__send__param.html#a6232c50d0a173606053110388c0a6505">02955</a>         <span class="keywordtype">char</span>             <a class="code" href="structmgs__send__param.html#a6232c50d0a173606053110388c0a6505">mgs_param</a>[<a class="code" href="group__lustreidl.html#gabd100e26fcdc37dbe09490f88dd86cb9">MGS_PARAM_MAXLEN</a>];
<a name="l02956"></a>02956 };
<a name="l02957"></a>02957 
<a name="l02958"></a>02958 <span class="comment">/* We pass this info to the MGS so it can write config logs */</span>
<a name="l02959"></a><a class="code" href="group__lustreidl.html#gadc4a0cddc1bd5021f980dae0e5afe1a1">02959</a> <span class="preprocessor">#define MTI_NAME_MAXLEN  64</span>
<a name="l02960"></a><a class="code" href="group__lustreidl.html#ga0799cf1bf200daeef78e9159ddf45230">02960</a> <span class="preprocessor"></span><span class="preprocessor">#define MTI_PARAM_MAXLEN 4096</span>
<a name="l02961"></a><a class="code" href="group__lustreidl.html#ga61a8d6a24adae4027846fcde2c759ce5">02961</a> <span class="preprocessor"></span><span class="preprocessor">#define MTI_NIDS_MAX     32</span>
<a name="l02962"></a><a class="code" href="structmgs__target__info.html">02962</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structmgs__target__info.html">mgs_target_info</a> {
<a name="l02963"></a><a class="code" href="structmgs__target__info.html#a3785b30ba59af366bcb99f98b53006ea">02963</a>         __u32            <a class="code" href="structmgs__target__info.html#a3785b30ba59af366bcb99f98b53006ea">mti_lustre_ver</a>;
<a name="l02964"></a><a class="code" href="structmgs__target__info.html#a1404469bf9bb9d09144a197494592875">02964</a>         __u32            <a class="code" href="structmgs__target__info.html#a1404469bf9bb9d09144a197494592875">mti_stripe_index</a>;
<a name="l02965"></a><a class="code" href="structmgs__target__info.html#afbd159f1e2914a7a3cb80f33d82d9b12">02965</a>         __u32            <a class="code" href="structmgs__target__info.html#afbd159f1e2914a7a3cb80f33d82d9b12">mti_config_ver</a>;
<a name="l02966"></a><a class="code" href="structmgs__target__info.html#aef50f50b6db8f64dc2cc822b42c6a63f">02966</a>         __u32            <a class="code" href="structmgs__target__info.html#aef50f50b6db8f64dc2cc822b42c6a63f">mti_flags</a>;
<a name="l02967"></a><a class="code" href="structmgs__target__info.html#a4fb07f821396e99095d4a4ffa8b8c047">02967</a>         __u32            <a class="code" href="structmgs__target__info.html#a4fb07f821396e99095d4a4ffa8b8c047">mti_nid_count</a>;
<a name="l02968"></a><a class="code" href="structmgs__target__info.html#a9eb61d5e55c2bdcb0ba894e596833dbe">02968</a>         __u32            <a class="code" href="structmgs__target__info.html#a9eb61d5e55c2bdcb0ba894e596833dbe">mti_instance</a>; <span class="comment">/* Running instance of target */</span>
<a name="l02969"></a><a class="code" href="structmgs__target__info.html#ab0b41903f35c0630700dadc8f3b07a54">02969</a>         <span class="keywordtype">char</span>             <a class="code" href="structmgs__target__info.html#ab0b41903f35c0630700dadc8f3b07a54">mti_fsname</a>[<a class="code" href="group__lustreidl.html#gadc4a0cddc1bd5021f980dae0e5afe1a1">MTI_NAME_MAXLEN</a>];
<a name="l02970"></a><a class="code" href="structmgs__target__info.html#a34decdeabc34b3078b29a11cc6926331">02970</a>         <span class="keywordtype">char</span>             <a class="code" href="structmgs__target__info.html#a34decdeabc34b3078b29a11cc6926331">mti_svname</a>[<a class="code" href="group__lustreidl.html#gadc4a0cddc1bd5021f980dae0e5afe1a1">MTI_NAME_MAXLEN</a>];
<a name="l02971"></a><a class="code" href="structmgs__target__info.html#a09f4118cfcbfff0672089c88d08f15cc">02971</a>         <span class="keywordtype">char</span>             <a class="code" href="structmgs__target__info.html#a09f4118cfcbfff0672089c88d08f15cc">mti_uuid</a>[<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structobd__uuid.html">obd_uuid</a>)];
<a name="l02972"></a><a class="code" href="structmgs__target__info.html#a0a714f700d17dc58498e26f58126c65f">02972</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>            <a class="code" href="structmgs__target__info.html#a0a714f700d17dc58498e26f58126c65f">mti_nids</a>[<a class="code" href="group__lustreidl.html#ga61a8d6a24adae4027846fcde2c759ce5">MTI_NIDS_MAX</a>];     <span class="comment">/* host nids (lnet_nid_t)*/</span>
<a name="l02973"></a><a class="code" href="structmgs__target__info.html#a8be097a7d357b6b2500b1da40ac08b79">02973</a>         <span class="keywordtype">char</span>             <a class="code" href="structmgs__target__info.html#a8be097a7d357b6b2500b1da40ac08b79">mti_params</a>[<a class="code" href="group__lustreidl.html#ga0799cf1bf200daeef78e9159ddf45230">MTI_PARAM_MAXLEN</a>];
<a name="l02974"></a>02974 };
<a name="l02975"></a>02975 
<a name="l02976"></a><a class="code" href="structmgs__nidtbl__entry.html">02976</a> <span class="keyword">struct </span><a class="code" href="structmgs__nidtbl__entry.html">mgs_nidtbl_entry</a> {
<a name="l02977"></a><a class="code" href="structmgs__nidtbl__entry.html#abaf7e3a3826a2b7a46ec94c9a2811447">02977</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmgs__nidtbl__entry.html#abaf7e3a3826a2b7a46ec94c9a2811447">mne_version</a>;    <span class="comment">/* table version of this entry */</span>
<a name="l02978"></a><a class="code" href="structmgs__nidtbl__entry.html#a76fa149ebbd120407694b8db0e6ac4bf">02978</a>         __u32           <a class="code" href="structmgs__nidtbl__entry.html#a76fa149ebbd120407694b8db0e6ac4bf">mne_instance</a>;   <span class="comment">/* target instance # */</span>
<a name="l02979"></a><a class="code" href="structmgs__nidtbl__entry.html#a14ec94aad67c611dcb33d0b8b76a2955">02979</a>         __u32           <a class="code" href="structmgs__nidtbl__entry.html#a14ec94aad67c611dcb33d0b8b76a2955">mne_index</a>;      <span class="comment">/* target index */</span>
<a name="l02980"></a><a class="code" href="structmgs__nidtbl__entry.html#a18ce27e1d65b1f3db68a1c830751e2ea">02980</a>         __u32           <a class="code" href="structmgs__nidtbl__entry.html#a18ce27e1d65b1f3db68a1c830751e2ea">mne_length</a>;     <span class="comment">/* length of this entry - by bytes */</span>
<a name="l02981"></a><a class="code" href="structmgs__nidtbl__entry.html#ad53f67033c17a0136bbeea951addde43">02981</a>         __u8            <a class="code" href="structmgs__nidtbl__entry.html#ad53f67033c17a0136bbeea951addde43">mne_type</a>;       <span class="comment">/* target type LDD_F_SV_TYPE_OST/MDT */</span>
<a name="l02982"></a><a class="code" href="structmgs__nidtbl__entry.html#a37feeeec964d35261abe75380d6b3a44">02982</a>         __u8            <a class="code" href="structmgs__nidtbl__entry.html#a37feeeec964d35261abe75380d6b3a44">mne_nid_type</a>;   <span class="comment">/* type of nid(mbz). for ipv6. */</span>
<a name="l02983"></a><a class="code" href="structmgs__nidtbl__entry.html#a00e751750b7999bef6e759597c157b74">02983</a>         __u8            <a class="code" href="structmgs__nidtbl__entry.html#a00e751750b7999bef6e759597c157b74">mne_nid_size</a>;   <span class="comment">/* size of each NID, by bytes */</span>
<a name="l02984"></a><a class="code" href="structmgs__nidtbl__entry.html#aa5a433ea62cd1ad02df1bae6dc530faa">02984</a>         __u8            <a class="code" href="structmgs__nidtbl__entry.html#aa5a433ea62cd1ad02df1bae6dc530faa">mne_nid_count</a>;  <span class="comment">/* # of NIDs in buffer */</span>
<a name="l02985"></a>02985         <span class="keyword">union </span>{
<a name="l02986"></a><a class="code" href="structmgs__nidtbl__entry.html#a64da89b36ba6a99d2c4d01c724e79600">02986</a>                 <a class="code" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312" title="Address of an end-point in an LNet network.">lnet_nid_t</a> <a class="code" href="structmgs__nidtbl__entry.html#a64da89b36ba6a99d2c4d01c724e79600">nids</a>[0];     <span class="comment">/* variable size buffer for NIDs. */</span>
<a name="l02987"></a>02987         } <a class="code" href="structmgs__nidtbl__entry.html#afeb30a15efab5b5bb10f53cdb051aa38">u</a>;
<a name="l02988"></a>02988 };
<a name="l02989"></a>02989 
<a name="l02990"></a><a class="code" href="structmgs__config__body.html">02990</a> <span class="keyword">struct </span><a class="code" href="structmgs__config__body.html">mgs_config_body</a> {
<a name="l02991"></a><a class="code" href="structmgs__config__body.html#afaf1300991c0a7beeb2c30726f2a4616">02991</a>         <span class="keywordtype">char</span>     <a class="code" href="structmgs__config__body.html#afaf1300991c0a7beeb2c30726f2a4616">mcb_name</a>[<a class="code" href="group__lustreidl.html#gadc4a0cddc1bd5021f980dae0e5afe1a1">MTI_NAME_MAXLEN</a>]; <span class="comment">/* logname */</span>
<a name="l02992"></a><a class="code" href="structmgs__config__body.html#a9dfd5124b39257825b2666bbf2eee46b">02992</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>    <a class="code" href="structmgs__config__body.html#a9dfd5124b39257825b2666bbf2eee46b">mcb_offset</a>;    <span class="comment">/* next index of config log to request */</span>
<a name="l02993"></a><a class="code" href="structmgs__config__body.html#a88c2299bba7bd58bc1d3cbab443ce667">02993</a>         __u16    <a class="code" href="structmgs__config__body.html#a88c2299bba7bd58bc1d3cbab443ce667">mcb_type</a>;      <span class="comment">/* type of log: CONFIG_T_[CONFIG|RECOVER] */</span>
<a name="l02994"></a><a class="code" href="structmgs__config__body.html#a16cef57a64494809627eb88e41aca42b">02994</a>         __u8     <a class="code" href="structmgs__config__body.html#a16cef57a64494809627eb88e41aca42b">mcb_reserved</a>;
<a name="l02995"></a><a class="code" href="structmgs__config__body.html#a545f39e5973fc8b4cb4eb39a38c3ceef">02995</a>         __u8     <a class="code" href="structmgs__config__body.html#a545f39e5973fc8b4cb4eb39a38c3ceef">mcb_bits</a>;      <span class="comment">/* bits unit size of config log */</span>
<a name="l02996"></a><a class="code" href="structmgs__config__body.html#a894300267e2c12ffdc912cfbcfa379e1">02996</a>         __u32    <a class="code" href="structmgs__config__body.html#a894300267e2c12ffdc912cfbcfa379e1">mcb_units</a>;     <span class="comment">/* # of units for bulk transfer */</span>
<a name="l02997"></a>02997 };
<a name="l02998"></a>02998 
<a name="l02999"></a><a class="code" href="structmgs__config__res.html">02999</a> <span class="keyword">struct </span><a class="code" href="structmgs__config__res.html">mgs_config_res</a> {
<a name="l03000"></a><a class="code" href="structmgs__config__res.html#aac190f8a03fa3e6eb82caa3b96586f52">03000</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>    <a class="code" href="structmgs__config__res.html#aac190f8a03fa3e6eb82caa3b96586f52">mcr_offset</a>;    <span class="comment">/* index of last config log */</span>
<a name="l03001"></a><a class="code" href="structmgs__config__res.html#a2cf5ccb3c70ce258adc4194e438ff985">03001</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>    <a class="code" href="structmgs__config__res.html#a2cf5ccb3c70ce258adc4194e438ff985">mcr_size</a>;      <span class="comment">/* size of the log */</span>
<a name="l03002"></a>03002 };
<a name="l03003"></a>03003 
<a name="l03004"></a>03004 <span class="comment">/* Config marker flags (in config log) */</span>
<a name="l03005"></a><a class="code" href="group__lustreidl.html#gad8787b65ab0ee8604faec0caa2d94b69">03005</a> <span class="preprocessor">#define CM_START       0x01</span>
<a name="l03006"></a><a class="code" href="group__lustreidl.html#ga3f2e6841a31dd2a65d3f086718f2a568">03006</a> <span class="preprocessor"></span><span class="preprocessor">#define CM_END         0x02</span>
<a name="l03007"></a><a class="code" href="group__lustreidl.html#ga72cead76aca70ad9be870caafd1ae685">03007</a> <span class="preprocessor"></span><span class="preprocessor">#define CM_SKIP        0x04</span>
<a name="l03008"></a><a class="code" href="group__lustreidl.html#gad3ad8b2f84fd89e0ced4e100ec19134f">03008</a> <span class="preprocessor"></span><span class="preprocessor">#define CM_UPGRADE146  0x08</span>
<a name="l03009"></a><a class="code" href="group__lustreidl.html#ga42a3f6369aa40820783f1ded24e52b79">03009</a> <span class="preprocessor"></span><span class="preprocessor">#define CM_EXCLUDE     0x10</span>
<a name="l03010"></a><a class="code" href="group__lustreidl.html#gaaa17ad3d9e7659e4f6c9040a02f5b6bc">03010</a> <span class="preprocessor"></span><span class="preprocessor">#define CM_START_SKIP (CM_START | CM_SKIP)</span>
<a name="l03011"></a>03011 <span class="preprocessor"></span>
<a name="l03012"></a><a class="code" href="structcfg__marker.html">03012</a> <span class="keyword">struct </span><a class="code" href="structcfg__marker.html">cfg_marker</a> {
<a name="l03013"></a><a class="code" href="structcfg__marker.html#a161bc07cd9cc4f2ba9dd8fd982d84a20">03013</a>         __u32   <a class="code" href="structcfg__marker.html#a161bc07cd9cc4f2ba9dd8fd982d84a20">cm_step</a>;       <span class="comment">/* aka config version */</span>
<a name="l03014"></a><a class="code" href="structcfg__marker.html#ad3b70720275fe56239b51c07a761aa27">03014</a>         __u32   <a class="code" href="structcfg__marker.html#ad3b70720275fe56239b51c07a761aa27">cm_flags</a>;
<a name="l03015"></a><a class="code" href="structcfg__marker.html#a2ab1353ce6b7d00c9ec0ab50bfafc979">03015</a>         __u32   <a class="code" href="structcfg__marker.html#a2ab1353ce6b7d00c9ec0ab50bfafc979">cm_vers</a>;       <span class="comment">/* lustre release version number */</span>
<a name="l03016"></a><a class="code" href="structcfg__marker.html#a1a3a466713f385f5f1262f9e4a30d356">03016</a>         __u32   <a class="code" href="structcfg__marker.html#a1a3a466713f385f5f1262f9e4a30d356">cm_padding</a>;    <span class="comment">/* 64 bit align */</span>
<a name="l03017"></a><a class="code" href="structcfg__marker.html#a01475e8a8476a0b46cb71a100e438693">03017</a>         __s64   <a class="code" href="structcfg__marker.html#a01475e8a8476a0b46cb71a100e438693">cm_createtime</a>; <span class="comment">/*when this record was first created */</span>
<a name="l03018"></a><a class="code" href="structcfg__marker.html#ab99ca4e10d6e54137a8b4a88190adcde">03018</a>         __s64   <a class="code" href="structcfg__marker.html#ab99ca4e10d6e54137a8b4a88190adcde">cm_canceltime</a>; <span class="comment">/*when this record is no longer valid*/</span>
<a name="l03019"></a><a class="code" href="structcfg__marker.html#aaf2d64f96c6a9e3ce6b97c67dd7777a6">03019</a>         <span class="keywordtype">char</span>    <a class="code" href="structcfg__marker.html#aaf2d64f96c6a9e3ce6b97c67dd7777a6">cm_tgtname</a>[<a class="code" href="group__lustreidl.html#gadc4a0cddc1bd5021f980dae0e5afe1a1">MTI_NAME_MAXLEN</a>];
<a name="l03020"></a><a class="code" href="structcfg__marker.html#af5f78ef7ec0b3a56d92bf8a05cbb1853">03020</a>         <span class="keywordtype">char</span>    <a class="code" href="structcfg__marker.html#af5f78ef7ec0b3a56d92bf8a05cbb1853">cm_comment</a>[<a class="code" href="group__lustreidl.html#gadc4a0cddc1bd5021f980dae0e5afe1a1">MTI_NAME_MAXLEN</a>];
<a name="l03021"></a>03021 };
<a name="l03022"></a>03022 
<a name="l03023"></a>03023 <span class="comment">/*</span>
<a name="l03024"></a>03024 <span class="comment"> * Opcodes for multiple servers.</span>
<a name="l03025"></a>03025 <span class="comment"> */</span>
<a name="l03026"></a>03026 
<a name="l03027"></a><a class="code" href="group__lustreidl.html#ga1b9655fabd4bfdcd6a4518355b6ddbdd">03027</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l03028"></a><a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbddaadb06a4d64d7234e04ff5c5000a055c6">03028</a>         <a class="code" href="packet-lustre_8c.html#a54e5c4528c1781401f73f51e2b705292">OBD_PING</a> = 400,
<a name="l03029"></a><a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbddab0f201a2f521d4e62ee465335d3196d0">03029</a>         <a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbddab0f201a2f521d4e62ee465335d3196d0">OBD_LOG_CANCEL</a>,
<a name="l03030"></a><a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbdda2b0f08ef6a5f6642b411b8e9f3c5ab9e">03030</a>         <a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbdda2b0f08ef6a5f6642b411b8e9f3c5ab9e">OBD_QC_CALLBACK</a>, <span class="comment">/* not used since 2.4 */</span>
<a name="l03031"></a><a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbdda5ef64a1015e660138bb2ca699fd73fd8">03031</a>         <a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbdda5ef64a1015e660138bb2ca699fd73fd8">OBD_IDX_READ</a>,
<a name="l03032"></a><a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbdda126e321cef7e32cb1fa5a8c4407aaba7">03032</a>         <a class="code" href="group__lustreidl.html#gga1b9655fabd4bfdcd6a4518355b6ddbdda126e321cef7e32cb1fa5a8c4407aaba7">OBD_LAST_OPC</a>
<a name="l03033"></a>03033 } <a class="code" href="packet-lustre_8c.html#a1b9655fabd4bfdcd6a4518355b6ddbdd">obd_cmd_t</a>;
<a name="l03034"></a><a class="code" href="group__lustreidl.html#ga21f9cb722fcf1788068607502b814bbc">03034</a> <span class="preprocessor">#define OBD_FIRST_OPC OBD_PING</span>
<a name="l03035"></a>03035 <span class="preprocessor"></span>
<a name="l03043"></a><a class="code" href="group__lustreidl.html#gaedddc461eb6cbba1f4f39241cabf24f1">03043</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gaedddc461eb6cbba1f4f39241cabf24f1" title="llog contexts indices.">llog_ctxt_id</a> {
<a name="l03044"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1aa86bccc8d1e442ef9566701c00aedb55">03044</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1aa86bccc8d1e442ef9566701c00aedb55">LLOG_CONFIG_ORIG_CTXT</a>  =  0,
<a name="l03045"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a87a1f5f814cdf22cb02fc51243bed054">03045</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a87a1f5f814cdf22cb02fc51243bed054">LLOG_CONFIG_REPL_CTXT</a> = 1,
<a name="l03046"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1aca4d2db1abcbf2ac690691e763964f4c">03046</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1aca4d2db1abcbf2ac690691e763964f4c">LLOG_MDS_OST_ORIG_CTXT</a> = 2,
<a name="l03047"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1ae7303e288cebe117baf819382d17a25d">03047</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1ae7303e288cebe117baf819382d17a25d">LLOG_MDS_OST_REPL_CTXT</a> = 3, <span class="comment">/* kept just to avoid re-assignment */</span>
<a name="l03048"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a52e9ec3b07646ccdfb1f8a3d3e19ab07">03048</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a52e9ec3b07646ccdfb1f8a3d3e19ab07">LLOG_SIZE_ORIG_CTXT</a> = 4,
<a name="l03049"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a4623cb81ff0b5fead92b3ea48bf8cc26">03049</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a4623cb81ff0b5fead92b3ea48bf8cc26">LLOG_SIZE_REPL_CTXT</a> = 5,
<a name="l03050"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a962413224ddb80690d73e5b3b20bc414">03050</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a962413224ddb80690d73e5b3b20bc414">LLOG_TEST_ORIG_CTXT</a> = 8,
<a name="l03051"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a83fec70055645b5e675f70b7db3f013b">03051</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a83fec70055645b5e675f70b7db3f013b">LLOG_TEST_REPL_CTXT</a> = 9, <span class="comment">/* kept just to avoid re-assignment */</span>
<a name="l03052"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a41464bd8c4b12353cb8ba20d3909b70c">03052</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a41464bd8c4b12353cb8ba20d3909b70c" title="changelog generation on mdd">LLOG_CHANGELOG_ORIG_CTXT</a> = 12, 
<a name="l03053"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a48c3e8ac73a4d4b480a93cdf51b86c60">03053</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a48c3e8ac73a4d4b480a93cdf51b86c60" title="changelog access on clients">LLOG_CHANGELOG_REPL_CTXT</a> = 13, 
<a name="l03054"></a>03054         <span class="comment">/* for multiple changelog consumers */</span>
<a name="l03055"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a5da2a9032fe555789718dad2651a69dc">03055</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a5da2a9032fe555789718dad2651a69dc">LLOG_CHANGELOG_USER_ORIG_CTXT</a> = 14,
<a name="l03056"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a2954ceb36259e9b4d7f5ad60350fcdc0">03056</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a2954ceb36259e9b4d7f5ad60350fcdc0" title="agent requests generation on cdt">LLOG_AGENT_ORIG_CTXT</a> = 15, 
<a name="l03057"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1aa83d9474623b8f7b49926d2e9c20ea32">03057</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1aa83d9474623b8f7b49926d2e9c20ea32">LLOG_UPDATELOG_ORIG_CTXT</a> = 16, <span class="comment">/* update log */</span>
<a name="l03058"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1ae5443fb6270f4e6b3b5662e387f5f7ec">03058</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1ae5443fb6270f4e6b3b5662e387f5f7ec">LLOG_UPDATELOG_REPL_CTXT</a> = 17, <span class="comment">/* update log */</span>
<a name="l03059"></a><a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a8b20f3ec9ea67643038ef255c98d68f3">03059</a>         <a class="code" href="group__lustreidl.html#ggaedddc461eb6cbba1f4f39241cabf24f1a8b20f3ec9ea67643038ef255c98d68f3">LLOG_MAX_CTXTS</a>
<a name="l03060"></a>03060 };
<a name="l03061"></a>03061 
<a name="l03063"></a><a class="code" href="structllog__logid.html">03063</a> <span class="keyword">struct </span><a class="code" href="structllog__logid.html" title="Identifier for a single log object.">llog_logid</a> {
<a name="l03064"></a><a class="code" href="structllog__logid.html#a49d0055dc4c80c98d931f4a7e78c5c70">03064</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a>           <a class="code" href="structllog__logid.html#a49d0055dc4c80c98d931f4a7e78c5c70">lgl_oi</a>;
<a name="l03065"></a><a class="code" href="structllog__logid.html#ad5c09437286c500a5f9b3e14b83d914d">03065</a>         __u32                   <a class="code" href="structllog__logid.html#ad5c09437286c500a5f9b3e14b83d914d">lgl_ogen</a>;
<a name="l03066"></a>03066 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03067"></a>03067 
<a name="l03069"></a><a class="code" href="group__lustreidl.html#ga617d8516fe0e8f8919abdf7616c540e2">03069</a> <span class="preprocessor">#define CATLIST &quot;CATALOGS&quot;</span>
<a name="l03070"></a><a class="code" href="structllog__catid.html">03070</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structllog__catid.html">llog_catid</a> {
<a name="l03071"></a><a class="code" href="structllog__catid.html#a81c7e4302728b4bf63a9bfc027e9680c">03071</a>         <span class="keyword">struct </span><a class="code" href="structllog__logid.html" title="Identifier for a single log object.">llog_logid</a>       <a class="code" href="structllog__catid.html#a81c7e4302728b4bf63a9bfc027e9680c">lci_logid</a>;
<a name="l03072"></a><a class="code" href="structllog__catid.html#ab36e35a2a52a685cf4bc116bb502da76">03072</a>         __u32                   <a class="code" href="structllog__catid.html#ab36e35a2a52a685cf4bc116bb502da76">lci_padding1</a>;
<a name="l03073"></a><a class="code" href="structllog__catid.html#ac6efc709df715415153871a6fbce3dc9">03073</a>         __u32                   <a class="code" href="structllog__catid.html#ac6efc709df715415153871a6fbce3dc9">lci_padding2</a>;
<a name="l03074"></a><a class="code" href="structllog__catid.html#a727d3933d8c2fb2f272470df15a65900">03074</a>         __u32                   <a class="code" href="structllog__catid.html#a727d3933d8c2fb2f272470df15a65900">lci_padding3</a>;
<a name="l03075"></a>03075 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03076"></a>03076 
<a name="l03077"></a>03077 <span class="comment">/* Log data record types - there is no specific reason that these need to</span>
<a name="l03078"></a>03078 <span class="comment"> * be related to the RPC opcodes, but no reason not to (may be handy later?)</span>
<a name="l03079"></a>03079 <span class="comment"> */</span>
<a name="l03080"></a><a class="code" href="group__lustreidl.html#ga6baf440130dcd8d326dac713ea2f2d3c">03080</a> <span class="preprocessor">#define LLOG_OP_MAGIC 0x10600000</span>
<a name="l03081"></a><a class="code" href="group__lustreidl.html#ga6ef1bec9d284bd8e296a1036182f8f00">03081</a> <span class="preprocessor"></span><span class="preprocessor">#define LLOG_OP_MASK  0xfff00000</span>
<a name="l03082"></a>03082 <span class="preprocessor"></span>
<a name="l03083"></a><a class="code" href="group__lustreidl.html#ga46267c71f9f2221271c977534b08c789">03083</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l03084"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789acf4798a9f25c1514804d1a93b0eb021a">03084</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789acf4798a9f25c1514804d1a93b0eb021a">LLOG_PAD_MAGIC</a>          = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x00000,
<a name="l03085"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a49d04edbf12cb026cdca52aac4793758">03085</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a49d04edbf12cb026cdca52aac4793758">OST_SZ_REC</a>              = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x00f00,
<a name="l03086"></a>03086         <span class="comment">/* OST_RAID1_REC        = LLOG_OP_MAGIC | 0x01000, never used */</span>
<a name="l03087"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a6cf0c614d979b5b008d42324f74e0efc">03087</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a6cf0c614d979b5b008d42324f74e0efc">MDS_UNLINK_REC</a>          = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x10000 | (<a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a943b3833166c1d5bbfdd82db81553065">MDS_REINT</a> &lt;&lt; 8) |
<a name="l03088"></a>03088                                   <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a61703b92eaf3659dac19c144aface9a3">REINT_UNLINK</a>, <span class="comment">/* obsolete after 2.5.0 */</span>
<a name="l03089"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789ac6d595ed7fb870e652316ee7811a4511">03089</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789ac6d595ed7fb870e652316ee7811a4511">MDS_UNLINK64_REC</a>        = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x90000 | (<a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a943b3833166c1d5bbfdd82db81553065">MDS_REINT</a> &lt;&lt; 8) |
<a name="l03090"></a>03090                                   <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965a61703b92eaf3659dac19c144aface9a3">REINT_UNLINK</a>,
<a name="l03091"></a>03091         <span class="comment">/* MDS_SETATTR_REC      = LLOG_OP_MAGIC | 0x12401, obsolete 1.8.0 */</span>
<a name="l03092"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789acd875bef49c56d9c16e9a63ef696ec8a">03092</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789acd875bef49c56d9c16e9a63ef696ec8a">MDS_SETATTR64_REC</a>       = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x90000 | (<a class="code" href="group__lustreidl.html#ggafb46b2fd1532fecf64a120ca96d31c25a943b3833166c1d5bbfdd82db81553065">MDS_REINT</a> &lt;&lt; 8) |
<a name="l03093"></a>03093                                   <a class="code" href="group__lustreidl.html#ggacc5c69011af4bbd5cf9dd822951bb965af0326a11d9bfd0156277c09046260312">REINT_SETATTR</a>,
<a name="l03094"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a3310256784a7b9f41d7215ba2a959576">03094</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a3310256784a7b9f41d7215ba2a959576">OBD_CFG_REC</a>             = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x20000,
<a name="l03095"></a>03095         <span class="comment">/* PTL_CFG_REC          = LLOG_OP_MAGIC | 0x30000, obsolete 1.4.0 */</span>
<a name="l03096"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789ad83c31c58b7d5366db644adf1dd3d906">03096</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789ad83c31c58b7d5366db644adf1dd3d906">LLOG_GEN_REC</a>            = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x40000,
<a name="l03097"></a>03097         <span class="comment">/* LLOG_JOIN_REC        = LLOG_OP_MAGIC | 0x50000, obsolete  1.8.0 */</span>
<a name="l03098"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789afbee03c1e33b5db17f423185d9a503f7">03098</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789afbee03c1e33b5db17f423185d9a503f7">CHANGELOG_REC</a>           = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x60000,
<a name="l03099"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a489034da829dcd1d7362c760c2898417">03099</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a489034da829dcd1d7362c760c2898417">CHANGELOG_USER_REC</a>      = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x70000,
<a name="l03100"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a068db67db150d1d0745675987111a428">03100</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a068db67db150d1d0745675987111a428">HSM_AGENT_REC</a>           = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x80000,
<a name="l03101"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a6be1869237b605d77a630cbf0d6a9b14">03101</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789a6be1869237b605d77a630cbf0d6a9b14">UPDATE_REC</a>              = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0xa0000,
<a name="l03102"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789aadd54f90fcbe0910db4f606feaba5e98">03102</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789aadd54f90fcbe0910db4f606feaba5e98">LLOG_HDR_MAGIC</a>          = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x45539,
<a name="l03103"></a><a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789ab129649a06968f909cf43e2705008040">03103</a>         <a class="code" href="group__lustreidl.html#gga46267c71f9f2221271c977534b08c789ab129649a06968f909cf43e2705008040">LLOG_LOGID_MAGIC</a>        = <a class="code" href="packet-lustre_8c.html#a6baf440130dcd8d326dac713ea2f2d3c">LLOG_OP_MAGIC</a> | 0x4553b,
<a name="l03104"></a>03104 } <a class="code" href="packet-lustre_8c.html#a46267c71f9f2221271c977534b08c789">llog_op_type</a>;
<a name="l03105"></a>03105 
<a name="l03106"></a><a class="code" href="group__lustreidl.html#ga666878e4d20b639315983ac0217a614b">03106</a> <span class="preprocessor">#define LLOG_REC_HDR_NEEDS_SWABBING(r) \</span>
<a name="l03107"></a>03107 <span class="preprocessor">        (((r)-&gt;lrh_type &amp; __swab32(LLOG_OP_MASK)) == __swab32(LLOG_OP_MAGIC))</span>
<a name="l03108"></a>03108 <span class="preprocessor"></span>
<a name="l03113"></a><a class="code" href="structllog__rec__hdr.html">03113</a> <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a> {
<a name="l03114"></a><a class="code" href="structllog__rec__hdr.html#ad78574b9a0f5e0400ba90c351a0add96">03114</a>         __u32   <a class="code" href="structllog__rec__hdr.html#ad78574b9a0f5e0400ba90c351a0add96">lrh_len</a>;
<a name="l03115"></a><a class="code" href="structllog__rec__hdr.html#a553d87b769afcdf9b1f3fe3328268fdc">03115</a>         __u32   <a class="code" href="structllog__rec__hdr.html#a553d87b769afcdf9b1f3fe3328268fdc">lrh_index</a>;
<a name="l03116"></a><a class="code" href="structllog__rec__hdr.html#aed3a83bae3600611db70e81a693e2ec4">03116</a>         __u32   <a class="code" href="structllog__rec__hdr.html#aed3a83bae3600611db70e81a693e2ec4">lrh_type</a>;
<a name="l03117"></a><a class="code" href="structllog__rec__hdr.html#a8701d04e8e4ebb8a682d8a12e1eee0b1">03117</a>         __u32   <a class="code" href="structllog__rec__hdr.html#a8701d04e8e4ebb8a682d8a12e1eee0b1">lrh_id</a>;
<a name="l03118"></a>03118 };
<a name="l03119"></a>03119 
<a name="l03120"></a><a class="code" href="structllog__rec__tail.html">03120</a> <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a> {
<a name="l03121"></a><a class="code" href="structllog__rec__tail.html#ad666089e89d526dbce4e87474c79c306">03121</a>         __u32   <a class="code" href="structllog__rec__tail.html#ad666089e89d526dbce4e87474c79c306">lrt_len</a>;
<a name="l03122"></a><a class="code" href="structllog__rec__tail.html#abb1bf6ee7e90ecee7664e655754b42fb">03122</a>         __u32   <a class="code" href="structllog__rec__tail.html#abb1bf6ee7e90ecee7664e655754b42fb">lrt_index</a>;
<a name="l03123"></a>03123 };
<a name="l03124"></a>03124 
<a name="l03125"></a>03125 <span class="comment">/* Where data follow just after header */</span>
<a name="l03126"></a><a class="code" href="group__lustreidl.html#ga8a7998bb02b3d54dfa21f67824abbc1d">03126</a> <span class="preprocessor">#define REC_DATA(ptr)                                           \</span>
<a name="l03127"></a>03127 <span class="preprocessor">        ((void *)((char *)ptr + sizeof(struct llog_rec_hdr)))</span>
<a name="l03128"></a>03128 <span class="preprocessor"></span>
<a name="l03129"></a><a class="code" href="group__lustreidl.html#ga788d92046ec2910773ff17ad7e99d2e9">03129</a> <span class="preprocessor">#define REC_DATA_LEN(rec)                                       \</span>
<a name="l03130"></a>03130 <span class="preprocessor">        (rec-&gt;lrh_len - sizeof(struct llog_rec_hdr) -           \</span>
<a name="l03131"></a>03131 <span class="preprocessor">         sizeof(struct llog_rec_tail))</span>
<a name="l03132"></a>03132 <span class="preprocessor"></span>
<a name="l03133"></a><a class="code" href="group__lustreidl.html#gab7198bf0b21de598e6134d27b59c9ebe">03133</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="group__lustreidl.html#gab7198bf0b21de598e6134d27b59c9ebe">rec_tail</a>(<span class="keyword">struct</span> <a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a> *rec)
<a name="l03134"></a>03134 {
<a name="l03135"></a>03135         <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)((<span class="keywordtype">char</span> *)rec + rec-&gt;<a class="code" href="structllog__rec__hdr.html#ad78574b9a0f5e0400ba90c351a0add96">lrh_len</a> -
<a name="l03136"></a>03136                         <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>));
<a name="l03137"></a>03137 }
<a name="l03138"></a>03138 
<a name="l03139"></a><a class="code" href="structllog__logid__rec.html">03139</a> <span class="keyword">struct </span><a class="code" href="structllog__logid__rec.html">llog_logid_rec</a> {
<a name="l03140"></a><a class="code" href="structllog__logid__rec.html#aab1a578cebcec6c2c8a0a9f512623521">03140</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__logid__rec.html#aab1a578cebcec6c2c8a0a9f512623521">lid_hdr</a>;
<a name="l03141"></a><a class="code" href="structllog__logid__rec.html#a28432fbfab23b63747c3028c0ab85d85">03141</a>         <span class="keyword">struct </span><a class="code" href="structllog__logid.html" title="Identifier for a single log object.">llog_logid</a>       <a class="code" href="structllog__logid__rec.html#a28432fbfab23b63747c3028c0ab85d85">lid_id</a>;
<a name="l03142"></a><a class="code" href="structllog__logid__rec.html#acede9ae171f374ea03608cc2aa15fa22">03142</a>         __u32                   <a class="code" href="structllog__logid__rec.html#acede9ae171f374ea03608cc2aa15fa22">lid_padding1</a>;
<a name="l03143"></a><a class="code" href="structllog__logid__rec.html#a2820c1e160c8d3dbbd099ab4c114d024">03143</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__logid__rec.html#a2820c1e160c8d3dbbd099ab4c114d024">lid_padding2</a>;
<a name="l03144"></a><a class="code" href="structllog__logid__rec.html#a4f928147ba0fb79f499bd5dbe6090be4">03144</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__logid__rec.html#a4f928147ba0fb79f499bd5dbe6090be4">lid_padding3</a>;
<a name="l03145"></a><a class="code" href="structllog__logid__rec.html#af79f02840c36a7e7ff764bbe5efa85ce">03145</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__logid__rec.html#af79f02840c36a7e7ff764bbe5efa85ce">lid_tail</a>;
<a name="l03146"></a>03146 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03147"></a>03147 
<a name="l03148"></a><a class="code" href="structllog__unlink__rec.html">03148</a> <span class="keyword">struct </span><a class="code" href="structllog__unlink__rec.html">llog_unlink_rec</a> {
<a name="l03149"></a><a class="code" href="structllog__unlink__rec.html#a7708ba8255adef9ea9f42eae6f67cdc9">03149</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__unlink__rec.html#a7708ba8255adef9ea9f42eae6f67cdc9">lur_hdr</a>;
<a name="l03150"></a><a class="code" href="structllog__unlink__rec.html#a0b024ee717f34dd1813a873e54d6d244">03150</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__unlink__rec.html#a0b024ee717f34dd1813a873e54d6d244">lur_oid</a>;
<a name="l03151"></a><a class="code" href="structllog__unlink__rec.html#a1e9c2ba28d33a952df2975e5c3260695">03151</a>         __u32                   <a class="code" href="structllog__unlink__rec.html#a1e9c2ba28d33a952df2975e5c3260695">lur_oseq</a>;
<a name="l03152"></a><a class="code" href="structllog__unlink__rec.html#a15ce6a4fe649013e835a9b503d51c408">03152</a>         __u32                   <a class="code" href="structllog__unlink__rec.html#a15ce6a4fe649013e835a9b503d51c408">lur_count</a>;
<a name="l03153"></a><a class="code" href="structllog__unlink__rec.html#a17d34676d24db833af78c7ebf7a43b16">03153</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__unlink__rec.html#a17d34676d24db833af78c7ebf7a43b16">lur_tail</a>;
<a name="l03154"></a>03154 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03155"></a>03155 
<a name="l03156"></a><a class="code" href="structllog__unlink64__rec.html">03156</a> <span class="keyword">struct </span><a class="code" href="structllog__unlink64__rec.html">llog_unlink64_rec</a> {
<a name="l03157"></a><a class="code" href="structllog__unlink64__rec.html#a3862a7f07f6fcab29675c90bb518a2e8">03157</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__unlink64__rec.html#a3862a7f07f6fcab29675c90bb518a2e8">lur_hdr</a>;
<a name="l03158"></a><a class="code" href="structllog__unlink64__rec.html#aea726b078555b5f16b52f6409bbaba4b">03158</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>           <a class="code" href="structllog__unlink64__rec.html#aea726b078555b5f16b52f6409bbaba4b">lur_fid</a>;
<a name="l03159"></a><a class="code" href="structllog__unlink64__rec.html#a28cc84803b7ef0e7cceae5ca019a073c">03159</a>         __u32                   <a class="code" href="structllog__unlink64__rec.html#a28cc84803b7ef0e7cceae5ca019a073c">lur_count</a>; <span class="comment">/* to destroy the lost precreated */</span>
<a name="l03160"></a><a class="code" href="structllog__unlink64__rec.html#ac72beb71a8135e09f6d6d435ffea2ed8">03160</a>         __u32                   <a class="code" href="structllog__unlink64__rec.html#ac72beb71a8135e09f6d6d435ffea2ed8">lur_padding1</a>;
<a name="l03161"></a><a class="code" href="structllog__unlink64__rec.html#a646bc116f3581680898f080376438d7f">03161</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__unlink64__rec.html#a646bc116f3581680898f080376438d7f">lur_padding2</a>;
<a name="l03162"></a><a class="code" href="structllog__unlink64__rec.html#a10c46ce14b799953112067df7c2e0c26">03162</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__unlink64__rec.html#a10c46ce14b799953112067df7c2e0c26">lur_padding3</a>;
<a name="l03163"></a><a class="code" href="structllog__unlink64__rec.html#acf7027e2e8030e5cbcdedd939860288d">03163</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__unlink64__rec.html#acf7027e2e8030e5cbcdedd939860288d">lur_tail</a>;
<a name="l03164"></a>03164 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03165"></a>03165 
<a name="l03166"></a><a class="code" href="structllog__setattr64__rec.html">03166</a> <span class="keyword">struct </span><a class="code" href="structllog__setattr64__rec.html">llog_setattr64_rec</a> {
<a name="l03167"></a><a class="code" href="structllog__setattr64__rec.html#a2f650e4f62182b591f16dea07ca8eb2d">03167</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__setattr64__rec.html#a2f650e4f62182b591f16dea07ca8eb2d">lsr_hdr</a>;
<a name="l03168"></a><a class="code" href="structllog__setattr64__rec.html#a22427ac02a8f4e3f6d8883b6a534893b">03168</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a>           <a class="code" href="structllog__setattr64__rec.html#a22427ac02a8f4e3f6d8883b6a534893b">lsr_oi</a>;
<a name="l03169"></a><a class="code" href="structllog__setattr64__rec.html#a496c9b1160faa2c950cc63c8ad0dfcef">03169</a>         __u32                   <a class="code" href="structllog__setattr64__rec.html#a496c9b1160faa2c950cc63c8ad0dfcef">lsr_uid</a>;
<a name="l03170"></a><a class="code" href="structllog__setattr64__rec.html#a2853b6f19c488e07d78498c3b1b9ed7f">03170</a>         __u32                   <a class="code" href="structllog__setattr64__rec.html#a2853b6f19c488e07d78498c3b1b9ed7f">lsr_uid_h</a>;
<a name="l03171"></a><a class="code" href="structllog__setattr64__rec.html#a9f1a8634a25d246aade1ff1bacc41973">03171</a>         __u32                   <a class="code" href="structllog__setattr64__rec.html#a9f1a8634a25d246aade1ff1bacc41973">lsr_gid</a>;
<a name="l03172"></a><a class="code" href="structllog__setattr64__rec.html#adf1655b74855c8d596ac46cc4a88f1ee">03172</a>         __u32                   <a class="code" href="structllog__setattr64__rec.html#adf1655b74855c8d596ac46cc4a88f1ee">lsr_gid_h</a>;
<a name="l03173"></a><a class="code" href="structllog__setattr64__rec.html#a384e625e0e77a9fd884311f1f73c8645">03173</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__setattr64__rec.html#a384e625e0e77a9fd884311f1f73c8645">lsr_valid</a>;
<a name="l03174"></a><a class="code" href="structllog__setattr64__rec.html#adedaee716ec1faa7d4124dc7553898a0">03174</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__setattr64__rec.html#adedaee716ec1faa7d4124dc7553898a0">lsr_tail</a>;
<a name="l03175"></a>03175 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03176"></a>03176 
<a name="l03177"></a><a class="code" href="structllog__size__change__rec.html">03177</a> <span class="keyword">struct </span><a class="code" href="structllog__size__change__rec.html">llog_size_change_rec</a> {
<a name="l03178"></a><a class="code" href="structllog__size__change__rec.html#a77ce64d31997006e67b51ea7b21df9d8">03178</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__size__change__rec.html#a77ce64d31997006e67b51ea7b21df9d8">lsc_hdr</a>;
<a name="l03179"></a><a class="code" href="structllog__size__change__rec.html#a47bef2fea848b81c94c7c37d56fa72f5">03179</a>         <span class="keyword">struct </span><a class="code" href="structll__fid.html">ll_fid</a>           <a class="code" href="structllog__size__change__rec.html#a47bef2fea848b81c94c7c37d56fa72f5">lsc_fid</a>;
<a name="l03180"></a><a class="code" href="structllog__size__change__rec.html#a476072aca6a8f2f08a67700d503b048e">03180</a>         __u32                   <a class="code" href="structllog__size__change__rec.html#a476072aca6a8f2f08a67700d503b048e">lsc_ioepoch</a>;
<a name="l03181"></a><a class="code" href="structllog__size__change__rec.html#ae0c6b548e6b5251ddc33ebed12b2f7c7">03181</a>         __u32                   <a class="code" href="structllog__size__change__rec.html#ae0c6b548e6b5251ddc33ebed12b2f7c7">lsc_padding1</a>;
<a name="l03182"></a><a class="code" href="structllog__size__change__rec.html#ac7fa818068012795867e32d08e1a6c3f">03182</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__size__change__rec.html#ac7fa818068012795867e32d08e1a6c3f">lsc_padding2</a>;
<a name="l03183"></a><a class="code" href="structllog__size__change__rec.html#a03cb31cf436c0fa6ae7db9daedf9b1e3">03183</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__size__change__rec.html#a03cb31cf436c0fa6ae7db9daedf9b1e3">lsc_padding3</a>;
<a name="l03184"></a><a class="code" href="structllog__size__change__rec.html#aebfe18aa8f72230d407fc74ed1e32fda">03184</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__size__change__rec.html#aebfe18aa8f72230d407fc74ed1e32fda">lsc_tail</a>;
<a name="l03185"></a>03185 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03186"></a>03186 
<a name="l03187"></a><a class="code" href="group__lustreidl.html#gaa11245696787ad7a791e96a5abdd92a1">03187</a> <span class="preprocessor">#define CHANGELOG_MAGIC 0xca103000</span>
<a name="l03188"></a>03188 <span class="preprocessor"></span>
<a name="l03190"></a><a class="code" href="group__lustreidl.html#ga371e8e020949692f6fa1475fdadccd38">03190</a> <span class="preprocessor">#define CHANGELOG_MINMASK (1 &lt;&lt; CL_MARK)</span>
<a name="l03191"></a>03191 <span class="preprocessor"></span>
<a name="l03192"></a><a class="code" href="group__lustreidl.html#ga556f68ff421fbdfca92dcb039da85861">03192</a> <span class="preprocessor">#define CHANGELOG_ALLMASK 0XFFFFFFFF</span>
<a name="l03193"></a>03193 <span class="preprocessor"></span>
<a name="l03196"></a><a class="code" href="group__lustreidl.html#ga68b98346e8b37da419837c537d7ee5b0">03196</a> <span class="preprocessor">#define CHANGELOG_DEFMASK (CHANGELOG_ALLMASK &amp; ~(1 &lt;&lt; CL_ATIME))</span>
<a name="l03197"></a>03197 <span class="preprocessor"></span>
<a name="l03198"></a>03198 <span class="comment">/* changelog llog name, needed by client replicators */</span>
<a name="l03199"></a><a class="code" href="group__lustreidl.html#ga0ac8c7e41701f36771781a3bca02b52d">03199</a> <span class="preprocessor">#define CHANGELOG_CATALOG &quot;changelog_catalog&quot;</span>
<a name="l03200"></a>03200 <span class="preprocessor"></span>
<a name="l03201"></a><a class="code" href="structchangelog__setinfo.html">03201</a> <span class="keyword">struct </span><a class="code" href="structchangelog__setinfo.html">changelog_setinfo</a> {
<a name="l03202"></a><a class="code" href="structchangelog__setinfo.html#a8b535f02c6fdcaa017ff1ceb0ed210e5">03202</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structchangelog__setinfo.html#a8b535f02c6fdcaa017ff1ceb0ed210e5">cs_recno</a>;
<a name="l03203"></a><a class="code" href="structchangelog__setinfo.html#a1290f66ed5e931b29b167b6fa0a383cf">03203</a>         __u32 <a class="code" href="structchangelog__setinfo.html#a1290f66ed5e931b29b167b6fa0a383cf">cs_id</a>;
<a name="l03204"></a>03204 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03205"></a>03205 
<a name="l03207"></a><a class="code" href="structllog__changelog__rec.html">03207</a> <span class="keyword">struct </span><a class="code" href="structllog__changelog__rec.html" title="changelog record">llog_changelog_rec</a> {
<a name="l03208"></a><a class="code" href="structllog__changelog__rec.html#a3c098b3d8e432a0bc390391cebb7cb01">03208</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>  <a class="code" href="structllog__changelog__rec.html#a3c098b3d8e432a0bc390391cebb7cb01">cr_hdr</a>;
<a name="l03209"></a><a class="code" href="structllog__changelog__rec.html#afc0e0b0bc7f0c0e937c6f91221434ebf">03209</a>         <span class="keyword">struct </span><a class="code" href="structchangelog__rec.html">changelog_rec</a> <a class="code" href="structllog__changelog__rec.html#afc0e0b0bc7f0c0e937c6f91221434ebf" title="Variable length field.">cr</a>; 
<a name="l03210"></a><a class="code" href="structllog__changelog__rec.html#a0e38e809585e0273f29e968c2489fa2b">03210</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a> <a class="code" href="structllog__changelog__rec.html#a0e38e809585e0273f29e968c2489fa2b" title="for_sizeof_only">cr_do_not_use</a>; 
<a name="l03211"></a>03211 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03212"></a>03212 
<a name="l03213"></a><a class="code" href="group__lustreidl.html#ga3f50078862430d16582b6ceefae99c98">03213</a> <span class="preprocessor">#define CHANGELOG_USER_PREFIX &quot;cl&quot;</span>
<a name="l03214"></a>03214 <span class="preprocessor"></span>
<a name="l03215"></a><a class="code" href="structllog__changelog__user__rec.html">03215</a> <span class="keyword">struct </span><a class="code" href="structllog__changelog__user__rec.html">llog_changelog_user_rec</a> {
<a name="l03216"></a><a class="code" href="structllog__changelog__user__rec.html#ab658313b51240ff3ff71d36abeac4288">03216</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>   <a class="code" href="structllog__changelog__user__rec.html#ab658313b51240ff3ff71d36abeac4288">cur_hdr</a>;
<a name="l03217"></a><a class="code" href="structllog__changelog__user__rec.html#a679c72870d4a1a0db63eddcc3f457657">03217</a>         __u32                 <a class="code" href="structllog__changelog__user__rec.html#a679c72870d4a1a0db63eddcc3f457657">cur_id</a>;
<a name="l03218"></a><a class="code" href="structllog__changelog__user__rec.html#aa20f2ed9e84251258adb8b4118275e8f">03218</a>         __u32                 <a class="code" href="structllog__changelog__user__rec.html#aa20f2ed9e84251258adb8b4118275e8f">cur_padding</a>;
<a name="l03219"></a><a class="code" href="structllog__changelog__user__rec.html#a7505840a0b89e0ae19a75ad659f5a3c4">03219</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                 <a class="code" href="structllog__changelog__user__rec.html#a7505840a0b89e0ae19a75ad659f5a3c4">cur_endrec</a>;
<a name="l03220"></a><a class="code" href="structllog__changelog__user__rec.html#a712d096020e32940ef9ecdc7f8327272">03220</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>  <a class="code" href="structllog__changelog__user__rec.html#a712d096020e32940ef9ecdc7f8327272">cur_tail</a>;
<a name="l03221"></a>03221 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03222"></a>03222 
<a name="l03223"></a><a class="code" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">03223</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> {
<a name="l03224"></a><a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eae5535ccb2cb360c48e305c526e89b9a6">03224</a>         <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eae5535ccb2cb360c48e305c526e89b9a6">ARS_WAITING</a>,
<a name="l03225"></a><a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86ea525a17815b735d1d86cbf06356f405ad">03225</a>         <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86ea525a17815b735d1d86cbf06356f405ad">ARS_STARTED</a>,
<a name="l03226"></a><a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eab57f83ff5d9daf09dffb0e9206bffd59">03226</a>         <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eab57f83ff5d9daf09dffb0e9206bffd59">ARS_FAILED</a>,
<a name="l03227"></a><a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eacd3129f849032ca4eadc4187f0699d63">03227</a>         <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eacd3129f849032ca4eadc4187f0699d63">ARS_CANCELED</a>,
<a name="l03228"></a><a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eaffe72cfc0b18453c81b50c5ad098e2d0">03228</a>         <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eaffe72cfc0b18453c81b50c5ad098e2d0">ARS_SUCCEED</a>,
<a name="l03229"></a>03229 };
<a name="l03230"></a>03230 
<a name="l03231"></a><a class="code" href="group__lustreidl.html#gaa586db56e4e870c6cbc46a0fac29bde9">03231</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__lustreidl.html#gaa586db56e4e870c6cbc46a0fac29bde9">agent_req_status2name</a>(<span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> ars)
<a name="l03232"></a>03232 {
<a name="l03233"></a>03233         <span class="keywordflow">switch</span> (ars) {
<a name="l03234"></a>03234         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eae5535ccb2cb360c48e305c526e89b9a6">ARS_WAITING</a>:
<a name="l03235"></a>03235                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;WAITING&quot;</span>;
<a name="l03236"></a>03236         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86ea525a17815b735d1d86cbf06356f405ad">ARS_STARTED</a>:
<a name="l03237"></a>03237                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;STARTED&quot;</span>;
<a name="l03238"></a>03238         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eab57f83ff5d9daf09dffb0e9206bffd59">ARS_FAILED</a>:
<a name="l03239"></a>03239                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;FAILED&quot;</span>;
<a name="l03240"></a>03240         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eacd3129f849032ca4eadc4187f0699d63">ARS_CANCELED</a>:
<a name="l03241"></a>03241                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;CANCELED&quot;</span>;
<a name="l03242"></a>03242         <span class="keywordflow">case</span> <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eaffe72cfc0b18453c81b50c5ad098e2d0">ARS_SUCCEED</a>:
<a name="l03243"></a>03243                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;SUCCEED&quot;</span>;
<a name="l03244"></a>03244         <span class="keywordflow">default</span>:
<a name="l03245"></a>03245                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;
<a name="l03246"></a>03246         }
<a name="l03247"></a>03247 }
<a name="l03248"></a>03248 
<a name="l03249"></a><a class="code" href="group__lustreidl.html#ga472667f64379bf97814dfeceb51bb76e">03249</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lustreidl.html#ga472667f64379bf97814dfeceb51bb76e">agent_req_in_final_state</a>(<span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> ars)
<a name="l03250"></a>03250 {
<a name="l03251"></a>03251         <span class="keywordflow">return</span> ((ars == <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eaffe72cfc0b18453c81b50c5ad098e2d0">ARS_SUCCEED</a>) || (ars == <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eab57f83ff5d9daf09dffb0e9206bffd59">ARS_FAILED</a>) ||
<a name="l03252"></a>03252                 (ars == <a class="code" href="group__lustreidl.html#ggac36f21688fb1f296388242abb174a86eacd3129f849032ca4eadc4187f0699d63">ARS_CANCELED</a>));
<a name="l03253"></a>03253 }
<a name="l03254"></a>03254 
<a name="l03255"></a><a class="code" href="structllog__agent__req__rec.html">03255</a> <span class="keyword">struct </span><a class="code" href="structllog__agent__req__rec.html">llog_agent_req_rec</a> {
<a name="l03256"></a><a class="code" href="structllog__agent__req__rec.html#a34ae75edf7f12f1a090ebcd21829b1b8">03256</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__agent__req__rec.html#a34ae75edf7f12f1a090ebcd21829b1b8" title="record header">arr_hdr</a>;        
<a name="l03257"></a><a class="code" href="structllog__agent__req__rec.html#a48c91e2b08016be8dda07b75a1701ae6">03257</a>         __u32                   <a class="code" href="structllog__agent__req__rec.html#a48c91e2b08016be8dda07b75a1701ae6" title="status of the request">arr_status</a>;     
<a name="l03258"></a>03258                                                 <span class="comment">/* must match enum</span>
<a name="l03259"></a>03259 <span class="comment">                                                 * agent_req_status */</span>
<a name="l03260"></a><a class="code" href="structllog__agent__req__rec.html#abb8e5e6ce6bc5cadf028136194e07e37">03260</a>         __u32                   <a class="code" href="structllog__agent__req__rec.html#abb8e5e6ce6bc5cadf028136194e07e37" title="backend archive number">arr_archive_id</a>; 
<a name="l03261"></a><a class="code" href="structllog__agent__req__rec.html#a5b38f10add623ffa40c33e4ed859d225">03261</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__agent__req__rec.html#a5b38f10add623ffa40c33e4ed859d225" title="req flags">arr_flags</a>;      
<a name="l03262"></a><a class="code" href="structllog__agent__req__rec.html#a17ed8766450a0a9b00017b4b7c09c564">03262</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__agent__req__rec.html#a17ed8766450a0a9b00017b4b7c09c564" title="compound cookie">arr_compound_id</a>;        
<a name="l03263"></a><a class="code" href="structllog__agent__req__rec.html#a7de2d49a616d8af267a0dc54529e3d28">03263</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__agent__req__rec.html#a7de2d49a616d8af267a0dc54529e3d28" title="req.">arr_req_create</a>; 
<a name="l03264"></a><a class="code" href="structllog__agent__req__rec.html#a0172d56922046ed764f78ef3746430f9">03264</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__agent__req__rec.html#a0172d56922046ed764f78ef3746430f9" title="req.">arr_req_change</a>; 
<a name="l03265"></a><a class="code" href="structllog__agent__req__rec.html#a82aedcd3b85aa90baf16fd8b3beaf355">03265</a>         <span class="keyword">struct </span><a class="code" href="structhsm__action__item.html">hsm_action_item</a>  <a class="code" href="structllog__agent__req__rec.html#a82aedcd3b85aa90baf16fd8b3beaf355" title="req.">arr_hai</a>;        
<a name="l03266"></a><a class="code" href="structllog__agent__req__rec.html#abb3296b355948b3b8cc20b4e5bc3a8bd">03266</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__agent__req__rec.html#abb3296b355948b3b8cc20b4e5bc3a8bd" title="record tail for_sizezof_only">arr_tail</a>; 
<a name="l03267"></a>03267 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03268"></a>03268 
<a name="l03269"></a>03269 <span class="comment">/* Old llog gen for compatibility */</span>
<a name="l03270"></a><a class="code" href="structllog__gen.html">03270</a> <span class="keyword">struct </span><a class="code" href="structllog__gen.html">llog_gen</a> {
<a name="l03271"></a><a class="code" href="structllog__gen.html#a4e322539578ba182b55133e6a4bef8f9">03271</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structllog__gen.html#a4e322539578ba182b55133e6a4bef8f9">mnt_cnt</a>;
<a name="l03272"></a><a class="code" href="structllog__gen.html#a36a1d880d58fc49c1f9cfecd591efb53">03272</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structllog__gen.html#a36a1d880d58fc49c1f9cfecd591efb53">conn_cnt</a>;
<a name="l03273"></a>03273 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03274"></a>03274 
<a name="l03275"></a><a class="code" href="structllog__gen__rec.html">03275</a> <span class="keyword">struct </span><a class="code" href="structllog__gen__rec.html">llog_gen_rec</a> {
<a name="l03276"></a><a class="code" href="structllog__gen__rec.html#a6c643d4d397417fa0964b2d372fc4f70">03276</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__gen__rec.html#a6c643d4d397417fa0964b2d372fc4f70">lgr_hdr</a>;
<a name="l03277"></a><a class="code" href="structllog__gen__rec.html#a760cd9fb3c9ea5a509f5a1afdedce688">03277</a>         <span class="keyword">struct </span><a class="code" href="structllog__gen.html">llog_gen</a>         <a class="code" href="structllog__gen__rec.html#a760cd9fb3c9ea5a509f5a1afdedce688">lgr_gen</a>;
<a name="l03278"></a><a class="code" href="structllog__gen__rec.html#add5364180cf51bf9e1dcb43ef2225ebf">03278</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__gen__rec.html#add5364180cf51bf9e1dcb43ef2225ebf">padding1</a>;
<a name="l03279"></a><a class="code" href="structllog__gen__rec.html#af2f8e3cc80062a4a1f6b62145003519c">03279</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__gen__rec.html#af2f8e3cc80062a4a1f6b62145003519c">padding2</a>;
<a name="l03280"></a><a class="code" href="structllog__gen__rec.html#ad05826814c2f5c519e904747dcdf2679">03280</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structllog__gen__rec.html#ad05826814c2f5c519e904747dcdf2679">padding3</a>;
<a name="l03281"></a><a class="code" href="structllog__gen__rec.html#a67ab251cdf383beab7646dc188084c33">03281</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__gen__rec.html#a67ab251cdf383beab7646dc188084c33">lgr_tail</a>;
<a name="l03282"></a>03282 };
<a name="l03283"></a>03283 
<a name="l03284"></a>03284 <span class="comment">/* flags for the logs */</span>
<a name="l03285"></a><a class="code" href="group__lustreidl.html#ga950dc01c678c8dd1bc502584cbbe3850">03285</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga950dc01c678c8dd1bc502584cbbe3850">llog_flag</a> {
<a name="l03286"></a><a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850a203732c030dea0495236624b689eca28">03286</a>         <a class="code" href="packet-lustre_8c.html#a2d868eaf522881c3349b8e375f6b9757">LLOG_F_ZAP_WHEN_EMPTY</a>   = 0x1,
<a name="l03287"></a><a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850a8a0fce8409c599769d63ec411256670e">03287</a>         <a class="code" href="packet-lustre_8c.html#a07cc7ed983b75325d920507e6bee579d">LLOG_F_IS_CAT</a>           = 0x2,
<a name="l03288"></a><a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850af78ee4336cacb0f6952d4521d21e947d">03288</a>         <a class="code" href="packet-lustre_8c.html#add954ed69fa13ff781aa8433731a5ea2">LLOG_F_IS_PLAIN</a>         = 0x4,
<a name="l03289"></a><a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850a1a2b65571d74a1178fd6c712f5fb4cbe">03289</a>         <a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850a1a2b65571d74a1178fd6c712f5fb4cbe">LLOG_F_EXT_JOBID</a>        = 0x8,
<a name="l03290"></a><a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850ae78794acbced3eaccd1624899b8d0a5c">03290</a>         <a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850ae78794acbced3eaccd1624899b8d0a5c">LLOG_F_IS_FIXSIZE</a>       = 0x10,
<a name="l03291"></a>03291 
<a name="l03292"></a>03292         <span class="comment">/* Note: Flags covered by LLOG_F_EXT_MASK will be inherited from</span>
<a name="l03293"></a>03293 <span class="comment">         * catlog to plain log, so do not add LLOG_F_IS_FIXSIZE here,</span>
<a name="l03294"></a>03294 <span class="comment">         * because the catlog record is usually fixed size, but its plain</span>
<a name="l03295"></a>03295 <span class="comment">         * log record can be variable */</span>
<a name="l03296"></a><a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850ad0904b78d4957bd652442e4e4d17cbad">03296</a>         <a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850ad0904b78d4957bd652442e4e4d17cbad">LLOG_F_EXT_MASK</a> = <a class="code" href="group__lustreidl.html#gga950dc01c678c8dd1bc502584cbbe3850a1a2b65571d74a1178fd6c712f5fb4cbe">LLOG_F_EXT_JOBID</a>,
<a name="l03297"></a>03297 };
<a name="l03298"></a>03298 
<a name="l03299"></a>03299 <span class="comment">/* On-disk header structure of each log object, stored in little endian order */</span>
<a name="l03300"></a><a class="code" href="group__lustreidl.html#ga3f2d81734d4c0731223e0db9a86d9514">03300</a> <span class="preprocessor">#define LLOG_MIN_CHUNK_SIZE     8192</span>
<a name="l03301"></a><a class="code" href="group__lustreidl.html#gaf4a4c502b237ec8d81165de28571f252">03301</a> <span class="preprocessor"></span><span class="preprocessor">#define LLOG_HEADER_SIZE        (96) </span><span class="comment">/* sizeof (llog_log_hdr) + sizeof(llh_tail)</span>
<a name="l03302"></a>03302 <span class="comment">                                      * - sizeof(llh_bitmap) */</span>
<a name="l03303"></a><a class="code" href="group__lustreidl.html#gaa982def9bdf3777343c8726c18af7cfd">03303</a> <span class="preprocessor">#define LLOG_BITMAP_BYTES       (LLOG_MIN_CHUNK_SIZE - LLOG_HEADER_SIZE)</span>
<a name="l03304"></a><a class="code" href="group__lustreidl.html#ga5ad02ec05001b6fe6b024344d232e931">03304</a> <span class="preprocessor"></span><span class="preprocessor">#define LLOG_MIN_REC_SIZE       (24) </span><span class="comment">/* round(llog_rec_hdr + llog_rec_tail) */</span>
<a name="l03305"></a>03305 
<a name="l03306"></a><a class="code" href="structllog__log__hdr.html">03306</a> <span class="keyword">struct </span><a class="code" href="structllog__log__hdr.html">llog_log_hdr</a> {
<a name="l03307"></a><a class="code" href="structllog__log__hdr.html#a7919ad1ab80252ba9d4ab7a862156c4d">03307</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__log__hdr.html#a7919ad1ab80252ba9d4ab7a862156c4d">llh_hdr</a>;
<a name="l03308"></a><a class="code" href="structllog__log__hdr.html#afeb57e662bd12515fdb6f2c2812f5473">03308</a>         __s64                   <a class="code" href="structllog__log__hdr.html#afeb57e662bd12515fdb6f2c2812f5473">llh_timestamp</a>;
<a name="l03309"></a><a class="code" href="structllog__log__hdr.html#acf8a93eebfdf7cb367365aabd9de6187">03309</a>         __u32                   <a class="code" href="structllog__log__hdr.html#acf8a93eebfdf7cb367365aabd9de6187">llh_count</a>;
<a name="l03310"></a><a class="code" href="structllog__log__hdr.html#aa2eb3ff5037d4a918e187480d42fc38f">03310</a>         __u32                   <a class="code" href="structllog__log__hdr.html#aa2eb3ff5037d4a918e187480d42fc38f">llh_bitmap_offset</a>;
<a name="l03311"></a><a class="code" href="structllog__log__hdr.html#ae5fe413c3f401d27d875f05b35e2a1ca">03311</a>         __u32                   <a class="code" href="structllog__log__hdr.html#ae5fe413c3f401d27d875f05b35e2a1ca">llh_size</a>;
<a name="l03312"></a><a class="code" href="structllog__log__hdr.html#a9b1a8a1ad4277201afc8bdbaf2304a37">03312</a>         __u32                   <a class="code" href="structllog__log__hdr.html#a9b1a8a1ad4277201afc8bdbaf2304a37">llh_flags</a>;
<a name="l03313"></a>03313         <span class="comment">/* for a catalog the first/oldest and still in-use plain slot is just</span>
<a name="l03314"></a>03314 <span class="comment">         * next to it. It will serve as the upper limit after Catalog has</span>
<a name="l03315"></a>03315 <span class="comment">         * wrapped around */</span>
<a name="l03316"></a><a class="code" href="structllog__log__hdr.html#aed9fa10f72e1506da0590d542f853635">03316</a>         __u32                   <a class="code" href="structllog__log__hdr.html#aed9fa10f72e1506da0590d542f853635">llh_cat_idx</a>;
<a name="l03317"></a><a class="code" href="structllog__log__hdr.html#a89d0129ca1b69188449a32ce6d7481a4">03317</a>         <span class="keyword">struct </span><a class="code" href="structobd__uuid.html">obd_uuid</a>         <a class="code" href="structllog__log__hdr.html#a89d0129ca1b69188449a32ce6d7481a4">llh_tgtuuid</a>;
<a name="l03318"></a><a class="code" href="structllog__log__hdr.html#a348cbb50ff8e363f09b6429667fedb1b">03318</a>         __u32                   <a class="code" href="structllog__log__hdr.html#a348cbb50ff8e363f09b6429667fedb1b">llh_reserved</a>[<a class="code" href="group__lustreidl.html#gaf4a4c502b237ec8d81165de28571f252">LLOG_HEADER_SIZE</a>/<span class="keyword">sizeof</span>(__u32)-23];
<a name="l03319"></a>03319         <span class="comment">/* These fields must always be at the end of the llog_log_hdr.</span>
<a name="l03320"></a>03320 <span class="comment">         * Note: llh_bitmap size is variable because llog chunk size could be</span>
<a name="l03321"></a>03321 <span class="comment">         * bigger than LLOG_MIN_CHUNK_SIZE, i.e. sizeof(llog_log_hdr) &gt; 8192</span>
<a name="l03322"></a>03322 <span class="comment">         * bytes, and the real size is stored in llh_hdr.lrh_len, which means</span>
<a name="l03323"></a>03323 <span class="comment">         * llh_tail should only be refered by LLOG_HDR_TAIL().</span>
<a name="l03324"></a>03324 <span class="comment">         * But this structure is also used by client/server llog interface</span>
<a name="l03325"></a>03325 <span class="comment">         * (see llog_client.c), it will be kept in its original way to avoid</span>
<a name="l03326"></a>03326 <span class="comment">         * compatiblity issue. */</span>
<a name="l03327"></a><a class="code" href="structllog__log__hdr.html#aa9f191b472a050f35ba8707dd0f03ab0">03327</a>         __u32                   <a class="code" href="structllog__log__hdr.html#aa9f191b472a050f35ba8707dd0f03ab0">llh_bitmap</a>[<a class="code" href="group__lustreidl.html#gaa982def9bdf3777343c8726c18af7cfd">LLOG_BITMAP_BYTES</a> / <span class="keyword">sizeof</span>(__u32)];
<a name="l03328"></a><a class="code" href="structllog__log__hdr.html#a831a3de83eab56fcf3c20a2ff15cc53f">03328</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__tail.html">llog_rec_tail</a>    <a class="code" href="structllog__log__hdr.html#a831a3de83eab56fcf3c20a2ff15cc53f">llh_tail</a>;
<a name="l03329"></a>03329 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03330"></a>03330 <span class="preprocessor">#undef LLOG_HEADER_SIZE</span>
<a name="l03331"></a>03331 <span class="preprocessor"></span><span class="preprocessor">#undef LLOG_BITMAP_BYTES</span>
<a name="l03332"></a>03332 <span class="preprocessor"></span>
<a name="l03333"></a><a class="code" href="group__lustreidl.html#gab2b7cae67de8c1053d1e5bb6d0293092">03333</a> <span class="preprocessor">#define LLOG_HDR_BITMAP_SIZE(llh)       (__u32)((llh-&gt;llh_hdr.lrh_len - \</span>
<a name="l03334"></a>03334 <span class="preprocessor">                                         llh-&gt;llh_bitmap_offset -       \</span>
<a name="l03335"></a>03335 <span class="preprocessor">                                         sizeof(llh-&gt;llh_tail)) * 8)</span>
<a name="l03336"></a><a class="code" href="group__lustreidl.html#ga54ffef033dec3b56ccb23b2ba3c242d7">03336</a> <span class="preprocessor"></span><span class="preprocessor">#define LLOG_HDR_BITMAP(llh)    (__u32 *)((char *)(llh) +               \</span>
<a name="l03337"></a>03337 <span class="preprocessor">                                          (llh)-&gt;llh_bitmap_offset)</span>
<a name="l03338"></a><a class="code" href="group__lustreidl.html#ga79e1df7120ae338e0a13e0580757651f">03338</a> <span class="preprocessor"></span><span class="preprocessor">#define LLOG_HDR_TAIL(llh)      ((struct llog_rec_tail *)((char *)llh + \</span>
<a name="l03339"></a>03339 <span class="preprocessor">                                                 llh-&gt;llh_hdr.lrh_len - \</span>
<a name="l03340"></a>03340 <span class="preprocessor">                                                 sizeof(llh-&gt;llh_tail)))</span>
<a name="l03341"></a>03341 <span class="preprocessor"></span>
<a name="l03343"></a><a class="code" href="structllog__cookie.html">03343</a> <span class="keyword">struct </span><a class="code" href="structllog__cookie.html" title="log cookies are used to reference a specific log file and a record therein">llog_cookie</a> {
<a name="l03344"></a><a class="code" href="structllog__cookie.html#afbfca2521da7a09b5e2839589c418408">03344</a>         <span class="keyword">struct </span><a class="code" href="structllog__logid.html" title="Identifier for a single log object.">llog_logid</a>       <a class="code" href="structllog__cookie.html#afbfca2521da7a09b5e2839589c418408">lgc_lgl</a>;
<a name="l03345"></a><a class="code" href="structllog__cookie.html#aa6913035975d7da8f3f53a33bd931d39">03345</a>         __u32                   <a class="code" href="structllog__cookie.html#aa6913035975d7da8f3f53a33bd931d39">lgc_subsys</a>;
<a name="l03346"></a><a class="code" href="structllog__cookie.html#a029c7e1d4ab34722091fbc220add0cb2">03346</a>         __u32                   <a class="code" href="structllog__cookie.html#a029c7e1d4ab34722091fbc220add0cb2">lgc_index</a>;
<a name="l03347"></a><a class="code" href="structllog__cookie.html#a291b47a27b9de7363d74a5f1d51814b8">03347</a>         __u32                   <a class="code" href="structllog__cookie.html#a291b47a27b9de7363d74a5f1d51814b8">lgc_padding</a>;
<a name="l03348"></a>03348 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03349"></a>03349 
<a name="l03351"></a><a class="code" href="group__lustreidl.html#ga2a2d75590edc3195aa83aa7390c66cb4">03351</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga2a2d75590edc3195aa83aa7390c66cb4" title="llog protocol">llogd_rpc_ops</a> {
<a name="l03352"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4af75643197a75d1655f60222f52e75d96">03352</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4af75643197a75d1655f60222f52e75d96">LLOG_ORIGIN_HANDLE_CREATE</a>       = 501,
<a name="l03353"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4ada305dbd2a1d3dcb3cb10831116e0bbd">03353</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4ada305dbd2a1d3dcb3cb10831116e0bbd">LLOG_ORIGIN_HANDLE_NEXT_BLOCK</a>   = 502,
<a name="l03354"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4ac6733335e1efa68171735b0db338d5d4">03354</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4ac6733335e1efa68171735b0db338d5d4">LLOG_ORIGIN_HANDLE_READ_HEADER</a>  = 503,
<a name="l03355"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a294b71e336ce5315c8ccf91a7d809bb6">03355</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4a294b71e336ce5315c8ccf91a7d809bb6">LLOG_ORIGIN_HANDLE_WRITE_REC</a>    = 504,
<a name="l03356"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a37503225d1be2f8ba9813a7b48bf6cab">03356</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4a37503225d1be2f8ba9813a7b48bf6cab">LLOG_ORIGIN_HANDLE_CLOSE</a>        = 505,
<a name="l03357"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a95531a3ea1bd56ca23e344034f283eba">03357</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4a95531a3ea1bd56ca23e344034f283eba">LLOG_ORIGIN_CONNECT</a>             = 506,
<a name="l03358"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4ac67ce1d09117034e94b42094e753b5a7">03358</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4ac67ce1d09117034e94b42094e753b5a7">LLOG_CATINFO</a>                    = 507,  <span class="comment">/* deprecated */</span>
<a name="l03359"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a986f2e426f065c1dc622bc783f084d0c">03359</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4a986f2e426f065c1dc622bc783f084d0c">LLOG_ORIGIN_HANDLE_PREV_BLOCK</a>   = 508,
<a name="l03360"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a6056c60038561c131736c1d99f3b6d22">03360</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4a6056c60038561c131736c1d99f3b6d22">LLOG_ORIGIN_HANDLE_DESTROY</a>      = 509,  <span class="comment">/* for destroy llog object*/</span>
<a name="l03361"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a29ba92eb7e12b2624d9c37f2c449f364">03361</a>         <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4a29ba92eb7e12b2624d9c37f2c449f364">LLOG_LAST_OPC</a>,
<a name="l03362"></a><a class="code" href="group__lustreidl.html#gga2a2d75590edc3195aa83aa7390c66cb4a467aa968f219a0df27a92df58cbeb91e">03362</a>         <a class="code" href="packet-lustre_8c.html#a2c50215892cd967a43577e641aebfe50">LLOG_FIRST_OPC</a>                  = <a class="code" href="packet-lustre_8c.html#a396b23a33847d59b05f885fd129138f4af75643197a75d1655f60222f52e75d96">LLOG_ORIGIN_HANDLE_CREATE</a>
<a name="l03363"></a>03363 };
<a name="l03364"></a>03364 
<a name="l03365"></a><a class="code" href="structllogd__body.html">03365</a> <span class="keyword">struct </span><a class="code" href="structllogd__body.html">llogd_body</a> {
<a name="l03366"></a><a class="code" href="structllogd__body.html#ac77e6e2120d38eab29d5472b9d22c6ce">03366</a>         <span class="keyword">struct </span><a class="code" href="structllog__logid.html" title="Identifier for a single log object.">llog_logid</a>  <a class="code" href="structllogd__body.html#ac77e6e2120d38eab29d5472b9d22c6ce">lgd_logid</a>;
<a name="l03367"></a><a class="code" href="structllogd__body.html#a9333885a2bc0c19839a757af64b63cca">03367</a>         __u32 <a class="code" href="structllogd__body.html#a9333885a2bc0c19839a757af64b63cca">lgd_ctxt_idx</a>;
<a name="l03368"></a><a class="code" href="structllogd__body.html#a2b902d575f0a5811b741e553fb262407">03368</a>         __u32 <a class="code" href="structllogd__body.html#a2b902d575f0a5811b741e553fb262407">lgd_llh_flags</a>;
<a name="l03369"></a><a class="code" href="structllogd__body.html#af7e091ffd9a1e561f6610ccf9521481a">03369</a>         __u32 <a class="code" href="structllogd__body.html#af7e091ffd9a1e561f6610ccf9521481a">lgd_index</a>;
<a name="l03370"></a><a class="code" href="structllogd__body.html#a224527693d4351cb8942b598bfa97e89">03370</a>         __u32 <a class="code" href="structllogd__body.html#a224527693d4351cb8942b598bfa97e89">lgd_saved_index</a>;
<a name="l03371"></a><a class="code" href="structllogd__body.html#aba61f7c54d04b7da9971d015f04376a7">03371</a>         __u32 <a class="code" href="structllogd__body.html#aba61f7c54d04b7da9971d015f04376a7">lgd_len</a>;
<a name="l03372"></a><a class="code" href="structllogd__body.html#a1d60a4d43eebc314e16443ab6a9bbfbc">03372</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structllogd__body.html#a1d60a4d43eebc314e16443ab6a9bbfbc">lgd_cur_offset</a>;
<a name="l03373"></a>03373 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03374"></a>03374 
<a name="l03375"></a><a class="code" href="structllogd__conn__body.html">03375</a> <span class="keyword">struct </span><a class="code" href="structllogd__conn__body.html">llogd_conn_body</a> {
<a name="l03376"></a><a class="code" href="structllogd__conn__body.html#a233728cdd414c507eb65ab59d33174a4">03376</a>         <span class="keyword">struct </span><a class="code" href="structllog__gen.html">llog_gen</a>         <a class="code" href="structllogd__conn__body.html#a233728cdd414c507eb65ab59d33174a4">lgdc_gen</a>;
<a name="l03377"></a><a class="code" href="structllogd__conn__body.html#a28710b6cc17cca0d9841601f5fece490">03377</a>         <span class="keyword">struct </span><a class="code" href="structllog__logid.html" title="Identifier for a single log object.">llog_logid</a>       <a class="code" href="structllogd__conn__body.html#a28710b6cc17cca0d9841601f5fece490">lgdc_logid</a>;
<a name="l03378"></a><a class="code" href="structllogd__conn__body.html#ac531ffa3fbdf31e4588f729e317efe0b">03378</a>         __u32                   <a class="code" href="structllogd__conn__body.html#ac531ffa3fbdf31e4588f729e317efe0b">lgdc_ctxt_idx</a>;
<a name="l03379"></a>03379 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03380"></a>03380 
<a name="l03381"></a>03381 <span class="comment">/* Note: 64-bit types are 64-bit aligned in structure */</span>
<a name="l03382"></a><a class="code" href="structobdo.html">03382</a> <span class="keyword">struct </span><a class="code" href="structobdo.html">obdo</a> {
<a name="l03383"></a><a class="code" href="structobdo.html#a0602c2272bf3c8483593a6c0bf01a66e">03383</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#a0602c2272bf3c8483593a6c0bf01a66e">o_valid</a>;        <span class="comment">/* hot fields in this obdo */</span>
<a name="l03384"></a><a class="code" href="structobdo.html#a0153b0c6b62ca1ecd1edf36546385cbf">03384</a>         <span class="keyword">struct </span><a class="code" href="structost__id.html" title="OST object IDentifier.">ost_id</a>           <a class="code" href="structobdo.html#a0153b0c6b62ca1ecd1edf36546385cbf">o_oi</a>;
<a name="l03385"></a><a class="code" href="structobdo.html#a957449d80d20b11aaaf945f1addc99b6">03385</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#a957449d80d20b11aaaf945f1addc99b6">o_parent_seq</a>;
<a name="l03386"></a><a class="code" href="structobdo.html#abbfa08bf1585f3d5b7a054c55bb1335f">03386</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#abbfa08bf1585f3d5b7a054c55bb1335f">o_size</a>;         <span class="comment">/* o_size-o_blocks == ost_lvb */</span>
<a name="l03387"></a><a class="code" href="structobdo.html#a33faaf06b017327f72b23b597311baef">03387</a>         __s64                   <a class="code" href="structobdo.html#a33faaf06b017327f72b23b597311baef">o_mtime</a>;
<a name="l03388"></a><a class="code" href="structobdo.html#a6b6b9d4b05c515a36d9d6a682d13148c">03388</a>         __s64                   <a class="code" href="structobdo.html#a6b6b9d4b05c515a36d9d6a682d13148c">o_atime</a>;
<a name="l03389"></a><a class="code" href="structobdo.html#a2a15d5de3521a888575545a2f0453d61">03389</a>         __s64                   <a class="code" href="structobdo.html#a2a15d5de3521a888575545a2f0453d61">o_ctime</a>;
<a name="l03390"></a><a class="code" href="structobdo.html#ab78543505ca489f2c0370660908ba6f5">03390</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#ab78543505ca489f2c0370660908ba6f5">o_blocks</a>;       <span class="comment">/* brw: cli sent cached bytes */</span>
<a name="l03391"></a><a class="code" href="structobdo.html#a9f775f3fda1cecfaab285a50b8eff864">03391</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#a9f775f3fda1cecfaab285a50b8eff864">o_grant</a>;
<a name="l03392"></a>03392 
<a name="l03393"></a>03393         <span class="comment">/* 32-bit fields start here: keep an even number of them via padding */</span>
<a name="l03394"></a><a class="code" href="structobdo.html#ab59a5b464e93a3400197a1aee5eca54a">03394</a>         __u32                   <a class="code" href="structobdo.html#ab59a5b464e93a3400197a1aee5eca54a">o_blksize</a>;      <span class="comment">/* optimal IO blocksize */</span>
<a name="l03395"></a><a class="code" href="structobdo.html#a03cb35c43b98e76b9e9b3502f5d69430">03395</a>         __u32                   <a class="code" href="structobdo.html#a03cb35c43b98e76b9e9b3502f5d69430">o_mode</a>;         <span class="comment">/* brw: cli sent cache remain */</span>
<a name="l03396"></a><a class="code" href="structobdo.html#a3b458b58ea7917e722ce30a48036d5b5">03396</a>         __u32                   <a class="code" href="structobdo.html#a3b458b58ea7917e722ce30a48036d5b5">o_uid</a>;
<a name="l03397"></a><a class="code" href="structobdo.html#aa5e64f099438620d92d234c058c8826f">03397</a>         __u32                   <a class="code" href="structobdo.html#aa5e64f099438620d92d234c058c8826f">o_gid</a>;
<a name="l03398"></a><a class="code" href="structobdo.html#a3e52c30c4c312d5175be8f1964a9ba08">03398</a>         __u32                   <a class="code" href="structobdo.html#a3e52c30c4c312d5175be8f1964a9ba08">o_flags</a>;
<a name="l03399"></a><a class="code" href="structobdo.html#af09447b7e89729811173025afaa90e05">03399</a>         __u32                   <a class="code" href="structobdo.html#af09447b7e89729811173025afaa90e05">o_nlink</a>;        <span class="comment">/* brw: checksum */</span>
<a name="l03400"></a><a class="code" href="structobdo.html#a3f352005b700bc38caecbced7882550f">03400</a>         __u32                   <a class="code" href="structobdo.html#a3f352005b700bc38caecbced7882550f">o_parent_oid</a>;
<a name="l03401"></a><a class="code" href="structobdo.html#a2f1f62ca05c673947307bbb4b14169b1">03401</a>         __u32                   <a class="code" href="structobdo.html#a2f1f62ca05c673947307bbb4b14169b1">o_misc</a>;         <span class="comment">/* brw: o_dropped */</span>
<a name="l03402"></a>03402 
<a name="l03403"></a><a class="code" href="structobdo.html#a85c2eabb19225287e404c2b3b39c3163">03403</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#a85c2eabb19225287e404c2b3b39c3163">o_ioepoch</a>;      <span class="comment">/* epoch in ost writes */</span>
<a name="l03404"></a><a class="code" href="structobdo.html#a98c16dc63976028a2bf826dc12beb66c">03404</a>         __u32                   <a class="code" href="structobdo.html#a98c16dc63976028a2bf826dc12beb66c">o_stripe_idx</a>;   <span class="comment">/* holds stripe idx */</span>
<a name="l03405"></a><a class="code" href="structobdo.html#a7db267735d5a4c68a73723a1e3c90484">03405</a>         __u32                   <a class="code" href="structobdo.html#a7db267735d5a4c68a73723a1e3c90484">o_parent_ver</a>;
<a name="l03406"></a><a class="code" href="structobdo.html#a3c26ccfc9f699c6c7ee324da726c39ca">03406</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a>    <a class="code" href="structobdo.html#a3c26ccfc9f699c6c7ee324da726c39ca">o_handle</a>;       <span class="comment">/* brw: lock handle to prolong</span>
<a name="l03407"></a>03407 <span class="comment">                                                 * locks */</span>
<a name="l03408"></a><a class="code" href="structobdo.html#a93a9792361cc4fc6670fd3b9ff45f81d">03408</a>         <span class="keyword">struct </span><a class="code" href="structllog__cookie.html" title="log cookies are used to reference a specific log file and a record therein">llog_cookie</a>      <a class="code" href="structobdo.html#a93a9792361cc4fc6670fd3b9ff45f81d">o_lcookie</a>;      <span class="comment">/* destroy: unlink cookie from</span>
<a name="l03409"></a>03409 <span class="comment">                                                 * MDS, obsolete in 2.8, reused</span>
<a name="l03410"></a>03410 <span class="comment">                                                 * in OSP */</span>
<a name="l03411"></a><a class="code" href="structobdo.html#a82dc811da3c620dbd4abab82c34cc16c">03411</a>         __u32                   <a class="code" href="structobdo.html#a82dc811da3c620dbd4abab82c34cc16c">o_uid_h</a>;
<a name="l03412"></a><a class="code" href="structobdo.html#a0d999b15f3a8ce5c6fea3b598d1d69b0">03412</a>         __u32                   <a class="code" href="structobdo.html#a0d999b15f3a8ce5c6fea3b598d1d69b0">o_gid_h</a>;
<a name="l03413"></a>03413 
<a name="l03414"></a><a class="code" href="structobdo.html#a845639314f46c97fcdfb4f17a760c9b6">03414</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#a845639314f46c97fcdfb4f17a760c9b6">o_data_version</a>; <span class="comment">/* getattr: sum of iversion for</span>
<a name="l03415"></a>03415 <span class="comment">                                                 * each stripe.</span>
<a name="l03416"></a>03416 <span class="comment">                                                 * brw: grant space consumed on</span>
<a name="l03417"></a>03417 <span class="comment">                                                 * the client for the write */</span>
<a name="l03418"></a><a class="code" href="structobdo.html#ae0e8fb0596b3aee03d3ca65d99a1746c">03418</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#ae0e8fb0596b3aee03d3ca65d99a1746c">o_padding_4</a>;
<a name="l03419"></a><a class="code" href="structobdo.html#a1d5f1f5c6986a7d7ef2dd8b69cf29ae9">03419</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#a1d5f1f5c6986a7d7ef2dd8b69cf29ae9">o_padding_5</a>;
<a name="l03420"></a><a class="code" href="structobdo.html#aa0bcd9e7197c72045939000106052aff">03420</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structobdo.html#aa0bcd9e7197c72045939000106052aff">o_padding_6</a>;
<a name="l03421"></a>03421 };
<a name="l03422"></a>03422 
<a name="l03423"></a><a class="code" href="group__lustreidl.html#ga2769adc0762eb8f82c8e3ca61de477b7">03423</a> <span class="preprocessor">#define o_dirty   o_blocks</span>
<a name="l03424"></a><a class="code" href="group__lustreidl.html#ga2d19327d800c2f2b8549ba390c413a2c">03424</a> <span class="preprocessor"></span><span class="preprocessor">#define o_undirty o_mode</span>
<a name="l03425"></a><a class="code" href="group__lustreidl.html#ga052ccc4730f1603827c74030e3cc8737">03425</a> <span class="preprocessor"></span><span class="preprocessor">#define o_dropped o_misc</span>
<a name="l03426"></a><a class="code" href="group__lustreidl.html#ga34a8715436c9103d348171928ea4e3fe">03426</a> <span class="preprocessor"></span><span class="preprocessor">#define o_cksum   o_nlink</span>
<a name="l03427"></a><a class="code" href="group__lustreidl.html#gabae0f95c0aa7f193e263a65c383ca637">03427</a> <span class="preprocessor"></span><span class="preprocessor">#define o_grant_used o_data_version</span>
<a name="l03428"></a>03428 <span class="preprocessor"></span>
<a name="l03429"></a><a class="code" href="structlfsck__request.html">03429</a> <span class="keyword">struct </span><a class="code" href="structlfsck__request.html">lfsck_request</a> {
<a name="l03430"></a><a class="code" href="structlfsck__request.html#a2c5f665862e3dd311ee2f81332def97a">03430</a>         __u32           <a class="code" href="structlfsck__request.html#a2c5f665862e3dd311ee2f81332def97a">lr_event</a>;
<a name="l03431"></a><a class="code" href="structlfsck__request.html#a31ad159acb5753d143a64bd1d9fa5c95">03431</a>         __u32           <a class="code" href="structlfsck__request.html#a31ad159acb5753d143a64bd1d9fa5c95">lr_index</a>;
<a name="l03432"></a><a class="code" href="structlfsck__request.html#a302e2d4258a53839d4d2bc3987836048">03432</a>         __u32           <a class="code" href="structlfsck__request.html#a302e2d4258a53839d4d2bc3987836048">lr_flags</a>;
<a name="l03433"></a><a class="code" href="structlfsck__request.html#afbe85ae08028586071be66c303f3bee4">03433</a>         __u32           <a class="code" href="structlfsck__request.html#afbe85ae08028586071be66c303f3bee4">lr_valid</a>;
<a name="l03434"></a>03434         <span class="keyword">union </span>{
<a name="l03435"></a><a class="code" href="structlfsck__request.html#ab2e36de61fec1936f211f47849b6f8f4">03435</a>                 __u32   <a class="code" href="structlfsck__request.html#ab2e36de61fec1936f211f47849b6f8f4">lr_speed</a>;
<a name="l03436"></a><a class="code" href="structlfsck__request.html#a2587b50dec41d52620bdae726323c613">03436</a>                 __u32   <a class="code" href="structlfsck__request.html#a2587b50dec41d52620bdae726323c613">lr_status</a>;
<a name="l03437"></a><a class="code" href="structlfsck__request.html#a75ca501df2f72bacbcc8d7c6bc51ebdf">03437</a>                 __u32   <a class="code" href="structlfsck__request.html#a75ca501df2f72bacbcc8d7c6bc51ebdf">lr_type</a>;
<a name="l03438"></a>03438         };
<a name="l03439"></a><a class="code" href="structlfsck__request.html#a37a59139e97f9281fc24e60f39ea9caf">03439</a>         __u16           <a class="code" href="structlfsck__request.html#a37a59139e97f9281fc24e60f39ea9caf">lr_version</a>;
<a name="l03440"></a><a class="code" href="structlfsck__request.html#aa3533754346ba510cb1a002f4fee53e6">03440</a>         __u16           <a class="code" href="structlfsck__request.html#aa3533754346ba510cb1a002f4fee53e6">lr_active</a>;
<a name="l03441"></a><a class="code" href="structlfsck__request.html#a88848a5e829cb91126d5f01ad14ea18f">03441</a>         __u16           <a class="code" href="structlfsck__request.html#a88848a5e829cb91126d5f01ad14ea18f">lr_param</a>;
<a name="l03442"></a><a class="code" href="structlfsck__request.html#ab4f9d1cf8a46992887fc4088452f5eb1">03442</a>         __u16           <a class="code" href="structlfsck__request.html#ab4f9d1cf8a46992887fc4088452f5eb1">lr_async_windows</a>;
<a name="l03443"></a><a class="code" href="structlfsck__request.html#ae2d2f09478f76e56abe8077c9657496f">03443</a>         __u32           <a class="code" href="structlfsck__request.html#ae2d2f09478f76e56abe8077c9657496f">lr_flags2</a>;
<a name="l03444"></a><a class="code" href="structlfsck__request.html#a66b1f3f909b3dc26261814cfeb2cdcca">03444</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structlfsck__request.html#a66b1f3f909b3dc26261814cfeb2cdcca">lr_fid</a>;
<a name="l03445"></a><a class="code" href="structlfsck__request.html#a206f68391c2db7bc6ea5b32eed087080">03445</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structlfsck__request.html#a206f68391c2db7bc6ea5b32eed087080">lr_fid2</a>;
<a name="l03446"></a><a class="code" href="structlfsck__request.html#ab93a18b8ac54f3dd5dce304bd4eb96e5">03446</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structlfsck__request.html#ab93a18b8ac54f3dd5dce304bd4eb96e5">lr_fid3</a>;
<a name="l03447"></a><a class="code" href="structlfsck__request.html#a6e22cbb5a29840c7907b2ccb27dc918a">03447</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structlfsck__request.html#a6e22cbb5a29840c7907b2ccb27dc918a">lr_padding_1</a>;
<a name="l03448"></a><a class="code" href="structlfsck__request.html#af929cb4dc1ce834ccfe7445ef68a094e">03448</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structlfsck__request.html#af929cb4dc1ce834ccfe7445ef68a094e">lr_padding_2</a>;
<a name="l03449"></a>03449 };
<a name="l03450"></a>03450 
<a name="l03451"></a><a class="code" href="structlfsck__reply.html">03451</a> <span class="keyword">struct </span><a class="code" href="structlfsck__reply.html">lfsck_reply</a> {
<a name="l03452"></a><a class="code" href="structlfsck__reply.html#a69a5ad1346c29cceb830d4e00e51f36d">03452</a>         __u32           <a class="code" href="structlfsck__reply.html#a69a5ad1346c29cceb830d4e00e51f36d">lr_status</a>;
<a name="l03453"></a><a class="code" href="structlfsck__reply.html#a5466a7b9d18674bc6e54b9b14d8e679f">03453</a>         __u32           <a class="code" href="structlfsck__reply.html#a5466a7b9d18674bc6e54b9b14d8e679f">lr_padding_1</a>;
<a name="l03454"></a><a class="code" href="structlfsck__reply.html#a8a939be60d7c59490c3c7ce84984b1e3">03454</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structlfsck__reply.html#a8a939be60d7c59490c3c7ce84984b1e3">lr_repaired</a>;
<a name="l03455"></a>03455 };
<a name="l03456"></a>03456 
<a name="l03457"></a><a class="code" href="group__lustreidl.html#gab54acd8a5bcce94c5c2fa2a4c66ff110">03457</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gab54acd8a5bcce94c5c2fa2a4c66ff110">lfsck_events</a> {
<a name="l03458"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110aea8d3a4a6c55d30c74af7b3bf680b8c5">03458</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110aea8d3a4a6c55d30c74af7b3bf680b8c5">LE_LASTID_REBUILDING</a>    = 1,
<a name="l03459"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a9bcb421f5113504b0a9a795a201b18c2">03459</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a9bcb421f5113504b0a9a795a201b18c2">LE_LASTID_REBUILT</a>       = 2,
<a name="l03460"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a144bacfb560e11eee8f26a5568dcc3d4">03460</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a144bacfb560e11eee8f26a5568dcc3d4">LE_PHASE1_DONE</a>          = 3,
<a name="l03461"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a16f79a9c7357eaad635850496f8d4bee">03461</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a16f79a9c7357eaad635850496f8d4bee">LE_PHASE2_DONE</a>          = 4,
<a name="l03462"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a25437a756007d6c22e614f4e0d7fca1f">03462</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a25437a756007d6c22e614f4e0d7fca1f">LE_START</a>                = 5,
<a name="l03463"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a30a527d972f2f84947862f49929dfd29">03463</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a30a527d972f2f84947862f49929dfd29">LE_STOP</a>                 = 6,
<a name="l03464"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a8d903ce14e7e3c8a0977d02e32a5606c">03464</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a8d903ce14e7e3c8a0977d02e32a5606c">LE_QUERY</a>                = 7,
<a name="l03465"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a556e2d4569342a60e33c8fa70b8f634b">03465</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a556e2d4569342a60e33c8fa70b8f634b">LE_FID_ACCESSED</a>         = 8,
<a name="l03466"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110acc173e0753cdbc208b66562362ffda08">03466</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110acc173e0753cdbc208b66562362ffda08">LE_PEER_EXIT</a>            = 9,
<a name="l03467"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110ad97a67614e536126032f70584c2adbee">03467</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110ad97a67614e536126032f70584c2adbee">LE_CONDITIONAL_DESTROY</a>  = 10,
<a name="l03468"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a342c4503ae8f46a2175fb975cd0a94ce">03468</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a342c4503ae8f46a2175fb975cd0a94ce">LE_PAIRS_VERIFY</a>         = 11,
<a name="l03469"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a964a03a585992c0f722fb2b32195a484">03469</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a964a03a585992c0f722fb2b32195a484">LE_SKIP_NLINK_DECLARE</a>   = 13,
<a name="l03470"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a098c7dcdc50af068db18e7609ed8293d">03470</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a098c7dcdc50af068db18e7609ed8293d">LE_SKIP_NLINK</a>           = 14,
<a name="l03471"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a05b7f4ed1107e4b926cdb1d397c9d371">03471</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a05b7f4ed1107e4b926cdb1d397c9d371">LE_SET_LMV_MASTER</a>       = 15,
<a name="l03472"></a><a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a3d7b59155faaf9f8488da2e8a0bedc9b">03472</a>         <a class="code" href="group__lustreidl.html#ggab54acd8a5bcce94c5c2fa2a4c66ff110a3d7b59155faaf9f8488da2e8a0bedc9b">LE_SET_LMV_SLAVE</a>        = 16,
<a name="l03473"></a>03473 };
<a name="l03474"></a>03474 
<a name="l03475"></a><a class="code" href="group__lustreidl.html#ga7488c64cf366f4604915cb20509d670f">03475</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga7488c64cf366f4604915cb20509d670f">lfsck_event_flags</a> {
<a name="l03476"></a><a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa255b98c5484435e88f530635ae33cefc">03476</a>         <a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa255b98c5484435e88f530635ae33cefc">LEF_TO_OST</a>              = 0x00000001,
<a name="l03477"></a><a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa1cc1058d23f74be57ac7480b555fdb0d">03477</a>         <a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa1cc1058d23f74be57ac7480b555fdb0d">LEF_FROM_OST</a>            = 0x00000002,
<a name="l03478"></a><a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa7d8c5f8e6f43ccdd760abd45ddcc7bdf">03478</a>         <a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa7d8c5f8e6f43ccdd760abd45ddcc7bdf">LEF_SET_LMV_HASH</a>        = 0x00000004,
<a name="l03479"></a><a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670faab5c0bb4b731c27382415acc3039afa8">03479</a>         <a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670faab5c0bb4b731c27382415acc3039afa8">LEF_SET_LMV_ALL</a>         = 0x00000008,
<a name="l03480"></a><a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa29c2b0fe968e2ba08f52345c8568a3e6">03480</a>         <a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa29c2b0fe968e2ba08f52345c8568a3e6">LEF_RECHECK_NAME_HASH</a>   = 0x00000010,
<a name="l03481"></a><a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa7547857e65a289b756adcb774afe839a">03481</a>         <a class="code" href="group__lustreidl.html#gga7488c64cf366f4604915cb20509d670fa7547857e65a289b756adcb774afe839a">LEF_QUERY_ALL</a>           = 0x00000020,
<a name="l03482"></a>03482 };
<a name="l03483"></a>03483 
<a name="l03484"></a>03484 <span class="comment">/* request structure for OST&apos;s */</span>
<a name="l03485"></a><a class="code" href="structost__body.html">03485</a> <span class="keyword">struct </span><a class="code" href="structost__body.html">ost_body</a> {
<a name="l03486"></a><a class="code" href="structost__body.html#a347fc2eca12ad6c8f029bcd0eac8ac64">03486</a>         <span class="keyword">struct </span><a class="code" href="structobdo.html">obdo</a> <a class="code" href="structost__body.html#a347fc2eca12ad6c8f029bcd0eac8ac64">oa</a>;
<a name="l03487"></a>03487 };
<a name="l03488"></a>03488 
<a name="l03489"></a>03489 <span class="comment">/* Key for FIEMAP to be used in get_info calls */</span>
<a name="l03490"></a><a class="code" href="structll__fiemap__info__key.html">03490</a> <span class="keyword">struct </span><a class="code" href="structll__fiemap__info__key.html">ll_fiemap_info_key</a> {
<a name="l03491"></a><a class="code" href="structll__fiemap__info__key.html#af196a7e285650638876af81347062e5c">03491</a>         <span class="keywordtype">char</span>            <a class="code" href="structll__fiemap__info__key.html#af196a7e285650638876af81347062e5c">lfik_name</a>[8];
<a name="l03492"></a><a class="code" href="structll__fiemap__info__key.html#a2f2b8a9eb44c56b1fa85aca06852d9ed">03492</a>         <span class="keyword">struct </span><a class="code" href="structobdo.html">obdo</a>     <a class="code" href="structll__fiemap__info__key.html#a2f2b8a9eb44c56b1fa85aca06852d9ed">lfik_oa</a>;
<a name="l03493"></a><a class="code" href="structll__fiemap__info__key.html#af5d192035fab1aebbcca7c5db4a7c15d">03493</a>         <span class="keyword">struct </span>fiemap   <a class="code" href="structll__fiemap__info__key.html#af5d192035fab1aebbcca7c5db4a7c15d">lfik_fiemap</a>;
<a name="l03494"></a>03494 };
<a name="l03495"></a>03495 
<a name="l03496"></a>03496 <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga6265e83fcdf6cfa54792c67c3650567b">lustre_print_user_md</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> level, <span class="keyword">struct</span> <a class="code" href="group__lustreuser.html#ga9c004c151be5b9c6f1886530cbd17136">lov_user_md</a> *lum,
<a name="l03497"></a>03497                           <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="multiop_8c.html#afbbc03d010d4a43d0dcc0ef3c41de5ec">msg</a>);
<a name="l03498"></a>03498 
<a name="l03499"></a>03499 <span class="comment">/* Functions for dumping PTLRPC fields */</span>
<a name="l03500"></a>03500 <span class="keywordtype">void</span> <a class="code" href="req-layout_8c.html#a6b871efa5322438f31eb38527ff4488c">dump_rniobuf</a>(<span class="keyword">struct</span> <a class="code" href="structniobuf__remote.html">niobuf_remote</a> *rnb);
<a name="l03501"></a>03501 <span class="keywordtype">void</span> <a class="code" href="req-layout_8c.html#a8c0437b7267426bcf227ee0e5605bf4d">dump_ioo</a>(<span class="keyword">struct</span> <a class="code" href="structobd__ioobj.html">obd_ioobj</a> *nb);
<a name="l03502"></a>03502 <span class="keywordtype">void</span> <a class="code" href="req-layout_8c.html#ae9f0e3182a388bc197c5a4d85777b696">dump_ost_body</a>(<span class="keyword">struct</span> <a class="code" href="structost__body.html">ost_body</a> *ob);
<a name="l03503"></a>03503 <span class="keywordtype">void</span> <a class="code" href="req-layout_8c.html#aeed3357e382b86196bcf46311ddf80bc">dump_rcs</a>(__u32 *rc);
<a name="l03504"></a>03504 
<a name="l03505"></a><a class="code" href="group__lustreidl.html#ga161db67d351cc8348ca21e796aad7cc9">03505</a> <span class="preprocessor">#define IDX_INFO_MAGIC 0x3D37CC37</span>
<a name="l03506"></a>03506 <span class="preprocessor"></span>
<a name="l03507"></a>03507 <span class="comment">/* Index file transfer through the network. The server serializes the index into</span>
<a name="l03508"></a>03508 <span class="comment"> * a byte stream which is sent to the client via a bulk transfer */</span>
<a name="l03509"></a><a class="code" href="structidx__info.html">03509</a> <span class="keyword">struct </span><a class="code" href="structidx__info.html">idx_info</a> {
<a name="l03510"></a><a class="code" href="structidx__info.html#ab4d65da0f5fa9dd5acb4fa618e774e12">03510</a>         __u32           <a class="code" href="structidx__info.html#ab4d65da0f5fa9dd5acb4fa618e774e12">ii_magic</a>;
<a name="l03511"></a>03511 
<a name="l03512"></a>03512         <span class="comment">/* reply: see idx_info_flags below */</span>
<a name="l03513"></a><a class="code" href="structidx__info.html#a33ae4005da2c56c417d9c5877e1fc377">03513</a>         __u32           <a class="code" href="structidx__info.html#a33ae4005da2c56c417d9c5877e1fc377">ii_flags</a>;
<a name="l03514"></a>03514 
<a name="l03515"></a>03515         <span class="comment">/* request &amp; reply: number of lu_idxpage (to be) transferred */</span>
<a name="l03516"></a><a class="code" href="structidx__info.html#a5640f7f38c07e18a9112adb2237a0e6a">03516</a>         __u16           <a class="code" href="structidx__info.html#a5640f7f38c07e18a9112adb2237a0e6a">ii_count</a>;
<a name="l03517"></a><a class="code" href="structidx__info.html#ad7c74996df43c134e301ead857c6952d">03517</a>         __u16           <a class="code" href="structidx__info.html#ad7c74996df43c134e301ead857c6952d">ii_pad0</a>;
<a name="l03518"></a>03518 
<a name="l03519"></a>03519         <span class="comment">/* request: requested attributes passed down to the iterator API */</span>
<a name="l03520"></a><a class="code" href="structidx__info.html#a0c441653df2297d074c1959110698916">03520</a>         __u32           <a class="code" href="structidx__info.html#a0c441653df2297d074c1959110698916">ii_attrs</a>;
<a name="l03521"></a>03521 
<a name="l03522"></a>03522         <span class="comment">/* request &amp; reply: index file identifier (FID) */</span>
<a name="l03523"></a><a class="code" href="structidx__info.html#a434daddb88b2d7df21257c99b98d7dae">03523</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structidx__info.html#a434daddb88b2d7df21257c99b98d7dae">ii_fid</a>;
<a name="l03524"></a>03524 
<a name="l03525"></a>03525         <span class="comment">/* reply: version of the index file before starting to walk the index.</span>
<a name="l03526"></a>03526 <span class="comment">         * Please note that the version can be modified at any time during the</span>
<a name="l03527"></a>03527 <span class="comment">         * transfer */</span>
<a name="l03528"></a><a class="code" href="structidx__info.html#a3887495e9cc6c769a46bcad6cd6972ac">03528</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structidx__info.html#a3887495e9cc6c769a46bcad6cd6972ac">ii_version</a>;
<a name="l03529"></a>03529 
<a name="l03530"></a>03530         <span class="comment">/* request: hash to start with:</span>
<a name="l03531"></a>03531 <span class="comment">         * reply: hash of the first entry of the first lu_idxpage and hash</span>
<a name="l03532"></a>03532 <span class="comment">         *        of the entry to read next if any */</span>
<a name="l03533"></a><a class="code" href="structidx__info.html#ae3d758ed7af029f0af8f2e8846b19f02">03533</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structidx__info.html#ae3d758ed7af029f0af8f2e8846b19f02">ii_hash_start</a>;
<a name="l03534"></a><a class="code" href="structidx__info.html#a38a5189c7c732824da55e75035d4b5c3">03534</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structidx__info.html#a38a5189c7c732824da55e75035d4b5c3">ii_hash_end</a>;
<a name="l03535"></a>03535 
<a name="l03536"></a>03536         <span class="comment">/* reply: size of keys in lu_idxpages, minimal one if II_FL_VARKEY is</span>
<a name="l03537"></a>03537 <span class="comment">         * set */</span>
<a name="l03538"></a><a class="code" href="structidx__info.html#a2541883d516f8bd4aa1978e50e1cf037">03538</a>         __u16           <a class="code" href="structidx__info.html#a2541883d516f8bd4aa1978e50e1cf037">ii_keysize</a>;
<a name="l03539"></a>03539 
<a name="l03540"></a>03540         <span class="comment">/* reply: size of records in lu_idxpages, minimal one if II_FL_VARREC</span>
<a name="l03541"></a>03541 <span class="comment">         * is set */</span>
<a name="l03542"></a><a class="code" href="structidx__info.html#a33f96ce276bf54f9b5270ec8db708681">03542</a>         __u16           <a class="code" href="structidx__info.html#a33f96ce276bf54f9b5270ec8db708681">ii_recsize</a>;
<a name="l03543"></a>03543 
<a name="l03544"></a><a class="code" href="structidx__info.html#a46681e065040a827f9a462ef41dfb05a">03544</a>         __u32           <a class="code" href="structidx__info.html#a46681e065040a827f9a462ef41dfb05a">ii_pad1</a>;
<a name="l03545"></a><a class="code" href="structidx__info.html#a215902ad698c8927d44468bfc285305c">03545</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structidx__info.html#a215902ad698c8927d44468bfc285305c">ii_pad2</a>;
<a name="l03546"></a><a class="code" href="structidx__info.html#a6e24b7dabc3d58308cecd7d3aa729fca">03546</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structidx__info.html#a6e24b7dabc3d58308cecd7d3aa729fca">ii_pad3</a>;
<a name="l03547"></a>03547 };
<a name="l03548"></a>03548 
<a name="l03549"></a><a class="code" href="group__lustreidl.html#ga30f6a5d41239b37d1f4a4a5ee837fc0c">03549</a> <span class="preprocessor">#define II_END_OFF      MDS_DIR_END_OFF </span><span class="comment">/* all entries have been read */</span>
<a name="l03550"></a>03550 
<a name="l03551"></a>03551 <span class="comment">/* List of flags used in idx_info::ii_flags */</span>
<a name="l03552"></a><a class="code" href="group__lustreidl.html#gae0de4b96d30ccdb77f671c39ad5deff2">03552</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gae0de4b96d30ccdb77f671c39ad5deff2">idx_info_flags</a> {
<a name="l03553"></a><a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2afd4cd4e7cd4b2920e2b196b432f415e5">03553</a>         <a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2afd4cd4e7cd4b2920e2b196b432f415e5">II_FL_NOHASH</a>    = 1 &lt;&lt; 0, <span class="comment">/* client doesn&apos;t care about hash value */</span>
<a name="l03554"></a><a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2a80b9d1f33c4a871625b34831cfe8b359">03554</a>         <a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2a80b9d1f33c4a871625b34831cfe8b359">II_FL_VARKEY</a>    = 1 &lt;&lt; 1, <span class="comment">/* keys can be of variable size */</span>
<a name="l03555"></a><a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2a8f7979c6acb3f1d02e1ce63eb65d6712">03555</a>         <a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2a8f7979c6acb3f1d02e1ce63eb65d6712">II_FL_VARREC</a>    = 1 &lt;&lt; 2, <span class="comment">/* records can be of variable size */</span>
<a name="l03556"></a><a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2abfc3c1f760cc73b895bca18d3c1b85f0">03556</a>         <a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2abfc3c1f760cc73b895bca18d3c1b85f0">II_FL_NONUNQ</a>    = 1 &lt;&lt; 3, <span class="comment">/* index supports non-unique keys */</span>
<a name="l03557"></a><a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2a8e140c3f15b9b9a0382b2eef1c068977">03557</a>         <a class="code" href="group__lustreidl.html#ggae0de4b96d30ccdb77f671c39ad5deff2a8e140c3f15b9b9a0382b2eef1c068977">II_FL_NOKEY</a>     = 1 &lt;&lt; 4, <span class="comment">/* client doesn&apos;t care about key */</span>
<a name="l03558"></a>03558 };
<a name="l03559"></a>03559 
<a name="l03560"></a><a class="code" href="group__lustreidl.html#gaca72b713885ef40d33c10faa8cf3f8f9">03560</a> <span class="preprocessor">#define LIP_MAGIC 0x8A6D6B6C</span>
<a name="l03561"></a>03561 <span class="preprocessor"></span>
<a name="l03562"></a>03562 <span class="comment">/* 4KB (= LU_PAGE_SIZE) container gathering key/record pairs */</span>
<a name="l03563"></a><a class="code" href="structlu__idxpage.html">03563</a> <span class="keyword">struct </span><a class="code" href="structlu__idxpage.html">lu_idxpage</a> {
<a name="l03564"></a>03564         <span class="comment">/* 16-byte header */</span>
<a name="l03565"></a><a class="code" href="structlu__idxpage.html#abbf5b8e4f78a624bac21aad57e5d309a">03565</a>         __u32   <a class="code" href="structlu__idxpage.html#abbf5b8e4f78a624bac21aad57e5d309a">lip_magic</a>;
<a name="l03566"></a><a class="code" href="structlu__idxpage.html#ae7e4f043e5649147c3e4264976544dfd">03566</a>         __u16   <a class="code" href="structlu__idxpage.html#ae7e4f043e5649147c3e4264976544dfd">lip_flags</a>;
<a name="l03567"></a><a class="code" href="structlu__idxpage.html#a00a2db1647742ba8a6d5bef6c089b819">03567</a>         __u16   <a class="code" href="structlu__idxpage.html#a00a2db1647742ba8a6d5bef6c089b819">lip_nr</a>;   <span class="comment">/* number of entries in the container */</span>
<a name="l03568"></a><a class="code" href="structlu__idxpage.html#a41d255ae2450fe05d3c64d69118fd95a">03568</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlu__idxpage.html#a41d255ae2450fe05d3c64d69118fd95a">lip_pad0</a>; <span class="comment">/* additional padding for future use */</span>
<a name="l03569"></a>03569 
<a name="l03570"></a>03570         <span class="comment">/* key/record pairs are stored in the remaining 4080 bytes.</span>
<a name="l03571"></a>03571 <span class="comment">         * depending upon the flags in idx_info::ii_flags, each key/record</span>
<a name="l03572"></a>03572 <span class="comment">         * pair might be preceded by:</span>
<a name="l03573"></a>03573 <span class="comment">         * - a hash value</span>
<a name="l03574"></a>03574 <span class="comment">         * - the key size (II_FL_VARKEY is set)</span>
<a name="l03575"></a>03575 <span class="comment">         * - the record size (II_FL_VARREC is set)</span>
<a name="l03576"></a>03576 <span class="comment">         *</span>
<a name="l03577"></a>03577 <span class="comment">         * For the time being, we only support fixed-size key &amp; record. */</span>
<a name="l03578"></a><a class="code" href="structlu__idxpage.html#a92febe9a0b2eba2bb50deb60d7859883">03578</a>         <span class="keywordtype">char</span>    <a class="code" href="structlu__idxpage.html#a92febe9a0b2eba2bb50deb60d7859883">lip_entries</a>[0];
<a name="l03579"></a>03579 };
<a name="l03580"></a>03580 
<a name="l03581"></a><a class="code" href="group__lustreidl.html#gaf730b7347a9e4c81575f82be466308ea">03581</a> <span class="preprocessor">#define LIP_HDR_SIZE (offsetof(struct lu_idxpage, lip_entries))</span>
<a name="l03582"></a>03582 <span class="preprocessor"></span>
<a name="l03583"></a>03583 <span class="comment">/* Gather all possible type associated with a 4KB container */</span>
<a name="l03584"></a><a class="code" href="unionlu__page.html">03584</a> <span class="keyword">union </span><a class="code" href="unionlu__page.html">lu_page</a> {
<a name="l03585"></a><a class="code" href="unionlu__page.html#a3faecb8ce1af2cceb7e70fedc541e3d6">03585</a>         <span class="keyword">struct </span><a class="code" href="structlu__dirpage.html">lu_dirpage</a>       <a class="code" href="unionlu__page.html#a3faecb8ce1af2cceb7e70fedc541e3d6">lp_dir</a>; <span class="comment">/* for MDS_READPAGE */</span>
<a name="l03586"></a><a class="code" href="unionlu__page.html#af0c1d0266a018d68c9d9287efe5c5a63">03586</a>         <span class="keyword">struct </span><a class="code" href="structlu__idxpage.html">lu_idxpage</a>       <a class="code" href="unionlu__page.html#af0c1d0266a018d68c9d9287efe5c5a63">lp_idx</a>; <span class="comment">/* for OBD_IDX_READ */</span>
<a name="l03587"></a><a class="code" href="unionlu__page.html#a97454d5157e04d5cc96e3a3713cf630b">03587</a>         <span class="keywordtype">char</span>                    <a class="code" href="unionlu__page.html#a97454d5157e04d5cc96e3a3713cf630b">lp_array</a>[<a class="code" href="group__lu__dir.html#ga789315660991e121ca57b17c12265cc8">LU_PAGE_SIZE</a>];
<a name="l03588"></a>03588 };
<a name="l03589"></a>03589 
<a name="l03590"></a>03590 <span class="comment">/* security opcodes */</span>
<a name="l03591"></a><a class="code" href="group__lustreidl.html#gacdfb3450710c7f7963d56bb45a8f2962">03591</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l03592"></a><a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a9cff094950d1ee7a6136f3d4e9378c7d">03592</a>         <a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a9cff094950d1ee7a6136f3d4e9378c7d">SEC_CTX_INIT</a>            = 801,
<a name="l03593"></a><a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a45a49e18b2f0a93d45fbea33a017b26d">03593</a>         <a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a45a49e18b2f0a93d45fbea33a017b26d">SEC_CTX_INIT_CONT</a>       = 802,
<a name="l03594"></a><a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962af773e8a6a2206fc855c4e45d1f865de4">03594</a>         <a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962af773e8a6a2206fc855c4e45d1f865de4">SEC_CTX_FINI</a>            = 803,
<a name="l03595"></a><a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962af1d8bc7d9180f4bde6dbd5c619f2f358">03595</a>         <a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962af1d8bc7d9180f4bde6dbd5c619f2f358">SEC_LAST_OPC</a>,
<a name="l03596"></a><a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a41d3573fe0049998897753e86a8e2ecd">03596</a>         <a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a41d3573fe0049998897753e86a8e2ecd">SEC_FIRST_OPC</a>           = <a class="code" href="group__lustreidl.html#ggacdfb3450710c7f7963d56bb45a8f2962a9cff094950d1ee7a6136f3d4e9378c7d">SEC_CTX_INIT</a>
<a name="l03597"></a>03597 } <a class="code" href="group__lustreidl.html#gacdfb3450710c7f7963d56bb45a8f2962">sec_cmd_t</a>;
<a name="l03598"></a>03598 
<a name="l03599"></a>03599 <span class="comment">/*</span>
<a name="l03600"></a>03600 <span class="comment"> * capa related definitions</span>
<a name="l03601"></a>03601 <span class="comment"> */</span>
<a name="l03602"></a><a class="code" href="group__lustreidl.html#gabfdcf2fff568660619c7f76ffd98349f">03602</a> <span class="preprocessor">#define CAPA_HMAC_MAX_LEN       64</span>
<a name="l03603"></a><a class="code" href="group__lustreidl.html#ga52ffe40f53e15fda370ad5dfa9a77f78">03603</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPA_HMAC_KEY_MAX_LEN   56</span>
<a name="l03604"></a>03604 <span class="preprocessor"></span>
<a name="l03605"></a>03605 <span class="comment">/* NB take care when changing the sequence of elements this struct,</span>
<a name="l03606"></a>03606 <span class="comment"> * because the offset info is used in find_capa() */</span>
<a name="l03607"></a><a class="code" href="structlustre__capa.html">03607</a> <span class="keyword">struct </span><a class="code" href="structlustre__capa.html">lustre_capa</a> {
<a name="l03608"></a><a class="code" href="structlustre__capa.html#a2c3654dfc95f15995512e0ac53c07fb1">03608</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structlustre__capa.html#a2c3654dfc95f15995512e0ac53c07fb1">lc_fid</a>;         
<a name="l03609"></a><a class="code" href="structlustre__capa.html#a3c8a934723757fdff76cbdcf57e98081">03609</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structlustre__capa.html#a3c8a934723757fdff76cbdcf57e98081" title="fid">lc_opc</a>;         
<a name="l03610"></a><a class="code" href="structlustre__capa.html#ad23343416034ff9d6c87470b735e885f">03610</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structlustre__capa.html#ad23343416034ff9d6c87470b735e885f" title="operations allowed">lc_uid</a>;         
<a name="l03611"></a><a class="code" href="structlustre__capa.html#aab30292d592a4457f0265d835cb9947a">03611</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structlustre__capa.html#aab30292d592a4457f0265d835cb9947a" title="file owner">lc_gid</a>;         
<a name="l03612"></a><a class="code" href="structlustre__capa.html#ae8ce626abaa10c91db7d97364cc4120c">03612</a>         __u32           <a class="code" href="structlustre__capa.html#ae8ce626abaa10c91db7d97364cc4120c" title="file group">lc_flags</a>;       
<a name="l03613"></a><a class="code" href="structlustre__capa.html#abdbc84a651e041754fb3d482b0454c46">03613</a>         __u32           <a class="code" href="structlustre__capa.html#abdbc84a651e041754fb3d482b0454c46" title="HMAC algorithm &amp;amp; flags.">lc_keyid</a>;       
<a name="l03614"></a><a class="code" href="structlustre__capa.html#aefe24f64adc6af336c8b5e1381d74893">03614</a>         __u32           <a class="code" href="structlustre__capa.html#aefe24f64adc6af336c8b5e1381d74893" title="key# used for the capability">lc_timeout</a>;     
<a name="l03615"></a><a class="code" href="structlustre__capa.html#a4dbc96478c2d7bcc08f948540811e5c4">03615</a>         __u32           <a class="code" href="structlustre__capa.html#a4dbc96478c2d7bcc08f948540811e5c4" title="capa timeout value (sec)">lc_expiry</a>;      
<a name="l03616"></a><a class="code" href="structlustre__capa.html#a346a2be351543eb3f0607f9e47e93703">03616</a>         __u8            <a class="code" href="structlustre__capa.html#a346a2be351543eb3f0607f9e47e93703" title="expiry time (sec)">lc_hmac</a>[<a class="code" href="group__lustreidl.html#gabfdcf2fff568660619c7f76ffd98349f">CAPA_HMAC_MAX_LEN</a>];   
<a name="l03617"></a>03617 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03618"></a>03618 
<a name="l03620"></a>03620 <span class="keyword">enum</span> {
<a name="l03621"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181faa7a9dd0dc7d6379cdb02ae5ef99b22b7">03621</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181faa7a9dd0dc7d6379cdb02ae5ef99b22b7" title="write object data">CAPA_OPC_BODY_WRITE</a>   = 1&lt;&lt;0,  
<a name="l03622"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa733f97e5d3613df5d34383fe8cdf093d">03622</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa733f97e5d3613df5d34383fe8cdf093d" title="read object data">CAPA_OPC_BODY_READ</a>    = 1&lt;&lt;1,  
<a name="l03623"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fac17de419c843923a0f7a9f753ab6459d">03623</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fac17de419c843923a0f7a9f753ab6459d" title="lookup object fid">CAPA_OPC_INDEX_LOOKUP</a> = 1&lt;&lt;2,  
<a name="l03624"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fafc8d115f699e0ba82a3a70deed659abf">03624</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fafc8d115f699e0ba82a3a70deed659abf" title="insert object fid">CAPA_OPC_INDEX_INSERT</a> = 1&lt;&lt;3,  
<a name="l03625"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa3c098388950b20de2ca26bd8801e2de7">03625</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa3c098388950b20de2ca26bd8801e2de7" title="delete object fid">CAPA_OPC_INDEX_DELETE</a> = 1&lt;&lt;4,  
<a name="l03626"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa667ee92b8de866096746722b54659542">03626</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa667ee92b8de866096746722b54659542" title="write oss object data">CAPA_OPC_OSS_WRITE</a>    = 1&lt;&lt;5,  
<a name="l03627"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa69b17abcba8a5eafd1aad2d634d2780a">03627</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa69b17abcba8a5eafd1aad2d634d2780a" title="read oss object data">CAPA_OPC_OSS_READ</a>     = 1&lt;&lt;6,  
<a name="l03628"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa47502b60956db2ce5fd1569fe9b131af">03628</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa47502b60956db2ce5fd1569fe9b131af" title="truncate oss object">CAPA_OPC_OSS_TRUNC</a>    = 1&lt;&lt;7,  
<a name="l03629"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa92f3992d62328eaa6a24071f4c92c665">03629</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa92f3992d62328eaa6a24071f4c92c665" title="destroy oss object">CAPA_OPC_OSS_DESTROY</a>  = 1&lt;&lt;8,  
<a name="l03630"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa197c8502e167a44f157185ec6eff1535">03630</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fa197c8502e167a44f157185ec6eff1535" title="write object meta data">CAPA_OPC_META_WRITE</a>   = 1&lt;&lt;9,  
<a name="l03631"></a><a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fad9ed3b88c8a9ea393510bda56889f182">03631</a>         <a class="code" href="group__lustreidl.html#gga5d76b81b0ad4c19007a781d4edb8181fad9ed3b88c8a9ea393510bda56889f182" title="read object meta data">CAPA_OPC_META_READ</a>    = 1&lt;&lt;10, 
<a name="l03632"></a>03632 };
<a name="l03633"></a>03633 
<a name="l03634"></a><a class="code" href="group__lustreidl.html#gaab98888e957e89bdae56062c203585d4">03634</a> <span class="preprocessor">#define CAPA_OPC_OSS_RW (CAPA_OPC_OSS_READ | CAPA_OPC_OSS_WRITE)</span>
<a name="l03635"></a><a class="code" href="group__lustreidl.html#ga71b5a0c7aca43a9ca3b67115549d8f0e">03635</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPA_OPC_MDS_ONLY                                                   \</span>
<a name="l03636"></a>03636 <span class="preprocessor">        (CAPA_OPC_BODY_WRITE | CAPA_OPC_BODY_READ | CAPA_OPC_INDEX_LOOKUP | \</span>
<a name="l03637"></a>03637 <span class="preprocessor">         CAPA_OPC_INDEX_INSERT | CAPA_OPC_INDEX_DELETE)</span>
<a name="l03638"></a><a class="code" href="group__lustreidl.html#ga44682c580c5198738d3a49319593dc7f">03638</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPA_OPC_OSS_ONLY                                                   \</span>
<a name="l03639"></a>03639 <span class="preprocessor">        (CAPA_OPC_OSS_WRITE | CAPA_OPC_OSS_READ | CAPA_OPC_OSS_TRUNC |      \</span>
<a name="l03640"></a>03640 <span class="preprocessor">         CAPA_OPC_OSS_DESTROY)</span>
<a name="l03641"></a><a class="code" href="group__lustreidl.html#ga91a8443428af051613ed8064e2adcbcd">03641</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPA_OPC_MDS_DEFAULT ~CAPA_OPC_OSS_ONLY</span>
<a name="l03642"></a><a class="code" href="group__lustreidl.html#ga973c7ca83757d94ccc080d9edeb756fa">03642</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPA_OPC_OSS_DEFAULT ~(CAPA_OPC_MDS_ONLY | CAPA_OPC_OSS_ONLY)</span>
<a name="l03643"></a>03643 <span class="preprocessor"></span>
<a name="l03644"></a><a class="code" href="group__lustreidl.html#ga312d86f284e740c96b24fd86c076e460">03644</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__lustreidl.html#ga312d86f284e740c96b24fd86c076e460">lovea_slot_is_dummy</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *obj)
<a name="l03645"></a>03645 {
<a name="l03646"></a>03646         <span class="comment">/* zero area does not care about the bytes-order. */</span>
<a name="l03647"></a>03647         <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="structlov__ost__data__v1.html#a70d7c90790d5dfb9f75c223033a0a5a5">l_ost_oi</a>.<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_id == 0 &amp;&amp; obj-&gt;<a class="code" href="structlov__ost__data__v1.html#a70d7c90790d5dfb9f75c223033a0a5a5">l_ost_oi</a>.<a class="code" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">oi</a>.oi_seq == 0 &amp;&amp;
<a name="l03648"></a>03648             obj-&gt;<a class="code" href="structlov__ost__data__v1.html#aa66bbb466cc1f24f4b2a3485443ab102">l_ost_idx</a> == 0 &amp;&amp; obj-&gt;<a class="code" href="structlov__ost__data__v1.html#a6c85e6a4cb47855412c8791e22d4cb33">l_ost_gen</a> == 0)
<a name="l03649"></a>03649                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03650"></a>03650 
<a name="l03651"></a>03651         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03652"></a>03652 }
<a name="l03653"></a>03653 
<a name="l03654"></a>03654 <span class="comment">/* lustre_capa::lc_hmac_alg */</span>
<a name="l03655"></a>03655 <span class="keyword">enum</span> {
<a name="l03656"></a><a class="code" href="group__lustreidl.html#ggaac34dfe6c6b73b43a4656c9dce041034a6122b41fa01740b9c48d367a23150847">03656</a>         <a class="code" href="group__lustreidl.html#ggaac34dfe6c6b73b43a4656c9dce041034a6122b41fa01740b9c48d367a23150847" title="sha1 algorithm">CAPA_HMAC_ALG_SHA1</a> = 1, 
<a name="l03657"></a><a class="code" href="group__lustreidl.html#ggaac34dfe6c6b73b43a4656c9dce041034a3d1434c10ce1cbe9d0b2df2024ff5036">03657</a>         <a class="code" href="group__lustreidl.html#ggaac34dfe6c6b73b43a4656c9dce041034a3d1434c10ce1cbe9d0b2df2024ff5036">CAPA_HMAC_ALG_MAX</a>,
<a name="l03658"></a>03658 };
<a name="l03659"></a>03659 
<a name="l03660"></a><a class="code" href="group__lustreidl.html#ga24622180a0db05dd9ff20e115bfe4a21">03660</a> <span class="preprocessor">#define CAPA_FL_MASK            0x00ffffff</span>
<a name="l03661"></a><a class="code" href="group__lustreidl.html#gab5434230aa2960346ca9d5e1f235a0cc">03661</a> <span class="preprocessor"></span><span class="preprocessor">#define CAPA_HMAC_ALG_MASK      0xff000000</span>
<a name="l03662"></a>03662 <span class="preprocessor"></span>
<a name="l03663"></a><a class="code" href="structlustre__capa__key.html">03663</a> <span class="keyword">struct </span><a class="code" href="structlustre__capa__key.html">lustre_capa_key</a> {
<a name="l03664"></a><a class="code" href="structlustre__capa__key.html#a66b2a9f0deeb906d774b4fdc187cc75e">03664</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structlustre__capa__key.html#a66b2a9f0deeb906d774b4fdc187cc75e" title="mds#">lk_seq</a>;       
<a name="l03665"></a><a class="code" href="structlustre__capa__key.html#a5e0170a1da4e009e6962d65836f5ec53">03665</a>         __u32   <a class="code" href="structlustre__capa__key.html#a5e0170a1da4e009e6962d65836f5ec53" title="key#">lk_keyid</a>;     
<a name="l03666"></a><a class="code" href="structlustre__capa__key.html#a79dc20a09d5c40a2f89b29bef48f4d64">03666</a>         __u32   <a class="code" href="structlustre__capa__key.html#a79dc20a09d5c40a2f89b29bef48f4d64">lk_padding</a>;
<a name="l03667"></a><a class="code" href="structlustre__capa__key.html#a16e960cd4c7f6fe0a830763f52629096">03667</a>         __u8    <a class="code" href="structlustre__capa__key.html#a16e960cd4c7f6fe0a830763f52629096" title="key">lk_key</a>[<a class="code" href="group__lustreidl.html#ga52ffe40f53e15fda370ad5dfa9a77f78">CAPA_HMAC_KEY_MAX_LEN</a>];    
<a name="l03668"></a>03668 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03669"></a>03669 
<a name="l03671"></a><a class="code" href="group__lustreidl.html#gae31093a0ed66ab78162b36145638a2a0">03671</a> <span class="preprocessor">#define LINK_EA_MAGIC 0x11EAF1DFUL</span>
<a name="l03672"></a><a class="code" href="structlink__ea__header.html">03672</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structlink__ea__header.html">link_ea_header</a> {
<a name="l03673"></a><a class="code" href="structlink__ea__header.html#a4c26e22e30caccbf170abaf0d79172d7">03673</a>         __u32 <a class="code" href="structlink__ea__header.html#a4c26e22e30caccbf170abaf0d79172d7">leh_magic</a>;
<a name="l03674"></a><a class="code" href="structlink__ea__header.html#aa10d2faa939a1e64c9c0230865ee2121">03674</a>         __u32 <a class="code" href="structlink__ea__header.html#aa10d2faa939a1e64c9c0230865ee2121">leh_reccount</a>;
<a name="l03675"></a><a class="code" href="structlink__ea__header.html#a82dc2b2ac1cb7d8051a61a1ec68db001">03675</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlink__ea__header.html#a82dc2b2ac1cb7d8051a61a1ec68db001">leh_len</a>;      <span class="comment">/* total size */</span>
<a name="l03676"></a>03676         <span class="comment">/* future use */</span>
<a name="l03677"></a><a class="code" href="structlink__ea__header.html#a98beedd98ef43ea3575479d42b4ae42d">03677</a>         __u32 <a class="code" href="structlink__ea__header.html#a98beedd98ef43ea3575479d42b4ae42d">padding1</a>;
<a name="l03678"></a><a class="code" href="structlink__ea__header.html#a36dd6dddb75417336a1219ae3d41341c">03678</a>         __u32 <a class="code" href="structlink__ea__header.html#a36dd6dddb75417336a1219ae3d41341c">padding2</a>;
<a name="l03679"></a>03679 };
<a name="l03680"></a>03680 
<a name="l03684"></a><a class="code" href="structlink__ea__entry.html">03684</a> <span class="keyword">struct </span><a class="code" href="structlink__ea__entry.html" title="Hardlink data is name and parent fid.">link_ea_entry</a> {
<a name="l03686"></a><a class="code" href="structlink__ea__entry.html#ac329c586a9a51a478d70ac9d3694bf2a">03686</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>      <a class="code" href="structlink__ea__entry.html#ac329c586a9a51a478d70ac9d3694bf2a" title="__u16 stored big-endian, unaligned">lee_reclen</a>[2];
<a name="l03687"></a><a class="code" href="structlink__ea__entry.html#a1d88188b6d943529abb41bc849b529eb">03687</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>      <a class="code" href="structlink__ea__entry.html#a1d88188b6d943529abb41bc849b529eb">lee_parent_fid</a>[<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>)];
<a name="l03688"></a><a class="code" href="structlink__ea__entry.html#a3cecac600ba11b2ad918850a142eba0e">03688</a>         <span class="keywordtype">char</span>               <a class="code" href="structlink__ea__entry.html#a3cecac600ba11b2ad918850a142eba0e">lee_name</a>[0];
<a name="l03689"></a>03689 }<a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03690"></a>03690 
<a name="l03692"></a><a class="code" href="structgetinfo__fid2path.html">03692</a> <span class="keyword">struct </span><a class="code" href="structgetinfo__fid2path.html" title="fid2path request/reply structure">getinfo_fid2path</a> {
<a name="l03693"></a><a class="code" href="structgetinfo__fid2path.html#a3778ddcb31f669c84c9165a425671fa9">03693</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structgetinfo__fid2path.html#a3778ddcb31f669c84c9165a425671fa9">gf_fid</a>;
<a name="l03694"></a><a class="code" href="structgetinfo__fid2path.html#a76ec44d74a921af7b166cae9d52e71d9">03694</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structgetinfo__fid2path.html#a76ec44d74a921af7b166cae9d52e71d9">gf_recno</a>;
<a name="l03695"></a><a class="code" href="structgetinfo__fid2path.html#a31947c9d34b99725767abcb2eb2f8b21">03695</a>         __u32           <a class="code" href="structgetinfo__fid2path.html#a31947c9d34b99725767abcb2eb2f8b21">gf_linkno</a>;
<a name="l03696"></a><a class="code" href="structgetinfo__fid2path.html#a9b07b0a2629b838040d0ff7fbac7327a">03696</a>         __u32           <a class="code" href="structgetinfo__fid2path.html#a9b07b0a2629b838040d0ff7fbac7327a">gf_pathlen</a>;
<a name="l03697"></a>03697         <span class="keyword">union </span>{
<a name="l03698"></a><a class="code" href="structgetinfo__fid2path.html#a2db548ec5d43f22cd8510bf212662713">03698</a>                 <span class="keywordtype">char</span>            <a class="code" href="structgetinfo__fid2path.html#a2db548ec5d43f22cd8510bf212662713">gf_path</a>[0];
<a name="l03699"></a><a class="code" href="structgetinfo__fid2path.html#a0e9084ccd95a96befd600a3e175d515e">03699</a>                 <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structgetinfo__fid2path.html#a0e9084ccd95a96befd600a3e175d515e">gf_root_fid</a>[0];
<a name="l03700"></a>03700         } <a class="code" href="structgetinfo__fid2path.html#afc20bdbe4bf31576ca10fc0ad6a7e8e9">gf_u</a>;
<a name="l03701"></a>03701 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03702"></a>03702 
<a name="l03704"></a><a class="code" href="structgetparent.html">03704</a> <span class="keyword">struct </span><a class="code" href="structgetparent.html" title="path2parent request/reply structures">getparent</a> {
<a name="l03705"></a><a class="code" href="structgetparent.html#a6612847ce0e2a2ba08995d36e22cfb0e">03705</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structgetparent.html#a6612847ce0e2a2ba08995d36e22cfb0e" title="parent FID">gp_fid</a>;         
<a name="l03706"></a><a class="code" href="structgetparent.html#a05dbdc02fc7084cb7e823399e9f03609">03706</a>         __u32           <a class="code" href="structgetparent.html#a05dbdc02fc7084cb7e823399e9f03609" title="hardlink number">gp_linkno</a>;      
<a name="l03707"></a><a class="code" href="structgetparent.html#a9cb02d74dfc853f58a5bca0587a46964">03707</a>         __u32           <a class="code" href="structgetparent.html#a9cb02d74dfc853f58a5bca0587a46964" title="size of the name field">gp_name_size</a>;   
<a name="l03708"></a><a class="code" href="structgetparent.html#a5e77c308b670177b24442832290f1293">03708</a>         <span class="keywordtype">char</span>            <a class="code" href="structgetparent.html#a5e77c308b670177b24442832290f1293" title="zero-terminated link name">gp_name</a>[0];     
<a name="l03709"></a>03709 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03710"></a>03710 
<a name="l03711"></a>03711 <span class="keyword">enum</span> {
<a name="l03712"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba9ee8145995add069fc466343f5ee20d3">03712</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba9ee8145995add069fc466343f5ee20d3">LAYOUT_INTENT_ACCESS</a>    = 0,
<a name="l03713"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba7deb67e6f459e7d3f71dfb88f9c55b24">03713</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba7deb67e6f459e7d3f71dfb88f9c55b24">LAYOUT_INTENT_READ</a>      = 1,
<a name="l03714"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebbaec8da25f123091cacbac3090b064635c">03714</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebbaec8da25f123091cacbac3090b064635c">LAYOUT_INTENT_WRITE</a>     = 2,
<a name="l03715"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebbad3ce47c2178c4d4d0ce9025c99dfb3c9">03715</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebbad3ce47c2178c4d4d0ce9025c99dfb3c9">LAYOUT_INTENT_GLIMPSE</a>   = 3,
<a name="l03716"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba23db760a1c7af4a3517cb673f305a195">03716</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba23db760a1c7af4a3517cb673f305a195">LAYOUT_INTENT_TRUNC</a>     = 4,
<a name="l03717"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebbae6d4023fc498aa6e15e0137b9c91fae1">03717</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebbae6d4023fc498aa6e15e0137b9c91fae1">LAYOUT_INTENT_RELEASE</a>   = 5,
<a name="l03718"></a><a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba7962c8b9608df6e7022157bccf411594">03718</a>         <a class="code" href="group__lustreidl.html#gga0ed680fdb405e7195d9f14032851eebba7962c8b9608df6e7022157bccf411594">LAYOUT_INTENT_RESTORE</a>   = 6
<a name="l03719"></a>03719 };
<a name="l03720"></a>03720 
<a name="l03721"></a>03721 <span class="comment">/* enqueue layout lock with intent */</span>
<a name="l03722"></a><a class="code" href="structlayout__intent.html">03722</a> <span class="keyword">struct </span><a class="code" href="structlayout__intent.html">layout_intent</a> {
<a name="l03723"></a><a class="code" href="structlayout__intent.html#a221cf08182a4068f948a668c066ddee1">03723</a>         __u32 <a class="code" href="structlayout__intent.html#a221cf08182a4068f948a668c066ddee1">li_opc</a>; <span class="comment">/* intent operation for enqueue, read, write etc */</span>
<a name="l03724"></a><a class="code" href="structlayout__intent.html#aa9225d27cc606add74019d810bb0c423">03724</a>         __u32 <a class="code" href="structlayout__intent.html#aa9225d27cc606add74019d810bb0c423">li_flags</a>;
<a name="l03725"></a><a class="code" href="structlayout__intent.html#a53fd67bfd82005992e06beb194e3f827">03725</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlayout__intent.html#a53fd67bfd82005992e06beb194e3f827">li_start</a>;
<a name="l03726"></a><a class="code" href="structlayout__intent.html#a595f428b33b60fa57b6fffdd51070e22">03726</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="code" href="structlayout__intent.html#a595f428b33b60fa57b6fffdd51070e22">li_end</a>;
<a name="l03727"></a>03727 };
<a name="l03728"></a>03728 
<a name="l03734"></a><a class="code" href="structhsm__progress__kernel.html">03734</a> <span class="keyword">struct </span><a class="code" href="structhsm__progress__kernel.html" title="On the wire version of hsm_progress structure.">hsm_progress_kernel</a> {
<a name="l03735"></a>03735         <span class="comment">/* Field taken from struct hsm_progress */</span>
<a name="l03736"></a><a class="code" href="structhsm__progress__kernel.html#afd48dd63c07cd0a976a6f079f2c2ce2f">03736</a>         <a class="code" href="structlu__fid.html" title="File IDentifier.">lustre_fid</a>              <a class="code" href="structhsm__progress__kernel.html#afd48dd63c07cd0a976a6f079f2c2ce2f">hpk_fid</a>;
<a name="l03737"></a><a class="code" href="structhsm__progress__kernel.html#acd69473a5dd7b801a58406b043c432b2">03737</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structhsm__progress__kernel.html#acd69473a5dd7b801a58406b043c432b2">hpk_cookie</a>;
<a name="l03738"></a><a class="code" href="structhsm__progress__kernel.html#aeaabad7cd43d4742079541386f476755">03738</a>         <span class="keyword">struct </span><a class="code" href="structhsm__extent.html">hsm_extent</a>       <a class="code" href="structhsm__progress__kernel.html#aeaabad7cd43d4742079541386f476755">hpk_extent</a>;
<a name="l03739"></a><a class="code" href="structhsm__progress__kernel.html#ac88d3f8f793e9988b436c87980d45f9e">03739</a>         __u16                   <a class="code" href="structhsm__progress__kernel.html#ac88d3f8f793e9988b436c87980d45f9e">hpk_flags</a>;
<a name="l03740"></a><a class="code" href="structhsm__progress__kernel.html#a5948469996b462b1869dbbbe4a379df5">03740</a>         __u16                   <a class="code" href="structhsm__progress__kernel.html#a5948469996b462b1869dbbbe4a379df5">hpk_errval</a>; <span class="comment">/* positive val */</span>
<a name="l03741"></a><a class="code" href="structhsm__progress__kernel.html#a5c54d661929f3298b1ee90222fec2b4a">03741</a>         __u32                   <a class="code" href="structhsm__progress__kernel.html#a5c54d661929f3298b1ee90222fec2b4a">hpk_padding1</a>;
<a name="l03742"></a>03742         <span class="comment">/* Additional fields */</span>
<a name="l03743"></a><a class="code" href="structhsm__progress__kernel.html#aff2e4a28e5524886b62ee3c08a1ecd49">03743</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structhsm__progress__kernel.html#aff2e4a28e5524886b62ee3c08a1ecd49">hpk_data_version</a>;
<a name="l03744"></a><a class="code" href="structhsm__progress__kernel.html#a58f86dcc9db57cf30f01783527810836">03744</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structhsm__progress__kernel.html#a58f86dcc9db57cf30f01783527810836">hpk_padding2</a>;
<a name="l03745"></a>03745 } <a class="code" href="fid_8mod_8c.html#a804f230e6220e338767d15b94fc5801d">__attribute__</a>((<a class="code" href="group__lustreidl.html#ga30372a269f5fc08f064b7e94437589bb" title="Identifier for a single log object.">packed</a>));
<a name="l03746"></a>03746 
<a name="l03783"></a><a class="code" href="group__lustreidl.html#ga2d1a90f202540bfbcbd72a8c0f94b586">03783</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#ga2d1a90f202540bfbcbd72a8c0f94b586" title="OUT_UPDATE RPC Format.">update_type</a> {
<a name="l03784"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586af2625f1d8d96009edab8c338adf196ef">03784</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586af2625f1d8d96009edab8c338adf196ef">OUT_START</a>               = 0,
<a name="l03785"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586ad40a8cf7212d0e9186afae8c248b170e">03785</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586ad40a8cf7212d0e9186afae8c248b170e">OUT_CREATE</a>              = 1,
<a name="l03786"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a458a757397ae8cdb41a514582cd179dc">03786</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a458a757397ae8cdb41a514582cd179dc">OUT_DESTROY</a>             = 2,
<a name="l03787"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a8e9697036fc0096f6b5e2e119dd64d4b">03787</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a8e9697036fc0096f6b5e2e119dd64d4b">OUT_REF_ADD</a>             = 3,
<a name="l03788"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a1464664334225be19fb046470de4b9ef">03788</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a1464664334225be19fb046470de4b9ef">OUT_REF_DEL</a>             = 4,
<a name="l03789"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a9d7d20f0bdf123028c17e80f443d1f49">03789</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a9d7d20f0bdf123028c17e80f443d1f49">OUT_ATTR_SET</a>            = 5,
<a name="l03790"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a50f5f934b155a8c4c14cc25fa1f8a635">03790</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a50f5f934b155a8c4c14cc25fa1f8a635">OUT_ATTR_GET</a>            = 6,
<a name="l03791"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a6a4fa2d2cd7643a6e9f80d8ab4f5f502">03791</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a6a4fa2d2cd7643a6e9f80d8ab4f5f502">OUT_XATTR_SET</a>           = 7,
<a name="l03792"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a79dbda0df8a97b9d3a2da41d0316e73b">03792</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a79dbda0df8a97b9d3a2da41d0316e73b">OUT_XATTR_GET</a>           = 8,
<a name="l03793"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a6a15aaf363fade942dc8b158a962245d">03793</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a6a15aaf363fade942dc8b158a962245d">OUT_INDEX_LOOKUP</a>        = 9,
<a name="l03794"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a70df7367cf818023b4000c85573ad03a">03794</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a70df7367cf818023b4000c85573ad03a">OUT_INDEX_INSERT</a>        = 10,
<a name="l03795"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586ac86dcbb94c937ebcd43c21030db30edd">03795</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586ac86dcbb94c937ebcd43c21030db30edd">OUT_INDEX_DELETE</a>        = 11,
<a name="l03796"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586aecf98f45b4260d6b4e78fd8bd9beb542">03796</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586aecf98f45b4260d6b4e78fd8bd9beb542">OUT_WRITE</a>               = 12,
<a name="l03797"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a93cf4b6ad421a5f74f74ff1b566ef7e0">03797</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a93cf4b6ad421a5f74f74ff1b566ef7e0">OUT_XATTR_DEL</a>           = 13,
<a name="l03798"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a97cc01efc58263d5d48a0f2764891a58">03798</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a97cc01efc58263d5d48a0f2764891a58">OUT_PUNCH</a>               = 14,
<a name="l03799"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a9082b3e168f650a708bfaa46c42f96d0">03799</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a9082b3e168f650a708bfaa46c42f96d0">OUT_READ</a>                = 15,
<a name="l03800"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586ac656347a3ab7fbf4bdca0d38d7f2f915">03800</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586ac656347a3ab7fbf4bdca0d38d7f2f915">OUT_NOOP</a>                = 16,
<a name="l03801"></a><a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a390bdb1e4272dff84da869479e39717d">03801</a>         <a class="code" href="group__lustreidl.html#gga2d1a90f202540bfbcbd72a8c0f94b586a390bdb1e4272dff84da869479e39717d">OUT_LAST</a>
<a name="l03802"></a>03802 };
<a name="l03803"></a>03803 
<a name="l03804"></a><a class="code" href="group__lustreidl.html#gabfe32a1388ab22567287dcc05d7a85f6">03804</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gabfe32a1388ab22567287dcc05d7a85f6">update_flag</a> {
<a name="l03805"></a><a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6a91c13d0007a3f4f3d52680e7c97e84ed">03805</a>         <a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6a91c13d0007a3f4f3d52680e7c97e84ed">UPDATE_FL_OST</a>           = 0x00000001,   <span class="comment">/* op from OST (not MDT) */</span>
<a name="l03806"></a><a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6ac7d87564636213c5eb5dc24d3ed21ea9">03806</a>         <a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6ac7d87564636213c5eb5dc24d3ed21ea9">UPDATE_FL_SYNC</a>          = 0x00000002,   <span class="comment">/* commit before replying */</span>
<a name="l03807"></a><a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6a16141262f1637ed002ae63c62fe1a5d0">03807</a>         <a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6a16141262f1637ed002ae63c62fe1a5d0">UPDATE_FL_COMMITTED</a>     = 0x00000004,   <span class="comment">/* op committed globally */</span>
<a name="l03808"></a><a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6a8596552415f7a4dac30dabc79b360ae1">03808</a>         <a class="code" href="group__lustreidl.html#ggabfe32a1388ab22567287dcc05d7a85f6a8596552415f7a4dac30dabc79b360ae1">UPDATE_FL_NOLOG</a>         = 0x00000008    <span class="comment">/* for idempotent updates */</span>
<a name="l03809"></a>03809 };
<a name="l03810"></a>03810 
<a name="l03811"></a><a class="code" href="structobject__update__param.html">03811</a> <span class="keyword">struct </span><a class="code" href="structobject__update__param.html">object_update_param</a> {
<a name="l03812"></a><a class="code" href="structobject__update__param.html#aa13ecdd0d46b5e5065dccbf185300d30">03812</a>         __u16   <a class="code" href="structobject__update__param.html#aa13ecdd0d46b5e5065dccbf185300d30">oup_len</a>;        <span class="comment">/* length of this parameter */</span>
<a name="l03813"></a><a class="code" href="structobject__update__param.html#af4c2204aeaea264c9eb96ecddc10bf4a">03813</a>         __u16   <a class="code" href="structobject__update__param.html#af4c2204aeaea264c9eb96ecddc10bf4a">oup_padding</a>;
<a name="l03814"></a><a class="code" href="structobject__update__param.html#a8d5fdca5459dd87351ca2c1229aaff25">03814</a>         __u32   <a class="code" href="structobject__update__param.html#a8d5fdca5459dd87351ca2c1229aaff25">oup_padding2</a>;
<a name="l03815"></a><a class="code" href="structobject__update__param.html#aec4c8816c45a563d520e9189a59b7c2a">03815</a>         <span class="keywordtype">char</span>    <a class="code" href="structobject__update__param.html#aec4c8816c45a563d520e9189a59b7c2a">oup_buf</a>[0];
<a name="l03816"></a>03816 };
<a name="l03817"></a>03817 
<a name="l03818"></a>03818 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span>
<a name="l03819"></a><a class="code" href="group__lustreidl.html#ga309385e5a4a2c8f3b6a58ed702afb59a">03819</a> <a class="code" href="group__lustreidl.html#ga309385e5a4a2c8f3b6a58ed702afb59a">object_update_param_size</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structobject__update__param.html">object_update_param</a> *param)
<a name="l03820"></a>03820 {
<a name="l03821"></a>03821         <span class="keywordflow">return</span> <a class="code" href="group__lustreuser.html#ga605663c49f0739d2448d229b0ba3474d">cfs_size_round</a>(<span class="keyword">sizeof</span>(*param) + param-&gt;<a class="code" href="structobject__update__param.html#aa13ecdd0d46b5e5065dccbf185300d30">oup_len</a>);
<a name="l03822"></a>03822 }
<a name="l03823"></a>03823 
<a name="l03824"></a>03824 <span class="comment">/* object update */</span>
<a name="l03825"></a><a class="code" href="structobject__update.html">03825</a> <span class="keyword">struct </span><a class="code" href="structobject__update.html">object_update</a> {
<a name="l03826"></a><a class="code" href="structobject__update.html#ab5d2b4b2a78274191e903ce2eee98dd4">03826</a>         __u16           <a class="code" href="structobject__update.html#ab5d2b4b2a78274191e903ce2eee98dd4">ou_type</a>;                <span class="comment">/* enum update_type */</span>
<a name="l03827"></a><a class="code" href="structobject__update.html#ac8083368f10b3535a75fffd059926c1e">03827</a>         __u16           <a class="code" href="structobject__update.html#ac8083368f10b3535a75fffd059926c1e">ou_params_count</a>;        <span class="comment">/* update parameters count */</span>
<a name="l03828"></a><a class="code" href="structobject__update.html#a5c8e425beedc917770f55dfb865582bf">03828</a>         __u32           <a class="code" href="structobject__update.html#a5c8e425beedc917770f55dfb865582bf">ou_result_size</a>;         <span class="comment">/* how many bytes can return */</span>
<a name="l03829"></a><a class="code" href="structobject__update.html#a628d3e843d208af01bdf4495bfd42758">03829</a>         __u32           <a class="code" href="structobject__update.html#a628d3e843d208af01bdf4495bfd42758">ou_flags</a>;               <span class="comment">/* enum update_flag */</span>
<a name="l03830"></a><a class="code" href="structobject__update.html#aa053ef5020acb7d44f0fedb917d358fd">03830</a>         __u32           <a class="code" href="structobject__update.html#aa053ef5020acb7d44f0fedb917d358fd">ou_padding1</a>;            <span class="comment">/* padding 1 */</span>
<a name="l03831"></a><a class="code" href="structobject__update.html#a184f90dade42b38e6b92b7a99ab8da3c">03831</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structobject__update.html#a184f90dade42b38e6b92b7a99ab8da3c">ou_batchid</a>;             <span class="comment">/* op transno on master */</span>
<a name="l03832"></a><a class="code" href="structobject__update.html#aa7baad863d195c8fc120aad847192341">03832</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structobject__update.html#aa7baad863d195c8fc120aad847192341">ou_fid</a>;                 <span class="comment">/* object to be updated */</span>
<a name="l03833"></a><a class="code" href="structobject__update.html#afdf0a16b17078c0fb49d33e05733949b">03833</a>         <span class="keyword">struct </span><a class="code" href="structobject__update__param.html">object_update_param</a> <a class="code" href="structobject__update.html#afdf0a16b17078c0fb49d33e05733949b">ou_params</a>[0]; <span class="comment">/* update params */</span>
<a name="l03834"></a>03834 };
<a name="l03835"></a>03835 
<a name="l03836"></a><a class="code" href="group__lustreidl.html#ga54ab4236368e20c06a68ac7ec64f22a5">03836</a> <span class="preprocessor">#define UPDATE_REQUEST_MAGIC_V1 0xBDDE0001</span>
<a name="l03837"></a><a class="code" href="group__lustreidl.html#gab07118a8f5127d58bc3490e2f6cb4740">03837</a> <span class="preprocessor"></span><span class="preprocessor">#define UPDATE_REQUEST_MAGIC_V2 0xBDDE0002</span>
<a name="l03838"></a><a class="code" href="group__lustreidl.html#ga5167a96a0a3cec71b4d3fd1fa23743d0">03838</a> <span class="preprocessor"></span><span class="preprocessor">#define UPDATE_REQUEST_MAGIC    UPDATE_REQUEST_MAGIC_V2</span>
<a name="l03839"></a>03839 <span class="preprocessor"></span><span class="comment">/* Hold object_updates sending to the remote OUT in single RPC */</span>
<a name="l03840"></a><a class="code" href="structobject__update__request.html">03840</a> <span class="keyword">struct </span><a class="code" href="structobject__update__request.html">object_update_request</a> {
<a name="l03841"></a><a class="code" href="structobject__update__request.html#a3653cae8da87756f57b52b0878ca6d7d">03841</a>         __u32                   <a class="code" href="structobject__update__request.html#a3653cae8da87756f57b52b0878ca6d7d">ourq_magic</a>;
<a name="l03842"></a><a class="code" href="structobject__update__request.html#a1568d522033790abc0187af9bf40464f">03842</a>         __u16                   <a class="code" href="structobject__update__request.html#a1568d522033790abc0187af9bf40464f">ourq_count</a>;     <span class="comment">/* number of ourq_updates[] */</span>
<a name="l03843"></a><a class="code" href="structobject__update__request.html#a79fa6b96f1e315f363ad743613262674">03843</a>         __u16                   <a class="code" href="structobject__update__request.html#a79fa6b96f1e315f363ad743613262674">ourq_padding</a>;
<a name="l03844"></a><a class="code" href="structobject__update__request.html#a15c66883abc3e29a8dfff4c0202cef9d">03844</a>         <span class="keyword">struct </span><a class="code" href="structobject__update.html">object_update</a>    <a class="code" href="structobject__update__request.html#a15c66883abc3e29a8dfff4c0202cef9d">ourq_updates</a>[0];
<a name="l03845"></a>03845 };
<a name="l03846"></a>03846 
<a name="l03847"></a><a class="code" href="group__lustreidl.html#ga4f901550824e7cf2cd0f30bfa6e36564">03847</a> <span class="preprocessor">#define OUT_UPDATE_HEADER_MAGIC         0xBDDF0001</span>
<a name="l03848"></a><a class="code" href="group__lustreidl.html#gaa8d910c86c46b4138bed34d847d091f0">03848</a> <span class="preprocessor"></span><span class="preprocessor">#define OUT_UPDATE_MAX_INLINE_SIZE      4096</span>
<a name="l03849"></a>03849 <span class="preprocessor"></span><span class="comment">/* Header for updates request between MDTs */</span>
<a name="l03850"></a><a class="code" href="structout__update__header.html">03850</a> <span class="keyword">struct </span><a class="code" href="structout__update__header.html">out_update_header</a> {
<a name="l03851"></a><a class="code" href="structout__update__header.html#a6e7b246aae5488088eb26f89efc54ff9">03851</a>         __u32           <a class="code" href="structout__update__header.html#a6e7b246aae5488088eb26f89efc54ff9">ouh_magic</a>;
<a name="l03852"></a><a class="code" href="structout__update__header.html#a4e443ed559b7c575927089b0779ce0c3">03852</a>         __u32           <a class="code" href="structout__update__header.html#a4e443ed559b7c575927089b0779ce0c3">ouh_count</a>;
<a name="l03853"></a><a class="code" href="structout__update__header.html#a2388aad72deb9d7c90c3cc3326e52c52">03853</a>         __u32           <a class="code" href="structout__update__header.html#a2388aad72deb9d7c90c3cc3326e52c52">ouh_inline_length</a>;
<a name="l03854"></a><a class="code" href="structout__update__header.html#a1c369d847ec44cdfa78f23a8912af98b">03854</a>         __u32           <a class="code" href="structout__update__header.html#a1c369d847ec44cdfa78f23a8912af98b">ouh_reply_size</a>;
<a name="l03855"></a><a class="code" href="structout__update__header.html#ae2888173a7f654cbc09977301a1a92fe">03855</a>         __u32           <a class="code" href="structout__update__header.html#ae2888173a7f654cbc09977301a1a92fe">ouh_inline_data</a>[0];
<a name="l03856"></a>03856 };
<a name="l03857"></a>03857 
<a name="l03858"></a><a class="code" href="structout__update__buffer.html">03858</a> <span class="keyword">struct </span><a class="code" href="structout__update__buffer.html">out_update_buffer</a> {
<a name="l03859"></a><a class="code" href="structout__update__buffer.html#a9a7a236a1bc449b814dbbeddcb135836">03859</a>         __u32   <a class="code" href="structout__update__buffer.html#a9a7a236a1bc449b814dbbeddcb135836">oub_size</a>;
<a name="l03860"></a><a class="code" href="structout__update__buffer.html#abd5c05818581929d95444a89230833f4">03860</a>         __u32   <a class="code" href="structout__update__buffer.html#abd5c05818581929d95444a89230833f4">oub_padding</a>;
<a name="l03861"></a>03861 };
<a name="l03862"></a>03862 
<a name="l03863"></a>03863 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span>
<a name="l03864"></a><a class="code" href="group__lustreidl.html#gafcde423aa42f6dac283c09334e0ac024">03864</a> <a class="code" href="group__lustreidl.html#gafcde423aa42f6dac283c09334e0ac024">object_update_params_size</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structobject__update.html">object_update</a> *update)
<a name="l03865"></a>03865 {
<a name="l03866"></a>03866         <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structobject__update__param.html">object_update_param</a> *param;
<a name="l03867"></a>03867         <span class="keywordtype">size_t</span>                           total_size = 0;
<a name="l03868"></a>03868         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                     i;
<a name="l03869"></a>03869 
<a name="l03870"></a>03870         param = &amp;update-&gt;<a class="code" href="structobject__update.html#afdf0a16b17078c0fb49d33e05733949b">ou_params</a>[0];
<a name="l03871"></a>03871         <span class="keywordflow">for</span> (i = 0; i &lt; update-&gt;<a class="code" href="structobject__update.html#ac8083368f10b3535a75fffd059926c1e">ou_params_count</a>; i++) {
<a name="l03872"></a>03872                 <span class="keywordtype">size_t</span> <a class="code" href="lp__utils_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <a class="code" href="group__lustreidl.html#ga309385e5a4a2c8f3b6a58ed702afb59a">object_update_param_size</a>(param);
<a name="l03873"></a>03873 
<a name="l03874"></a>03874                 param = (<span class="keyword">struct </span><a class="code" href="structobject__update__param.html">object_update_param</a> *)((<span class="keywordtype">char</span> *)param + size);
<a name="l03875"></a>03875                 total_size += size;
<a name="l03876"></a>03876         }
<a name="l03877"></a>03877 
<a name="l03878"></a>03878         <span class="keywordflow">return</span> total_size;
<a name="l03879"></a>03879 }
<a name="l03880"></a>03880 
<a name="l03881"></a>03881 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span>
<a name="l03882"></a><a class="code" href="group__lustreidl.html#ga5c09cbfa5b73857e41fb3e2f93f0c87d">03882</a> <a class="code" href="group__lustreidl.html#ga5c09cbfa5b73857e41fb3e2f93f0c87d">object_update_size</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structobject__update.html">object_update</a> *update)
<a name="l03883"></a>03883 {
<a name="l03884"></a>03884         <span class="keywordflow">return</span> <a class="code" href="group__lustreuser.html#gad4a7496cd704df3829c87864e7dbd703">offsetof</a>(<span class="keyword">struct</span> <a class="code" href="structobject__update.html">object_update</a>, ou_params[0]) +
<a name="l03885"></a>03885                <a class="code" href="group__lustreidl.html#gafcde423aa42f6dac283c09334e0ac024">object_update_params_size</a>(update);
<a name="l03886"></a>03886 }
<a name="l03887"></a>03887 
<a name="l03888"></a>03888 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structobject__update.html">object_update</a> *
<a name="l03889"></a><a class="code" href="group__lustreidl.html#gace78bf2d09c3e03c21a0a0540eb8d201">03889</a> <a class="code" href="group__lustreidl.html#gace78bf2d09c3e03c21a0a0540eb8d201">object_update_request_get</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structobject__update__request.html">object_update_request</a> *our,
<a name="l03890"></a>03890                           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">size_t</span> *<a class="code" href="lp__utils_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)
<a name="l03891"></a>03891 {
<a name="l03892"></a>03892         <span class="keywordtype">void</span>    *ptr;
<a name="l03893"></a>03893         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l03894"></a>03894 
<a name="l03895"></a>03895         <span class="keywordflow">if</span> (index &gt;= our-&gt;<a class="code" href="structobject__update__request.html#a1568d522033790abc0187af9bf40464f">ourq_count</a>)
<a name="l03896"></a>03896                 <span class="keywordflow">return</span> NULL;
<a name="l03897"></a>03897 
<a name="l03898"></a>03898         ptr = (<span class="keywordtype">void</span> *)&amp;our-&gt;<a class="code" href="structobject__update__request.html#a15c66883abc3e29a8dfff4c0202cef9d">ourq_updates</a>[0];
<a name="l03899"></a>03899         for (i = 0; i &lt; index; i++)
<a name="l03900"></a>03900                 ptr += <a class="code" href="group__lustreidl.html#ga5c09cbfa5b73857e41fb3e2f93f0c87d">object_update_size</a>(ptr);
<a name="l03901"></a>03901 
<a name="l03902"></a>03902         <span class="keywordflow">if</span> (size != NULL)
<a name="l03903"></a>03903                 *size = <a class="code" href="group__lustreidl.html#ga5c09cbfa5b73857e41fb3e2f93f0c87d">object_update_size</a>(ptr);
<a name="l03904"></a>03904 
<a name="l03905"></a>03905         <span class="keywordflow">return</span> ptr;
<a name="l03906"></a>03906 }
<a name="l03907"></a>03907 
<a name="l03908"></a>03908 
<a name="l03909"></a>03909 <span class="comment">/* the result of object update */</span>
<a name="l03910"></a><a class="code" href="structobject__update__result.html">03910</a> <span class="keyword">struct </span><a class="code" href="structobject__update__result.html">object_update_result</a> {
<a name="l03911"></a><a class="code" href="structobject__update__result.html#a6eed2b7bda7e2104c7aa6a232b0bc15c">03911</a>         __u32   <a class="code" href="structobject__update__result.html#a6eed2b7bda7e2104c7aa6a232b0bc15c">our_rc</a>;
<a name="l03912"></a><a class="code" href="structobject__update__result.html#ad05893ccd5cf3b06ef72ac42d4fb7e58">03912</a>         __u16   <a class="code" href="structobject__update__result.html#ad05893ccd5cf3b06ef72ac42d4fb7e58">our_datalen</a>;
<a name="l03913"></a><a class="code" href="structobject__update__result.html#a449f10c6d59118777571d392944da2f7">03913</a>         __u16   <a class="code" href="structobject__update__result.html#a449f10c6d59118777571d392944da2f7">our_padding</a>;
<a name="l03914"></a><a class="code" href="structobject__update__result.html#a0327372ad7eb71a9d41b5858a959fcbc">03914</a>         __u32   <a class="code" href="structobject__update__result.html#a0327372ad7eb71a9d41b5858a959fcbc">our_data</a>[0];
<a name="l03915"></a>03915 };
<a name="l03916"></a>03916 
<a name="l03917"></a><a class="code" href="group__lustreidl.html#ga0e9b331b6bd8fc2911871e6b96be3f53">03917</a> <span class="preprocessor">#define UPDATE_REPLY_MAGIC_V1   0x00BD0001</span>
<a name="l03918"></a><a class="code" href="group__lustreidl.html#ga9b5738526c35111bdb58b0d1e5a2e017">03918</a> <span class="preprocessor"></span><span class="preprocessor">#define UPDATE_REPLY_MAGIC_V2   0x00BD0002</span>
<a name="l03919"></a><a class="code" href="group__lustreidl.html#ga0f2e2c8ce32f32d9e6ad50704de25199">03919</a> <span class="preprocessor"></span><span class="preprocessor">#define UPDATE_REPLY_MAGIC      UPDATE_REPLY_MAGIC_V2</span>
<a name="l03920"></a>03920 <span class="preprocessor"></span><span class="comment">/* Hold object_update_results being replied from the remote OUT. */</span>
<a name="l03921"></a><a class="code" href="structobject__update__reply.html">03921</a> <span class="keyword">struct </span><a class="code" href="structobject__update__reply.html">object_update_reply</a> {
<a name="l03922"></a><a class="code" href="structobject__update__reply.html#aa8a1f7c17bf78f3bb40d0c24a99b0be8">03922</a>         __u32   <a class="code" href="structobject__update__reply.html#aa8a1f7c17bf78f3bb40d0c24a99b0be8">ourp_magic</a>;
<a name="l03923"></a><a class="code" href="structobject__update__reply.html#a7736ef2024153998583ab9d159c437da">03923</a>         __u16   <a class="code" href="structobject__update__reply.html#a7736ef2024153998583ab9d159c437da">ourp_count</a>;
<a name="l03924"></a><a class="code" href="structobject__update__reply.html#abca22ac31feddc7cd3dfd97a5fe90874">03924</a>         __u16   <a class="code" href="structobject__update__reply.html#abca22ac31feddc7cd3dfd97a5fe90874">ourp_padding</a>;
<a name="l03925"></a><a class="code" href="structobject__update__reply.html#ac4e2846ba51db4b28326818551cf670b">03925</a>         __u16   <a class="code" href="structobject__update__reply.html#ac4e2846ba51db4b28326818551cf670b">ourp_lens</a>[0];
<a name="l03926"></a>03926 };
<a name="l03927"></a>03927 
<a name="l03928"></a>03928 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structobject__update__result.html">object_update_result</a> *
<a name="l03929"></a><a class="code" href="group__lustreidl.html#ga5d0fb3beb24561037693c266f8ca3889">03929</a> <a class="code" href="group__lustreidl.html#ga5d0fb3beb24561037693c266f8ca3889">object_update_result_get</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structobject__update__reply.html">object_update_reply</a> *reply,
<a name="l03930"></a>03930                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">size_t</span> *<a class="code" href="lp__utils_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)
<a name="l03931"></a>03931 {
<a name="l03932"></a>03932         __u16 count = reply-&gt;<a class="code" href="structobject__update__reply.html#a7736ef2024153998583ab9d159c437da">ourp_count</a>;
<a name="l03933"></a>03933         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l03934"></a>03934         <span class="keywordtype">void</span> *ptr;
<a name="l03935"></a>03935 
<a name="l03936"></a>03936         <span class="keywordflow">if</span> (index &gt;= count)
<a name="l03937"></a>03937                 <span class="keywordflow">return</span> NULL;
<a name="l03938"></a>03938 
<a name="l03939"></a>03939         ptr = (<span class="keywordtype">char</span> *)reply +
<a name="l03940"></a>03940               <a class="code" href="group__lustreuser.html#ga605663c49f0739d2448d229b0ba3474d">cfs_size_round</a>(<a class="code" href="group__lustreuser.html#gad4a7496cd704df3829c87864e7dbd703">offsetof</a>(<span class="keyword">struct</span> <a class="code" href="structobject__update__reply.html">object_update_reply</a>,
<a name="l03941"></a>03941                                       ourp_lens[count]));
<a name="l03942"></a>03942         <span class="keywordflow">for</span> (i = 0; i &lt; index; i++) {
<a name="l03943"></a>03943                 <span class="keywordflow">if</span> (reply-&gt;<a class="code" href="structobject__update__reply.html#ac4e2846ba51db4b28326818551cf670b">ourp_lens</a>[i] == 0)
<a name="l03944"></a>03944                         <span class="keywordflow">return</span> NULL;
<a name="l03945"></a>03945 
<a name="l03946"></a>03946                 ptr += <a class="code" href="group__lustreuser.html#ga605663c49f0739d2448d229b0ba3474d">cfs_size_round</a>(reply-&gt;<a class="code" href="structobject__update__reply.html#ac4e2846ba51db4b28326818551cf670b">ourp_lens</a>[i]);
<a name="l03947"></a>03947         }
<a name="l03948"></a>03948 
<a name="l03949"></a>03949         <span class="keywordflow">if</span> (size != NULL)
<a name="l03950"></a>03950                 *size = reply-&gt;<a class="code" href="structobject__update__reply.html#ac4e2846ba51db4b28326818551cf670b">ourp_lens</a>[index];
<a name="l03951"></a>03951 
<a name="l03952"></a>03952         <span class="keywordflow">return</span> ptr;
<a name="l03953"></a>03953 }
<a name="l03954"></a>03954 
<a name="l03955"></a>03955 <span class="comment">/* read update result */</span>
<a name="l03956"></a><a class="code" href="structout__read__reply.html">03956</a> <span class="keyword">struct </span><a class="code" href="structout__read__reply.html">out_read_reply</a> {
<a name="l03957"></a><a class="code" href="structout__read__reply.html#aaf907c33e502e2efcc301ef0d756dbf9">03957</a>         __u32   <a class="code" href="structout__read__reply.html#aaf907c33e502e2efcc301ef0d756dbf9">orr_size</a>;
<a name="l03958"></a><a class="code" href="structout__read__reply.html#a0f367f1744c399918e69fb427551bff6">03958</a>         __u32   <a class="code" href="structout__read__reply.html#a0f367f1744c399918e69fb427551bff6">orr_padding</a>;
<a name="l03959"></a><a class="code" href="structout__read__reply.html#a9e040e4ba8f0438c36944b0f6c71bd8c">03959</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structout__read__reply.html#a9e040e4ba8f0438c36944b0f6c71bd8c">orr_offset</a>;
<a name="l03960"></a><a class="code" href="structout__read__reply.html#afc4b1ef79dacc8ae67cc5c4ac4e44975">03960</a>         <span class="keywordtype">char</span>    <a class="code" href="structout__read__reply.html#afc4b1ef79dacc8ae67cc5c4ac4e44975">orr_data</a>[0];
<a name="l03961"></a>03961 };
<a name="l03962"></a>03962 
<a name="l03963"></a><a class="code" href="group__lustreidl.html#ga28e65c4f1057c3e6a2ed83a2d89967b7">03963</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga28e65c4f1057c3e6a2ed83a2d89967b7">orr_cpu_to_le</a>(<span class="keyword">struct</span> <a class="code" href="structout__read__reply.html">out_read_reply</a> *orr_dst,
<a name="l03964"></a>03964                                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structout__read__reply.html">out_read_reply</a> *orr_src)
<a name="l03965"></a>03965 {
<a name="l03966"></a>03966         orr_dst-&gt;<a class="code" href="structout__read__reply.html#aaf907c33e502e2efcc301ef0d756dbf9">orr_size</a> = <a class="code" href="byteorder_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(orr_src-&gt;<a class="code" href="structout__read__reply.html#aaf907c33e502e2efcc301ef0d756dbf9">orr_size</a>);
<a name="l03967"></a>03967         orr_dst-&gt;<a class="code" href="structout__read__reply.html#a0f367f1744c399918e69fb427551bff6">orr_padding</a> = <a class="code" href="byteorder_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(orr_src-&gt;<a class="code" href="structout__read__reply.html#a0f367f1744c399918e69fb427551bff6">orr_padding</a>);
<a name="l03968"></a>03968         orr_dst-&gt;<a class="code" href="structout__read__reply.html#a9e040e4ba8f0438c36944b0f6c71bd8c">orr_offset</a> = <a class="code" href="byteorder_8h.html#aa170dc4b2dae5b00bdec3a307427240f">cpu_to_le64</a>(orr_dst-&gt;<a class="code" href="structout__read__reply.html#a9e040e4ba8f0438c36944b0f6c71bd8c">orr_offset</a>);
<a name="l03969"></a>03969 }
<a name="l03970"></a>03970 
<a name="l03971"></a><a class="code" href="group__lustreidl.html#ga03dba21ebe4e72676c304486302f1907">03971</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__lustreidl.html#ga03dba21ebe4e72676c304486302f1907">orr_le_to_cpu</a>(<span class="keyword">struct</span> <a class="code" href="structout__read__reply.html">out_read_reply</a> *orr_dst,
<a name="l03972"></a>03972                                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structout__read__reply.html">out_read_reply</a> *orr_src)
<a name="l03973"></a>03973 {
<a name="l03974"></a>03974         orr_dst-&gt;<a class="code" href="structout__read__reply.html#aaf907c33e502e2efcc301ef0d756dbf9">orr_size</a> = <a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(orr_src-&gt;<a class="code" href="structout__read__reply.html#aaf907c33e502e2efcc301ef0d756dbf9">orr_size</a>);
<a name="l03975"></a>03975         orr_dst-&gt;<a class="code" href="structout__read__reply.html#a0f367f1744c399918e69fb427551bff6">orr_padding</a> = <a class="code" href="byteorder_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(orr_src-&gt;<a class="code" href="structout__read__reply.html#a0f367f1744c399918e69fb427551bff6">orr_padding</a>);
<a name="l03976"></a>03976         orr_dst-&gt;<a class="code" href="structout__read__reply.html#a9e040e4ba8f0438c36944b0f6c71bd8c">orr_offset</a> = <a class="code" href="byteorder_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(orr_dst-&gt;<a class="code" href="structout__read__reply.html#a9e040e4ba8f0438c36944b0f6c71bd8c">orr_offset</a>);
<a name="l03977"></a>03977 }
<a name="l03978"></a>03978 
<a name="l03982"></a><a class="code" href="structmdc__swap__layouts.html">03982</a> <span class="keyword">struct </span><a class="code" href="structmdc__swap__layouts.html" title="layout swap request structure fid1 and fid2 are in mdt_body">mdc_swap_layouts</a> {
<a name="l03983"></a><a class="code" href="structmdc__swap__layouts.html#ab782dd1581fffdfbfd24492b11e23ce1">03983</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structmdc__swap__layouts.html#ab782dd1581fffdfbfd24492b11e23ce1">msl_flags</a>;
<a name="l03984"></a>03984 } <a class="code" href="group__lustreidl.html#ga662a50376fb91b79a9f099cea7dffb26" title="layout swap request structure fid1 and fid2 are in mdt_body">__packed</a>;
<a name="l03985"></a>03985 
<a name="l03986"></a><a class="code" href="structclose__data.html">03986</a> <span class="keyword">struct </span><a class="code" href="structclose__data.html">close_data</a> {
<a name="l03987"></a><a class="code" href="structclose__data.html#a314a709aab9f88b18eb56fe70501fdf6">03987</a>         <span class="keyword">struct </span><a class="code" href="structlustre__handle.html">lustre_handle</a>    <a class="code" href="structclose__data.html#a314a709aab9f88b18eb56fe70501fdf6">cd_handle</a>;
<a name="l03988"></a><a class="code" href="structclose__data.html#a29bb7cabb7a9742612563acd389ef289">03988</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>           <a class="code" href="structclose__data.html#a29bb7cabb7a9742612563acd389ef289">cd_fid</a>;
<a name="l03989"></a><a class="code" href="structclose__data.html#accabbd37b4a19826730f9f1021e0099b">03989</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structclose__data.html#accabbd37b4a19826730f9f1021e0099b">cd_data_version</a>;
<a name="l03990"></a><a class="code" href="structclose__data.html#af9f7d6be2255233f46ca9574be77cac1">03990</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structclose__data.html#af9f7d6be2255233f46ca9574be77cac1">cd_reserved</a>[8];
<a name="l03991"></a>03991 };
<a name="l03992"></a>03992 
<a name="l03993"></a>03993 <span class="comment">/* Update llog format */</span>
<a name="l03994"></a><a class="code" href="structupdate__op.html">03994</a> <span class="keyword">struct </span><a class="code" href="structupdate__op.html">update_op</a> {
<a name="l03995"></a><a class="code" href="structupdate__op.html#a68cc3d1a7f0e144e7c1886a1d2496480">03995</a>         <span class="keyword">struct </span><a class="code" href="structlu__fid.html" title="File IDentifier.">lu_fid</a>   <a class="code" href="structupdate__op.html#a68cc3d1a7f0e144e7c1886a1d2496480">uop_fid</a>;
<a name="l03996"></a><a class="code" href="structupdate__op.html#a05578a7f57b44d07ae8fb2cce6e41a2d">03996</a>         __u16           <a class="code" href="structupdate__op.html#a05578a7f57b44d07ae8fb2cce6e41a2d">uop_type</a>;
<a name="l03997"></a><a class="code" href="structupdate__op.html#a367a2a2316f4af2754d20d25158447bc">03997</a>         __u16           <a class="code" href="structupdate__op.html#a367a2a2316f4af2754d20d25158447bc">uop_param_count</a>;
<a name="l03998"></a><a class="code" href="structupdate__op.html#a9abb43618e02db57c7b31424e187f7f8">03998</a>         __u16           <a class="code" href="structupdate__op.html#a9abb43618e02db57c7b31424e187f7f8">uop_params_off</a>[0];
<a name="l03999"></a>03999 };
<a name="l04000"></a>04000 
<a name="l04001"></a><a class="code" href="structupdate__ops.html">04001</a> <span class="keyword">struct </span><a class="code" href="structupdate__ops.html">update_ops</a> {
<a name="l04002"></a><a class="code" href="structupdate__ops.html#a6ca7941a888f88390a579b48c8acf5c2">04002</a>         <span class="keyword">struct </span><a class="code" href="structupdate__op.html">update_op</a>        <a class="code" href="structupdate__ops.html#a6ca7941a888f88390a579b48c8acf5c2">uops_op</a>[0];
<a name="l04003"></a>04003 };
<a name="l04004"></a>04004 
<a name="l04005"></a><a class="code" href="structupdate__params.html">04005</a> <span class="keyword">struct </span><a class="code" href="structupdate__params.html">update_params</a> {
<a name="l04006"></a><a class="code" href="structupdate__params.html#a5d2e6b9a3a202cd904563ecdbcb534b7">04006</a>         <span class="keyword">struct </span><a class="code" href="structobject__update__param.html">object_update_param</a>      <a class="code" href="structupdate__params.html#a5d2e6b9a3a202cd904563ecdbcb534b7">up_params</a>[0];
<a name="l04007"></a>04007 };
<a name="l04008"></a>04008 
<a name="l04009"></a><a class="code" href="group__lustreidl.html#gaeacc7c56411e46237245684b472d7974">04009</a> <span class="keyword">enum</span> <a class="code" href="group__lustreidl.html#gaeacc7c56411e46237245684b472d7974">update_records_flag</a> {
<a name="l04010"></a><a class="code" href="group__lustreidl.html#ggaeacc7c56411e46237245684b472d7974ad489a42dc71423f715051db6966f238b">04010</a>         <a class="code" href="group__lustreidl.html#ggaeacc7c56411e46237245684b472d7974ad489a42dc71423f715051db6966f238b">UPDATE_RECORD_CONTINUE</a> = 1 &gt;&gt; 0,
<a name="l04011"></a>04011 };
<a name="l04012"></a>04012 <span class="comment">/*</span>
<a name="l04013"></a>04013 <span class="comment"> * This is the update record format used to store the updates in</span>
<a name="l04014"></a>04014 <span class="comment"> * disk. All updates of the operation will be stored in ur_ops.</span>
<a name="l04015"></a>04015 <span class="comment"> * All of parameters for updates of the operation will be stored</span>
<a name="l04016"></a>04016 <span class="comment"> * in ur_params.</span>
<a name="l04017"></a>04017 <span class="comment"> * To save the space of the record, parameters in ur_ops will only</span>
<a name="l04018"></a>04018 <span class="comment"> * remember their offset in ur_params, so to avoid storing duplicate</span>
<a name="l04019"></a>04019 <span class="comment"> * parameters in ur_params, which can help us save a lot space for</span>
<a name="l04020"></a>04020 <span class="comment"> * operation like creating striped directory.</span>
<a name="l04021"></a>04021 <span class="comment"> */</span>
<a name="l04022"></a><a class="code" href="structupdate__records.html">04022</a> <span class="keyword">struct </span><a class="code" href="structupdate__records.html">update_records</a> {
<a name="l04023"></a><a class="code" href="structupdate__records.html#af1342ae9b7b02cf47b9302ec544b1b57">04023</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structupdate__records.html#af1342ae9b7b02cf47b9302ec544b1b57">ur_master_transno</a>;
<a name="l04024"></a><a class="code" href="structupdate__records.html#a689a2fa2a66db9e494365763a2e22080">04024</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>                   <a class="code" href="structupdate__records.html#a689a2fa2a66db9e494365763a2e22080">ur_batchid</a>;
<a name="l04025"></a><a class="code" href="structupdate__records.html#a371c3f6f09bca53059265560eadfa3be">04025</a>         __u32                   <a class="code" href="structupdate__records.html#a371c3f6f09bca53059265560eadfa3be">ur_flags</a>;
<a name="l04026"></a>04026         <span class="comment">/* If the operation includes multiple updates, then ur_index</span>
<a name="l04027"></a>04027 <span class="comment">         * means the index of the update inside the whole updates. */</span>
<a name="l04028"></a><a class="code" href="structupdate__records.html#a83a47e4f1b583ddcc6de9ef40c3063a0">04028</a>         __u32                   <a class="code" href="structupdate__records.html#a83a47e4f1b583ddcc6de9ef40c3063a0">ur_index</a>;
<a name="l04029"></a><a class="code" href="structupdate__records.html#a7cd9154022dc7f8b2bc672f885275e32">04029</a>         __u32                   <a class="code" href="structupdate__records.html#a7cd9154022dc7f8b2bc672f885275e32">ur_update_count</a>;
<a name="l04030"></a><a class="code" href="structupdate__records.html#aaee500e2e7c4db6d9c6074412fd60a1d">04030</a>         __u32                   <a class="code" href="structupdate__records.html#aaee500e2e7c4db6d9c6074412fd60a1d">ur_param_count</a>;
<a name="l04031"></a><a class="code" href="structupdate__records.html#aa60c13bd360671ab80023099519f35b7">04031</a>         <span class="keyword">struct </span><a class="code" href="structupdate__ops.html">update_ops</a>       <a class="code" href="structupdate__records.html#aa60c13bd360671ab80023099519f35b7">ur_ops</a>;
<a name="l04032"></a>04032          <span class="comment">/* Note ur_ops has a variable size, so comment out</span>
<a name="l04033"></a>04033 <span class="comment">          * the following ur_params, in case some use it directly</span>
<a name="l04034"></a>04034 <span class="comment">          * update_records-&gt;ur_params</span>
<a name="l04035"></a>04035 <span class="comment">          *</span>
<a name="l04036"></a>04036 <span class="comment">          * struct update_params        ur_params;</span>
<a name="l04037"></a>04037 <span class="comment">          */</span>
<a name="l04038"></a>04038 };
<a name="l04039"></a>04039 
<a name="l04040"></a><a class="code" href="structllog__update__record.html">04040</a> <span class="keyword">struct </span><a class="code" href="structllog__update__record.html">llog_update_record</a> {
<a name="l04041"></a><a class="code" href="structllog__update__record.html#af532ed0e881f26dbe5f2e30e51302404">04041</a>         <span class="keyword">struct </span><a class="code" href="structllog__rec__hdr.html" title="Log record header - stored in little endian order.">llog_rec_hdr</a>     <a class="code" href="structllog__update__record.html#af532ed0e881f26dbe5f2e30e51302404">lur_hdr</a>;
<a name="l04042"></a><a class="code" href="structllog__update__record.html#a618dbb1f180c8450cb15cfb62d905537">04042</a>         <span class="keyword">struct </span><a class="code" href="structupdate__records.html">update_records</a>   <a class="code" href="structllog__update__record.html#a618dbb1f180c8450cb15cfb62d905537">lur_update_rec</a>;
<a name="l04043"></a>04043         <span class="comment">/* Note ur_update_rec has a variable size, so comment out</span>
<a name="l04044"></a>04044 <span class="comment">        * the following ur_tail, in case someone use it directly</span>
<a name="l04045"></a>04045 <span class="comment">        *</span>
<a name="l04046"></a>04046 <span class="comment">        * struct llog_rec_tail lur_tail;</span>
<a name="l04047"></a>04047 <span class="comment">        */</span>
<a name="l04048"></a>04048 };
<a name="l04049"></a>04049 
<a name="l04050"></a>04050 <span class="comment">/* nodemap records, uses 32 byte record length */</span>
<a name="l04051"></a><a class="code" href="group__lustreidl.html#gaf5e2e3a63b93dab590e5512e2a811165">04051</a> <span class="preprocessor">#define LUSTRE_NODEMAP_NAME_LENGTH 16</span>
<a name="l04052"></a><a class="code" href="structnodemap__cluster__rec.html">04052</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structnodemap__cluster__rec.html">nodemap_cluster_rec</a> {
<a name="l04053"></a><a class="code" href="structnodemap__cluster__rec.html#a2cce738a3f64210900a8ae20a63f9dc2">04053</a>         <span class="keywordtype">char</span>    <a class="code" href="structnodemap__cluster__rec.html#a2cce738a3f64210900a8ae20a63f9dc2">ncr_name</a>[<a class="code" href="group__lustreidl.html#gaf5e2e3a63b93dab590e5512e2a811165">LUSTRE_NODEMAP_NAME_LENGTH</a> + 1];
<a name="l04054"></a><a class="code" href="structnodemap__cluster__rec.html#ac2b4983860907a97e6981db180997b73">04054</a>         __u8    <a class="code" href="structnodemap__cluster__rec.html#ac2b4983860907a97e6981db180997b73">ncr_flags</a>;
<a name="l04055"></a><a class="code" href="structnodemap__cluster__rec.html#a56409d5952b507f2fc5873e4cd47f193">04055</a>         __u16   <a class="code" href="structnodemap__cluster__rec.html#a56409d5952b507f2fc5873e4cd47f193">ncr_padding1</a>;
<a name="l04056"></a><a class="code" href="structnodemap__cluster__rec.html#af94820cad72a0ac87588c827a83a9b32">04056</a>         __u32   <a class="code" href="structnodemap__cluster__rec.html#af94820cad72a0ac87588c827a83a9b32">ncr_padding2</a>;
<a name="l04057"></a><a class="code" href="structnodemap__cluster__rec.html#ae8785028667269f9341465e2bf81275f">04057</a>         __u32   <a class="code" href="structnodemap__cluster__rec.html#ae8785028667269f9341465e2bf81275f">ncr_squash_uid</a>;
<a name="l04058"></a><a class="code" href="structnodemap__cluster__rec.html#aeedef777d0d4749fd5b9074a9ea463c7">04058</a>         __u32   <a class="code" href="structnodemap__cluster__rec.html#aeedef777d0d4749fd5b9074a9ea463c7">ncr_squash_gid</a>;
<a name="l04059"></a>04059 };
<a name="l04060"></a>04060 
<a name="l04061"></a>04061 <span class="comment">/* lnet_nid_t is 8 bytes */</span>
<a name="l04062"></a><a class="code" href="structnodemap__range__rec.html">04062</a> <span class="keyword">struct </span><a class="code" href="structnodemap__range__rec.html">nodemap_range_rec</a> {
<a name="l04063"></a><a class="code" href="structnodemap__range__rec.html#a9ab49bf4e2a269c0b72b7d2c4eed839a">04063</a>         <a class="code" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312" title="Address of an end-point in an LNet network.">lnet_nid_t</a>      <a class="code" href="structnodemap__range__rec.html#a9ab49bf4e2a269c0b72b7d2c4eed839a">nrr_start_nid</a>;
<a name="l04064"></a><a class="code" href="structnodemap__range__rec.html#a77fb539b02539b03f447347c1eff0455">04064</a>         <a class="code" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312" title="Address of an end-point in an LNet network.">lnet_nid_t</a>      <a class="code" href="structnodemap__range__rec.html#a77fb539b02539b03f447347c1eff0455">nrr_end_nid</a>;
<a name="l04065"></a><a class="code" href="structnodemap__range__rec.html#a89de861b570f86f6d13510f81bd3633a">04065</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structnodemap__range__rec.html#a89de861b570f86f6d13510f81bd3633a">nrr_padding1</a>;
<a name="l04066"></a><a class="code" href="structnodemap__range__rec.html#a0af0418ee26491fca0e5e8576c03a0d4">04066</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>           <a class="code" href="structnodemap__range__rec.html#a0af0418ee26491fca0e5e8576c03a0d4">nrr_padding2</a>;
<a name="l04067"></a>04067 };
<a name="l04068"></a>04068 
<a name="l04069"></a><a class="code" href="structnodemap__id__rec.html">04069</a> <span class="keyword">struct </span><a class="code" href="structnodemap__id__rec.html">nodemap_id_rec</a> {
<a name="l04070"></a><a class="code" href="structnodemap__id__rec.html#ada908e60762a2cbfb65526ae61f65232">04070</a>         __u32   <a class="code" href="structnodemap__id__rec.html#ada908e60762a2cbfb65526ae61f65232">nir_id_fs</a>;
<a name="l04071"></a><a class="code" href="structnodemap__id__rec.html#ac45b6ee25b1b8fa2d417ba875599d563">04071</a>         __u32   <a class="code" href="structnodemap__id__rec.html#ac45b6ee25b1b8fa2d417ba875599d563">nir_padding1</a>;
<a name="l04072"></a><a class="code" href="structnodemap__id__rec.html#ad32f48242b8fedf26636d6e6d3c73b0d">04072</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structnodemap__id__rec.html#ad32f48242b8fedf26636d6e6d3c73b0d">nir_padding2</a>;
<a name="l04073"></a><a class="code" href="structnodemap__id__rec.html#a438863a1fb2756a95295fce8494b13b2">04073</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structnodemap__id__rec.html#a438863a1fb2756a95295fce8494b13b2">nir_padding3</a>;
<a name="l04074"></a><a class="code" href="structnodemap__id__rec.html#aa5a66a3d173b40045752c94ee3f05d7e">04074</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structnodemap__id__rec.html#aa5a66a3d173b40045752c94ee3f05d7e">nir_padding4</a>;
<a name="l04075"></a>04075 };
<a name="l04076"></a>04076 
<a name="l04077"></a><a class="code" href="structnodemap__global__rec.html">04077</a> <span class="keyword">struct </span><a class="code" href="structnodemap__global__rec.html">nodemap_global_rec</a> {
<a name="l04078"></a><a class="code" href="structnodemap__global__rec.html#abd7b4df7d8b695f415efe749eeea1c2c">04078</a>         __u8    <a class="code" href="structnodemap__global__rec.html#abd7b4df7d8b695f415efe749eeea1c2c">ngr_is_active</a>;
<a name="l04079"></a><a class="code" href="structnodemap__global__rec.html#af21cee7c91e79ef492490035939984dc">04079</a>         __u8    <a class="code" href="structnodemap__global__rec.html#af21cee7c91e79ef492490035939984dc">ngr_padding1</a>;
<a name="l04080"></a><a class="code" href="structnodemap__global__rec.html#aea85e4e40a52543b48420e82c780cec1">04080</a>         __u16   <a class="code" href="structnodemap__global__rec.html#aea85e4e40a52543b48420e82c780cec1">ngr_padding2</a>;
<a name="l04081"></a><a class="code" href="structnodemap__global__rec.html#ae5278e3b0589c8db911d51e86b20c01f">04081</a>         __u32   <a class="code" href="structnodemap__global__rec.html#ae5278e3b0589c8db911d51e86b20c01f">ngr_padding3</a>;
<a name="l04082"></a><a class="code" href="structnodemap__global__rec.html#ac4058a8a75e15e2ae92448401b49c364">04082</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structnodemap__global__rec.html#ac4058a8a75e15e2ae92448401b49c364">ngr_padding4</a>;
<a name="l04083"></a><a class="code" href="structnodemap__global__rec.html#a363b13bcede3b02dccacc5ecdfa7b59d">04083</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structnodemap__global__rec.html#a363b13bcede3b02dccacc5ecdfa7b59d">ngr_padding5</a>;
<a name="l04084"></a><a class="code" href="structnodemap__global__rec.html#ad541627ea9b4c1e9ac47928582894e08">04084</a>         <a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>   <a class="code" href="structnodemap__global__rec.html#ad541627ea9b4c1e9ac47928582894e08">ngr_padding6</a>;
<a name="l04085"></a>04085 };
<a name="l04086"></a>04086 
<a name="l04087"></a><a class="code" href="unionnodemap__rec.html">04087</a> <span class="keyword">union </span><a class="code" href="unionnodemap__rec.html">nodemap_rec</a> {
<a name="l04088"></a><a class="code" href="unionnodemap__rec.html#a9904e8ed3542ef0ba4ef14579611707f">04088</a>         <span class="keyword">struct </span><a class="code" href="structnodemap__cluster__rec.html">nodemap_cluster_rec</a> <a class="code" href="unionnodemap__rec.html#a9904e8ed3542ef0ba4ef14579611707f">ncr</a>;
<a name="l04089"></a><a class="code" href="unionnodemap__rec.html#a4a5b65bce84f264cf7496a6278200e99">04089</a>         <span class="keyword">struct </span><a class="code" href="structnodemap__range__rec.html">nodemap_range_rec</a> <a class="code" href="unionnodemap__rec.html#a4a5b65bce84f264cf7496a6278200e99">nrr</a>;
<a name="l04090"></a><a class="code" href="unionnodemap__rec.html#a631145e4ba26f970fbebffc1e1863abc">04090</a>         <span class="keyword">struct </span><a class="code" href="structnodemap__id__rec.html">nodemap_id_rec</a> <a class="code" href="unionnodemap__rec.html#a631145e4ba26f970fbebffc1e1863abc">nir</a>;
<a name="l04091"></a><a class="code" href="unionnodemap__rec.html#a4f1a74cedb239f17cff6cd93e7a81b90">04091</a>         <span class="keyword">struct </span><a class="code" href="structnodemap__global__rec.html">nodemap_global_rec</a> <a class="code" href="unionnodemap__rec.html#a4f1a74cedb239f17cff6cd93e7a81b90">ngr</a>;
<a name="l04092"></a>04092 };
<a name="l04093"></a>04093 
<a name="l04094"></a>04094 <span class="preprocessor">#endif</span>
<a name="l04095"></a>04095 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:35 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
