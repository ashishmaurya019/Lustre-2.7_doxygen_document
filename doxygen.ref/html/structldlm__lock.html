<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: ldlm_lock Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ldlm_lock Struct Reference<br/>
<small>
[<a class="el" href="group__LDLM.html">Lustre Distributed Lock Manager</a>]</small>
</h1><!-- doxytag: class="ldlm_lock" -->
<p>LDLM lock structure.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structportals__handle.html">portals_handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af6bfe0ab210b608d0fa59ee6e95841ec">l_handle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Local lock handle.  <a href="#af6bfe0ab210b608d0fa59ee6e95841ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#acd61f904bdcdfee7845701368db6003d">l_refc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock reference count.  <a href="#acd61f904bdcdfee7845701368db6003d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spinlock_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ab7ff3f52f4765c133758c21e0d224a8b">l_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal spinlock protects l_resource.  <a href="#ab7ff3f52f4765c133758c21e0d224a8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a41f4592eb59ed0c94d85e9fa67acfa6f">l_resource</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to actual resource this lock is in.  <a href="#a41f4592eb59ed0c94d85e9fa67acfa6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a039f73a41d5d8a655eff3b056963847d">l_lru</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item for client side LRU list.  <a href="#a039f73a41d5d8a655eff3b056963847d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a64ad5a636aec3f0825f1eea9df1a5734">l_res_link</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Linkage to resource's lock queues according to current lock state.  <a href="#a64ad5a636aec3f0825f1eea9df1a5734"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#abc34b7aa1202f2a2830f825ba7918f2d">l_tree_node</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tree node for <a class="el" href="structldlm__extent.html">ldlm_extent</a>.  <a href="#abc34b7aa1202f2a2830f825ba7918f2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhlist__node.html">hlist_node</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa9c7b6de27615654aab63f1b924df9a6">l_exp_hash</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Per export hash of locks.  <a href="#aa9c7b6de27615654aab63f1b924df9a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhlist__node.html">hlist_node</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a89387ae7cb253ca09998dce444eac825">l_exp_flock_hash</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Per export hash of flock locks.  <a href="#a89387ae7cb253ca09998dce444eac825"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a4c3ab4e1a3ec7f022d954251e6eafa67">l_req_mode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Requested mode.  <a href="#a4c3ab4e1a3ec7f022d954251e6eafa67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a714ebd7977f069a111bf98aa7b202167">l_granted_mode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Granted mode, also protected by lr_lock.  <a href="#a714ebd7977f069a111bf98aa7b202167"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__LDLM.html#gac03b996dc38f767ddd9b2f5ae779b257">ldlm_completion_callback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa8070acdaa6bb825842083d710f8a935">l_completion_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock completion handler pointer.  <a href="#aa8070acdaa6bb825842083d710f8a935"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ac1baaa1cb6f8c57cd0e574dff1dcdfd8">l_blocking_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock blocking AST handler pointer.  <a href="#ac1baaa1cb6f8c57cd0e574dff1dcdfd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__LDLM.html#ga6e5c291246d5e6fb302d99a6111cb03d">ldlm_glimpse_callback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aaa0d1608f452158ab011eecc6f978058">l_glimpse_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock glimpse handler.  <a href="#aaa0d1608f452158ab011eecc6f978058"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a60b23d06e26065065d0bac47ace905b0">l_export</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock export.  <a href="#a60b23d06e26065065d0bac47ace905b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ae11dfeaaf68f7217bc5defa97b58b1b1">l_conn_export</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock connection export.  <a href="#ae11dfeaaf68f7217bc5defa97b58b1b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlustre__handle.html">lustre_handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a2c6e6f83512b652ba6563740a3d3487e">l_remote_handle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remote lock handle.  <a href="#a2c6e6f83512b652ba6563740a3d3487e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a30dc0349b0b525d72e9a3a92ad19ff79">l_policy_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Representation of private data specific for a lock type.  <a href="#a30dc0349b0b525d72e9a3a92ad19ff79"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a52cb4e433ee43b7326bfbb652c3d0598">l_flags</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock state flags.  <a href="#a52cb4e433ee43b7326bfbb652c3d0598"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#abb8a2696003a5ba2a21c2365ecc2d275">l_readers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock r/w usage counters.  <a href="#abb8a2696003a5ba2a21c2365ecc2d275"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a9d7d1e3aae30e19867dd45c9de95b6f9">l_writers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a0ca58a0480ef9503c3548499e27c2e43">l_waitq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If the lock is granted, a process sleeps on this waitq to learn when it's no longer in use.  <a href="#a0ca58a0480ef9503c3548499e27c2e43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af1f00870111fa501c0fb07a97c642fb1">l_last_activity</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Seconds.  <a href="#af1f00870111fa501c0fb07a97c642fb1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ae5c325b0e0c567e7a32fa97d4aeb0796">l_last_used</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time last used by e.g.  <a href="#ae5c325b0e0c567e7a32fa97d4aeb0796"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__extent.html">ldlm_extent</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af103e96dfac8d06fe14a472577c0f7f6">l_req_extent</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Originally requested extent for the extent lock.  <a href="#af103e96dfac8d06fe14a472577c0f7f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ad9dc493ac24012a9a530f85cbb56fa25">l_lvb_type</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af9af59e08968100a683ab5f5d595a495">l_lvb_len</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporary storage for a LVB received during an enqueue operation.  <a href="#af9af59e08968100a683ab5f5d595a495"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a58e99cf39e7033e1a504afccc043f318">l_lvb_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#acb54919a43db8f99a336c67e0988fdb8">l_ast_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private storage for lock user.  <a href="#acb54919a43db8f99a336c67e0988fdb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a4f6fa304d22507684a9483ecaf67c646">l_client_cookie</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connection cookie for the client originating the operation.  <a href="#a4f6fa304d22507684a9483ecaf67c646"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a464e73d6b8dbeeb1f94f4235cc71b02a">l_pending_chain</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item for locks waiting for cancellation from clients.  <a href="#a464e73d6b8dbeeb1f94f4235cc71b02a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a693ba0644779a6c1c5a1f5c056de82a8">l_callback_timeout</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set when lock is sent a blocking AST.  <a href="#a693ba0644779a6c1c5a1f5c056de82a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa353839ecc6943a9c21f0ace1e220b8d">l_pid</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Local PID of process which created this lock.  <a href="#aa353839ecc6943a9c21f0ace1e220b8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a7ba79dbc765caf7ab179a9a3dfd20b2b">l_bl_ast_run</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of times blocking AST was sent for this lock.  <a href="#a7ba79dbc765caf7ab179a9a3dfd20b2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a21d60a379e0f50f97d14bde7dada4fb2">l_bl_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item <a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632" title="Aggregator function to add AST work items into a list.">ldlm_add_ast_work_item()</a> for case of blocking ASTs.  <a href="#a21d60a379e0f50f97d14bde7dada4fb2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a7b43a74ce7191faf551c2ca62c880f10">l_cp_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item <a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632" title="Aggregator function to add AST work items into a list.">ldlm_add_ast_work_item()</a> for case of completion ASTs.  <a href="#a7b43a74ce7191faf551c2ca62c880f10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a0f992bff4dba5d9c54588678ca261614">l_rk_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For <a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632" title="Aggregator function to add AST work items into a list.">ldlm_add_ast_work_item()</a> for "revoke" AST used in COS.  <a href="#a0f992bff4dba5d9c54588678ca261614"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a61acd4dac2bc438e612c7ec0382dc2e4">l_blocking_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to a conflicting lock that caused blocking AST to be sent for this lock.  <a href="#a61acd4dac2bc438e612c7ec0382dc2e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa26a328bc8c2e6eff25c62c2d6e8c9ee">l_sl_mode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Protected by lr_lock, linkages to "skip lists".  <a href="#aa26a328bc8c2e6eff25c62c2d6e8c9ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ad4634b2ff8d252a3a8a81b0bb1db5464">l_sl_policy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__ref.html">lu_ref</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a2cc84a3989e5b197caffa7a0fe014f27">l_reference</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reference tracking structure to debug leaked locks.  <a href="#a2cc84a3989e5b197caffa7a0fe014f27"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#adb27b96d85f21b4b27ca59159d8316ec">l_exp_list</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">export blocking dlm lock list, protected by l_export-&gt;exp_bl_list_lock.  <a href="#adb27b96d85f21b4b27ca59159d8316ec"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>LDLM lock structure. </p>
<p>Represents a single LDLM lock and its state in memory. Each lock is associated with a single <a class="el" href="structldlm__resource.html" title="LDLM resource description.">ldlm_resource</a>, the object which is being locked. There may be multiple ldlm_locks on a single resource, depending on the lock type and whether the locks are conflicting or not. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00666">666</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="acb54919a43db8f99a336c67e0988fdb8"></a><!-- doxytag: member="ldlm_lock::l_ast_data" ref="acb54919a43db8f99a336c67e0988fdb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structldlm__lock.html#acb54919a43db8f99a336c67e0988fdb8">ldlm_lock::l_ast_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private storage for lock user. </p>
<p>Opaque to LDLM. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00822">822</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02293">ldlm_lock_set_data()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="mdt__handler_8c_source.html#l02290">mdt_is_lock_sync()</a>, <a class="el" href="mdt__handler_8c_source.html#l02275">mdt_set_lock_sync()</a>, <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__io_8c_source.html#l00087">osc_io_read_ahead()</a>, <a class="el" href="osc__lock_8c_source.html#l00582">osc_ldlm_glimpse_ast()</a>, <a class="el" href="osc__request_8c_source.html#l02601">osc_ldlm_resource_invalidate()</a>, <a class="el" href="osc__lock_8c_source.html#l00693">osc_ldlm_weigh_ast()</a>, <a class="el" href="osc__object_8c_source.html#l00203">osc_object_ast_clear()</a>, <a class="el" href="osc__request_8c_source.html#l01934">osc_set_lock_data()</a>, <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, and <a class="el" href="qsd__lock_8c_source.html#l00101">qsd_id_ast_data_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a21d60a379e0f50f97d14bde7dada4fb2"></a><!-- doxytag: member="ldlm_lock::l_bl_ast" ref="a21d60a379e0f50f97d14bde7dada4fb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a21d60a379e0f50f97d14bde7dada4fb2">ldlm_lock::l_bl_ast</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item <a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632" title="Aggregator function to add AST work items into a list.">ldlm_add_ast_work_item()</a> for case of blocking ASTs. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00865">865</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01917">ldlm_cli_cancel_list()</a>, <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ba79dbc765caf7ab179a9a3dfd20b2b"></a><!-- doxytag: member="ldlm_lock::l_bl_ast_run" ref="a7ba79dbc765caf7ab179a9a3dfd20b2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structldlm__lock.html#a7ba79dbc765caf7ab179a9a3dfd20b2b">ldlm_lock::l_bl_ast_run</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of times blocking AST was sent for this lock. </p>
<p>This is for debugging. Valid values are 0 and 1, if there is an attempt to send blocking AST more than once, an assertion would be hit. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ldlm__lock_8c.html#a4b704d0518e64bbf3c1815b4bb1c6ba6" title="Process a call to blocking AST callback for a lock in ast_work list.">ldlm_work_bl_ast_lock</a> </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00863">863</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1baaa1cb6f8c57cd0e574dff1dcdfd8"></a><!-- doxytag: member="ldlm_lock::l_blocking_ast" ref="ac1baaa1cb6f8c57cd0e574dff1dcdfd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a> <a class="el" href="structldlm__lock.html#ac1baaa1cb6f8c57cd0e574dff1dcdfd8">ldlm_lock::l_blocking_ast</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock blocking AST handler pointer. </p>
<p>It plays two roles:</p>
<ul>
<li>as a notification of an attempt to queue a conflicting lock (once)</li>
<li>as a notification when the lock is being cancelled.</li>
</ul>
<p>As such it's typically called twice: once for the initial conflict and then once more when the last user went away and the lock is cancelled (could happen recursively). </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00741">741</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01984">ldlm_work_revoke_ast_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, and <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>.</p>

</div>
</div>
<a class="anchor" id="a61acd4dac2bc438e612c7ec0382dc2e4"></a><!-- doxytag: member="ldlm_lock::l_blocking_lock" ref="a61acd4dac2bc438e612c7ec0382dc2e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* <a class="el" href="structldlm__lock.html#a61acd4dac2bc438e612c7ec0382dc2e4">ldlm_lock::l_blocking_lock</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to a conflicting lock that caused blocking AST to be sent for this lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00875">875</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="a693ba0644779a6c1c5a1f5c056de82a8"></a><!-- doxytag: member="ldlm_lock::l_callback_timeout" ref="a693ba0644779a6c1c5a1f5c056de82a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> <a class="el" href="structldlm__lock.html#a693ba0644779a6c1c5a1f5c056de82a8">ldlm_lock::l_callback_timeout</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set when lock is sent a blocking AST. </p>
<p>Time in seconds when timeout is reached and client holding this lock could be evicted. This timeout could be further extended by e.g. certain IO activity under this lock. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>ost_rw_prolong_locks </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00852">852</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f6fa304d22507684a9483ecaf67c646"></a><!-- doxytag: member="ldlm_lock::l_client_cookie" ref="a4f6fa304d22507684a9483ecaf67c646" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="structldlm__lock.html#a4f6fa304d22507684a9483ecaf67c646">ldlm_lock::l_client_cookie</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connection cookie for the client originating the operation. </p>
<p>Used by Commit on Share (COS) code. Currently only used for inodebits locks on MDS. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00833">833</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8070acdaa6bb825842083d710f8a935"></a><!-- doxytag: member="ldlm_lock::l_completion_ast" ref="aa8070acdaa6bb825842083d710f8a935" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LDLM.html#gac03b996dc38f767ddd9b2f5ae779b257">ldlm_completion_callback</a> <a class="el" href="structldlm__lock.html#aa8070acdaa6bb825842083d710f8a935">ldlm_lock::l_completion_ast</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock completion handler pointer. </p>
<p>Called when lock is granted. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00730">730</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>, and <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>.</p>

</div>
</div>
<a class="anchor" id="ae11dfeaaf68f7217bc5defa97b58b1b1"></a><!-- doxytag: member="ldlm_lock::l_conn_export" ref="ae11dfeaaf68f7217bc5defa97b58b1b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__export.html">obd_export</a>* <a class="el" href="structldlm__lock.html#ae11dfeaaf68f7217bc5defa97b58b1b1">ldlm_lock::l_conn_export</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock connection export. </p>
<p>Pointer to server export on a client. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00759">759</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01148">ldlm_cancel_pack()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01917">ldlm_cli_cancel_list()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00090">ldlm_expired_completion_wait()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, and <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b43a74ce7191faf551c2ca62c880f10"></a><!-- doxytag: member="ldlm_lock::l_cp_ast" ref="a7b43a74ce7191faf551c2ca62c880f10" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a7b43a74ce7191faf551c2ca62c880f10">ldlm_lock::l_cp_ast</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item <a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632" title="Aggregator function to add AST work items into a list.">ldlm_add_ast_work_item()</a> for case of completion ASTs. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00867">867</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00682">ldlm_add_cp_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a89387ae7cb253ca09998dce444eac825"></a><!-- doxytag: member="ldlm_lock::l_exp_flock_hash" ref="a89387ae7cb253ca09998dce444eac825" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhlist__node.html">hlist_node</a> <a class="el" href="structldlm__lock.html#a89387ae7cb253ca09998dce444eac825">ldlm_lock::l_exp_flock_hash</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Per export hash of flock locks. </p>
<p>Protected by per-bucket exp-&gt;exp_flock_hash locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00719">719</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00873">ldlm_export_flock_key()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00888">ldlm_export_flock_object()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00098">ldlm_flock_blocking_link()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00192">ldlm_flock_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>.</p>

</div>
</div>
<a class="anchor" id="aa9c7b6de27615654aab63f1b924df9a6"></a><!-- doxytag: member="ldlm_lock::l_exp_hash" ref="aa9c7b6de27615654aab63f1b924df9a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhlist__node.html">hlist_node</a> <a class="el" href="structldlm__lock.html#aa9c7b6de27615654aab63f1b924df9a6">ldlm_lock::l_exp_hash</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Per export hash of locks. </p>
<p>Protected by per-bucket exp-&gt;exp_lock_hash locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00714">714</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02856">ldlm_export_lock_get()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02826">ldlm_export_lock_key()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02835">ldlm_export_lock_keycpy()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02865">ldlm_export_lock_put()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02175">replay_lock_interpret()</a>.</p>

</div>
</div>
<a class="anchor" id="adb27b96d85f21b4b27ca59159d8316ec"></a><!-- doxytag: member="ldlm_lock::l_exp_list" ref="adb27b96d85f21b4b27ca59159d8316ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#adb27b96d85f21b4b27ca59159d8316ec">ldlm_lock::l_exp_list</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>export blocking dlm lock list, protected by l_export-&gt;exp_bl_list_lock. </p>
<p>Lock order of waiting_lists_spinlock, exp_bl_list_lock and res lock is: res lock -&gt; exp_bl_list_lock -&gt; wanting_lists_spinlock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00901">901</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02361">ldlm_export_cancel_blocked_locks()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="a60b23d06e26065065d0bac47ace905b0"></a><!-- doxytag: member="ldlm_lock::l_export" ref="a60b23d06e26065065d0bac47ace905b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__export.html">obd_export</a>* <a class="el" href="structldlm__lock.html#a60b23d06e26065065d0bac47ace905b0">ldlm_lock::l_export</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock export. </p>
<p>This is a pointer to actual client export for locks that were granted to clients. Used server-side. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00754">754</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00098">ldlm_flock_blocking_link()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00192">ldlm_flock_deadlock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00082">ldlm_same_flock_owner()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00069">ofd_intent_cb()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00342">ofd_lvbo_size()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>, <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>, <a class="el" href="qmt__lock_8c_source.html#l00236">qmt_lvbo_update()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01312">tgt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="a52cb4e433ee43b7326bfbb652c3d0598"></a><!-- doxytag: member="ldlm_lock::l_flags" ref="a52cb4e433ee43b7326bfbb652c3d0598" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="structldlm__lock.html#a52cb4e433ee43b7326bfbb652c3d0598">ldlm_lock::l_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock state flags. </p>
<p>Protected by lr_lock. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="lustre__dlm__flags_8h.html" title="The flags and collections of flags (masks) for.">lustre_dlm_flags.h</a> where the bits are defined. </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00778">778</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01298">ldlm_lock_fail_match_locked()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02292">ofd_prolong_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa0d1608f452158ab011eecc6f978058"></a><!-- doxytag: member="ldlm_lock::l_glimpse_ast" ref="aaa0d1608f452158ab011eecc6f978058" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LDLM.html#ga6e5c291246d5e6fb302d99a6111cb03d">ldlm_glimpse_callback</a> <a class="el" href="structldlm__lock.html#aaa0d1608f452158ab011eecc6f978058">ldlm_lock::l_glimpse_ast</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock glimpse handler. </p>
<p>Glimpse handler is used to obtain LVB updates from a client by server </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00747">747</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02012">ldlm_work_gl_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a714ebd7977f069a111bf98aa7b202167"></a><!-- doxytag: member="ldlm_lock::l_granted_mode" ref="a714ebd7977f069a111bf98aa7b202167" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="structldlm__lock.html#a714ebd7977f069a111bf98aa7b202167">ldlm_lock::l_granted_mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Granted mode, also protected by lr_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00728">728</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00936">ldlm_extent_unlink_lock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01078">ldlm_grant_lock_with_skiplist()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="mdt__handler_8c_source.html#l03215">mdt_intent_fixup_resent()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="ofd__dev_8c_source.html#l02422">ofd_rw_hpreq_lock_match()</a>, <a class="el" href="osc__request_8c_source.html#l02715">osc_cancel_weight()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__cache_8c_source.html#l00182">osc_extent_sanity_check0()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="osc__lock_8c_source.html#l00088">osc_lock_invariant()</a>, <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>, <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01312">tgt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="af6bfe0ab210b608d0fa59ee6e95841ec"></a><!-- doxytag: member="ldlm_lock::l_handle" ref="af6bfe0ab210b608d0fa59ee6e95841ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structportals__handle.html">portals_handle</a> <a class="el" href="structldlm__lock.html#af6bfe0ab210b608d0fa59ee6e95841ec">ldlm_lock::l_handle</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Local lock handle. </p>
<p>When remote side wants to tell us about a lock, they address it by this opaque handle. The handle does not hold a reference on the <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a>, so it can be safely passed to other threads or nodes. When the lock needs to be accessed from the handle, it is looked up again in the lock table, and may no longer exist.</p>
<p>Must be first in the structure. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00678">678</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00582">ldlm_lock2handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l03215">mdt_intent_fixup_resent()</a>, <a class="el" href="ofd__dev_8c_source.html#l02540">ofd_punch_hpreq_lock_match()</a>, <a class="el" href="osc__lock_8c_source.html#l00088">osc_lock_invariant()</a>, and <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="af1f00870111fa501c0fb07a97c642fb1"></a><!-- doxytag: member="ldlm_lock::l_last_activity" ref="af1f00870111fa501c0fb07a97c642fb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> <a class="el" href="structldlm__lock.html#af1f00870111fa501c0fb07a97c642fb1">ldlm_lock::l_last_activity</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Seconds. </p>
<p>It will be updated if there is any activity related to the lock, e.g. enqueue the lock or send blocking AST. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00797">797</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00160">ldlm_completion_tail()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00090">ldlm_expired_completion_wait()</a>.</p>

</div>
</div>
<a class="anchor" id="ae5c325b0e0c567e7a32fa97d4aeb0796"></a><!-- doxytag: member="ldlm_lock::l_last_used" ref="ae5c325b0e0c567e7a32fa97d4aeb0796" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> <a class="el" href="structldlm__lock.html#ae5c325b0e0c567e7a32fa97d4aeb0796">ldlm_lock::l_last_used</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time last used by e.g. </p>
<p>being matched by lock match. Jiffies. Should be converted to time if needed. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00803">803</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01574">ldlm_cancel_aged_policy()</a>, <a class="el" href="ldlm__request_8c_source.html#l01492">ldlm_cancel_lrur_policy()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00259">ldlm_lock_remove_from_lru_check()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="ab7ff3f52f4765c133758c21e0d224a8b"></a><!-- doxytag: member="ldlm_lock::l_lock" ref="ab7ff3f52f4765c133758c21e0d224a8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t <a class="el" href="structldlm__lock.html#ab7ff3f52f4765c133758c21e0d224a8b">ldlm_lock::l_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal spinlock protects l_resource. </p>
<p>We should hold this lock first before taking res_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00689">689</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a039f73a41d5d8a655eff3b056963847d"></a><!-- doxytag: member="ldlm_lock::l_lru" ref="a039f73a41d5d8a655eff3b056963847d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a039f73a41d5d8a655eff3b056963847d">ldlm_lock::l_lru</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item for client side LRU list. </p>
<p>Protected by ns_lock in struct <a class="el" href="structldlm__namespace.html" title="LDLM Namespace.">ldlm_namespace</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00699">699</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00259">ldlm_lock_remove_from_lru_check()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00233">ldlm_lock_remove_from_lru_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00313">ldlm_lock_touch_in_lru()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="a58e99cf39e7033e1a504afccc043f318"></a><!-- doxytag: member="ldlm_lock::l_lvb_data" ref="a58e99cf39e7033e1a504afccc043f318" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structldlm__lock.html#a58e99cf39e7033e1a504afccc043f318">ldlm_lock::l_lvb_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00819">819</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="file_8c_source.html#l03925">ll_layout_fetch()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="osc__lock_8c_source.html#l00191">osc_lock_lvb_update()</a>.</p>

</div>
</div>
<a class="anchor" id="af9af59e08968100a683ab5f5d595a495"></a><!-- doxytag: member="ldlm_lock::l_lvb_len" ref="af9af59e08968100a683ab5f5d595a495" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#af9af59e08968100a683ab5f5d595a495">ldlm_lock::l_lvb_len</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Temporary storage for a LVB received during an enqueue operation. </p>
<p>May be vmalloc'd, so needs to be freed with <a class="el" href="obd__support_8h.html#a23d443ea219d6893da5645c760e0c28a">OBD_FREE_LARGE()</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00818">818</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="file_8c_source.html#l03925">ll_layout_fetch()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9dc493ac24012a9a530f85cbb56fa25"></a><!-- doxytag: member="ldlm_lock::l_lvb_type" ref="ad9dc493ac24012a9a530f85cbb56fa25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a> <a class="el" href="structldlm__lock.html#ad9dc493ac24012a9a530f85cbb56fa25">ldlm_lock::l_lvb_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00812">812</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01539">ldlm_fill_lvb()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="file_8c_source.html#l03925">ll_layout_fetch()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="a464e73d6b8dbeeb1f94f4235cc71b02a"></a><!-- doxytag: member="ldlm_lock::l_pending_chain" ref="a464e73d6b8dbeeb1f94f4235cc71b02a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a464e73d6b8dbeeb1f94f4235cc71b02a">ldlm_lock::l_pending_chain</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item for locks waiting for cancellation from clients. </p>
<p>The lists this could be linked into are: waiting_locks_list (protected by waiting_locks_spinlock), then if the lock timed out, it is moved to expired_lock_thread.elt_expired_locks for further processing. Protected by elt_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00843">843</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02338">ldlm_replay_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="aa353839ecc6943a9c21f0ace1e220b8d"></a><!-- doxytag: member="ldlm_lock::l_pid" ref="aa353839ecc6943a9c21f0ace1e220b8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#aa353839ecc6943a9c21f0ace1e220b8d">ldlm_lock::l_pid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Local PID of process which created this lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00855">855</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a30dc0349b0b525d72e9a3a92ad19ff79"></a><!-- doxytag: member="ldlm_lock::l_policy_data" ref="a30dc0349b0b525d72e9a3a92ad19ff79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> <a class="el" href="structldlm__lock.html#a30dc0349b0b525d72e9a3a92ad19ff79">ldlm_lock::l_policy_data</a><code> [write]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Representation of private data specific for a lock type. </p>
<p>Examples are: extent range for extent lock or bitmask for ibits locks </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00772">772</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="osc__cache_8c_source.html#l03131">check_and_discard_cb()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00894">ldlm_export_flock_get()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00873">ldlm_export_flock_key()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00909">ldlm_export_flock_put()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00802">ldlm_extent_shift_kms()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00098">ldlm_flock_blocking_link()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00192">ldlm_flock_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00090">ldlm_flocks_overlap()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00987">ldlm_has_layout()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00243">ldlm_interval_extent()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00082">ldlm_same_flock_owner()</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="mdc__request_8c_source.html#l02583">mdc_cancel_weight()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l00102">mdc_set_lock_data()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00069">ofd_intent_cb()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="ofd__dev_8c_source.html#l02422">ofd_rw_hpreq_lock_match()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__cache_8c_source.html#l00182">osc_extent_sanity_check0()</a>, <a class="el" href="osc__io_8c_source.html#l00087">osc_io_read_ahead()</a>, <a class="el" href="osc__lock_8c_source.html#l00693">osc_ldlm_weigh_ast()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="osc__lock_8c_source.html#l00191">osc_lock_lvb_update()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01312">tgt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="abb8a2696003a5ba2a21c2365ecc2d275"></a><!-- doxytag: member="ldlm_lock::l_readers" ref="abb8a2696003a5ba2a21c2365ecc2d275" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#abb8a2696003a5ba2a21c2365ecc2d275">ldlm_lock::l_readers</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock r/w usage counters. </p>
<p>Protected by lr_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00784">784</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, and <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="acd61f904bdcdfee7845701368db6003d"></a><!-- doxytag: member="ldlm_lock::l_refc" ref="acd61f904bdcdfee7845701368db6003d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="structldlm__lock.html#acd61f904bdcdfee7845701368db6003d">ldlm_lock::l_refc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock reference count. </p>
<p>This is how many users have pointers to actual structure, so that we do not accidentally free lock structure that is in use. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00684">684</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00178">ldlm_lock_get()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a2cc84a3989e5b197caffa7a0fe014f27"></a><!-- doxytag: member="ldlm_lock::l_reference" ref="a2cc84a3989e5b197caffa7a0fe014f27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__ref.html">lu_ref</a> <a class="el" href="structldlm__lock.html#a2cc84a3989e5b197caffa7a0fe014f27">ldlm_lock::l_reference</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reference tracking structure to debug leaked locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00885">885</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="osc__cache_8c_source.html#l00619">osc_extent_find()</a>, <a class="el" href="osc__cache_8c_source.html#l00355">osc_extent_put()</a>, <a class="el" href="osc__lock_8c_source.html#l01025">osc_lock_detach()</a>, and <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c6e6f83512b652ba6563740a3d3487e"></a><!-- doxytag: member="ldlm_lock::l_remote_handle" ref="a2c6e6f83512b652ba6563740a3d3487e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> <a class="el" href="structldlm__lock.html#a2c6e6f83512b652ba6563740a3d3487e">ldlm_lock::l_remote_handle</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remote lock handle. </p>
<p>If the lock is remote, this is the handle of the other side lock (l_handle) </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00766">766</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l01148">ldlm_cancel_pack()</a>, <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02826">ldlm_export_lock_key()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02835">ldlm_export_lock_keycpy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="mdc__lib_8c_source.html#l00400">mdc_intent_close_pack()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="osc__object_8c_source.html#l00353">osc_req_attr_set()</a>, <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>, <a class="el" href="qsd__handler_8c_source.html#l00085">qsd_ready()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02175">replay_lock_interpret()</a>.</p>

</div>
</div>
<a class="anchor" id="af103e96dfac8d06fe14a472577c0f7f6"></a><!-- doxytag: member="ldlm_lock::l_req_extent" ref="af103e96dfac8d06fe14a472577c0f7f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__extent.html">ldlm_extent</a> <a class="el" href="structldlm__lock.html#af103e96dfac8d06fe14a472577c0f7f6">ldlm_lock::l_req_extent</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Originally requested extent for the extent lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00806">806</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c3ab4e1a3ec7f022d954251e6eafa67"></a><!-- doxytag: member="ldlm_lock::l_req_mode" ref="a4c3ab4e1a3ec7f022d954251e6eafa67" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="structldlm__lock.html#a4c3ab4e1a3ec7f022d954251e6eafa67">ldlm_lock::l_req_mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Requested mode. </p>
<p>Protected by lr_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00724">724</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01078">ldlm_grant_lock_with_skiplist()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="osc__request_8c_source.html#l02715">osc_cancel_weight()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__io_8c_source.html#l00087">osc_io_read_ahead()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="osc__lock_8c_source.html#l00088">osc_lock_invariant()</a>, <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>, <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a64ad5a636aec3f0825f1eea9df1a5734"></a><!-- doxytag: member="ldlm_lock::l_res_link" ref="a64ad5a636aec3f0825f1eea9df1a5734" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a64ad5a636aec3f0825f1eea9df1a5734">ldlm_lock::l_res_link</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Linkage to resource's lock queues according to current lock state. </p>
<p>(could be granted, waiting or converting) Protected by lr_lock in struct <a class="el" href="structldlm__resource.html" title="LDLM resource description.">ldlm_resource</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00705">705</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00802">ldlm_extent_shift_kms()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01448">ldlm_resource_dump()</a>, <a class="el" href="ldlm__request_8c_source.html#l02056">ldlm_resource_foreach()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01345">ldlm_resource_insert_lock_after()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01284">search_queue()</a>.</p>

</div>
</div>
<a class="anchor" id="a41f4592eb59ed0c94d85e9fa67acfa6f"></a><!-- doxytag: member="ldlm_lock::l_resource" ref="a41f4592eb59ed0c94d85e9fa67acfa6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a>* <a class="el" href="structldlm__lock.html#a41f4592eb59ed0c94d85e9fa67acfa6f">ldlm_lock::l_resource</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to actual resource this lock is in. </p>
<p><a class="el" href="group__LDLM.html#gafd6a07a826f7d2789696e472dd81adc2" title="Moves LDLM lock lock to another resource.">ldlm_lock_change_resource()</a> can change this. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00694">694</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00700">ldlm_add_ast_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, <a class="el" href="ldlm__request_8c_source.html#l01458">ldlm_cancel_no_wait_policy()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00802">ldlm_extent_shift_kms()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00936">ldlm_extent_unlink_lock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01078">ldlm_grant_lock_with_skiplist()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00987">ldlm_has_layout()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00836">ldlm_interval_alloc()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00233">ldlm_lock_remove_from_lru_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01018">ldlm_lock_to_ns_at()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01064">ldlm_lvbo_fill()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01345">ldlm_resource_insert_lock_after()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02236">ldlm_unlink_lock_skiplist()</a>, <a class="el" href="llite__lib_8c_source.html#l01180">ll_inode_from_resource_lock()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="mdc__request_8c_source.html#l02583">mdc_cancel_weight()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l00102">mdc_set_lock_data()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00073">mdt_lvbo_size()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00361">ofd_lvbo_fill()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="ofd__dev_8c_source.html#l02422">ofd_rw_hpreq_lock_match()</a>, <a class="el" href="osc__request_8c_source.html#l02715">osc_cancel_weight()</a>, <a class="el" href="osc__lock_8c_source.html#l00693">osc_ldlm_weigh_ast()</a>, <a class="el" href="osc__lock_8c_source.html#l00191">osc_lock_lvb_update()</a>, <a class="el" href="osp__dev_8c_source.html#l00963">osp_cancel_weight()</a>, <a class="el" href="qmt__lock_8c_source.html#l00346">qmt_lvbo_fill()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>, <a class="el" href="tgt__handler_8c_source.html#l01312">tgt_blocking_ast()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f992bff4dba5d9c54588678ca261614"></a><!-- doxytag: member="ldlm_lock::l_rk_ast" ref="a0f992bff4dba5d9c54588678ca261614" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a0f992bff4dba5d9c54588678ca261614">ldlm_lock::l_rk_ast</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For <a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632" title="Aggregator function to add AST work items into a list.">ldlm_add_ast_work_item()</a> for "revoke" AST used in COS. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00869">869</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01984">ldlm_work_revoke_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="aa26a328bc8c2e6eff25c62c2d6e8c9ee"></a><!-- doxytag: member="ldlm_lock::l_sl_mode" ref="aa26a328bc8c2e6eff25c62c2d6e8c9ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#aa26a328bc8c2e6eff25c62c2d6e8c9ee">ldlm_lock::l_sl_mode</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Protected by lr_lock, linkages to "skip lists". </p>
<p>For more explanations of skip lists see <a class="el" href="ldlm__inodebits_8c.html">ldlm/ldlm_inodebits.c</a> </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00881">881</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02236">ldlm_unlink_lock_skiplist()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4634b2ff8d252a3a8a81b0bb1db5464"></a><!-- doxytag: member="ldlm_lock::l_sl_policy" ref="ad4634b2ff8d252a3a8a81b0bb1db5464" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#ad4634b2ff8d252a3a8a81b0bb1db5464">ldlm_lock::l_sl_policy</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00882">882</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01228">itree_overlap_cb()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00871">ldlm_interval_detach()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00243">ldlm_interval_extent()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02236">ldlm_unlink_lock_skiplist()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00069">ofd_intent_cb()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="abc34b7aa1202f2a2830f825ba7918f2d"></a><!-- doxytag: member="ldlm_lock::l_tree_node" ref="abc34b7aa1202f2a2830f825ba7918f2d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a>* <a class="el" href="structldlm__lock.html#abc34b7aa1202f2a2830f825ba7918f2d">ldlm_lock::l_tree_node</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tree node for <a class="el" href="structldlm__extent.html">ldlm_extent</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00709">709</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00936">ldlm_extent_unlink_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00871">ldlm_interval_detach()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ca58a0480ef9503c3548499e27c2e43"></a><!-- doxytag: member="ldlm_lock::l_waitq" ref="a0ca58a0480ef9503c3548499e27c2e43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t <a class="el" href="structldlm__lock.html#a0ca58a0480ef9503c3548499e27c2e43">ldlm_lock::l_waitq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the lock is granted, a process sleeps on this waitq to learn when it's no longer in use. </p>
<p>If the lock is not granted, a process sleeps on this waitq to learn when it becomes granted. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00791">791</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01321">ldlm_lock_allow_match_locked()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01298">ldlm_lock_fail_match_locked()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>.</p>

</div>
</div>
<a class="anchor" id="a9d7d1e3aae30e19867dd45c9de95b6f9"></a><!-- doxytag: member="ldlm_lock::l_writers" ref="a9d7d1e3aae30e19867dd45c9de95b6f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#a9d7d1e3aae30e19867dd45c9de95b6f9">ldlm_lock::l_writers</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00785">785</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, and <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lustre/include/<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:53 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
