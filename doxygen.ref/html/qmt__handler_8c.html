<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/quota/qmt_handler.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/quota/qmt_handler.c File Reference</h1><code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="qmt__internal_8h_source.html">qmt_internal.h</a>&quot;</code><br/>

<p><a href="qmt__handler_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LQUOTA</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#a89de184b7035cb61e6a2af13d646751f">qmt_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, __u16 pool_id, __u8 restype, __u8 qtype, union <a class="el" href="unionlquota__id.html">lquota_id</a> *id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *hard, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *soft, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *time)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#a9e0218634d529f7ed10a03a14a2668d7">qmt_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, __u16 pool_id, __u8 restype, __u8 qtype, union <a class="el" href="unionlquota__id.html">lquota_id</a> *id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hard, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> soft, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> time, __u32 valid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#a00fe2a0528ec9c553ab0acf849af9973">qmt_quotactl</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *oqctl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#abe40312c727fc8a83a82a698022e6162">qmt_dqacq0</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe, struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, __u32 qb_flags, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> qb_count, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> qb_usage, struct <a class="el" href="structquota__body.html">quota_body</a> *repbody)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#a1d50345da13d282b0322629aca4cde2b">qmt_dqacq</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structqmt__handlers.html">qmt_handlers</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__handler_8c.html#a61f6cf34d1f0aa9b69fcb83477deab90">qmt_hdls</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="qmt_handler.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LQUOTA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00031">31</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1d50345da13d282b0322629aca4cde2b"></a><!-- doxytag: member="qmt_handler.c::qmt_dqacq" ref="a1d50345da13d282b0322629aca4cde2b" args="(const struct lu_env *env, struct lu_device *ld, struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_dqacq </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00580">580</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00328">at_est2timeout()</a>, <a class="el" href="lustre__import_8h_source.html#l00373">at_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00063">ldlm_is_ast_sent</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00600">ldlm_refresh_waiting_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00159">lquota_entry::lqe_qunit</a>, <a class="el" href="lquota__lib_8c_source.html#l00256">lquota_extract_fid()</a>, <a class="el" href="qmt__internal_8h_source.html#l00220">lu2qmt_dev()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="lustre__idl_8h_source.html#l01885">quota_body::qb_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01879">quota_body::qb_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l01883">quota_body::qb_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01889">quota_body::qb_glb_lockh</a>, <a class="el" href="lustre__idl_8h_source.html#l01882">quota_body::qb_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01888">quota_body::qb_lockh</a>, <a class="el" href="lustre__idl_8h_source.html#l01886">quota_body::qb_usage</a>, <a class="el" href="qmt__handler_8c_source.html#l00342">qmt_dqacq0()</a>, <a class="el" href="qmt__pool_8c_source.html#l00710">qmt_pool_lqe_lookup()</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="lquota__internal_8h_source.html#l00321">req_is_acq</a>, <a class="el" href="lquota__internal_8h_source.html#l00322">req_is_preacq</a>, <a class="el" href="lquota__internal_8h_source.html#l00323">req_is_rel</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00949">RMF_QUOTA_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="lustre__net_8h_source.html#l01831">ptlrpc_service_part::scp_at_estimate</a>, <a class="el" href="gnilnd__modparams_8c_source.html#l00052">timeout</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

</div>
</div>
<a class="anchor" id="abe40312c727fc8a83a82a698022e6162"></a><!-- doxytag: member="qmt_handler.c::qmt_dqacq0" ref="abe40312c727fc8a83a82a698022e6162" args="(const struct lu_env *env, struct lquota_entry *lqe, struct qmt_device *qmt, struct obd_uuid *uuid, __u32 qb_flags, __u64 qb_count, __u64 qb_usage, struct quota_body *repbody)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_dqacq0 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>qb_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>qb_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>qb_usage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquota__body.html">quota_body</a> *&nbsp;</td>
          <td class="paramname"> <em>repbody</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00342">342</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_edquot</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_enforced</a>, <a class="el" href="qmt__internal_8h_source.html#l00232">LQE_GLB_OBJ</a>, <a class="el" href="lquota__internal_8h_source.html#l00158">lquota_entry::lqe_granted</a>, <a class="el" href="lquota__internal_8h_source.html#l00144">lquota_entry::lqe_id</a>, <a class="el" href="lquota__internal_8h_source.html#l00159">lquota_entry::lqe_qunit</a>, <a class="el" href="qmt__internal_8h_source.html#l00231">LQE_ROOT</a>, <a class="el" href="lquota__internal_8h_source.html#l00242">lqe_write_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00250">lqe_write_unlock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00301">LQUOTA_BUMP_VER</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lquota__disk_8c_source.html#l00307">lquota_disk_slv_find()</a>, <a class="el" href="lquota__internal_8h_source.html#l00360">LQUOTA_ERROR</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00471">OBD_FAIL_QUOTA_EDQUOT</a>, <a class="el" href="obd__support_8h_source.html#l00473">OBD_FAIL_QUOTA_RECOVERABLE_ERR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="out__handler_8c_source.html#l00560">out_write()</a>, <a class="el" href="lustre__idl_8h_source.html#l01885">quota_body::qb_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01882">quota_body::qb_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01887">quota_body::qb_slv_ver</a>, <a class="el" href="qmt__entry_8c_source.html#l00410">qmt_adjust_edquot()</a>, <a class="el" href="qmt__entry_8c_source.html#l00573">qmt_adjust_qunit()</a>, <a class="el" href="qmt__entry_8c_source.html#l00514">qmt_alloc_expand()</a>, <a class="el" href="qmt__internal_8h_source.html#l00054">qmt_device::qmt_child</a>, <a class="el" href="qmt__entry_8c_source.html#l00244">qmt_glb_write()</a>, <a class="el" href="qmt__internal_8h_source.html#l00256">QMT_GRANT</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__internal_8h_source.html#l00235">qmt_lqe_grace()</a>, <a class="el" href="qmt__internal_8h_source.html#l00261">QMT_REL</a>, <a class="el" href="qmt__internal_8h_source.html#l00246">qmt_restore()</a>, <a class="el" href="qmt__entry_8c_source.html#l00686">qmt_revalidate()</a>, <a class="el" href="qmt__entry_8c_source.html#l00298">qmt_slv_read()</a>, <a class="el" href="qmt__entry_8c_source.html#l00350">qmt_slv_write()</a>, <a class="el" href="qmt__internal_8h_source.html#l00288">qmt_space_exhausted()</a>, <a class="el" href="qmt__entry_8c_source.html#l00148">qmt_trans_start_with_slv()</a>, <a class="el" href="qmt__internal_8h_source.html#l00199">qmt_thread_info::qti_restore</a>, <a class="el" href="lquota__internal_8h_source.html#l00324">req_has_rep</a>, <a class="el" href="lquota__internal_8h_source.html#l00321">req_is_acq</a>, <a class="el" href="lquota__internal_8h_source.html#l00322">req_is_preacq</a>, <a class="el" href="lquota__internal_8h_source.html#l00323">req_is_rel</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>, <a class="el" href="qmt__lock_8c_source.html#l00043">qmt_intent_policy()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00236">qmt_lvbo_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a89de184b7035cb61e6a2af13d646751f"></a><!-- doxytag: member="qmt_handler.c::qmt_get" ref="a89de184b7035cb61e6a2af13d646751f" args="(const struct lu_env *env, struct qmt_device *qmt, __u16 pool_id, __u8 restype, __u8 qtype, union lquota_id *id, __u64 *hard, __u64 *soft, __u64 *time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>pool_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u8&nbsp;</td>
          <td class="paramname"> <em>restype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u8&nbsp;</td>
          <td class="paramname"> <em>qtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlquota__id.html">lquota_id</a> *&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>hard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>soft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00051">51</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00258">lqe_read_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00266">lqe_read_unlock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="qmt__pool_8c_source.html#l00710">qmt_pool_lqe_lookup()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qmt__handler_8c_source.html#l00200">qmt_quotactl()</a>.</p>

</div>
</div>
<a class="anchor" id="a00fe2a0528ec9c553ab0acf849af9973"></a><!-- doxytag: member="qmt_handler.c::qmt_quotactl" ref="a00fe2a0528ec9c553ab0acf849af9973" args="(const struct lu_env *env, struct lu_device *ld, struct obd_quotactl *oqctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_quotactl </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *&nbsp;</td>
          <td class="paramname"> <em>oqctl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00200">200</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00657">obd_dqblk::dqb_bhardlimit</a>, <a class="el" href="lustre__user_8h_source.html#l00658">obd_dqblk::dqb_bsoftlimit</a>, <a class="el" href="lustre__user_8h_source.html#l00663">obd_dqblk::dqb_btime</a>, <a class="el" href="lustre__user_8h_source.html#l00662">obd_dqblk::dqb_curinodes</a>, <a class="el" href="lustre__user_8h_source.html#l00659">obd_dqblk::dqb_curspace</a>, <a class="el" href="lustre__user_8h_source.html#l00660">obd_dqblk::dqb_ihardlimit</a>, <a class="el" href="lustre__user_8h_source.html#l00661">obd_dqblk::dqb_isoftlimit</a>, <a class="el" href="lustre__user_8h_source.html#l00664">obd_dqblk::dqb_itime</a>, <a class="el" href="lustre__user_8h_source.html#l00665">obd_dqblk::dqb_valid</a>, <a class="el" href="lustre__user_8h_source.html#l00649">obd_dqinfo::dqi_bgrace</a>, <a class="el" href="lustre__user_8h_source.html#l00650">obd_dqinfo::dqi_igrace</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l01917">LQUOTA_RES_DT</a>, <a class="el" href="lustre__idl_8h_source.html#l01916">LQUOTA_RES_MD</a>, <a class="el" href="qmt__internal_8h_source.html#l00220">lu2qmt_dev()</a>, <a class="el" href="lustre__idl_8h_source.html#l01856">obd_quotactl::qc_cmd</a>, <a class="el" href="lustre__idl_8h_source.html#l01861">obd_quotactl::qc_dqblk</a>, <a class="el" href="lustre__idl_8h_source.html#l01860">obd_quotactl::qc_dqinfo</a>, <a class="el" href="lustre__idl_8h_source.html#l01858">obd_quotactl::qc_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01857">obd_quotactl::qc_type</a>, <a class="el" href="lquota__internal_8h_source.html#l00038">QIF_BFLAGS</a>, <a class="el" href="lustre__user_8h_source.html#l00623">QIF_BLIMITS</a>, <a class="el" href="lustre__user_8h_source.html#l00627">QIF_BTIME</a>, <a class="el" href="lquota__internal_8h_source.html#l00037">QIF_IFLAGS</a>, <a class="el" href="lustre__user_8h_source.html#l00625">QIF_ILIMITS</a>, <a class="el" href="lustre__user_8h_source.html#l00628">QIF_ITIME</a>, <a class="el" href="lustre__user_8h_source.html#l00629">QIF_LIMITS</a>, <a class="el" href="lustre__user_8h_source.html#l00631">QIF_TIMES</a>, <a class="el" href="qmt__handler_8c_source.html#l00051">qmt_get()</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__handler_8c_source.html#l00094">qmt_set()</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="qmt__internal_8h_source.html#l00193">qmt_thread_info::qti_id</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a9e0218634d529f7ed10a03a14a2668d7"></a><!-- doxytag: member="qmt_handler.c::qmt_set" ref="a9e0218634d529f7ed10a03a14a2668d7" args="(const struct lu_env *env, struct qmt_device *qmt, __u16 pool_id, __u8 restype, __u8 qtype, union lquota_id *id, __u64 hard, __u64 soft, __u64 time, __u32 valid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>pool_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u8&nbsp;</td>
          <td class="paramname"> <em>restype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u8&nbsp;</td>
          <td class="paramname"> <em>qtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlquota__id.html">lquota_id</a> *&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>hard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>soft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>valid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00094">94</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_enforced</a>, <a class="el" href="lquota__internal_8h_source.html#l00158">lquota_entry::lqe_granted</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00242">lqe_write_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00250">lqe_write_unlock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00301">LQUOTA_BUMP_VER</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="lustre__user_8h_source.html#l00629">QIF_LIMITS</a>, <a class="el" href="lustre__user_8h_source.html#l00631">QIF_TIMES</a>, <a class="el" href="qmt__entry_8c_source.html#l00410">qmt_adjust_edquot()</a>, <a class="el" href="qmt__entry_8c_source.html#l00573">qmt_adjust_qunit()</a>, <a class="el" href="qmt__internal_8h_source.html#l00054">qmt_device::qmt_child</a>, <a class="el" href="qmt__lock_8c_source.html#l00539">qmt_glb_lock_notify()</a>, <a class="el" href="qmt__entry_8c_source.html#l00244">qmt_glb_write()</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__internal_8h_source.html#l00235">qmt_lqe_grace()</a>, <a class="el" href="qmt__pool_8c_source.html#l00710">qmt_pool_lqe_lookup()</a>, <a class="el" href="qmt__internal_8h_source.html#l00246">qmt_restore()</a>, <a class="el" href="qmt__entry_8c_source.html#l00686">qmt_revalidate()</a>, <a class="el" href="qmt__entry_8c_source.html#l00220">qmt_trans_start()</a>, <a class="el" href="qmt__entry_8c_source.html#l00393">qmt_validate_limits()</a>, <a class="el" href="qmt__internal_8h_source.html#l00199">qmt_thread_info::qti_restore</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qmt__handler_8c_source.html#l00200">qmt_quotactl()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a61f6cf34d1f0aa9b69fcb83477deab90"></a><!-- doxytag: member="qmt_handler.c::qmt_hdls" ref="a61f6cf34d1f0aa9b69fcb83477deab90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structqmt__handlers.html">qmt_handlers</a> <a class="el" href="qmt__handler_8c.html#a61f6cf34d1f0aa9b69fcb83477deab90">qmt_hdls</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        
        .qmth_quotactl          = <a class="code" href="qmt__handler_8c.html#a00fe2a0528ec9c553ab0acf849af9973">qmt_quotactl</a>,
        .qmth_dqacq             = <a class="code" href="qmt__handler_8c.html#a1d50345da13d282b0322629aca4cde2b">qmt_dqacq</a>,

        
        .qmth_intent_policy     = <a class="code" href="qmt__internal_8h.html#acdcafe39d2905b4d7e6eb2b8844e52fb">qmt_intent_policy</a>,
        .qmth_lvbo_init         = <a class="code" href="qmt__internal_8h.html#af5fff8096ee98719ad1cc68b7e2366fd">qmt_lvbo_init</a>,
        .qmth_lvbo_update       = <a class="code" href="qmt__internal_8h.html#a28abb2bbd8cdf8af0e95a70a4c968988">qmt_lvbo_update</a>,
        .qmth_lvbo_size         = <a class="code" href="qmt__internal_8h.html#a40ae431896807c65c3fe55dcc6a2af41">qmt_lvbo_size</a>,
        .qmth_lvbo_fill         = <a class="code" href="qmt__internal_8h.html#ab28d2326d7eb49d15503dd3f1405b7fa">qmt_lvbo_fill</a>,
        .qmth_lvbo_free         = <a class="code" href="qmt__internal_8h.html#a8e2a3a1bab909f09f710c41cc4737e5e">qmt_lvbo_free</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="qmt__handler_8c_source.html#l00680">680</a> of file <a class="el" href="qmt__handler_8c_source.html">qmt_handler.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03554">mdt_intent_opc()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00183">mdt_lvbo_free()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00037">mdt_lvbo_init()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00073">mdt_lvbo_size()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00053">mdt_lvbo_update()</a>, <a class="el" href="mdt__handler_8c_source.html#l02192">mdt_quota_dqacq()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02016">mdt_quotactl()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
