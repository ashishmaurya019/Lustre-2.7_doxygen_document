<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/obdclass/cl_lock.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/obdclass/cl_lock.c File Reference</h1><code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="list_8h_source.html">libcfs/list.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cl__object_8h_source.html">cl_object.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="cl__internal_8h_source.html">cl_internal.h</a>&quot;</code><br/>

<p><a href="cl__lock_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl__lock_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_CLASS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl__lock_8c.html#ac68c76cf054e3937fdd18b1fc992f2d5">cl_lock_trace</a>(level, env, prefix, lock)&nbsp;&nbsp;&nbsp;cl_lock_trace0(level, env, prefix, lock, __FUNCTION__, __LINE__)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cl__lock_8c.html#afdd311b670a1d6c2dff6e6b80856deb8">cl_lock_trace0</a> (int level, const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const char *prefix, const struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock, const char *func, const int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__clio.html#ga9c2fdf8ae73a6f36bc8df4249459da93">cl_lock_slice_add</a> (struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock, struct <a class="el" href="structcl__lock__slice.html">cl_lock_slice</a> *slice, struct <a class="el" href="structcl__object.html">cl_object</a> *obj, const struct <a class="el" href="structcl__lock__operations.html">cl_lock_operations</a> *ops)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds lock slice to the compound lock.  <a href="group__clio.html#ga9c2fdf8ae73a6f36bc8df4249459da93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#ga61a295e97704c2509c99d3f7d8711a95">cl_lock_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#ga936be055d2a7449907656154d8970dc0">cl_lock_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock, const struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcl__lock__slice.html">cl_lock_slice</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#ga9b59ad7624c11fcecf6eadb1a58f6f8b">cl_lock_at</a> (const struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock, const struct <a class="el" href="structlu__device__type.html">lu_device_type</a> *dtype)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a slice with a lock, corresponding to the given layer in the device stack.  <a href="group__cl__lock.html#ga9b59ad7624c11fcecf6eadb1a58f6f8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#gaab3c1781a296023121c2641a117a57b1">cl_lock_cancel</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#gab9d3d1e316773c71555cbb8e29ca0403">cl_lock_enqueue</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock, struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *anchor)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enqueue a lock.  <a href="group__cl__lock.html#gab9d3d1e316773c71555cbb8e29ca0403"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#ga4afe671873f4a7343d9c50c574557fd6">cl_lock_request</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main high-level entry point of <a class="el" href="structcl__lock.html" title="Layered client lock.">cl_lock</a> interface that finds existing or enqueues new lock matching given description.  <a href="group__cl__lock.html#ga4afe671873f4a7343d9c50c574557fd6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#ga4e8069a400c6a75342649a6fc04fa2c3">cl_lock_release</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Releases a hold and a reference on a lock, obtained by cl_lock_hold().  <a href="group__cl__lock.html#ga4e8069a400c6a75342649a6fc04fa2c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__lock.html#gaef00eb170071c4836742562b90e49750">cl_lock_mode_name</a> (const enum <a class="el" href="group__cl__lock.html#ga85e741e93c4ba0b8fd87206425e347a1">cl_lock_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__page.html#gad2a636ba7685701e15adf1818874fd50">cl_lock_descr_print</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, void *cookie, <a class="el" href="group__lu.html#gac8ccca21472f6dc3ea91d73983740fdc">lu_printer_t</a> printer, const struct <a class="el" href="structcl__lock__descr.html">cl_lock_descr</a> *descr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prints human readable representation of a lock description.  <a href="group__cl__page.html#gad2a636ba7685701e15adf1818874fd50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__page.html#gae62cdffcc2ad419c1efe15d3f7e2b7be">cl_lock_print</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, void *cookie, <a class="el" href="group__lu.html#gac8ccca21472f6dc3ea91d73983740fdc">lu_printer_t</a> printer, const struct <a class="el" href="structcl__lock.html">cl_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prints human readable representation of <em>lock</em> to the <em>f</em>.  <a href="group__cl__page.html#gae62cdffcc2ad419c1efe15d3f7e2b7be"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac68c76cf054e3937fdd18b1fc992f2d5"></a><!-- doxytag: member="cl_lock.c::cl_lock_trace" ref="ac68c76cf054e3937fdd18b1fc992f2d5" args="(level, env, prefix, lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cl_lock_trace</td>
          <td>(</td>
          <td class="paramtype">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">prefix, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;cl_lock_trace0(level, env, prefix, lock, __FUNCTION__, __LINE__)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__lock_8c_source.html#l00060">60</a> of file <a class="el" href="cl__lock_8c_source.html">cl_lock.c</a>.</p>

<p>Referenced by <a class="el" href="cl__lock_8c_source.html#l00149">cl_lock_cancel()</a>, <a class="el" href="cl__lock_8c_source.html#l00085">cl_lock_fini()</a>, and <a class="el" href="cl__lock_8c_source.html#l00233">cl_lock_release()</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="cl_lock.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_CLASS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__lock_8c_source.html#l00042">42</a> of file <a class="el" href="cl__lock_8c_source.html">cl_lock.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="afdd311b670a1d6c2dff6e6b80856deb8"></a><!-- doxytag: member="cl_lock.c::cl_lock_trace0" ref="afdd311b670a1d6c2dff6e6b80856deb8" args="(int level, const struct lu_env *env, const char *prefix, const struct cl_lock *lock, const char *func, const int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void cl_lock_trace0 </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcl__lock.html">cl_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__lock_8c_source.html#l00052">52</a> of file <a class="el" href="cl__lock_8c_source.html">cl_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="cl__object_8h_source.html#l01982">cl_object_header()</a>, <a class="el" href="cl__object_8h_source.html#l01163">cl_lock_descr::cld_obj</a>, <a class="el" href="cl__object_8h_source.html#l01193">cl_lock::cll_descr</a>, and <a class="el" href="cl__object_8h_source.html#l00447">cl_object_header::coh_nesting</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
