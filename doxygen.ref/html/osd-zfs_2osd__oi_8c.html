<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/osd-zfs/osd_oi.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/osd-zfs/osd_oi.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__ver_8h_source.html">lustre_ver.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__disk_8h_source.html">lustre_disk.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="osd-zfs_2osd__internal_8h_source.html">osd_internal.h</a>&quot;</code><br/>
<code>#include &lt;sys/dnode.h&gt;</code><br/>
<code>#include &lt;sys/dbuf.h&gt;</code><br/>
<code>#include &lt;sys/spa.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;sys/zap.h&gt;</code><br/>
<code>#include &lt;sys/spa_impl.h&gt;</code><br/>
<code>#include &lt;sys/zfs_znode.h&gt;</code><br/>
<code>#include &lt;sys/dmu_tx.h&gt;</code><br/>
<code>#include &lt;sys/dmu_objset.h&gt;</code><br/>
<code>#include &lt;sys/dsl_prop.h&gt;</code><br/>
<code>#include &lt;sys/sa_impl.h&gt;</code><br/>
<code>#include &lt;sys/txg.h&gt;</code><br/>

<p><a href="osd-zfs_2osd__oi_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnamed__oid.html">named_oid</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_OSD</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#ac8e15957f8974dbcc8dd86e9ca9ceb96">OSD_OI_FID_NR</a>&nbsp;&nbsp;&nbsp;(1UL &lt;&lt; 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#ad2befc7a16d7da61835dd6e7dc08be30">OSD_OI_FID_NR_MAX</a>&nbsp;&nbsp;&nbsp;(1UL &lt;&lt; OSD_OI_FID_OID_BITS_MAX)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#afe7887fff3a87aa27d2e0f723d50e313">oid2name</a> (const unsigned long oid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#affc195624768d7e23311f6d530899f83">osd_oi_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, uint64_t parent, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structosd__oi.html">osd_oi</a> *oi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup an existing OI by the given name.  <a href="#affc195624768d7e23311f6d530899f83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a76a1108b025e6057ed64f5d56ab21bf5">osd_oi_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, uint64_t parent, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, uint64_t *child)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new OI with the given name.  <a href="#a76a1108b025e6057ed64f5d56ab21bf5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a776e25c4927c75e5bd0035e046523fa2">osd_oi_find_or_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, uint64_t parent, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, uint64_t *child)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a3f9dcf494255fd8bafc2a6b7f7235422">osd_fld_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd, u64 seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup the target index/flags of the fid, so it will know where the object is located (tgt index) and it is MDT or OST object.  <a href="#a3f9dcf494255fd8bafc2a6b7f7235422"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a093ee4f92c4083037d4c4b7e7d17118d">fid_is_on_ost</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structosd__seq.html">osd_seq</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a2c819409fe629eb214594a19513bf281">osd_seq_find_locked</a> (struct <a class="el" href="structosd__seq__list.html">osd_seq_list</a> *seq_list, u64 seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structosd__seq.html">osd_seq</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#af4ac2a4656e075eacfd81be81db53692">osd_seq_find</a> (struct <a class="el" href="structosd__seq__list.html">osd_seq_list</a> *seq_list, u64 seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structosd__seq.html">osd_seq</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#ac980275b4639041bcc69b182ff98c7f9">osd_find_or_add_seq</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd, u64 seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a823fb5ad62e0250f1a9c73471a49f28d">osd_get_idx_for_ost_obj</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a5e01f91295d215bca9bd01a5a7117d82">osd_fid2str</a> (char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#af21e11569321f285eed2f93b874959d3">osd_get_idx_for_fid</a> (struct <a class="el" href="structosd__device.html">osd_device</a> *osd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a83babfb3fe46485890080afde5369491">osd_get_name_n_idx</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#ae38b70a82000e4eb21024b3363cbd002">fid_is_fs_root</a> (const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#afeba88aeceafe4a805579d5273529615">osd_fid_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *dev, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, uint64_t *oid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a1528765e2824d65bc790fa76bb907451">osd_oi_remove_table</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, int key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close an entry in a specific slot.  <a href="#a1528765e2824d65bc790fa76bb907451"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#abcceffddcfcedfd4c7749066c96db2db">osd_oi_add_table</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate and open a new entry in the specified unused slot.  <a href="#abcceffddcfcedfd4c7749066c96db2db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#ad300af9f5f1fb2916beb69302522e328">osd_oi_close_table</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Depopulate the OI table.  <a href="#ad300af9f5f1fb2916beb69302522e328"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a9f42c7c19210abb79a7ca7f28a5e83a5">osd_oi_open_table</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, int count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Populate the OI table based.  <a href="#a9f42c7c19210abb79a7ca7f28a5e83a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a7fc74cdad80188603a76fa583e4bcd0a">osd_oi_probe</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o, int *count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the type and number of OIs used by this file system.  <a href="#a7fc74cdad80188603a76fa583e4bcd0a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a6b29cb532eb4196fab7a304e43e52a91">osd_ost_seq_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a587d8c00f186bb4595bf3557ad2136d5">osd_ost_seq_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *osd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a8afb320a9f6f8b957ee7de8620606b38">osd_oi_init_compat</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create /O subdirectory to map legacy OST objects for compatibility.  <a href="#a8afb320a9f6f8b957ee7de8620606b38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a8621b47401b3d5097bf883e6dcfa6e29">osd_oi_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the OIs by either opening or creating them as needed.  <a href="#a8621b47401b3d5097bf883e6dcfa6e29"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#aab8dde305b0ec951ddcc5fdecca798fc">osd_oi_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__device.html">osd_device</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#abad5ffee749e0d43c909fe67c18d5c7e">osd_options_init</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a1c588688b69c2e27cf28b3c0f6637a3d">osd_oi_count</a> = OSD_OI_FID_NR</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structnamed__oid.html">named_oid</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-zfs_2osd__oi_8c.html#a6e6a93a9be2bf3a42b80a6696d6c8a58">oids</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="osd_oi.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_OSD</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00044">44</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac8e15957f8974dbcc8dd86e9ca9ceb96"></a><!-- doxytag: member="osd_oi.c::OSD_OI_FID_NR" ref="ac8e15957f8974dbcc8dd86e9ca9ceb96" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSD_OI_FID_NR&nbsp;&nbsp;&nbsp;(1UL &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00070">70</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad2befc7a16d7da61835dd6e7dc08be30"></a><!-- doxytag: member="osd_oi.c::OSD_OI_FID_NR_MAX" ref="ad2befc7a16d7da61835dd6e7dc08be30" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSD_OI_FID_NR_MAX&nbsp;&nbsp;&nbsp;(1UL &lt;&lt; OSD_OI_FID_OID_BITS_MAX)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00071">71</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae38b70a82000e4eb21024b3363cbd002"></a><!-- doxytag: member="osd_oi.c::fid_is_fs_root" ref="ae38b70a82000e4eb21024b3363cbd002" args="(const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int fid_is_fs_root </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00453">453</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00293">FID_SEQ_LOCAL_FILE</a>, and <a class="el" href="lustre__fid_8h_source.html#l00222">OSD_FS_ROOT_OID</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00460">osd_fid_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="a093ee4f92c4083037d4c4b7e7d17118d"></a><!-- doxytag: member="osd_oi.c::fid_is_on_ost" ref="a093ee4f92c4083037d4c4b7e7d17118d" args="(const struct lu_env *env, struct osd_device *osd, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fid_is_on_ost </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00236">236</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00462">fid_is_idif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00367">fid_is_llog()</a>, <a class="el" href="lustre__idl_8h_source.html#l00467">fid_is_local_file()</a>, <a class="el" href="lustre__fid_8h_source.html#l00296">fid_is_name_llog()</a>, <a class="el" href="lustre__fid_8h_source.html#l00290">fid_is_quota()</a>, <a class="el" href="seq__range_8h_source.html#l00052">fld_range_is_ost()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l02619">osd_fld_lookup()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00925">osd_name()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00619">osd_thread_info::oti_seq_range</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="afe7887fff3a87aa27d2e0f723d50e313"></a><!-- doxytag: member="osd_oi.c::oid2name" ref="afe7887fff3a87aa27d2e0f723d50e313" args="(const unsigned long oid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* oid2name </td>
          <td>(</td>
          <td class="paramtype">const unsigned long&nbsp;</td>
          <td class="paramname"> <em>oid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00101">101</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00082">named_oid::name</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00424">osd_get_name_n_idx()</a>, and <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00653">osd_oi_init_compat()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e01f91295d215bca9bd01a5a7117d82"></a><!-- doxytag: member="osd_oi.c::osd_fid2str" ref="a5e01f91295d215bca9bd01a5a7117d82" args="(char *buf, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_fid2str </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00400">400</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00547">DFID_NOBRACE</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00412">osd_get_idx_for_fid()</a>.</p>

</div>
</div>
<a class="anchor" id="afeba88aeceafe4a805579d5273529615"></a><!-- doxytag: member="osd_oi.c::osd_fid_lookup" ref="afeba88aeceafe4a805579d5273529615" args="(const struct lu_env *env, struct osd_device *dev, const struct lu_fid *fid, uint64_t *oid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_fid_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>oid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00460">460</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00223">ACCT_USER_OID</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__fid_8h_source.html#l00283">fid_is_acct()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00453">fid_is_fs_root()</a>, <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00148">luz_direntry::lzd_reg</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00302">OBD_FAIL_SRV_ENOENT</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00282">osd_device::od_igrp_oid</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00281">osd_device::od_iusr_oid</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00250">osd_device::od_os</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00261">osd_device::od_root</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00424">osd_get_name_n_idx()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00588">osd_thread_info::oti_buf</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00191">osd_thread_info::oti_zde</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00139">zpl_direntry::zde_dnode</a>.</p>

<p>Referenced by <a class="el" href="osd__object_8c_source.html#l00403">osd_object_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ac980275b4639041bcc69b182ff98c7f9"></a><!-- doxytag: member="osd_oi.c::osd_find_or_add_seq" ref="ac980275b4639041bcc69b182ff98c7f9" args="(const struct lu_env *env, struct osd_device *osd, u64 seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structosd__seq.html">osd_seq</a>* osd_find_or_add_seq </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00287">287</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00457">fid_seq_is_idif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00342">fid_seq_is_mdt0()</a>, <a class="el" href="lustre__idl_8h_source.html#l00373">fid_seq_is_rsvd()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00048">LPX64i</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00262">osd_device::od_O_id</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00265">osd_device::od_seq_list</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00224">osd_oi::oi_zapid</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00229">osd_seq::os_compat_dirs</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00231">osd_seq::os_seq</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00232">osd_seq::os_seq_list</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00230">osd_seq::os_subdir_count</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00925">osd_name()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00191">osd_oi_find_or_create()</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00241">OSD_OST_MAP_SIZE</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00276">osd_seq_find()</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00238">osd_seq_list::osl_seq_init_sem</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00237">osd_seq_list::osl_seq_list</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00236">osd_seq_list::osl_seq_list_lock</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00588">osd_thread_info::oti_buf</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00180">osd_thread_info::oti_str</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00368">osd_get_idx_for_ost_obj()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f9dcf494255fd8bafc2a6b7f7235422"></a><!-- doxytag: member="osd_oi.c::osd_fld_lookup" ref="a3f9dcf494255fd8bafc2a6b7f7235422" args="(const struct lu_env *env, struct osd_device *osd, u64 seq, struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_fld_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lookup the target index/flags of the fid, so it will know where the object is located (tgt index) and it is MDT or OST object. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00210">210</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00312">fid_seq_in_fldb()</a>, <a class="el" href="lustre__idl_8h_source.html#l00457">fid_seq_is_idif()</a>, <a class="el" href="fld__handler_8c_source.html#l00205">fld_local_lookup()</a>, <a class="el" href="seq__range_8h_source.html#l00109">fld_range_set_any()</a>, <a class="el" href="seq__range_8h_source.html#l00091">fld_range_set_mdt()</a>, <a class="el" href="seq__range_8h_source.html#l00100">fld_range_set_ost()</a>, <a class="el" href="lustre__idl_8h_source.html#l00519">idif_ost_idx()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00920">osd_seq_site()</a>, <a class="el" href="lustre__fid_8h_source.html#l00454">seq_server_site::ss_node_id</a>, and <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>.</p>

</div>
</div>
<a class="anchor" id="af21e11569321f285eed2f93b874959d3"></a><!-- doxytag: member="osd_oi.c::osd_get_idx_for_fid" ref="af21e11569321f285eed2f93b874959d3" args="(struct osd_device *osd, const struct lu_fid *fid, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t osd_get_idx_for_fid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00412">412</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00246">osd_device::od_oi_count</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00244">osd_device::od_oi_table</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00224">osd_oi::oi_zapid</a>, and <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00400">osd_fid2str()</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00424">osd_get_name_n_idx()</a>.</p>

</div>
</div>
<a class="anchor" id="a823fb5ad62e0250f1a9c73471a49f28d"></a><!-- doxytag: member="osd_oi.c::osd_get_idx_for_ost_obj" ref="a823fb5ad62e0250f1a9c73471a49f28d" args="(const struct lu_env *env, struct osd_device *osd, const struct lu_fid *fid, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t osd_get_idx_for_ost_obj </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00368">368</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l00725">fid_is_last_id()</a>, <a class="el" href="lustre__idl_8h_source.html#l00706">fid_to_ostid()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00229">osd_seq::os_compat_dirs</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00287">osd_find_or_add_seq()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00925">osd_name()</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00241">OSD_OST_MAP_SIZE</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l00546">ostid_id()</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00424">osd_get_name_n_idx()</a>.</p>

</div>
</div>
<a class="anchor" id="a83babfb3fe46485890080afde5369491"></a><!-- doxytag: member="osd_oi.c::osd_get_name_n_idx" ref="a83babfb3fe46485890080afde5369491" args="(const struct lu_env *env, struct osd_device *osd, const struct lu_fid *fid, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t osd_get_name_n_idx </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00424">424</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00283">fid_is_acct()</a>, <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00548">fid_is_on_ost()</a>, <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00281">FID_SEQ_ECHO</a>, <a class="el" href="lustre__idl_8h_source.html#l00293">FID_SEQ_LOCAL_FILE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00261">osd_device::od_root</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00101">oid2name()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00412">osd_get_idx_for_fid()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00368">osd_get_idx_for_ost_obj()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="osd__object_8c_source.html#l01126">osd_declare_object_create()</a>, <a class="el" href="osd__object_8c_source.html#l00508">osd_declare_object_destroy()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00460">osd_fid_lookup()</a>, <a class="el" href="osd__object_8c_source.html#l01511">osd_object_create()</a>, and <a class="el" href="osd__object_8c_source.html#l00562">osd_object_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="abcceffddcfcedfd4c7749066c96db2db"></a><!-- doxytag: member="osd_oi.c::osd_oi_add_table" ref="abcceffddcfcedfd4c7749066c96db2db" args="(const struct lu_env *env, struct osd_device *o, char *name, int key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_add_table </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate and open a new entry in the specified unused slot. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00518">518</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd__object_8c_source.html#l00271">__osd_obj2dbuf()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00244">osd_device::od_oi_table</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00250">osd_device::od_os</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00261">osd_device::od_root</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00225">osd_oi::oi_db</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00224">osd_oi::oi_zapid</a>, and <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00604">osd_oi_lookup()</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00559">osd_oi_open_table()</a>.</p>

</div>
</div>
<a class="anchor" id="ad300af9f5f1fb2916beb69302522e328"></a><!-- doxytag: member="osd_oi.c::osd_oi_close_table" ref="ad300af9f5f1fb2916beb69302522e328" args="(const struct lu_env *env, struct osd_device *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_oi_close_table </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Depopulate the OI table. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00547">547</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00246">osd_device::od_oi_count</a>, and <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00499">osd_oi_remove_table()</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00731">osd_oi_fini()</a>, and <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00559">osd_oi_open_table()</a>.</p>

</div>
</div>
<a class="anchor" id="a76a1108b025e6057ed64f5d56ab21bf5"></a><!-- doxytag: member="osd_oi.c::osd_oi_create" ref="a76a1108b025e6057ed64f5d56ab21bf5" args="(const struct lu_env *env, struct osd_device *o, uint64_t parent, const char *name, uint64_t *child)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>child</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new OI with the given name. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00140">140</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd__object_8c_source.html#l01327">__osd_zap_create()</a>, <a class="el" href="linux-fs_8h_source.html#l00080">IFTODT</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00148">luz_direntry::lzd_reg</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00250">osd_device::od_os</a>, <a class="el" href="osd__object_8c_source.html#l00069">osd_obj_tag</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00187">osd_thread_info::oti_la</a>, and <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00191">osd_thread_info::oti_zde</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00191">osd_oi_find_or_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a776e25c4927c75e5bd0035e046523fa2"></a><!-- doxytag: member="osd_oi.c::osd_oi_find_or_create" ref="a776e25c4927c75e5bd0035e046523fa2" args="(const struct lu_env *env, struct osd_device *o, uint64_t parent, const char *name, uint64_t *child)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_find_or_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>child</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00191">191</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00224">osd_oi::oi_zapid</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00140">osd_oi_create()</a>, and <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00604">osd_oi_lookup()</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00287">osd_find_or_add_seq()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00688">osd_oi_init()</a>, and <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00653">osd_oi_init_compat()</a>.</p>

</div>
</div>
<a class="anchor" id="aab8dde305b0ec951ddcc5fdecca798fc"></a><!-- doxytag: member="osd_oi.c::osd_oi_fini" ref="aab8dde305b0ec951ddcc5fdecca798fc" args="(const struct lu_env *env, struct osd_device *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osd_oi_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00731">731</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00246">osd_device::od_oi_count</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00244">osd_device::od_oi_table</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00547">osd_oi_close_table()</a>, and <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00631">osd_ost_seq_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a8621b47401b3d5097bf883e6dcfa6e29"></a><!-- doxytag: member="osd_oi.c::osd_oi_init" ref="a8621b47401b3d5097bf883e6dcfa6e29" args="(const struct lu_env *env, struct osd_device *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_oi_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the OIs by either opening or creating them as needed. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00688">688</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00082">DMU_OSD_OI_NAME_BASE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00246">osd_device::od_oi_count</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00244">osd_device::od_oi_table</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00261">osd_device::od_root</a>, <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00065">osd_oi_count</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00191">osd_oi_find_or_create()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00653">osd_oi_init_compat()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00559">osd_oi_open_table()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00581">osd_oi_probe()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00588">osd_thread_info::oti_buf</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a8afb320a9f6f8b957ee7de8620606b38"></a><!-- doxytag: member="osd_oi.c::osd_oi_init_compat" ref="a8afb320a9f6f8b957ee7de8620606b38" args="(const struct lu_env *env, struct osd_device *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_init_compat </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create /O subdirectory to map legacy OST objects for compatibility. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00653">653</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00224">ACCT_GROUP_OID</a>, <a class="el" href="lustre__fid_8h_source.html#l00223">ACCT_USER_OID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00282">osd_device::od_igrp_oid</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00281">osd_device::od_iusr_oid</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00262">osd_device::od_O_id</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00261">osd_device::od_root</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00101">oid2name()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00191">osd_oi_find_or_create()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00622">osd_ost_seq_init()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00688">osd_oi_init()</a>.</p>

</div>
</div>
<a class="anchor" id="affc195624768d7e23311f6d530899f83"></a><!-- doxytag: member="osd_oi.c::osd_oi_lookup" ref="affc195624768d7e23311f6d530899f83" args="(const struct lu_env *env, struct osd_device *o, uint64_t parent, const char *name, struct osd_oi *oi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__oi.html">osd_oi</a> *&nbsp;</td>
          <td class="paramname"> <em>oi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lookup an existing OI by the given name. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00117">117</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00148">luz_direntry::lzd_reg</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00250">osd_device::od_os</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00223">osd_oi::oi_name</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00224">osd_oi::oi_zapid</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00191">osd_thread_info::oti_zde</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f42c7c19210abb79a7ca7f28a5e83a5"></a><!-- doxytag: member="osd_oi.c::osd_oi_open_table" ref="a9f42c7c19210abb79a7ca7f28a5e83a5" args="(const struct lu_env *env, struct osd_device *o, int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_open_table </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Populate the OI table based. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00559">559</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00082">DMU_OSD_OI_NAME_BASE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00518">osd_oi_add_table()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00547">osd_oi_close_table()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00688">osd_oi_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a7fc74cdad80188603a76fa583e4bcd0a"></a><!-- doxytag: member="osd_oi.c::osd_oi_probe" ref="a7fc74cdad80188603a76fa583e4bcd0a" args="(const struct lu_env *env, struct osd_device *o, int *count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_oi_probe </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine if the type and number of OIs used by this file system. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00581">581</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00082">DMU_OSD_OI_NAME_BASE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00261">osd_device::od_root</a>, <a class="el" href="osd__oi_8h_source.html#l00061">OSD_OI_FID_NR_MAX</a>, <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00604">osd_oi_lookup()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00688">osd_oi_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a1528765e2824d65bc790fa76bb907451"></a><!-- doxytag: member="osd_oi.c::osd_oi_remove_table" ref="a1528765e2824d65bc790fa76bb907451" args="(const struct lu_env *env, struct osd_device *o, int key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_oi_remove_table </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close an entry in a specific slot. </p>

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00499">499</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00244">osd_device::od_oi_table</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00225">osd_oi::oi_db</a>, and <a class="el" href="osd__object_8c_source.html#l00069">osd_obj_tag</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00547">osd_oi_close_table()</a>.</p>

</div>
</div>
<a class="anchor" id="abad5ffee749e0d43c909fe67c18d5c7e"></a><!-- doxytag: member="osd_oi.c::osd_options_init" ref="abad5ffee749e0d43c909fe67c18d5c7e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_options_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00748">748</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00065">osd_oi_count</a>, <a class="el" href="osd__oi_8h_source.html#l00060">OSD_OI_FID_NR</a>, <a class="el" href="osd__oi_8h_source.html#l00061">OSD_OI_FID_NR_MAX</a>, and <a class="el" href="lustre__sec_8h_source.html#l00941">size_roundup_power2()</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__handler_8c_source.html#l01372">osd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a587d8c00f186bb4595bf3557ad2136d5"></a><!-- doxytag: member="osd_oi.c::osd_ost_seq_fini" ref="a587d8c00f186bb4595bf3557ad2136d5" args="(const struct lu_env *env, struct osd_device *osd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_ost_seq_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00631">631</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00265">osd_device::od_seq_list</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00229">osd_seq::os_compat_dirs</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00232">osd_seq::os_seq_list</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00230">osd_seq::os_subdir_count</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00237">osd_seq_list::osl_seq_list</a>, and <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00236">osd_seq_list::osl_seq_list_lock</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00731">osd_oi_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b29cb532eb4196fab7a304e43e52a91"></a><!-- doxytag: member="osd_oi.c::osd_ost_seq_init" ref="a6b29cb532eb4196fab7a304e43e52a91" args="(const struct lu_env *env, struct osd_device *osd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_ost_seq_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00622">622</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00265">osd_device::od_seq_list</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00238">osd_seq_list::osl_seq_init_sem</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00237">osd_seq_list::osl_seq_list</a>, and <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00236">osd_seq_list::osl_seq_list_lock</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00653">osd_oi_init_compat()</a>.</p>

</div>
</div>
<a class="anchor" id="af4ac2a4656e075eacfd81be81db53692"></a><!-- doxytag: member="osd_oi.c::osd_seq_find" ref="af4ac2a4656e075eacfd81be81db53692" args="(struct osd_seq_list *seq_list, u64 seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structosd__seq.html">osd_seq</a>* osd_seq_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__seq__list.html">osd_seq_list</a> *&nbsp;</td>
          <td class="paramname"> <em>seq_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00276">276</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00264">osd_seq_find_locked()</a>, and <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00236">osd_seq_list::osl_seq_list_lock</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00287">osd_find_or_add_seq()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c819409fe629eb214594a19513bf281"></a><!-- doxytag: member="osd_oi.c::osd_seq_find_locked" ref="a2c819409fe629eb214594a19513bf281" args="(struct osd_seq_list *seq_list, u64 seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structosd__seq.html">osd_seq</a>* osd_seq_find_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__seq__list.html">osd_seq_list</a> *&nbsp;</td>
          <td class="paramname"> <em>seq_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>seq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00264">264</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00231">osd_seq::os_seq</a>, <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00232">osd_seq::os_seq_list</a>, and <a class="el" href="osd-zfs_2osd__internal_8h_source.html#l00237">osd_seq_list::osl_seq_list</a>.</p>

<p>Referenced by <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00276">osd_seq_find()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a6e6a93a9be2bf3a42b80a6696d6c8a58"></a><!-- doxytag: member="osd_oi.c::oids" ref="a6e6a93a9be2bf3a42b80a6696d6c8a58" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structnamed__oid.html">named_oid</a> <a class="el" href="osd-zfs_2osd__oi_8c.html#a6e6a93a9be2bf3a42b80a6696d6c8a58">oids</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5cad11d7cc2e0b2d0004e56887258d9a76c">LAST_RECV_OID</a>,                <a class="code" href="group__disk.html#gac8e3ba79706d505528860ea4e3654f24">LAST_RCVD</a> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5caf8f265bd7e0b7884e12ee4e2668bb0aa">OFD_LAST_GROUP_OID</a>,           <span class="stringliteral">&quot;LAST_GROUP&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca39b1badec1b260e63b99f4b9e94c41b2">LLOG_CATALOGS_OID</a>,            <span class="stringliteral">&quot;CATALOGS&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca5442975e32ef1c12be32c553f3e7548e">MGS_CONFIGS_OID</a>,              NULL  },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca25a1cd9adc06bb72067923a1a386c9ac">FID_SEQ_SRV_OID</a>,              <span class="stringliteral">&quot;seq_srv&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5cae9ee943c3f0debb8cf867c3f1119b399">FID_SEQ_CTL_OID</a>,              <span class="stringliteral">&quot;seq_ctl&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5caa91aedd6255632e34a699f9d89d968e2">FLD_INDEX_OID</a>,                <span class="stringliteral">&quot;fld&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca57f73ce0f4c733d473336615fcb218db">MDD_LOV_OBJ_OID</a>,              <a class="code" href="group__disk.html#ga397a4b62d1358af92a69dad318db8018">LOV_OBJID</a> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca04b834af5e5483c659fd346c30516989">OFD_HEALTH_CHECK_OID</a>,         <a class="code" href="group__disk.html#ga598efe25d234dea7c6a76e9c91ce5987">HEALTH_CHECK</a> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca208dc4d8613c0b97bd7dae961835dcf4">ACCT_USER_OID</a>,                <span class="stringliteral">&quot;acct_usr_inode&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca03fe05fa06da0b0388d073fd50f50290">ACCT_GROUP_OID</a>,               <span class="stringliteral">&quot;acct_grp_inode&quot;</span> },
        { <a class="code" href="group__fid.html#ggab368a3797009d732bb16d9807c1d9b5ca3b87f8877d3ccd3b84f9d2057e76412e">REPLY_DATA_OID</a>,               <a class="code" href="group__disk.html#gaa1bcad24553b76813dc5992cf3c4491f">REPLY_DATA</a> },
        { 0,                            NULL }
}
</pre></div>
<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00085">85</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1c588688b69c2e27cf28b3c0f6637a3d"></a><!-- doxytag: member="osd_oi.c::osd_oi_count" ref="a1c588688b69c2e27cf28b3c0f6637a3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="osd-zfs_2osd__oi_8c.html#a1c588688b69c2e27cf28b3c0f6637a3d">osd_oi_count</a> = OSD_OI_FID_NR</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00072">72</a> of file <a class="el" href="osd-zfs_2osd__oi_8c_source.html">osd_oi.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
