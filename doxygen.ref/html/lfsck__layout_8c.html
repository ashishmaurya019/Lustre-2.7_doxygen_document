<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lfsck/lfsck_layout.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lfsck/lfsck_layout.c File Reference</h1><code>#include &lt;linux/bitops.h&gt;</code><br/>
<code>#include &lt;linux/rbtree.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lu__object_8h_source.html">lu_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__user_8h_source.html">lustre/lustre_user.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="md__object_8h_source.html">md_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>&quot;</code><br/>

<p><a href="lfsck__layout_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__layout__slave__async__args.html">lfsck_layout_slave_async_args</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__orphan__it.html">lfsck_orphan_it</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LFSCK</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a20d2a01c9037f583271f6885283f2aac">LFSCK_LAYOUT_MAGIC_V1</a>&nbsp;&nbsp;&nbsp;0xB173AE14</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a227c0f680633472283ccf078ba30139a">LFSCK_LAYOUT_MAGIC_V2</a>&nbsp;&nbsp;&nbsp;0xB1734D76</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a7b73e3bedb01f1f7bab98c5a796de973">LFSCK_LAYOUT_MAGIC</a>&nbsp;&nbsp;&nbsp;LFSCK_LAYOUT_MAGIC_V2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a95c33d1b641d106ec28ba4d3959c7975">LFSCK_RBTREE_BITMAP_SIZE</a>&nbsp;&nbsp;&nbsp;PAGE_CACHE_SIZE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a0900cc430564f61458216d366550f4eb">LFSCK_RBTREE_BITMAP_WIDTH</a>&nbsp;&nbsp;&nbsp;(LFSCK_RBTREE_BITMAP_SIZE &lt;&lt; 3)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a679fc175b02983d41e39378b15ce085f">LFSCK_RBTREE_BITMAP_MASK</a>&nbsp;&nbsp;&nbsp;(LFSCK_RBTREE_BITMAP_WIDTH - 1)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a3443bf4169bdf1d9ff5bed3e8b1d7b9c">lfsck_layout_llst_put</a> (struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *llst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a728c602d204c0ae7854334c8cf6cfe16">lfsck_layout_llst_add</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, __u32 index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae4fae01e962ac8c8c9328b1195487f54">lfsck_layout_llst_del</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *llst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <br class="typebreak"/>
<a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a59e22baa68e7de19f56d1f226f38f58b">lfsck_layout_llst_find_and_del</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, __u32 index, bool unlink)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a58e8e8272a6ced19220fe5e36e471e50">lfsck_layout_assistant_req_init</a> (struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso, struct <a class="el" href="structdt__object.html">dt_object</a> *child, __u32 ost_idx, __u32 lov_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a036c5362c3567fc59968be54cb2b71be">lfsck_layout_assistant_req_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__assistant__req.html">lfsck_assistant_req</a> *lar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae5c6b8d67389d6c93fb2a2a7fc503779">lfsck_layout_assistant_sync_failures_interpret</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, void *args, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#af2fb113b28f9280c00870dfb0dea16dd">lfsck_layout_assistant_sync_failures</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notify remote LFSCK instances about former failures.  <a href="#af2fb113b28f9280c00870dfb0dea16dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae1340959791b55691439c76e540d3123">lfsck_layout_get_lovea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a182398b9541ee8df2a3118d55cad25b9">lfsck_layout_verify_header</a> (struct <a class="el" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> *lmm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a372825f6aba0580559c14294a9e221ad">lfsck_rbtree_cmp</a> (struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *lrn, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq, __u32 oid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a780efe067d0f0f6846397069be992f81">lfsck_rbtree_search</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, bool *exact)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#afe07f3ce85da36a2213a59584f3f481f">lfsck_rbtree_new</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a0fe541c725beebfa54e370b425b4f8b1">lfsck_rbtree_free</a> (struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *lrn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae480f8ca83cc06cc79bfdef9ed33a280">lfsck_rbtree_insert</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *lrn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a15e3c5f398e15ddd9619981854b0751c">lfsck_rbtree_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aca7d039d24742913e4cbc4354066b0fc">lfsck_rbtree_cleanup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#acfcf0d3987e3f94b82c1962458bd0f51">lfsck_rbtree_update_bitmap</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, bool accessed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a417e0de5dc3ebabe3dafff5484e30bad">lfsck_layout_le_to_cpu</a> (struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *des, const struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a2b8fb5be89c3ff1ce83579785f1bd108">lfsck_layout_cpu_to_le</a> (struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *des, const struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aea0f4f894acef61a1e87f23ad2f4e0e2">lfsck_layout_load_bitmap</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load the OST bitmap from the <a class="el" href="structlfsck__layout.html">lfsck_layout</a> trace file.  <a href="#aea0f4f894acef61a1e87f23ad2f4e0e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a9979ccb84ceb671f8ac0bd466e536ac9">lfsck_layout_load</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load the layout LFSCK trace file from disk.  <a href="#a9979ccb84ceb671f8ac0bd466e536ac9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae072b7db3878fc35702fc44385b73456">lfsck_layout_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store the layout LFSCK trace file on disk.  <a href="#ae072b7db3878fc35702fc44385b73456"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a32152259ea50351b1974ff5b1aa1fe08">lfsck_layout_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a2696d90dfb5e67723719a89da2dee4f4">fid_is_for_ostobj</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a4a27d0a885b571dc0cc58fdc60a29e22">lfsck_layout_seq_lookup</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> seq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ad6415a1912ce97ddf247aaa499363c68">lfsck_layout_seq_insert</a> (struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *llsd, struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *lls)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a4c6f0e432da9c17ab7e0c9a716250f77">lfsck_layout_lastid_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a38be935e9a8cf2c24a068e7cb23068fa">lfsck_layout_lastid_reload</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *lls)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a76dd053f5dd848d79efded2138efb89f">lfsck_layout_lastid_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a0e53eca0785ffb98d150d287c91a4ff7">lfsck_layout_lastid_load</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *lls)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a3ed34421cd5eadb1466fe0030abad218">lfsck_layout_record_failure</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *lo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae7793cc67e98f99e921c23a714945b6b">lfsck_layout_double_scan_result</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ac2d84ba35aae3cff3b5b640dc65b2d8a">lfsck_layout_trans_stop</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, struct <a class="el" href="structthandle.html">thandle</a> *handle, int result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a915dfe1bb095c731115ebb4c119751a1">lfsck_layout_get_def_stripesize</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, __u32 *<a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the system default stripe size.  <a href="#a915dfe1bb095c731115ebb4c119751a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a7f39858675c9c66aa0d7647af1207e99">lfsck_layout_refill_lovea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *handle, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, struct <a class="el" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *slot, int fl, __u32 ost_idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#af7c13f5b6de5753584521f9b80ada763">lfsck_layout_extend_lovea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structthandle.html">thandle</a> *handle, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, int fl, __u32 ost_idx, __u32 ea_off, bool reset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae9ea88087ab88839016ad6b23865ea37">__lfsck_layout_update_pfid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *child, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid, __u32 offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#af7134cabf5d455b53a960419b1c8c049">lfsck_layout_update_pfid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, struct <a class="el" href="structdt__device.html">dt_device</a> *cdev, __u32 ea_off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a35a20296cb4b7c7e0095b01f2ed15ece">lfsck_layout_recreate_parent</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *ltd, struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *rec, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, const char *infix, const char *type, __u32 ea_off)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function will create the MDT-object with the given (partial) LOV EA.  <a href="#a35a20296cb4b7c7e0095b01f2ed15ece"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a2d614a6dabbb448604abeaab37e4ea2d">lfsck_layout_master_conditional_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, __u32 index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a2afe3a2eba62d3f886686bca07bc7b3a">lfsck_layout_slave_conditional_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a11edbdc572a2c1e001ccc2280fd06db0">lfsck_layout_conflict_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *ltd, struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *rec, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, struct <a class="el" href="structlu__buf.html">lu_buf</a> *ea_buf, struct <a class="el" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *slot, __u32 ea_off)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Some OST-object has occupied the specified layout EA slot.  <a href="#a11edbdc572a2c1e001ccc2280fd06db0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a8d6ad3d4970d26ac0bbdb4468979a3e8">lfsck_layout_recreate_lovea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *ltd, struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *rec, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, __u32 ost_idx, __u32 ea_off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a03d02a7f41f0955e2f2a7ae13ed1c805">lfsck_layout_scan_orphan_one</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *ltd, struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *rec, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a97e837c49720f8b088c076de70da3bff">lfsck_layout_scan_orphan</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *ltd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a22934167b98d9cdd57b87843adbf57cb">lfsck_layout_repair_dangling</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *<a class="el" href="llog__test_8c.html#ada4aa73dd383f92aba525e3c5b3e1e4b">llr</a>, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a2322bdb1473bac735935d675c45de6e9">lfsck_layout_repair_unmatched_pair</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *<a class="el" href="llog__test_8c.html#ada4aa73dd383f92aba525e3c5b3e1e4b">llr</a>, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a91d3192972f71d3182da883a9529e865">lfsck_layout_repair_multiple_references</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *<a class="el" href="llog__test_8c.html#ada4aa73dd383f92aba525e3c5b3e1e4b">llr</a>, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la, struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aa151c19a69ab814573130d5e11f7980d">lfsck_layout_repair_owner</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *<a class="el" href="llog__test_8c.html#ada4aa73dd383f92aba525e3c5b3e1e4b">llr</a>, struct <a class="el" href="structlu__attr.html">lu_attr</a> *pla, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cla)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a9db118336f8f84903a25b38abd73ec49">lfsck_layout_check_parent</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cla, struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *<a class="el" href="llog__test_8c.html#ada4aa73dd383f92aba525e3c5b3e1e4b">llr</a>, struct <a class="el" href="structlu__buf.html">lu_buf</a> *lov_ea, __u32 idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae8afff3610eaa399023a91c8c19cea5b">lfsck_layout_assistant_handler_p1</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__assistant__req.html">lfsck_assistant_req</a> *lar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a50fd2b033952164990a3ae6ee81b8947">lfsck_layout_assistant_handler_p2</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#af5614aab7247fbc31d0dcf53d2500fce">lfsck_layout_slave_async_interpret</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, void *args, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ace07bc5a0fa26018f8495ac00be9061b">lfsck_layout_async_query</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *llst, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a70db1eb72b54a28391f75ea03a488bc9">lfsck_layout_async_notify</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a31c2e5b75f1513045bf59543712007e3">lfsck_layout_slave_query_master</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aa1e554d6f0bf397267fee18d3c00506e">lfsck_layout_slave_notify_master</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, enum <a class="el" href="group__lustreidl.html#gab54acd8a5bcce94c5c2fa2a4c66ff110">lfsck_events</a> event, int result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#acfe149b00945b05b638b3ebedcc45771">lfsck_layout_master_check_pairs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a46d0ce7ab64dd4814f04265fd5c42c87">lfsck_layout_slave_check_pairs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlu__fid.html">lu_fid</a> *cfid, struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a056c41c8b54421b9ca081df0e88fa6a7">lfsck_layout_slave_repair_pfid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a2e24e82c795db5aaa661bc7b5141c1ae">lfsck_layout_slave_quit</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aa9a1cefa7a1f7b61e772a29684fe1542">lfsck_layout_reset</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, bool init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a7939b57b74b7d462498b4caaed38c4bb">lfsck_layout_fail</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, bool new_checked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a309273cc9597b6e19cec6a98f6ff5e7d">lfsck_layout_master_checkpoint</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, bool init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#abe8aba8e163d3f53f3539b0ab68cafa1">lfsck_layout_slave_checkpoint</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, bool init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a664057c3ba51bfc9d6015253c57cbddd">lfsck_layout_prep</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__start.html">lfsck_start</a> *<a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a9fd6486bdf7cea023b53c1f65fb2d685">lfsck_layout_slave_prep</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *lsp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a40e5175988171f489829171a4a1ea7a8">lfsck_layout_master_prep</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *lsp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ae6659eed7f0dce7c8f0c19225108fc4e">lfsck_layout_scan_stripes</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> *lmm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a7c4c57e3d6572a43fbf275c1d36c856c">lfsck_layout_master_exec_oit</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a352c16e58928c492775f3258b50fc202">lfsck_layout_slave_exec_oit</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a50d4e4a115c6670f94a1859b271e9cfa">lfsck_layout_exec_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso, struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *ent, __u16 type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ac55883e73d8affc779b6679789ce69a6">lfsck_layout_master_post</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, int result, bool init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aae7ae2692b3da059996a7f7f5a785050">lfsck_layout_slave_post</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, int result, bool init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#affd318a0cad258fae6eb91f6bda3bd27">lfsck_layout_dump</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct seq_file *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#adecbba0dd24addb1000f939bc0ebe768">lfsck_layout_master_double_scan</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a9d115d7049ea42ae13c61834185a4870">lfsck_layout_slave_double_scan</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a431ef8b29e16a50d8fd380811332ab3f">lfsck_layout_master_data_release</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a8fd2a1bd3ebbffb3368bb8ae78b831a3">lfsck_layout_slave_data_release</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ad47054f1a5257990cf09f5b79cd6fe98">lfsck_layout_master_quit</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a4eb94598fc81c48a762231274ff19f3b">lfsck_layout_master_in_notify</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a5f39fe5c102960ab0cb063752080b7fa">lfsck_layout_slave_in_notify</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a4faff84406271848f87feb79bf3d7af7">lfsck_layout_repaired</a> (struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *lo, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a8542139594673cf63eae8074bf4954d1">lfsck_layout_query_all</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, __u32 *mdts_count, __u32 *osts_count, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *repaired)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a16bc6d6b9f5016c98be95bf46da930af">lfsck_layout_query</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *req, struct <a class="el" href="structlfsck__reply.html">lfsck_reply</a> *rep, struct <a class="el" href="structlfsck__query.html">lfsck_query</a> *que, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aa69e9d86e853b66ff953ecde830aca49">lfsck_layout_slave_join</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *lsp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a44284449155ffcf229a5a28fec268c80">lfsck_layout_assistant_fill_pos</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a45153a26a55e704921bcc3292e79df9f">lfsck_layout_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a11e6550334dd42b93ed46d19817cac65">lfsck_fid_match_idx</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a6dec409fc7ee36c76edc5598cd953084">lfsck_layout_destroy_orphan</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ab5f7c1df7ec208b2ca4a832b8fdd1c01">lfsck_orphan_index_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a56b054fa14c81bdebdd951766a52b17c">lfsck_orphan_index_declare_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a59c42b48ad47af8ad070f5893bd8b17e">lfsck_orphan_index_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *handle, int ignore_quota)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a48bc31fcc6d5973954b343418a1619ad">lfsck_orphan_index_declare_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a4abdc808af3965e15bedca718153661e">lfsck_orphan_index_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct dt_it *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aaff0f182f17e08acb74c1793e58ff220">lfsck_orphan_it_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, __u32 attr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aa206a4535a5002da223189a9635adaf5">lfsck_orphan_it_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ab91f9ae952b790f4d482715cdfa3f01c">lfsck_orphan_it_next</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a6bedff79145d724a405ad251d8348274">lfsck_orphan_it_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a0799b7315148eeaac68f93e5ab4a7659">lfsck_orphan_it_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#af0384319c601f0e4fdced43b51c6b36a">lfsck_orphan_it_key</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a59a5802103cc8cb90f0d3239942b32dd">lfsck_orphan_it_key_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#abcecf4f9860004aae51fc038c5d57463">lfsck_orphan_it_rec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, struct dt_rec *rec, __u32 attr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a5259362a183ed0e7f6f669880a49f553">lfsck_orphan_it_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aa6dd4d4cba4f824777063e21186ecf79">lfsck_orphan_it_load</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hash)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aadc35db25cb0fc81ea0b987124db37a3">lfsck_orphan_it_key_rec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, void *key_rec)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__index__operations.html">dt_index_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#aae47cab3c4516f426a25e521fefe27b4">lfsck_orphan_index_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__operations.html">lfsck_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a37c9560e65f9b344789d588455c6e6fe">lfsck_layout_master_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__operations.html">lfsck_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#ad0b12a7f3fe5e313811409457f41a8cd">lfsck_layout_slave_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlfsck__assistant__operations.html">lfsck_assistant_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__layout_8c.html#a967a81b21483b8c077fbc8e040106239">lfsck_layout_assistant_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="lfsck_layout.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LFSCK</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00034">34</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7b73e3bedb01f1f7bab98c5a796de973"></a><!-- doxytag: member="lfsck_layout.c::LFSCK_LAYOUT_MAGIC" ref="a7b73e3bedb01f1f7bab98c5a796de973" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_LAYOUT_MAGIC&nbsp;&nbsp;&nbsp;LFSCK_LAYOUT_MAGIC_V2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00054">54</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00957">lfsck_layout_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00835">lfsck_layout_load()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>.</p>

</div>
</div>
<a class="anchor" id="a20d2a01c9037f583271f6885283f2aac"></a><!-- doxytag: member="lfsck_layout.c::LFSCK_LAYOUT_MAGIC_V1" ref="a20d2a01c9037f583271f6885283f2aac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_LAYOUT_MAGIC_V1&nbsp;&nbsp;&nbsp;0xB173AE14</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00051">51</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a227c0f680633472283ccf078ba30139a"></a><!-- doxytag: member="lfsck_layout.c::LFSCK_LAYOUT_MAGIC_V2" ref="a227c0f680633472283ccf078ba30139a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_LAYOUT_MAGIC_V2&nbsp;&nbsp;&nbsp;0xB1734D76</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00052">52</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a679fc175b02983d41e39378b15ce085f"></a><!-- doxytag: member="lfsck_layout.c::LFSCK_RBTREE_BITMAP_MASK" ref="a679fc175b02983d41e39378b15ce085f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_RBTREE_BITMAP_MASK&nbsp;&nbsp;&nbsp;(LFSCK_RBTREE_BITMAP_WIDTH - 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00402">402</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00481">lfsck_rbtree_new()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a95c33d1b641d106ec28ba4d3959c7975"></a><!-- doxytag: member="lfsck_layout.c::LFSCK_RBTREE_BITMAP_SIZE" ref="a95c33d1b641d106ec28ba4d3959c7975" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_RBTREE_BITMAP_SIZE&nbsp;&nbsp;&nbsp;PAGE_CACHE_SIZE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00400">400</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00514">lfsck_rbtree_free()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00481">lfsck_rbtree_new()</a>.</p>

</div>
</div>
<a class="anchor" id="a0900cc430564f61458216d366550f4eb"></a><!-- doxytag: member="lfsck_layout.c::LFSCK_RBTREE_BITMAP_WIDTH" ref="a0900cc430564f61458216d366550f4eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_RBTREE_BITMAP_WIDTH&nbsp;&nbsp;&nbsp;(LFSCK_RBTREE_BITMAP_SIZE &lt;&lt; 3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00401">401</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00414">lfsck_rbtree_cmp()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae9ea88087ab88839016ad6b23865ea37"></a><!-- doxytag: member="lfsck_layout.c::__lfsck_layout_update_pfid" ref="ae9ea88087ab88839016ad6b23865ea37" args="(const struct lu_env *env, struct dt_object *child, const struct lu_fid *pfid, __u32 offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __lfsck_layout_update_pfid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01576">1576</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00167">filter_fid::ff_parent</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00888">lfsck_thread_info::lti_new_pfid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03856">lfsck_layout_slave_repair_pfid()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l01621">lfsck_layout_update_pfid()</a>.</p>

</div>
</div>
<a class="anchor" id="a2696d90dfb5e67723719a89da2dee4f4"></a><!-- doxytag: member="lfsck_layout.c::fid_is_for_ostobj" ref="a2696d90dfb5e67723719a89da2dee4f4" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int fid_is_for_ostobj </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00973">973</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="seq__range_8h_source.html#l00052">fld_range_is_ost()</a>, <a class="el" href="seq__range_8h_source.html#l00109">fld_range_set_any()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lustre__user_8h_source.html#l00192">lustre_mdt_attrs::lma_compat</a>, <a class="el" href="lustre__idl_8h_source.html#l00184">LMAC_FID_ON_OST</a>, <a class="el" href="lfsck__internal_8h_source.html#l00869">lfsck_thread_info::lti_lma</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="md__attrs_8c_source.html#l00064">lustre_lma_swab()</a>, <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>, <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>, and <a class="el" href="lustre__idl_8h_source.html#l01595">XATTR_NAME_LMA</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="a11e6550334dd42b93ed46d19817cac65"></a><!-- doxytag: member="lfsck_layout.c::lfsck_fid_match_idx" ref="a11e6550334dd42b93ed46d19817cac65" args="(const struct lu_env *env, struct lfsck_instance *lfsck, const struct lu_fid *fid, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_fid_match_idx </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05696">5696</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00477">fid_is_norm()</a>, <a class="el" href="seq__range_8h_source.html#l00061">fld_range_is_mdt()</a>, <a class="el" href="seq__range_8h_source.html#l00109">fld_range_set_any()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>.</p>

</div>
</div>
<a class="anchor" id="a44284449155ffcf229a5a28fec268c80"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_fill_pos" ref="a44284449155ffcf229a5a28fec268c80" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_position *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_assistant_fill_pos </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05531">5531</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00756">lfsck_assistant_req::lar_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00757">lfsck_assistant_req::lar_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="llog__test_8c_source.html#l00946">llr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00773">lfsck_layout_req::llr_lar</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00365">lfsck_assistant_object::lso_oit_cookie</a>, and <a class="el" href="list_8h_source.html#l00043">list_head::next</a>.</p>

</div>
</div>
<a class="anchor" id="ae8afff3610eaa399023a91c8c19cea5b"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_handler_p1" ref="ae8afff3610eaa399023a91c8c19cea5b" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_assistant_req *lar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_assistant_handler_p1 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__req.html">lfsck_assistant_req</a> *&nbsp;</td>
          <td class="paramname"> <em>lar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03225">3225</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__fail_8h_source.html#l00139">CFS_FAIL_TIMEOUT</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__user_8h_source.html#l00172">filter_fid_old::ff_parent</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00757">lfsck_assistant_req::lar_parent</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__lib_8c_source.html#l01982">lfsck_assistant_object_load()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01312">lfsck_layout_record_failure()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00349">lfsck_layout::ll_objs_skipped</a>, <a class="el" href="lfsck__internal_8h_source.html#l00329">lfsck_layout::ll_pos_first_inconsistent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00284">LLIT_DANGLING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00288">LLIT_INCONSISTENT_OWNER</a>, <a class="el" href="lfsck__internal_8h_source.html#l00290">LLIT_MAX</a>, <a class="el" href="lfsck__internal_8h_source.html#l00286">LLIT_MULTIPLE_REFERENCED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00283">LLIT_NONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00285">LLIT_UNMATCHED_PAIR</a>, <a class="el" href="llog__test_8c_source.html#l00946">llr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00773">lfsck_layout_req::llr_lar</a>, <a class="el" href="lfsck__internal_8h_source.html#l00775">lfsck_layout_req::llr_ost_idx</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00366">lfsck_assistant_object::lso_attr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00368">lfsck_assistant_object::lso_dead</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00865">lfsck_thread_info::lti_la</a>, <a class="el" href="lfsck__internal_8h_source.html#l00887">lfsck_thread_info::lti_old_pfid</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="obd__support_8h_source.html#l00565">OBD_FAIL_LFSCK_ASSISTANT_DIRECT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a2966e2ef5ccc21df92b6a31b7c4a56f5">dt_index_operations::dt_it_ops::store</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>.</p>

</div>
</div>
<a class="anchor" id="a50fd2b033952164990a3ae6ee81b8947"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_handler_p2" ref="a50fd2b033952164990a3ae6ee81b8947" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_assistant_handler_p2 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03390">3390</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00145">LPF_ALL_TGT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a036c5362c3567fc59968be54cb2b71be"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_req_fini" ref="a036c5362c3567fc59968be54cb2b71be" args="(const struct lu_env *env, struct lfsck_assistant_req *lar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_assistant_req_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__req.html">lfsck_assistant_req</a> *&nbsp;</td>
          <td class="paramname"> <em>lar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00202">202</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00757">lfsck_assistant_req::lar_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l01487">lfsck_assistant_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="llog__test_8c_source.html#l00946">llr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00773">lfsck_layout_req::llr_lar</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>.</p>

</div>
</div>
<a class="anchor" id="a58e8e8272a6ced19220fe5e36e471e50"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_req_init" ref="a58e8e8272a6ced19220fe5e36e471e50" args="(struct lfsck_assistant_object *lso, struct dt_object *child, __u32 ost_idx, __u32 lov_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a>* lfsck_layout_assistant_req_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ost_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>lov_idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00183">183</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lfsck__internal_8h_source.html#l00756">lfsck_assistant_req::lar_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00757">lfsck_assistant_req::lar_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l01479">lfsck_assistant_object_get()</a>, <a class="el" href="llog__test_8c_source.html#l00946">llr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00773">lfsck_layout_req::llr_lar</a>, <a class="el" href="lfsck__internal_8h_source.html#l00776">lfsck_layout_req::llr_lov_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00775">lfsck_layout_req::llr_ost_idx</a>, and <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>.</p>

</div>
</div>
<a class="anchor" id="af2fb113b28f9280c00870dfb0dea16dd"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_sync_failures" ref="af2fb113b28f9280c00870dfb0dea16dd" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *lr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_assistant_sync_failures </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify remote LFSCK instances about former failures. </p>
<p>The local LFSCK instance has recorded which OSTs have ever failed to respond some LFSCK verification requests (maybe because of <a class="el" href="structnetwork.html">network</a> issues or the OST itself trouble). During the respond gap, the OST may missed some OST-objects verification, then the OST cannot know whether related OST-objects have been referenced by related MDT-objects or not, then in the second-stage scanning, these OST-objects will be regarded as orphan, if the OST-object contains bad parent FID for back reference, then it will misguide the LFSCK to make wrong fixing for the fake orphan.</p>
<p>To avoid above trouble, when layout LFSCK finishes the first-stage scanning, it will scan the bitmap for the ever failed OSTs, and notify them that they have ever missed some OST-object verification and should skip the handling for orphan OST-objects on all MDTs that are in the layout LFSCK.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lr</em>&nbsp;</td><td>pointer to the lfsck request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00250">250</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_incomplete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00743">lfsck_async_interpret_args::laia_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00741">lfsck_async_interpret_args::laia_ltd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__lib_8c_source.html#l02369">lfsck_async_request()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00214">lfsck_layout_assistant_sync_failures_interpret()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lustre__idl_8h_source.html#l02726">LFSCK_NOTIFY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03443">lfsck_request::lr_flags2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00450">lfsck_tgt_desc::ltd_exp</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00484">lfsck_tgt_descs::ltd_rw_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00880">lfsck_thread_info::lti_laia2</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>.</p>

</div>
</div>
<a class="anchor" id="ae5c6b8d67389d6c93fb2a2a7fc503779"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_sync_failures_interpret" ref="ae5c6b8d67389d6c93fb2a2a7fc503779" args="(const struct lu_env *env, struct ptlrpc_request *req, void *args, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_assistant_sync_failures_interpret </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00214">214</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00743">lfsck_async_interpret_args::laia_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00741">lfsck_async_interpret_args::laia_ltd</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00463">lfsck_tgt_desc::ltd_synced_failures</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00250">lfsck_layout_assistant_sync_failures()</a>.</p>

</div>
</div>
<a class="anchor" id="a70db1eb72b54a28391f75ea03a488bc9"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_async_notify" ref="a70db1eb72b54a28391f75ea03a488bc9" args="(const struct lu_env *env, struct obd_export *exp, struct lfsck_request *lr, struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_async_notify </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03525">3525</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02726">LFSCK_NOTIFY</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="client_8c_source.html#l01050">ptlrpc_set_add_req()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01209">RMF_LFSCK_REQUEST</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_allow_intr</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01680">RQF_LFSCK_NOTIFY</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>.</p>

</div>
</div>
<a class="anchor" id="ace07bc5a0fa26018f8495ac00be9061b"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_async_query" ref="ace07bc5a0fa26018f8495ac00be9061b" args="(const struct lu_env *env, struct lfsck_component *com, struct obd_export *exp, struct lfsck_layout_slave_target *llst, struct lfsck_request *lr, struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_async_query </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *&nbsp;</td>
          <td class="paramname"> <em>llst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03487">3487</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01345">lfsck_component_get()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03436">lfsck_layout_slave_async_interpret()</a>, <a class="el" href="lustre__idl_8h_source.html#l02727">LFSCK_QUERY</a>, <a class="el" href="lfsck__layout_8c_source.html#l00095">lfsck_layout_slave_async_args::llsaa_com</a>, <a class="el" href="lfsck__layout_8c_source.html#l00094">lfsck_layout_slave_async_args::llsaa_exp</a>, <a class="el" href="lfsck__layout_8c_source.html#l00096">lfsck_layout_slave_async_args::llsaa_llst</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="lustre__net_8h_source.html#l00505">ptlrpc_req_async_args</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="client_8c_source.html#l01050">ptlrpc_set_add_req()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01209">RMF_LFSCK_REQUEST</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_allow_intr</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01684">RQF_LFSCK_QUERY</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>.</p>

</div>
</div>
<a class="anchor" id="a9db118336f8f84903a25b38abd73ec49"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_check_parent" ref="a9db118336f8f84903a25b38abd73ec49" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_assistant_object *lso, const struct lu_fid *pfid, const struct lu_fid *cfid, const struct lu_attr *cla, struct lfsck_layout_req *llr, struct lu_buf *lov_ea, __u32 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_check_parent </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cla</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *&nbsp;</td>
          <td class="paramname"> <em>llr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>lov_ea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03085">3085</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00323">lfsck_layout_get_lovea()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lfsck__internal_8h_source.html#l00286">LLIT_MULTIPLE_REFERENCED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00285">LLIT_UNMATCHED_PAIR</a>, <a class="el" href="lfsck__internal_8h_source.html#l00776">lfsck_layout_req::llr_lov_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l03644">lovea_slot_is_dummy()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00364">lfsck_assistant_object::lso_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00861">lfsck_thread_info::lti_big_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00863">lfsck_thread_info::lti_fid2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01604">XATTR_NAME_DUMMY</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="a11edbdc572a2c1e001ccc2280fd06db0"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_conflict_create" ref="a11edbdc572a2c1e001ccc2280fd06db0" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_tgt_desc *ltd, struct lu_orphan_rec *rec, struct dt_object *parent, struct lu_fid *cfid, struct lu_buf *ea_buf, struct lov_ost_data_v1 *slot, __u32 ea_off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_conflict_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>ea_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ea_off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Some OST-object has occupied the specified layout EA slot. </p>
<p>Such OST-object may be generated by the LFSCK when repair dangling referenced MDT-object, which can be indicated by attr::la_ctime == 0 but without S_ISUID in la_mode. If it is true and such OST-object has not been modified yet, we will replace it with the orphan OST-object; otherwise the LFSCK will create new MDT-object to reference the orphan.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>did nothing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02071">2071</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01900">lfsck_layout_master_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01441">lfsck_layout_refill_lovea()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l00847">lu_orphan_rec::lor_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00863">lfsck_thread_info::lti_fid2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lfsck__internal_8h_source.html#l00876">lfsck_thread_info::lti_tmpbuf</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>.</p>

</div>
</div>
<a class="anchor" id="a2b8fb5be89c3ff1ce83579785f1bd108"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_cpu_to_le" ref="a2b8fb5be89c3ff1ce83579785f1bd108" args="(struct lfsck_layout *des, const struct lfsck_layout *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_cpu_to_le </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>des</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00721">721</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="lfsck__internal_8h_source.html#l00352">lfsck_layout::ll_bitmap_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00295">lfsck_layout::ll_magic</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00338">lfsck_layout::ll_objs_checked_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00335">lfsck_layout::ll_objs_failed_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00341">lfsck_layout::ll_objs_failed_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00349">lfsck_layout::ll_objs_skipped</a>, <a class="el" href="lfsck__internal_8h_source.html#l00329">lfsck_layout::ll_pos_first_inconsistent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00322">lfsck_layout::ll_pos_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00310">lfsck_layout::ll_run_time_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00304">lfsck_layout::ll_success_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00313">lfsck_layout::ll_time_last_complete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00316">lfsck_layout::ll_time_latest_start</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00290">LLIT_MAX</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>.</p>

</div>
</div>
<a class="anchor" id="a6dec409fc7ee36c76edc5598cd953084"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_destroy_orphan" ref="a6dec409fc7ee36c76edc5598cd953084" args="(const struct lu_env *env, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_destroy_orphan </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05734">5734</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02137">dt_declare_destroy()</a>, <a class="el" href="dt__object_8h_source.html#l02292">dt_declare_ref_del()</a>, <a class="el" href="dt__object_8h_source.html#l02151">dt_destroy()</a>, <a class="el" href="dt__object_8h_source.html#l02305">dt_ref_del()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7793cc67e98f99e921c23a714945b6b"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_double_scan_result" ref="ae7793cc67e98f99e921c23a714945b6b" args="(const struct lu_env *env, struct lfsck_component *com, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_double_scan_result </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01332">1332</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00050">HALF_SEC</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_incomplete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00548">lfsck_component::lc_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00058">LF_INCONSISTENT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00055">LF_SCANNED_ONCE</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00725">lfsck_instance::li_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00338">lfsck_layout::ll_objs_checked_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00310">lfsck_layout::ll_run_time_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00304">lfsck_layout::ll_success_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00313">lfsck_layout::ll_time_last_complete</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00080">LS_COMPLETED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00097">LS_PARTIAL</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>.</p>

</div>
</div>
<a class="anchor" id="affd318a0cad258fae6eb91f6bda3bd27"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_dump" ref="affd318a0cad258fae6eb91f6bda3bd27" args="(const struct lu_env *env, struct lfsck_component *com, struct seq_file *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_dump </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04750">4750</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00050">HALF_SEC</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00087">lfsck_bookmark::lb_version</a>, <a class="el" href="lfsck__internal_8h_source.html#l00545">lfsck_component::lc_fid_latest_scanned_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00548">lfsck_component::lc_time_last_checkpoint</a>, <a class="el" href="lfsck__lib_8c_source.html#l01741">lfsck_bits_dump()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00071">lfsck_flags_names</a>, <a class="el" href="lfsck__lib_8c_source.html#l00080">lfsck_param_names</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00111">lfsck_status2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01767">lfsck_time_dump()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_current_oit_processed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00295">lfsck_layout::ll_magic</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00338">lfsck_layout::ll_objs_checked_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00335">lfsck_layout::ll_objs_failed_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00341">lfsck_layout::ll_objs_failed_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00349">lfsck_layout::ll_objs_skipped</a>, <a class="el" href="lfsck__internal_8h_source.html#l00329">lfsck_layout::ll_pos_first_inconsistent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00322">lfsck_layout::ll_pos_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00310">lfsck_layout::ll_run_time_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00304">lfsck_layout::ll_success_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00313">lfsck_layout::ll_time_last_complete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00316">lfsck_layout::ll_time_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00284">LLIT_DANGLING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00288">LLIT_INCONSISTENT_OWNER</a>, <a class="el" href="lfsck__internal_8h_source.html#l00286">LLIT_MULTIPLE_REFERENCED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00287">LLIT_ORPHAN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00289">LLIT_OTHERS</a>, <a class="el" href="lfsck__internal_8h_source.html#l00285">LLIT_UNMATCHED_PAIR</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a2966e2ef5ccc21df92b6a31b7c4a56f5">dt_index_operations::dt_it_ops::store</a>.</p>

</div>
</div>
<a class="anchor" id="a50d4e4a115c6670f94a1859b271e9cfa"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_exec_dir" ref="a50d4e4a115c6670f94a1859b271e9cfa" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_assistant_object *lso, struct lu_dirent *ent, __u16 type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_exec_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *&nbsp;</td>
          <td class="paramname"> <em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04617">4617</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="af7c13f5b6de5753584521f9b80ada763"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_extend_lovea" ref="af7c13f5b6de5753584521f9b80ada763" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct thandle *handle, struct dt_object *parent, struct lu_fid *cfid, struct lu_buf *buf, int fl, __u32 ost_idx, __u32 ea_off, bool reset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_extend_lovea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ost_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ea_off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>reset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>did nothing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01497">1497</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l01538">fid_to_lmm_oi()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01407">lfsck_layout_get_def_stripesize()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01441">lfsck_layout_refill_lovea()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01618">lov_mds_md_v3::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01506">lov_mds_md_v1::lmm_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l01572">lmm_oi_cpu_to_le()</a>, <a class="el" href="lustre__idl_8h_source.html#l01505">lov_mds_md_v1::lmm_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01507">lov_mds_md_v1::lmm_stripe_size</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lustre__user_8h_source.html#l00351">LOV_PATTERN_F_HOLE</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, <a class="el" href="lu__object_8h_source.html#l00910">LU_XATTR_CREATE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>.</p>

</div>
</div>
<a class="anchor" id="a7939b57b74b7d462498b4caaed38c4bb"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_fail" ref="a7939b57b74b7d462498b4caaed38c4bb" args="(const struct lu_env *env, struct lfsck_component *com, bool new_checked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_fail </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>new_checked</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03932">3932</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, and <a class="el" href="lfsck__layout_8c_source.html#l01312">lfsck_layout_record_failure()</a>.</p>

</div>
</div>
<a class="anchor" id="a915dfe1bb095c731115ebb4c119751a1"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_get_def_stripesize" ref="a915dfe1bb095c731115ebb4c119751a1" args="(const struct lu_env *env, struct lfsck_instance *lfsck, __u32 *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_get_def_stripesize </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the system default stripe size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>pointer to the default stripe size</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01407">1407</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00674">lfsck_instance::li_local_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00669">lfsck_instance::li_next</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, <a class="el" href="lfsck__internal_8h_source.html#l00892">lfsck_thread_info::lti_lum</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01497">lfsck_layout_extend_lovea()</a>.</p>

</div>
</div>
<a class="anchor" id="ae1340959791b55691439c76e540d3123"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_get_lovea" ref="ae1340959791b55691439c76e540d3123" args="(const struct lu_env *env, struct dt_object *obj, struct lu_buf *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_get_lovea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00323">323</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8c_source.html#l02351">lu_buf_alloc()</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="lu__object_8c_source.html#l02362">lu_buf_realloc()</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="a32152259ea50351b1974ff5b1aa1fe08"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_init" ref="a32152259ea50351b1974ff5b1aa1fe08" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00957">957</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__layout_8c_source.html#l00054">LFSCK_LAYOUT_MAGIC</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00295">lfsck_layout::ll_magic</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00069">LS_INIT</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c6f0e432da9c17ab7e0c9a716250f77"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_lastid_create" ref="a4c6f0e432da9c17ab7e0c9a716250f77" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_lastid_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01038">1038</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l00396">dt_object_format::dof_type</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00192">dt_mode_to_dft()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lfsck__internal_8h_source.html#l00873">lfsck_thread_info::lti_dof</a>, <a class="el" href="lfsck__internal_8h_source.html#l00865">lfsck_thread_info::lti_la</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e53eca0785ffb98d150d287c91a4ff7"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_lastid_load" ref="a0e53eca0785ffb98d150d287c91a4ff7" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_layout_seq *lls)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_lastid_load </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>lls</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01222">1222</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8c_source.html#l00469">dt_read()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l03458">LE_LASTID_REBUILDING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01038">lfsck_layout_lastid_create()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00059">lfsck_layout_seq::lls_lastid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00061">lfsck_layout_seq::lls_lastid_obj</a>, <a class="el" href="lfsck__layout_8c_source.html#l00058">lfsck_layout_seq::lls_seq</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lustre__fid_8h_source.html#l00318">lu_last_id_fid()</a>, <a class="el" href="lustre__lib_8h_source.html#l00162">l_wait_info::lwi_timeout</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00535">OBD_FAIL_LFSCK_DELAY4</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, and <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="a38be935e9a8cf2c24a068e7cb23068fa"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_lastid_reload" ref="a38be935e9a8cf2c24a068e7cb23068fa" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_layout_seq *lls)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_lastid_reload </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>lls</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01105">1105</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8c_source.html#l00490">dt_record_read()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l03458">LE_LASTID_REBUILDING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00062">lfsck_layout_seq::lls_dirty</a>, <a class="el" href="lfsck__layout_8c_source.html#l00059">lfsck_layout_seq::lls_lastid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00060">lfsck_layout_seq::lls_lastid_known</a>, <a class="el" href="lfsck__layout_8c_source.html#l00061">lfsck_layout_seq::lls_lastid_obj</a>, <a class="el" href="lfsck__layout_8c_source.html#l00058">lfsck_layout_seq::lls_seq</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="a76dd053f5dd848d79efded2138efb89f"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_lastid_store" ref="a76dd053f5dd848d79efded2138efb89f" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_lastid_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01149">1149</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lfsck__layout_8c_source.html#l00062">lfsck_layout_seq::lls_dirty</a>, <a class="el" href="lfsck__layout_8c_source.html#l00059">lfsck_layout_seq::lls_lastid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00061">lfsck_layout_seq::lls_lastid_obj</a>, <a class="el" href="lfsck__layout_8c_source.html#l00058">lfsck_layout_seq::lls_seq</a>, <a class="el" href="lfsck__layout_8c_source.html#l00081">lfsck_layout_slave_data::llsd_seq_list</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04680">lfsck_layout_slave_post()</a>.</p>

</div>
</div>
<a class="anchor" id="a417e0de5dc3ebabe3dafff5484e30bad"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_le_to_cpu" ref="a417e0de5dc3ebabe3dafff5484e30bad" args="(struct lfsck_layout *des, const struct lfsck_layout *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_le_to_cpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>des</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00691">691</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l00352">lfsck_layout::ll_bitmap_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00295">lfsck_layout::ll_magic</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00338">lfsck_layout::ll_objs_checked_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00335">lfsck_layout::ll_objs_failed_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00341">lfsck_layout::ll_objs_failed_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00349">lfsck_layout::ll_objs_skipped</a>, <a class="el" href="lfsck__internal_8h_source.html#l00329">lfsck_layout::ll_pos_first_inconsistent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00322">lfsck_layout::ll_pos_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00310">lfsck_layout::ll_run_time_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00304">lfsck_layout::ll_success_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00313">lfsck_layout::ll_time_last_complete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00316">lfsck_layout::ll_time_latest_start</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00290">LLIT_MAX</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00835">lfsck_layout_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a728c602d204c0ae7854334c8cf6cfe16"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_llst_add" ref="a728c602d204c0ae7854334c8cf6cfe16" args="(struct lfsck_layout_slave_data *llsd, __u32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_llst_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00110">110</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00072">lfsck_layout_slave_target::llst_gen</a>, <a class="el" href="lfsck__layout_8c_source.html#l00074">lfsck_layout_slave_target::llst_index</a>, <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00073">lfsck_layout_slave_target::llst_ref</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05459">lfsck_layout_slave_join()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04083">lfsck_layout_slave_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4fae01e962ac8c8c9328b1195487f54"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_llst_del" ref="ae4fae01e962ac8c8c9328b1195487f54" args="(struct lfsck_layout_slave_data *llsd, struct lfsck_layout_slave_target *llst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_llst_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *&nbsp;</td>
          <td class="paramname"> <em>llst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00143">143</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03436">lfsck_layout_slave_async_interpret()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>.</p>

</div>
</div>
<a class="anchor" id="a59e22baa68e7de19f56d1f226f38f58b"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_llst_find_and_del" ref="a59e22baa68e7de19f56d1f226f38f58b" args="(struct lfsck_layout_slave_data *llsd, __u32 index, bool unlink)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a>* lfsck_layout_llst_find_and_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>unlink</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00160">160</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00074">lfsck_layout_slave_target::llst_index</a>, <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00073">lfsck_layout_slave_target::llst_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05459">lfsck_layout_slave_join()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a3443bf4169bdf1d9ff5bed3e8b1d7b9c"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_llst_put" ref="a3443bf4169bdf1d9ff5bed3e8b1d7b9c" args="(struct lfsck_layout_slave_target *llst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_llst_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__target.html">lfsck_layout_slave_target</a> *&nbsp;</td>
          <td class="paramname"> <em>llst</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00100">100</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00073">lfsck_layout_slave_target::llst_ref</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00143">lfsck_layout_llst_del()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03436">lfsck_layout_slave_async_interpret()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05459">lfsck_layout_slave_join()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05129">lfsck_layout_slave_quit()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05908">lfsck_orphan_it_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a9979ccb84ceb671f8ac0bd466e536ac9"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_load" ref="a9979ccb84ceb671f8ac0bd466e536ac9" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_load </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load the layout LFSCK trace file from disk. </p>
<p>The layout LFSCK trace file records the layout LFSCK status information and other statistics, such as how many objects have been scanned, and how many objects have been repaired, and etc. It also contains the bitmap for failed OSTs during the layout LFSCK. All these information will be loaded from disk to RAM when the layout LFSCK component setup.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for file data corruption, the caller should reset the layout LFSCK trace file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00835">835</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8c_source.html#l00469">dt_read()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00543">lfsck_component::lc_file_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00691">lfsck_layout_le_to_cpu()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00054">LFSCK_LAYOUT_MAGIC</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00295">lfsck_layout::ll_magic</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="aea0f4f894acef61a1e87f23ad2f4e0e2"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_load_bitmap" ref="aea0f4f894acef61a1e87f23ad2f4e0e2" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_load_bitmap </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load the OST bitmap from the <a class="el" href="structlfsck__layout.html">lfsck_layout</a> trace file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure or data corruption </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00760">760</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="bitmap_8h_source.html#l00049">CFS_ALLOCATE_BITMAP()</a>, <a class="el" href="bitmap_8h_source.html#l00100">cfs_bitmap_check_empty()</a>, <a class="el" href="bitmap_8h_source.html#l00072">CFS_FREE_BITMAP</a>, <a class="el" href="bitmap_8h_source.html#l00062">CFS_RESET_BITMAP()</a>, <a class="el" href="bitmap_8h_source.html#l00041">cfs_bitmap::data</a>, <a class="el" href="dt__object_8c_source.html#l00469">dt_read()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_incomplete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00352">lfsck_layout::ll_bitmap_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00478">lfsck_tgt_descs::ltd_tgts_bitmap</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="bitmap_8h_source.html#l00040">cfs_bitmap::size</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04124">lfsck_layout_master_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="acfe149b00945b05b638b3ebedcc45771"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_check_pairs" ref="acfe149b00945b05b638b3ebedcc45771" args="(const struct lu_env *env, struct lfsck_component *com, struct lu_fid *cfid, struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_check_pairs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03704">3704</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00706">fid_to_ostid()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00323">lfsck_layout_get_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00359">lfsck_layout_verify_header()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lfsck__internal_8h_source.html#l00861">lfsck_thread_info::lti_big_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05162">lfsck_layout_master_in_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="a309273cc9597b6e19cec6a98f6ff5e7d"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_checkpoint" ref="a309273cc9597b6e19cec6a98f6ff5e7d" args="(const struct lu_env *env, struct lfsck_component *com, bool init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_checkpoint </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>init</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03944">3944</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lfsck__internal_8h_source.html#l00050">HALF_SEC</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__lib_8c_source.html#l02531">lfsck_checkpoint_generic()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00683">lfsck_instance::li_pos_current</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00322">lfsck_layout::ll_pos_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>.</p>

</div>
</div>
<a class="anchor" id="a2d614a6dabbb448604abeaab37e4ea2d"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_conditional_destroy" ref="a2d614a6dabbb448604abeaab37e4ea2d" args="(const struct lu_env *env, struct lfsck_component *com, const struct lu_fid *fid, __u32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_conditional_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01900">1900</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03467">LE_CONDITIONAL_DESTROY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lustre__idl_8h_source.html#l02726">LFSCK_NOTIFY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01326">lfsck_tgt_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03444">lfsck_request::lr_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00450">lfsck_tgt_desc::ltd_exp</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l01242">OBD_CONNECT_LFSCK</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01209">RMF_LFSCK_REQUEST</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="layout_8c_source.html#l01680">RQF_LFSCK_NOTIFY</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a431ef8b29e16a50d8fd380811332ab3f"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_data_release" ref="a431ef8b29e16a50d8fd380811332ab3f" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_master_data_release </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05023">5023</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="bitmap_8h_source.html#l00072">CFS_FREE_BITMAP</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00817">lfsck_assistant_data::lad_mdt_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00823">lfsck_assistant_data::lad_mdt_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00808">lfsck_assistant_data::lad_ost_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__internal_8h_source.html#l00451">lfsck_tgt_desc::ltd_layout_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__net_8h_source.html#l01537">thread_is_init()</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

</div>
</div>
<a class="anchor" id="adecbba0dd24addb1000f939bc0ebe768"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_double_scan" ref="adecbba0dd24addb1000f939bc0ebe768" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_double_scan </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04912">4912</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00823">lfsck_assistant_data::lad_mdt_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__lib_8c_source.html#l02580">lfsck_double_scan_generic()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

</div>
</div>
<a class="anchor" id="a7c4c57e3d6572a43fbf275c1d36c856c"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_exec_oit" ref="a7c4c57e3d6572a43fbf275c1d36c856c" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_exec_oit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04370">4370</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l01538">fid_to_lmm_oi()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00323">lfsck_layout_get_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01312">lfsck_layout_record_failure()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00359">lfsck_layout_verify_header()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00289">LLIT_OTHERS</a>, <a class="el" href="lustre__idl_8h_source.html#l01506">lov_mds_md_v1::lmm_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l01572">lmm_oi_cpu_to_le()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00861">lfsck_thread_info::lti_big_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

</div>
</div>
<a class="anchor" id="a4eb94598fc81c48a762231274ff19f3b"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_in_notify" ref="a4eb94598fc81c48a762231274ff19f3b" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *lr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_in_notify </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05162">5162</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00817">lfsck_assistant_data::lad_mdt_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00823">lfsck_assistant_data::lad_mdt_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00808">lfsck_assistant_data::lad_ost_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03468">LE_PAIRS_VERIFY</a>, <a class="el" href="lustre__idl_8h_source.html#l03466">LE_PEER_EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03477">LEF_FROM_OST</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01396">lfsck_phase2_next_ready()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00148">LPF_BROADCAST</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03444">lfsck_request::lr_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03445">lfsck_request::lr_fid2</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03443">lfsck_request::lr_flags2</a>, <a class="el" href="lustre__idl_8h_source.html#l03431">lfsck_request::lr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03441">lfsck_request::lr_param</a>, <a class="el" href="lustre__idl_8h_source.html#l03436">lfsck_request::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00219">lfsck_stop::ls_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00218">lfsck_stop::ls_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00463">lfsck_tgt_desc::ltd_layout_done</a>, <a class="el" href="lfsck__internal_8h_source.html#l00451">lfsck_tgt_desc::ltd_layout_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00882">lfsck_thread_info::lti_stop</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

</div>
</div>
<a class="anchor" id="ac55883e73d8affc779b6679789ce69a6"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_post" ref="ac55883e73d8affc779b6679789ce69a6" args="(const struct lu_env *env, struct lfsck_component *com, int result, bool init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_post </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>init</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04625">4625</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00050">HALF_SEC</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00055">LF_SCANNED_ONCE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00061">LF_UPGRADE</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02551">lfsck_post_generic()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00725">lfsck_instance::li_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00097">LS_PARTIAL</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a40e5175988171f489829171a4a1ea7a8"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_prep" ref="a40e5175988171f489829171a4a1ea7a8" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_start_param *lsp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_master_prep </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *&nbsp;</td>
          <td class="paramname"> <em>lsp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04124">4124</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00537">lfsck_component::lc_pos_start</a>, <a class="el" href="lfsck__layout_8c_source.html#l00760">lfsck_layout_load_bitmap()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04015">lfsck_layout_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00203">lfsck_set_param()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02484">lfsck_start_assistant()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00042">lfsck_start_param::lsp_start</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ad47054f1a5257990cf09f5b79cd6fe98"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_quit" ref="ad47054f1a5257990cf09f5b79cd6fe98" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_master_quit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05087">5087</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00823">lfsck_assistant_data::lad_mdt_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__lib_8c_source.html#l02613">lfsck_quit_generic()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01537">thread_is_init()</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

</div>
</div>
<a class="anchor" id="a664057c3ba51bfc9d6015253c57cbddd"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_prep" ref="a664057c3ba51bfc9d6015253c57cbddd" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_start *start)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_prep </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start.html">lfsck_start</a> *&nbsp;</td>
          <td class="paramname"> <em>start</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04015">4015</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00545">lfsck_component::lc_fid_latest_scanned_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00537">lfsck_component::lc_pos_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00055">LF_SCANNED_ONCE</a>, <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00203">lfsck_set_param()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_drop_dryrun</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00338">lfsck_layout::ll_objs_checked_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00335">lfsck_layout::ll_objs_failed_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00341">lfsck_layout::ll_objs_failed_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00329">lfsck_layout::ll_pos_first_inconsistent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00310">lfsck_layout::ll_run_time_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00316">lfsck_layout::ll_time_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00290">LLIT_MAX</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00151">LPF_OST_ORPHAN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00080">LS_COMPLETED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00211">lfsck_start::ls_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00097">LS_PARTIAL</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04124">lfsck_layout_master_prep()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04083">lfsck_layout_slave_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="a16bc6d6b9f5016c98be95bf46da930af"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_query" ref="a16bc6d6b9f5016c98be95bf46da930af" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *req, struct lfsck_reply *rep, struct lfsck_query *que, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_query </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__reply.html">lfsck_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__query.html">lfsck_query</a> *&nbsp;</td>
          <td class="paramname"> <em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05431">5431</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lustre__idl_8h_source.html#l03481">LEF_QUERY_ALL</a>, <a class="el" href="lfsck__layout_8c_source.html#l05385">lfsck_layout_query_all()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05377">lfsck_layout_repaired()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03454">lfsck_reply::lr_repaired</a>, <a class="el" href="lustre__idl_8h_source.html#l03452">lfsck_reply::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00227">lfsck_query::lu_mdts_count</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00228">lfsck_query::lu_osts_count</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00229">lfsck_query::lu_repaired</a>.</p>

</div>
</div>
<a class="anchor" id="a8542139594673cf63eae8074bf4954d1"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_query_all" ref="a8542139594673cf63eae8074bf4954d1" args="(const struct lu_env *env, struct lfsck_component *com, __u32 *mdts_count, __u32 *osts_count, __u64 *repaired)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_query_all </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>mdts_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>osts_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>repaired</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05385">5385</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__layout_8c_source.html#l05377">lfsck_layout_repaired()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00457">lfsck_tgt_desc::ltd_layout_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00455">lfsck_tgt_desc::ltd_layout_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00484">lfsck_tgt_descs::ltd_rw_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00478">lfsck_tgt_descs::ltd_tgts_bitmap</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05431">lfsck_layout_query()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ed34421cd5eadb1466fe0030abad218"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_record_failure" ref="a3ed34421cd5eadb1466fe0030abad218" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lfsck_layout *lo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_record_failure </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01312">1312</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00335">lfsck_layout::ll_objs_failed_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00329">lfsck_layout::ll_pos_first_inconsistent</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, and <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a2966e2ef5ccc21df92b6a31b7c4a56f5">dt_index_operations::dt_it_ops::store</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03932">lfsck_layout_fail()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d6ad3d4970d26ac0bbdb4468979a3e8"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_recreate_lovea" ref="a8d6ad3d4970d26ac0bbdb4468979a3e8" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_tgt_desc *ltd, struct lu_orphan_rec *rec, struct dt_object *parent, struct lu_fid *cfid, __u32 ost_idx, __u32 ea_off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_recreate_lovea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ost_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ea_off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>did nothing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02169">2169</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01497">lfsck_layout_extend_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01441">lfsck_layout_refill_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01621">lfsck_layout_update_pfid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00359">lfsck_layout_verify_header()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l03644">lovea_slot_is_dummy()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, <a class="el" href="lfsck__internal_8h_source.html#l00861">lfsck_thread_info::lti_big_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00863">lfsck_thread_info::lti_fid2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="lu__object_8c_source.html#l02362">lu_buf_realloc()</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="lu__object_8h_source.html#l00910">LU_XATTR_CREATE</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02441">lfsck_layout_scan_orphan_one()</a>.</p>

</div>
</div>
<a class="anchor" id="a35a20296cb4b7c7e0095b01f2ed15ece"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_recreate_parent" ref="a35a20296cb4b7c7e0095b01f2ed15ece" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_tgt_desc *ltd, struct lu_orphan_rec *rec, struct lu_fid *cfid, const char *infix, const char *type, __u32 ea_off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_recreate_parent </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>infix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ea_off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function will create the MDT-object with the given (partial) LOV EA. </p>
<p>Under some data corruption cases, the MDT-object of the file may be lost, but its OST-objects, or some of them are there. The layout LFSCK needs to re-create the MDT-object with the orphan OST-object(s) information.</p>
<p>On the other hand, the LFSCK may has created some OST-object for repairing dangling LOV EA reference, but as the LFSCK processing, it may find that the old OST-object is there and should replace the former new created OST object. Unfortunately, some others have modified such newly created object. To keep the data (both new and old), the LFSCK will create MDT-object with new FID to reference the original OST-object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ltd</em>&nbsp;</td><td>pointer to target device descriptor </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>pointer to the record for the orphan OST-object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cfid</em>&nbsp;</td><td>pointer to FID for the orphan OST-object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>infix</em>&nbsp;</td><td>additional information, such as the FID for original MDT-object and the stripe offset in the LOV EA </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>the type for describing why the orphan MDT-object is created. The rules are as following:</td></tr>
  </table>
  </dd>
</dl>
<p>type "C": Multiple OST-objects claim the same MDT-object and the same slot in the layout EA. Then the LFSCK will create new MDT-object(s) to hold the conflict OST-object(s).</p>
<p>type "N": The orphan OST-object does not know which one was the real parent MDT-object, so the LFSCK uses new FID for its parent MDT-object.</p>
<p>type "R": The orphan OST-object knows its parent MDT-object FID, but does not know the position (the file name) in the layout.</p>
<p>type "D": The MDT-object is a directory, it may knows its parent but because there is no valid linkEA, the LFSCK cannot know where to put it back to the namespace. type "O": The MDT-object has no linkEA, and there is no name entry that references the MDT-object.</p>
<p>type "P": The orphan object to be created was a parent directory of some MDT-object which linkEA shows that the  object is missing.</p>
<p>The orphan name will be like: ${FID}-${infix}-${type}-${conflict_version}</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ea_off</em>&nbsp;</td><td>the stripe offset in the LOV EA</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>on repaired something </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if needs to repair nothing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01697">1697</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l01576">__lfsck_layout_update_pfid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l00396">dt_object_format::dof_type</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8c_source.html#l00192">dt_mode_to_dft()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00329">lfsck_fid_alloc()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01497">lfsck_layout_extend_lovea()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01094">lfsck_name_get_const()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00520">lfsck_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00678">lfsck_instance::li_lpf_obj</a>, <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, <a class="el" href="linkea_8c_source.html#l00034">linkea_data_new()</a>, <a class="el" href="lustre__idl_8h_source.html#l00847">lu_orphan_rec::lor_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00849">lu_orphan_rec::lor_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l00848">lu_orphan_rec::lor_uid</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, <a class="el" href="lfsck__internal_8h_source.html#l00861">lfsck_thread_info::lti_big_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00873">lfsck_thread_info::lti_dof</a>, <a class="el" href="lfsck__internal_8h_source.html#l00893">lfsck_thread_info::lti_dt_rec</a>, <a class="el" href="lfsck__internal_8h_source.html#l00864">lfsck_thread_info::lti_fid3</a>, <a class="el" href="lfsck__internal_8h_source.html#l00875">lfsck_thread_info::lti_key</a>, <a class="el" href="lfsck__internal_8h_source.html#l00866">lfsck_thread_info::lti_la2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00900">lfsck_thread_info::lti_llh</a>, <a class="el" href="lu__object_8c_source.html#l02362">lu_buf_realloc()</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l02441">lfsck_layout_scan_orphan_one()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f39858675c9c66aa0d7647af1207e99"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_refill_lovea" ref="a7f39858675c9c66aa0d7647af1207e99" args="(const struct lu_env *env, struct thandle *handle, struct dt_object *parent, struct lu_fid *cfid, struct lu_buf *buf, struct lov_ost_data_v1 *slot, int fl, __u32 ost_idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_refill_lovea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlov__ost__data__v1.html">lov_ost_data_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ost_idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>did nothing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01441">1441</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00706">fid_to_ostid()</a>, <a class="el" href="lustre__idl_8h_source.html#l01498">lov_ost_data_v1::l_ost_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01505">lov_mds_md_v1::lmm_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lustre__user_8h_source.html#l00351">LOV_PATTERN_F_HOLE</a>, <a class="el" href="lustre__idl_8h_source.html#l03644">lovea_slot_is_dummy()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00823">ostid_cpu_to_le()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01497">lfsck_layout_extend_lovea()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>.</p>

</div>
</div>
<a class="anchor" id="a22934167b98d9cdd57b87843adbf57cb"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_repair_dangling" ref="a22934167b98d9cdd57b87843adbf57cb" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct lfsck_layout_req *llr, struct lu_attr *la)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_repair_dangling </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *&nbsp;</td>
          <td class="paramname"> <em>llr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02625">2625</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00167">filter_fid::ff_parent</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00444">LA_ATIME</a>, <a class="el" href="lu__object_8h_source.html#l00413">lu_attr::la_atime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00452">LA_TYPE</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01379">lfsck_layout_trans_stop()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00776">lfsck_layout_req::llr_lov_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00775">lfsck_layout_req::llr_ost_idx</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00154">LPF_CREATE_OSTOBJ</a>, <a class="el" href="lfsck__internal_8h_source.html#l00873">lfsck_thread_info::lti_dof</a>, <a class="el" href="lfsck__internal_8h_source.html#l00888">lfsck_thread_info::lti_new_pfid</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8h_source.html#l00910">LU_XATTR_CREATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="a91d3192972f71d3182da883a9529e865"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_repair_multiple_references" ref="a91d3192972f71d3182da883a9529e865" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct lfsck_layout_req *llr, struct lu_attr *la, struct lu_buf *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_repair_multiple_references </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *&nbsp;</td>
          <td class="paramname"> <em>llr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02829">2829</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00706">fid_to_ostid()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l01498">lov_ost_data_v1::l_ost_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lu__object_8h_source.html#l00275">lu_device::ld_type</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01310">lfsck_object_locate()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00669">lfsck_instance::li_next</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00776">lfsck_layout_req::llr_lov_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00775">lfsck_layout_req::llr_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00873">lfsck_thread_info::lti_dof</a>, <a class="el" href="lfsck__internal_8h_source.html#l00890">lfsck_thread_info::lti_hint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="lu__object_8c_source.html#l02319">lu_object_anon()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8c_source.html#l01329">lu_object_locate()</a>, <a class="el" href="lu__object_8c_source.html#l00193">lu_object_put_nocache()</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00823">ostid_cpu_to_le()</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="aa151c19a69ab814573130d5e11f7980d"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_repair_owner" ref="aa151c19a69ab814573130d5e11f7980d" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct lfsck_layout_req *llr, struct lu_attr *pla, const struct lu_attr *cla)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_repair_owner </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *&nbsp;</td>
          <td class="paramname"> <em>llr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pla</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cla</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03014">3014</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02253">dt_attr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02238">dt_declare_attr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01379">lfsck_layout_trans_stop()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00776">lfsck_layout_req::llr_lov_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00775">lfsck_layout_req::llr_ost_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00866">lfsck_thread_info::lti_la2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="a2322bdb1473bac735935d675c45de6e9"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_repair_unmatched_pair" ref="a2322bdb1473bac735935d675c45de6e9" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct lfsck_layout_req *llr, struct lu_attr *la)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_repair_unmatched_pair </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a> *&nbsp;</td>
          <td class="paramname"> <em>llr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02732">2732</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02253">dt_attr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02238">dt_declare_attr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00167">filter_fid::ff_parent</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01379">lfsck_layout_trans_stop()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00774">lfsck_layout_req::llr_child</a>, <a class="el" href="lfsck__internal_8h_source.html#l00776">lfsck_layout_req::llr_lov_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00775">lfsck_layout_req::llr_ost_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00888">lfsck_thread_info::lti_new_pfid</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="a4faff84406271848f87feb79bf3d7af7"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_repaired" ref="a4faff84406271848f87feb79bf3d7af7" args="(struct lfsck_layout *lo, __u64 *count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_repaired </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout.html">lfsck_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>lo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05377">5377</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00290">LLIT_MAX</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05431">lfsck_layout_query()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05385">lfsck_layout_query_all()</a>.</p>

</div>
</div>
<a class="anchor" id="aa9a1cefa7a1f7b61e772a29684fe1542"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_reset" ref="aa9a1cefa7a1f7b61e772a29684fe1542" args="(const struct lu_env *env, struct lfsck_component *com, bool init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_reset </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>init</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03895">3895</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00062">CFS_RESET_BITMAP()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_incomplete</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__layout_8c_source.html#l00054">LFSCK_LAYOUT_MAGIC</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00295">lfsck_layout::ll_magic</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00304">lfsck_layout::ll_success_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00313">lfsck_layout::ll_time_last_complete</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00069">LS_INIT</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04124">lfsck_layout_master_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04015">lfsck_layout_prep()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a97e837c49720f8b088c076de70da3bff"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_scan_orphan" ref="a97e837c49720f8b088c076de70da3bff" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_tgt_desc *ltd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_scan_orphan </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02511">2511</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00087">cfs_bitmap_check()</a>, <a class="el" href="libcfs__fail_8h_source.html#l00139">CFS_FAIL_TIMEOUT</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="structdt__object__operations.html#ac317771bd9f0827b4d8fcec4d51a63c2">dt_object_operations::do_index_try</a>, <a class="el" href="dt__object_8h_source.html#l01751">dt_object::do_ops</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8c_source.html#l00583">dt_lfsck_orphan_features</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00288">FID_SEQ_IDIF</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00545">lfsck_component::lc_fid_latest_scanned_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__lib_8c_source.html#l01874">lfsck_control_speed_by_self()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02441">lfsck_layout_scan_orphan_one()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lfsck__internal_8h_source.html#l00891">lfsck_thread_info::lti_rec</a>, <a class="el" href="obd__support_8h_source.html#l00525">OBD_FAIL_LFSCK_DELAY3</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00594">ostid_set_id()</a>, <a class="el" href="lustre__idl_8h_source.html#l00561">ostid_set_seq()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03390">lfsck_layout_assistant_handler_p2()</a>.</p>

</div>
</div>
<a class="anchor" id="a03d02a7f41f0955e2f2a7ae13ed1c805"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_scan_orphan_one" ref="a03d02a7f41f0955e2f2a7ae13ed1c805" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_tgt_desc *ltd, struct lu_orphan_rec *rec, struct lu_fid *cfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_scan_orphan_one </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l02441">2441</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00559">lfsck_component::lc_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00341">lfsck_layout::ll_objs_failed_phase2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00345">lfsck_layout::ll_objs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00287">LLIT_ORPHAN</a>, <a class="el" href="lustre__idl_8h_source.html#l00847">lu_orphan_rec::lor_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="lu__object_8c_source.html#l00193">lu_object_put_nocache()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6659eed7f0dce7c8f0c19225108fc4e"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_scan_stripes" ref="ae6659eed7f0dce7c8f0c19225108fc4e" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct lov_mds_md_v1 *lmm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_scan_stripes </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>lmm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04159">4159</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02212">dt_declare_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02573">dt_declare_xattr_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00804">lfsck_assistant_data::lad_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00834">lfsck_assistant_data::lad_prefetched</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00756">lfsck_assistant_req::lar_list</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lfsck__lib_8c_source.html#l01959">lfsck_assistant_object_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01487">lfsck_assistant_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00202">lfsck_layout_assistant_req_fini()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00183">lfsck_layout_assistant_req_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01312">lfsck_layout_record_failure()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01237">lfsck_object_find_by_dev_nowait()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01326">lfsck_tgt_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00683">lfsck_instance::li_pos_current</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="llog__test_8c_source.html#l00946">llr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00773">lfsck_layout_req::llr_lar</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l03644">lovea_slot_is_dummy()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00865">lfsck_thread_info::lti_la</a>, <a class="el" href="lfsck__internal_8h_source.html#l00867">lfsck_thread_info::lti_oi</a>, <a class="el" href="lfsck__internal_8h_source.html#l00887">lfsck_thread_info::lti_old_pfid</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00565">OBD_FAIL_LFSCK_ASSISTANT_DIRECT</a>, <a class="el" href="structost__id.html#a01d44bff8859d8cd3aabe8a4b0c2ee46">ost_id::oi</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00659">ostid_to_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6415a1912ce97ddf247aaa499363c68"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_seq_insert" ref="ad6415a1912ce97ddf247aaa499363c68" args="(struct lfsck_layout_slave_data *llsd, struct lfsck_layout_seq *lls)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_seq_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a> *&nbsp;</td>
          <td class="paramname"> <em>lls</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01022">1022</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lfsck__layout_8c_source.html#l00057">lfsck_layout_seq::lls_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00058">lfsck_layout_seq::lls_seq</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00081">lfsck_layout_slave_data::llsd_seq_list</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a27d0a885b571dc0cc58fdc60a29e22"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_seq_lookup" ref="a4a27d0a885b571dc0cc58fdc60a29e22" args="(struct lfsck_layout_slave_data *llsd, __u64 seq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__layout__seq.html">lfsck_layout_seq</a>* lfsck_layout_seq_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>seq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01006">1006</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lfsck__layout_8c_source.html#l00057">lfsck_layout_seq::lls_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00058">lfsck_layout_seq::lls_seq</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00081">lfsck_layout_slave_data::llsd_seq_list</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>.</p>

</div>
</div>
<a class="anchor" id="a45153a26a55e704921bcc3292e79df9f"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_setup" ref="a45153a26a55e704921bcc3292e79df9f" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_layout_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05556">5556</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00543">lfsck_component::lc_file_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00535">lfsck_component::lc_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03458">LE_LASTID_REBUILDING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__lib_8c_source.html#l01929">lfsck_assistant_data_init()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00318">lfsck_component_cleanup()</a>, <a class="el" href="lustre__disk_8h_source.html#l00075">LFSCK_LAYOUT</a>, <a class="el" href="lfsck__layout_8c_source.html#l00957">lfsck_layout_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00835">lfsck_layout_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00674">lfsck_instance::li_local_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00673">lfsck_instance::li_los</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00088">lfsck_layout_slave_data::llsd_rb_root</a>, <a class="el" href="lfsck__layout_8c_source.html#l00081">lfsck_layout_slave_data::llsd_seq_list</a>, <a class="el" href="local__storage_8c_source.html#l00432">local_file_find_or_create()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00100">LS_CO_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00106">LS_CO_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00103">LS_CO_STOPPED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00080">LS_COMPLETED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00094">LS_CRASHED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00069">LS_INIT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00097">LS_PARTIAL</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>.</p>

</div>
</div>
<a class="anchor" id="af5614aab7247fbc31d0dcf53d2500fce"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_async_interpret" ref="af5614aab7247fbc31d0dcf53d2500fce" args="(const struct lu_env *env, struct ptlrpc_request *req, void *args, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_async_interpret </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03436">3436</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="parser_8c_source.html#l00044">done</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00143">lfsck_layout_llst_del()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00095">lfsck_layout_slave_async_args::llsaa_com</a>, <a class="el" href="lfsck__layout_8c_source.html#l00094">lfsck_layout_slave_async_args::llsaa_exp</a>, <a class="el" href="lfsck__layout_8c_source.html#l00096">lfsck_layout_slave_async_args::llsaa_llst</a>, <a class="el" href="lfsck__layout_8c_source.html#l00076">lfsck_layout_slave_target::llst_failures</a>, <a class="el" href="lfsck__layout_8c_source.html#l00074">lfsck_layout_slave_target::llst_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03452">lfsck_reply::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01214">RMF_LFSCK_REPLY</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03487">lfsck_layout_async_query()</a>.</p>

</div>
</div>
<a class="anchor" id="a46d0ce7ab64dd4814f04265fd5c42c87"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_check_pairs" ref="a46d0ce7ab64dd4814f04265fd5c42c87" args="(const struct lu_env *env, struct lfsck_component *com, struct lu_fid *cfid, struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_check_pairs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03789">3789</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l00462">fid_is_idif()</a>, <a class="el" href="seq__range_8h_source.html#l00061">fld_range_is_mdt()</a>, <a class="el" href="seq__range_8h_source.html#l00109">fld_range_set_any()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03468">LE_PAIRS_VERIFY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lustre__idl_8h_source.html#l02726">LFSCK_NOTIFY</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00671">lfsck_instance::li_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03444">lfsck_request::lr_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03445">lfsck_request::lr_fid2</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, <a class="el" href="obd__mount__server_8c_source.html#l00476">lustre_find_lwp_by_index()</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l01242">OBD_CONNECT_LFSCK</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01209">RMF_LFSCK_REQUEST</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="layout_8c_source.html#l01680">RQF_LFSCK_NOTIFY</a>, <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="abe8aba8e163d3f53f3539b0ab68cafa1"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_checkpoint" ref="abe8aba8e163d3f53f3539b0ab68cafa1" args="(const struct lu_env *env, struct lfsck_component *com, bool init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_checkpoint </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>init</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03981">3981</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lfsck__internal_8h_source.html#l00050">HALF_SEC</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00683">lfsck_instance::li_pos_current</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00322">lfsck_layout::ll_pos_latest_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>.</p>

</div>
</div>
<a class="anchor" id="a2afe3a2eba62d3f886686bca07bc7b3a"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_conditional_destroy" ref="a2afe3a2eba62d3f886686bca07bc7b3a" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *lr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_conditional_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01954">1954</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l02137">dt_declare_destroy()</a>, <a class="el" href="dt__object_8h_source.html#l02292">dt_declare_ref_del()</a>, <a class="el" href="dt__object_8h_source.html#l02151">dt_destroy()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02305">dt_ref_del()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00672">lfsck_instance::li_namespace</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lustre__idl_8h_source.html#l03444">lfsck_request::lr_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00865">lfsck_thread_info::lti_la</a>, <a class="el" href="lfsck__internal_8h_source.html#l00883">lfsck_thread_info::lti_policy</a>, <a class="el" href="lfsck__internal_8h_source.html#l00885">lfsck_thread_info::lti_resid</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, <a class="el" href="lustre__idl_8h_source.html#l01767">OBD_OBJECT_EOF</a>, <a class="el" href="lustre__fid_8h_source.html#l00652">ost_fid_build_resid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fd2a1bd3ebbffb3368bb8ae78b831a3"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_data_release" ref="a8fd2a1bd3ebbffb3368bb8ae78b831a3" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_slave_data_release </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05077">5077</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__layout_8c_source.html#l05129">lfsck_layout_slave_quit()</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

</div>
</div>
<a class="anchor" id="a9d115d7049ea42ae13c61834185a4870"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_double_scan" ref="a9d115d7049ea42ae13c61834185a4870" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_double_scan </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04950">4950</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="parser_8c_source.html#l00044">done</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00559">lfsck_component::lc_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00548">lfsck_component::lc_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00551">lfsck_component::lc_time_next_checkpoint</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00051">LFSCK_CHECKPOINT_INTERVAL</a>, <a class="el" href="lfsck__layout_8c_source.html#l01332">lfsck_layout_double_scan_result()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05129">lfsck_layout_slave_quit()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00658">lfsck_instance::li_double_scan_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a352c16e58928c492775f3258b50fc202"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_exec_oit" ref="a352c16e58928c492775f3258b50fc202" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_exec_oit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04504">4504</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00514">fid_idif_id()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00973">fid_is_for_ostobj()</a>, <a class="el" href="lustre__idl_8h_source.html#l00462">fid_is_idif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00725">fid_is_last_id()</a>, <a class="el" href="lustre__idl_8h_source.html#l00477">fid_is_norm()</a>, <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00255">fid_ver()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lustre__idl_8h_source.html#l03458">LE_LASTID_REBUILDING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01105">lfsck_layout_lastid_reload()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01022">lfsck_layout_seq_insert()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01006">lfsck_layout_seq_lookup()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00335">lfsck_layout::ll_objs_failed_phase1</a>, <a class="el" href="lfsck__layout_8c_source.html#l00062">lfsck_layout_seq::lls_dirty</a>, <a class="el" href="lfsck__layout_8c_source.html#l00059">lfsck_layout_seq::lls_lastid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00060">lfsck_layout_seq::lls_lastid_known</a>, <a class="el" href="lfsck__layout_8c_source.html#l00057">lfsck_layout_seq::lls_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00058">lfsck_layout_seq::lls_seq</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00548">OBD_FAIL_LFSCK_DELAY5</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a5f39fe5c102960ab0cb063752080b7fa"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_in_notify" ref="a5f39fe5c102960ab0cb063752080b7fa" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *lr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_in_notify </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05276">5276</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03467">LE_CONDITIONAL_DESTROY</a>, <a class="el" href="lustre__idl_8h_source.html#l03465">LE_FID_ACCESSED</a>, <a class="el" href="lustre__idl_8h_source.html#l03468">LE_PAIRS_VERIFY</a>, <a class="el" href="lustre__idl_8h_source.html#l03466">LE_PEER_EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00160">lfsck_layout_llst_find_and_del()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03789">lfsck_layout_slave_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03856">lfsck_layout_slave_repair_pfid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00148">LPF_BROADCAST</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00050">LPVS_INCONSISTENT</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00051">LPVS_INCONSISTENT_TOFIX</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00049">LPVS_INIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03444">lfsck_request::lr_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03445">lfsck_request::lr_fid2</a>, <a class="el" href="lustre__idl_8h_source.html#l03446">lfsck_request::lr_fid3</a>, <a class="el" href="lustre__idl_8h_source.html#l03443">lfsck_request::lr_flags2</a>, <a class="el" href="lustre__idl_8h_source.html#l03431">lfsck_request::lr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03441">lfsck_request::lr_param</a>, <a class="el" href="lustre__idl_8h_source.html#l03436">lfsck_request::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00103">LS_CO_STOPPED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00219">lfsck_stop::ls_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00218">lfsck_stop::ls_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00882">lfsck_thread_info::lti_stop</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

</div>
</div>
<a class="anchor" id="aa69e9d86e853b66ff953ecde830aca49"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_join" ref="aa69e9d86e853b66ff953ecde830aca49" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_start_param *lsp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_join </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *&nbsp;</td>
          <td class="paramname"> <em>lsp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05459">5459</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__layout_8c_source.html#l00110">lfsck_layout_llst_add()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00160">lfsck_layout_llst_find_and_del()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lfsck__layout_8c_source.html#l00090">lfsck_layout_slave_data::llsd_rbtree_valid</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00151">LPF_OST_ORPHAN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00211">lfsck_start::ls_flags</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00043">lfsck_start_param::lsp_index</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00044">lfsck_start_param::lsp_index_valid</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00042">lfsck_start_param::lsp_start</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00057">start</a>, and <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>.</p>

</div>
</div>
<a class="anchor" id="aa1e554d6f0bf397267fee18d3c00506e"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_notify_master" ref="aa1e554d6f0bf397267fee18d3c00506e" args="(const struct lu_env *env, struct lfsck_component *com, enum lfsck_events event, int result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_slave_notify_master </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#gab54acd8a5bcce94c5c2fa2a4c66ff110">lfsck_events</a>&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03628">3628</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03477">LEF_FROM_OST</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03525">lfsck_layout_async_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00143">lfsck_layout_llst_del()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00671">lfsck_instance::li_obd</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00086">lfsck_layout_slave_data::llsd_touch_gen</a>, <a class="el" href="lfsck__layout_8c_source.html#l00072">lfsck_layout_slave_target::llst_gen</a>, <a class="el" href="lfsck__layout_8c_source.html#l00074">lfsck_layout_slave_target::llst_index</a>, <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00073">lfsck_layout_slave_target::llst_ref</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03443">lfsck_request::lr_flags2</a>, <a class="el" href="lustre__idl_8h_source.html#l03431">lfsck_request::lr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03436">lfsck_request::lr_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="obd__mount__server_8c_source.html#l00476">lustre_find_lwp_by_index()</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04680">lfsck_layout_slave_post()</a>.</p>

</div>
</div>
<a class="anchor" id="aae7ae2692b3da059996a7f7f5a785050"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_post" ref="aae7ae2692b3da059996a7f7f5a785050" args="(const struct lu_env *env, struct lfsck_component *com, int result, bool init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_post </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>init</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04680">4680</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="parser_8c_source.html#l00044">done</a>, <a class="el" href="lfsck__internal_8h_source.html#l00050">HALF_SEC</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lustre__idl_8h_source.html#l03459">LE_LASTID_REBUILT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__internal_8h_source.html#l00055">LF_SCANNED_ONCE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00061">LF_UPGRADE</a>, <a class="el" href="lfsck__layout_8c_source.html#l01149">lfsck_layout_lastid_store()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00725">lfsck_instance::li_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00662">lfsck_instance::li_time_last_checkpoint</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00332">lfsck_layout::ll_objs_checked_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00325">lfsck_layout::ll_pos_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00307">lfsck_layout::ll_run_time_phase1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00319">lfsck_layout::ll_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>.</p>

</div>
</div>
<a class="anchor" id="a9fd6486bdf7cea023b53c1f65fb2d685"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_prep" ref="a9fd6486bdf7cea023b53c1f65fb2d685" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_start_param *lsp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_prep </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *&nbsp;</td>
          <td class="paramname"> <em>lsp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l04083">4083</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00537">lfsck_component::lc_pos_start</a>, <a class="el" href="lustre__idl_8h_source.html#l03458">LE_LASTID_REBUILDING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__layout_8c_source.html#l00110">lfsck_layout_llst_add()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04015">lfsck_layout_prep()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00551">lfsck_rbtree_setup()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00090">lfsck_layout_slave_data::llsd_rbtree_valid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00151">LPF_OST_ORPHAN</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00211">lfsck_start::ls_flags</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00043">lfsck_start_param::lsp_index</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00044">lfsck_start_param::lsp_index_valid</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00042">lfsck_start_param::lsp_start</a>, and <a class="el" href="rename__many_8c_source.html#l00057">start</a>.</p>

</div>
</div>
<a class="anchor" id="a31c2e5b75f1513045bf59543712007e3"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_query_master" ref="a31c2e5b75f1513045bf59543712007e3" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_query_master </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03555">3555</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03464">LE_QUERY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03487">lfsck_layout_async_query()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00143">lfsck_layout_llst_del()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00671">lfsck_instance::li_obd</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00086">lfsck_layout_slave_data::llsd_touch_gen</a>, <a class="el" href="lfsck__layout_8c_source.html#l00072">lfsck_layout_slave_target::llst_gen</a>, <a class="el" href="lfsck__layout_8c_source.html#l00074">lfsck_layout_slave_target::llst_index</a>, <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00073">lfsck_layout_slave_target::llst_ref</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="obd__mount__server_8c_source.html#l00476">lustre_find_lwp_by_index()</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, and <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e24e82c795db5aaa661bc7b5141c1ae"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_quit" ref="a2e24e82c795db5aaa661bc7b5141c1ae" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_layout_slave_quit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05129">5129</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00585">lfsck_rbtree_cleanup()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__layout_8c_source.html#l00061">lfsck_layout_seq::lls_lastid_obj</a>, <a class="el" href="lfsck__layout_8c_source.html#l00057">lfsck_layout_seq::lls_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00081">lfsck_layout_slave_data::llsd_seq_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00067">lfsck_layout_slave_target::llst_list</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05077">lfsck_layout_slave_data_release()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>.</p>

</div>
</div>
<a class="anchor" id="a056c41c8b54421b9ca081df0e88fa6a7"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_repair_pfid" ref="a056c41c8b54421b9ca081df0e88fa6a7" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_request *lr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_slave_repair_pfid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l03856">3856</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l01576">__lfsck_layout_update_pfid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lustre__idl_8h_source.html#l03444">lfsck_request::lr_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03445">lfsck_request::lr_fid2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="ae072b7db3878fc35702fc44385b73456"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_store" ref="ae072b7db3878fc35702fc44385b73456" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Store the layout LFSCK trace file on disk. </p>
<p>The layout LFSCK trace file records the layout LFSCK status information and other statistics, such as how many objects have been scanned, and how many objects have been repaired, and etc. It also contains the bitmap for failed OSTs during the layout LFSCK. All these information will be synced from RAM to disk periodically.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00883">883</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="bitmap_8h_source.html#l00041">cfs_bitmap::data</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00543">lfsck_component::lc_file_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00721">lfsck_layout_cpu_to_le()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00352">lfsck_layout::ll_bitmap_size</a>, <a class="el" href="bitmap_8h_source.html#l00040">cfs_bitmap::size</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01332">lfsck_layout_double_scan_result()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00957">lfsck_layout_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03944">lfsck_layout_master_checkpoint()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04625">lfsck_layout_master_post()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03981">lfsck_layout_slave_checkpoint()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l04680">lfsck_layout_slave_post()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2d84ba35aae3cff3b5b640dc65b2d8a"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_trans_stop" ref="ac2d84ba35aae3cff3b5b640dc65b2d8a" args="(const struct lu_env *env, struct dt_device *dev, struct thandle *handle, int result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_trans_stop </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01379">1379</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, and <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>.</p>

</div>
</div>
<a class="anchor" id="af7134cabf5d455b53a960419b1c8c049"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_update_pfid" ref="af7134cabf5d455b53a960419b1c8c049" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct lu_fid *cfid, struct dt_device *cdev, __u32 ea_off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_update_pfid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>cfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>cdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>ea_off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>did nothing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l01621">1621</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l01576">__lfsck_layout_update_pfid()</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>.</p>

</div>
</div>
<a class="anchor" id="a182398b9541ee8df2a3118d55cad25b9"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_verify_header" ref="a182398b9541ee8df2a3118d55cad25b9" args="(struct lov_mds_md_v1 *lmm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_layout_verify_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>lmm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00359">359</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01506">lov_mds_md_v1::lmm_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l01565">lmm_oi_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l01505">lov_mds_md_v1::lmm_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l01466">LOV_MAGIC_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l01467">LOV_MAGIC_MASK</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01492">lov_pattern</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, and <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>.</p>

</div>
</div>
<a class="anchor" id="a48bc31fcc6d5973954b343418a1619ad"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_index_declare_delete" ref="a48bc31fcc6d5973954b343418a1619ad" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_key *key, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_index_declare_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05802">5802</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a56b054fa14c81bdebdd951766a52b17c"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_index_declare_insert" ref="a56b054fa14c81bdebdd951766a52b17c" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_rec *rec, const struct dt_key *key, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_index_declare_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05783">5783</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4abdc808af3965e15bedca718153661e"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_index_delete" ref="a4abdc808af3965e15bedca718153661e" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_key *key, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_index_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05810">5810</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a59c42b48ad47af8ad070f5893bd8b17e"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_index_insert" ref="a59c42b48ad47af8ad070f5893bd8b17e" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_rec *rec, const struct dt_key *key, struct thandle *handle, int ignore_quota)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_index_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ignore_quota</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05792">5792</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab5f7c1df7ec208b2ca4a832b8fdd1c01"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_index_lookup" ref="ab5f7c1df7ec208b2ca4a832b8fdd1c01" args="(const struct lu_env *env, struct dt_object *dt, struct dt_rec *rec, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_index_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05775">5775</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa206a4535a5002da223189a9635adaf5"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_fini" ref="aa206a4535a5002da223189a9635adaf5" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_orphan_it_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05908">5908</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00100">lfsck_layout_llst_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00069">lfsck_layout_slave_target::llst_fid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00071">lfsck_layout_slave_target::llst_hash</a>, <a class="el" href="lfsck__layout_8c_source.html#l05687">lfsck_orphan_it::loi_com</a>, <a class="el" href="lfsck__layout_8c_source.html#l05692">lfsck_orphan_it::loi_hash</a>, <a class="el" href="lfsck__layout_8c_source.html#l05690">lfsck_orphan_it::loi_key</a>, <a class="el" href="lfsck__layout_8c_source.html#l05689">lfsck_orphan_it::loi_llst</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

</div>
</div>
<a class="anchor" id="a6bedff79145d724a405ad251d8348274"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_get" ref="a6bedff79145d724a405ad251d8348274" args="(const struct lu_env *env, struct dt_it *di, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_it_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>locate to the exactly position </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>cannot locate to the exactly position, call next() to move to a valid position. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06145">6145</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05690">lfsck_orphan_it::loi_key</a>.</p>

</div>
</div>
<a class="anchor" id="aaff0f182f17e08acb74c1793e58ff220"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_init" ref="aaff0f182f17e08acb74c1793e58ff220" args="(const struct lu_env *env, struct dt_object *dt, __u32 attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct dt_it* lfsck_orphan_it_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05818">5818</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l01732">dt_device::dd_record_fid_accessed</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__lib_8c_source.html#l00295">lfsck_component_find()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01712">lfsck_instance_find()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01389">lfsck_instance_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00160">lfsck_layout_llst_find_and_del()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00514">lfsck_rbtree_free()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00088">lfsck_layout_slave_data::llsd_rb_root</a>, <a class="el" href="lfsck__layout_8c_source.html#l00090">lfsck_layout_slave_data::llsd_rbtree_valid</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lfsck__layout_8c_source.html#l05687">lfsck_orphan_it::loi_com</a>, <a class="el" href="lfsck__layout_8c_source.html#l05689">lfsck_orphan_it::loi_llst</a>, <a class="el" href="lfsck__layout_8c_source.html#l00409">lfsck_rbtree_node::lrn_accessed_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00408">lfsck_rbtree_node::lrn_known_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00405">lfsck_rbtree_node::lrn_node</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="af0384319c601f0e4fdced43b51c6b36a"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_key" ref="af0384319c601f0e4fdced43b51c6b36a" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a>* lfsck_orphan_it_key </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06168">6168</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05690">lfsck_orphan_it::loi_key</a>.</p>

</div>
</div>
<a class="anchor" id="aadc35db25cb0fc81ea0b987124db37a3"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_key_rec" ref="aadc35db25cb0fc81ea0b987124db37a3" args="(const struct lu_env *env, const struct dt_it *di, void *key_rec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_it_key_rec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key_rec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06240">6240</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a59a5802103cc8cb90f0d3239942b32dd"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_key_size" ref="a59a5802103cc8cb90f0d3239942b32dd" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_it_key_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06176">6176</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa6dd4d4cba4f824777063e21186ecf79"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_load" ref="aa6dd4d4cba4f824777063e21186ecf79" args="(const struct lu_env *env, const struct dt_it *di, __u64 hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_it_load </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>hash</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>locate to the exactly position </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>cannot locate to the exactly position, call next() to move to a valid position. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06208">6208</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00069">lfsck_layout_slave_target::llst_fid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00071">lfsck_layout_slave_target::llst_hash</a>, <a class="el" href="lfsck__layout_8c_source.html#l05687">lfsck_orphan_it::loi_com</a>, <a class="el" href="lfsck__layout_8c_source.html#l05692">lfsck_orphan_it::loi_hash</a>, <a class="el" href="lfsck__layout_8c_source.html#l05690">lfsck_orphan_it::loi_key</a>, <a class="el" href="lfsck__layout_8c_source.html#l05689">lfsck_orphan_it::loi_llst</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>.</p>

</div>
</div>
<a class="anchor" id="ab91f9ae952b790f4d482715cdfa3f01c"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_next" ref="ab91f9ae952b790f4d482715cdfa3f01c" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_it_next </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+1,:</em>&nbsp;</td><td>the iteration finished </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0,:</em>&nbsp;</td><td>on success, not finished </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve,:</em>&nbsp;</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05939">5939</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__user_8h_source.html#l00172">filter_fid_old::ff_parent</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05696">lfsck_fid_match_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05734">lfsck_layout_destroy_orphan()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00401">LFSCK_RBTREE_BITMAP_WIDTH</a>, <a class="el" href="lfsck__layout_8c_source.html#l00434">lfsck_rbtree_search()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00074">lfsck_layout_slave_target::llst_index</a>, <a class="el" href="lfsck__layout_8c_source.html#l05687">lfsck_orphan_it::loi_com</a>, <a class="el" href="lfsck__layout_8c_source.html#l05692">lfsck_orphan_it::loi_hash</a>, <a class="el" href="lfsck__layout_8c_source.html#l05690">lfsck_orphan_it::loi_key</a>, <a class="el" href="lfsck__layout_8c_source.html#l05689">lfsck_orphan_it::loi_llst</a>, <a class="el" href="lfsck__layout_8c_source.html#l05688">lfsck_orphan_it::loi_lrn</a>, <a class="el" href="lfsck__layout_8c_source.html#l05693">lfsck_orphan_it::loi_over</a>, <a class="el" href="lfsck__layout_8c_source.html#l05691">lfsck_orphan_it::loi_rec</a>, <a class="el" href="lustre__idl_8h_source.html#l00847">lu_orphan_rec::lor_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00849">lu_orphan_rec::lor_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l00848">lu_orphan_rec::lor_uid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00411">lfsck_rbtree_node::lrn_accessed_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00409">lfsck_rbtree_node::lrn_accessed_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00407">lfsck_rbtree_node::lrn_first_oid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00410">lfsck_rbtree_node::lrn_known_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00408">lfsck_rbtree_node::lrn_known_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00405">lfsck_rbtree_node::lrn_node</a>, <a class="el" href="lfsck__layout_8c_source.html#l00406">lfsck_rbtree_node::lrn_seq</a>, <a class="el" href="lfsck__internal_8h_source.html#l00865">lfsck_thread_info::lti_la</a>, <a class="el" href="lfsck__internal_8h_source.html#l00887">lfsck_thread_info::lti_old_pfid</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l06145">lfsck_orphan_it_get()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l06208">lfsck_orphan_it_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a0799b7315148eeaac68f93e5ab4a7659"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_put" ref="a0799b7315148eeaac68f93e5ab4a7659" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_orphan_it_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06163">6163</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="abcecf4f9860004aae51fc038c5d57463"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_rec" ref="abcecf4f9860004aae51fc038c5d57463" args="(const struct lu_env *env, const struct dt_it *di, struct dt_rec *rec, __u32 attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_orphan_it_rec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06182">6182</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l05691">lfsck_orphan_it::loi_rec</a>.</p>

</div>
</div>
<a class="anchor" id="a5259362a183ed0e7f6f669880a49f553"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_it_store" ref="a5259362a183ed0e7f6f669880a49f553" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> lfsck_orphan_it_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06194">6194</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l05692">lfsck_orphan_it::loi_hash</a>.</p>

</div>
</div>
<a class="anchor" id="aca7d039d24742913e4cbc4354066b0fc"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_cleanup" ref="aca7d039d24742913e4cbc4354066b0fc" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_rbtree_cleanup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00585">585</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l01732">dt_device::dd_record_fid_accessed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00514">lfsck_rbtree_free()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00087">lfsck_layout_slave_data::llsd_rb_obj</a>, <a class="el" href="lfsck__layout_8c_source.html#l00088">lfsck_layout_slave_data::llsd_rb_root</a>, <a class="el" href="lfsck__layout_8c_source.html#l00090">lfsck_layout_slave_data::llsd_rbtree_valid</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00405">lfsck_rbtree_node::lrn_node</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05129">lfsck_layout_slave_quit()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a372825f6aba0580559c14294a9e221ad"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_cmp" ref="a372825f6aba0580559c14294a9e221ad" args="(struct lfsck_rbtree_node *lrn, __u64 seq, __u32 oid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_rbtree_cmp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *&nbsp;</td>
          <td class="paramname"> <em>lrn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>oid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00414">414</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l00401">LFSCK_RBTREE_BITMAP_WIDTH</a>, <a class="el" href="lfsck__layout_8c_source.html#l00407">lfsck_rbtree_node::lrn_first_oid</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00406">lfsck_rbtree_node::lrn_seq</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00523">lfsck_rbtree_insert()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00434">lfsck_rbtree_search()</a>.</p>

</div>
</div>
<a class="anchor" id="a0fe541c725beebfa54e370b425b4f8b1"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_free" ref="a0fe541c725beebfa54e370b425b4f8b1" args="(struct lfsck_rbtree_node *lrn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_rbtree_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *&nbsp;</td>
          <td class="paramname"> <em>lrn</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00514">514</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l00400">LFSCK_RBTREE_BITMAP_SIZE</a>, <a class="el" href="lfsck__layout_8c_source.html#l00411">lfsck_rbtree_node::lrn_accessed_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00410">lfsck_rbtree_node::lrn_known_bitmap</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00585">lfsck_rbtree_cleanup()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>.</p>

</div>
</div>
<a class="anchor" id="ae480f8ca83cc06cc79bfdef9ed33a280"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_insert" ref="ae480f8ca83cc06cc79bfdef9ed33a280" args="(struct lfsck_layout_slave_data *llsd, struct lfsck_rbtree_node *lrn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a>* lfsck_rbtree_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a> *&nbsp;</td>
          <td class="paramname"> <em>lrn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00523">523</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lfsck__layout_8c_source.html#l00414">lfsck_rbtree_cmp()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00088">lfsck_layout_slave_data::llsd_rb_root</a>, <a class="el" href="lfsck__layout_8c_source.html#l00407">lfsck_rbtree_node::lrn_first_oid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00405">lfsck_rbtree_node::lrn_node</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00406">lfsck_rbtree_node::lrn_seq</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>.</p>

</div>
</div>
<a class="anchor" id="afe07f3ce85da36a2213a59584f3f481f"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_new" ref="afe07f3ce85da36a2213a59584f3f481f" args="(const struct lu_env *env, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a>* lfsck_rbtree_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00481">481</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00402">LFSCK_RBTREE_BITMAP_MASK</a>, <a class="el" href="lfsck__layout_8c_source.html#l00400">LFSCK_RBTREE_BITMAP_SIZE</a>, <a class="el" href="lfsck__layout_8c_source.html#l00411">lfsck_rbtree_node::lrn_accessed_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00409">lfsck_rbtree_node::lrn_accessed_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00407">lfsck_rbtree_node::lrn_first_oid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00410">lfsck_rbtree_node::lrn_known_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00408">lfsck_rbtree_node::lrn_known_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00405">lfsck_rbtree_node::lrn_node</a>, <a class="el" href="lfsck__layout_8c_source.html#l00406">lfsck_rbtree_node::lrn_seq</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a780efe067d0f0f6846397069be992f81"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_search" ref="a780efe067d0f0f6846397069be992f81" args="(struct lfsck_layout_slave_data *llsd, const struct lu_fid *fid, bool *exact)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__rbtree__node.html">lfsck_rbtree_node</a>* lfsck_rbtree_search </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__layout__slave__data.html">lfsck_layout_slave_data</a> *&nbsp;</td>
          <td class="paramname"> <em>llsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>exact</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00434">434</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00414">lfsck_rbtree_cmp()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00088">lfsck_layout_slave_data::llsd_rb_root</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00405">lfsck_rbtree_node::lrn_node</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a15e3c5f398e15ddd9619981854b0751c"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_setup" ref="a15e3c5f398e15ddd9619981854b0751c" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_rbtree_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00551">551</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l01732">dt_device::dd_record_fid_accessed</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00306">FID_SEQ_LAYOUT_RBTREE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l06247">lfsck_orphan_index_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__layout_8c_source.html#l00087">lfsck_layout_slave_data::llsd_rb_obj</a>, <a class="el" href="lfsck__layout_8c_source.html#l00090">lfsck_layout_slave_data::llsd_rbtree_valid</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lu__object_8h_source.html#l00539">lu_object_header::loh_attr</a>, <a class="el" href="lu__object_8h_source.html#l00501">LOHA_EXISTS</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04083">lfsck_layout_slave_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="acfcf0d3987e3f94b82c1962458bd0f51"></a><!-- doxytag: member="lfsck_layout.c::lfsck_rbtree_update_bitmap" ref="acfcf0d3987e3f94b82c1962458bd0f51" args="(const struct lu_env *env, struct lfsck_component *com, const struct lu_fid *fid, bool accessed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_rbtree_update_bitmap </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>accessed</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l00617">617</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00462">fid_is_idif()</a>, <a class="el" href="lustre__idl_8h_source.html#l00725">fid_is_last_id()</a>, <a class="el" href="lustre__idl_8h_source.html#l00477">fid_is_norm()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="iam__ut_8c_source.html#l00137">insert()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00402">LFSCK_RBTREE_BITMAP_MASK</a>, <a class="el" href="lfsck__layout_8c_source.html#l00585">lfsck_rbtree_cleanup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00514">lfsck_rbtree_free()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00523">lfsck_rbtree_insert()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00481">lfsck_rbtree_new()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00434">lfsck_rbtree_search()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00090">lfsck_layout_slave_data::llsd_rbtree_valid</a>, <a class="el" href="lfsck__layout_8c_source.html#l00411">lfsck_rbtree_node::lrn_accessed_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00409">lfsck_rbtree_node::lrn_accessed_count</a>, <a class="el" href="lfsck__layout_8c_source.html#l00410">lfsck_rbtree_node::lrn_known_bitmap</a>, <a class="el" href="lfsck__layout_8c_source.html#l00408">lfsck_rbtree_node::lrn_known_count</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a967a81b21483b8c077fbc8e040106239"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_assistant_ops" ref="a967a81b21483b8c077fbc8e040106239" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__assistant__operations.html">lfsck_assistant_operations</a> <a class="el" href="lfsck__layout_8c.html#a967a81b21483b8c077fbc8e040106239">lfsck_layout_assistant_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .la_handler_p1          = <a class="code" href="lfsck__layout_8c.html#ae8afff3610eaa399023a91c8c19cea5b">lfsck_layout_assistant_handler_p1</a>,
        .la_handler_p2          = <a class="code" href="lfsck__layout_8c.html#a50fd2b033952164990a3ae6ee81b8947">lfsck_layout_assistant_handler_p2</a>,
        .la_fill_pos            = <a class="code" href="lfsck__layout_8c.html#a44284449155ffcf229a5a28fec268c80">lfsck_layout_assistant_fill_pos</a>,
        .la_double_scan_result  = <a class="code" href="lfsck__layout_8c.html#ae7793cc67e98f99e921c23a714945b6b">lfsck_layout_double_scan_result</a>,
        .la_req_fini            = <a class="code" href="lfsck__layout_8c.html#a036c5362c3567fc59968be54cb2b71be">lfsck_layout_assistant_req_fini</a>,
        .la_sync_failures       = <a class="code" href="lfsck__layout_8c.html#af2fb113b28f9280c00870dfb0dea16dd" title="Notify remote LFSCK instances about former failures.">lfsck_layout_assistant_sync_failures</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05547">5547</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="a37c9560e65f9b344789d588455c6e6fe"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_master_ops" ref="a37c9560e65f9b344789d588455c6e6fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__operations.html">lfsck_operations</a> <a class="el" href="lfsck__layout_8c.html#a37c9560e65f9b344789d588455c6e6fe">lfsck_layout_master_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .lfsck_reset            = <a class="code" href="lfsck__layout_8c.html#aa9a1cefa7a1f7b61e772a29684fe1542">lfsck_layout_reset</a>,
        .lfsck_fail             = <a class="code" href="lfsck__layout_8c.html#a7939b57b74b7d462498b4caaed38c4bb">lfsck_layout_fail</a>,
        .lfsck_checkpoint       = <a class="code" href="lfsck__layout_8c.html#a309273cc9597b6e19cec6a98f6ff5e7d">lfsck_layout_master_checkpoint</a>,
        .lfsck_prep             = <a class="code" href="lfsck__layout_8c.html#a40e5175988171f489829171a4a1ea7a8">lfsck_layout_master_prep</a>,
        .lfsck_exec_oit         = <a class="code" href="lfsck__layout_8c.html#a7c4c57e3d6572a43fbf275c1d36c856c">lfsck_layout_master_exec_oit</a>,
        .lfsck_exec_dir         = <a class="code" href="lfsck__layout_8c.html#a50d4e4a115c6670f94a1859b271e9cfa">lfsck_layout_exec_dir</a>,
        .lfsck_post             = <a class="code" href="lfsck__layout_8c.html#ac55883e73d8affc779b6679789ce69a6">lfsck_layout_master_post</a>,
        .lfsck_dump             = <a class="code" href="lfsck__layout_8c.html#affd318a0cad258fae6eb91f6bda3bd27">lfsck_layout_dump</a>,
        .lfsck_double_scan      = <a class="code" href="lfsck__layout_8c.html#adecbba0dd24addb1000f939bc0ebe768">lfsck_layout_master_double_scan</a>,
        .lfsck_data_release     = <a class="code" href="lfsck__layout_8c.html#a431ef8b29e16a50d8fd380811332ab3f">lfsck_layout_master_data_release</a>,
        .lfsck_quit             = <a class="code" href="lfsck__layout_8c.html#ad47054f1a5257990cf09f5b79cd6fe98">lfsck_layout_master_quit</a>,
        .lfsck_in_notify        = <a class="code" href="lfsck__layout_8c.html#a4eb94598fc81c48a762231274ff19f3b">lfsck_layout_master_in_notify</a>,
        .lfsck_query            = <a class="code" href="lfsck__layout_8c.html#a16bc6d6b9f5016c98be95bf46da930af">lfsck_layout_query</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05498">5498</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad0b12a7f3fe5e313811409457f41a8cd"></a><!-- doxytag: member="lfsck_layout.c::lfsck_layout_slave_ops" ref="ad0b12a7f3fe5e313811409457f41a8cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__operations.html">lfsck_operations</a> <a class="el" href="lfsck__layout_8c.html#ad0b12a7f3fe5e313811409457f41a8cd">lfsck_layout_slave_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .lfsck_reset            = <a class="code" href="lfsck__layout_8c.html#aa9a1cefa7a1f7b61e772a29684fe1542">lfsck_layout_reset</a>,
        .lfsck_fail             = <a class="code" href="lfsck__layout_8c.html#a7939b57b74b7d462498b4caaed38c4bb">lfsck_layout_fail</a>,
        .lfsck_checkpoint       = <a class="code" href="lfsck__layout_8c.html#abe8aba8e163d3f53f3539b0ab68cafa1">lfsck_layout_slave_checkpoint</a>,
        .lfsck_prep             = <a class="code" href="lfsck__layout_8c.html#a9fd6486bdf7cea023b53c1f65fb2d685">lfsck_layout_slave_prep</a>,
        .lfsck_exec_oit         = <a class="code" href="lfsck__layout_8c.html#a352c16e58928c492775f3258b50fc202">lfsck_layout_slave_exec_oit</a>,
        .lfsck_exec_dir         = <a class="code" href="lfsck__layout_8c.html#a50d4e4a115c6670f94a1859b271e9cfa">lfsck_layout_exec_dir</a>,
        .lfsck_post             = <a class="code" href="lfsck__layout_8c.html#aae7ae2692b3da059996a7f7f5a785050">lfsck_layout_slave_post</a>,
        .lfsck_dump             = <a class="code" href="lfsck__layout_8c.html#affd318a0cad258fae6eb91f6bda3bd27">lfsck_layout_dump</a>,
        .lfsck_double_scan      = <a class="code" href="lfsck__layout_8c.html#a9d115d7049ea42ae13c61834185a4870">lfsck_layout_slave_double_scan</a>,
        .lfsck_data_release     = <a class="code" href="lfsck__layout_8c.html#a8fd2a1bd3ebbffb3368bb8ae78b831a3">lfsck_layout_slave_data_release</a>,
        .lfsck_quit             = <a class="code" href="lfsck__layout_8c.html#a2e24e82c795db5aaa661bc7b5141c1ae">lfsck_layout_slave_quit</a>,
        .lfsck_in_notify        = <a class="code" href="lfsck__layout_8c.html#a5f39fe5c102960ab0cb063752080b7fa">lfsck_layout_slave_in_notify</a>,
        .lfsck_query            = <a class="code" href="lfsck__layout_8c.html#a16bc6d6b9f5016c98be95bf46da930af">lfsck_layout_query</a>,
        .lfsck_join             = <a class="code" href="lfsck__layout_8c.html#aa69e9d86e853b66ff953ecde830aca49">lfsck_layout_slave_join</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05514">5514</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

</div>
</div>
<a class="anchor" id="aae47cab3c4516f426a25e521fefe27b4"></a><!-- doxytag: member="lfsck_layout.c::lfsck_orphan_index_ops" ref="aae47cab3c4516f426a25e521fefe27b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__index__operations.html">dt_index_operations</a> <a class="el" href="lfsck__layout_8c.html#aae47cab3c4516f426a25e521fefe27b4">lfsck_orphan_index_ops</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .dio_lookup             = <a class="code" href="lfsck__layout_8c.html#ab5f7c1df7ec208b2ca4a832b8fdd1c01">lfsck_orphan_index_lookup</a>,
        .dio_declare_insert     = <a class="code" href="lfsck__layout_8c.html#a56b054fa14c81bdebdd951766a52b17c">lfsck_orphan_index_declare_insert</a>,
        .dio_insert             = <a class="code" href="lfsck__layout_8c.html#a59c42b48ad47af8ad070f5893bd8b17e">lfsck_orphan_index_insert</a>,
        .dio_declare_delete     = <a class="code" href="lfsck__layout_8c.html#a48bc31fcc6d5973954b343418a1619ad">lfsck_orphan_index_declare_delete</a>,
        .dio_delete             = <a class="code" href="lfsck__layout_8c.html#a4abdc808af3965e15bedca718153661e">lfsck_orphan_index_delete</a>,
        .dio_it = {
                .init           = <a class="code" href="lfsck__layout_8c.html#aaff0f182f17e08acb74c1793e58ff220">lfsck_orphan_it_init</a>,
                .fini           = <a class="code" href="lfsck__layout_8c.html#aa206a4535a5002da223189a9635adaf5">lfsck_orphan_it_fini</a>,
                .get            = <a class="code" href="lfsck__layout_8c.html#a6bedff79145d724a405ad251d8348274">lfsck_orphan_it_get</a>,
                .put            = <a class="code" href="lfsck__layout_8c.html#a0799b7315148eeaac68f93e5ab4a7659">lfsck_orphan_it_put</a>,
                .next           = <a class="code" href="lfsck__layout_8c.html#ab91f9ae952b790f4d482715cdfa3f01c">lfsck_orphan_it_next</a>,
                .key            = <a class="code" href="lfsck__layout_8c.html#af0384319c601f0e4fdced43b51c6b36a">lfsck_orphan_it_key</a>,
                .key_size       = <a class="code" href="lfsck__layout_8c.html#a59a5802103cc8cb90f0d3239942b32dd">lfsck_orphan_it_key_size</a>,
                .rec            = <a class="code" href="lfsck__layout_8c.html#abcecf4f9860004aae51fc038c5d57463">lfsck_orphan_it_rec</a>,
                .store          = <a class="code" href="lfsck__layout_8c.html#a5259362a183ed0e7f6f669880a49f553">lfsck_orphan_it_store</a>,
                .load           = <a class="code" href="lfsck__layout_8c.html#aa6dd4d4cba4f824777063e21186ecf79">lfsck_orphan_it_load</a>,
                .key_rec        = <a class="code" href="lfsck__layout_8c.html#aadc35db25cb0fc81ea0b987124db37a3">lfsck_orphan_it_key_rec</a>,
        }
}
</pre></div>
<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l06247">6247</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00551">lfsck_rbtree_setup()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
