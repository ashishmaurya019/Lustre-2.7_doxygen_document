<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: Match entries</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Match entries<br/>
<small>
[<a class="el" href="group__lnet.html">LNet</a>]</small>
</h1>
<p>A match entry (abbreviated as ME) describes a set of criteria to accept incoming requests.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a> { <a class="el" href="group__lnet__me.html#ggac82673f6f990f95b569ecc7fa9c738b9aee455721bbb7365b97168bc56834c37b">LNET_RETAIN</a> =  0, 
<a class="el" href="group__lnet__me.html#ggac82673f6f990f95b569ecc7fa9c738b9aa974f4ea2ab02351be44de1e678ddaad">LNET_UNLINK</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Specifies whether the match entry or memory descriptor should be unlinked automatically (LNET_UNLINK) or not (LNET_RETAIN). </p>
 <a href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">lnet_ins_pos_t</a> { <a class="el" href="group__lnet__me.html#gga292319c5a5ed0c5718ce4edfd3aa1fb4a34aed27703f17b6eb2f3e1a1a3b7cf69">LNET_INS_BEFORE</a>, 
<a class="el" href="group__lnet__me.html#gga292319c5a5ed0c5718ce4edfd3aa1fb4a9c92e271885b81271fa1467f486dcd07">LNET_INS_AFTER</a>, 
<a class="el" href="group__lnet__me.html#gga292319c5a5ed0c5718ce4edfd3aa1fb4a528b8efb44f170eafe836b2ba25ec437">LNET_INS_LOCAL</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Values of the type lnet_ins_pos_t are used to control where a new match entry is inserted. </p>
 <a href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__me.html#ga581025ed43fdf21741691e82253b1b50">LNetMEAttach</a> (unsigned int portal, <a class="el" href="structlnet__process__id__t.html">lnet_process_id_t</a> match_id_in, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> match_bits_in, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ignore_bits_in, <a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a> unlink_in, <a class="el" href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">lnet_ins_pos_t</a> pos_in, <a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> *handle_out)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and attach a match entry to the match list of <em>portal</em>.  <a href="#ga581025ed43fdf21741691e82253b1b50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__me.html#ga780c62e0a297e96b11aaaca7efae1db7">LNetMEInsert</a> (<a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> current_in, <a class="el" href="structlnet__process__id__t.html">lnet_process_id_t</a> match_id_in, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> match_bits_in, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ignore_bits_in, <a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a> unlink_in, <a class="el" href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">lnet_ins_pos_t</a> position_in, <a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> *handle_out)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and a match entry and insert it before or after the ME pointed to by <em>current_meh</em>.  <a href="#ga780c62e0a297e96b11aaaca7efae1db7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lnet__me.html#gad38e0c2462a6e9a1735783c853345422">LNetMEUnlink</a> (<a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> current_in)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlink a match entry from its match list.  <a href="#gad38e0c2462a6e9a1735783c853345422"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A match entry (abbreviated as ME) describes a set of criteria to accept incoming requests. </p>
<p>A portal is essentially a match list plus a set of attributes. A match list is a chain of MEs. Each ME includes a pointer to a memory descriptor and a set of match criteria. The match criteria can be used to reject incoming requests based on process ID or the match bits provided in the request. MEs can be dynamically inserted into a match list by <a class="el" href="group__lnet__me.html#ga581025ed43fdf21741691e82253b1b50" title="Create and attach a match entry to the match list of portal.">LNetMEAttach()</a> and <a class="el" href="group__lnet__me.html#ga780c62e0a297e96b11aaaca7efae1db7" title="Create and a match entry and insert it before or after the ME pointed to by current_meh...">LNetMEInsert()</a>, and removed from its list by <a class="el" href="group__lnet__me.html#gad38e0c2462a6e9a1735783c853345422" title="Unlink a match entry from its match list.">LNetMEUnlink()</a>. </p>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga292319c5a5ed0c5718ce4edfd3aa1fb4"></a><!-- doxytag: member="types.h::lnet_ins_pos_t" ref="ga292319c5a5ed0c5718ce4edfd3aa1fb4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">lnet_ins_pos_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Values of the type lnet_ins_pos_t are used to control where a new match entry is inserted. </p>
<p>The value LNET_INS_BEFORE is used to insert the new entry before the current entry or before the head of the list. The value LNET_INS_AFTER is used to insert the new entry after the current entry or after the last item in the list. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga292319c5a5ed0c5718ce4edfd3aa1fb4a34aed27703f17b6eb2f3e1a1a3b7cf69"></a><!-- doxytag: member="LNET_INS_BEFORE" ref="gga292319c5a5ed0c5718ce4edfd3aa1fb4a34aed27703f17b6eb2f3e1a1a3b7cf69" args="" -->LNET_INS_BEFORE</em>&nbsp;</td><td>
<p>insert ME before current position or head of the list </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga292319c5a5ed0c5718ce4edfd3aa1fb4a9c92e271885b81271fa1467f486dcd07"></a><!-- doxytag: member="LNET_INS_AFTER" ref="gga292319c5a5ed0c5718ce4edfd3aa1fb4a9c92e271885b81271fa1467f486dcd07" args="" -->LNET_INS_AFTER</em>&nbsp;</td><td>
<p>insert ME after current position or tail of the list </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga292319c5a5ed0c5718ce4edfd3aa1fb4a528b8efb44f170eafe836b2ba25ec437"></a><!-- doxytag: member="LNET_INS_LOCAL" ref="gga292319c5a5ed0c5718ce4edfd3aa1fb4a528b8efb44f170eafe836b2ba25ec437" args="" -->LNET_INS_LOCAL</em>&nbsp;</td><td>
<p>attach ME at tail of local CPU partition ME list </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00329">329</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac82673f6f990f95b569ecc7fa9c738b9"></a><!-- doxytag: member="types.h::lnet_unlink_t" ref="gac82673f6f990f95b569ecc7fa9c738b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies whether the match entry or memory descriptor should be unlinked automatically (LNET_UNLINK) or not (LNET_RETAIN). </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggac82673f6f990f95b569ecc7fa9c738b9aee455721bbb7365b97168bc56834c37b"></a><!-- doxytag: member="LNET_RETAIN" ref="ggac82673f6f990f95b569ecc7fa9c738b9aee455721bbb7365b97168bc56834c37b" args="" -->LNET_RETAIN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggac82673f6f990f95b569ecc7fa9c738b9aa974f4ea2ab02351be44de1e678ddaad"></a><!-- doxytag: member="LNET_UNLINK" ref="ggac82673f6f990f95b569ecc7fa9c738b9aa974f4ea2ab02351be44de1e678ddaad" args="" -->LNET_UNLINK</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00317">317</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga581025ed43fdf21741691e82253b1b50"></a><!-- doxytag: member="api.h::LNetMEAttach" ref="ga581025ed43fdf21741691e82253b1b50" args="(unsigned int portal, lnet_process_id_t match_id_in, __u64 match_bits_in, __u64 ignore_bits_in, lnet_unlink_t unlink_in, lnet_ins_pos_t pos_in, lnet_handle_me_t *handle_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LNetMEAttach </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>portal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__process__id__t.html">lnet_process_id_t</a>&nbsp;</td>
          <td class="paramname"> <em>match_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>match_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ignore_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a>&nbsp;</td>
          <td class="paramname"> <em>unlink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">lnet_ins_pos_t</a>&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and attach a match entry to the match list of <em>portal</em>. </p>
<p>The new ME is empty, i.e. not associated with a memory descriptor. <a class="el" href="group__lnet__md.html#ga958972d35fc04d0716f4f6b71cd804fc" title="Create a memory descriptor and attach it to a ME.">LNetMDAttach()</a> can be used to attach a MD to an empty ME.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>portal</em>&nbsp;</td><td>The portal table index where the ME should be attached. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match_id</em>&nbsp;</td><td>Specifies the match criteria for the process ID of the requester. The constants LNET_PID_ANY and LNET_NID_ANY can be used to wildcard either of the identifiers in the <a class="el" href="structlnet__process__id__t.html" title="Global process ID.">lnet_process_id_t</a> structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match_bits,ignore_bits</em>&nbsp;</td><td>Specify the match criteria to apply to the match bits in the incoming request. The ignore bits are used to mask out insignificant bits in the incoming match bits. The resulting bits are then compared to the ME's match bits to determine if the incoming request meets the match criteria. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>unlink</em>&nbsp;</td><td>Indicates whether the ME should be unlinked when the memory descriptor associated with it is unlinked (Note that the check for unlinking a ME only occurs when the memory descriptor is unlinked.). Valid values are LNET_RETAIN and LNET_UNLINK. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>Indicates whether the new ME should be prepended or appended to the match list. Allowed constants: LNET_INS_BEFORE, LNET_INS_AFTER. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>On successful returns, a handle to the newly created ME object is saved here. This handle can be used later in <a class="el" href="group__lnet__me.html#ga780c62e0a297e96b11aaaca7efae1db7" title="Create and a match entry and insert it before or after the ME pointed to by current_meh...">LNetMEInsert()</a>, <a class="el" href="group__lnet__me.html#gad38e0c2462a6e9a1735783c853345422" title="Unlink a match entry from its match list.">LNetMEUnlink()</a>, or <a class="el" href="group__lnet__md.html#ga958972d35fc04d0716f4f6b71cd804fc" title="Create a memory descriptor and attach it to a ME.">LNetMDAttach()</a> functions.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>On success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>If <em>portal</em> is invalid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>If new ME object cannot be allocated. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lib-me_8c_source.html#l00076">76</a> of file <a class="el" href="lib-me_8c_source.html">lib-me.c</a>.</p>

<p>References <a class="el" href="writemany_8c_source.html#l00074">head</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lib-types_8h_source.html#l00582">lnet_t::ln_me_containers</a>, <a class="el" href="lib-types_8h_source.html#l00578">lnet_t::ln_nportals</a>, <a class="el" href="lib-types_8h_source.html#l00642">lnet_t::ln_refcount</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00333">LNET_INS_AFTER</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00335">LNET_INS_LOCAL</a>, <a class="el" href="lib-lnet_8h_source.html#l00352">lnet_me2handle()</a>, <a class="el" href="lib-lnet_8h_source.html#l00242">lnet_me_alloc()</a>, <a class="el" href="lib-types_8h_source.html#l00488">LNET_MT_HASH_IGNORE</a>, <a class="el" href="lib-ptl_8c_source.html#l00358">lnet_mt_match_head()</a>, <a class="el" href="lib-ptl_8c_source.html#l00229">lnet_mt_of_attach()</a>, <a class="el" href="api-ni_8c_source.html#l00529">lnet_res_lh_initialize()</a>, <a class="el" href="lib-lnet_8h_source.html#l00132">lnet_res_lock()</a>, <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>, <a class="el" href="lib-types_8h_source.html#l00151">me_ignore_bits</a>, <a class="el" href="lib-types_8h_source.html#l00146">me_lh</a>, <a class="el" href="lib-types_8h_source.html#l00145">me_list</a>, <a class="el" href="lib-types_8h_source.html#l00150">me_match_bits</a>, <a class="el" href="lib-types_8h_source.html#l00147">me_match_id</a>, <a class="el" href="lib-types_8h_source.html#l00153">me_md</a>, <a class="el" href="lib-types_8h_source.html#l00148">me_portal</a>, <a class="el" href="lib-types_8h_source.html#l00149">me_pos</a>, <a class="el" href="lib-types_8h_source.html#l00152">me_unlink</a>, <a class="el" href="lib-types_8h_source.html#l00499">lnet_match_table::mt_cpt</a>, <a class="el" href="lib-types_8h_source.html#l00506">lnet_match_table::mt_mhash</a>, and <a class="el" href="api-ni_8c_source.html#l00043">the_lnet</a>.</p>

<p>Referenced by <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>, and <a class="el" href="rpc_8c_source.html#l00354">srpc_post_passive_rdma()</a>.</p>

</div>
</div>
<a class="anchor" id="ga780c62e0a297e96b11aaaca7efae1db7"></a><!-- doxytag: member="api.h::LNetMEInsert" ref="ga780c62e0a297e96b11aaaca7efae1db7" args="(lnet_handle_me_t current_in, lnet_process_id_t match_id_in, __u64 match_bits_in, __u64 ignore_bits_in, lnet_unlink_t unlink_in, lnet_ins_pos_t position_in, lnet_handle_me_t *handle_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LNetMEInsert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a>&nbsp;</td>
          <td class="paramname"> <em>current_meh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__process__id__t.html">lnet_process_id_t</a>&nbsp;</td>
          <td class="paramname"> <em>match_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>match_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ignore_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__me.html#gac82673f6f990f95b569ecc7fa9c738b9">lnet_unlink_t</a>&nbsp;</td>
          <td class="paramname"> <em>unlink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__me.html#ga292319c5a5ed0c5718ce4edfd3aa1fb4">lnet_ins_pos_t</a>&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and a match entry and insert it before or after the ME pointed to by <em>current_meh</em>. </p>
<p>The new ME is empty, i.e. not associated with a memory descriptor. <a class="el" href="group__lnet__md.html#ga958972d35fc04d0716f4f6b71cd804fc" title="Create a memory descriptor and attach it to a ME.">LNetMDAttach()</a> can be used to attach a MD to an empty ME.</p>
<p>This function is identical to <a class="el" href="group__lnet__me.html#ga581025ed43fdf21741691e82253b1b50" title="Create and attach a match entry to the match list of portal.">LNetMEAttach()</a> except for the position where the new ME is inserted.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>current_meh</em>&nbsp;</td><td>A handle for a ME. The new ME will be inserted immediately before or immediately after this ME. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match_id,match_bits,ignore_bits,unlink,pos,handle</em>&nbsp;</td><td>See the discussion for <a class="el" href="group__lnet__me.html#ga581025ed43fdf21741691e82253b1b50" title="Create and attach a match entry to the match list of portal.">LNetMEAttach()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>On success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>If new ME object cannot be allocated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>If <em>current_meh</em> does not point to a valid match entry. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lib-me_8c_source.html#l00147">147</a> of file <a class="el" href="lib-me_8c_source.html">lib-me.c</a>.</p>

<p>References <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00262">lnet_handle_any_t::cookie</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lib-types_8h_source.html#l00582">lnet_t::ln_me_containers</a>, <a class="el" href="lib-types_8h_source.html#l00578">lnet_t::ln_nportals</a>, <a class="el" href="lib-types_8h_source.html#l00580">lnet_t::ln_portals</a>, <a class="el" href="lib-types_8h_source.html#l00642">lnet_t::ln_refcount</a>, <a class="el" href="lib-lnet_8h_source.html#l00122">lnet_cpt_of_cookie()</a>, <a class="el" href="lib-lnet_8h_source.html#l00358">lnet_handle2me()</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00333">LNET_INS_AFTER</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00335">LNET_INS_LOCAL</a>, <a class="el" href="lib-lnet_8h_source.html#l00352">lnet_me2handle()</a>, <a class="el" href="lib-lnet_8h_source.html#l00242">lnet_me_alloc()</a>, <a class="el" href="lib-lnet_8h_source.html#l00251">lnet_me_free()</a>, <a class="el" href="lib-lnet_8h_source.html#l00533">lnet_ptl_is_unique()</a>, <a class="el" href="api-ni_8c_source.html#l00529">lnet_res_lh_initialize()</a>, <a class="el" href="lib-lnet_8h_source.html#l00132">lnet_res_lock()</a>, <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>, <a class="el" href="lib-types_8h_source.html#l00151">me_ignore_bits</a>, <a class="el" href="lib-types_8h_source.html#l00146">me_lh</a>, <a class="el" href="lib-types_8h_source.html#l00145">me_list</a>, <a class="el" href="lib-types_8h_source.html#l00150">me_match_bits</a>, <a class="el" href="lib-types_8h_source.html#l00147">me_match_id</a>, <a class="el" href="lib-types_8h_source.html#l00153">me_md</a>, <a class="el" href="lib-types_8h_source.html#l00148">me_portal</a>, <a class="el" href="lib-types_8h_source.html#l00149">me_pos</a>, <a class="el" href="lib-types_8h_source.html#l00152">me_unlink</a>, and <a class="el" href="api-ni_8c_source.html#l00043">the_lnet</a>.</p>

</div>
</div>
<a class="anchor" id="gad38e0c2462a6e9a1735783c853345422"></a><!-- doxytag: member="api.h::LNetMEUnlink" ref="gad38e0c2462a6e9a1735783c853345422" args="(lnet_handle_me_t current_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LNetMEUnlink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_me_t</a>&nbsp;</td>
          <td class="paramname"> <em>meh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlink a match entry from its match list. </p>
<p>This operation also releases any resources associated with the ME. If a memory descriptor is attached to the ME, then it will be unlinked as well and an unlink event will be generated. It is an error to use the ME handle after calling <a class="el" href="group__lnet__me.html#gad38e0c2462a6e9a1735783c853345422" title="Unlink a match entry from its match list.">LNetMEUnlink()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>meh</em>&nbsp;</td><td>A handle for the ME to be unlinked.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>On success. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>If <em>meh</em> does not point to a valid ME. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__lnet__md.html#ga2a0ce03253bcaae1e35be920f6029ca9" title="Unlink the memory descriptor from any ME it may be linked to and release the internal...">LNetMDUnlink()</a> for the discussion on delivering unlink event. </dd></dl>

<p>Definition at line <a class="el" href="lib-me_8c_source.html#l00227">227</a> of file <a class="el" href="lib-me_8c_source.html">lib-me.c</a>.</p>

<p>References <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00262">lnet_handle_any_t::cookie</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lib-types_8h_source.html#l00642">lnet_t::ln_refcount</a>, <a class="el" href="lib-msg_8c_source.html#l00046">lnet_build_unlink_event()</a>, <a class="el" href="lib-lnet_8h_source.html#l00122">lnet_cpt_of_cookie()</a>, <a class="el" href="lib-eq_8c_source.html#l00212">lnet_eq_enqueue_event()</a>, <a class="el" href="lib-lnet_8h_source.html#l00358">lnet_handle2me()</a>, <a class="el" href="lib-types_8h_source.html#l00179">LNET_MD_FLAG_ABORTED</a>, <a class="el" href="lib-me_8c_source.html#l00263">lnet_me_unlink()</a>, <a class="el" href="lib-lnet_8h_source.html#l00132">lnet_res_lock()</a>, <a class="el" href="lib-lnet_8h_source.html#l00138">lnet_res_unlock()</a>, <a class="el" href="lib-types_8h_source.html#l00169">lnet_libmd::md_eq</a>, <a class="el" href="lib-types_8h_source.html#l00167">lnet_libmd::md_flags</a>, <a class="el" href="lib-types_8h_source.html#l00165">lnet_libmd::md_refcount</a>, <a class="el" href="lib-types_8h_source.html#l00153">me_md</a>, and <a class="el" href="api-ni_8c_source.html#l00043">the_lnet</a>.</p>

<p>Referenced by <a class="el" href="api-ni_8c_source.html#l00915">lnet_ping_info_setup()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>, and <a class="el" href="rpc_8c_source.html#l00354">srpc_post_passive_rdma()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
