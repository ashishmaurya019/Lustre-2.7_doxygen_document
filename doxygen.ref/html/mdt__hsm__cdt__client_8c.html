<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdt/mdt_hsm_cdt_client.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdt/mdt_hsm_cdt_client.c File Reference</h1><code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__export_8h_source.html">lustre_export.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lprocfs__status_8h_source.html">lprocfs_status.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>&quot;</code><br/>

<p><a href="mdt__hsm__cdt__client_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhsm__compat__data__cb.html">hsm_compat_data_cb</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data passed to <a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback to find compatible requests  <a href="structhsm__compat__data__cb.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#af478ff9a96bf0a74fa532eacf6e2ea45">hsm_find_compatible_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *llh, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *hdr, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to find record compatibles with a new <a class="el" href="structhsm__action__list.html">hsm_action_list</a>  <a href="#af478ff9a96bf0a74fa532eacf6e2ea45"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#ad61f8e75c7819fa91c521dd343dfce12">hsm_find_compatible</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find compatible requests already recorded  <a href="#ad61f8e75c7819fa91c521dd343dfce12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#a522e47f42d391eed21582dc5658ef568">hsm_action_is_needed</a> (struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai, int hal_an, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> rq_flags, struct <a class="el" href="structmd__hsm.html">md_hsm</a> *hsm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if an action is really needed  <a href="#a522e47f42d391eed21582dc5658ef568"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#a3e0dce28d217085e037b3ad3f69d4bb8">hal_is_sane</a> (struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">test sanity of an hal FID must be valid action must be known  <a href="#a3e0dce28d217085e037b3ad3f69d4bb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#ad90c752f8e5be773d9ae01b39f6784e7">hsm_action_permission</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structmdt__object.html">mdt_object</a> *obj, enum <a class="el" href="group__lustreuser.html#ga8f11bf6f2778549a17dc5999701f3c0c">hsm_copytool_action</a> hsma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#aa5693fec600e8a5636305e8a982c2c1e">mdt_hsm_add_actions</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *compound_id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a list of requests  <a href="#aa5693fec600e8a5636305e8a982c2c1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#a7183fd9b07713d8f78871fcb96fd715f">mdt_hsm_get_running</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get running action on a FID list or from cookie  <a href="#a7183fd9b07713d8f78871fcb96fd715f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#a07bbd4dccfe6bf02dffa18e7d81bef3d">mdt_hsm_restore_is_running</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if a restore is running on a FID this is redundant with mdt_hsm_coordinator_get_running() but as it can be called frequently when getting attr we make an optimized/simpler version only for a FID  <a href="#a07bbd4dccfe6bf02dffa18e7d81bef3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__client_8c.html#a8754bc2c9de3b102e98e535662c3905c">mdt_hsm_get_actions</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get registered action on a FID list  <a href="#a8754bc2c9de3b102e98e535662c3905c"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00037">37</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3e0dce28d217085e037b3ad3f69d4bb8"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::hal_is_sane" ref="a3e0dce28d217085e037b3ad3f69d4bb8" args="(struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool hal_is_sane </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>test sanity of an hal FID must be valid action must be known </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00221">221</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="a522e47f42d391eed21582dc5658ef568"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::hsm_action_is_needed" ref="a522e47f42d391eed21582dc5658ef568" args="(struct hsm_action_item *hai, int hal_an, __u64 rq_flags, struct md_hsm *hsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool hsm_action_is_needed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>hal_an</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>rq_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>hsm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check if an action is really needed </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] request description </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal_an</em>&nbsp;</td><td>[IN] request archive number (not used) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rq_flags</em>&nbsp;</td><td>[IN] request flags </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hsm</em>&nbsp;</td><td>[IN] file HSM metadata </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00171">171</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01048">HS_ARCHIVED</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01154">HSM_FORCE_ACTION</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="ad90c752f8e5be773d9ae01b39f6784e7"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::hsm_action_permission" ref="ad90c752f8e5be773d9ae01b39f6784e7" args="(struct mdt_thread_info *mti, struct mdt_object *obj, enum hsm_copytool_action hsma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_action_permission </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreuser.html#ga8f11bf6f2778549a17dc5999701f3c0c">hsm_copytool_action</a>&nbsp;</td>
          <td class="paramname"> <em>hsma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00249">249</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="mdt__internal_8h_source.html#l00149">coordinator::cdt_group_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00150">coordinator::cdt_other_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00148">coordinator::cdt_user_request_mask</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="idmap_8c_source.html#l00144">lustre_in_group_p()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00618">md_capable()</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l01179">OBD_CONNECT_RDONLY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="md__object_8h_source.html#l00591">lu_ucred::uc_fsuid</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="ad61f8e75c7819fa91c521dd343dfce12"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::hsm_find_compatible" ref="ad61f8e75c7819fa91c521dd343dfce12" args="(const struct lu_env *env, struct mdt_device *mdt, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_find_compatible </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find compatible requests already recorded </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] MDT device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN/OUT] new request cookie set to compatible found or to 0 if not found for cancel request, see callback <a class="el" href="mdt__hsm__cdt__client_8c.html#af478ff9a96bf0a74fa532eacf6e2ea45" title="llog_cat_process() callback, used to find record compatibles with a new hsm_action_list...">hsm_find_compatible_cb()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">130</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00052">hsm_compat_data_cb::cdt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00053">hsm_compat_data_cb::hal</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00066">hsm_find_compatible_cb()</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, and <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="af478ff9a96bf0a74fa532eacf6e2ea45"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::hsm_find_compatible_cb" ref="af478ff9a96bf0a74fa532eacf6e2ea45" args="(const struct lu_env *env, struct llog_handle *llh, struct llog_rec_hdr *hdr, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_find_compatible_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to find record compatibles with a new <a class="el" href="structhsm__action__list.html">hsm_action_list</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>llh</em>&nbsp;</td><td>[IN] llog handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>[IN] llog record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN] cb data = <a class="el" href="structhsm__compat__data__cb.html" title="data passed to llog_cat_process() callback to find compatible requests">hsm_compat_data_cb</a> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00066">66</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03225">ARS_STARTED</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00053">hsm_compat_data_cb::hal</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5693fec600e8a5636305e8a982c2c1e"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::mdt_hsm_add_actions" ref="aa5693fec600e8a5636305e8a982c2c1e" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal, __u64 *compound_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_add_actions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>compound_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>register a list of requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN] list of requests </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>compound_id</em>&nbsp;</td><td>[OUT] id of the compound request </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure in case of restore, caller must hold layout lock </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">298</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="mdt__internal_8h_source.html#l00119">coordinator::cdt_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00134">coordinator::cdt_default_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00086">CDT_NONBLOCKING_RESTORE</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="mdt__internal_8h_source.html#l00488">cdt_restore_handle::crh_extent</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00221">hal_is_sane()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00171">hsm_action_is_needed()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00249">hsm_action_permission()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="md__object_8h_source.html#l00618">md_capable()</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00124">mdt_agent_record_add()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00774">mdt_hsm_cdt_wakeup()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01648">mdt_hsm_is_action_compat()</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="md__object_8h_source.html#l00111">md_hsm::mh_arch_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00845">OBD_SLAB_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a8754bc2c9de3b102e98e535662c3905c"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::mdt_hsm_get_actions" ref="a8754bc2c9de3b102e98e535662c3905c" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_get_actions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get registered action on a FID list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN/OUT] requests </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">549</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00098">mdt_cdt_get_work_done()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>.</p>

</div>
</div>
<a class="anchor" id="a7183fd9b07713d8f78871fcb96fd715f"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::mdt_hsm_get_running" ref="a7183fd9b07713d8f78871fcb96fd715f" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_get_running </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get running action on a FID list or from cookie </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN/OUT] requests </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00482">482</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a07bbd4dccfe6bf02dffa18e7d81bef3d"></a><!-- doxytag: member="mdt_hsm_cdt_client.c::mdt_hsm_restore_is_running" ref="a07bbd4dccfe6bf02dffa18e7d81bef3d" args="(struct mdt_thread_info *mti, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdt_hsm_restore_is_running </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check if a restore is running on a FID this is redundant with mdt_hsm_coordinator_get_running() but as it can be called frequently when getting attr we make an optimized/simpler version only for a FID </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] file FID </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00519">519</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
