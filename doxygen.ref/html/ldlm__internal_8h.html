<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ldlm/ldlm_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ldlm/ldlm_internal.h File Reference</h1>
<p><a href="ldlm__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__cb__set__arg.html">ldlm_cb_set_arg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__state.html">ldlm_state</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a220f38b26fa99d4d91b574f42d991516">MAX_STRING_SIZE</a>&nbsp;&nbsp;&nbsp;128</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a9e17e885fc9439a175832779a2198eb5">ldlm_lock_remove_from_lru</a>(lock)&nbsp;&nbsp;&nbsp;ldlm_lock_remove_from_lru_check(lock, 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a5b9fc4cbf40bc9159bc1fc4def9b3f52">LDLM_POOL_PROC_READER_SEQ_SHOW</a>(var, type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ae544b526ca80997607690f9faa5797ba">LDLM_POOL_PROC_WRITER</a>(var, type)</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a6b491ba3392406b93a373c028ffc4ded">ldlm_policy_wire_to_local_t</a> )(const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ac5a58c3780ace731df7cd203849c4e8b">ldlm_policy_local_to_wire_t</a> )(const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0">ldlm_lru_flags</a> { <br/>
&nbsp;&nbsp;<a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0a410ae3290fa6c8c7434696545fe191a8">LDLM_LRU_FLAG_AGED</a> =  0x01, 
<a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0a7a73ff85819763093ed8c797e705d6e5">LDLM_LRU_FLAG_PASSED</a> =  0x02, 
<a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0af3c209468b4f9aaf68310a7082fb5747">LDLM_LRU_FLAG_SHRINK</a> =  0x04, 
<a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0a01838bc15801726e52a7bb085795e5dd">LDLM_LRU_FLAG_LRUR</a> =  0x08, 
<br/>
&nbsp;&nbsp;<a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0a034795a14cf6a8b1137aa840b5f44733">LDLM_LRU_FLAG_NO_WAIT</a> =  0x10, 
<a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0a7fbe14fac5602caed00c2621c0d87615">LDLM_LRU_FLAG_LRUR_NO_WAIT</a> =  0x20
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312">ldlm_desc_ast_t</a> { <a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312ad4d1068f81818d889a3f2c97470bfe62">LDLM_WORK_BL_AST</a>, 
<a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312ae0cddc06bcb022c3f3023968f13ca469">LDLM_WORK_CP_AST</a>, 
<a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312a67d5e68008076c0ecfe1d371dbbe2449">LDLM_WORK_REVOKE_AST</a>, 
<a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312a1fa20f4e760fee05fb8da5827ebbdc28">LDLM_WORK_GL_AST</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a889e25f73ecdf5619e0ee61c03c9d2a7">ldlm_policy_res</a> { <a class="el" href="ldlm__internal_8h.html#a889e25f73ecdf5619e0ee61c03c9d2a7a63deed9d75dcd65bafac07c97cd636b7">LDLM_POLICY_CANCEL_LOCK</a>, 
<a class="el" href="ldlm__internal_8h.html#a889e25f73ecdf5619e0ee61c03c9d2a7a67e0493be8bd92733b58dbb42bb98f55">LDLM_POLICY_KEEP_LOCK</a>, 
<a class="el" href="ldlm__internal_8h.html#a889e25f73ecdf5619e0ee61c03c9d2a7aa9dd2de645f80ac234eb3a36e952ca91">LDLM_POLICY_SKIP_LOCK</a>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#af987c4efbc583019afaebb214fbf81b4">ldlm_namespace_nr_read</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a3f10e8a56ece9ebce949ad92d6425610">ldlm_namespace_nr_inc</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a8299d7574bb848cb52d15d57c3440feb">ldlm_namespace_nr_dec</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#af67ad3c9f03b5e31299d0e82d2c081f5">ldlm_namespace_list</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a1d1d7d748068f1cde0fb545fb41b9143">ldlm_namespace_inactive_list</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct mutex *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a62dea473f603ac77a87d7e6be6fb9a56">ldlm_namespace_lock</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a8f3bed5e2368fe8c5493a09ce73b06e8">ldlm_ns_empty</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#aecf1478dfdde9707bdd9d70a74f05487">ldlm_namespace_move_to_active_locked</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *, enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Should be called with ldlm_namespace_lock(client) taken.  <a href="#aecf1478dfdde9707bdd9d70a74f05487"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#af4c8a9cc9d68dbcfc12f9707ca32671c">ldlm_namespace_move_to_inactive_locked</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *, enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Should be called with ldlm_namespace_lock(client) taken.  <a href="#af4c8a9cc9d68dbcfc12f9707ca32671c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#afd9a10b1ffc1a961a7a50ba076145534">ldlm_namespace_first_locked</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Should be called with ldlm_namespace_lock(client) taken.  <a href="#afd9a10b1ffc1a961a7a50ba076145534"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a61e0c780c8b9ae81e64eb3f90f4f4b50">ldlm_cancel_lru</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, int nr, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags, enum <a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0">ldlm_lru_flags</a> lru_flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancel at least <em>nr</em> locks from given namespace LRU.  <a href="#a61e0c780c8b9ae81e64eb3f90f4f4b50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a5046292791619070fb577426506dbb0f">ldlm_cancel_lru_local</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structlist__head.html">list_head</a> *cancels, int count, int <a class="el" href="lnet_2utils_2debug_8c.html#ae1e1dde676c120fa6d10f3bb2c14059e">max</a>, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags, enum <a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0">ldlm_lru_flags</a> lru_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab57a0c25a1566b0efd06521d8a5c15b3">ldlm_resource_insert_lock_after</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *original, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *new)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert a lock into resource after specified lock.  <a href="#ab57a0c25a1566b0efd06521d8a5c15b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a98e89ee56eb9d2c97ef890d98925bd6a">ldlm_grant_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform lock granting bookkeeping.  <a href="#a98e89ee56eb9d2c97ef890d98925bd6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a608383931ed837256b29d8dc3fc764df">ldlm_fill_lvb</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, enum <a class="el" href="group__req__layout.html#ga0c07ccef9ef768eb7bf6cb2946c28261">req_location</a> loc, void *data, int <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The caller must guarantee that the buffer is large enough.  <a href="#a608383931ed837256b29d8dc3fc764df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#af29553310c1f2362ca2145806a061f27">ldlm_lock_create</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *, enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, const struct <a class="el" href="structldlm__callback__suite.html">ldlm_callback_suite</a> *cbs, void *data, __u32 lvb_len, enum <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a> <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and fill in new LDLM lock with specified properties.  <a href="#af29553310c1f2362ca2145806a061f27"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab33cfb99fd55dfe36c2d1c10ea329922">ldlm_lock_enqueue</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> **, void *cookie, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enqueue (request) a lock.  <a href="#ab33cfb99fd55dfe36c2d1c10ea329922"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a6731d485dba03ece37507d6b4bebe97b">ldlm_lock_addref_internal</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add specified reader/writer reference to LDLM lock <em>lock</em>.  <a href="#a6731d485dba03ece37507d6b4bebe97b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#abab4eda1e2a69537e3b99a6660cb95a9">ldlm_lock_addref_internal_nolock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper function.  <a href="#abab4eda1e2a69537e3b99a6660cb95a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#afe7d8c906c5bd4a4e7178eda75a07197">ldlm_lock_decref_internal</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes reader/writer reference for LDLM lock <em>lock</em>.  <a href="#afe7d8c906c5bd4a4e7178eda75a07197"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a77fe6cd8645a07f3e634d176400f1157">ldlm_lock_decref_internal_nolock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes reader/writer reference for LDLM lock <em>lock</em>.  <a href="#a77fe6cd8645a07f3e634d176400f1157"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ad067ab568e7a265724d233c63d0b5632">ldlm_add_ast_work_item</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *new, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Aggregator function to add AST work items into a list.  <a href="#ad067ab568e7a265724d233c63d0b5632"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a825464ac0dd43ec4bce6013052cd1a30">ldlm_run_ast_work</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structlist__head.html">list_head</a> *rpc_list, <a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312">ldlm_desc_ast_t</a> <a class="el" href="mgs__handler_8c.html#a77091c187ac9a89404fac2e8226daef3">ast_type</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process list of locks in need of ASTs being sent.  <a href="#a825464ac0dd43ec4bce6013052cd1a30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#afa16fd0c6f6dcd2514b6c529e58fa402">ldlm_work_gl_ast_lock</a> (struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *rqset, void *opaq)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a call to glimpse AST callback for a lock in ast_work list.  <a href="#afa16fd0c6f6dcd2514b6c529e58fa402"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a7cd4f877866749dceb72ca5c7b0c8e36">ldlm_lock_remove_from_lru_check</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> last_use)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes LDLM lock <em>lock</em> from LRU.  <a href="#a7cd4f877866749dceb72ca5c7b0c8e36"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#aa905e3097901c0a7bb2744fdd8668e57">ldlm_lock_remove_from_lru_nolock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes LDLM lock <em>lock</em> from LRU.  <a href="#aa905e3097901c0a7bb2744fdd8668e57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a0f288b7ae24e7b38725be10472ebd0b0">ldlm_lock_add_to_lru_nolock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds LDLM lock <em>lock</em> to namespace LRU.  <a href="#a0f288b7ae24e7b38725be10472ebd0b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ad08b8088fcdd1eea634b10f176c9bfeb">ldlm_lock_add_to_lru</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds LDLM lock <em>lock</em> to namespace LRU.  <a href="#ad08b8088fcdd1eea634b10f176c9bfeb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab2b695dcf2e2be0bbfa73c8fc7eef92a">ldlm_lock_touch_in_lru</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves LDLM lock <em>lock</em> that is already in namespace LRU to the tail of the LRU.  <a href="#ab2b695dcf2e2be0bbfa73c8fc7eef92a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a3c2af810ecacce9f1dbc9308e04b090b">ldlm_lock_destroy_nolock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a LDLM lock <em>lock</em> that is already locked.  <a href="#a3c2af810ecacce9f1dbc9308e04b090b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a3eeecdf429661787db6cba2248956365">ldlm_export_cancel_blocked_locks</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancel all blocked locks for given export.  <a href="#a3eeecdf429661787db6cba2248956365"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#afd64cd3408818286abbf6cfa5de359a2">ldlm_export_cancel_locks</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancel all locks for given export.  <a href="#afd64cd3408818286abbf6cfa5de359a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a05cdf5681d86896cd54b278fdcc0d0ff">ldlm_bl_to_thread_lock</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a086a4e7dffe032bcbf8f1100101de207">ldlm_bl_to_thread_list</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structlist__head.html">list_head</a> *cancels, int count, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a7557667d088038fc93a6c30b0904cc56">ldlm_bl_thread_wakeup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a5e6e5041059d52602954a9b4769341fa">ldlm_handle_bl_callback</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback handler for receiving incoming blocking ASTs.  <a href="#a5e6e5041059d52602954a9b4769341fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a78151483bf54853571e584a9c542985b">ldlm_extent_add_lock</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add newly granted lock into interval tree for the resource.  <a href="#a78151483bf54853571e584a9c542985b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a8f4b744e23f6c950d45d4f235eda4518">ldlm_extent_unlink_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove cancelled lock from resource interval tree.  <a href="#a8f4b744e23f6c950d45d4f235eda4518"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a5e963b8762a5ee599e17ab4bb5232cea">ldlm_process_flock_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *req, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *flags, int first_enq, enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> *err, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a granting attempt for flock lock.  <a href="#a5e963b8762a5ee599e17ab4bb5232cea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ac0277782c9f1f913efc748d14ec00e3c">ldlm_init_flock_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a4a57584bf0dadf998fbec72c4c9f670f">ldlm_destroy_flock_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#abbd8e7e6789b413c7307acf51701a77c">l_check_ns_lock</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab6e4d3359b022e5a90a2258b320d6612">l_check_no_ns_lock</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a9ed0a6988e4976918a2685c7f2e99647">ldlm_interval_attach</a> (struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *n, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *l)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a6b2c3d80252653f6a2ee3d2c6ddc1c98">ldlm_interval_detach</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *l)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a31a3b9fb321b321b78b5e136f2c13fc1">ldlm_interval_alloc</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ad2b2b6fd5fa49b590c24bef2797d2bad">ldlm_interval_free</a> (struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structldlm__extent.html">ldlm_extent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ae695d907b4f5d2cfc6bf1e94d4c68b48">ldlm_interval_extent</a> (struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#aa38ba5ece9587fb13ea1d88c737f0129">ldlm_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ac9ccefb86d4787c31c1d58689f0b1586">ldlm_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a99792f49e04f1d4f2a74dc802d27c905">ldlm_add_var</a> (struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a> *vars, struct proc_dir_entry *proc_dir, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, void *data, const struct file_operations *ops)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ae5d2f13ec03ab9fdd97e2c157502d3e3">is_granted_or_cancelled</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a2dc00ec9abd000a9ac324e89b3837361">ldlm_plain_policy_wire_to_local</a> (const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a7b7396bcef072482a5b4229cb7c792c8">ldlm_plain_policy_local_to_wire</a> (const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a1a4d134988f8e0bca90f8e6ca17f3542">ldlm_ibits_policy_wire_to_local</a> (const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ac2e07922511e49494eb7bca0714c273a">ldlm_ibits_policy_local_to_wire</a> (const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a658c02d498ad30c13fa1fb888348e9fe">ldlm_extent_policy_wire_to_local</a> (const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a7f8c1e8dc924f1cc869225f16d8b7176">ldlm_extent_policy_local_to_wire</a> (const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#af1d5630a4d3ecdb282caccb56d520e89">ldlm_flock_policy_wire_to_local</a> (const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a97967bbb20eeada0b527c658f13b2214">ldlm_flock_policy_local_to_wire</a> (const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ae87a3dd643c1d444e296d13bcd7839a2">ldlm_reclaim_setup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a80b7134c020a83aa5723384cb7fd0487">ldlm_reclaim_cleanup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a90c10ddd350714c16e1657df4cdf2049">ldlm_reclaim_add</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a309c90291e7eba08387606b2a44d53f8">ldlm_reclaim_del</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#acc5cad10817acf0e60869abddae4df2f">ldlm_reclaim_full</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a1c019a99e77a74f95abc4f289425e8a1">ldlm_srv_namespace_nr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a23b0721100ca96e559afd7c8f313a8fc">ldlm_cli_namespace_nr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab5f30b0e6fa52fb684602dcc1793edd7">ldlm_srv_namespace_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ae0e174d0a32f759a3ffb05677c3edf6c">ldlm_srv_namespace_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a0ee4fa2cc0bc46d51f33b2bf7397ca8b">ldlm_cli_namespace_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ad88b841e9005e7f66972e07bffd86e8d">ldlm_cli_active_namespace_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a35156be279ece93a994e4da8a0e0a9e6">ldlm_cli_inactive_namespace_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a27b7071107b0390cd461fa9679d8d67a">ldlm_cancel_unused_locks_before_replay</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a203c443910cb010024d2111b0126d31d">ldlm_enqueue_min</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#acb98b65219256c616841d749d3de31e7">ldlm_resource_slab</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab042af710154778086ba81ee05d69fd1">ldlm_lock_slab</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a1aa84ca4dd44bf9c654c0479b73180c9">ldlm_interval_tree_slab</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct proc_dir_entry *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#ab3742f60905790dbaabfb7156cfa3791">ldlm_svc_proc_dir</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__internal_8h.html#a0a58728caf594b6e256b78ca63d913a0">ldlm_interval_slab</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a9e17e885fc9439a175832779a2198eb5"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_remove_from_lru" ref="a9e17e885fc9439a175832779a2198eb5" args="(lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_lock_remove_from_lru</td>
          <td>(</td>
          <td class="paramtype">lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;ldlm_lock_remove_from_lru_check(lock, 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00171">171</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b9fc4cbf40bc9159bc1fc4def9b3f52"></a><!-- doxytag: member="ldlm_internal.h::LDLM_POOL_PROC_READER_SEQ_SHOW" ref="a5b9fc4cbf40bc9159bc1fc4def9b3f52" args="(var, type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_POOL_PROC_READER_SEQ_SHOW</td>
          <td>(</td>
          <td class="paramtype">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">int</span> lprocfs_##var##_seq_show(<span class="keyword">struct</span> seq_file *m, <span class="keywordtype">void</span> *v)\
        {                                                               \
                <span class="keyword">struct </span><a class="code" href="structldlm__pool.html" title="LDLM pool structure to track granted locks.">ldlm_pool</a> *pl = m-&gt;private;                      \
                type tmp;                                               \
                                                                        \
                spin_lock(&amp;pl-&gt;<a class="code" href="structldlm__pool.html#a642d87a0c1cf7a9f8d877b39592a5777" title="Lock for protecting SLV/CLV updates.">pl_lock</a>);                                \
                tmp = pl-&gt;pl_##var;                                     \
                spin_unlock(&amp;pl-&gt;<a class="code" href="structldlm__pool.html#a642d87a0c1cf7a9f8d877b39592a5777" title="Lock for protecting SLV/CLV updates.">pl_lock</a>);                              \
                                                                        \
                <span class="keywordflow">return</span> lprocfs_uint_seq_show(m, &amp;tmp);                  \
        }                                                               \
        <span class="keyword">struct </span>__##var##__dummy_read {;}
</pre></div>
<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00262">262</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae544b526ca80997607690f9faa5797ba"></a><!-- doxytag: member="ldlm_internal.h::LDLM_POOL_PROC_WRITER" ref="ae544b526ca80997607690f9faa5797ba" args="(var, type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_POOL_PROC_WRITER</td>
          <td>(</td>
          <td class="paramtype">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">int</span> lprocfs_wr_##var(<span class="keyword">struct</span> file *file,                  \
                             <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="ioctl_8h.html#ace6f17999da4ea3b93c4227beafcab95">__user</a> *buffer,                 \
                             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> count, <span class="keywordtype">void</span> *data)           \
        {                                                               \
                <span class="keyword">struct </span><a class="code" href="structldlm__pool.html" title="LDLM pool structure to track granted locks.">ldlm_pool</a> *pl = data;                            \
                type tmp;                                               \
                <span class="keywordtype">int</span> rc;                                                 \
                                                                        \
                rc = lprocfs_wr_uint(file, buffer, count, &amp;tmp);        \
                <span class="keywordflow">if</span> (rc &lt; 0) {                                           \
                        <a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;Can&apos;t parse user input, rc = %d\n&quot;</span>, rc);\
                        <span class="keywordflow">return</span> rc;                                      \
                }                                                       \
                                                                        \
                spin_lock(&amp;pl-&gt;<a class="code" href="structldlm__pool.html#a642d87a0c1cf7a9f8d877b39592a5777" title="Lock for protecting SLV/CLV updates.">pl_lock</a>);                                \
                pl-&gt;pl_##var = tmp;                                     \
                spin_unlock(&amp;pl-&gt;<a class="code" href="structldlm__pool.html#a642d87a0c1cf7a9f8d877b39592a5777" title="Lock for protecting SLV/CLV updates.">pl_lock</a>);                              \
                                                                        \
                <span class="keywordflow">return</span> rc;                                              \
        }                                                               \
        <span class="keyword">struct </span>__##var##__dummy_write {;}
</pre></div>
<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00276">276</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a220f38b26fa99d4d91b574f42d991516"></a><!-- doxytag: member="ldlm_internal.h::MAX_STRING_SIZE" ref="a220f38b26fa99d4d91b574f42d991516" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_STRING_SIZE&nbsp;&nbsp;&nbsp;128</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00037">37</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>Referenced by <a class="el" href="obd_8c_source.html#l01035">jt_obd_list()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00300">ldlm_add_var()</a>, <a class="el" href="liblustreapi_8c_source.html#l03416">llapi_target_iterate()</a>, and <a class="el" href="obd_8c_source.html#l00947">print_obd_line()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ac5a58c3780ace731df7cd203849c4e8b"></a><!-- doxytag: member="ldlm_internal.h::ldlm_policy_local_to_wire_t" ref="ac5a58c3780ace731df7cd203849c4e8b" args=")(const union ldlm_policy_data *, union ldlm_wire_policy_data *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="ldlm__internal_8h.html#ac5a58c3780ace731df7cd203849c4e8b">ldlm_policy_local_to_wire_t</a>)(const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00326">326</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6b491ba3392406b93a373c028ffc4ded"></a><!-- doxytag: member="ldlm_internal.h::ldlm_policy_wire_to_local_t" ref="a6b491ba3392406b93a373c028ffc4ded" args=")(const union ldlm_wire_policy_data *, union ldlm_policy_data *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="ldlm__internal_8h.html#a6b491ba3392406b93a373c028ffc4ded">ldlm_policy_wire_to_local_t</a>)(const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00324">324</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ab2beeaa64c7143ab8c4b9f89b522a312"></a><!-- doxytag: member="ldlm_internal.h::ldlm_desc_ast_t" ref="ab2beeaa64c7143ab8c4b9f89b522a312" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312">ldlm_desc_ast_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ab2beeaa64c7143ab8c4b9f89b522a312ad4d1068f81818d889a3f2c97470bfe62"></a><!-- doxytag: member="LDLM_WORK_BL_AST" ref="ab2beeaa64c7143ab8c4b9f89b522a312ad4d1068f81818d889a3f2c97470bfe62" args="" -->LDLM_WORK_BL_AST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab2beeaa64c7143ab8c4b9f89b522a312ae0cddc06bcb022c3f3023968f13ca469"></a><!-- doxytag: member="LDLM_WORK_CP_AST" ref="ab2beeaa64c7143ab8c4b9f89b522a312ae0cddc06bcb022c3f3023968f13ca469" args="" -->LDLM_WORK_CP_AST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab2beeaa64c7143ab8c4b9f89b522a312a67d5e68008076c0ecfe1d371dbbe2449"></a><!-- doxytag: member="LDLM_WORK_REVOKE_AST" ref="ab2beeaa64c7143ab8c4b9f89b522a312a67d5e68008076c0ecfe1d371dbbe2449" args="" -->LDLM_WORK_REVOKE_AST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab2beeaa64c7143ab8c4b9f89b522a312a1fa20f4e760fee05fb8da5827ebbdc28"></a><!-- doxytag: member="LDLM_WORK_GL_AST" ref="ab2beeaa64c7143ab8c4b9f89b522a312a1fa20f4e760fee05fb8da5827ebbdc28" args="" -->LDLM_WORK_GL_AST</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00139">139</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lru_flags" ref="aaccb9c1f7e83484036c499491c4ec0a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0">ldlm_lru_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0a410ae3290fa6c8c7434696545fe191a8"></a><!-- doxytag: member="LDLM_LRU_FLAG_AGED" ref="aaccb9c1f7e83484036c499491c4ec0a0a410ae3290fa6c8c7434696545fe191a8" args="" -->LDLM_LRU_FLAG_AGED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0a7a73ff85819763093ed8c797e705d6e5"></a><!-- doxytag: member="LDLM_LRU_FLAG_PASSED" ref="aaccb9c1f7e83484036c499491c4ec0a0a7a73ff85819763093ed8c797e705d6e5" args="" -->LDLM_LRU_FLAG_PASSED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0af3c209468b4f9aaf68310a7082fb5747"></a><!-- doxytag: member="LDLM_LRU_FLAG_SHRINK" ref="aaccb9c1f7e83484036c499491c4ec0a0af3c209468b4f9aaf68310a7082fb5747" args="" -->LDLM_LRU_FLAG_SHRINK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0a01838bc15801726e52a7bb085795e5dd"></a><!-- doxytag: member="LDLM_LRU_FLAG_LRUR" ref="aaccb9c1f7e83484036c499491c4ec0a0a01838bc15801726e52a7bb085795e5dd" args="" -->LDLM_LRU_FLAG_LRUR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0a034795a14cf6a8b1137aa840b5f44733"></a><!-- doxytag: member="LDLM_LRU_FLAG_NO_WAIT" ref="aaccb9c1f7e83484036c499491c4ec0a0a034795a14cf6a8b1137aa840b5f44733" args="" -->LDLM_LRU_FLAG_NO_WAIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aaccb9c1f7e83484036c499491c4ec0a0a7fbe14fac5602caed00c2621c0d87615"></a><!-- doxytag: member="LDLM_LRU_FLAG_LRUR_NO_WAIT" ref="aaccb9c1f7e83484036c499491c4ec0a0a7fbe14fac5602caed00c2621c0d87615" args="" -->LDLM_LRU_FLAG_LRUR_NO_WAIT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00103">103</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a889e25f73ecdf5619e0ee61c03c9d2a7"></a><!-- doxytag: member="ldlm_internal.h::ldlm_policy_res" ref="a889e25f73ecdf5619e0ee61c03c9d2a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ldlm__internal_8h.html#a889e25f73ecdf5619e0ee61c03c9d2a7">ldlm_policy_res</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a889e25f73ecdf5619e0ee61c03c9d2a7a63deed9d75dcd65bafac07c97cd636b7"></a><!-- doxytag: member="LDLM_POLICY_CANCEL_LOCK" ref="a889e25f73ecdf5619e0ee61c03c9d2a7a63deed9d75dcd65bafac07c97cd636b7" args="" -->LDLM_POLICY_CANCEL_LOCK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a889e25f73ecdf5619e0ee61c03c9d2a7a67e0493be8bd92733b58dbb42bb98f55"></a><!-- doxytag: member="LDLM_POLICY_KEEP_LOCK" ref="a889e25f73ecdf5619e0ee61c03c9d2a7a67e0493be8bd92733b58dbb42bb98f55" args="" -->LDLM_POLICY_KEEP_LOCK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a889e25f73ecdf5619e0ee61c03c9d2a7aa9dd2de645f80ac234eb3a36e952ca91"></a><!-- doxytag: member="LDLM_POLICY_SKIP_LOCK" ref="a889e25f73ecdf5619e0ee61c03c9d2a7aa9dd2de645f80ac234eb3a36e952ca91" args="" -->LDLM_POLICY_SKIP_LOCK</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00256">256</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae5d2f13ec03ab9fdd97e2c157502d3e3"></a><!-- doxytag: member="ldlm_internal.h::is_granted_or_cancelled" ref="ae5d2f13ec03ab9fdd97e2c157502d3e3" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int is_granted_or_cancelled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00309">309</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00186">ldlm_is_cancel</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00245">ldlm_is_cp_reqd</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00198">ldlm_is_failed</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6e4d3359b022e5a90a2258b320d6612"></a><!-- doxytag: member="ldlm_internal.h::l_check_no_ns_lock" ref="ab6e4d3359b022e5a90a2258b320d6612" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void l_check_no_ns_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abbd8e7e6789b413c7307acf51701a77c"></a><!-- doxytag: member="ldlm_internal.h::l_check_ns_lock" ref="abbd8e7e6789b413c7307acf51701a77c" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void l_check_ns_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad067ab568e7a265724d233c63d0b5632"></a><!-- doxytag: member="ldlm_internal.h::ldlm_add_ast_work_item" ref="ad067ab568e7a265724d233c63d0b5632" args="(struct ldlm_lock *lock, struct ldlm_lock *new, struct list_head *work_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_add_ast_work_item </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>work_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Aggregator function to add AST work items into a list. </p>
<p>Determines what sort of an AST work needs to be done and calls the proper adding function. Must be called with lr_lock held. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00700">700</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00682">ldlm_add_cp_work_item()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a99792f49e04f1d4f2a74dc802d27c905"></a><!-- doxytag: member="ldlm_internal.h::ldlm_add_var" ref="a99792f49e04f1d4f2a74dc802d27c905" args="(struct lprocfs_vars *vars, struct proc_dir_entry *proc_dir, const char *name, void *data, const struct file_operations *ops)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_add_var </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a> *&nbsp;</td>
          <td class="paramname"> <em>vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct proc_dir_entry *&nbsp;</td>
          <td class="paramname"> <em>proc_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct file_operations *&nbsp;</td>
          <td class="paramname"> <em>ops</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00300">300</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="lprocfs__status_8h_source.html#l00056">lprocfs_vars::data</a>, <a class="el" href="lprocfs__status_8h_source.html#l00055">lprocfs_vars::fops</a>, <a class="el" href="lprocfs__status_8h_source.html#l00945">lprocfs_add_vars()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00037">MAX_STRING_SIZE</a>, and <a class="el" href="lprocfs__status_8h_source.html#l00054">lprocfs_vars::name</a>.</p>

</div>
</div>
<a class="anchor" id="a7557667d088038fc93a6c30b0904cc56"></a><!-- doxytag: member="ldlm_internal.h::ldlm_bl_thread_wakeup" ref="a7557667d088038fc93a6c30b0904cc56" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_bl_thread_wakeup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02088">2088</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00105">ldlm_bl_pool::blp_waitq</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00232">ldlm_state::ldlm_bl_pool</a>.</p>

</div>
</div>
<a class="anchor" id="a086a4e7dffe032bcbf8f1100101de207"></a><!-- doxytag: member="ldlm_internal.h::ldlm_bl_to_thread_list" ref="a086a4e7dffe032bcbf8f1100101de207" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct list_head *cancels, int count, enum ldlm_cancel_flags cancel_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_bl_to_thread_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>cancels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02081">2081</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l02042">ldlm_bl_to_thread()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01831">ldlm_cancel_lru()</a>.</p>

</div>
</div>
<a class="anchor" id="a05cdf5681d86896cd54b278fdcc0d0ff"></a><!-- doxytag: member="ldlm_internal.h::ldlm_bl_to_thread_lock" ref="a05cdf5681d86896cd54b278fdcc0d0ff" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_bl_to_thread_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02075">2075</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02042">ldlm_bl_to_thread()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a61e0c780c8b9ae81e64eb3f90f4f4b50"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cancel_lru" ref="a61e0c780c8b9ae81e64eb3f90f4f4b50" args="(struct ldlm_namespace *ns, int nr, enum ldlm_cancel_flags cancel_flags, enum ldlm_lru_flags lru_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_cancel_lru </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0">ldlm_lru_flags</a>&nbsp;</td>
          <td class="paramname"> <em>lru_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel at least <em>nr</em> locks from given namespace LRU. </p>
<p>When called with LCF_ASYNC the blocking callback will be handled in a thread and this function will return after the thread has been asked to call the callback. When called with LCF_ASYNC the blocking callback will be performed in this function. </p>

<p>Definition at line <a class="el" href="ldlm__request_8c_source.html#l01831">1831</a> of file <a class="el" href="ldlm__request_8c_source.html">ldlm_request.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02081">ldlm_bl_to_thread_list()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="list_8h_source.html#l00046">LIST_HEAD_INIT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a5046292791619070fb577426506dbb0f"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cancel_lru_local" ref="a5046292791619070fb577426506dbb0f" args="(struct ldlm_namespace *ns, struct list_head *cancels, int count, int max, enum ldlm_cancel_flags cancel_flags, enum ldlm_lru_flags lru_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_cancel_lru_local </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>cancels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="ldlm__internal_8h.html#aaccb9c1f7e83484036c499491c4ec0a0">ldlm_lru_flags</a>&nbsp;</td>
          <td class="paramname"> <em>lru_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__request_8c_source.html#l01809">1809</a> of file <a class="el" href="ldlm__request_8c_source.html">ldlm_request.c</a>.</p>

<p>References <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l02319">ldlm_cancel_unused_locks_for_replay()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00762">ldlm_prep_elc_req()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a57584bf0dadf998fbec72c4c9f670f"></a><!-- doxytag: member="ldlm_internal.h::ldlm_destroy_flock_export" ref="a4a57584bf0dadf998fbec72c4c9f670f" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_destroy_flock_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00955">955</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, and <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02913">ldlm_destroy_export()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9ccefb86d4787c31c1d58689f0b1586"></a><!-- doxytag: member="ldlm_internal.h::ldlm_exit" ref="ac9ccefb86d4787c31c1d58689f0b1586" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l03203">3203</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="ldlm__extent_8c_source.html#l00835">ldlm_interval_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00049">ldlm_interval_tree_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_lock_slab</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00060">ldlm_refcount</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_resource_slab</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a3eeecdf429661787db6cba2248956365"></a><!-- doxytag: member="ldlm_internal.h::ldlm_export_cancel_blocked_locks" ref="a3eeecdf429661787db6cba2248956365" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_export_cancel_blocked_locks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel all blocked locks for given export. </p>
<p>Typically called on client disconnection/eviction </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02361">2361</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="ldlm__lock_8c_source.html#l02311">export_cl_data::ecl_exp</a>, <a class="el" href="ldlm__lock_8c_source.html#l02312">export_cl_data::ecl_loop</a>, <a class="el" href="lustre__export_8h_source.html#l00274">obd_export::exp_bl_list</a>, <a class="el" href="lustre__export_8h_source.html#l00275">obd_export::exp_bl_list_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00221">obd_export::exp_lock_hash</a>, <a class="el" href="libcfs__hash_8h_source.html#l00220">cfs_hash::hs_count</a>, <a class="el" href="lustre__dlm_8h_source.html#l00901">ldlm_lock::l_exp_list</a>, <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01344">LDLM_LOCK_GET</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, and <a class="el" href="list_8h_source.html#l00043">list_head::next</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02708">ldlm_bl_thread_exports()</a>.</p>

</div>
</div>
<a class="anchor" id="afd64cd3408818286abbf6cfa5de359a2"></a><!-- doxytag: member="ldlm_internal.h::ldlm_export_cancel_locks" ref="afd64cd3408818286abbf6cfa5de359a2" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_export_cancel_locks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel all locks for given export. </p>
<p>Typically called after client disconnection/eviction </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02401">2401</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01698">cfs_hash_for_each_empty()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="ldlm__lock_8c_source.html#l02311">export_cl_data::ecl_exp</a>, <a class="el" href="ldlm__lock_8c_source.html#l02312">export_cl_data::ecl_loop</a>, <a class="el" href="lustre__export_8h_source.html#l00221">obd_export::exp_lock_hash</a>, <a class="el" href="libcfs__hash_8h_source.html#l00220">cfs_hash::hs_count</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02341">ldlm_cancel_locks_for_export_cb()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02708">ldlm_bl_thread_exports()</a>.</p>

</div>
</div>
<a class="anchor" id="a78151483bf54853571e584a9c542985b"></a><!-- doxytag: member="ldlm_internal.h::ldlm_extent_add_lock" ref="a78151483bf54853571e584a9c542985b" args="(struct ldlm_resource *res, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_extent_add_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add newly granted lock into interval tree for the resource. </p>

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00898">898</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="interval__tree_8c_source.html#l00383">interval_insert()</a>, <a class="el" href="interval__tree_8h_source.html#l00065">interval_is_intree()</a>, <a class="el" href="interval__tree_8h_source.html#l00080">interval_set()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00709">ldlm_lock::l_tree_node</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00871">ldlm_interval_detach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00851">ldlm_interval_free()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00885">ldlm_mode_to_index()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00592">ldlm_interval::li_node</a>, <a class="el" href="lustre__dlm_8h_source.html#l00607">ldlm_interval_tree::lit_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00608">ldlm_interval_tree::lit_root</a>, <a class="el" href="lustre__dlm_8h_source.html#l00606">ldlm_interval_tree::lit_size</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="lustre__dlm_8h_source.html#l00956">ldlm_resource::lr_itree</a>, <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00596">to_ldlm_interval</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f8c1e8dc924f1cc869225f16d8b7176"></a><!-- doxytag: member="ldlm_internal.h::ldlm_extent_policy_local_to_wire" ref="a7f8c1e8dc924f1cc869225f16d8b7176" args="(const union ldlm_policy_data *lpolicy, union ldlm_wire_policy_data *wpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_extent_policy_local_to_wire </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00969">969</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="lustre__idl_8h_source.html#l02824">ldlm_extent::gid</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l02859">ldlm_wire_policy_data::l_extent</a>, and <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>.</p>

</div>
</div>
<a class="anchor" id="a658c02d498ad30c13fa1fb888348e9fe"></a><!-- doxytag: member="ldlm_internal.h::ldlm_extent_policy_wire_to_local" ref="a658c02d498ad30c13fa1fb888348e9fe" args="(const union ldlm_wire_policy_data *wpolicy, union ldlm_policy_data *lpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_extent_policy_wire_to_local </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00960">960</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="lustre__idl_8h_source.html#l02824">ldlm_extent::gid</a>, <a class="el" href="lustre__idl_8h_source.html#l02859">ldlm_wire_policy_data::l_extent</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, and <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>.</p>

</div>
</div>
<a class="anchor" id="a8f4b744e23f6c950d45d4f235eda4518"></a><!-- doxytag: member="ldlm_internal.h::ldlm_extent_unlink_lock" ref="a8f4b744e23f6c950d45d4f235eda4518" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_extent_unlink_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove cancelled lock from resource interval tree. </p>

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00936">936</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="interval__tree_8c_source.html#l00523">interval_erase()</a>, <a class="el" href="interval__tree_8h_source.html#l00065">interval_is_intree()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00709">ldlm_lock::l_tree_node</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00871">ldlm_interval_detach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00851">ldlm_interval_free()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00885">ldlm_mode_to_index()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00592">ldlm_interval::li_node</a>, <a class="el" href="lustre__dlm_8h_source.html#l00608">ldlm_interval_tree::lit_root</a>, <a class="el" href="lustre__dlm_8h_source.html#l00606">ldlm_interval_tree::lit_size</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00956">ldlm_resource::lr_itree</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a608383931ed837256b29d8dc3fc764df"></a><!-- doxytag: member="ldlm_internal.h::ldlm_fill_lvb" ref="a608383931ed837256b29d8dc3fc764df" args="(struct ldlm_lock *lock, struct req_capsule *pill, enum req_location loc, void *data, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_fill_lvb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__req__layout.html#ga0c07ccef9ef768eb7bf6cb2946c28261">req_location</a>&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The caller must guarantee that the buffer is large enough. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01539">1539</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00812">ldlm_lock::l_lvb_type</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01169">LDLM_ERROR</a>, <a class="el" href="libcfs__private_8h_source.html#l00302">libcfs_debug_dumpstack</a>, <a class="el" href="pack__generic_8c_source.html#l01823">lustre_swab_lquota_lvb()</a>, <a class="el" href="req-layout_8c_source.html#l00088">lustre_swab_ost_lvb</a>, <a class="el" href="req-layout_8c_source.html#l00087">lustre_swab_ost_lvb_v1</a>, <a class="el" href="lustre__idl_8h_source.html#l01822">ost_lvb::lvb_atime_ns</a>, <a class="el" href="lustre__idl_8h_source.html#l01823">ost_lvb::lvb_ctime_ns</a>, <a class="el" href="lustre__idl_8h_source.html#l01821">ost_lvb::lvb_mtime_ns</a>, <a class="el" href="lustre__dlm_8h_source.html#l00649">LVB_T_LAYOUT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00648">LVB_T_LQUOTA</a>, <a class="el" href="lustre__dlm_8h_source.html#l00647">LVB_T_OST</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02130">req_capsule_client_swab_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l02195">req_capsule_server_sized_swab_get()</a>, <a class="el" href="layout_8c_source.html#l02171">req_capsule_server_swab_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01049">RMF_DLM_LVB</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="a97967bbb20eeada0b527c658f13b2214"></a><!-- doxytag: member="ldlm_internal.h::ldlm_flock_policy_local_to_wire" ref="a97967bbb20eeada0b527c658f13b2214" args="(const union ldlm_policy_data *lpolicy, union ldlm_wire_policy_data *wpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_flock_policy_local_to_wire </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00853">853</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__idl_8h_source.html#l02860">ldlm_wire_policy_data::l_flock</a>, <a class="el" href="lustre__idl_8h_source.html#l02846">ldlm_flock_wire::lfw_end</a>, <a class="el" href="lustre__idl_8h_source.html#l02847">ldlm_flock_wire::lfw_owner</a>, <a class="el" href="lustre__idl_8h_source.html#l02849">ldlm_flock_wire::lfw_pid</a>, <a class="el" href="lustre__idl_8h_source.html#l02845">ldlm_flock_wire::lfw_start</a>, <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>.</p>

</div>
</div>
<a class="anchor" id="af1d5630a4d3ecdb282caccb56d520e89"></a><!-- doxytag: member="ldlm_internal.h::ldlm_flock_policy_wire_to_local" ref="af1d5630a4d3ecdb282caccb56d520e89" args="(const union ldlm_wire_policy_data *wpolicy, union ldlm_policy_data *lpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_flock_policy_wire_to_local </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00843">843</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="lustre__idl_8h_source.html#l02860">ldlm_wire_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__idl_8h_source.html#l02846">ldlm_flock_wire::lfw_end</a>, <a class="el" href="lustre__idl_8h_source.html#l02847">ldlm_flock_wire::lfw_owner</a>, <a class="el" href="lustre__idl_8h_source.html#l02849">ldlm_flock_wire::lfw_pid</a>, <a class="el" href="lustre__idl_8h_source.html#l02845">ldlm_flock_wire::lfw_start</a>, <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>.</p>

</div>
</div>
<a class="anchor" id="a98e89ee56eb9d2c97ef890d98925bd6a"></a><!-- doxytag: member="ldlm_internal.h::ldlm_grant_lock" ref="a98e89ee56eb9d2c97ef890d98925bd6a" args="(struct ldlm_lock *lock, struct list_head *work_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_grant_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>work_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform lock granting bookkeeping. </p>
<p>Includes putting the lock into granted list and updating lock mode. NOTE: called by</p>
<ul>
<li>ldlm_lock_enqueue</li>
<li>ldlm_reprocess_queue</li>
<li>ldlm_lock_convert</li>
</ul>
<p>must be called with lr_lock held </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01101">1101</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="packet-lustre_8c_source.html#l00296">LCK_NL</a>, <a class="el" href="ldlm__lock_8c_source.html#l00700">ldlm_add_ast_work_item()</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01078">ldlm_grant_lock_with_skiplist()</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00089">ldlm_is_flock_deadlock</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00115">ldlm_is_test_lock</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="ldlm__pool_8c_source.html#l01536">ldlm_pool_add()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e6e5041059d52602954a9b4769341fa"></a><!-- doxytag: member="ldlm_internal.h::ldlm_handle_bl_callback" ref="a5e6e5041059d52602954a9b4769341fa" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_handle_bl_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback handler for receiving incoming blocking ASTs. </p>
<p>This can only happen on client side. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l01758">1758</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00822">ldlm_lock::l_ast_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00103">LDLM_CB_BLOCKING</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00128">ldlm_is_cancel_on_block</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00187">ldlm_set_cancel</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">ldlm_set_cbpending</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02662">ldlm_bl_thread_blwi()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2e07922511e49494eb7bca0714c273a"></a><!-- doxytag: member="ldlm_internal.h::ldlm_ibits_policy_local_to_wire" ref="ac2e07922511e49494eb7bca0714c273a" args="(const union ldlm_policy_data *lpolicy, union ldlm_wire_policy_data *wpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_ibits_policy_local_to_wire </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__inodebits_8c_source.html#l00259">259</a> of file <a class="el" href="ldlm__inodebits_8c_source.html">ldlm_inodebits.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02841">ldlm_inodebits::bits</a>, <a class="el" href="lustre__dlm_8h_source.html#l00635">ldlm_policy_data::l_inodebits</a>, and <a class="el" href="lustre__idl_8h_source.html#l02861">ldlm_wire_policy_data::l_inodebits</a>.</p>

</div>
</div>
<a class="anchor" id="a1a4d134988f8e0bca90f8e6ca17f3542"></a><!-- doxytag: member="ldlm_internal.h::ldlm_ibits_policy_wire_to_local" ref="a1a4d134988f8e0bca90f8e6ca17f3542" args="(const union ldlm_wire_policy_data *wpolicy, union ldlm_policy_data *lpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_ibits_policy_wire_to_local </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__inodebits_8c_source.html#l00252">252</a> of file <a class="el" href="ldlm__inodebits_8c_source.html">ldlm_inodebits.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02841">ldlm_inodebits::bits</a>, <a class="el" href="lustre__idl_8h_source.html#l02861">ldlm_wire_policy_data::l_inodebits</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00635">ldlm_policy_data::l_inodebits</a>.</p>

</div>
</div>
<a class="anchor" id="aa38ba5ece9587fb13ea1d88c737f0129"></a><!-- doxytag: member="ldlm_internal.h::ldlm_init" ref="aa38ba5ece9587fb13ea1d88c737f0129" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l03154">3154</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__idl_8h_source.html#l02809">LCK_MODE_NUM</a>, <a class="el" href="ldlm__resource_8c_source.html#l00061">ldlm_cli_active_namespace_list</a>, <a class="el" href="ldlm__resource_8c_source.html#l00063">ldlm_cli_inactive_namespace_list</a>, <a class="el" href="ldlm__extent_8c_source.html#l00835">ldlm_interval_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00049">ldlm_interval_tree_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_lock_slab</a>, <a class="el" href="lustre__dlm_8h_source.html#l00096">LDLM_NAMESPACE_CLIENT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00059">ldlm_ref_mutex</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_resource_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00055">ldlm_srv_namespace_list</a>, and <a class="el" href="lustre__compat_8h_source.html#l00165">SLAB_DESTROY_BY_RCU</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ac0277782c9f1f913efc748d14ec00e3c"></a><!-- doxytag: member="ldlm_internal.h::ldlm_init_flock_export" ref="ac0277782c9f1f913efc748d14ec00e3c" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_init_flock_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00936">936</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00165">CFS_HASH_DEFAULT</a>, <a class="el" href="libcfs__hash_8h_source.html#l00775">CFS_HASH_MAX_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00774">CFS_HASH_MIN_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00159">CFS_HASH_NBLK_CHANGE</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00226">obd_export::exp_flock_hash</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd__support_8h_source.html#l00102">HASH_EXP_LOCK_BKT_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00103">HASH_EXP_LOCK_CUR_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00104">HASH_EXP_LOCK_MAX_BITS</a>, <a class="el" href="obd_8h_source.html#l00459">LUSTRE_MDT_NAME</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02884">ldlm_init_export()</a>.</p>

</div>
</div>
<a class="anchor" id="a31a3b9fb321b321b78b5e136f2c13fc1"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_alloc" ref="a31a3b9fb321b321b78b5e136f2c13fc1" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a>* ldlm_interval_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00836">836</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="obd__support_8h_source.html#l00851">OBD_SLAB_ALLOC_PTR_GFP</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ed0a6988e4976918a2685c7f2e99647"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_attach" ref="a9ed0a6988e4976918a2685c7f2e99647" args="(struct ldlm_interval *n, struct ldlm_lock *l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_interval_attach </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>l</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00861">861</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00882">ldlm_lock::l_sl_policy</a>, <a class="el" href="lustre__dlm_8h_source.html#l00709">ldlm_lock::l_tree_node</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00836">ldlm_interval_alloc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b2c3d80252653f6a2ee3d2c6ddc1c98"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_detach" ref="a6b2c3d80252653f6a2ee3d2c6ddc1c98" args="(struct ldlm_lock *l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a>* ldlm_interval_detach </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>l</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00871">871</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00882">ldlm_lock::l_sl_policy</a>, <a class="el" href="lustre__dlm_8h_source.html#l00709">ldlm_lock::l_tree_node</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="list_8h_source.html#l00161">list_empty()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00936">ldlm_extent_unlink_lock()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="ae695d907b4f5d2cfc6bf1e94d4c68b48"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_extent" ref="ae695d907b4f5d2cfc6bf1e94d4c68b48" args="(struct ldlm_interval *node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structldlm__extent.html">ldlm_extent</a>* ldlm_interval_extent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00243">243</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00882">ldlm_lock::l_sl_policy</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, and <a class="el" href="list_8h_source.html#l00043">list_head::next</a>.</p>

</div>
</div>
<a class="anchor" id="ad2b2b6fd5fa49b590c24bef2797d2bad"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_free" ref="ad2b2b6fd5fa49b590c24bef2797d2bad" args="(struct ldlm_interval *node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_interval_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00851">851</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="interval__tree_8h_source.html#l00065">interval_is_intree()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="lustre__dlm_8h_source.html#l00592">ldlm_interval::li_node</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, and <a class="el" href="obd__support_8h_source.html#l00832">OBD_SLAB_FREE</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00936">ldlm_extent_unlink_lock()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="ad08b8088fcdd1eea634b10f176c9bfeb"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_add_to_lru" ref="ad08b8088fcdd1eea634b10f176c9bfeb" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_add_to_lru </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds LDLM lock <em>lock</em> to namespace LRU. </p>
<p>Obtains necessary LRU locks first. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00298">298</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f288b7ae24e7b38725be10472ebd0b0"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_add_to_lru_nolock" ref="a0f288b7ae24e7b38725be10472ebd0b0" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_add_to_lru_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds LDLM lock <em>lock</em> to namespace LRU. </p>
<p>Assumes LRU is already locked. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00281">281</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00803">ldlm_lock::l_last_used</a>, <a class="el" href="lustre__dlm_8h_source.html#l00699">ldlm_lock::l_lru</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00170">ldlm_clear_skipped</a>, <a class="el" href="packet-lustre_8c_source.html#l00300">LDLM_FLOCK</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="lustre__dlm_8h_source.html#l00415">ldlm_namespace::ns_nr_unused</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00413">ldlm_namespace::ns_unused_list</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00298">ldlm_lock_add_to_lru()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00313">ldlm_lock_touch_in_lru()</a>.</p>

</div>
</div>
<a class="anchor" id="a6731d485dba03ece37507d6b4bebe97b"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_addref_internal" ref="a6731d485dba03ece37507d6b4bebe97b" args="(struct ldlm_lock *, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_addref_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add specified reader/writer reference to LDLM lock <em>lock</em>. </p>
<p>Locks LDLM lock and calls ldlm_lock_addref_internal_nolock to do the work. Only called for local locks. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00786">786</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00717">ldlm_lock_addref()</a>.</p>

</div>
</div>
<a class="anchor" id="abab4eda1e2a69537e3b99a6660cb95a9"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_addref_internal_nolock" ref="abab4eda1e2a69537e3b99a6660cb95a9" args="(struct ldlm_lock *, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_addref_internal_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helper function. </p>
<p>Add specified reader/writer reference to LDLM lock <em>lock</em>. r/w reference type is determined by <em>mode</em> Removes lock from LRU if it is there. Assumes the LDLM lock is already locked. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00735">735</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00885">ldlm_lock::l_reference</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="lustre__idl_8h_source.html#l02805">LCK_COS</a>, <a class="el" href="packet-lustre_8c_source.html#l00295">LCK_CR</a>, <a class="el" href="packet-lustre_8c_source.html#l00294">LCK_CW</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00297">LCK_GROUP</a>, <a class="el" href="packet-lustre_8c_source.html#l00296">LCK_NL</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01344">LDLM_LOCK_GET</a>, <a class="el" href="ldlm__internal_8h_source.html#l00171">ldlm_lock_remove_from_lru</a>, <a class="el" href="ldlm__lock_8c_source.html#l00052">ldlm_lockname</a>, and <a class="el" href="lu__ref_8h_source.html#l00210">lu_ref_add_atomic()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00786">ldlm_lock_addref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>.</p>

</div>
</div>
<a class="anchor" id="af29553310c1f2362ca2145806a061f27"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_create" ref="af29553310c1f2362ca2145806a061f27" args="(struct ldlm_namespace *ns, const struct ldlm_res_id *, enum ldlm_type type, enum ldlm_mode mode, const struct ldlm_callback_suite *cbs, void *data, __u32 lvb_len, enum lvb_type lvb_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* ldlm_lock_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structldlm__callback__suite.html">ldlm_callback_suite</a> *&nbsp;</td>
          <td class="paramname"> <em>cbs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>lvb_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a> <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and fill in new LDLM lock with specified properties. </p>
<p>Returns a referenced lock </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01641">1641</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="linux_2libcfs_8h_source.html#l00145">current_pid</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00822">ldlm_lock::l_ast_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00747">ldlm_lock::l_glimpse_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00819">ldlm_lock::l_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00818">ldlm_lock::l_lvb_len</a>, <a class="el" href="lustre__dlm_8h_source.html#l00812">ldlm_lock::l_lvb_type</a>, <a class="el" href="lustre__dlm_8h_source.html#l00855">ldlm_lock::l_pid</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00709">ldlm_lock::l_tree_node</a>, <a class="el" href="lustre__dlm_8h_source.html#l01209">ldlm_callback_suite::lcs_blocking</a>, <a class="el" href="lustre__dlm_8h_source.html#l01208">ldlm_callback_suite::lcs_completion</a>, <a class="el" href="lustre__dlm_8h_source.html#l01210">ldlm_callback_suite::lcs_glimpse</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00836">ldlm_interval_alloc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00345">ldlm_set_ns_srv</a>, <a class="el" href="lustre__dlm_8h_source.html#l00531">ns_is_server()</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00353">OBD_FAIL_LDLM_NEW_LOCK</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="afe7d8c906c5bd4a4e7178eda75a07197"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_decref_internal" ref="afe7d8c906c5bd4a4e7178eda75a07197" args="(struct ldlm_lock *, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_decref_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes reader/writer reference for LDLM lock <em>lock</em>. </p>
<p>Locks LDLM lock first. If the lock is determined to be client lock on a client and r/w refcount drops to zero and the lock is not blocked, the lock is added to LRU lock on the namespace. For blocked LDLM locks if r/w count drops to zero, blocking_ast is called. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00827">827</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00330">exp_connect_cancelset()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="packet-lustre_8c_source.html#l00297">LCK_GROUP</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02075">ldlm_bl_to_thread_lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l01831">ldlm_cancel_lru()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00259">ldlm_is_atomic_cb</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00271">ldlm_is_bl_ast</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00174">ldlm_is_cbpending</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00160">ldlm_is_fail_loc</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00210">ldlm_is_local</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00290">ldlm_is_no_lru</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00344">ldlm_is_ns_srv</a>, <a class="el" href="ldlm__lock_8c_source.html#l00298">ldlm_lock_add_to_lru()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01344">LDLM_LOCK_GET</a>, <a class="el" href="ldlm__internal_8h_source.html#l00171">ldlm_lock_remove_from_lru</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">ldlm_set_cbpending</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00553">ns_connect_lru_resize()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="obd__support_8h_source.html#l00352">OBD_FAIL_LDLM_CP_BL_RACE</a>, <a class="el" href="obd__support_8h_source.html#l00627">OBD_RACE</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="a77fe6cd8645a07f3e634d176400f1157"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_decref_internal_nolock" ref="a77fe6cd8645a07f3e634d176400f1157" args="(struct ldlm_lock *, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_decref_internal_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes reader/writer reference for LDLM lock <em>lock</em>. </p>
<p>Assumes LDLM lock is already locked. only called in ldlm_flock_destroy and for local locks. Does NOT add lock to LRU if no r/w references left to accomodate flock locks that cannot be placed in LRU. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00800">800</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00885">ldlm_lock::l_reference</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02805">LCK_COS</a>, <a class="el" href="packet-lustre_8c_source.html#l00295">LCK_CR</a>, <a class="el" href="packet-lustre_8c_source.html#l00294">LCK_CW</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00297">LCK_GROUP</a>, <a class="el" href="packet-lustre_8c_source.html#l00296">LCK_NL</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="ldlm__lock_8c_source.html#l00052">ldlm_lockname</a>, and <a class="el" href="lu__ref_8h_source.html#l00223">lu_ref_del()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c2af810ecacce9f1dbc9308e04b090b"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_destroy_nolock" ref="a3c2af810ecacce9f1dbc9308e04b090b" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_destroy_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys a LDLM lock <em>lock</em> that is already locked. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00422">422</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00885">ldlm_lock::l_reference</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, and <a class="el" href="lu__ref_8h_source.html#l00223">lu_ref_del()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ab33cfb99fd55dfe36c2d1c10ea329922"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_enqueue" ref="ab33cfb99fd55dfe36c2d1c10ea329922" args="(struct ldlm_namespace *, struct ldlm_lock **, void *cookie, __u64 *flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> ldlm_lock_enqueue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> **&nbsp;</td>
          <td class="paramname"> <em>lockp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enqueue (request) a lock. </p>
<p>Does not block. As a result of enqueue the lock would be put into granted or waiting list.</p>
<p>If namespace has intent policy sent and the lock has LDLM_FL_HAS_INTENT flag set, skip all the enqueueing and delegate lock processing to intent policy function. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01708">1708</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00079">ELDLM_LOCK_REPLACED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00709">ldlm_lock::l_tree_node</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00151">LDLM_FL_AST_DISCARD_DATA</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00048">LDLM_FL_BLOCK_CONV</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00040">LDLM_FL_BLOCK_GRANTED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00056">LDLM_FL_BLOCK_WAIT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00370">LDLM_FL_BLOCKED_MASK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00361">LDLM_FL_COS_ENABLED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00136">LDLM_FL_COS_INCOMPAT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00082">LDLM_FL_HAS_INTENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00076">LDLM_FL_INTENT_ONLY</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00032">LDLM_FL_LOCK_CHANGED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00100">LDLM_FL_NO_TIMEOUT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00070">LDLM_FL_REPLAY</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00355">LDLM_FL_RESENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00114">LDLM_FL_TEST_LOCK</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00835">ldlm_interval_slab</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00153">ldlm_set_ast_discard_data</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00363">ldlm_set_cos_enabled</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00138">ldlm_set_cos_incompat</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00116">ldlm_set_test_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00943">ldlm_resource::lr_converting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="lustre__dlm_8h_source.html#l00947">ldlm_resource::lr_waiting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00446">ldlm_namespace::ns_policy</a>, <a class="el" href="obd__support_8h_source.html#l00851">OBD_SLAB_ALLOC_PTR_GFP</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cd4f877866749dceb72ca5c7b0c8e36"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_remove_from_lru_check" ref="a7cd4f877866749dceb72ca5c7b0c8e36" args="(struct ldlm_lock *lock, cfs_time_t last_use)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_lock_remove_from_lru_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td>
          <td class="paramname"> <em>last_use</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes LDLM lock <em>lock</em> from LRU. </p>
<p>Obtains the LRU lock first.</p>
<p>If <em>last_use</em> is non-zero, it will remove the lock from LRU only if it matches lock's l_last_used.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if <em>last_use</em> is set, the lock is not in LRU list or <em>last_use</em> doesn't match lock's l_last_used; otherwise, the lock hasn't been in the LRU list. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>the lock was in LRU list and removed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00259">259</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00803">ldlm_lock::l_last_used</a>, <a class="el" href="lustre__dlm_8h_source.html#l00699">ldlm_lock::l_lru</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00344">ldlm_is_ns_srv</a>, <a class="el" href="ldlm__lock_8c_source.html#l00233">ldlm_lock_remove_from_lru_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="aa905e3097901c0a7bb2744fdd8668e57"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_remove_from_lru_nolock" ref="aa905e3097901c0a7bb2744fdd8668e57" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_lock_remove_from_lru_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes LDLM lock <em>lock</em> from LRU. </p>
<p>Assumes LRU is already locked. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00233">233</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00699">ldlm_lock::l_lru</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00300">LDLM_FLOCK</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00415">ldlm_namespace::ns_nr_unused</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00259">ldlm_lock_remove_from_lru_check()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00313">ldlm_lock_touch_in_lru()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2b695dcf2e2be0bbfa73c8fc7eef92a"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_touch_in_lru" ref="ab2b695dcf2e2be0bbfa73c8fc7eef92a" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_touch_in_lru </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Moves LDLM lock <em>lock</em> that is already in namespace LRU to the tail of the LRU. </p>
<p>Performs necessary LRU locking </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00313">313</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00699">ldlm_lock::l_lru</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00344">ldlm_is_ns_srv</a>, <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00233">ldlm_lock_remove_from_lru_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>.</p>

</div>
</div>
<a class="anchor" id="afd9a10b1ffc1a961a7a50ba076145534"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_first_locked" ref="afd9a10b1ffc1a961a7a50ba076145534" args="(enum ldlm_side)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a>* ldlm_namespace_first_locked </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should be called with ldlm_namespace_lock(client) taken. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01123">1123</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00070">ldlm_namespace_list()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>.</p>

</div>
</div>
<a class="anchor" id="a1d1d7d748068f1cde0fb545fb41b9143"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_inactive_list" ref="a1d1d7d748068f1cde0fb545fb41b9143" args="(enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlist__head.html">list_head</a>* ldlm_namespace_inactive_list </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00077">77</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00063">ldlm_cli_inactive_namespace_list</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00055">ldlm_srv_namespace_list</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01113">ldlm_namespace_move_to_inactive_locked()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01081">ldlm_namespace_register()</a>.</p>

</div>
</div>
<a class="anchor" id="af67ad3c9f03b5e31299d0e82d2c081f5"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_list" ref="af67ad3c9f03b5e31299d0e82d2c081f5" args="(enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlist__head.html">list_head</a>* ldlm_namespace_list </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00070">70</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00061">ldlm_cli_active_namespace_list</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00055">ldlm_srv_namespace_list</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01389">ldlm_dump_all_namespaces()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01123">ldlm_namespace_first_locked()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01104">ldlm_namespace_move_to_active_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="a62dea473f603ac77a87d7e6be6fb9a56"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_lock" ref="a62dea473f603ac77a87d7e6be6fb9a56" args="(enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct mutex* ldlm_namespace_lock </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00083">83</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00057">ldlm_cli_namespace_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00054">ldlm_srv_namespace_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01389">ldlm_dump_all_namespaces()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01123">ldlm_namespace_first_locked()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01104">ldlm_namespace_move_to_active_locked()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01113">ldlm_namespace_move_to_inactive_locked()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01081">ldlm_namespace_register()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01091">ldlm_namespace_unregister()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>.</p>

</div>
</div>
<a class="anchor" id="aecf1478dfdde9707bdd9d70a74f05487"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_move_to_active_locked" ref="aecf1478dfdde9707bdd9d70a74f05487" args="(struct ldlm_namespace *, enum ldlm_side)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_move_to_active_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should be called with ldlm_namespace_lock(client) taken. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01104">1104</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00070">ldlm_namespace_list()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>.</p>

</div>
</div>
<a class="anchor" id="af4c8a9cc9d68dbcfc12f9707ca32671c"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_move_to_inactive_locked" ref="af4c8a9cc9d68dbcfc12f9707ca32671c" args="(struct ldlm_namespace *, enum ldlm_side)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_move_to_inactive_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should be called with ldlm_namespace_lock(client) taken. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01113">1113</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00077">ldlm_namespace_inactive_list()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00150">list_move_tail()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>.</p>

</div>
</div>
<a class="anchor" id="a8299d7574bb848cb52d15d57c3440feb"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_nr_dec" ref="a8299d7574bb848cb52d15d57c3440feb" args="(enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_namespace_nr_dec </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00062">62</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00052">ldlm_cli_namespace_nr</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00051">ldlm_srv_namespace_nr</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01091">ldlm_namespace_unregister()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f10e8a56ece9ebce949ad92d6425610"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_nr_inc" ref="a3f10e8a56ece9ebce949ad92d6425610" args="(enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_namespace_nr_inc </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00054">54</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00052">ldlm_cli_namespace_nr</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00051">ldlm_srv_namespace_nr</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01081">ldlm_namespace_register()</a>.</p>

</div>
</div>
<a class="anchor" id="af987c4efbc583019afaebb214fbf81b4"></a><!-- doxytag: member="ldlm_internal.h::ldlm_namespace_nr_read" ref="af987c4efbc583019afaebb214fbf81b4" args="(enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_namespace_nr_read </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00048">48</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00052">ldlm_cli_namespace_nr</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00051">ldlm_srv_namespace_nr</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f3bed5e2368fe8c5493a09ce73b06e8"></a><!-- doxytag: member="ldlm_internal.h::ldlm_ns_empty" ref="a8f3bed5e2368fe8c5493a09ce73b06e8" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_ns_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__internal_8h_source.html#l00090">90</a> of file <a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00383">ldlm_namespace::ns_bref</a>.</p>

</div>
</div>
<a class="anchor" id="a7b7396bcef072482a5b4229cb7c792c8"></a><!-- doxytag: member="ldlm_internal.h::ldlm_plain_policy_local_to_wire" ref="a7b7396bcef072482a5b4229cb7c792c8" args="(const union ldlm_policy_data *lpolicy, union ldlm_wire_policy_data *wpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_plain_policy_local_to_wire </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__plain_8c_source.html#l00198">198</a> of file <a class="el" href="ldlm__plain_8c_source.html">ldlm_plain.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2dc00ec9abd000a9ac324e89b3837361"></a><!-- doxytag: member="ldlm_internal.h::ldlm_plain_policy_wire_to_local" ref="a2dc00ec9abd000a9ac324e89b3837361" args="(const union ldlm_wire_policy_data *wpolicy, union ldlm_policy_data *lpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_plain_policy_wire_to_local </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__plain_8c_source.html#l00192">192</a> of file <a class="el" href="ldlm__plain_8c_source.html">ldlm_plain.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5e963b8762a5ee599e17ab4bb5232cea"></a><!-- doxytag: member="ldlm_internal.h::ldlm_process_flock_lock" ref="a5e963b8762a5ee599e17ab4bb5232cea" args="(struct ldlm_lock *req, __u64 *flags, int first_enq, enum ldlm_error *err, struct list_head *work_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_process_flock_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first_enq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> *&nbsp;</td>
          <td class="paramname"> <em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>work_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process a granting attempt for flock lock. </p>
<p>Must be called under ns lock held.</p>
<p>This function looks for any conflicts for <em>lock</em> in the granted or waiting queues. The lock is granted if no conflicts are found in either queue.</p>
<p>It is also responsible for splitting a lock if a portion of the lock is released.</p>
<p>If <em>first_enq</em> is 0 (ie, called from ldlm_reprocess_queue):</p>
<ul>
<li>blocking ASTs have already been sent</li>
</ul>
<p>If <em>first_enq</em> is 1 (ie, called from ldlm_lock_enqueue):</p>
<ul>
<li>blocking ASTs have not been sent yet, so list of conflicting locks would be collected and ASTs sent. </li>
</ul>

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00289">289</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01204">cfs_hash_add()</a>, <a class="el" href="obd__class_8h_source.html#l00254">class_export_lock_get</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00221">obd_export::exp_lock_hash</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00714">ldlm_lock::l_exp_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00766">ldlm_lock::l_remote_handle</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00296">LCK_NL</a>, <a class="el" href="ldlm__lock_8c_source.html#l00700">ldlm_add_ast_work_item()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00040">LDLM_FL_BLOCK_GRANTED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00108">LDLM_FL_BLOCK_NOWAIT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00032">LDLM_FL_LOCK_CHANGED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00114">LDLM_FL_TEST_LOCK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00179">LDLM_FL_WAIT_NOREPROC</a>, <a class="el" href="packet-lustre_8c_source.html#l00300">LDLM_FLOCK</a>, <a class="el" href="ldlm__flock_8c_source.html#l00828">ldlm_flock_blocking_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00098">ldlm_flock_blocking_link()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00192">ldlm_flock_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00090">ldlm_flocks_overlap()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01180">LDLM_ITER_CONTINUE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01181">LDLM_ITER_STOP</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01448">ldlm_resource_dump()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02050">ldlm_run_ast_work()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00082">ldlm_same_flock_owner()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00141">LDLM_WORK_CP_AST</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="ldlm__flock_8c_source.html#l00078">list_for_remaining_safe</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00157">lockmode_compat()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00152">lockmode_verify()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00947">ldlm_resource::lr_waiting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="lustre__idl_8h_source.html#l01767">OBD_OBJECT_EOF</a>, <a class="el" href="lustre__dlm_8h_source.html#l00624">ldlm_flock::owner</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="a90c10ddd350714c16e1657df4cdf2049"></a><!-- doxytag: member="ldlm_internal.h::ldlm_reclaim_add" ref="a90c10ddd350714c16e1657df4cdf2049" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_reclaim_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__reclaim_8c_source.html#l00392">392</a> of file <a class="el" href="ldlm__reclaim_8c_source.html">ldlm_reclaim.c</a>.</p>

</div>
</div>
<a class="anchor" id="a80b7134c020a83aa5723384cb7fd0487"></a><!-- doxytag: member="ldlm_internal.h::ldlm_reclaim_cleanup" ref="a80b7134c020a83aa5723384cb7fd0487" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_reclaim_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__reclaim_8c_source.html#l00405">405</a> of file <a class="el" href="ldlm__reclaim_8c_source.html">ldlm_reclaim.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a309c90291e7eba08387606b2a44d53f8"></a><!-- doxytag: member="ldlm_internal.h::ldlm_reclaim_del" ref="a309c90291e7eba08387606b2a44d53f8" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_reclaim_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__reclaim_8c_source.html#l00396">396</a> of file <a class="el" href="ldlm__reclaim_8c_source.html">ldlm_reclaim.c</a>.</p>

</div>
</div>
<a class="anchor" id="acc5cad10817acf0e60869abddae4df2f"></a><!-- doxytag: member="ldlm_internal.h::ldlm_reclaim_full" ref="acc5cad10817acf0e60869abddae4df2f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ldlm_reclaim_full </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__reclaim_8c_source.html#l00387">387</a> of file <a class="el" href="ldlm__reclaim_8c_source.html">ldlm_reclaim.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae87a3dd643c1d444e296d13bcd7839a2"></a><!-- doxytag: member="ldlm_internal.h::ldlm_reclaim_setup" ref="ae87a3dd643c1d444e296d13bcd7839a2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_reclaim_setup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__reclaim_8c_source.html#l00400">400</a> of file <a class="el" href="ldlm__reclaim_8c_source.html">ldlm_reclaim.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="ab57a0c25a1566b0efd06521d8a5c15b3"></a><!-- doxytag: member="ldlm_internal.h::ldlm_resource_insert_lock_after" ref="ab57a0c25a1566b0efd06521d8a5c15b3" args="(struct ldlm_lock *original, struct ldlm_lock *new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_resource_insert_lock_after </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>original</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert a lock into resource after specified lock. </p>
<p>Obtain resource description from the lock we are inserting after. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01345">1345</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">ldlm_is_destroyed</a>, <a class="el" href="ldlm__resource_8c_source.html#l01448">ldlm_resource_dump()</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, and <a class="el" href="list_8h_source.html#l00161">list_empty()</a>.</p>

</div>
</div>
<a class="anchor" id="a825464ac0dd43ec4bce6013052cd1a30"></a><!-- doxytag: member="ldlm_internal.h::ldlm_run_ast_work" ref="a825464ac0dd43ec4bce6013052cd1a30" args="(struct ldlm_namespace *ns, struct list_head *rpc_list, ldlm_desc_ast_t ast_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_run_ast_work </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>rpc_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ldlm__internal_8h.html#ab2beeaa64c7143ab8c4b9f89b522a312">ldlm_desc_ast_t</a>&nbsp;</td>
          <td class="paramname"> <em>ast_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process list of locks in need of ASTs being sent. </p>
<p>Used on server to send multiple ASTs together instead of sending one by one. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02050">2050</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00287">LDLM_BL_CALLBACK</a>, <a class="el" href="packet-lustre_8c_source.html#l00288">LDLM_CP_CALLBACK</a>, <a class="el" href="packet-lustre_8c_source.html#l00289">LDLM_GL_CALLBACK</a>, <a class="el" href="ldlm__internal_8h_source.html#l00140">LDLM_WORK_BL_AST</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00141">LDLM_WORK_CP_AST</a>, <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00143">LDLM_WORK_GL_AST</a>, <a class="el" href="ldlm__lock_8c_source.html#l02012">ldlm_work_gl_ast_lock()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00142">LDLM_WORK_REVOKE_AST</a>, <a class="el" href="ldlm__lock_8c_source.html#l01984">ldlm_work_revoke_ast_lock()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00135">ldlm_cb_set_arg::list</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00492">ldlm_namespace::ns_max_parallel_ast</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="client_8c_source.html#l00948">ptlrpc_prep_fcset()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00134">ldlm_cb_set_arg::restart</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="ldlm__internal_8h_source.html#l00132">ldlm_cb_set_arg::set</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00133">ldlm_cb_set_arg::type</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>.</p>

</div>
</div>
<a class="anchor" id="afa16fd0c6f6dcd2514b6c529e58fa402"></a><!-- doxytag: member="ldlm_internal.h::ldlm_work_gl_ast_lock" ref="afa16fd0c6f6dcd2514b6c529e58fa402" args="(struct ptlrpc_request_set *rqset, void *opaq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_work_gl_ast_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>rqset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>opaq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process a call to glimpse AST callback for a lock in ast_work list. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02012">2012</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00583">ldlm_glimpse_work::gl_desc</a>, <a class="el" href="ldlm__internal_8h_source.html#l00136">ldlm_cb_set_arg::gl_desc</a>, <a class="el" href="lustre__dlm_8h_source.html#l00582">ldlm_glimpse_work::gl_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00581">ldlm_glimpse_work::gl_list</a>, <a class="el" href="lustre__dlm_8h_source.html#l00580">ldlm_glimpse_work::gl_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00747">ldlm_lock::l_glimpse_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00588">LDLM_GL_WORK_NOFREE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="ldlm__internal_8h_source.html#l00135">ldlm_cb_set_arg::list</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02050">ldlm_run_ast_work()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a27b7071107b0390cd461fa9679d8d67a"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cancel_unused_locks_before_replay" ref="a27b7071107b0390cd461fa9679d8d67a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="ldlm__request_8c.html#a27b7071107b0390cd461fa9679d8d67a">ldlm_cancel_unused_locks_before_replay</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__request_8c_source.html#l00075">75</a> of file <a class="el" href="ldlm__request_8c_source.html">ldlm_request.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l02338">ldlm_replay_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="ad88b841e9005e7f66972e07bffd86e8d"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cli_active_namespace_list" ref="ad88b841e9005e7f66972e07bffd86e8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="ldlm__resource_8c.html#ad88b841e9005e7f66972e07bffd86e8d">ldlm_cli_active_namespace_list</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00061">61</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00070">ldlm_namespace_list()</a>.</p>

</div>
</div>
<a class="anchor" id="a35156be279ece93a994e4da8a0e0a9e6"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cli_inactive_namespace_list" ref="a35156be279ece93a994e4da8a0e0a9e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="ldlm__resource_8c.html#a35156be279ece93a994e4da8a0e0a9e6">ldlm_cli_inactive_namespace_list</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00063">63</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00077">ldlm_namespace_inactive_list()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ee4fa2cc0bc46d51f33b2bf7397ca8b"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cli_namespace_lock" ref="a0ee4fa2cc0bc46d51f33b2bf7397ca8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="ldlm__resource_8c.html#a0ee4fa2cc0bc46d51f33b2bf7397ca8b">ldlm_cli_namespace_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00057">57</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a23b0721100ca96e559afd7c8f313a8fc"></a><!-- doxytag: member="ldlm_internal.h::ldlm_cli_namespace_nr" ref="a23b0721100ca96e559afd7c8f313a8fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ldlm__resource_8c.html#a23b0721100ca96e559afd7c8f313a8fc">ldlm_cli_namespace_nr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00052">52</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__internal_8h_source.html#l00062">ldlm_namespace_nr_dec()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00054">ldlm_namespace_nr_inc()</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00048">ldlm_namespace_nr_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a203c443910cb010024d2111b0126d31d"></a><!-- doxytag: member="ldlm_internal.h::ldlm_enqueue_min" ref="a203c443910cb010024d2111b0126d31d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="ldlm__request_8c.html#a203c443910cb010024d2111b0126d31d">ldlm_enqueue_min</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__request_8c_source.html#l00070">70</a> of file <a class="el" href="ldlm__request_8c_source.html">ldlm_request.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00142">ldlm_cp_timeout()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a58728caf594b6e256b78ca63d913a0"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_slab" ref="a0a58728caf594b6e256b78ca63d913a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="ldlm__internal_8h.html#a0a58728caf594b6e256b78ca63d913a0">ldlm_interval_slab</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00835">835</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03203">ldlm_exit()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a1aa84ca4dd44bf9c654c0479b73180c9"></a><!-- doxytag: member="ldlm_internal.h::ldlm_interval_tree_slab" ref="a1aa84ca4dd44bf9c654c0479b73180c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="ldlm__resource_8c.html#a1aa84ca4dd44bf9c654c0479b73180c9">ldlm_interval_tree_slab</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00049">49</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03203">ldlm_exit()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01132">ldlm_resource_new()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>.</p>

</div>
</div>
<a class="anchor" id="ab042af710154778086ba81ee05d69fd1"></a><!-- doxytag: member="ldlm_internal.h::ldlm_lock_slab" ref="ab042af710154778086ba81ee05d69fd1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="ldlm__resource_8c.html#a0ae39e5722c7234b717cc6ac1ce34859">ldlm_lock_slab</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00048">48</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03203">ldlm_exit()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00441">lock_handle_free()</a>.</p>

</div>
</div>
<a class="anchor" id="acb98b65219256c616841d749d3de31e7"></a><!-- doxytag: member="ldlm_internal.h::ldlm_resource_slab" ref="acb98b65219256c616841d749d3de31e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="ldlm__resource_8c.html#acb98b65219256c616841d749d3de31e7">ldlm_resource_slab</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00048">48</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03203">ldlm_exit()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01132">ldlm_resource_new()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>.</p>

</div>
</div>
<a class="anchor" id="ae0e174d0a32f759a3ffb05677c3edf6c"></a><!-- doxytag: member="ldlm_internal.h::ldlm_srv_namespace_list" ref="ae0e174d0a32f759a3ffb05677c3edf6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="ldlm__resource_8c.html#ae0e174d0a32f759a3ffb05677c3edf6c">ldlm_srv_namespace_list</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00055">55</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00077">ldlm_namespace_inactive_list()</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00070">ldlm_namespace_list()</a>.</p>

</div>
</div>
<a class="anchor" id="ab5f30b0e6fa52fb684602dcc1793edd7"></a><!-- doxytag: member="ldlm_internal.h::ldlm_srv_namespace_lock" ref="ab5f30b0e6fa52fb684602dcc1793edd7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="ldlm__resource_8c.html#ab5f30b0e6fa52fb684602dcc1793edd7">ldlm_srv_namespace_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00054">54</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c019a99e77a74f95abc4f289425e8a1"></a><!-- doxytag: member="ldlm_internal.h::ldlm_srv_namespace_nr" ref="a1c019a99e77a74f95abc4f289425e8a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ldlm__resource_8c.html#a1c019a99e77a74f95abc4f289425e8a1">ldlm_srv_namespace_nr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00051">51</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__internal_8h_source.html#l00062">ldlm_namespace_nr_dec()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00054">ldlm_namespace_nr_inc()</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00048">ldlm_namespace_nr_read()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3742f60905790dbaabfb7156cfa3791"></a><!-- doxytag: member="ldlm_internal.h::ldlm_svc_proc_dir" ref="ab3742f60905790dbaabfb7156cfa3791" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct proc_dir_entry* <a class="el" href="ldlm__resource_8c.html#ab3742f60905790dbaabfb7156cfa3791">ldlm_svc_proc_dir</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00067">67</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
