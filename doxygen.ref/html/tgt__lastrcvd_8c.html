<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/target/tgt_lastrcvd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/target/tgt_lastrcvd.c File Reference</h1><code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>&quot;</code><br/>

<p><a href="tgt__lastrcvd_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtgt__last__committed__callback.html">tgt_last_committed_callback</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">commit callback, need to update last_committed value  <a href="structtgt__last__committed__callback.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtgt__new__client__callback.html">tgt_new_client_callback</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structserver__compat__data.html">server_compat_data</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a62ec823c220e9143d18d70a9e10cbd6a">tgt_bitmap_chunk_alloc</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut, int chunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a5ef235e17c1260f4121ace578e166cff">tgt_find_free_reply_slot</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a683f013f8374218d81dc7e20404b4bea">tgt_set_reply_slot</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ae2d4b377b1550251cdd521be469fc95a">tgt_clear_reply_slot</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#aa3685a5c15bc3a4e8a3599f56cbf5a7c">tgt_reply_header_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structlsd__reply__header.html">lsd_reply_header</a> *<a class="el" href="llog__test_8c.html#ac46c031ff3a4268a1d002bfd2f4e0773">lrh</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a17b9e4c283d28e92fab771443bf8feb4">tgt_reply_header_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structlsd__reply__header.html">lsd_reply_header</a> *<a class="el" href="llog__test_8c.html#ac46c031ff3a4268a1d002bfd2f4e0773">lrh</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a62e1f1275c502cbf71f491e3161eab5c">tgt_reply_data_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structlsd__reply__data.html">lsd_reply_data</a> *lrd, loff_t off, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a0c472c67a4742b3f6272b59adc9f77f6">tgt_reply_data_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structlsd__reply__data.html">lsd_reply_data</a> *lrd, loff_t off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ae82dadd67212e698c7d0a59946caacf1">tgt_free_reply_data</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut, struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *ted, struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *trd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ac57b0abfc4247ed97a19a328c54d7bfa">tgt_release_reply_data</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut, struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *ted, struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *trd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#abc190c959cccb615c91afa7ae40ddd53">tti_buf_lsd</a> (struct <a class="el" href="structtgt__thread__info.html">tgt_thread_info</a> *tti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#aaf15a0b780510b81f33fa75d9628694f">tti_buf_lcd</a> (struct <a class="el" href="structtgt__thread__info.html">tgt_thread_info</a> *tti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a966e85cbe21fdedaf9f1cf0057dfa341">tgt_client_alloc</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate in-memory data for client slot related to export.  <a href="#a966e85cbe21fdedaf9f1cf0057dfa341"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#af04621983d0b7bdad298df78aba0d805">tgt_client_free</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free in-memory data for client slot related to export.  <a href="#af04621983d0b7bdad298df78aba0d805"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a018326bf85d57dd5427e77b967470f2f">tgt_client_data_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structlsd__client__data.html">lsd_client_data</a> *lcd, loff_t *off, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a93658409aa3a5626955822a2f79c83e6">tgt_client_data_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structlsd__client__data.html">lsd_client_data</a> *lcd, loff_t *off, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a138757be1336910d9bb4d9733fa64a10">tgt_client_data_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update client data in last_rcvd.  <a href="#a138757be1336910d9bb4d9733fa64a10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#abda6a1ac5f7f1d359774076e98b23d44">tgt_server_data_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#aa8596bf888a102f6d49b408fd7616890">tgt_server_data_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a35157538db2dea1fd246703f2a4be4d1">tgt_server_data_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, int sync)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update server data in last_rcvd.  <a href="#a35157538db2dea1fd246703f2a4be4d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ad95589020f702c5b127df32656671099">tgt_truncate_last_rcvd</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, loff_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a1640848cd0e498666155752196f88269">tgt_client_epoch_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ae5fbfb4f9751c515720b4ea86cd4793e">tgt_boot_epoch_update</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *tgt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update boot epoch when recovery ends.  <a href="#ae5fbfb4f9751c515720b4ea86cd4793e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a85860e4d8aa92e0aba08ce4de2398fc5">tgt_cb_last_committed</a> (struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structdt__txn__commit__cb.html">dt_txn_commit_cb</a> *cb, int err)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#addf43010b42052a0ae427b1afce55755">tgt_last_commit_cb_add</a> (struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> transno)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a86bd807ab99325118f027327bc4d4690">tgt_cb_new_client</a> (struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structdt__txn__commit__cb.html">dt_txn_commit_cb</a> *cb, int err)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a5f180728c17078b181dad874c5d65d55">tgt_new_client_cb_add</a> (struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a23c88323485616363f9a90c9e25bb97f">tgt_client_new</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add new client to the last_rcvd upon new connection.  <a href="#a23c88323485616363f9a90c9e25bb97f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a2a211b79ba092875f1d3ad08eeea9f3c">tgt_client_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, int idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ae06355ce6f7b058a8680d0fc5c986d87">tgt_client_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ac72d931360580dc615579dd7062882d6">tgt_add_reply_data</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *ted, struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *trd, struct <a class="el" href="structthandle.html">thandle</a> *th, bool update_lrd_file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a3feb6626f6155c126221bc395a59f6d1">tgt_last_rcvd_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> opdata, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a7513a9d5af2dd47ea6ae1ad1ab28d6bf">tgt_last_rcvd_update_echo</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#abd76fcdb3e3fcf51730bd6474db88235">tgt_clients_data_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt, unsigned long last_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ae37e9b2446f0e1978dddcf101571b39b">tgt_server_data_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a38d59da36521433cfc15f37967c2746e">tgt_txn_start_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, void *cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a4422f06a2a87e28b67af5cf4d7443bac">tgt_txn_stop_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, void *cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ab99cd07cafbe621f74fd8da8d827085a">tgt_reply_data_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a1fa6c0879bfd16d9a66bb88abcccbe08">tgt_lookup_reply_by_xid</a> (struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *ted, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> xid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#ae293b0a02050bb040214fb913e9899ba">tgt_lookup_reply</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *trd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#aef5902c344803dae3f192bf81060cc8a">tgt_handle_received_xid</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> rcvd_xid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a12b3a46bfd86349b6ffb61cd0d8c8847">tgt_handle_tag</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u16 tag)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structserver__compat__data.html">server_compat_data</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__lastrcvd_8c.html#a9e16ef3c25324719bf3a461a0862cc74">tgt_scd</a> []</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac72d931360580dc615579dd7062882d6"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_add_reply_data" ref="ac72d931360580dc615579dd7062882d6" args="(const struct lu_env *env, struct lu_target *tgt, struct tg_export_data *ted, struct tg_reply_data *trd, struct thandle *th, bool update_lrd_file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_add_reply_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>trd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>update_lrd_file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01075">1075</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00129">D_TRACE</a>, <a class="el" href="lustre__disk_8h_source.html#l00358">lsd_client_data::lcd_last_transno</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00063">REPLY_DATA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00080">tg_export_data::ted_reply_cnt</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="lustre__export_8h_source.html#l00084">tg_export_data::ted_reply_max</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00079">tgt_find_free_reply_slot()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00246">tgt_reply_data_write()</a>, <a class="el" href="lu__target_8h_source.html#l00181">tg_reply_data::trd_index</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>, <a class="el" href="lu__target_8h_source.html#l00183">tg_reply_data::trd_tag</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a62ec823c220e9143d18d70a9e10cbd6a"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_bitmap_chunk_alloc" ref="a62ec823c220e9143d18d70a9e10cbd6a" args="(struct lu_target *lut, int chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_bitmap_chunk_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chunk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00049">49</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="lu__target_8h_source.html#l00150">lu_target::lut_client_bitmap_lock</a>, <a class="el" href="lu__target_8h_source.html#l00161">lu_target::lut_reply_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00167">LUT_REPLY_SLOTS_PER_CHUNK</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00079">tgt_find_free_reply_slot()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00114">tgt_set_reply_slot()</a>.</p>

</div>
</div>
<a class="anchor" id="ae5fbfb4f9751c515720b4ea86cd4793e"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_boot_epoch_update" ref="ae5fbfb4f9751c515720b4ea86cd4793e" args="(struct lu_target *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tgt_boot_epoch_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update boot epoch when recovery ends. </p>

<p><p>The recovery is not yet finished and final queue can still be updated with resend requests. Move final list to separate one for processing</p>
<p>go through list of exports participated in recovery and set new epoch for them</p>
<p>return list back at once</p>
<p>Clear MULTI RPCS incompatibility flag if</p>
<ul>
<li>target is MDT and</li>
<li>there is no client to recover or the recovery was aborted</li>
</ul>
<p>update server epoch </p>
</p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00690">690</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_delayed</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_vbr_failed</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="list_8h_source.html#l00227">list_splice_init()</a>, <a class="el" href="lustre__disk_8h_source.html#l00265">lr_epoch</a>, <a class="el" href="lustre__disk_8h_source.html#l00264">LR_EPOCH_BITS</a>, <a class="el" href="lustre__disk_8h_source.html#l00336">lr_server_data::lsd_feature_incompat</a>, <a class="el" href="lustre__disk_8h_source.html#l00346">lr_server_data::lsd_start_epoch</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="obd_8h_source.html#l00459">LUSTRE_MDT_NAME</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_abort_recovery</a>, <a class="el" href="obd_8h_source.html#l00690">obd_device::obd_final_req_queue</a>, <a class="el" href="lustre__disk_8h_source.html#l00325">OBD_INCOMPAT_MULTI_RPCS</a>, <a class="el" href="obd_8h_source.html#l00661">obd_device::obd_max_recoverable_clients</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00666">obd_device::obd_recovery_task_lock</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_stopping</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00673">tgt_client_epoch_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, and <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>.</p>

</div>
</div>
<a class="anchor" id="a85860e4d8aa92e0aba08ce4de2398fc5"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_cb_last_committed" ref="a85860e4d8aa92e0aba08ce4de2398fc5" args="(struct lu_env *env, struct thandle *th, struct dt_txn_commit_cb *cb, int err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tgt_cb_last_committed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__txn__commit__cb.html">dt_txn_commit_cb</a> *&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>err</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00761">761</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00281">class_export_cb_put</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__export_8h_source.html#l00231">obd_export::exp_last_committed</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00755">tgt_last_committed_callback::llcc_cb</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00757">tgt_last_committed_callback::llcc_exp</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00756">tgt_last_committed_callback::llcc_tgt</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00758">tgt_last_committed_callback::llcc_transno</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00046">LPD64</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00648">obd_device::obd_last_committed</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="service_8c_source.html#l00408">ptlrpc_commit_replies()</a>, and <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00798">tgt_last_commit_cb_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a86bd807ab99325118f027327bc4d4690"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_cb_new_client" ref="a86bd807ab99325118f027327bc4d4690" args="(struct lu_env *env, struct thandle *th, struct dt_txn_commit_cb *cb, int err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tgt_cb_new_client </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__txn__commit__cb.html">dt_txn_commit_cb</a> *&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>err</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00836">836</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00281">class_export_cb_put</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00240">obd_export::exp_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_need_sync</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00832">tgt_new_client_callback::lncc_cb</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00833">tgt_new_client_callback::lncc_exp</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00859">tgt_new_client_cb_add()</a>.</p>

</div>
</div>
<a class="anchor" id="ae2d4b377b1550251cdd521be469fc95a"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_clear_reply_slot" ref="ae2d4b377b1550251cdd521be469fc95a" args="(struct lu_target *lut, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_clear_reply_slot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00147">147</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__target_8h_source.html#l00161">lu_target::lut_reply_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00168">LUT_REPLY_SLOTS_MAX_CHUNKS</a>, <a class="el" href="lu__target_8h_source.html#l00167">LUT_REPLY_SLOTS_PER_CHUNK</a>, and <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00305">tgt_free_reply_data()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a211b79ba092875f1d3ad08eeea9f3c"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_add" ref="a2a211b79ba092875f1d3ad08eeea9f3c" args="(const struct lu_env *env, struct obd_export *exp, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_client_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00976">976</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__disk_8h_source.html#l00371">lsd_client_data::lcd_generation</a>, <a class="el" href="lustre__disk_8h_source.html#l00357">lsd_client_data::lcd_uuid</a>, <a class="el" href="lustre__disk_8h_source.html#l00339">lr_server_data::lsd_client_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00338">lr_server_data::lsd_client_start</a>, <a class="el" href="lu__target_8h_source.html#l00152">lu_target::lut_client_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00155">lu_target::lut_num_clients</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l01235">OBD_CONNECT_LIGHTWEIGHT</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00070">tg_export_data::ted_lr_idx</a>, <a class="el" href="lustre__export_8h_source.html#l00068">tg_export_data::ted_lr_off</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01369">tgt_clients_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a966e85cbe21fdedaf9f1cf0057dfa341"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_alloc" ref="a966e85cbe21fdedaf9f1cf0057dfa341" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_client_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate in-memory data for client slot related to export. </p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00376">376</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05360">mdt_init_export()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00456">ofd_init_export()</a>.</p>

</div>
</div>
<a class="anchor" id="a018326bf85d57dd5427e77b967470f2f"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_data_read" ref="a018326bf85d57dd5427e77b967470f2f" args="(const struct lu_env *env, struct lu_target *tgt, struct lsd_client_data *lcd, loff_t *off, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_client_data_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsd__client__data.html">lsd_client_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00441">441</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__disk_8h_source.html#l00400">check_lcd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8c_source.html#l00490">dt_record_read()</a>, <a class="el" href="lustre__disk_8h_source.html#l00365">lsd_client_data::lcd_last_close_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00363">lsd_client_data::lcd_last_close_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00364">lsd_client_data::lcd_last_close_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00361">lsd_client_data::lcd_last_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00360">lsd_client_data::lcd_last_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00358">lsd_client_data::lcd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00359">lsd_client_data::lcd_last_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00468">lcd_le_to_cpu()</a>, <a class="el" href="lustre__disk_8h_source.html#l00357">lsd_client_data::lcd_uuid</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__net_8h_source.html#l02407">ptlrpc_status_ntoh()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00366">tti_buf_lcd()</a>, and <a class="el" href="tgt__internal_8h_source.html#l00057">tgt_thread_info::tti_lcd</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01369">tgt_clients_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a138757be1336910d9bb4d9733fa64a10"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_data_update" ref="a138757be1336910d9bb4d9733fa64a10" args="(const struct lu_env *env, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_client_data_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update client data in last_rcvd. </p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">488</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00240">obd_export::exp_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_need_sync</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00330">lr_server_data::lsd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00120">lu_target::lut_bottom</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00068">tg_export_data::ted_lr_off</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00468">tgt_client_data_write()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00859">tgt_new_client_cb_add()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00366">tti_buf_lcd()</a>, <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01013">tgt_client_del()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00673">tgt_client_epoch_update()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00890">tgt_client_new()</a>.</p>

</div>
</div>
<a class="anchor" id="a93658409aa3a5626955822a2f79c83e6"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_data_write" ref="a93658409aa3a5626955822a2f79c83e6" args="(const struct lu_env *env, struct lu_target *tgt, struct lsd_client_data *lcd, loff_t *off, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_client_data_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsd__client__data.html">lsd_client_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00468">468</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="lustre__disk_8h_source.html#l00488">lcd_cpu_to_le()</a>, <a class="el" href="lustre__disk_8h_source.html#l00365">lsd_client_data::lcd_last_close_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00360">lsd_client_data::lcd_last_result</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lustre__net_8h_source.html#l02395">ptlrpc_status_hton()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00366">tti_buf_lcd()</a>, and <a class="el" href="tgt__internal_8h_source.html#l00057">tgt_thread_info::tti_lcd</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01329">tgt_last_rcvd_update_echo()</a>.</p>

</div>
</div>
<a class="anchor" id="ae06355ce6f7b058a8680d0fc5c986d87"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_del" ref="ae06355ce6f7b058a8680d0fc5c986d87" args="(const struct lu_env *env, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_client_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01013">1013</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00244">obd_export::exp_flags</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__disk_8h_source.html#l00357">lsd_client_data::lcd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00152">lu_target::lut_client_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l01235">OBD_CONNECT_LIGHTWEIGHT</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__export_8h_source.html#l00158">OBD_OPT_FAILOVER</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00070">tg_export_data::ted_lr_idx</a>, <a class="el" href="lustre__export_8h_source.html#l00068">tg_export_data::ted_lr_off</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05131">mdt_export_cleanup()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00411">ofd_obd_disconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="a1640848cd0e498666155752196f88269"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_epoch_update" ref="a1640848cd0e498666155752196f88269" args="(const struct lu_env *env, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tgt_client_epoch_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>VBR: set client last_epoch to current epoch </p>
</p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00673">673</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00369">lsd_client_data::lcd_last_epoch</a>, <a class="el" href="lustre__disk_8h_source.html#l00346">lr_server_data::lsd_start_epoch</a>, <a class="el" href="lu__target_8h_source.html#l00120">lu_target::lut_bottom</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00690">tgt_boot_epoch_update()</a>.</p>

</div>
</div>
<a class="anchor" id="af04621983d0b7bdad298df78aba0d805"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_free" ref="af04621983d0b7bdad298df78aba0d805" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tgt_client_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free in-memory data for client slot related to export. </p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00395">395</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01291">cfs_hash_del()</a>, <a class="el" href="lustre__export_8h_source.html#l00200">obd_export::exp_gen_hash</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="list_8h_source.html#l00318">hlist_unhashed()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__disk_8h_source.html#l00371">lsd_client_data::lcd_generation</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lu__target_8h_source.html#l00152">lu_target::lut_client_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00155">lu_target::lut_num_clients</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00632">obd_device::obd_gen_hash</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_stopping</a>, <a class="el" href="obd__target_8h_source.html#l00041">OBT_MAGIC</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00070">tg_export_data::ted_lr_idx</a>, <a class="el" href="lustre__export_8h_source.html#l00082">tg_export_data::ted_reply_last</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00305">tgt_free_reply_data()</a>, <a class="el" href="lu__target_8h_source.html#l00351">tgt_is_multimodrpcs_client()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">tgt_release_reply_data()</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05397">mdt_destroy_export()</a>, <a class="el" href="mdt__handler_8c_source.html#l05360">mdt_init_export()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00492">ofd_destroy_export()</a>.</p>

</div>
</div>
<a class="anchor" id="a23c88323485616363f9a90c9e25bb97f"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_client_new" ref="a23c88323485616363f9a90c9e25bb97f" args="(const struct lu_env *env, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_client_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add new client to the last_rcvd upon new connection. </p>
<p>We use a bitmap to locate a free space in the last_rcvd file and initialize <a class="el" href="structtg__export__data.html" title="Target-specific export data.">tg_export_data</a>. </p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00890">890</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__disk_8h_source.html#l00371">lsd_client_data::lcd_generation</a>, <a class="el" href="lustre__disk_8h_source.html#l00357">lsd_client_data::lcd_uuid</a>, <a class="el" href="lustre__disk_8h_source.html#l00283">LR_MAX_CLIENTS</a>, <a class="el" href="lustre__disk_8h_source.html#l00339">lr_server_data::lsd_client_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00338">lr_server_data::lsd_client_start</a>, <a class="el" href="lustre__disk_8h_source.html#l00336">lr_server_data::lsd_feature_incompat</a>, <a class="el" href="lu__target_8h_source.html#l00152">lu_target::lut_client_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00157">lu_target::lut_client_generation</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00155">lu_target::lut_num_clients</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l01235">OBD_CONNECT_LIGHTWEIGHT</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00206">OBD_FAIL_MDS_CLIENT_ADD</a>, <a class="el" href="obd__support_8h_source.html#l00440">OBD_FAIL_TGT_CLIENT_ADD</a>, <a class="el" href="lustre__disk_8h_source.html#l00325">OBD_INCOMPAT_MULTI_RPCS</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00070">tg_export_data::ted_lr_idx</a>, <a class="el" href="lustre__export_8h_source.html#l00068">tg_export_data::ted_lr_off</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>, <a class="el" href="lu__target_8h_source.html#l00351">tgt_is_multimodrpcs_client()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05252">mdt_obd_connect()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00340">ofd_obd_connect()</a>.</p>

</div>
</div>
<a class="anchor" id="abd76fcdb3e3fcf51730bd6474db88235"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_clients_data_init" ref="abd76fcdb3e3fcf51730bd6474db88235" args="(const struct lu_env *env, struct lu_target *tgt, unsigned long last_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_clients_data_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>last_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01369">1369</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01259">cfs_hash_add_unique()</a>, <a class="el" href="hash_8c_source.html#l01140">cfs_hash_getref()</a>, <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="genops_8c_source.html#l00836">class_new_export()</a>, <a class="el" href="genops_8c_source.html#l00932">class_unlink_export()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_connecting</a>, <a class="el" href="lustre__export_8h_source.html#l00200">obd_export::exp_gen_hash</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_in_recovery</a>, <a class="el" href="lustre__export_8h_source.html#l00231">obd_export::exp_last_committed</a>, <a class="el" href="lustre__export_8h_source.html#l00240">obd_export::exp_lock</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__disk_8h_source.html#l00062">LAST_RCVD</a>, <a class="el" href="lustre__disk_8h_source.html#l00371">lsd_client_data::lcd_generation</a>, <a class="el" href="lustre__disk_8h_source.html#l00508">lcd_last_transno()</a>, <a class="el" href="lustre__disk_8h_source.html#l00514">lcd_last_xid()</a>, <a class="el" href="lustre__disk_8h_source.html#l00372">lsd_client_data::lcd_padding</a>, <a class="el" href="lustre__disk_8h_source.html#l00357">lsd_client_data::lcd_uuid</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00271">LR_CLIENT_SIZE</a>, <a class="el" href="lustre__disk_8h_source.html#l00339">lr_server_data::lsd_client_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00338">lr_server_data::lsd_client_start</a>, <a class="el" href="lustre__disk_8h_source.html#l00336">lr_server_data::lsd_feature_incompat</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00157">lu_target::lut_client_generation</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00632">obd_device::obd_gen_hash</a>, <a class="el" href="lustre__disk_8h_source.html#l00325">OBD_INCOMPAT_MULTI_RPCS</a>, <a class="el" href="obd_8h_source.html#l00661">obd_device::obd_max_recoverable_clients</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00976">tgt_client_add()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00441">tgt_client_data_read()</a>, and <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">tgt_server_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ef235e17c1260f4121ace578e166cff"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_find_free_reply_slot" ref="a5ef235e17c1260f4121ace578e166cff" args="(struct lu_target *lut)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_find_free_reply_slot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00079">79</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="lu__target_8h_source.html#l00161">lu_target::lut_reply_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00168">LUT_REPLY_SLOTS_MAX_CHUNKS</a>, <a class="el" href="lu__target_8h_source.html#l00167">LUT_REPLY_SLOTS_PER_CHUNK</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00049">tgt_bitmap_chunk_alloc()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01075">tgt_add_reply_data()</a>.</p>

</div>
</div>
<a class="anchor" id="ae82dadd67212e698c7d0a59946caacf1"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_free_reply_data" ref="ae82dadd67212e698c7d0a59946caacf1" args="(struct lu_target *lut, struct tg_export_data *ted, struct tg_reply_data *trd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tgt_free_reply_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>trd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00305">305</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00129">D_TRACE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00080">tg_export_data::ted_reply_cnt</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00147">tgt_clear_reply_slot()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="lu__target_8h_source.html#l00181">tg_reply_data::trd_index</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00395">tgt_client_free()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">tgt_release_reply_data()</a>.</p>

</div>
</div>
<a class="anchor" id="aef5902c344803dae3f192bf81060cc8a"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_handle_received_xid" ref="aef5902c344803dae3f192bf81060cc8a" args="(struct obd_export *exp, __u64 rcvd_xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_handle_received_xid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>rcvd_xid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01995">1995</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00085">tg_export_data::ted_release_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">tgt_release_reply_data()</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>.</p>

<p>Referenced by <a class="el" href="tgt__handler_8c_source.html#l00607">process_req_last_xid()</a>.</p>

</div>
</div>
<a class="anchor" id="a12b3a46bfd86349b6ffb61cd0d8c8847"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_handle_tag" ref="a12b3a46bfd86349b6ffb61cd0d8c8847" args="(struct obd_export *exp, __u16 tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_handle_tag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>tag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l02013">2013</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00086">tg_export_data::ted_release_tag</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">tgt_release_reply_data()</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00183">tg_reply_data::trd_tag</a>.</p>

<p>Referenced by <a class="el" href="tgt__handler_8c_source.html#l00607">process_req_last_xid()</a>.</p>

</div>
</div>
<a class="anchor" id="addf43010b42052a0ae427b1afce55755"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_last_commit_cb_add" ref="addf43010b42052a0ae427b1afce55755" args="(struct thandle *th, struct lu_target *tgt, struct obd_export *exp, __u64 transno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_last_commit_cb_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>transno</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00798">798</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="obd__class_8h_source.html#l00273">class_export_cb_get</a>, <a class="el" href="obd__class_8h_source.html#l00281">class_export_cb_put</a>, <a class="el" href="dt__object_8h_source.html#l00110">dt_txn_commit_cb::dcb_func</a>, <a class="el" href="dt__object_8h_source.html#l00109">dt_txn_commit_cb::dcb_linkage</a>, <a class="el" href="dt__object_8h_source.html#l00114">dt_txn_commit_cb::dcb_name</a>, <a class="el" href="dt__object_8h_source.html#l02077">dt_trans_cb_add()</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00755">tgt_last_committed_callback::llcc_cb</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00757">tgt_last_committed_callback::llcc_exp</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00756">tgt_last_committed_callback::llcc_tgt</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00758">tgt_last_committed_callback::llcc_transno</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01235">OBD_CONNECT_LIGHTWEIGHT</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00761">tgt_cb_last_committed()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01329">tgt_last_rcvd_update_echo()</a>.</p>

</div>
</div>
<a class="anchor" id="a3feb6626f6155c126221bc395a59f6d1"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_last_rcvd_update" ref="a3feb6626f6155c126221bc395a59f6d1" args="(const struct lu_env *env, struct lu_target *tgt, struct dt_object *obj, __u64 opdata, struct thandle *th, struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_last_rcvd_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>opdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>VBR: set new versions </p>
</p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">1130</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00535">dt_version_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00240">obd_export::exp_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_vbr_failed</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00371">lsd_client_data::lcd_generation</a>, <a class="el" href="lustre__disk_8h_source.html#l00365">lsd_client_data::lcd_last_close_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00363">lsd_client_data::lcd_last_close_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00364">lsd_client_data::lcd_last_close_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00361">lsd_client_data::lcd_last_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00360">lsd_client_data::lcd_last_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00358">lsd_client_data::lcd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00359">lsd_client_data::lcd_last_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00368">lsd_client_data::lcd_pre_versions</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00384">lsd_reply_data::lrd_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00385">lsd_reply_data::lrd_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="pack__generic_8c_source.html#l01026">lustre_msg_get_tag()</a>, <a class="el" href="pack__generic_8c_source.html#l01080">lustre_msg_get_transno()</a>, <a class="el" href="pack__generic_8c_source.html#l01062">lustre_msg_get_versions()</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00135">lu_target::lut_no_reconstruct</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="packet-lustre_8c_source.html#l00203">MDS_CLOSE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01235">OBD_CONNECT_LIGHTWEIGHT</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00648">obd_device::obd_last_committed</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01034">ptlrpc_request::rq_transno</a>, <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00070">tg_export_data::ted_lr_idx</a>, <a class="el" href="lustre__export_8h_source.html#l00068">tg_export_data::ted_lr_off</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01075">tgt_add_reply_data()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00468">tgt_client_data_write()</a>, <a class="el" href="lu__target_8h_source.html#l00351">tgt_is_multimodrpcs_client()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00798">tgt_last_commit_cb_add()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00565">tgt_server_data_write()</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="lu__target_8h_source.html#l00179">tg_reply_data::trd_pre_versions</a>, <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>, <a class="el" href="lu__target_8h_source.html#l00183">tg_reply_data::trd_tag</a>, <a class="el" href="lu__target_8h_source.html#l00232">tgt_session_info::tsi_client_gen</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00231">tgt_session_info::tsi_result</a>, <a class="el" href="lu__target_8h_source.html#l00230">tgt_session_info::tsi_xid</a>, <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>, <a class="el" href="tgt__internal_8h_source.html#l00066">tgt_thread_info::tti_transno</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01760">tgt_txn_stop_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="a7513a9d5af2dd47ea6ae1ad1ab28d6bf"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_last_rcvd_update_echo" ref="a7513a9d5af2dd47ea6ae1ad1ab28d6bf" args="(const struct lu_env *env, struct lu_target *tgt, struct dt_object *obj, struct thandle *th, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_last_rcvd_update_echo </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>VBR: set new versions </p>
</p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01329">1329</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00535">dt_version_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00360">lsd_client_data::lcd_last_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00358">lsd_client_data::lcd_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00068">tg_export_data::ted_lr_off</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00468">tgt_client_data_write()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00798">tgt_last_commit_cb_add()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>, and <a class="el" href="tgt__internal_8h_source.html#l00066">tgt_thread_info::tti_transno</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01760">tgt_txn_stop_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="ae293b0a02050bb040214fb913e9899ba"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_lookup_reply" ref="ae293b0a02050bb040214fb913e9899ba" args="(struct ptlrpc_request *req, struct tg_reply_data *trd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tgt_lookup_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>trd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01974">1974</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00129">D_TRACE</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01953">tgt_lookup_reply_by_xid()</a>, and <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>.</p>

<p>Referenced by <a class="el" href="tgt__handler_8c_source.html#l02310">req_can_reconstruct()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fa6c0879bfd16d9a66bb88abcccbe08"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_lookup_reply_by_xid" ref="a1fa6c0879bfd16d9a66bb88abcccbe08" args="(struct tg_export_data *ted, __u64 xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a>* tgt_lookup_reply_by_xid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>xid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01953">1953</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01974">tgt_lookup_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f180728c17078b181dad874c5d65d55"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_new_client_cb_add" ref="a5f180728c17078b181dad874c5d65d55" args="(struct thandle *th, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_new_client_cb_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00859">859</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="obd__class_8h_source.html#l00273">class_export_cb_get</a>, <a class="el" href="obd__class_8h_source.html#l00281">class_export_cb_put</a>, <a class="el" href="dt__object_8h_source.html#l00110">dt_txn_commit_cb::dcb_func</a>, <a class="el" href="dt__object_8h_source.html#l00109">dt_txn_commit_cb::dcb_linkage</a>, <a class="el" href="dt__object_8h_source.html#l00114">dt_txn_commit_cb::dcb_name</a>, <a class="el" href="dt__object_8h_source.html#l02077">dt_trans_cb_add()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00832">tgt_new_client_callback::lncc_cb</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00833">tgt_new_client_callback::lncc_exp</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00836">tgt_cb_new_client()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ac57b0abfc4247ed97a19a328c54d7bfa"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_release_reply_data" ref="ac57b0abfc4247ed97a19a328c54d7bfa" args="(struct lu_target *lut, struct tg_export_data *ted, struct tg_reply_data *trd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tgt_release_reply_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__export__data.html">tg_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>trd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">329</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00129">D_TRACE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00358">lsd_client_data::lcd_last_transno</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00066">tg_export_data::ted_lcd</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00082">tg_export_data::ted_reply_last</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00305">tgt_free_reply_data()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="lu__target_8h_source.html#l00181">tg_reply_data::trd_index</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00395">tgt_client_free()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01995">tgt_handle_received_xid()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l02013">tgt_handle_tag()</a>.</p>

</div>
</div>
<a class="anchor" id="ab99cd07cafbe621f74fd8da8d827085a"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_reply_data_init" ref="ab99cd07cafbe621f74fd8da8d827085a" args="(const struct lu_env *env, struct lu_target *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_reply_data_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01806">1806</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01140">cfs_hash_getref()</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="lustre__export_8h_source.html#l00231">obd_export::exp_last_committed</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="llog__test_8c_source.html#l00945">lrh</a>, <a class="el" href="lustre__disk_8h_source.html#l00393">lsd_reply_header::lrh_header_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00390">LRH_MAGIC</a>, <a class="el" href="lustre__disk_8h_source.html#l00392">lsd_reply_header::lrh_magic</a>, <a class="el" href="lustre__disk_8h_source.html#l00394">lsd_reply_header::lrh_reply_size</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00632">obd_device::obd_gen_hash</a>, <a class="el" href="obd_8h_source.html#l00648">obd_device::obd_last_committed</a>, <a class="el" href="lustre__disk_8h_source.html#l00063">REPLY_DATA</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00080">tg_export_data::ted_reply_cnt</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="lustre__export_8h_source.html#l00084">tg_export_data::ted_reply_max</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00275">tgt_reply_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00169">tgt_reply_header_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00199">tgt_reply_header_write()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00114">tgt_set_reply_slot()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="lu__target_8h_source.html#l00181">tg_reply_data::trd_index</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, <a class="el" href="lu__target_8h_source.html#l00179">tg_reply_data::trd_pre_versions</a>, <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>, <a class="el" href="lu__target_8h_source.html#l00183">tg_reply_data::trd_tag</a>, <a class="el" href="tgt__internal_8h_source.html#l00062">tgt_thread_info::tti_attr</a>, and <a class="el" href="tgt__internal_8h_source.html#l00058">tgt_thread_info::tti_lrd</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c472c67a4742b3f6272b59adc9f77f6"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_reply_data_read" ref="a0c472c67a4742b3f6272b59adc9f77f6" args="(const struct lu_env *env, struct lu_target *tgt, struct lsd_reply_data *lrd, loff_t off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_reply_data_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsd__reply__data.html">lsd_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lrd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00275">275</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="dt__object_8c_source.html#l00490">dt_record_read()</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00384">lsd_reply_data::lrd_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00385">lsd_reply_data::lrd_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__internal_8h_source.html#l00058">tgt_thread_info::tti_lrd</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01806">tgt_reply_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a62e1f1275c502cbf71f491e3161eab5c"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_reply_data_write" ref="a62e1f1275c502cbf71f491e3161eab5c" args="(const struct lu_env *env, struct lu_target *tgt, struct lsd_reply_data *lrd, loff_t off, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_reply_data_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsd__reply__data.html">lsd_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lrd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00246">246</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__disk_8h_source.html#l00386">lsd_reply_data::lrd_client_gen</a>, <a class="el" href="lustre__disk_8h_source.html#l00384">lsd_reply_data::lrd_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00385">lsd_reply_data::lrd_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="lustre__net_8h_source.html#l02395">ptlrpc_status_hton()</a>, <a class="el" href="lustre__net_8h_source.html#l02407">ptlrpc_status_ntoh()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__internal_8h_source.html#l00058">tgt_thread_info::tti_lrd</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01075">tgt_add_reply_data()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3685a5c15bc3a4e8a3599f56cbf5a7c"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_reply_header_read" ref="aa3685a5c15bc3a4e8a3599f56cbf5a7c" args="(const struct lu_env *env, struct lu_target *tgt, struct lsd_reply_header *lrh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_reply_header_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsd__reply__header.html">lsd_reply_header</a> *&nbsp;</td>
          <td class="paramname"> <em>lrh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00169">169</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="dt__object_8c_source.html#l00490">dt_record_read()</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__disk_8h_source.html#l00393">lsd_reply_header::lrh_header_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00392">lsd_reply_header::lrh_magic</a>, <a class="el" href="lustre__disk_8h_source.html#l00394">lsd_reply_header::lrh_reply_size</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__disk_8h_source.html#l00063">REPLY_DATA</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01806">tgt_reply_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a17b9e4c283d28e92fab771443bf8feb4"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_reply_header_write" ref="a17b9e4c283d28e92fab771443bf8feb4" args="(const struct lu_env *env, struct lu_target *tgt, struct lsd_reply_header *lrh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_reply_header_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsd__reply__header.html">lsd_reply_header</a> *&nbsp;</td>
          <td class="paramname"> <em>lrh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00199">199</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02054">dt_trans_start()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__disk_8h_source.html#l00393">lsd_reply_header::lrh_header_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00392">lsd_reply_header::lrh_magic</a>, <a class="el" href="lustre__disk_8h_source.html#l00394">lsd_reply_header::lrh_reply_size</a>, <a class="el" href="lu__target_8h_source.html#l00120">lu_target::lut_bottom</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__disk_8h_source.html#l00063">REPLY_DATA</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01806">tgt_reply_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae37e9b2446f0e1978dddcf101571b39b"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_server_data_init" ref="ae37e9b2446f0e1978dddcf101571b39b" args="(const struct lu_env *env, struct lu_target *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_server_data_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Interop: evict all clients at first boot with 1.8 last_rcvd</p>
<p>set 2.0 flag to upgrade/downgrade between 1.8 and 2.0 </p>
</p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">1525</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l01319">class_disconnect_exports()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01502">server_compat_data::incinit</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01500">server_compat_data::incompat</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lustre__disk_8h_source.html#l00080">LDD_F_SV_TYPE_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00271">LR_CLIENT_SIZE</a>, <a class="el" href="lustre__disk_8h_source.html#l00270">LR_CLIENT_START</a>, <a class="el" href="lustre__disk_8h_source.html#l00269">LR_SERVER_SIZE</a>, <a class="el" href="lustre__disk_8h_source.html#l00339">lr_server_data::lsd_client_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00338">lr_server_data::lsd_client_start</a>, <a class="el" href="lustre__disk_8h_source.html#l00334">lr_server_data::lsd_feature_compat</a>, <a class="el" href="lustre__disk_8h_source.html#l00336">lr_server_data::lsd_feature_incompat</a>, <a class="el" href="lustre__disk_8h_source.html#l00335">lr_server_data::lsd_feature_rocompat</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00333">lr_server_data::lsd_mount_count</a>, <a class="el" href="lustre__disk_8h_source.html#l00344">lr_server_data::lsd_osd_index</a>, <a class="el" href="lustre__disk_8h_source.html#l00352">lr_server_data::lsd_padding</a>, <a class="el" href="lustre__disk_8h_source.html#l00337">lr_server_data::lsd_server_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00340">lr_server_data::lsd_subdir_count</a>, <a class="el" href="lustre__disk_8h_source.html#l00330">lr_server_data::lsd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00135">lu_target::lut_no_reconstruct</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="lustre__disk_8h_source.html#l00293">OBD_COMPAT_20</a>, <a class="el" href="lustre__disk_8h_source.html#l00309">OBD_INCOMPAT_FID</a>, <a class="el" href="obd_8h_source.html#l00648">obd_device::obd_last_committed</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_replayable</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="obd__target_8h_source.html#l00052">OBJ_SUBDIR_COUNT</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01501">server_compat_data::rocinit</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01499">server_compat_data::rocompat</a>, <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01369">tgt_clients_data_init()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00547">tgt_server_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00637">tgt_truncate_last_rcvd()</a>, <a class="el" href="tgt__internal_8h_source.html#l00062">tgt_thread_info::tti_attr</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="abda6a1ac5f7f1d359774076e98b23d44"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_server_data_read" ref="abda6a1ac5f7f1d359774076e98b23d44" args="(const struct lu_env *env, struct lu_target *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_server_data_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00547">547</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8c_source.html#l00490">dt_record_read()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00414">lsd_le_to_cpu()</a>, <a class="el" href="lustre__disk_8h_source.html#l00330">lr_server_data::lsd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00359">tti_buf_lsd()</a>, <a class="el" href="tgt__internal_8h_source.html#l00056">tgt_thread_info::tti_lsd</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">tgt_server_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a35157538db2dea1fd246703f2a4be4d1"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_server_data_update" ref="a35157538db2dea1fd246703f2a4be4d1" args="(const struct lu_env *env, struct lu_target *tgt, int sync)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_server_data_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sync</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update server data in last_rcvd. </p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">591</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00131">D_SUPER</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02054">dt_trans_start()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00330">lr_server_data::lsd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00120">lu_target::lut_bottom</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00565">tgt_server_data_write()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00359">tti_buf_lsd()</a>, <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="ofd__obd_8c_source.html#l00137">ofd_parse_connect_data()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00690">tgt_boot_epoch_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01013">tgt_client_del()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00890">tgt_client_new()</a>, <a class="el" href="tgt__main_8c_source.html#l00283">tgt_fini()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">tgt_server_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8596bf888a102f6d49b408fd7616890"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_server_data_write" ref="aa8596bf888a102f6d49b408fd7616890" args="(const struct lu_env *env, struct lu_target *tgt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_server_data_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00565">565</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00441">lsd_cpu_to_le()</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00330">lr_server_data::lsd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00359">tti_buf_lsd()</a>, <a class="el" href="tgt__internal_8h_source.html#l00056">tgt_thread_info::tti_lsd</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a683f013f8374218d81dc7e20404b4bea"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_set_reply_slot" ref="a683f013f8374218d81dc7e20404b4bea" args="(struct lu_target *lut, int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int tgt_set_reply_slot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00114">114</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__target_8h_source.html#l00161">lu_target::lut_reply_bitmap</a>, <a class="el" href="lu__target_8h_source.html#l00168">LUT_REPLY_SLOTS_MAX_CHUNKS</a>, <a class="el" href="lu__target_8h_source.html#l00167">LUT_REPLY_SLOTS_PER_CHUNK</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00049">tgt_bitmap_chunk_alloc()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01806">tgt_reply_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad95589020f702c5b127df32656671099"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_truncate_last_rcvd" ref="ad95589020f702c5b127df32656671099" args="(const struct lu_env *env, struct lu_target *tgt, loff_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_truncate_last_rcvd </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00637">637</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="fsx_8c_source.html#l01082">cleanup()</a>, <a class="el" href="dt__object_8h_source.html#l02253">dt_attr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02238">dt_declare_attr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02398">dt_declare_punch()</a>, <a class="el" href="dt__object_8h_source.html#l02408">dt_punch()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00447">LA_SIZE</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__target_8h_source.html#l00120">lu_target::lut_bottom</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lustre__idl_8h_source.html#l01767">OBD_OBJECT_EOF</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">tgt_server_data_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a38d59da36521433cfc15f37967c2746e"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_txn_start_cb" ref="a38d59da36521433cfc15f37967c2746e" args="(const struct lu_env *env, struct thandle *th, void *cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_txn_start_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01697">1697</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00521">dt_declare_version_set()</a>, <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8h_source.html#l00845">lu_object_remote</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00155">lu_target::lut_num_clients</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="lu__target_8h_source.html#l00351">tgt_is_multimodrpcs_client()</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00214">tgt_session_info::tsi_vbr_obj</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00366">tti_buf_lcd()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00359">tti_buf_lsd()</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a4422f06a2a87e28b67af5cf4d7443bac"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_txn_stop_cb" ref="a4422f06a2a87e28b67af5cf4d7443bac" args="(const struct lu_env *env, struct thandle *th, void *cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_txn_stop_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01760">1760</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lu__object_8h_source.html#l00845">lu_object_remote</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01329">tgt_last_rcvd_update_echo()</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00219">tgt_session_info::tsi_opdata</a>, <a class="el" href="lu__target_8h_source.html#l00214">tgt_session_info::tsi_vbr_obj</a>, <a class="el" href="lu__target_8h_source.html#l00230">tgt_session_info::tsi_xid</a>, <a class="el" href="tgt__internal_8h_source.html#l00067">tgt_thread_info::tti_has_trans</a>, <a class="el" href="tgt__internal_8h_source.html#l00067">tgt_thread_info::tti_mult_trans</a>, <a class="el" href="tgt__internal_8h_source.html#l00066">tgt_thread_info::tti_transno</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf15a0b780510b81f33fa75d9628694f"></a><!-- doxytag: member="tgt_lastrcvd.c::tti_buf_lcd" ref="aaf15a0b780510b81f33fa75d9628694f" args="(struct tgt_thread_info *tti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__buf.html">lu_buf</a>* tti_buf_lcd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__thread__info.html">tgt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tti</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00366">366</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, and <a class="el" href="tgt__internal_8h_source.html#l00057">tgt_thread_info::tti_lcd</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00441">tgt_client_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00468">tgt_client_data_write()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01697">tgt_txn_start_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="abc190c959cccb615c91afa7ae40ddd53"></a><!-- doxytag: member="tgt_lastrcvd.c::tti_buf_lsd" ref="abc190c959cccb615c91afa7ae40ddd53" args="(struct tgt_thread_info *tti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__buf.html">lu_buf</a>* tti_buf_lsd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__thread__info.html">tgt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tti</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l00359">359</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, and <a class="el" href="tgt__internal_8h_source.html#l00056">tgt_thread_info::tti_lsd</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00547">tgt_server_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00565">tgt_server_data_write()</a>, and <a class="el" href="tgt__lastrcvd_8c_source.html#l01697">tgt_txn_start_cb()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a9e16ef3c25324719bf3a461a0862cc74"></a><!-- doxytag: member="tgt_lastrcvd.c::tgt_scd" ref="a9e16ef3c25324719bf3a461a0862cc74" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structserver__compat__data.html">server_compat_data</a> <a class="el" href="tgt__lastrcvd_8c.html#a9e16ef3c25324719bf3a461a0862cc74">tgt_scd</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        [<a class="code" href="group__disk.html#ga239bf7011bd0132b9ac1386f3d1e8e9e">LDD_F_SV_TYPE_MDT</a>] = {
                .rocompat = <a class="code" href="group__disk.html#ga50f7db745027032457edfdea54f259b8" title="MDS handles LOV_OBJID file.">OBD_ROCOMPAT_LOVOBJID</a>,
                .incompat = <a class="code" href="group__disk.html#ga034a4c77db624500222781cca1ba116f" title="this is an MDT">OBD_INCOMPAT_MDT</a> | <a class="code" href="group__disk.html#ga4dbf4ca01fe0197e36c0e9f7e09e93d5" title="common last_rvcd format">OBD_INCOMPAT_COMMON_LR</a> |
                            <a class="code" href="group__disk.html#ga5e65ff906fce9ed737a354c319a2c795" title="FID is enabled.">OBD_INCOMPAT_FID</a> | <a class="code" href="group__disk.html#ga53e722bfc92b2173e39d5c5e82cf7812" title="filesystem using iam format to store directory entries">OBD_INCOMPAT_IAM_DIR</a> |
                            <a class="code" href="group__disk.html#gad7cd6139d1525cced619e50b51822b5a" title="lmm_stripe_count has been shrunk from __u32 to __u16 and the remaining 16 bits are...">OBD_INCOMPAT_LMM_VER</a> | <a class="code" href="group__disk.html#gab23b85351c8a48b294b6488019a53ce2" title="multiple OI files for MDT">OBD_INCOMPAT_MULTI_OI</a> |
                            <a class="code" href="group__disk.html#ga6ea31649ec3838f33d51d39cfe05957a" title="multiple RPCs in flight">OBD_INCOMPAT_MULTI_RPCS</a>,
                .rocinit = <a class="code" href="group__disk.html#ga50f7db745027032457edfdea54f259b8" title="MDS handles LOV_OBJID file.">OBD_ROCOMPAT_LOVOBJID</a>,
                .incinit = <a class="code" href="group__disk.html#ga034a4c77db624500222781cca1ba116f" title="this is an MDT">OBD_INCOMPAT_MDT</a> | <a class="code" href="group__disk.html#ga4dbf4ca01fe0197e36c0e9f7e09e93d5" title="common last_rvcd format">OBD_INCOMPAT_COMMON_LR</a> |
                           <a class="code" href="group__disk.html#gab23b85351c8a48b294b6488019a53ce2" title="multiple OI files for MDT">OBD_INCOMPAT_MULTI_OI</a>,
        },
        [<a class="code" href="group__disk.html#gab5fc357552674218a1b8744bfd272fdc">LDD_F_SV_TYPE_OST</a>] = {
                .rocompat = <a class="code" href="group__disk.html#ga0eacb0ba57cfeae054b8cc322b67d9bc" title="store OST index in the IDIF">OBD_ROCOMPAT_IDX_IN_IDIF</a>,
                .incompat = <a class="code" href="group__disk.html#ga72b98149a4f2f6731d57c79ab60790db" title="this is an OST">OBD_INCOMPAT_OST</a> | <a class="code" href="group__disk.html#ga4dbf4ca01fe0197e36c0e9f7e09e93d5" title="common last_rvcd format">OBD_INCOMPAT_COMMON_LR</a> |
                            <a class="code" href="group__disk.html#ga5e65ff906fce9ed737a354c319a2c795" title="FID is enabled.">OBD_INCOMPAT_FID</a>,
                .rocinit = <a class="code" href="group__disk.html#ga0eacb0ba57cfeae054b8cc322b67d9bc" title="store OST index in the IDIF">OBD_ROCOMPAT_IDX_IN_IDIF</a>,
                .incinit = <a class="code" href="group__disk.html#ga72b98149a4f2f6731d57c79ab60790db" title="this is an OST">OBD_INCOMPAT_OST</a> | <a class="code" href="group__disk.html#ga4dbf4ca01fe0197e36c0e9f7e09e93d5" title="common last_rvcd format">OBD_INCOMPAT_COMMON_LR</a>,
        }
}
</pre></div>
<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01505">1505</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
