<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/osd-ldiskfs/osd_quota.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/osd-ldiskfs/osd_quota.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__quota_8h_source.html">lustre_quota.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="osd-zfs_2osd__internal_8h_source.html">osd_internal.h</a>&quot;</code><br/>

<p><a href="osd-ldiskfs_2osd__quota_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#ac8e163b0d65515b2213ff919425600dc">QUOTA_IT_READ_ERROR</a>(it, rc)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#aa01d028fa92ef36786b1440d6747573f">fid2type</a> (const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helpers function to find out the quota type (USRQUOTA/GRPQUOTA) of a given object.  <a href="#aa01d028fa92ef36786b1440d6747573f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a3f5ac15f675417faf163947de31ddc0c">obj2type</a> (struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a5a5356542d5a8f372a17e54536a33a06">osd_acct_obj_lookup</a> (struct <a class="el" href="structosd__thread__info.html">osd_thread_info</a> *info, struct <a class="el" href="structosd__device.html">osd_device</a> *osd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structosd__inode__id.html">osd_inode_id</a> *id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Space Accounting Management.  <a href="#a5a5356542d5a8f372a17e54536a33a06"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#abcfa7cac1bb24cd5dc754d4f10b8166a">osd_acct_index_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dtobj, struct dt_rec *dtrec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *dtkey)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return space usage (blocks &amp; inodes) consumed by a given uid or gid.  <a href="#abcfa7cac1bb24cd5dc754d4f10b8166a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct dt_it *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#af2a88602af15c39623023acf9e22ad82">osd_it_acct_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, __u32 attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize osd Iterator for given osd index object.  <a href="#af2a88602af15c39623023acf9e22ad82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#ae81118705ec1495afcb4579a50ccdb26">osd_it_acct_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free given iterator.  <a href="#ae81118705ec1495afcb4579a50ccdb26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#aadb0023f23418507b702ad1a75b09d31">osd_it_acct_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Move Iterator to record specified by <em>key</em>, if the <em>key</em> isn't found, move to the first valid record.  <a href="#aadb0023f23418507b702ad1a75b09d31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#ad8fa0a75091ff5b37865165d003994f1">osd_it_acct_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release Iterator.  <a href="#ad8fa0a75091ff5b37865165d003994f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a88ef343ace32b84bef7e18c2a6b79b98">osd_it_add_processed</a> (struct <a class="el" href="structosd__it__quota.html">osd_it_quota</a> *it, int depth)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a0b43e5b349726cbf44905ddd0f0228da">osd_it_acct_next</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Move on to the next valid entry.  <a href="#a0b43e5b349726cbf44905ddd0f0228da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a8f402ea7336497ab5ff04beda7653247">osd_it_acct_key</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return pointer to the key under iterator.  <a href="#a8f402ea7336497ab5ff04beda7653247"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a2aa578c373a121880800ef37fc1f96f0">osd_it_acct_key_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return size of key under iterator (in bytes).  <a href="#a2aa578c373a121880800ef37fc1f96f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a2184eb67ee89e15ec3eba22ba80758da">osd_it_acct_rec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, struct dt_rec *dtrec, __u32 attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return pointer to the record under iterator.  <a href="#a2184eb67ee89e15ec3eba22ba80758da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a2ea6df6e8090fc753e38229333cdf986">osd_it_acct_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns cookie for current Iterator position.  <a href="#a2ea6df6e8090fc753e38229333cdf986"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#ab27f0094dfd99d2cd2a2b8f1abbf2369">osd_it_acct_load</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hash)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restore iterator from cookie.  <a href="#ab27f0094dfd99d2cd2a2b8f1abbf2369"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a666c197bceedfa8e330ba3b61eebd200">osd_quota_swab</a> (char *ptr, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct dt_rec *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a37352588b599965792a00f1f42c022c5">osd_quota_pack</a> (struct <a class="el" href="structosd__object.html">osd_object</a> *obj, const struct dt_rec *rec, union <a class="el" href="unionlquota__rec.html">lquota_rec</a> *quota_rec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a4daab89e8cc5e8a994f82da4a06e1f9a">osd_quota_unpack</a> (struct <a class="el" href="structosd__object.html">osd_object</a> *obj, const struct dt_rec *rec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#af07ccc4598076c7e1f53b73f1292c9ec">osd_qid_type</a> (struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *oh, int i)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a7f79fef6911256f27ca39de23b18cbf4">osd_qid_set_type</a> (struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *oh, int i, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a7393f55caa4eb9de3891135094eb77d1">osd_declare_qid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *oh, struct <a class="el" href="structlquota__id__info.html">lquota_id_info</a> *qi, struct <a class="el" href="structosd__object.html">osd_object</a> *obj, bool enforce, int *flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reserve journal credits for quota files update first, then call -&gt;op_begin() to perform quota enforcement.  <a href="#a7393f55caa4eb9de3891135094eb77d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#ae4de07694790ecae06f4cbf95742ffe4">osd_declare_inode_qid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, qid_t uid, qid_t gid, long long space, struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *oh, struct <a class="el" href="structosd__object.html">osd_object</a> *obj, bool is_blk, int *flags, bool force)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wrapper for <a class="el" href="osd-ldiskfs_2osd__internal_8h.html#a7393f55caa4eb9de3891135094eb77d1" title="Reserve journal credits for quota files update first, then call -&gt;op_begin() to...">osd_declare_qid()</a>.  <a href="#ae4de07694790ecae06f4cbf95742ffe4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#a6a19c00ecce2bd0fa08bf8c932c80074">osd_quota_migration</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__index__operations.html">dt_index_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osd-ldiskfs_2osd__quota_8c.html#ae44c2ce6357b0f5ccb5abf0ef60d23ba">osd_acct_index_ops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Index and Iterator operations for accounting objects.  <a href="#ae44c2ce6357b0f5ccb5abf0ef60d23ba"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac8e163b0d65515b2213ff919425600dc"></a><!-- doxytag: member="osd_quota.c::QUOTA_IT_READ_ERROR" ref="ac8e163b0d65515b2213ff919425600dc" args="(it, rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QUOTA_IT_READ_ERROR</td>
          <td>(</td>
          <td class="paramtype">it, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rc&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="libcfs__debug_8h.html#ad06acc43c8c74fb94f76adde491a72ac">CERROR</a>(<span class="stringliteral">&quot;%s: Error while trying to read quota information, &quot;</span>    \
               <span class="stringliteral">&quot;failed with %d\n&quot;</span>,                                     \
               <a class="code" href="osd-ldiskfs_2osd__internal_8h.html#adbe78717930967c2e102c72548101ea7">osd_dev</a>(it-&gt;oiq_obj-&gt;oo_dt.do_lu.lo_dev)-&gt;<a class="code" href="structosd__device.html#a1caa2232343f3ee6b75de8fe6fd2cd85">od_svname</a>, rc); \
</pre></div>
<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00139">139</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00213">osd_it_acct_get()</a>, and <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00278">osd_it_acct_next()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa01d028fa92ef36786b1440d6747573f"></a><!-- doxytag: member="osd_quota.c::fid2type" ref="aa01d028fa92ef36786b1440d6747573f" args="(const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int fid2type </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helpers function to find out the quota type (USRQUOTA/GRPQUOTA) of a given object. </p>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00038">38</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="lustre__fid_8h_source.html#l00224">ACCT_GROUP_OID</a>, <a class="el" href="lustre__fid_8h_source.html#l00283">fid_is_acct()</a>, <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00046">obj2type()</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00064">osd_acct_obj_lookup()</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00213">osd_it_acct_get()</a>, and <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00278">osd_it_acct_next()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f5ac15f675417faf163947de31ddc0c"></a><!-- doxytag: member="osd_quota.c::obj2type" ref="a3f5ac15f675417faf163947de31ddc0c" args="(struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int obj2type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00046">46</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00038">fid2type()</a>, and <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00099">osd_acct_index_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="abcfa7cac1bb24cd5dc754d4f10b8166a"></a><!-- doxytag: member="osd_quota.c::osd_acct_index_lookup" ref="abcfa7cac1bb24cd5dc754d4f10b8166a" args="(const struct lu_env *env, struct dt_object *dtobj, struct dt_rec *dtrec, const struct dt_key *dtkey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_acct_index_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dtobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>dtrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>dtkey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return space usage (blocks &amp; inodes) consumed by a given uid or gid. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>- is the environment passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dtobj</em>&nbsp;</td><td>- is the accounting object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dtrec</em>&nbsp;</td><td>- is the record to fill with space usage information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dtkey</em>&nbsp;</td><td>- is the id of the user or group for which we would like to access disk usage.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+ve</em>&nbsp;</td><td>- success : exact match </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>- failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00099">99</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__idl_8h_source.html#l01929">lquota_acct_rec::bspace</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l01930">lquota_acct_rec::ispace</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00046">obj2type()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00905">osd_dt_obj()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00884">osd_obj2dev()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00889">osd_sb()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00611">osd_thread_info::oti_dqblk</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00370">osd_it_acct_rec()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a5356542d5a8f372a17e54536a33a06"></a><!-- doxytag: member="osd_quota.c::osd_acct_obj_lookup" ref="a5a5356542d5a8f372a17e54536a33a06" args="(struct osd_thread_info *info, struct osd_device *osd, const struct lu_fid *fid, struct osd_inode_id *id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_acct_obj_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__thread__info.html">osd_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__device.html">osd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>osd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__inode__id.html">osd_inode_id</a> *&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Space Accounting Management. </p>
<p>Look up an accounting object based on its fid.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>- is the osd thread info passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>osd</em>&nbsp;</td><td>- is the osd device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>- is the fid of the accounting object we want to look up </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>- is the <a class="el" href="structosd__inode__id.html">osd_inode_id</a> struct to fill with the inode number of the quota file if the lookup is successful </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00064">64</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00038">fid2type()</a>, <a class="el" href="lustre__fid_8h_source.html#l00283">fid_is_acct()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="osd__oi_8h_source.html#l00082">osd_inode_id::oii_ino</a>, <a class="el" href="osd__oi_8h_source.html#l00063">OSD_OII_NOGEN</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00889">osd_sb()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00604">osd_oi_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4de07694790ecae06f4cbf95742ffe4"></a><!-- doxytag: member="osd_quota.c::osd_declare_inode_qid" ref="ae4de07694790ecae06f4cbf95742ffe4" args="(const struct lu_env *env, qid_t uid, qid_t gid, long long space, struct osd_thandle *oh, struct osd_object *obj, bool is_blk, int *flags, bool force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_declare_inode_qid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qid_t&nbsp;</td>
          <td class="paramname"> <em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qid_t&nbsp;</td>
          <td class="paramname"> <em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&nbsp;</td>
          <td class="paramname"> <em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>oh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__object.html">osd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wrapper for <a class="el" href="osd-ldiskfs_2osd__internal_8h.html#a7393f55caa4eb9de3891135094eb77d1" title="Reserve journal credits for quota files update first, then call -&gt;op_begin() to...">osd_declare_qid()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>- the environment passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uid</em>&nbsp;</td><td>- user id of the inode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gid</em>&nbsp;</td><td>- group id of the inode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>space</em>&nbsp;</td><td>- how many blocks/inodes will be consumed/released </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oh</em>&nbsp;</td><td>- osd transaction handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td>- osd object, could be NULL when it's under create </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>is_blk</em>&nbsp;</td><td>- block quota or inode quota? </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>- if the operation is write, return no user quota, no group quota, or sync commit flags to the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>force</em>&nbsp;</td><td>- set to 1 when changes are performed by root user and thus can't failed with EDQUOT</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>- success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>- failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00590">590</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__quota_8h_source.html#l00191">lquota_id_info::lqi_id</a>, <a class="el" href="lustre__quota_8h_source.html#l00205">lquota_id_info::lqi_is_blk</a>, <a class="el" href="lustre__quota_8h_source.html#l00199">lquota_id_info::lqi_space</a>, <a class="el" href="lustre__quota_8h_source.html#l00195">lquota_id_info::lqi_type</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00504">osd_declare_qid()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00615">osd_thread_info::oti_qi</a>, <a class="el" href="lustre__idl_8h_source.html#l01851">lquota_id::qid_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l01850">lquota_id::qid_uid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l02648">osd_declare_object_create()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l02733">osd_declare_object_destroy()</a>, <a class="el" href="osd-ldiskfs_2osd__io_8c_source.html#l01764">osd_declare_punch()</a>, <a class="el" href="osd-ldiskfs_2osd__io_8c_source.html#l01539">osd_declare_write()</a>, <a class="el" href="osd-ldiskfs_2osd__io_8c_source.html#l01095">osd_declare_write_commit()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l03895">osd_index_declare_ea_delete()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04701">osd_index_declare_ea_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="a7393f55caa4eb9de3891135094eb77d1"></a><!-- doxytag: member="osd_quota.c::osd_declare_qid" ref="a7393f55caa4eb9de3891135094eb77d1" args="(const struct lu_env *env, struct osd_thandle *oh, struct lquota_id_info *qi, struct osd_object *obj, bool enforce, int *flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_declare_qid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>oh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__id__info.html">lquota_id_info</a> *&nbsp;</td>
          <td class="paramname"> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__object.html">osd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>enforce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reserve journal credits for quota files update first, then call -&gt;op_begin() to perform quota enforcement. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>- the environment passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oh</em>&nbsp;</td><td>- osd transaction handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>qi</em>&nbsp;</td><td>- quota id &amp; space required for this operation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td>- osd object, could be NULL when it's under create </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>enforce</em>&nbsp;</td><td>- whether to perform quota enforcement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>- if the operation is write, return no user quota, no group quota, or sync commit flags to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>- success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>- failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00504">504</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__quota_8h_source.html#l00191">lquota_id_info::lqi_id</a>, <a class="el" href="lustre__quota_8h_source.html#l00199">lquota_id_info::lqi_space</a>, <a class="el" href="lustre__quota_8h_source.html#l00195">lquota_id_info::lqi_type</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00289">osd_device::od_quota_slave</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00124">osd_object::oo_inode</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00872">osd_dt_dev()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00332">OSD_MAX_UGID_CNT</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00345">OSD_OT_QUOTA</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00484">osd_qid_set_type()</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00479">osd_qid_type()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00889">osd_sb()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l01003">osd_trans_declare_op()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00361">osd_thandle::ot_id_array</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00358">osd_thandle::ot_id_cnt</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00362">osd_thandle::ot_quota_trans</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00350">osd_thandle::ot_super</a>, <a class="el" href="lustre__idl_8h_source.html#l01850">lquota_id::qid_uid</a>, <a class="el" href="qsd__handler_8c_source.html#l00825">qsd_op_begin()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l01976">osd_declare_attr_set()</a>, and <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00590">osd_declare_inode_qid()</a>.</p>

</div>
</div>
<a class="anchor" id="ae81118705ec1495afcb4579a50ccdb26"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_fini" ref="ae81118705ec1495afcb4579a50ccdb26" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_it_acct_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free given iterator. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00184">184</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00488">osd_it_quota::oiq_list</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00478">osd_it_quota::oiq_obj</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00116">osd_object::oo_dt</a>, and <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00470">osd_quota_leaf::oql_link</a>.</p>

</div>
</div>
<a class="anchor" id="aadb0023f23418507b702ad1a75b09d31"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_get" ref="aadb0023f23418507b702ad1a75b09d31" args="(const struct lu_env *env, struct dt_it *di, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_it_acct_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move Iterator to record specified by <em>key</em>, if the <em>key</em> isn't found, move to the first valid record. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>- uid or gid</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+ve</em>&nbsp;</td><td>- di points to the first valid record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>+1</em>&nbsp;</td><td>- di points to exact matched key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>- failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00213">213</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00038">fid2type()</a>, <a class="el" href="osd__quota__fmt_8c_source.html#l00149">find_tree_dqentry()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osd__quota__fmt_8h_source.html#l00105">LUSTRE_DQTREEOFF</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00480">osd_it_quota::oiq_blk</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00478">osd_it_quota::oiq_obj</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00116">osd_object::oo_dt</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00139">QUOTA_IT_READ_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="osd__quota__fmt_8c_source.html#l00260">walk_tree_dqentry()</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00409">osd_it_acct_load()</a>.</p>

</div>
</div>
<a class="anchor" id="af2a88602af15c39623023acf9e22ad82"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_init" ref="af2a88602af15c39623023acf9e22ad82" args="(const struct lu_env *env, struct dt_object *dt, __u32 attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct dt_it* osd_it_acct_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize osd Iterator for given osd index object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dt</em>&nbsp;</td><td>- osd index object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attr</em>&nbsp;</td><td>- not used </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00150">150</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00840">lu_object_exists</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="osd__quota__fmt_8h_source.html#l00105">LUSTRE_DQTREEOFF</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00480">osd_it_quota::oiq_blk</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00488">osd_it_quota::oiq_list</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00478">osd_it_quota::oiq_obj</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00905">osd_dt_obj()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a8f402ea7336497ab5ff04beda7653247"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_key" ref="a8f402ea7336497ab5ff04beda7653247" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a>* osd_it_acct_key </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return pointer to the key under iterator. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00341">341</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00484">osd_it_quota::oiq_id</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00370">osd_it_acct_rec()</a>.</p>

</div>
</div>
<a class="anchor" id="a2aa578c373a121880800ef37fc1f96f0"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_key_size" ref="a2aa578c373a121880800ef37fc1f96f0" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_it_acct_key_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return size of key under iterator (in bytes). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00355">355</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00484">osd_it_quota::oiq_id</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ab27f0094dfd99d2cd2a2b8f1abbf2369"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_load" ref="ab27f0094dfd99d2cd2a2b8f1abbf2369" args="(const struct lu_env *env, const struct dt_it *di, __u64 hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_it_acct_load </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>hash</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restore iterator from cookie. </p>
<p>if the <em>hash</em> isn't found, restore the first valid record.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hash</em>&nbsp;</td><td>- iterator location cookie</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+ve</em>&nbsp;</td><td>- di points to the first valid record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>+1</em>&nbsp;</td><td>- di points to exact matched hash </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>- failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00409">409</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00213">osd_it_acct_get()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a0b43e5b349726cbf44905ddd0f0228da"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_next" ref="a0b43e5b349726cbf44905ddd0f0228da" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_it_acct_next </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move on to the next valid entry. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>+ve</em>&nbsp;</td><td>- iterator reached the end </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>- iterator has not reached the end yet </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>- unexpected failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00278">278</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00038">fid2type()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osd__quota__fmt_8h_source.html#l00057">LUSTRE_DQSTRINBLK</a>, <a class="el" href="osd__quota__fmt_8h_source.html#l00107">LUSTRE_DQTREEDEPTH</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00480">osd_it_quota::oiq_blk</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00486">osd_it_quota::oiq_index</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00478">osd_it_quota::oiq_obj</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00116">osd_object::oo_dt</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00256">osd_it_add_processed()</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00139">QUOTA_IT_READ_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="osd__quota__fmt_8c_source.html#l00196">walk_block_dqentry()</a>, and <a class="el" href="osd__quota__fmt_8c_source.html#l00260">walk_tree_dqentry()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8fa0a75091ff5b37865165d003994f1"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_put" ref="ad8fa0a75091ff5b37865165d003994f1" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_it_acct_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release Iterator. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00251">251</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2184eb67ee89e15ec3eba22ba80758da"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_rec" ref="a2184eb67ee89e15ec3eba22ba80758da" args="(const struct lu_env *env, const struct dt_it *di, struct dt_rec *dtrec, __u32 attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_it_acct_rec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>dtrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return pointer to the record under iterator. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attr</em>&nbsp;</td><td>- not used </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00370">370</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00478">osd_it_quota::oiq_obj</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00116">osd_object::oo_dt</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00099">osd_acct_index_lookup()</a>, <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00341">osd_it_acct_key()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a2ea6df6e8090fc753e38229333cdf986"></a><!-- doxytag: member="osd_quota.c::osd_it_acct_store" ref="a2ea6df6e8090fc753e38229333cdf986" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> osd_it_acct_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns cookie for current Iterator position. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>di</em>&nbsp;</td><td>- osd iterator </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00389">389</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00484">osd_it_quota::oiq_id</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a88ef343ace32b84bef7e18c2a6b79b98"></a><!-- doxytag: member="osd_quota.c::osd_it_add_processed" ref="a88ef343ace32b84bef7e18c2a6b79b98" args="(struct osd_it_quota *it, int depth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_it_add_processed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__it__quota.html">osd_it_quota</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>depth</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00256">256</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00480">osd_it_quota::oiq_blk</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00488">osd_it_quota::oiq_list</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00471">osd_quota_leaf::oql_blk</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00470">osd_quota_leaf::oql_link</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00278">osd_it_acct_next()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f79fef6911256f27ca39de23b18cbf4"></a><!-- doxytag: member="osd_quota.c::osd_qid_set_type" ref="a7f79fef6911256f27ca39de23b18cbf4" args="(struct osd_thandle *oh, int i, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_qid_set_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>oh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00484">484</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00359">osd_thandle::ot_id_type</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00504">osd_declare_qid()</a>.</p>

</div>
</div>
<a class="anchor" id="af07ccc4598076c7e1f53b73f1292c9ec"></a><!-- doxytag: member="osd_quota.c::osd_qid_type" ref="af07ccc4598076c7e1f53b73f1292c9ec" args="(struct osd_thandle *oh, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osd_qid_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__thandle.html">osd_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>oh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00479">479</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00359">osd_thandle::ot_id_type</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00504">osd_declare_qid()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a19c00ecce2bd0fa08bf8c932c80074"></a><!-- doxytag: member="osd_quota.c::osd_quota_migration" ref="a6a19c00ecce2bd0fa08bf8c932c80074" args="(const struct lu_env *env, struct dt_object *dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osd_quota_migration </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00630">630</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00091">ADMIN_GRP</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00090">ADMIN_USR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00224">dt_lookup_dir()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02446">dt_root_get()</a>, <a class="el" href="dt__object_8c_source.html#l00553">dt_version_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fsx_8c_source.html#l00118">fname</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00089">OBJECTS</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00240">osd_device::od_dt_dev</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00285">osd_device::od_svname</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00905">osd_dt_obj()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00884">osd_obj2dev()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00938">osd_oti_get()</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00535">osd_thread_info::oti_fid</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="packet-lnet_8c_source.html#l00255">version</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l03676">osd_index_try()</a>.</p>

</div>
</div>
<a class="anchor" id="a37352588b599965792a00f1f42c022c5"></a><!-- doxytag: member="osd_quota.c::osd_quota_pack" ref="a37352588b599965792a00f1f42c022c5" args="(struct osd_object *obj, const struct dt_rec *rec, union lquota_rec *quota_rec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dt_rec* osd_quota_pack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__object.html">osd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlquota__rec.html">lquota_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>quota_rec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00446">446</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="osd__iam_8h_source.html#l00481">iam_container::ic_descr</a>, <a class="el" href="osd__iam_8h_source.html#l00435">iam_descr::id_rec_size</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00098">osd_directory::od_container</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00131">osd_object::oo_dir</a>, and <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00436">osd_quota_swab()</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04177">osd_index_iam_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="a666c197bceedfa8e330ba3b61eebd200"></a><!-- doxytag: member="osd_quota.c::osd_quota_swab" ref="a666c197bceedfa8e330ba3b61eebd200" args="(char *ptr, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_quota_swab </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00436">436</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00049">__swab64s</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00446">osd_quota_pack()</a>, and <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00465">osd_quota_unpack()</a>.</p>

</div>
</div>
<a class="anchor" id="a4daab89e8cc5e8a994f82da4a06e1f9a"></a><!-- doxytag: member="osd_quota.c::osd_quota_unpack" ref="a4daab89e8cc5e8a994f82da4a06e1f9a" args="(struct osd_object *obj, const struct dt_rec *rec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osd_quota_unpack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosd__object.html">osd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00465">465</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

<p>References <a class="el" href="osd__iam_8h_source.html#l00481">iam_container::ic_descr</a>, <a class="el" href="osd__iam_8h_source.html#l00435">iam_descr::id_rec_size</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00098">osd_directory::od_container</a>, <a class="el" href="osd-ldiskfs_2osd__internal_8h_source.html#l00131">osd_object::oo_dir</a>, and <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00436">osd_quota_swab()</a>.</p>

<p>Referenced by <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04090">osd_index_iam_lookup()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l05046">osd_it_iam_rec()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ae44c2ce6357b0f5ccb5abf0ef60d23ba"></a><!-- doxytag: member="osd_quota.c::osd_acct_index_ops" ref="ae44c2ce6357b0f5ccb5abf0ef60d23ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__index__operations.html">dt_index_operations</a> <a class="el" href="osd-zfs_2osd__quota_8c.html#ae44c2ce6357b0f5ccb5abf0ef60d23ba">osd_acct_index_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .dio_lookup     = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#abcfa7cac1bb24cd5dc754d4f10b8166a" title="Return space usage (blocks &amp;amp; inodes) consumed by a given uid or gid.">osd_acct_index_lookup</a>,
        .dio_it         = {
                .init           = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#af2a88602af15c39623023acf9e22ad82" title="Initialize osd Iterator for given osd index object.">osd_it_acct_init</a>,
                .fini           = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#ae81118705ec1495afcb4579a50ccdb26" title="Free given iterator.">osd_it_acct_fini</a>,
                .get            = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#aadb0023f23418507b702ad1a75b09d31" title="Move Iterator to record specified by key, if the key isn&amp;#39;t found, move to the...">osd_it_acct_get</a>,
                .put            = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#ad8fa0a75091ff5b37865165d003994f1" title="Release Iterator.">osd_it_acct_put</a>,
                .next           = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#a0b43e5b349726cbf44905ddd0f0228da" title="Move on to the next valid entry.">osd_it_acct_next</a>,
                .key            = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#a8f402ea7336497ab5ff04beda7653247" title="Return pointer to the key under iterator.">osd_it_acct_key</a>,
                .key_size       = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#a2aa578c373a121880800ef37fc1f96f0" title="Return size of key under iterator (in bytes).">osd_it_acct_key_size</a>,
                .rec            = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#a2184eb67ee89e15ec3eba22ba80758da" title="Return pointer to the record under iterator.">osd_it_acct_rec</a>,
                .store          = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#a2ea6df6e8090fc753e38229333cdf986" title="Returns cookie for current Iterator position.">osd_it_acct_store</a>,
                .load           = <a class="code" href="osd-ldiskfs_2osd__quota_8c.html#ab27f0094dfd99d2cd2a2b8f1abbf2369" title="Restore iterator from cookie.">osd_it_acct_load</a>
        }
}
</pre></div>
<p>Index and Iterator operations for accounting objects. </p>
<p>Quota/Accounting handling. </p>

<p>Definition at line <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html#l00420">420</a> of file <a class="el" href="osd-ldiskfs_2osd__quota_8c_source.html">osd_quota.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
