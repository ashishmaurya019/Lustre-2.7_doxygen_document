<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: cl_sync_io</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cl_sync_io<br/>
<small>
[<a class="el" href="group__clio.html">clio</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__sync__io.html">cl_sync_io</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Anchor for synchronous transfer.  <a href="structcl__sync__io.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__sync__io.html#ga9e4705c43e9207a09c6cd8c9fac1c3e5">cl_sync_io_init</a> (struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *anchor, int nr, void(*end)(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize synchronous io wait anchor.  <a href="#ga9e4705c43e9207a09c6cd8c9fac1c3e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__sync__io.html#ga92057d29f315080be03e18c0262a1871">cl_sync_io_wait</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *anchor, long <a class="el" href="o2iblnd__modparams_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait until all IO completes.  <a href="#ga92057d29f315080be03e18c0262a1871"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__sync__io.html#gadb134aa2c1fb3f510bb8fe2a6da02bb9">cl_sync_io_note</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *anchor, int ioret)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicate that transfer of a single page completed.  <a href="#gadb134aa2c1fb3f510bb8fe2a6da02bb9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__sync__io.html#ga068e3a27f8967f8656fe3407c898d1d6">cl_sync_io_end</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *anchor)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga068e3a27f8967f8656fe3407c898d1d6"></a><!-- doxytag: member="cl_object.h::cl_sync_io_end" ref="ga068e3a27f8967f8656fe3407c898d1d6" args="(const struct lu_env *env, struct cl_sync_io *anchor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_sync_io_end </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *&nbsp;</td>
          <td class="paramname"> <em>anchor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l01190">1190</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l02406">csi_barrier</a>, and <a class="el" href="cl__object_8h_source.html#l02408">csi_waitq</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00702">cl_io_submit_sync()</a>, <a class="el" href="cl__lock_8c_source.html#l00195">cl_lock_request()</a>, and <a class="el" href="osc__lock_8c_source.html#l00853">osc_lock_enqueue_wait()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9e4705c43e9207a09c6cd8c9fac1c3e5"></a><!-- doxytag: member="cl_object.h::cl_sync_io_init" ref="ga9e4705c43e9207a09c6cd8c9fac1c3e5" args="(struct cl_sync_io *anchor, int nr, void(*end)(const struct lu_env *, struct cl_sync_io *))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_sync_io_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *&nbsp;</td>
          <td class="paramname"> <em>anchor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *)&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize synchronous io wait anchor. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l01202">1202</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l02406">csi_barrier</a>, <a class="el" href="structcl__sync__io.html#a41e99d40913076c4800d1332ec926474">csi_end_io</a>, <a class="el" href="cl__object_8h_source.html#l02402">csi_sync_nr</a>, <a class="el" href="cl__object_8h_source.html#l02404">csi_sync_rc</a>, <a class="el" href="cl__object_8h_source.html#l02408">csi_waitq</a>, <a class="el" href="mdsrate_8c_source.html#l00132">end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00702">cl_io_submit_sync()</a>, <a class="el" href="cl__lock_8c_source.html#l00195">cl_lock_request()</a>, and <a class="el" href="osc__lock_8c_source.html#l00853">osc_lock_enqueue_wait()</a>.</p>

</div>
</div>
<a class="anchor" id="gadb134aa2c1fb3f510bb8fe2a6da02bb9"></a><!-- doxytag: member="cl_object.h::cl_sync_io_note" ref="gadb134aa2c1fb3f510bb8fe2a6da02bb9" args="(const struct lu_env *env, struct cl_sync_io *anchor, int ioret)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_sync_io_note </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *&nbsp;</td>
          <td class="paramname"> <em>anchor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ioret</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicate that transfer of a single page completed. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l01258">1258</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="structcl__sync__io.html#a41e99d40913076c4800d1332ec926474">csi_end_io</a>, <a class="el" href="cl__object_8h_source.html#l02402">csi_sync_nr</a>, <a class="el" href="cl__object_8h_source.html#l02404">csi_sync_rc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00702">cl_io_submit_sync()</a>, <a class="el" href="cl__lock_8c_source.html#l00195">cl_lock_request()</a>, <a class="el" href="cl__page_8c_source.html#l00909">cl_page_completion()</a>, <a class="el" href="osc__lock_8c_source.html#l00925">osc_lock_enqueue()</a>, <a class="el" href="osc__lock_8c_source.html#l00302">osc_lock_upcall()</a>, and <a class="el" href="osc__lock_8c_source.html#l00832">osc_lock_wake_waiters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga92057d29f315080be03e18c0262a1871"></a><!-- doxytag: member="cl_object.h::cl_sync_io_wait" ref="ga92057d29f315080be03e18c0262a1871" args="(const struct lu_env *env, struct cl_sync_io *anchor, long timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_sync_io_wait </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__sync__io.html">cl_sync_io</a> *&nbsp;</td>
          <td class="paramname"> <em>anchor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until all IO completes. </p>
<p>Transfer completion routine has to call <a class="el" href="group__cl__sync__io.html#gadb134aa2c1fb3f510bb8fe2a6da02bb9" title="Indicate that transfer of a single page completed.">cl_sync_io_note()</a> for every entity. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l01221">1221</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="cl__object_8h_source.html#l02406">csi_barrier</a>, <a class="el" href="cl__object_8h_source.html#l02402">csi_sync_nr</a>, <a class="el" href="cl__object_8h_source.html#l02404">csi_sync_rc</a>, <a class="el" href="cl__object_8h_source.html#l02408">csi_waitq</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__lib_8h_source.html#l00189">LWI_TIMEOUT_INTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00702">cl_io_submit_sync()</a>, <a class="el" href="cl__lock_8c_source.html#l00195">cl_lock_request()</a>, and <a class="el" href="osc__lock_8c_source.html#l00853">osc_lock_enqueue_wait()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
