<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/osp/osp_md_object.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/osp/osp_md_object.c File Reference</h1><code>#include &lt;<a class="el" href="llog__swab_8h_source.html">llog_swab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="osp__internal_8h_source.html">osp_internal.h</a>&quot;</code><br/>

<p><a href="osp__md__object_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a0d70ef554ec2af0f91eb62bcf894bd87">OUT_UPDATE_BUFFER_SIZE_ADD</a>&nbsp;&nbsp;&nbsp;4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ac8f9c7cc0d43f1fc38e6f22eddc667f8">OUT_UPDATE_BUFFER_SIZE_MAX</a>&nbsp;&nbsp;&nbsp;(256 * 4096)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ac773530e7e5b07e126d49b0e0e80cac2">osp_object_create_interpreter</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structosp__object.html">osp_object</a> *obj, void *data, int index, int rc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interpreter call for object creation.  <a href="#ac773530e7e5b07e126d49b0e0e80cac2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a1795337c33a409d5f78b87ff38a112ec">osp_md_declare_object_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#ab16b75516dfd3d619fbffbc96f2b9d24" title="Declare intention to create a new object.">dt_object_operations::do_declare_create</a>.  <a href="#a1795337c33a409d5f78b87ff38a112ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a33acca859878cfc874cc54cdc3c33458">update_buffer_get_update</a> (struct <a class="el" href="structobject__update__request.html">object_update_request</a> *request, unsigned int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a64726676693349c027bdbe148fba7d97">osp_md_object_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#ac1ca5a81cd3d00bd821fbfead64022c3" title="Create new object.">dt_object_operations::do_create</a>.  <a href="#a64726676693349c027bdbe148fba7d97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a1fa7cd20d066e23bd20e620da81074a6">osp_md_declare_ref_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#ae33177c8da269d507a9b22b8066ae5f4" title="Declare intention to decrement nlink count.">dt_object_operations::do_declare_ref_del</a>.  <a href="#a1fa7cd20d066e23bd20e620da81074a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ad1524c12848d82ef822179b48293658f">osp_md_ref_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a8d0abf79c5dace1f0839aefe251bfc1f" title="Decrement nlink.">dt_object_operations::do_ref_del</a>.  <a href="#ad1524c12848d82ef822179b48293658f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a596d48e7ed38d267c8196196d3e526f6">osp_md_declare_ref_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#ae33177c8da269d507a9b22b8066ae5f4" title="Declare intention to decrement nlink count.">dt_object_operations::do_declare_ref_del</a>.  <a href="#a596d48e7ed38d267c8196196d3e526f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a893de224d797f9a296eba67259fdf5be">osp_md_ref_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a3ea43d6a7abb742fb238acc711b3bd2b" title="Increment nlink.">dt_object_operations::do_ref_add</a>.  <a href="#a893de224d797f9a296eba67259fdf5be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ab4da4f6701848592ffc75fd2e2861178">osp_md_ah_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *ah, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structdt__object.html">dt_object</a> *child, umode_t child_mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a00fed99bee94890d3e36719af00d5595" title="Prepare allocation hint for a new object.">dt_object_operations::do_ah_init</a>.  <a href="#ab4da4f6701848592ffc75fd2e2861178"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#aa0885e2736c65c081a737b04e83ddf94">osp_md_declare_attr_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#adc1fb34feaf57d9448beaab7f04302bd" title="Declare intention to request reqular attributes.">dt_object_operations::do_declare_attr_get</a>.  <a href="#aa0885e2736c65c081a737b04e83ddf94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ac407cef7eae29c85a3dee04fe4cc20ab">osp_md_attr_set</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#aa9a55847088d77aa8bbc16c693344ddb" title="Change regular attributes.">dt_object_operations::do_attr_set</a>.  <a href="#ac407cef7eae29c85a3dee04fe4cc20ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a85e0e04b4a3691af8b1b1cf6d6f024d2">osp_md_object_read_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, unsigned role)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a32a37f3abca0903ec9fa5c70b2b7a423" title="Get read lock on object.">dt_object_operations::do_read_lock</a>.  <a href="#a85e0e04b4a3691af8b1b1cf6d6f024d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a2977a76487b325490ac1e9c2a8d1a5a1">osp_md_object_write_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, unsigned role)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a5bf582901eb4dcb781f03f02621535a2">dt_object_operations::do_write_lock</a>.  <a href="#a2977a76487b325490ac1e9c2a8d1a5a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a8617fe54f9fec09b2c771a7efa72e2ba">osp_md_object_read_unlock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a5d68d191697e7964615a090f9896f7f5" title="Release read lock.">dt_object_operations::do_read_unlock</a>.  <a href="#a8617fe54f9fec09b2c771a7efa72e2ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#addef3c8f76ccbe27374f29db55c557c5">osp_md_object_write_unlock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#ad5346269fb80455252849f4fd7403720" title="Release write lock.">dt_object_operations::do_write_unlock</a>.  <a href="#addef3c8f76ccbe27374f29db55c557c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a0b6687dff9ae460066c64278b42b9f75">osp_md_object_write_locked</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a9072566fd18a198a7323439603b6fbdf" title="Check whether write lock is held.">dt_object_operations::do_write_locked</a>.  <a href="#a0b6687dff9ae460066c64278b42b9f75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a591245c4ebf6389d7efa46658155a298">osp_md_index_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__index__operations.html#aab6a7632adfce2297c022b12f0d61791" title="Lookup in an index by key.">dt_index_operations::dio_lookup</a>.  <a href="#a591245c4ebf6389d7efa46658155a298"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#acb860291af07bf52feb8be0d0f7c437e">osp_md_declare_index_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__index__operations.html#af077ea7c9f156cb161f9c361109e1f68" title="Declare intention to insert a key/value into an index.">dt_index_operations::dio_declare_insert</a>.  <a href="#acb860291af07bf52feb8be0d0f7c437e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a84d93aa8cd243e32477bd22aa8a1dcfe">osp_md_index_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th, int ignore_quota)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__index__operations.html#af1e0507f0ca4df0ed3f486bab027dbda" title="Insert a new key/value pair into an index.">dt_index_operations::dio_insert</a>.  <a href="#a84d93aa8cd243e32477bd22aa8a1dcfe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#aae426ea605f3e046805118dfd9674502">osp_md_declare_index_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__index__operations.html#aa25f7e5f60a5b9055e3f9b0898b2888b" title="Declare intention to delete a key/value from an index.">dt_index_operations::dio_declare_delete</a>.  <a href="#aae426ea605f3e046805118dfd9674502"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a06c388e5624ede98b9ff4c0db2264a24">osp_md_index_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__index__operations.html#abe3c3c85ed6a910700306482ba8fcd0d" title="Delete key/value pair from an index.">dt_index_operations::dio_delete</a>.  <a href="#a06c388e5624ede98b9ff4c0db2264a24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a13fe2a9798279e8087e7837e1c62bb4e">osp_md_index_it_next</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of dt_index_operations::dio_it.next.  <a href="#a13fe2a9798279e8087e7837e1c62bb4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ac5856949727150216b247e465e4c6af5">osp_it_key</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of dt_index_operations::dio_it.key.  <a href="#ac5856949727150216b247e465e4c6af5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#acd7705c1cb3347f2ef141b13eef50433">osp_it_key_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of dt_index_operations::dio_it.key_size.  <a href="#acd7705c1cb3347f2ef141b13eef50433"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#aba0578ead2ed7c2bc60af12c2e8a4004">osp_md_index_it_rec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, struct dt_rec *rec, __u32 attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of dt_index_operations::dio_it.rec.  <a href="#aba0578ead2ed7c2bc60af12c2e8a4004"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a9a7cdfb679b747f846a7d23bafcc935f">osp_it_load</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct dt_it *di, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hash)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of dt_index_operations::dio_it.load.  <a href="#a9a7cdfb679b747f846a7d23bafcc935f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a989cb76d987bdbebdd96cb01548e0461">osp_md_index_try</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structdt__index__features.html">dt_index_features</a> *feat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#ac317771bd9f0827b4d8fcec4d51a63c2" title="Try object as an index.">dt_object_operations::do_index_try</a>.  <a href="#a989cb76d987bdbebdd96cb01548e0461"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a135828d0de44ddce16ecb853f320601a">osp_md_object_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lh, struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> *einfo, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a1f63b46e6b64b5c8ba9e81492e0c2f19" title="Lock object.">dt_object_operations::do_object_lock</a>.  <a href="#a135828d0de44ddce16ecb853f320601a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#abb51081826805d1142c68ae2acdd2204">osp_md_object_unlock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> *einfo, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__object__operations.html#a0cc597f75bd319af28376e8a280a6ae3" title="Unlock object.">dt_object_operations::do_object_unlock</a>.  <a href="#abb51081826805d1142c68ae2acdd2204"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a0ede70a4bef1e7d009f35f1d19fd6faa">osp_md_declare_object_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implement OSP layer <a class="el" href="structdt__object__operations.html#af211c9cc7a0203979cd8cf0f0b81b293" title="Declare intention to destroy an object.">dt_object_operations::do_declare_destroy()</a> interface.  <a href="#a0ede70a4bef1e7d009f35f1d19fd6faa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a0397d9477ba8be96b90c94cefab5a3c2">osp_md_object_destroy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implement OSP layer <a class="el" href="structdt__object__operations.html#a19ddd277003c24371f8c5771a2ba77bb" title="Destroy an object.">dt_object_operations::do_destroy()</a> interface.  <a href="#a0397d9477ba8be96b90c94cefab5a3c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ac51dd6b1a9c5fbc06d6f4152ce018231">osp_md_declare_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, loff_t pos, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__body__operations.html#aa4d64d407e2b442c1e418fa9ca46ab44" title="Declare intention to write data to object.">dt_body_operations::dbo_declare_write</a>.  <a href="#ac51dd6b1a9c5fbc06d6f4152ce018231"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a0e37378b041497ac36f1b3191dec5523">osp_md_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, loff_t *pos, struct <a class="el" href="structthandle.html">thandle</a> *th, int ignore_quota)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of <a class="el" href="structdt__body__operations.html#a1d14bb3445892ab680cd8885645334bb" title="Write unstructured data to regular existing object.">dt_body_operations::dbo_write</a>.  <a href="#a0e37378b041497ac36f1b3191dec5523"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a2c3f74ba035a0590ec2c62e1d71c0a56">osp_md_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt, struct <a class="el" href="structlu__buf.html">lu_buf</a> *rbuf, loff_t *pos)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__index__operations.html">dt_index_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#a903290e01e7a292d2756658146333a2a">osp_md_index_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__object__operations.html">dt_object_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#aee566563c307580adca54ebbe83a90ff">osp_md_obj_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__body__operations.html">dt_body_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="osp__md__object_8c.html#ab87b8d6d0e7f500b48bab8162b2f1e2f">osp_md_body_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="osp_md_object.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00054">54</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0d70ef554ec2af0f91eb62bcf894bd87"></a><!-- doxytag: member="osp_md_object.c::OUT_UPDATE_BUFFER_SIZE_ADD" ref="a0d70ef554ec2af0f91eb62bcf894bd87" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_UPDATE_BUFFER_SIZE_ADD&nbsp;&nbsp;&nbsp;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00060">60</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac8f9c7cc0d43f1fc38e6f22eddc667f8"></a><!-- doxytag: member="osp_md_object.c::OUT_UPDATE_BUFFER_SIZE_MAX" ref="ac8f9c7cc0d43f1fc38e6f22eddc667f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_UPDATE_BUFFER_SIZE_MAX&nbsp;&nbsp;&nbsp;(256 * 4096)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00061">61</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac5856949727150216b247e465e4c6af5"></a><!-- doxytag: member="osp_md_object.c::osp_it_key" ref="ac5856949727150216b247e465e4c6af5" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a>* osp_it_key </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of dt_index_operations::dio_it.key. </p>
<p>Get the key at current iterator poisiton. These iteration methods (dio_it) will only be used for iterating the remote directory, so the key is the name of the directory entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>di</em>&nbsp;</td><td>iterator of this iteration</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>of the current entry </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00732">732</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, and <a class="el" href="osp__internal_8h_source.html#l00342">osp_it::ooi_ent</a>.</p>

</div>
</div>
<a class="anchor" id="acd7705c1cb3347f2ef141b13eef50433"></a><!-- doxytag: member="osp_md_object.c::osp_it_key_size" ref="acd7705c1cb3347f2ef141b13eef50433" args="(const struct lu_env *env, const struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_it_key_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of dt_index_operations::dio_it.key_size. </p>
<p>Get the key size at current iterator poisiton. These iteration methods (dio_it) will only be used for iterating the remote directory, so the key size is the name size of the directory entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>di</em>&nbsp;</td><td>iterator of this iteration</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>size of the current entry </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00754">754</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, and <a class="el" href="osp__internal_8h_source.html#l00342">osp_it::ooi_ent</a>.</p>

</div>
</div>
<a class="anchor" id="a9a7cdfb679b747f846a7d23bafcc935f"></a><!-- doxytag: member="osp_md_object.c::osp_it_load" ref="a9a7cdfb679b747f846a7d23bafcc935f" args="(const struct lu_env *env, const struct dt_it *di, __u64 hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_it_load </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>hash</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of dt_index_operations::dio_it.load. </p>
<p>Locate the iteration cursor to the specified position (cookie).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>di</em>&nbsp;</td><td>pointer to the iteration structure </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hash</em>&nbsp;</td><td>the specified position</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for locating to the exactly position or the next </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for arriving at the end of the iteration </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00803">803</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00340">osp_it::ooi_next</a>, and <a class="el" href="osp__md__object_8c_source.html#l00683">osp_md_index_it_next()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4da4f6701848592ffc75fd2e2861178"></a><!-- doxytag: member="osp_md_object.c::osp_md_ah_init" ref="ab4da4f6701848592ffc75fd2e2861178" args="(const struct lu_env *env, struct dt_allocation_hint *ah, struct dt_object *parent, struct dt_object *child, umode_t child_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osp_md_ah_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>ah</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">umode_t&nbsp;</td>
          <td class="paramname"> <em>child_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a00fed99bee94890d3e36719af00d5595" title="Prepare allocation hint for a new object.">dt_object_operations::do_ah_init</a>. </p>
<p>Initialize the allocation hint for object creation, which is usually called before the creation, and these hints (parent and child mode) will be sent to the remote Object Update Target (OUT) and used in the object create process, same as OSD object creation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ah</em>&nbsp;</td><td>the hint to be initialized </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent</em>&nbsp;</td><td>the parent of the object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>child</em>&nbsp;</td><td>the object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>child_mode</em>&nbsp;</td><td>the mode of the created object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00311">311</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l00373">dt_allocation_hint::dah_mode</a>, <a class="el" href="dt__object_8h_source.html#l00370">dt_allocation_hint::dah_parent</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

</div>
</div>
<a class="anchor" id="ac407cef7eae29c85a3dee04fe4cc20ab"></a><!-- doxytag: member="osp_md_object.c::osp_md_attr_set" ref="ac407cef7eae29c85a3dee04fe4cc20ab" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_attr *attr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_md_attr_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#aa9a55847088d77aa8bbc16c693344ddb" title="Change regular attributes.">dt_object_operations::do_attr_set</a>. </p>
<p>Set attributes to the specified remote object.</p>
<p>Add the OUT_ATTR_SET sub-request into the OUT RPC that will be flushed when the transaction stop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to set attributes </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing attr_set succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00359">359</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03789">OUT_ATTR_SET</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l00709">osp_attr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0885e2736c65c081a737b04e83ddf94"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_attr_set" ref="aa0885e2736c65c081a737b04e83ddf94" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_attr *attr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_md_declare_attr_set </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#adc1fb34feaf57d9448beaab7f04302bd" title="Declare intention to request reqular attributes.">dt_object_operations::do_declare_attr_get</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to set attributes </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00337">337</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l00638">osp_declare_attr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="aae426ea605f3e046805118dfd9674502"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_index_delete" ref="aae426ea605f3e046805118dfd9674502" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_key *key, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_declare_index_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__index__operations.html#aa25f7e5f60a5b9055e3f9b0898b2888b" title="Declare intention to delete a key/value from an index.">dt_index_operations::dio_declare_delete</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to delete index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00630">630</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

</div>
</div>
<a class="anchor" id="acb860291af07bf52feb8be0d0f7c437e"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_index_insert" ref="acb860291af07bf52feb8be0d0f7c437e" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_rec *rec, const struct dt_key *key, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_declare_index_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__index__operations.html#af077ea7c9f156cb161f9c361109e1f68" title="Declare intention to insert a key/value into an index.">dt_index_operations::dio_declare_insert</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to insert index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record of the index which will be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index which will be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00573">573</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a1795337c33a409d5f78b87ff38a112ec"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_object_create" ref="a1795337c33a409d5f78b87ff38a112ec" args="(const struct lu_env *env, struct dt_object *dt, struct lu_attr *attr, struct dt_allocation_hint *hint, struct dt_object_format *dof, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_md_declare_object_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#ab16b75516dfd3d619fbffbc96f2b9d24" title="Declare intention to create a new object.">dt_object_operations::do_declare_create</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>remote object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of the created object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hint</em>&nbsp;</td><td>creation hint </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>creation format information </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00121">121</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="osp__internal_8h_source.html#l00299">osp_object::opo_ooa</a>, <a class="el" href="osp__object_8c_source.html#l00174">osp_oac_init()</a>, and <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l01309">osp_declare_object_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ede70a4bef1e7d009f35f1d19fd6faa"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_object_destroy" ref="a0ede70a4bef1e7d009f35f1d19fd6faa" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_md_declare_object_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implement OSP layer <a class="el" href="structdt__object__operations.html#af211c9cc7a0203979cd8cf0f0b81b293" title="Declare intention to destroy an object.">dt_object_operations::do_declare_destroy()</a> interface. </p>
<p>Create the dt_update_request to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>pointer to the OSP layer <a class="el" href="structdt__object.html">dt_object</a> to be destroyed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>pointer to the transaction handler</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00962">962</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a596d48e7ed38d267c8196196d3e526f6"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_ref_add" ref="a596d48e7ed38d267c8196196d3e526f6" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_declare_ref_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#ae33177c8da269d507a9b22b8066ae5f4" title="Declare intention to decrement nlink count.">dt_object_operations::do_declare_ref_del</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to increase the reference count. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00264">264</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fa7cd20d066e23bd20e620da81074a6"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_ref_del" ref="a1fa7cd20d066e23bd20e620da81074a6" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_declare_ref_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#ae33177c8da269d507a9b22b8066ae5f4" title="Declare intention to decrement nlink count.">dt_object_operations::do_declare_ref_del</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to decrease the reference count. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle of refcount decrease.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00218">218</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ac51dd6b1a9c5fbc06d6f4152ce018231"></a><!-- doxytag: member="osp_md_object.c::osp_md_declare_write" ref="ac51dd6b1a9c5fbc06d6f4152ce018231" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_buf *buf, loff_t pos, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t osp_md_declare_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__body__operations.html#aa4d64d407e2b442c1e418fa9ca46ab44" title="Declare intention to write data to object.">dt_body_operations::dbo_declare_write</a>. </p>
<p>Create the <a class="el" href="structosp__update__request.html">osp_update_request</a> to track the update for this OSP in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be written </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer to write which includes an embedded size field </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>offet in the object to start writing at </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if preparation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if preparation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l01053">1053</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00454">dt2osp_dev()</a>, <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="osp__internal_8h_source.html#l00186">osp_device::opd_update</a>, <a class="el" href="osp__trans_8c_source.html#l00899">osp_trans_update_request_create()</a>, and <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>.</p>

</div>
</div>
<a class="anchor" id="a06c388e5624ede98b9ff4c0db2264a24"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_delete" ref="a06c388e5624ede98b9ff4c0db2264a24" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_key *key, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_index_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__index__operations.html#abe3c3c85ed6a910700306482ba8fcd0d" title="Delete key/value pair from an index.">dt_index_operations::dio_delete</a>. </p>
<p>Add an OUT_INDEX_DELETE sub-request into the OUT RPC that will be flushed when the transaction stop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to delete index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index which will be deleted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing index delete succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00652">652</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03795">OUT_INDEX_DELETE</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a84d93aa8cd243e32477bd22aa8a1dcfe"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_insert" ref="a84d93aa8cd243e32477bd22aa8a1dcfe" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_rec *rec, const struct dt_key *key, struct thandle *th, int ignore_quota)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_index_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ignore_quota</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__index__operations.html#af1e0507f0ca4df0ed3f486bab027dbda" title="Insert a new key/value pair into an index.">dt_index_operations::dio_insert</a>. </p>
<p>Add an OUT_INDEX_INSERT sub-request into the OUT RPC that will be flushed when the transaction stop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object for which to insert index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record of the index to be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of the index to be inserted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ignore_quota</em>&nbsp;</td><td>quota enforcement for insert</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing index insert succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00598">598</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03794">OUT_INDEX_INSERT</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a13fe2a9798279e8087e7837e1c62bb4e"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_it_next" ref="a13fe2a9798279e8087e7837e1c62bb4e" args="(const struct lu_env *env, struct dt_it *di)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_index_it_next </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of dt_index_operations::dio_it.next. </p>
<p>Advance the pointer of the iterator to the next entry. It shares a similar internal implementation with <a class="el" href="osp__object_8c.html#a120b6881eaffa6d6df0645ab7c32c7d9" title="Move the iteration cursor to the next record.">osp_orphan_it_next()</a>, which is being used for remote orphan index object. This method will be used for remote directory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>di</em>&nbsp;</td><td>iterator of this iteration</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the pointer is advanced successfully. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>if it reaches to the end of the index object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the pointer cannot be advanced. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00683">683</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00902">lu_dirent::lde_reclen</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l03578">lu_idxpage::lip_entries</a>, <a class="el" href="lustre__idl_8h_source.html#l03567">lu_idxpage::lip_nr</a>, <a class="el" href="osp__internal_8h_source.html#l00344">osp_it::ooi_cur_idxpage</a>, <a class="el" href="osp__internal_8h_source.html#l00342">osp_it::ooi_ent</a>, <a class="el" href="osp__internal_8h_source.html#l00336">osp_it::ooi_pos_ent</a>, <a class="el" href="osp__object_8c_source.html#l01833">osp_it_next_page()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osp__md__object_8c_source.html#l00803">osp_it_load()</a>.</p>

</div>
</div>
<a class="anchor" id="aba0578ead2ed7c2bc60af12c2e8a4004"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_it_rec" ref="aba0578ead2ed7c2bc60af12c2e8a4004" args="(const struct lu_env *env, const struct dt_it *di, struct dt_rec *rec, __u32 attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_index_it_rec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_it *&nbsp;</td>
          <td class="paramname"> <em>di</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of dt_index_operations::dio_it.rec. </p>
<p>Get the record at current iterator position. These iteration methods (dio_it) will only be used for iterating the remote directory, so it uses <a class="el" href="group__lu__dir.html#ga4618cc1ec302c51ae82b9a80f4fdc1c8">lu_dirent_calc_size()</a> to calculate the record size.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>di</em>&nbsp;</td><td>iterator of this iteration </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>the record to be returned </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes of the index object, so it knows how to pack the entry.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>only</em>&nbsp;</td><td>return 0 for now </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00777">777</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l00983">lu_dirent_calc_size()</a>, and <a class="el" href="osp__internal_8h_source.html#l00342">osp_it::ooi_ent</a>.</p>

</div>
</div>
<a class="anchor" id="a591245c4ebf6389d7efa46658155a298"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_lookup" ref="a591245c4ebf6389d7efa46658155a298" args="(const struct lu_env *env, struct dt_object *dt, struct dt_rec *rec, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_index_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__index__operations.html#aab6a7632adfce2297c022b12f0d61791" title="Lookup in an index by key.">dt_index_operations::dio_lookup</a>. </p>
<p>Look up record by key under a remote index object. It packs lookup update into RPC, sends to the remote OUT and waits for the lookup result.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>index object to lookup </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record in which to return lookup result </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of index which will be looked up</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>if the lookup succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the lookup fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00480">480</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="osp__internal_8h_source.html#l00443">lu2osp_dev()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="req-layout_8c_source.html#l00093">lustre_swab_lu_fid</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__update_8h_source.html#l00243">object_update_result_data_get()</a>, <a class="el" href="osp__internal_8h_source.html#l00139">osp_device::opd_dt_dev</a>, <a class="el" href="osp__internal_8h_source.html#l00311">osp_thread_info::osi_lb2</a>, <a class="el" href="osp__internal_8h_source.html#l00409">osp_env_info()</a>, <a class="el" href="osp__trans_8c_source.html#l00442">osp_remote_sync()</a>, <a class="el" href="osp__trans_8c_source.html#l00187">osp_update_request_create()</a>, <a class="el" href="osp__trans_8c_source.html#l00204">osp_update_request_destroy()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03922">object_update_reply::ourp_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l03793">OUT_INDEX_LOOKUP</a>, <a class="el" href="lustre__update_8h_source.html#l00037">OUT_UPDATE_REPLY_SIZE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__net_8h_source.html#l01198">ptlrpc_rep_need_swab()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="layout_8c_source.html#l02186">req_capsule_server_sized_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01199">RMF_OUT_UPDATE_REPLY</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="lustre__idl_8h_source.html#l03919">UPDATE_REPLY_MAGIC</a>.</p>

</div>
</div>
<a class="anchor" id="a989cb76d987bdbebdd96cb01548e0461"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_try" ref="a989cb76d987bdbebdd96cb01548e0461" args="(const struct lu_env *env, struct dt_object *dt, const struct dt_index_features *feat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_index_try </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdt__index__features.html">dt_index_features</a> *&nbsp;</td>
          <td class="paramname"> <em>feat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#ac317771bd9f0827b4d8fcec4d51a63c2" title="Try object as an index.">dt_object_operations::do_index_try</a>. </p>
<p>Try to initialize the index API pointer for the given object. This is the entry point of the index API, i.e. we must call this method to initialize the index object before calling other index methods.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>index object to be initialized </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>feat</em>&nbsp;</td><td>the index feature of the object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the initialization succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the initialization fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00855">855</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>.</p>

</div>
</div>
<a class="anchor" id="a64726676693349c027bdbe148fba7d97"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_create" ref="a64726676693349c027bdbe148fba7d97" args="(const struct lu_env *env, struct dt_object *dt, struct lu_attr *attr, struct dt_allocation_hint *hint, struct dt_object_format *dof, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_md_object_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#ac1ca5a81cd3d00bd821fbfead64022c3" title="Create new object.">dt_object_operations::do_create</a>. </p>
<p>It adds an OUT_CREATE sub-request into the OUT RPC that will be flushed when the transaction stop, and sets necessary flags for created object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of the created object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hint</em>&nbsp;</td><td>creation hint </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>creation format information </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing creation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing creation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00173">173</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00452">LA_TYPE</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lu__object_8h_source.html#l00539">lu_object_header::loh_attr</a>, <a class="el" href="lu__object_8h_source.html#l00501">LOHA_EXISTS</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00284">osp_object_attr::ooa_attr</a>, <a class="el" href="osp__internal_8h_source.html#l00292">osp_object::opo_non_exist</a>, <a class="el" href="osp__internal_8h_source.html#l00299">osp_object::opo_ooa</a>, <a class="el" href="osp__trans_8c_source.html#l00799">osp_insert_update_callback()</a>, <a class="el" href="osp__md__object_8c_source.html#l00080">osp_object_create_interpreter()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03785">OUT_CREATE</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l01417">osp_object_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a0397d9477ba8be96b90c94cefab5a3c2"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_destroy" ref="a0397d9477ba8be96b90c94cefab5a3c2" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osp_md_object_destroy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implement OSP layer <a class="el" href="structdt__object__operations.html#a19ddd277003c24371f8c5771a2ba77bb" title="Destroy an object.">dt_object_operations::do_destroy()</a> interface. </p>
<p>Pack the destroy update into the RPC buffer, which will be sent to the remote MDT during transaction stop.</p>
<p>It also marks the object as non-cached.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>pointer to the OSP layer <a class="el" href="structdt__object.html">dt_object</a> to be destroyed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>pointer to the transaction handler</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00983">983</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lu__object_8h_source.html#l00530">lu_object_header::loh_flags</a>, <a class="el" href="osp__internal_8h_source.html#l00443">lu2osp_dev()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8h_source.html#l00493">LU_OBJECT_HEARD_BANSHEE</a>, <a class="el" href="osp__internal_8h_source.html#l00167">osp_device::opd_connect_mdt</a>, <a class="el" href="osp__internal_8h_source.html#l00292">osp_object::opo_non_exist</a>, <a class="el" href="osp__trans_8c_source.html#l00799">osp_insert_update_callback()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03786">OUT_DESTROY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a135828d0de44ddce16ecb853f320601a"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_lock" ref="a135828d0de44ddce16ecb853f320601a" args="(const struct lu_env *env, struct dt_object *dt, struct lustre_handle *lh, struct ldlm_enqueue_info *einfo, union ldlm_policy_data *policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_object_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> *&nbsp;</td>
          <td class="paramname"> <em>einfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a1f63b46e6b64b5c8ba9e81492e0c2f19" title="Lock object.">dt_object_operations::do_object_lock</a>. </p>
<p>Enqueue a lock (by <a class="el" href="group__ldlm__cli__api.html#gac3edcad1b11e283d6ef8455a2b598b07" title="Client-side lock enqueue.">ldlm_cli_enqueue()</a>) of remote object on the remote MDT, which will lock the object in the global namespace. And because the cross-MDT locks are relatively rare compared with normal local MDT operation, let's release it right away, instead of putting it into the LRU list.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be locked </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>lh</em>&nbsp;</td><td>lock handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>einfo</em>&nbsp;</td><td>enqueue information </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>policy</em>&nbsp;</td><td>lock policy</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ELDLM_OK</em>&nbsp;</td><td>if locking the object succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if locking fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00880">880</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="osp__internal_8h_source.html#l00454">dt2osp_dev()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01098">ldlm_enqueue_info::ei_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l01105">ldlm_enqueue_info::ei_nonblock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00837">ldlm_enqueue_pack()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00108">LDLM_FL_BLOCK_NOWAIT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00136">LDLM_FL_COS_INCOMPAT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00289">LDLM_FL_NO_LRU</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lu__object_8h_source.html#l00619">lu_site::ls_top_dev</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_recovering</a>, <a class="el" href="osp__internal_8h_source.html#l00160">osp_device::opd_exp</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_allow_replay</a>.</p>

</div>
</div>
<a class="anchor" id="a85e0e04b4a3691af8b1b1cf6d6f024d2"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_read_lock" ref="a85e0e04b4a3691af8b1b1cf6d6f024d2" args="(const struct lu_env *env, struct dt_object *dt, unsigned role)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osp_md_object_read_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>role</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a32a37f3abca0903ec9fa5c70b2b7a423" title="Get read lock on object.">dt_object_operations::do_read_lock</a>. </p>
<p>osp_md_object_{read,write}_lock() will only lock the remote object in the local cache, which uses the semaphore (opo_sem) inside the <a class="el" href="structosp__object.html">osp_object</a> to lock the object. Note: it will not lock the object in the whole cluster, which relies on the LDLM lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be locked </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>role</em>&nbsp;</td><td>lock role from MDD layer, see <a class="el" href="group__md.html#gabf4a938616b1baef18114ee718fcb9d2" title="Used in MDD/OUT layer for object lock rule.">mdd_object_role()</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00385">385</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osp__internal_8h_source.html#l00298">osp_object::opo_owner</a>, and <a class="el" href="osp__internal_8h_source.html#l00297">osp_object::opo_sem</a>.</p>

</div>
</div>
<a class="anchor" id="a8617fe54f9fec09b2c771a7efa72e2ba"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_read_unlock" ref="a8617fe54f9fec09b2c771a7efa72e2ba" args="(const struct lu_env *env, struct dt_object *dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osp_md_object_read_unlock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a5d68d191697e7964615a090f9896f7f5" title="Release read lock.">dt_object_operations::do_read_unlock</a>. </p>
<p>Unlock the read lock of remote object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be unlocked </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00424">424</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, and <a class="el" href="osp__internal_8h_source.html#l00297">osp_object::opo_sem</a>.</p>

</div>
</div>
<a class="anchor" id="abb51081826805d1142c68ae2acdd2204"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_unlock" ref="abb51081826805d1142c68ae2acdd2204" args="(const struct lu_env *env, struct dt_object *dt, struct ldlm_enqueue_info *einfo, union ldlm_policy_data *policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_object_unlock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> *&nbsp;</td>
          <td class="paramname"> <em>einfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a0cc597f75bd319af28376e8a280a6ae3" title="Unlock object.">dt_object_operations::do_object_unlock</a>. </p>
<p>Cancel a lock of a remote object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be unlocked </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>einfo</em>&nbsp;</td><td>lock enqueue information </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>policy</em>&nbsp;</td><td>lock policy</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Only</em>&nbsp;</td><td>return 0 for now. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00936">936</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01103">ldlm_enqueue_info::ei_cbdata</a>, <a class="el" href="lustre__dlm_8h_source.html#l01098">ldlm_enqueue_info::ei_mode</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>.</p>

</div>
</div>
<a class="anchor" id="a2977a76487b325490ac1e9c2a8d1a5a1"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_write_lock" ref="a2977a76487b325490ac1e9c2a8d1a5a1" args="(const struct lu_env *env, struct dt_object *dt, unsigned role)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osp_md_object_write_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>role</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a5bf582901eb4dcb781f03f02621535a2">dt_object_operations::do_write_lock</a>. </p>
<p>Lock the remote object in write mode.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be locked </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>role</em>&nbsp;</td><td>lock role from MDD layer, see <a class="el" href="group__md.html#gabf4a938616b1baef18114ee718fcb9d2" title="Used in MDD/OUT layer for object lock rule.">mdd_object_role()</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00405">405</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osp__internal_8h_source.html#l00298">osp_object::opo_owner</a>, and <a class="el" href="osp__internal_8h_source.html#l00297">osp_object::opo_sem</a>.</p>

</div>
</div>
<a class="anchor" id="a0b6687dff9ae460066c64278b42b9f75"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_write_locked" ref="a0b6687dff9ae460066c64278b42b9f75" args="(const struct lu_env *env, struct dt_object *dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_object_write_locked </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a9072566fd18a198a7323439603b6fbdf" title="Check whether write lock is held.">dt_object_operations::do_write_locked</a>. </p>
<p>Test if the object is locked in write mode.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be tested </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00458">458</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, and <a class="el" href="osp__internal_8h_source.html#l00298">osp_object::opo_owner</a>.</p>

</div>
</div>
<a class="anchor" id="addef3c8f76ccbe27374f29db55c557c5"></a><!-- doxytag: member="osp_md_object.c::osp_md_object_write_unlock" ref="addef3c8f76ccbe27374f29db55c557c5" args="(const struct lu_env *env, struct dt_object *dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void osp_md_object_write_unlock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#ad5346269fb80455252849f4fd7403720" title="Release write lock.">dt_object_operations::do_write_unlock</a>. </p>
<p>Unlock the write lock of remote object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be unlocked </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00440">440</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="osp__internal_8h_source.html#l00298">osp_object::opo_owner</a>, and <a class="el" href="osp__internal_8h_source.html#l00297">osp_object::opo_sem</a>.</p>

</div>
</div>
<a class="anchor" id="a2c3f74ba035a0590ec2c62e1d71c0a56"></a><!-- doxytag: member="osp_md_object.c::osp_md_read" ref="a2c3f74ba035a0590ec2c62e1d71c0a56" args="(const struct lu_env *env, struct dt_object *dt, struct lu_buf *rbuf, loff_t *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t osp_md_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>rbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l01126">1126</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="structptlrpc__bulk__frag__ops.html#a071eacf4504ae84799e0f989a0e43229">ptlrpc_bulk_frag_ops::add_iov_frag</a>, <a class="el" href="lustre__net_8h_source.html#l01451">ptlrpc_bulk_desc::bd_frag_ops</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="osp__internal_8h_source.html#l00443">lu2osp_dev()</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__idl_8h_source.html#l00104">MDS_BULK_PORTAL</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__update_8h_source.html#l00243">object_update_result_data_get()</a>, <a class="el" href="osp__internal_8h_source.html#l00139">osp_device::opd_dt_dev</a>, <a class="el" href="osp__internal_8h_source.html#l00159">osp_device::opd_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l03971">orr_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l03959">out_read_reply::orr_offset</a>, <a class="el" href="lustre__idl_8h_source.html#l03957">out_read_reply::orr_size</a>, <a class="el" href="osp__internal_8h_source.html#l00311">osp_thread_info::osi_lb2</a>, <a class="el" href="osp__internal_8h_source.html#l00409">osp_env_info()</a>, <a class="el" href="osp__trans_8c_source.html#l00314">osp_prep_update_req()</a>, <a class="el" href="osp__trans_8c_source.html#l00187">osp_update_request_create()</a>, <a class="el" href="osp__trans_8c_source.html#l00204">osp_update_request_destroy()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03922">object_update_reply::ourp_magic</a>, <a class="el" href="lustre__update_8h_source.html#l00038">OUT_BULK_BUFFER_SIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l03799">OUT_READ</a>, <a class="el" href="lustre__update_8h_source.html#l00037">OUT_UPDATE_REPLY_SIZE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__net_8h_source.html#l01336">PTLRPC_BULK_BUF_KVEC</a>, <a class="el" href="client_8c_source.html#l00062">ptlrpc_bulk_kvec_ops</a>, <a class="el" href="lustre__net_8h_source.html#l01339">PTLRPC_BULK_PUT_SINK</a>, <a class="el" href="client_8c_source.html#l00174">ptlrpc_prep_bulk_imp()</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="layout_8c_source.html#l02186">req_capsule_server_sized_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01199">RMF_OUT_UPDATE_REPLY</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_allow_replay</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_bulk_read</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="sec_8c_source.html#l02286">sptlrpc_cli_unwrap_bulk_read()</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__idl_8h_source.html#l03919">UPDATE_REPLY_MAGIC</a>.</p>

</div>
</div>
<a class="anchor" id="a893de224d797f9a296eba67259fdf5be"></a><!-- doxytag: member="osp_md_object.c::osp_md_ref_add" ref="a893de224d797f9a296eba67259fdf5be" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_ref_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a3ea43d6a7abb742fb238acc711b3bd2b" title="Increment nlink.">dt_object_operations::do_ref_add</a>. </p>
<p>Add an OUT_REF_ADD sub-request into the OUT RPC that will be flushed when the transaction stop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object on which to increase the reference count </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing ref_add succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00283">283</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03787">OUT_REF_ADD</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1524c12848d82ef822179b48293658f"></a><!-- doxytag: member="osp_md_object.c::osp_md_ref_del" ref="ad1524c12848d82ef822179b48293658f" args="(const struct lu_env *env, struct dt_object *dt, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_md_ref_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__object__operations.html#a8d0abf79c5dace1f0839aefe251bfc1f" title="Decrement nlink.">dt_object_operations::do_ref_del</a>. </p>
<p>Add an OUT_REF_DEL sub-request into the OUT RPC that will be flushed when the transaction stop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to decrease the reference count </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>the transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing ref_del succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00237">237</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03788">OUT_REF_DEL</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e37378b041497ac36f1b3191dec5523"></a><!-- doxytag: member="osp_md_object.c::osp_md_write" ref="a0e37378b041497ac36f1b3191dec5523" args="(const struct lu_env *env, struct dt_object *dt, const struct lu_buf *buf, loff_t *pos, struct thandle *th, int ignore_quota)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t osp_md_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ignore_quota</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implementation of <a class="el" href="structdt__body__operations.html#a1d14bb3445892ab680cd8885645334bb" title="Write unstructured data to regular existing object.">dt_body_operations::dbo_write</a>. </p>
<p>Pack the write object update into the RPC buffer, which will be sent to the remote MDT during transaction stop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dt</em>&nbsp;</td><td>object to be written </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer to write which includes an embedded size field </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>offet in the object to start writing at </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ignore_quota</em>&nbsp;</td><td>quota enforcement for this write</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>the</em>&nbsp;</td><td>buffer size in bytes if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l01090">1090</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="osp__internal_8h_source.html#l00477">dt2osp_obj()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="lu__object_8h_source.html#l00447">LA_SIZE</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="osp__internal_8h_source.html#l00284">osp_object_attr::ooa_attr</a>, <a class="el" href="osp__internal_8h_source.html#l00299">osp_object::opo_ooa</a>, <a class="el" href="osp__trans_8c_source.html#l01264">osp_check_and_set_rpc_version()</a>, <a class="el" href="osp__internal_8h_source.html#l00605">osp_update_rpc_pack</a>, <a class="el" href="lustre__idl_8h_source.html#l03796">OUT_WRITE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="osp__internal_8h_source.html#l00362">thandle_to_osp_thandle()</a>, and <a class="el" href="osp__internal_8h_source.html#l00368">thandle_to_osp_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="ac773530e7e5b07e126d49b0e0e80cac2"></a><!-- doxytag: member="osp_md_object.c::osp_object_create_interpreter" ref="ac773530e7e5b07e126d49b0e0e80cac2" args="(const struct lu_env *env, struct object_update_reply *reply, struct ptlrpc_request *req, struct osp_object *obj, void *data, int index, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int osp_object_create_interpreter </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosp__object.html">osp_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Interpreter call for object creation. </p>
<p>Object creation interpreter, which will be called after creating the remote object to set flags and status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>reply</em>&nbsp;</td><td>update reply </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>req</em>&nbsp;</td><td>ptlrpc update request for creating object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>data used in this function. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>index</em>&nbsp;</td><td>index(position) of create update in the whole updates </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rc</em>&nbsp;</td><td>update result on the remote MDT.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>only</em>&nbsp;</td><td>return 0 for now </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00080">80</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lu__object_8h_source.html#l00539">lu_object_header::loh_attr</a>, <a class="el" href="lu__object_8h_source.html#l00501">LOHA_EXISTS</a>, <a class="el" href="osp__internal_8h_source.html#l00284">osp_object_attr::ooa_attr</a>, <a class="el" href="osp__internal_8h_source.html#l00301">osp_object::opo_lock</a>, <a class="el" href="osp__internal_8h_source.html#l00292">osp_object::opo_non_exist</a>, <a class="el" href="osp__internal_8h_source.html#l00291">osp_object::opo_obj</a>, and <a class="el" href="osp__internal_8h_source.html#l00299">osp_object::opo_ooa</a>.</p>

<p>Referenced by <a class="el" href="osp__md__object_8c_source.html#l00173">osp_md_object_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a33acca859878cfc874cc54cdc3c33458"></a><!-- doxytag: member="osp_md_object.c::update_buffer_get_update" ref="a33acca859878cfc874cc54cdc3c33458" args="(struct object_update_request *request, unsigned int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobject__update.html">object_update</a>* update_buffer_get_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobject__update__request.html">object_update_request</a> *&nbsp;</td>
          <td class="paramname"> <em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00141">141</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03882">object_update_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l03842">object_update_request::ourq_count</a>, and <a class="el" href="lustre__idl_8h_source.html#l03844">object_update_request::ourq_updates</a>.</p>

<p>Referenced by <a class="el" href="osp__trans_8c_source.html#l00840">osp_insert_async_request()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab87b8d6d0e7f500b48bab8162b2f1e2f"></a><!-- doxytag: member="osp_md_object.c::osp_md_body_ops" ref="ab87b8d6d0e7f500b48bab8162b2f1e2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__body__operations.html">dt_body_operations</a> <a class="el" href="osp__md__object_8c.html#ab87b8d6d0e7f500b48bab8162b2f1e2f">osp_md_body_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .dbo_declare_write      = <a class="code" href="osp__md__object_8c.html#ac51dd6b1a9c5fbc06d6f4152ce018231" title="Implementation of dt_body_operations::dbo_declare_write.">osp_md_declare_write</a>,
        .dbo_write              = <a class="code" href="osp__md__object_8c.html#a0e37378b041497ac36f1b3191dec5523" title="Implementation of dt_body_operations::dbo_write.">osp_md_write</a>,
        .dbo_read               = <a class="code" href="osp__md__object_8c.html#a2c3f74ba035a0590ec2c62e1d71c0a56">osp_md_read</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l01236">1236</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l02127">osp_object_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a903290e01e7a292d2756658146333a2a"></a><!-- doxytag: member="osp_md_object.c::osp_md_index_ops" ref="a903290e01e7a292d2756658146333a2a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__index__operations.html">dt_index_operations</a> <a class="el" href="osp__md__object_8c.html#a903290e01e7a292d2756658146333a2a">osp_md_index_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .dio_lookup         = <a class="code" href="osp__md__object_8c.html#a591245c4ebf6389d7efa46658155a298" title="Implementation of dt_index_operations::dio_lookup.">osp_md_index_lookup</a>,
        .dio_declare_insert = <a class="code" href="osp__md__object_8c.html#acb860291af07bf52feb8be0d0f7c437e" title="Implementation of dt_index_operations::dio_declare_insert.">osp_md_declare_index_insert</a>,
        .dio_insert         = <a class="code" href="osp__md__object_8c.html#a84d93aa8cd243e32477bd22aa8a1dcfe" title="Implementation of dt_index_operations::dio_insert.">osp_md_index_insert</a>,
        .dio_declare_delete = <a class="code" href="osp__md__object_8c.html#aae426ea605f3e046805118dfd9674502" title="Implementation of dt_index_operations::dio_declare_delete.">osp_md_declare_index_delete</a>,
        .dio_delete         = <a class="code" href="osp__md__object_8c.html#a06c388e5624ede98b9ff4c0db2264a24" title="Implementation of dt_index_operations::dio_delete.">osp_md_index_delete</a>,
        .dio_it     = {
                .init     = <a class="code" href="osp__internal_8h.html#a0da5f987514d58d617d9e20d1b5ffa9e" title="Initialize the OSP layer index iteration.">osp_it_init</a>,
                .fini     = <a class="code" href="osp__internal_8h.html#ae9d075a9ad9358a90a4e0ee239e944f1" title="Finalize the OSP layer index iteration.">osp_it_fini</a>,
                .get      = <a class="code" href="osp__internal_8h.html#a07d21a6da27503c32900b08c2c084faf">osp_it_get</a>,
                .put      = <a class="code" href="osp__internal_8h.html#a8106562211602449cbbfe777335da553">osp_it_put</a>,
                .next     = <a class="code" href="osp__md__object_8c.html#a13fe2a9798279e8087e7837e1c62bb4e" title="Implementation of dt_index_operations::dio_it.next.">osp_md_index_it_next</a>,
                .key      = <a class="code" href="osp__md__object_8c.html#ac5856949727150216b247e465e4c6af5" title="Implementation of dt_index_operations::dio_it.key.">osp_it_key</a>,
                .key_size = <a class="code" href="osp__md__object_8c.html#acd7705c1cb3347f2ef141b13eef50433" title="Implementation of dt_index_operations::dio_it.key_size.">osp_it_key_size</a>,
                .rec      = <a class="code" href="osp__md__object_8c.html#aba0578ead2ed7c2bc60af12c2e8a4004" title="Implementation of dt_index_operations::dio_it.rec.">osp_md_index_it_rec</a>,
                .store    = <a class="code" href="osp__internal_8h.html#a80a49dbf124329dd0433ee6924d97462">osp_it_store</a>,
                .load     = <a class="code" href="osp__md__object_8c.html#a9a7cdfb679b747f846a7d23bafcc935f" title="Implementation of dt_index_operations::dio_it.load.">osp_it_load</a>,
                .key_rec  = <a class="code" href="osp__internal_8h.html#ae029b34f183e7b6def52134812822a2f">osp_it_key_rec</a>,
        }
}
</pre></div>
<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l00820">820</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l02083">osp_index_try()</a>.</p>

</div>
</div>
<a class="anchor" id="aee566563c307580adca54ebbe83a90ff"></a><!-- doxytag: member="osp_md_object.c::osp_md_obj_ops" ref="aee566563c307580adca54ebbe83a90ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__object__operations.html">dt_object_operations</a> <a class="el" href="osp__md__object_8c.html#aee566563c307580adca54ebbe83a90ff">osp_md_obj_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .do_read_lock         = <a class="code" href="osp__md__object_8c.html#a85e0e04b4a3691af8b1b1cf6d6f024d2" title="Implementation of dt_object_operations::do_read_lock.">osp_md_object_read_lock</a>,
        .do_write_lock        = <a class="code" href="osp__md__object_8c.html#a2977a76487b325490ac1e9c2a8d1a5a1" title="Implementation of dt_object_operations::do_write_lock.">osp_md_object_write_lock</a>,
        .do_read_unlock       = <a class="code" href="osp__md__object_8c.html#a8617fe54f9fec09b2c771a7efa72e2ba" title="Implementation of dt_object_operations::do_read_unlock.">osp_md_object_read_unlock</a>,
        .do_write_unlock      = <a class="code" href="osp__md__object_8c.html#addef3c8f76ccbe27374f29db55c557c5" title="Implementation of dt_object_operations::do_write_unlock.">osp_md_object_write_unlock</a>,
        .do_write_locked      = <a class="code" href="osp__md__object_8c.html#a0b6687dff9ae460066c64278b42b9f75" title="Implementation of dt_object_operations::do_write_locked.">osp_md_object_write_locked</a>,
        .do_declare_create    = <a class="code" href="osp__internal_8h.html#a1795337c33a409d5f78b87ff38a112ec" title="Implementation of dt_object_operations::do_declare_create.">osp_md_declare_object_create</a>,
        .do_create            = <a class="code" href="osp__internal_8h.html#a64726676693349c027bdbe148fba7d97" title="Implementation of dt_object_operations::do_create.">osp_md_object_create</a>,
        .do_declare_ref_add   = <a class="code" href="osp__md__object_8c.html#a596d48e7ed38d267c8196196d3e526f6" title="Implementation of dt_object_operations::do_declare_ref_del.">osp_md_declare_ref_add</a>,
        .do_ref_add           = <a class="code" href="osp__md__object_8c.html#a893de224d797f9a296eba67259fdf5be" title="Implementation of dt_object_operations::do_ref_add.">osp_md_ref_add</a>,
        .do_declare_ref_del   = <a class="code" href="osp__md__object_8c.html#a1fa7cd20d066e23bd20e620da81074a6" title="Implementation of dt_object_operations::do_declare_ref_del.">osp_md_declare_ref_del</a>,
        .do_ref_del           = <a class="code" href="osp__md__object_8c.html#ad1524c12848d82ef822179b48293658f" title="Implementation of dt_object_operations::do_ref_del.">osp_md_ref_del</a>,
        .do_declare_destroy   = <a class="code" href="osp__md__object_8c.html#a0ede70a4bef1e7d009f35f1d19fd6faa" title="Implement OSP layer dt_object_operations::do_declare_destroy() interface.">osp_md_declare_object_destroy</a>,
        .do_destroy           = <a class="code" href="osp__md__object_8c.html#a0397d9477ba8be96b90c94cefab5a3c2" title="Implement OSP layer dt_object_operations::do_destroy() interface.">osp_md_object_destroy</a>,
        .do_ah_init           = <a class="code" href="osp__md__object_8c.html#ab4da4f6701848592ffc75fd2e2861178" title="Implementation of dt_object_operations::do_ah_init.">osp_md_ah_init</a>,
        .do_attr_get          = <a class="code" href="osp__internal_8h.html#af3841bfc19af7e21ce75974da9e99b78" title="Implement OSP layer dt_object_operations::do_attr_get() interface.">osp_attr_get</a>,
        .do_declare_attr_set  = <a class="code" href="osp__internal_8h.html#aa0885e2736c65c081a737b04e83ddf94" title="Implementation of dt_object_operations::do_declare_attr_get.">osp_md_declare_attr_set</a>,
        .do_attr_set          = <a class="code" href="osp__internal_8h.html#ac407cef7eae29c85a3dee04fe4cc20ab" title="Implementation of dt_object_operations::do_attr_set.">osp_md_attr_set</a>,
        .do_xattr_get         = <a class="code" href="osp__internal_8h.html#aee4dfb5ebf4062287d3a3b1a4ee1ac13" title="Implement OSP layer dt_object_operations::do_xattr_get() interface.">osp_xattr_get</a>,
        .do_declare_xattr_set = <a class="code" href="osp__internal_8h.html#a087e25234317d46c46d282db94658f7b" title="Implement OSP layer dt_object_operations::do_declare_xattr_set() interface.">osp_declare_xattr_set</a>,
        .do_xattr_set         = <a class="code" href="osp__internal_8h.html#a6e9f34a7e74d91c77816e90c8d3002f5" title="Implement OSP layer dt_object_operations::do_xattr_set() interface.">osp_xattr_set</a>,
        .do_declare_xattr_del = <a class="code" href="osp__internal_8h.html#afd49d501a6423438845e4f1e65c42dde" title="Implement OSP layer dt_object_operations::do_declare_xattr_del() interface.">osp_declare_xattr_del</a>,
        .do_xattr_del         = <a class="code" href="osp__internal_8h.html#a5cba0564396dce70318ff5a5ac64f775" title="Implement OSP layer dt_object_operations::do_xattr_del() interface.">osp_xattr_del</a>,
        .do_index_try         = <a class="code" href="osp__md__object_8c.html#a989cb76d987bdbebdd96cb01548e0461" title="Implementation of dt_object_operations::do_index_try.">osp_md_index_try</a>,
        .do_object_lock       = <a class="code" href="osp__md__object_8c.html#a135828d0de44ddce16ecb853f320601a" title="Implementation of dt_object_operations::do_object_lock.">osp_md_object_lock</a>,
        .do_object_unlock     = <a class="code" href="osp__md__object_8c.html#abb51081826805d1142c68ae2acdd2204" title="Implementation of dt_object_operations::do_object_unlock.">osp_md_object_unlock</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="osp__md__object_8c_source.html#l01010">1010</a> of file <a class="el" href="osp__md__object_8c_source.html">osp_md_object.c</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l02127">osp_object_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
