<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: PortalRPC daemon</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PortalRPC daemon</h1>
<p><a class="el" href="structptlrpcd.html">ptlrpcd</a> is a special thread with its own set where other user might add requests when they don't want to wait for their completion.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpcd.html">ptlrpcd</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gabda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_RPC</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga04063a22d0ab5f2c0df443b03402f9fa">module_param</a> (<a class="el" href="group__ptlrpcd.html#gaa2d648d41351bca341d06dbbfc8cb8cd">max_ptlrpcds</a>, int, 0644)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga5d8f1182b8a0638f8c35a9e48c44f3db">MODULE_PARM_DESC</a> (<a class="el" href="group__ptlrpcd.html#gaa2d648d41351bca341d06dbbfc8cb8cd">max_ptlrpcds</a>,&quot;Max <a class="el" href="structptlrpcd.html">ptlrpcd</a> <a class="el" href="obd_8c.html#a20057145635eb007e0621c11bc2d7176">thread</a> count to be started.&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga1cff15935a0a23c6d5234d16a3a282d1">module_param</a> (<a class="el" href="group__ptlrpcd.html#ga8996b8c047045d33194d9e06a0cbfa8d">ptlrpcd_bind_policy</a>, int, 0644)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gaace70b4794d14cf0451d150068a47ad6">MODULE_PARM_DESC</a> (<a class="el" href="group__ptlrpcd.html#ga8996b8c047045d33194d9e06a0cbfa8d">ptlrpcd_bind_policy</a>,&quot;Ptlrpcd threads binding <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a> (obsolete).&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga880b4abe7ea4dee766b81450cf56d06d">MODULE_PARM_DESC</a> (<a class="el" href="group__ptlrpcd.html#ga8bf56da50f49fb9cc7c0bc52bc8e78eb">ptlrpcd_per_cpt_max</a>,&quot;Max <a class="el" href="structptlrpcd.html">ptlrpcd</a> <a class="el" href="obd_8c.html#a20057145635eb007e0621c11bc2d7176">thread</a> count to be started per cpt.&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga05cb73fd5f563bdc305d09aa0c4c4f8f">module_param</a> (<a class="el" href="group__ptlrpcd.html#ga93b98f6cd43f50f5c001464b4d516613">ptlrpcd_partner_group_size</a>, int, 0644)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gadc465e27776c4c8e26953f06b831089f">MODULE_PARM_DESC</a> (<a class="el" href="group__ptlrpcd.html#ga93b98f6cd43f50f5c001464b4d516613">ptlrpcd_partner_group_size</a>,&quot;Number of <a class="el" href="structptlrpcd.html">ptlrpcd</a> threads in a partner group.&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga6d81978a6dd9a0bcaefc3ce49d499dee">module_param</a> (<a class="el" href="group__ptlrpcd.html#ga39ee00fea2c30128a7f73313dd863a6e">ptlrpcd_cpts</a>, charp, 0644)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gafa7e8027b148e5cdf3e97c5b992cb656">MODULE_PARM_DESC</a> (<a class="el" href="group__ptlrpcd.html#ga39ee00fea2c30128a7f73313dd863a6e">ptlrpcd_cpts</a>,&quot;CPU partitions <a class="el" href="structptlrpcd.html">ptlrpcd</a> threads should run in&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga2acfae9e6349420190608a611125bb78">ptlrpcd_wake</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gabcd085253aea52532fca8a4f6ae05d7c">ptlrpcd_select_pc</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga8786798db7200aeedbfe4cd0a855232f">ptlrpcd_add_rqset</a> (struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Move all request from an existing request set to the <a class="el" href="structptlrpcd.html">ptlrpcd</a> queue.  <a href="#ga8786798db7200aeedbfe4cd0a855232f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga1cddf9869def1f66fd29dae1f5d877f6">ptlrpcd_steal_rqset</a> (struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *des, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *src)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return transferred RPCs count.  <a href="#ga1cddf9869def1f66fd29dae1f5d877f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gad8a1fd19f62cb6e52ee2b145c63f5dd1">ptlrpcd_add_req</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Requests that are added to the <a class="el" href="structptlrpcd.html">ptlrpcd</a> queue are sent via ptlrpcd_check-&gt;<a class="el" href="group__net.html#ga63613680c8953223c8efc4331656b11a" title="this sends any unsent RPCs in set and returns 1 if all are sent and no more replies...">ptlrpc_check_set()</a>.  <a href="#gad8a1fd19f62cb6e52ee2b145c63f5dd1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gad58ba78046465270e42ffa47d11f4d7e">ptlrpc_reqset_get</a> (struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga1a5f6f050d58107722206e6d2e651cbd">ptlrpcd_check</a> (struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if there is more work to do on <a class="el" href="structptlrpcd.html">ptlrpcd</a> set.  <a href="#ga1a5f6f050d58107722206e6d2e651cbd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga9f9a9070ef2ee141f96e15a2512be310">ptlrpcd</a> (void *arg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main <a class="el" href="structptlrpcd.html">ptlrpcd</a> thread.  <a href="#ga9f9a9070ef2ee141f96e15a2512be310"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gac8b793ed162ef61c41412704f68f7f3f">ptlrpcd_ctl_init</a> (struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc, int index, int cpt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga764145e94d8f4420766ad10bfbc1adfe">ptlrpcd_partners</a> (struct <a class="el" href="structptlrpcd.html">ptlrpcd</a> *pd, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga92e1290b388e5bd6c5ae97f5c753589a">ptlrpcd_start</a> (struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gadf6c0a253a44e1a561d3650cafa0aeab">ptlrpcd_stop</a> (struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc, int force)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gad8ef02e8c2a1c0621b003d24cd5975c4">ptlrpcd_free</a> (struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *pc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga173deb041e269c0a7947472f6531f896">ptlrpcd_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gaebe808422bac6e9eb036cf569e852fe4">ptlrpcd_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga2b4cdaf9bce76784e8efa1f9bda8c58b">ptlrpcd_addref</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga54a4bcf408e22400c741b530bbb8ec06">ptlrpcd_decref</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gaa2d648d41351bca341d06dbbfc8cb8cd">max_ptlrpcds</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga8996b8c047045d33194d9e06a0cbfa8d">ptlrpcd_bind_policy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga8bf56da50f49fb9cc7c0bc52bc8e78eb">ptlrpcd_per_cpt_max</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga93b98f6cd43f50f5c001464b4d516613">ptlrpcd_partner_group_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga39ee00fea2c30128a7f73313dd863a6e">ptlrpcd_cpts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gaaa33d3a9af24cd317ab8fc6de2da819a">ptlrpcds_cpt_idx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga017ff18bbbf12192cf2b330e12a7bf49">ptlrpcds_num</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpcd.html">ptlrpcd</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gacf5cc1f3f7e39c237392469db7f89d2f">ptlrpcds</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga550d33725a6034d2b73ee1ac87e7b087">ptlrpcd_rcv</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#ga7723c3e0086e4476292c06bb0fa8db00">ptlrpcd_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ptlrpcd.html#gab1e1324450eb18f953c4131b03edcc80">ptlrpcd_users</a> = 0</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><a class="el" href="structptlrpcd.html">ptlrpcd</a> is a special thread with its own set where other user might add requests when they don't want to wait for their completion. </p>
<p>PtlRPCD will take care of sending such requests and then processing their replies and calling completion callbacks as necessary. The callbacks are called directly from <a class="el" href="structptlrpcd.html">ptlrpcd</a> context. It is important to never significantly block (esp. on RPCs!) within such completion handler or a deadlock might occur where <a class="el" href="structptlrpcd.html">ptlrpcd</a> enters some callback that attempts to send another RPC and wait for it to return, during which time <a class="el" href="structptlrpcd.html">ptlrpcd</a> is completely blocked, so e.g. if import fails, recovery cannot progress because connection requests are also sent by <a class="el" href="structptlrpcd.html">ptlrpcd</a>. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gabda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="ptlrpcd.c::DEBUG_SUBSYSTEM" ref="gabda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_RPC</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00056">56</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga6d81978a6dd9a0bcaefc3ce49d499dee"></a><!-- doxytag: member="ptlrpcd.c::module_param" ref="ga6d81978a6dd9a0bcaefc3ce49d499dee" args="(ptlrpcd_cpts, charp, 0644)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga39ee00fea2c30128a7f73313dd863a6e">ptlrpcd_cpts</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">charp&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0644&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga05cb73fd5f563bdc305d09aa0c4c4f8f"></a><!-- doxytag: member="ptlrpcd.c::module_param" ref="ga05cb73fd5f563bdc305d09aa0c4c4f8f" args="(ptlrpcd_partner_group_size, int, 0644)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga93b98f6cd43f50f5c001464b4d516613">ptlrpcd_partner_group_size</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0644&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1cff15935a0a23c6d5234d16a3a282d1"></a><!-- doxytag: member="ptlrpcd.c::module_param" ref="ga1cff15935a0a23c6d5234d16a3a282d1" args="(ptlrpcd_bind_policy, int, 0644)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga8996b8c047045d33194d9e06a0cbfa8d">ptlrpcd_bind_policy</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0644&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga04063a22d0ab5f2c0df443b03402f9fa"></a><!-- doxytag: member="ptlrpcd.c::module_param" ref="ga04063a22d0ab5f2c0df443b03402f9fa" args="(max_ptlrpcds, int, 0644)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#gaa2d648d41351bca341d06dbbfc8cb8cd">max_ptlrpcds</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0644&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gafa7e8027b148e5cdf3e97c5b992cb656"></a><!-- doxytag: member="ptlrpcd.c::MODULE_PARM_DESC" ref="gafa7e8027b148e5cdf3e97c5b992cb656" args="(ptlrpcd_cpts,&quot;CPU partitions ptlrpcd threads should run in&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga39ee00fea2c30128a7f73313dd863a6e">ptlrpcd_cpts</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;CPU partitions <a class="el" href="structptlrpcd.html">ptlrpcd</a> threads should run in&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gadc465e27776c4c8e26953f06b831089f"></a><!-- doxytag: member="ptlrpcd.c::MODULE_PARM_DESC" ref="gadc465e27776c4c8e26953f06b831089f" args="(ptlrpcd_partner_group_size,&quot;Number of ptlrpcd threads in a partner group.&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga93b98f6cd43f50f5c001464b4d516613">ptlrpcd_partner_group_size</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="structptlrpcd.html">ptlrpcd</a> threads in a partner group.&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga880b4abe7ea4dee766b81450cf56d06d"></a><!-- doxytag: member="ptlrpcd.c::MODULE_PARM_DESC" ref="ga880b4abe7ea4dee766b81450cf56d06d" args="(ptlrpcd_per_cpt_max,&quot;Max ptlrpcd thread count to be started per cpt.&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga8bf56da50f49fb9cc7c0bc52bc8e78eb">ptlrpcd_per_cpt_max</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Max <a class="el" href="structptlrpcd.html">ptlrpcd</a> <a class="el" href="obd_8c.html#a20057145635eb007e0621c11bc2d7176">thread</a> count to be started per cpt.&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gaace70b4794d14cf0451d150068a47ad6"></a><!-- doxytag: member="ptlrpcd.c::MODULE_PARM_DESC" ref="gaace70b4794d14cf0451d150068a47ad6" args="(ptlrpcd_bind_policy,&quot;Ptlrpcd threads binding mode (obsolete).&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#ga8996b8c047045d33194d9e06a0cbfa8d">ptlrpcd_bind_policy</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Ptlrpcd threads binding <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a> (obsolete).&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga5d8f1182b8a0638f8c35a9e48c44f3db"></a><!-- doxytag: member="ptlrpcd.c::MODULE_PARM_DESC" ref="ga5d8f1182b8a0638f8c35a9e48c44f3db" args="(max_ptlrpcds,&quot;Max ptlrpcd thread count to be started.&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ptlrpcd.html#gaa2d648d41351bca341d06dbbfc8cb8cd">max_ptlrpcds</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Max <a class="el" href="structptlrpcd.html">ptlrpcd</a> <a class="el" href="obd_8c.html#a20057145635eb007e0621c11bc2d7176">thread</a> count to be started.&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gad58ba78046465270e42ffa47d11f4d7e"></a><!-- doxytag: member="ptlrpcd.c::ptlrpc_reqset_get" ref="gad58ba78046465270e42ffa47d11f4d7e" args="(struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpc_reqset_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00307">307</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00316">ptlrpcd_check()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f9a9070ef2ee141f96e15a2512be310"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd" ref="ga9f9a9070ef2ee141f96e15a2512be310" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="structptlrpcd.html">ptlrpcd</a> </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main <a class="el" href="structptlrpcd.html">ptlrpcd</a> thread. </p>
<p>ptlrpc's code paths like to execute in process context, so we have this thread which spins on a set which contains the rpcs and sends them. </p>

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00427">427</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00207">cfs_cpt_bind()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lu__object_8h_source.html#l01007">LCT_CL_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l01039">LCT_NOREF</a>, <a class="el" href="lu__object_8h_source.html#l01047">LCT_REMEMBER</a>, <a class="el" href="lu__object_8h_source.html#l01012">LCT_SESSION</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lustre__net_8h_source.html#l01936">LIOD_FORCE</a>, <a class="el" href="lustre__net_8h_source.html#l01930">LIOD_STOP</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lu__object_8c_source.html#l01776">lu_context_enter()</a>, <a class="el" href="lu__object_8c_source.html#l01786">lu_context_exit()</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01729">lu_context_init()</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="lustre__net_8h_source.html#l01898">ptlrpcd_ctl::pc_cpt</a>, <a class="el" href="lustre__net_8h_source.html#l01918">ptlrpcd_ctl::pc_error</a>, <a class="el" href="lustre__net_8h_source.html#l01882">ptlrpcd_ctl::pc_finishing</a>, <a class="el" href="lustre__net_8h_source.html#l01870">ptlrpcd_ctl::pc_flags</a>, <a class="el" href="lustre__net_8h_source.html#l01874">ptlrpcd_ctl::pc_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01890">ptlrpcd_ctl::pc_name</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, <a class="el" href="lustre__net_8h_source.html#l01878">ptlrpcd_ctl::pc_starting</a>, <a class="el" href="client_8c_source.html#l03104">ptlrpc_abort_set()</a>, <a class="el" href="client_8c_source.html#l02121">ptlrpc_expired_set()</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l02207">ptlrpc_set_next_timeout()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00316">ptlrpcd_check()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="gnilnd__modparams_8c_source.html#l00052">timeout</a>.</p>

</div>
</div>
<a class="anchor" id="gad8a1fd19f62cb6e52ee2b145c63f5dd1"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_add_req" ref="gad8a1fd19f62cb6e52ee2b145c63f5dd1" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpcd_add_req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Requests that are added to the <a class="el" href="structptlrpcd.html">ptlrpcd</a> queue are sent via ptlrpcd_check-&gt;<a class="el" href="group__net.html#ga63613680c8953223c8efc4331656b11a" title="this sends any unsent RPCs in set and returns 1 if all are sent and no more replies...">ptlrpc_check_set()</a>. </p>

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00268">268</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00154">back_to_sleep()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__import_8h_source.html#l00102">LUSTRE_IMP_REPLAY</a>, <a class="el" href="pack__generic_8c_source.html#l01496">lustre_msg_set_jobid()</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="lustre__net_8h_source.html#l01902">ptlrpcd_ctl::pc_index</a>, <a class="el" href="lustre__net_8h_source.html#l01890">ptlrpcd_ctl::pc_name</a>, <a class="el" href="client_8c_source.html#l01079">ptlrpc_set_add_new_req()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00171">ptlrpcd_select_pc()</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_invalid_rqset</a>, <a class="el" href="lustre__net_8h_source.html#l00966">ptlrpc_request::rq_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01009">ptlrpc_request::rq_phase</a>, <a class="el" href="lustre__net_8h_source.html#l00717">RQ_PHASE_NEW</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01185">ldlm_cli_cancel_req()</a>, <a class="el" href="mdc__locks_8c_source.html#l01181">mdc_intent_getattr_async()</a>, <a class="el" href="osc__request_8c_source.html#l01518">osc_brw_redo_request()</a>, <a class="el" href="osc__request_8c_source.html#l01764">osc_build_rpc()</a>, <a class="el" href="osc__request_8c_source.html#l00606">osc_destroy()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__io_8c_source.html#l00644">osc_io_data_version_start()</a>, <a class="el" href="osc__request_8c_source.html#l00303">osc_ladvise_base()</a>, <a class="el" href="osc__request_8c_source.html#l00417">osc_punch_base()</a>, <a class="el" href="osc__request_8c_source.html#l02422">osc_set_info_async()</a>, <a class="el" href="osc__request_8c_source.html#l00231">osc_setattr_async()</a>, <a class="el" href="osc__request_8c_source.html#l00498">osc_sync_base()</a>, <a class="el" href="osp__trans_8c_source.html#l01104">osp_send_update_req()</a>, <a class="el" href="osp__precreate_8c_source.html#l00175">osp_statfs_update()</a>, <a class="el" href="osp__sync_8c_source.html#l00602">osp_sync_send_new_rpc()</a>, <a class="el" href="osp__trans_8c_source.html#l00714">osp_unplug_async_request()</a>, <a class="el" href="import_8c_source.html#l00648">ptlrpc_connect_import()</a>, <a class="el" href="pinger_8c_source.html#l00098">ptlrpc_ping()</a>, <a class="el" href="client_8c_source.html#l03006">ptlrpc_replay_req()</a>, <a class="el" href="client_8c_source.html#l03270">ptlrpcd_add_work_req()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, <a class="el" href="qsd__request_8c_source.html#l00091">qsd_send_dqacq()</a>, <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>, and <a class="el" href="import_8c_source.html#l01368">signal_completed_replay()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8786798db7200aeedbfe4cd0a855232f"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_add_rqset" ref="ga8786798db7200aeedbfe4cd0a855232f" args="(struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpcd_add_rqset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move all request from an existing request set to the <a class="el" href="structptlrpcd.html">ptlrpcd</a> queue. </p>
<p>All requests from the set must be in phase RQ_PHASE_NEW. </p>

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00200">200</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00266">list_for_each_safe</a>, <a class="el" href="list_8h_source.html#l00227">list_splice_init()</a>, <a class="el" href="lustre__net_8h_source.html#l01910">ptlrpcd_ctl::pc_npartners</a>, <a class="el" href="lustre__net_8h_source.html#l01906">ptlrpcd_ctl::pc_partners</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, <a class="el" href="ptlrpcd_8c_source.html#l00171">ptlrpcd_select_pc()</a>, <a class="el" href="lustre__net_8h_source.html#l01009">ptlrpc_request::rq_phase</a>, <a class="el" href="lustre__net_8h_source.html#l00717">RQ_PHASE_NEW</a>, <a class="el" href="lustre__net_8h_source.html#l00861">rq_set_chain</a>, and <a class="el" href="lustre__net_8h_source.html#l00579">ptlrpc_request_set::set_waitq</a>.</p>

</div>
</div>
<a class="anchor" id="ga2b4cdaf9bce76784e8efa1f9bda8c58b"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_addref" ref="ga2b4cdaf9bce76784e8efa1f9bda8c58b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpcd_addref </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00955">955</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00158">ptlrpcd_mutex</a>, <a class="el" href="ptlrpcd_8c_source.html#l00159">ptlrpcd_users</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lwp__dev_8c_source.html#l00245">lwp_init0()</a>, <a class="el" href="mdc__request_8c_source.html#l02642">mdc_setup()</a>, <a class="el" href="mgc__request_8c_source.html#l00891">mgc_setup()</a>, <a class="el" href="osc__request_8c_source.html#l02738">osc_setup()</a>, <a class="el" href="osp__dev_8c_source.html#l00996">osp_init0()</a>, and <a class="el" href="events_8c_source.html#l00615">ptlrpc_init_portals()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a5f6f050d58107722206e6d2e651cbd"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_check" ref="ga1a5f6f050d58107722206e6d2e651cbd" args="(struct lu_env *env, struct ptlrpcd_ctl *pc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ptlrpcd_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td>
          <td class="paramname"> <em>pc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if there is more work to do on <a class="el" href="structptlrpcd.html">ptlrpcd</a> set. </p>
<p>Returns 1 if yes. </p>

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00316">316</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00266">list_for_each_safe</a>, <a class="el" href="list_8h_source.html#l00227">list_splice_init()</a>, <a class="el" href="lu__object_8c_source.html#l01889">lu_env_refill()</a>, <a class="el" href="lustre__net_8h_source.html#l01914">ptlrpcd_ctl::pc_cursor</a>, <a class="el" href="lustre__net_8h_source.html#l01902">ptlrpcd_ctl::pc_index</a>, <a class="el" href="lustre__net_8h_source.html#l01874">ptlrpcd_ctl::pc_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01910">ptlrpcd_ctl::pc_npartners</a>, <a class="el" href="lustre__net_8h_source.html#l01906">ptlrpcd_ctl::pc_partners</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, <a class="el" href="client_8c_source.html#l01644">ptlrpc_check_set()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00307">ptlrpc_reqset_get()</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00352">ptlrpc_reqset_put()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00240">ptlrpcd_steal_rqset()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01009">ptlrpc_request::rq_phase</a>, <a class="el" href="lustre__net_8h_source.html#l00721">RQ_PHASE_COMPLETE</a>, <a class="el" href="lustre__net_8h_source.html#l00861">rq_set_chain</a>, and <a class="el" href="lustre__net_8h_source.html#l00575">ptlrpc_request_set::set_new_count</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00427">ptlrpcd()</a>.</p>

</div>
</div>
<a class="anchor" id="gac8b793ed162ef61c41412704f68f7f3f"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_ctl_init" ref="gac8b793ed162ef61c41412704f68f7f3f" args="(struct ptlrpcd_ctl *pc, int index, int cpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpcd_ctl_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td>
          <td class="paramname"> <em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cpt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00526">526</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__net_8h_source.html#l01898">ptlrpcd_ctl::pc_cpt</a>, <a class="el" href="lustre__net_8h_source.html#l01882">ptlrpcd_ctl::pc_finishing</a>, <a class="el" href="lustre__net_8h_source.html#l01902">ptlrpcd_ctl::pc_index</a>, <a class="el" href="lustre__net_8h_source.html#l01874">ptlrpcd_ctl::pc_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01890">ptlrpcd_ctl::pc_name</a>, and <a class="el" href="lustre__net_8h_source.html#l01878">ptlrpcd_ctl::pc_starting</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga54a4bcf408e22400c741b530bbb8ec06"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_decref" ref="ga54a4bcf408e22400c741b530bbb8ec06" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpcd_decref </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00971">971</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00158">ptlrpcd_mutex</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00159">ptlrpcd_users</a>.</p>

<p>Referenced by <a class="el" href="lwp__dev_8c_source.html#l00358">lwp_device_fini()</a>, <a class="el" href="lwp__dev_8c_source.html#l00245">lwp_init0()</a>, <a class="el" href="mdc__request_8c_source.html#l02720">mdc_cleanup()</a>, <a class="el" href="mdc__request_8c_source.html#l02642">mdc_setup()</a>, <a class="el" href="mgc__request_8c_source.html#l00873">mgc_cleanup()</a>, <a class="el" href="mgc__request_8c_source.html#l00891">mgc_setup()</a>, <a class="el" href="osc__request_8c_source.html#l02874">osc_cleanup()</a>, <a class="el" href="osc__request_8c_source.html#l02738">osc_setup()</a>, <a class="el" href="osp__dev_8c_source.html#l01319">osp_device_fini()</a>, <a class="el" href="osp__dev_8c_source.html#l00996">osp_init0()</a>, and <a class="el" href="events_8c_source.html#l00632">ptlrpc_exit_portals()</a>.</p>

</div>
</div>
<a class="anchor" id="ga173deb041e269c0a7947472f6531f896"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_fini" ref="ga173deb041e269c0a7947472f6531f896" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ptlrpcd_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00701">701</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00093">cfs_cpt_number()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="ptlrpcd_8c_source.html#l00076">pd_nthreads</a>, <a class="el" href="ptlrpcd_8c_source.html#l00666">ptlrpcd_free()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00156">ptlrpcd_rcv</a>, <a class="el" href="ptlrpcd_8c_source.html#l00648">ptlrpcd_stop()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00143">ptlrpcds_cpt_idx</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00146">ptlrpcds_num</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gad8ef02e8c2a1c0621b003d24cd5975c4"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_free" ref="gad8ef02e8c2a1c0621b003d24cd5975c4" args="(struct ptlrpcd_ctl *pc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpcd_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td>
          <td class="paramname"> <em>pc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00666">666</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lustre__net_8h_source.html#l01936">LIOD_FORCE</a>, <a class="el" href="lustre__net_8h_source.html#l01926">LIOD_START</a>, <a class="el" href="lustre__net_8h_source.html#l01930">LIOD_STOP</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__net_8h_source.html#l01894">ptlrpcd_ctl::pc_env</a>, <a class="el" href="lustre__net_8h_source.html#l01918">ptlrpcd_ctl::pc_error</a>, <a class="el" href="lustre__net_8h_source.html#l01882">ptlrpcd_ctl::pc_finishing</a>, <a class="el" href="lustre__net_8h_source.html#l01870">ptlrpcd_ctl::pc_flags</a>, <a class="el" href="lustre__net_8h_source.html#l01874">ptlrpcd_ctl::pc_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01910">ptlrpcd_ctl::pc_npartners</a>, <a class="el" href="lustre__net_8h_source.html#l01906">ptlrpcd_ctl::pc_partners</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, and <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="gaebe808422bac6e9eb036cf569e852fe4"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_init" ref="gaebe808422bac6e9eb036cf569e852fe4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ptlrpcd_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00735">735</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00095">CFS_CPT_ANY</a>, <a class="el" href="libcfs__cpu_8c_source.html#l00093">cfs_cpt_number()</a>, <a class="el" href="libcfs__cpu_8c_source.html#l00100">cfs_cpt_weight()</a>, <a class="el" href="libcfs__string_8c_source.html#l00493">cfs_expr_list_free()</a>, <a class="el" href="libcfs__string_8c_source.html#l00515">cfs_expr_list_parse()</a>, <a class="el" href="libcfs__string_8c_source.html#l00447">cfs_expr_list_values()</a>, <a class="el" href="libcfs__string_8h_source.html#l00090">cfs_expr_list_values_free()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__net_8h_source.html#l01940">LIOD_RECOVERY</a>, <a class="el" href="ptlrpcd_8c_source.html#l00087">max_ptlrpcds</a>, <a class="el" href="mdsrate_8c_source.html#l00111">nthreads</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00716">OBD_CPT_ALLOC</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="lustre__net_8h_source.html#l01870">ptlrpcd_ctl::pc_flags</a>, <a class="el" href="ptlrpcd_8c_source.html#l00074">pd_cpt</a>, <a class="el" href="ptlrpcd_8c_source.html#l00075">pd_cursor</a>, <a class="el" href="ptlrpcd_8c_source.html#l00077">pd_groupsize</a>, <a class="el" href="ptlrpcd_8c_source.html#l00073">pd_index</a>, <a class="el" href="ptlrpcd_8c_source.html#l00076">pd_nthreads</a>, <a class="el" href="ptlrpcd_8c_source.html#l00072">pd_size</a>, <a class="el" href="ptlrpcd_8c_source.html#l00078">pd_threads</a>, <a class="el" href="ptlrpcd_8c_source.html#l00097">ptlrpcd_bind_policy</a>, <a class="el" href="ptlrpcd_8c_source.html#l00137">ptlrpcd_cpts</a>, <a class="el" href="ptlrpcd_8c_source.html#l00526">ptlrpcd_ctl_init()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00116">ptlrpcd_partner_group_size</a>, <a class="el" href="ptlrpcd_8c_source.html#l00565">ptlrpcd_partners()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00106">ptlrpcd_per_cpt_max</a>, <a class="el" href="ptlrpcd_8c_source.html#l00156">ptlrpcd_rcv</a>, <a class="el" href="ptlrpcd_8c_source.html#l00598">ptlrpcd_start()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00143">ptlrpcds_cpt_idx</a>, <a class="el" href="ptlrpcd_8c_source.html#l00146">ptlrpcds_num</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00955">ptlrpcd_addref()</a>.</p>

</div>
</div>
<a class="anchor" id="ga764145e94d8f4420766ad10bfbc1adfe"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_partners" ref="ga764145e94d8f4420766ad10bfbc1adfe" args="(struct ptlrpcd *pd, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ptlrpcd_partners </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd.html">ptlrpcd</a> *&nbsp;</td>
          <td class="paramname"> <em>pd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00565">565</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00716">OBD_CPT_ALLOC</a>, <a class="el" href="lustre__net_8h_source.html#l01898">ptlrpcd_ctl::pc_cpt</a>, <a class="el" href="lustre__net_8h_source.html#l01910">ptlrpcd_ctl::pc_npartners</a>, <a class="el" href="lustre__net_8h_source.html#l01906">ptlrpcd_ctl::pc_partners</a>, <a class="el" href="ptlrpcd_8c_source.html#l00077">pd_groupsize</a>, <a class="el" href="ptlrpcd_8c_source.html#l00078">pd_threads</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gabcd085253aea52532fca8a4f6ae05d7c"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_select_pc" ref="gabcd085253aea52532fca8a4f6ae05d7c" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a>* ptlrpcd_select_pc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00171">171</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__cpu_8c_source.html#l00193">cfs_cpt_current()</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, <a class="el" href="ptlrpcd_8c_source.html#l00075">pd_cursor</a>, <a class="el" href="ptlrpcd_8c_source.html#l00076">pd_nthreads</a>, <a class="el" href="ptlrpcd_8c_source.html#l00078">pd_threads</a>, <a class="el" href="ptlrpcd_8c_source.html#l00156">ptlrpcd_rcv</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00143">ptlrpcds_cpt_idx</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00200">ptlrpcd_add_rqset()</a>.</p>

</div>
</div>
<a class="anchor" id="ga92e1290b388e5bd6c5ae97f5c753589a"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_start" ref="ga92e1290b388e5bd6c5ae97f5c753589a" args="(struct ptlrpcd_ctl *pc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpcd_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td>
          <td class="paramname"> <em>pc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00598">598</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01007">LCT_CL_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l01047">LCT_REMEMBER</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lustre__net_8h_source.html#l01926">LIOD_START</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01729">lu_context_init()</a>, <a class="el" href="lustre__net_8h_source.html#l01894">ptlrpcd_ctl::pc_env</a>, <a class="el" href="lustre__net_8h_source.html#l01918">ptlrpcd_ctl::pc_error</a>, <a class="el" href="lustre__net_8h_source.html#l01870">ptlrpcd_ctl::pc_flags</a>, <a class="el" href="lustre__net_8h_source.html#l01874">ptlrpcd_ctl::pc_lock</a>, <a class="el" href="lustre__net_8h_source.html#l01890">ptlrpcd_ctl::pc_name</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, <a class="el" href="lustre__net_8h_source.html#l01878">ptlrpcd_ctl::pc_starting</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1cddf9869def1f66fd29dae1f5d877f6"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_steal_rqset" ref="ga1cddf9869def1f66fd29dae1f5d877f6" args="(struct ptlrpc_request_set *des, struct ptlrpc_request_set *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ptlrpcd_steal_rqset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>des</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return transferred RPCs count. </p>

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00240">240</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00266">list_for_each_safe</a>, <a class="el" href="list_8h_source.html#l00227">list_splice_init()</a>, <a class="el" href="lustre__net_8h_source.html#l00861">rq_set_chain</a>, <a class="el" href="lustre__net_8h_source.html#l00575">ptlrpc_request_set::set_new_count</a>, <a class="el" href="lustre__net_8h_source.html#l00598">ptlrpc_request_set::set_new_req_lock</a>, <a class="el" href="lustre__net_8h_source.html#l00600">ptlrpc_request_set::set_new_requests</a>, <a class="el" href="lustre__net_8h_source.html#l00577">ptlrpc_request_set::set_remaining</a>, and <a class="el" href="lustre__net_8h_source.html#l00582">ptlrpc_request_set::set_requests</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00316">ptlrpcd_check()</a>.</p>

</div>
</div>
<a class="anchor" id="gadf6c0a253a44e1a561d3650cafa0aeab"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_stop" ref="gadf6c0a253a44e1a561d3650cafa0aeab" args="(struct ptlrpcd_ctl *pc, int force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpcd_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> *&nbsp;</td>
          <td class="paramname"> <em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00648">648</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__net_8h_source.html#l01936">LIOD_FORCE</a>, <a class="el" href="lustre__net_8h_source.html#l01926">LIOD_START</a>, <a class="el" href="lustre__net_8h_source.html#l01930">LIOD_STOP</a>, <a class="el" href="lustre__net_8h_source.html#l01870">ptlrpcd_ctl::pc_flags</a>, <a class="el" href="lustre__net_8h_source.html#l01886">ptlrpcd_ctl::pc_set</a>, and <a class="el" href="lustre__net_8h_source.html#l00579">ptlrpc_request_set::set_waitq</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2acfae9e6349420190608a611125bb78"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_wake" ref="ga2acfae9e6349420190608a611125bb78" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptlrpcd_wake </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00161">161</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gaa2d648d41351bca341d06dbbfc8cb8cd"></a><!-- doxytag: member="ptlrpcd.c::max_ptlrpcds" ref="gaa2d648d41351bca341d06dbbfc8cb8cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__ptlrpcd.html#gaa2d648d41351bca341d06dbbfc8cb8cd">max_ptlrpcds</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00087">87</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8996b8c047045d33194d9e06a0cbfa8d"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_bind_policy" ref="ga8996b8c047045d33194d9e06a0cbfa8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__ptlrpcd.html#ga8996b8c047045d33194d9e06a0cbfa8d">ptlrpcd_bind_policy</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00097">97</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga39ee00fea2c30128a7f73313dd863a6e"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_cpts" ref="ga39ee00fea2c30128a7f73313dd863a6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="group__ptlrpcd.html#ga39ee00fea2c30128a7f73313dd863a6e">ptlrpcd_cpts</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00137">137</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7723c3e0086e4476292c06bb0fa8db00"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_mutex" ref="ga7723c3e0086e4476292c06bb0fa8db00" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="group__ptlrpcd.html#ga7723c3e0086e4476292c06bb0fa8db00">ptlrpcd_mutex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00158">158</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00955">ptlrpcd_addref()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>.</p>

</div>
</div>
<a class="anchor" id="ga93b98f6cd43f50f5c001464b4d516613"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_partner_group_size" ref="ga93b98f6cd43f50f5c001464b4d516613" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__ptlrpcd.html#ga93b98f6cd43f50f5c001464b4d516613">ptlrpcd_partner_group_size</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00116">116</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8bf56da50f49fb9cc7c0bc52bc8e78eb"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_per_cpt_max" ref="ga8bf56da50f49fb9cc7c0bc52bc8e78eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__ptlrpcd.html#ga8bf56da50f49fb9cc7c0bc52bc8e78eb">ptlrpcd_per_cpt_max</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00106">106</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga550d33725a6034d2b73ee1ac87e7b087"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_rcv" ref="ga550d33725a6034d2b73ee1ac87e7b087" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpcd__ctl.html">ptlrpcd_ctl</a> <a class="el" href="group__ptlrpcd.html#ga550d33725a6034d2b73ee1ac87e7b087">ptlrpcd_rcv</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00156">156</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00171">ptlrpcd_select_pc()</a>.</p>

</div>
</div>
<a class="anchor" id="gab1e1324450eb18f953c4131b03edcc80"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcd_users" ref="gab1e1324450eb18f953c4131b03edcc80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__ptlrpcd.html#gab1e1324450eb18f953c4131b03edcc80">ptlrpcd_users</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00159">159</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00955">ptlrpcd_addref()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>.</p>

</div>
</div>
<a class="anchor" id="gacf5cc1f3f7e39c237392469db7f89d2f"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcds" ref="gacf5cc1f3f7e39c237392469db7f89d2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpcd.html">ptlrpcd</a>** <a class="el" href="group__ptlrpcd.html#gacf5cc1f3f7e39c237392469db7f89d2f">ptlrpcds</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00147">147</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaaa33d3a9af24cd317ab8fc6de2da819a"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcds_cpt_idx" ref="gaaa33d3a9af24cd317ab8fc6de2da819a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="group__ptlrpcd.html#gaaa33d3a9af24cd317ab8fc6de2da819a">ptlrpcds_cpt_idx</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00143">143</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00171">ptlrpcd_select_pc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga017ff18bbbf12192cf2b330e12a7bf49"></a><!-- doxytag: member="ptlrpcd.c::ptlrpcds_num" ref="ga017ff18bbbf12192cf2b330e12a7bf49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__ptlrpcd.html#ga017ff18bbbf12192cf2b330e12a7bf49">ptlrpcds_num</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ptlrpcd_8c_source.html#l00146">146</a> of file <a class="el" href="ptlrpcd_8c_source.html">ptlrpcd.c</a>.</p>

<p>Referenced by <a class="el" href="ptlrpcd_8c_source.html#l00701">ptlrpcd_fini()</a>, and <a class="el" href="ptlrpcd_8c_source.html#l00735">ptlrpcd_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
