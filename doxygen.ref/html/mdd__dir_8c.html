<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdd/mdd_dir.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdd/mdd_dir.c File Reference</h1><code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__mds_8h_source.html">lustre_mds.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mdd__internal_8h_source.html">mdd_internal.h</a>&quot;</code><br/>

<p><a href="mdd__dir_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a9f994f7d3f8ab6f340289acffa8ad964">rename_order</a> { <a class="el" href="mdd__dir_8c.html#a9f994f7d3f8ab6f340289acffa8ad964a0d8038dacbe0eee01876cfb046a38b43">MDD_RN_SAME</a>, 
<a class="el" href="mdd__dir_8c.html#a9f994f7d3f8ab6f340289acffa8ad964a5bb8a0c66777c6aa35b41820488d148b">MDD_RN_SRCTGT</a>, 
<a class="el" href="mdd__dir_8c.html#a9f994f7d3f8ab6f340289acffa8ad964aae3d62129edf9431a57fd16f3e23cee4">MDD_RN_TGTSRC</a>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ad12ed47dc06c20b5d1169e6362707e69">mdd_name_check</a> (struct <a class="el" href="structmdd__device.html">mdd_device</a> *m, const struct <a class="el" href="structlu__name.html">lu_name</a> *ln)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a4d90def68d6c907914d680014a1ee207">__mdd_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, int mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a4c4a040bf5959fbd2c83dadb7afc24ef">mdd_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#afdeaec990d186a386cb1801e0e1f1c42">mdd_parent_fid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get parent FID of the directory.  <a href="#afdeaec990d186a386cb1801e0e1f1c42"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ad60e6ab0fa70382bd23ef46593faef36">mdd_is_root</a> (struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aac05a9f16fb55b71234136b42a74d2a6">mdd_is_parent</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *p1, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *lf, struct <a class="el" href="structlu__fid.html">lu_fid</a> *pf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a118dbc57216c3060c13f6d23c295d9af">mdd_is_subdir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *mo, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structlu__fid.html">lu_fid</a> *sfid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aa8c996645ef9ff5006721588070366c5">mdd_dir_is_empty</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *<a class="el" href="mdsrate_8c.html#a929b6cee0a8e867ee7380bf26947cef2">dir</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a7c5bcfd819a3d3469b0aaf44a19efe9d">__mdd_may_link</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *la)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the target object can be hard linked, and right now it only checks if the link count reach the maximum limit.  <a href="#a7c5bcfd819a3d3469b0aaf44a19efe9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ad53e9284ea8d10d83db5f5223a06c7eb">mdd_may_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *cobj, bool check_perm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether it may create the cobj under the pobj.  <a href="#ad53e9284ea8d10d83db5f5223a06c7eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ab910ad3e9fa9e2f33462c2e1bf598a2a">mdd_may_unlink</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#af0eabd76e824fd6637d0bd409fe8ef41">mdd_is_sticky</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *cobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ac8b77eb4d63c0f23b8b939ce14eaf1ba">mdd_may_delete_entry</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, int check_perm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#af834b8acf5e955ef4f681fc99054db23">mdd_may_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *tpobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *tpattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *tobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *tattr, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr, int check_perm, int check_empty)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a59ca1e374b794b16e3a0cf5732cc40b2">mdd_link_sanity_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *tgt_obj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *tattr, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structmdd__object.html">mdd_object</a> *src_obj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether it can create the link file(linked to ) under the target directory(), and src_obj has been locked by mdd_write_lock.  <a href="#a59ca1e374b794b16e3a0cf5732cc40b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a488ba36736b6356d50f5de7df617810f">__mdd_index_delete_only</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a0a6905120326489640bdf15025b40a87">__mdd_index_insert_only</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *lf, __u32 type, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#adbbdf6288ed04ac3707f515044009c89">__mdd_index_insert</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *lf, __u32 type, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ae94c45d0788b08274bd2208fe84f7d2e">__mdd_index_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int is_dir, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a5855174e656ddb4d0909841ca8f8468c">mdd_llog_record_calc_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__name.html">lu_name</a> *tname, const struct <a class="el" href="structlu__name.html">lu_name</a> *sname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ada3f2dc65449211ae5ceb2e5cf6b2dbb">mdd_declare_changelog_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, const struct <a class="el" href="structlu__name.html">lu_name</a> *tname, const struct <a class="el" href="structlu__name.html">lu_name</a> *sname, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a0dff1ab10e7207dd72a2074c91b2d93b">mdd_changelog_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structllog__changelog__rec.html">llog_changelog_rec</a> *rec, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a changelog entry <em>rec</em> to the changelog llog.  <a href="#a0dff1ab10e7207dd72a2074c91b2d93b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ad4ff3211ee45a20d3847beff96ad9c72">mdd_changelog_rec_ext_rename</a> (struct <a class="el" href="structchangelog__rec.html">changelog_rec</a> *rec, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *sfid, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *spfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *sname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aafc53f6af017d93ba0066f4591266ca0">mdd_changelog_rec_ext_jobid</a> (struct <a class="el" href="structchangelog__rec.html">changelog_rec</a> *rec, const char *jobid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a25a1614dfe16d98e7c3c7f28108cc1e5">mdd_changelog_ns_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, enum <a class="el" href="group__lustreuser.html#ga5aecf326bf672ba1d2483e0a53064d7b">changelog_rec_type</a> type, enum <a class="el" href="group__lustreuser.html#gafd9a43c6bdc39d72c3113806a84be46a">changelog_rec_flags</a> crf, struct <a class="el" href="structmdd__object.html">mdd_object</a> *target, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *tpfid, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *sfid, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *spfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *tname, const struct <a class="el" href="structlu__name.html">lu_name</a> *sname, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store a namespace change changelog record If this fails, we must fail the whole transaction; we don't want the change to commit without the log entry.  <a href="#a25a1614dfe16d98e7c3c7f28108cc1e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aaa731c6e677f832f74b3700b9aa0ce40">__mdd_links_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid, int first, int check)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a8ac34c416fb6fb5be75ab1dc4402b5af">__mdd_links_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a37e5bc0def8aee023ddd868676d51ccc">mdd_linkea_prepare</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *oldpfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *oldlname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *newpfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *newlname, int first, int check, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a3177090dcc7095d1afe6881fc26d8ea7">mdd_links_rename</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *oldpfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *oldlname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *newpfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *newlname, struct <a class="el" href="structthandle.html">thandle</a> *handle, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, int first, int check)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a1d50f1b8b51caa4bf721293a03d68162">mdd_links_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structthandle.html">thandle</a> *handle, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, int first)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a24b2562a623da6d8388449350491ee77">mdd_links_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a0edb43e6fbdf25488d0d8deaf13571fa">mdd_links_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the link EA into a temp buffer.  <a href="#a0edb43e6fbdf25488d0d8deaf13571fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a4af8acc8dae648f783c92620b7def024">mdd_links_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the link EA into a temp buffer.  <a href="#a4af8acc8dae648f783c92620b7def024"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a7c0b1a550b6f60ac9313f6c4bef8650d">mdd_links_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#add3d00540f6948ab7bf4ecb8e55efc49">mdd_declare_links_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_obj, struct <a class="el" href="structthandle.html">thandle</a> *handle, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, enum <a class="el" href="mdd__internal_8h.html#a079a4c9fef28b4d67c362cd3e348216f">mdd_links_add_overflow</a> overflow)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a9a2e09d3056c62dbf4c9f98a35c7239b">mdd_declare_links_del</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *c, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a2ffa84c0889f630704bf226a87347374">mdd_declare_link</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *p, struct <a class="el" href="structmdd__object.html">mdd_object</a> *c, const struct <a class="el" href="structlu__name.html">lu_name</a> *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle.html">thandle</a> *handle, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a195432654a2b7455ae952c9dd0702eae">mdd_link</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *tgt_obj, struct <a class="el" href="structmd__object.html">md_object</a> *src_obj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a37f361eb18235afc05a13df92efddf20">mdd_mark_orphan_object</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj, struct <a class="el" href="structthandle.html">thandle</a> *handle, bool declare)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ae3b0e84d49ba5444ee94407598d02006">mdd_declare_finish_unlink</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a889982c31cd18ff95bab878f1248ab65">mdd_finish_unlink</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma, const struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a1aceed0a6b0ac4992a2078cb5dfe6a77">mdd_unlink_sanity_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *cobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a0e98f9c4bf36d173c3c817cf93419b9e">mdd_declare_unlink</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *p, struct <a class="el" href="structmdd__object.html">mdd_object</a> *c, const struct <a class="el" href="structlu__name.html">lu_name</a> *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma, struct <a class="el" href="structthandle.html">thandle</a> *handle, int no_name, int is_dir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a25497d93d5a5fa48d6b02e1fa15a6c55">mdd_hsm_archive_exists</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#acc29609d5e677b3053099acaea9e0405">mdd_unlink</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, struct <a class="el" href="structmd__object.html">md_object</a> *cobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma, int no_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete name entry and the object.  <a href="#acc29609d5e677b3053099acaea9e0405"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#afd5defaf04669e3457584a4273f9c56e">mdd_cd_sanity_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#af588c4bbef9fa7e4757fea11423146a1">mdd_create_data</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, struct <a class="el" href="structmd__object.html">md_object</a> *cobj, const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#af95fbdcd8aa56e5c123cc1e482d0b7aa">mdd_declare_object_initialize</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *parent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *child, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a8d7d2f3f277371f66438f24dae9e3829">mdd_object_initialize</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid, struct <a class="el" href="structmdd__object.html">mdd_object</a> *child, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *handle, const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ab51a43f8d714a81aae2fa94681b1bd26">mdd_create_sanity_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr, struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks whether it can create a file/dir under the directory().  <a href="#ab51a43f8d714a81aae2fa94681b1bd26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a6408d82cddabcd1a85f9fea0b59c208b">mdd_declare_object_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *p, struct <a class="el" href="structmdd__object.html">mdd_object</a> *c, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *handle, const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec, struct <a class="el" href="structlu__buf.html">lu_buf</a> *def_acl_buf, struct <a class="el" href="structlu__buf.html">lu_buf</a> *acl_buf, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a70c726853f99e67ef1792190b3302309">mdd_declare_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *p, struct <a class="el" href="structmdd__object.html">mdd_object</a> *c, const struct <a class="el" href="structlu__name.html">lu_name</a> *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle.html">thandle</a> *handle, const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structlu__buf.html">lu_buf</a> *def_acl_buf, struct <a class="el" href="structlu__buf.html">lu_buf</a> *acl_buf, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aa3dcbdf70588b8cd4f13b06f2dae1335">mdd_acl_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la, struct <a class="el" href="structlu__buf.html">lu_buf</a> *def_acl_buf, struct <a class="el" href="structlu__buf.html">lu_buf</a> *acl_buf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aef73126d058a9c07b7754e499214e637">mdd_object_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *son, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec, struct <a class="el" href="structlu__buf.html">lu_buf</a> *acl_buf, struct <a class="el" href="structlu__buf.html">lu_buf</a> *def_acl_buf, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a metadata object and initialize it, set acl, xattr.  <a href="#aef73126d058a9c07b7754e499214e637"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#afded43b629db5c8d23e7de3ac143c8dc">mdd_index_delete</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a10c0cb63316d4299af7a5a1476017e5c">mdd_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structmd__object.html">md_object</a> *child, struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#afc4793297095de69c984962c5b1add87">mdd_rename_order</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *src_pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *tgt_pobj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a6158fd3abf6f52453669d34d15885c2b">mdd_rename_sanity_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *src_pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *tgt_pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *tpattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *sobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *cattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *tobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *tattr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ae545e38192cdfe9b73e56ec55177c9e2">mdd_declare_rename</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_spobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tpobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *sname, const struct <a class="el" href="structlu__name.html">lu_name</a> *tname, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a9f00ffff49998dd7f2e445f9ab0d7001">mdd_rename</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *src_pobj, struct <a class="el" href="structmd__object.html">md_object</a> *tgt_pobj, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *lf, const struct <a class="el" href="structlu__name.html">lu_name</a> *lsname, struct <a class="el" href="structmd__object.html">md_object</a> *tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *ltname, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a889b47e15c00593b08deba6f055ef499">mdd_linkea_update_child_internal</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *parent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *newparent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *child, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen, struct <a class="el" href="structthandle.html">thandle</a> *handle, bool declare)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">During migration once the parent FID has been changed, we need update the parent FID in linkea.  <a href="#a889b47e15c00593b08deba6f055ef499"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a66882f1c3c4a7c37c2f196154d560a65">mdd_linkea_declare_update_child</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *parent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *newparent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *child, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aa6a25d69bfc43bb679a28ffa71489d94">mdd_linkea_update_child</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *parent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *newparent, struct <a class="el" href="structmdd__object.html">mdd_object</a> *child, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a113660560d0829fe9a8f8ceaf8d35fdf">mdd_update_linkea_internal</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *child_name, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle, int declare)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#afb1fd1ee5b5138778ae7a506a0a44602">mdd_migrate_xattrs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aaf4d037dd9be0bfda60d6b98e30fa311">mdd_declare_migrate_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *spec, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la, union <a class="el" href="unionlmv__mds__md.html">lmv_mds_md</a> *mgr_ea, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a1ee109930fdf9cdec2710b3cf2f42166">mdd_migrate_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ab64f35ef61855048778a328443d4c7e0">mdd_migrate_entries</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#ad544b9f357b04739a9189fd172b1465b">mdd_declare_update_linkea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *child_name, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a6b39a856a92505612a429ae1fff7ae2c">mdd_update_linkea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *child_name, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a3e40e4a6142be9d769a56508998e6d50">mdd_declare_migrate_update_name</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structlu__attr.html">lu_attr</a> *la, struct <a class="el" href="structlu__attr.html">lu_attr</a> *parent_la, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata, struct <a class="el" href="structthandle.html">thandle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a61fd499a13962c97ccf2ae41919e625c">mdd_migrate_update_name</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_pobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_sobj, struct <a class="el" href="structmdd__object.html">mdd_object</a> *mdd_tobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#aaf5e5e09d209ce0ce7c3d262335ba9e2">mdd_fld_lookup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__device.html">mdd_device</a> *mdd, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, __u32 *mdt_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a1f2368f5c30cb2a0565da877d432fe9d">mdd_migrate_sanity_check</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdd__object.html">mdd_object</a> *pobj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *pattr, struct <a class="el" href="structmdd__object.html">mdd_object</a> *sobj, struct <a class="el" href="structlu__attr.html">lu_attr</a> *sattr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether we should migrate the file/dir return val &lt; 0 permission check failed or other error.  <a href="#a1f2368f5c30cb2a0565da877d432fe9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a232e1dab8523c3d22a3dcef03b929650">mdd_migrate</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmd__object.html">md_object</a> *pobj, struct <a class="el" href="structmd__object.html">md_object</a> *sobj, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname, struct <a class="el" href="structmd__object.html">md_object</a> *tobj, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#abe6cafa537717678814801ed8d6cb180">dot</a> [] = &quot;.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a7914eee395b20d62ae6bc4a189f3a468">dotdot</a> [] = &quot;..&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__name.html">lu_name</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a0f1ddec14cafc4fdeebebfed36921569">lname_dotdot</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmd__dir__operations.html">md_dir_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdd__dir_8c.html#a256957dd4d8cb3232bf258e1240f0a74">mdd_dir_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mdd_dir.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00043">43</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a9f994f7d3f8ab6f340289acffa8ad964"></a><!-- doxytag: member="mdd_dir.c::rename_order" ref="a9f994f7d3f8ab6f340289acffa8ad964" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mdd__dir_8c.html#a9f994f7d3f8ab6f340289acffa8ad964">rename_order</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a9f994f7d3f8ab6f340289acffa8ad964a0d8038dacbe0eee01876cfb046a38b43"></a><!-- doxytag: member="MDD_RN_SAME" ref="a9f994f7d3f8ab6f340289acffa8ad964a0d8038dacbe0eee01876cfb046a38b43" args="" -->MDD_RN_SAME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9f994f7d3f8ab6f340289acffa8ad964a5bb8a0c66777c6aa35b41820488d148b"></a><!-- doxytag: member="MDD_RN_SRCTGT" ref="a9f994f7d3f8ab6f340289acffa8ad964a5bb8a0c66777c6aa35b41820488d148b" args="" -->MDD_RN_SRCTGT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a9f994f7d3f8ab6f340289acffa8ad964aae3d62129edf9431a57fd16f3e23cee4"></a><!-- doxytag: member="MDD_RN_TGTSRC" ref="a9f994f7d3f8ab6f340289acffa8ad964aae3d62129edf9431a57fd16f3e23cee4" args="" -->MDD_RN_TGTSRC</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02557">2557</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae94c45d0788b08274bd2208fe84f7d2e"></a><!-- doxytag: member="mdd_dir.c::__mdd_index_delete" ref="ae94c45d0788b08274bd2208fe84f7d2e" args="(const struct lu_env *env, struct mdd_object *pobj, const char *name, int is_dir, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_index_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>is_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00649">649</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00588">__mdd_index_delete_only()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l02303">mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a488ba36736b6356d50f5de7df617810f"></a><!-- doxytag: member="mdd_dir.c::__mdd_index_delete_only" ref="a488ba36736b6356d50f5de7df617810f" args="(const struct lu_env *env, struct mdd_object *pobj, const char *name, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_index_delete_only </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00588">588</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02630">dt_delete()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="adbbdf6288ed04ac3707f515044009c89"></a><!-- doxytag: member="mdd_dir.c::__mdd_index_insert" ref="adbbdf6288ed04ac3707f515044009c89" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_fid *lf, __u32 type, const char *name, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_index_insert </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>lf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00631">631</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00603">__mdd_index_insert_only()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00621">mdo_ref_add()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a6905120326489640bdf15025b40a87"></a><!-- doxytag: member="mdd_dir.c::__mdd_index_insert_only" ref="a0a6905120326489640bdf15025b40a87" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_fid *lf, __u32 type, const char *name, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_index_insert_only </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>lf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00603">603</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__sec_8h_source.html#l01170">CFS_CAP_SYS_RESOURCE_MASK</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__ucred_8c_source.html#l00077">lu_ucred_check()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__internal_8h_source.html#l00160">mdd_thread_info::mti_dt_rec</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="md__object_8h_source.html#l00594">lu_ucred::uc_cap</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00631">__mdd_index_insert()</a>, <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, <a class="el" href="mdd__dir_8c_source.html#l01899">mdd_object_initialize()</a>, <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa731c6e677f832f74b3700b9aa0ce40"></a><!-- doxytag: member="mdd_dir.c::__mdd_links_add" ref="aaa731c6e677f832f74b3700b9aa0ce40" args="(const struct lu_env *env, struct mdd_object *mdd_obj, struct linkea_data *ldata, const struct lu_name *lname, const struct lu_fid *pfid, int first, int check)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_links_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>check</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00894">894</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, <a class="el" href="linkea_8c_source.html#l00034">linkea_data_new()</a>, <a class="el" href="linkea_8c_source.html#l00171">linkea_links_find()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdd__internal_8h_source.html#l00135">mdd_thread_info::mti_fid2</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00527">OBD_FAIL_LFSCK_LINKEA_MORE</a>, and <a class="el" href="obd__support_8h_source.html#l00528">OBD_FAIL_LFSCK_LINKEA_MORE2</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00959">mdd_linkea_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ac34c416fb6fb5be75ab1dc4402b5af"></a><!-- doxytag: member="mdd_dir.c::__mdd_links_del" ref="a8ac34c416fb6fb5be75ab1dc4402b5af" args="(const struct lu_env *env, struct mdd_object *mdd_obj, struct linkea_data *ldata, const struct lu_name *lname, const struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_links_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00937">937</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="linkea_8c_source.html#l00142">linkea_del_buf()</a>, <a class="el" href="linkea_8c_source.html#l00171">linkea_links_find()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00959">mdd_linkea_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d90def68d6c907914d680014a1ee207"></a><!-- doxytag: member="mdd_dir.c::__mdd_lookup" ref="a4d90def68d6c907914d680014a1ee207" args="(const struct lu_env *env, struct md_object *pobj, const struct lu_attr *pattr, const struct lu_name *lname, struct lu_fid *fid, int mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00073">73</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="mmap__sanity_8c_source.html#l00053">dir</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00445">mdd_object_remote()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00474">mdd_permission_internal_locked()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01940">mdd_create_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l00110">mdd_lookup()</a>, and <a class="el" href="mdd__dir_8c_source.html#l00141">mdd_parent_fid()</a>.</p>

</div>
</div>
<a class="anchor" id="a7c5bcfd819a3d3469b0aaf44a19efe9d"></a><!-- doxytag: member="mdd_dir.c::__mdd_may_link" ref="a7c5bcfd819a3d3469b0aaf44a19efe9d" args="(const struct lu_env *env, struct mdd_object *obj, const struct lu_attr *la)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __mdd_may_link </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine if the target object can be hard linked, and right now it only checks if the link count reach the maximum limit. </p>
<p>Note: for ldiskfs, the directory nlink count might exceed the maximum link count(see osd_object_ref_add), so it only check nlink for non-directories.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>thread environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>object being linked to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>la</em>&nbsp;</td><td>attributes of <em>obj</em> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if <em>obj</em> can be hard linked </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error if <em>obj</em> is a directory or has too many links </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00349">349</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l00079">dt_device_param::ddp_max_nlink</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdd__internal_8h_source.html#l00105">mdd_device::mdd_dt_conf</a>, <a class="el" href="mdd__internal_8h_source.html#l00420">mdd_obj2mdd_dev()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00550">mdd_link_sanity_check()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02597">mdd_rename_sanity_check()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3dcbdf70588b8cd4f13b06f2dae1335"></a><!-- doxytag: member="mdd_dir.c::mdd_acl_init" ref="aa3dcbdf70588b8cd4f13b06f2dae1335" args="(const struct lu_env *env, struct mdd_object *pobj, struct lu_attr *la, struct lu_buf *def_acl_buf, struct lu_buf *acl_buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_acl_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>def_acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>acl_buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02144">2144</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__internal_8h.html#a313e16ccbf8370d05ac2118fd684ab83">__mdd_fix_mode_acl()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, <a class="el" href="mdd__lock_8c_source.html#l00057">mdd_read_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00072">mdd_read_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00513">mdo_xattr_get()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00595">lu_ucred::uc_umask</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01589">XATTR_NAME_ACL_DEFAULT</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>.</p>

</div>
</div>
<a class="anchor" id="afd5defaf04669e3457584a4273f9c56e"></a><!-- doxytag: member="mdd_dir.c::mdd_cd_sanity_check" ref="afd5defaf04669e3457584a4273f9c56e" args="(const struct lu_env *env, struct mdd_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_cd_sanity_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01770">1770</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01782">mdd_create_data()</a>.</p>

</div>
</div>
<a class="anchor" id="a25a1614dfe16d98e7c3c7f28108cc1e5"></a><!-- doxytag: member="mdd_dir.c::mdd_changelog_ns_store" ref="a25a1614dfe16d98e7c3c7f28108cc1e5" args="(const struct lu_env *env, struct mdd_device *mdd, enum changelog_rec_type type, enum changelog_rec_flags crf, struct mdd_object *target, const struct lu_fid *tpfid, const struct lu_fid *sfid, const struct lu_fid *spfid, const struct lu_name *tname, const struct lu_name *sname, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_changelog_ns_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreuser.html#ga5aecf326bf672ba1d2483e0a53064d7b">changelog_rec_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreuser.html#gafd9a43c6bdc39d72c3113806a84be46a">changelog_rec_flags</a>&nbsp;</td>
          <td class="paramname"> <em>crf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>tpfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>sfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>spfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>tname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>sname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Store a namespace change changelog record If this fails, we must fail the whole transaction; we don't want the change to commit without the log entry. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>target</em>&nbsp;</td><td>- <a class="el" href="structmdd__object.html">mdd_object</a> of change </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tpfid</em>&nbsp;</td><td>- target parent dir/object fid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sfid</em>&nbsp;</td><td>- source object fid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>spfid</em>&nbsp;</td><td>- source parent fid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tname</em>&nbsp;</td><td>- target name string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sname</em>&nbsp;</td><td>- source name string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>- transaction handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00817">817</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00235">cfs_time_current_64</a>, <a class="el" href="lustre__user_8h_source.html#l00932">changelog_rec_name()</a>, <a class="el" href="lustre__user_8h_source.html#l00748">CLF_FLAGMASK</a>, <a class="el" href="lustre__user_8h_source.html#l00753">CLF_JOBID</a>, <a class="el" href="lustre__user_8h_source.html#l00752">CLF_RENAME</a>, <a class="el" href="lustre__user_8h_source.html#l00751">CLF_VERSION</a>, <a class="el" href="mdd__internal_8h_source.html#l00056">CLM_ON</a>, <a class="el" href="lustre__idl_8h_source.html#l03209">llog_changelog_rec::cr</a>, <a class="el" href="lustre__user_8h_source.html#l00864">changelog_rec::cr_flags</a>, <a class="el" href="lustre__user_8h_source.html#l00863">changelog_rec::cr_namelen</a>, <a class="el" href="lustre__user_8h_source.html#l00873">changelog_rec::cr_pfid</a>, <a class="el" href="lustre__user_8h_source.html#l00870">changelog_rec::cr_tfid</a>, <a class="el" href="lustre__user_8h_source.html#l00865">changelog_rec::cr_type</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, <a class="el" href="mdd__internal_8h_source.html#l00069">mdd_changelog::mc_flags</a>, <a class="el" href="mdd__internal_8h_source.html#l00070">mdd_changelog::mc_mask</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__dir_8c_source.html#l00796">mdd_changelog_rec_ext_jobid()</a>, <a class="el" href="mdd__dir_8c_source.html#l00776">mdd_changelog_rec_ext_rename()</a>, <a class="el" href="mdd__dir_8c_source.html#l00736">mdd_changelog_store()</a>, <a class="el" href="mdd__internal_8h_source.html#l00108">mdd_device::mdd_cl</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l00666">mdd_llog_record_calc_size()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00129">mdd_object::mod_cltime</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="md__object_8h_source.html#l00598">lu_ucred::uc_jobid</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="aafc53f6af017d93ba0066f4591266ca0"></a><!-- doxytag: member="mdd_dir.c::mdd_changelog_rec_ext_jobid" ref="aafc53f6af017d93ba0066f4591266ca0" args="(struct changelog_rec *rec, const char *jobid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdd_changelog_rec_ext_jobid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structchangelog__rec.html">changelog_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>jobid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00796">796</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00922">changelog_rec_jobid()</a>, <a class="el" href="lustre__user_8h_source.html#l00884">changelog_ext_jobid::cr_jobid</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="mdd__object_8c_source.html#l00643">mdd_changelog_data_store()</a>, and <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4ff3211ee45a20d3847beff96ad9c72"></a><!-- doxytag: member="mdd_dir.c::mdd_changelog_rec_ext_rename" ref="ad4ff3211ee45a20d3847beff96ad9c72" args="(struct changelog_rec *rec, const struct lu_fid *sfid, const struct lu_fid *spfid, const struct lu_name *sname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdd_changelog_rec_ext_rename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structchangelog__rec.html">changelog_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>sfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>spfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>sname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00776">776</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00932">changelog_rec_name()</a>, <a class="el" href="lustre__user_8h_source.html#l00912">changelog_rec_rename()</a>, <a class="el" href="lustre__user_8h_source.html#l00943">changelog_rec_sname()</a>, <a class="el" href="lustre__user_8h_source.html#l00863">changelog_rec::cr_namelen</a>, <a class="el" href="lustre__user_8h_source.html#l00878">changelog_ext_rename::cr_sfid</a>, <a class="el" href="lustre__user_8h_source.html#l00879">changelog_ext_rename::cr_spfid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>.</p>

</div>
</div>
<a class="anchor" id="a0dff1ab10e7207dd72a2074c91b2d93b"></a><!-- doxytag: member="mdd_dir.c::mdd_changelog_store" ref="a0dff1ab10e7207dd72a2074c91b2d93b" args="(const struct lu_env *env, struct mdd_device *mdd, struct llog_changelog_rec *rec, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_changelog_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__changelog__rec.html">llog_changelog_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a changelog entry <em>rec</em> to the changelog llog. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdd</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rec</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>- currently ignored since llogs start their own transaction; this will hopefully be fixed in llog rewrite </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>ok </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00736">736</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03098">CHANGELOG_REC</a>, <a class="el" href="lustre__user_8h_source.html#l00906">changelog_rec_varsize()</a>, <a class="el" href="mdd__internal_8h_source.html#l00077">cl_time()</a>, <a class="el" href="lustre__idl_8h_source.html#l03209">llog_changelog_rec::cr</a>, <a class="el" href="lustre__idl_8h_source.html#l03208">llog_changelog_rec::cr_hdr</a>, <a class="el" href="lustre__user_8h_source.html#l00866">changelog_rec::cr_index</a>, <a class="el" href="lustre__user_8h_source.html#l00868">changelog_rec::cr_time</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__log_8h_source.html#l00268">llog_handle::lgh_obj</a>, <a class="el" href="llog_8c_source.html#l00918">llog_add()</a>, <a class="el" href="lustre__idl_8h_source.html#l03052">LLOG_CHANGELOG_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00355">llog_data_len()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="mdd__internal_8h_source.html#l00071">mdd_changelog::mc_index</a>, <a class="el" href="mdd__internal_8h_source.html#l00068">mdd_changelog::mc_lock</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__internal_8h_source.html#l00108">mdd_device::mdd_cl</a>, and <a class="el" href="lustre__update_8h_source.html#l00454">thandle_get_sub()</a>.</p>

<p>Referenced by <a class="el" href="mdd__object_8c_source.html#l00643">mdd_changelog_data_store()</a>, and <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>.</p>

</div>
</div>
<a class="anchor" id="a10c0cb63316d4299af7a5a1476017e5c"></a><!-- doxytag: member="mdd_dir.c::mdd_create" ref="a10c0cb63316d4299af7a5a1476017e5c" args="(const struct lu_env *env, struct md_object *pobj, const struct lu_name *lname, struct md_object *child, struct md_op_spec *spec, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02347">2347</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l00631">__mdd_index_insert()</a>, <a class="el" href="mdd__orphans_8c_source.html#l00628">__mdd_orphan_add()</a>, <a class="el" href="mdd__orphans_8c_source.html#l00644">__mdd_orphan_del()</a>, <a class="el" href="lustre__user_8h_source.html#l00711">CL_CREATE</a>, <a class="el" href="lustre__user_8h_source.html#l00712">CL_MKDIR</a>, <a class="el" href="lustre__user_8h_source.html#l00715">CL_MKNOD</a>, <a class="el" href="lustre__user_8h_source.html#l00714">CL_SOFTLINK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__fid_8h_source.html#l00301">fid_is_namespace_visible()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lu__object_8h_source.html#l00530">lu_object_header::loh_flags</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="lu__object_8h_source.html#l00493">LU_OBJECT_HEARD_BANSHEE</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__dir_8c_source.html#l02144">mdd_acl_init()</a>, <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01940">mdd_create_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l02090">mdd_declare_create()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l02303">mdd_index_delete()</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__dir_8c_source.html#l00959">mdd_linkea_prepare()</a>, <a class="el" href="mdd__dir_8c_source.html#l01069">mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l02189">mdd_object_create()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__object_8c_source.html#l01571">mdd_object_make_hint()</a>, <a class="el" href="mdd__internal_8h_source.html#l00445">mdd_object_remote()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__object_8c_source.html#l00409">mdd_update_time()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00682">mdo_destroy()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="lustre__idl_8h_source.html#l02343">MDS_OPEN_VOLATILE</a>, <a class="el" href="md__object_8h_source.html#l00287">md_object::mo_lu</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00156">mdd_thread_info::mti_hint</a>, <a class="el" href="mdd__internal_8h_source.html#l00150">mdd_thread_info::mti_key</a>, <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, <a class="el" href="mdd__internal_8h_source.html#l00139">mdd_thread_info::mti_pattr</a>, <a class="el" href="mdd__internal_8h_source.html#l00155">mdd_thread_info::mti_xattr_buf</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00551">OBD_FAIL_LFSCK_BAD_PARENT</a>, <a class="el" href="obd__support_8h_source.html#l00267">OBD_FAIL_MDS_DQACQ_NET</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="af588c4bbef9fa7e4757fea11423146a1"></a><!-- doxytag: member="mdd_dir.c::mdd_create_data" ref="af588c4bbef9fa7e4757fea11423146a1" args="(const struct lu_env *env, struct md_object *pobj, struct md_object *cobj, const struct md_op_spec *spec, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_create_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>cobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01782">1782</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00722">CL_LAYOUT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00049">LPO64</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="lustre__mds_8h_source.html#l00070">md_should_create()</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__dir_8c_source.html#l01770">mdd_cd_sanity_check()</a>, <a class="el" href="mdd__object_8c_source.html#l00643">mdd_changelog_data_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__object_8c_source.html#l01571">mdd_object_make_hint()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="mdd__internal_8h_source.html#l00156">mdd_thread_info::mti_hint</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::no_create</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

</div>
</div>
<a class="anchor" id="ab51a43f8d714a81aae2fa94681b1bd26"></a><!-- doxytag: member="mdd_dir.c::mdd_create_sanity_check" ref="ab51a43f8d714a81aae2fa94681b1bd26" args="(const struct lu_env *env, struct md_object *pobj, const struct lu_attr *pattr, const struct lu_name *lname, struct lu_attr *cattr, struct md_op_spec *spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_create_sanity_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function checks whether it can create a file/dir under the directory(). </p>
<p>The directory() is not being locked by mdd lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pobj</em>&nbsp;</td><td>the directory to create files </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pattr</em>&nbsp;</td><td>the attributes of the directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lname</em>&nbsp;</td><td>the name of the created file/dir </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cattr</em>&nbsp;</td><td>the attributes of the file/dir </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>spec</em>&nbsp;</td><td>create specification</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>=</em>&nbsp;</td><td>0 it is allowed to create file/dir under the directory </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error not allowed to create file/dir under the directory </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01940">1940</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00073">__mdd_lookup()</a>, <a class="el" href="dt__object_8h_source.html#l00080">dt_device_param::ddp_symlink_max</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00105">mdd_device::mdd_dt_conf</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__dir_8c_source.html#l00379">mdd_may_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l00061">mdd_name_check()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00134">mdd_thread_info::mti_fid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_cr_lookup</a>, <a class="el" href="md__object_8h_source.html#l00134">md_op_spec::sp_symname</a>, and <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ada3f2dc65449211ae5ceb2e5cf6b2dbb"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_changelog_store" ref="ada3f2dc65449211ae5ceb2e5cf6b2dbb" args="(const struct lu_env *env, struct mdd_device *mdd, const struct lu_name *tname, const struct lu_name *sname, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_declare_changelog_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>tname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>sname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00686">686</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lustre__idl_8h_source.html#l03098">CHANGELOG_REC</a>, <a class="el" href="mdd__internal_8h_source.html#l00056">CLM_ON</a>, <a class="el" href="lustre__idl_8h_source.html#l03208">llog_changelog_rec::cr_hdr</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__log_8h_source.html#l00268">llog_handle::lgh_obj</a>, <a class="el" href="lustre__idl_8h_source.html#l03052">LLOG_CHANGELOG_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="llog_8c_source.html#l00939">llog_declare_add()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="mdd__internal_8h_source.html#l00069">mdd_changelog::mc_flags</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__internal_8h_source.html#l00108">mdd_device::mdd_cl</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l00666">mdd_llog_record_calc_size()</a>, and <a class="el" href="lustre__update_8h_source.html#l00454">thandle_get_sub()</a>.</p>

<p>Referenced by <a class="el" href="mdd__object_8c_source.html#l00697">mdd_changelog()</a>, <a class="el" href="mdd__object_8c_source.html#l01722">mdd_close()</a>, <a class="el" href="mdd__dir_8c_source.html#l01782">mdd_create_data()</a>, <a class="el" href="mdd__object_8c_source.html#l00764">mdd_declare_attr_set()</a>, <a class="el" href="mdd__dir_8c_source.html#l02090">mdd_declare_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l01248">mdd_declare_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l03834">mdd_declare_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02637">mdd_declare_rename()</a>, <a class="el" href="mdd__dir_8c_source.html#l01516">mdd_declare_unlink()</a>, <a class="el" href="mdd__object_8c_source.html#l01109">mdd_declare_xattr_del()</a>, and <a class="el" href="mdd__object_8c_source.html#l00921">mdd_declare_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a70c726853f99e67ef1792190b3302309"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_create" ref="a70c726853f99e67ef1792190b3302309" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *p, struct mdd_object *c, const struct lu_name *name, struct lu_attr *attr, struct thandle *handle, const struct md_op_spec *spec, struct linkea_data *ldata, struct lu_buf *def_acl_buf, struct lu_buf *acl_buf, struct dt_allocation_hint *hint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>def_acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02090">2090</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l02020">mdd_declare_object_create()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, <a class="el" href="lustre__idl_8h_source.html#l02343">MDS_OPEN_VOLATILE</a>, <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>, <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>, <a class="el" href="mdd__orphans_8c_source.html#l00152">orph_declare_index_insert()</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3b0e84d49ba5444ee94407598d02006"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_finish_unlink" ref="ae3b0e84d49ba5444ee94407598d02006" args="(const struct lu_env *env, struct mdd_object *obj, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_finish_unlink </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01428">1428</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l01234">mdd_declare_links_del()</a>, <a class="el" href="mdd__dir_8c_source.html#l01407">mdd_mark_orphan_object()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00674">mdo_declare_destroy()</a>, and <a class="el" href="mdd__orphans_8c_source.html#l00152">orph_declare_index_insert()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03834">mdd_declare_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02637">mdd_declare_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01516">mdd_declare_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ffa84c0889f630704bf226a87347374"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_link" ref="a2ffa84c0889f630704bf226a87347374" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *p, struct mdd_object *c, const struct lu_name *name, struct thandle *handle, struct lu_attr *la, struct linkea_data *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_link </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01248">1248</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00167">MLAO_CHECK</a>, <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, and <a class="el" href="obd__support_8h_source.html#l00557">OBD_FAIL_LFSCK_MORE_NLINK</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>.</p>

</div>
</div>
<a class="anchor" id="add3d00540f6948ab7bf4ecb8e55efc49"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_links_add" ref="add3d00540f6948ab7bf4ecb8e55efc49" args="(const struct lu_env *env, struct mdd_object *mdd_obj, struct thandle *handle, struct linkea_data *ldata, enum mdd_links_add_overflow overflow)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_declare_links_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mdd__internal_8h.html#a079a4c9fef28b4d67c362cd3e348216f">mdd_links_add_overflow</a>&nbsp;</td>
          <td class="paramname"> <em>overflow</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01188">1188</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__linkea_8h_source.html#l00030">DEFAULT_LINKEA_SIZE</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03469">LE_SKIP_NLINK_DECLARE</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00087">lfsck_pack_rfa()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00171">LFSCK_TYPE_NAMESPACE</a>, <a class="el" href="mdd__internal_8h_source.html#l00102">mdd_device::mdd_bottom</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00445">mdd_object_remote()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00520">mdo_declare_xattr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00167">MLAO_CHECK</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00161">mdd_thread_info::mti_lr</a>, <a class="el" href="update__trans_8c_source.html#l01164">thandle_get_sub_by_dt()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02090">mdd_declare_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l01248">mdd_declare_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l01234">mdd_declare_links_del()</a>, <a class="el" href="mdd__dir_8c_source.html#l03402">mdd_declare_migrate_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l03834">mdd_declare_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02637">mdd_declare_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a2e09d3056c62dbf4c9f98a35c7239b"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_links_del" ref="a9a2e09d3056c62dbf4c9f98a35c7239b" args="(const struct lu_env *env, struct mdd_object *c, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_links_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01234">1234</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, and <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01428">mdd_declare_finish_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf4d037dd9be0bfda60d6b98e30fa311"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_migrate_create" ref="aaf4d037dd9be0bfda60d6b98e30fa311" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, struct md_op_spec *spec, struct lu_attr *la, union lmv_mds_md *mgr_ea, struct linkea_data *ldata, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_migrate_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlmv__mds__md.html">lmv_mds_md</a> *&nbsp;</td>
          <td class="paramname"> <em>mgr_ea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03402">3402</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00453">LA_FLAGS</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02658">lmv_mds_md_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__object_8c_source.html#l00342">mdd_declare_object_create_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l01862">mdd_declare_object_initialize()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00520">mdo_declare_xattr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00134">md_op_spec::sp_symname</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03467">mdd_migrate_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e40e4a6142be9d769a56508998e6d50"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_migrate_update_name" ref="a3e40e4a6142be9d769a56508998e6d50" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *lname, struct lu_attr *la, struct lu_attr *parent_la, struct linkea_data *ldata, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_migrate_update_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_la</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03834">3834</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00453">LA_FLAGS</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01428">mdd_declare_finish_unlink()</a>, <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l03810">mdd_declare_update_linkea()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00601">mdo_declare_index_delete()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00632">mdo_declare_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00542">mdo_declare_xattr_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00520">mdo_declare_xattr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_complex</a>, <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>.</p>

</div>
</div>
<a class="anchor" id="a6408d82cddabcd1a85f9fea0b59c208b"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_object_create" ref="a6408d82cddabcd1a85f9fea0b59c208b" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *p, struct mdd_object *c, struct lu_attr *attr, struct thandle *handle, const struct md_op_spec *spec, struct lu_buf *def_acl_buf, struct lu_buf *acl_buf, struct dt_allocation_hint *hint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_object_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>def_acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02020">2020</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__object_8c_source.html#l00342">mdd_declare_object_create_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l01862">mdd_declare_object_initialize()</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00520">mdo_declare_xattr_set()</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::no_create</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00134">md_op_spec::sp_symname</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, <a class="el" href="lustre__idl_8h_source.html#l01588">XATTR_NAME_ACL_ACCESS</a>, <a class="el" href="lustre__idl_8h_source.html#l01589">XATTR_NAME_ACL_DEFAULT</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02090">mdd_declare_create()</a>.</p>

</div>
</div>
<a class="anchor" id="af95fbdcd8aa56e5c123cc1e482d0b7aa"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_object_initialize" ref="af95fbdcd8aa56e5c123cc1e482d0b7aa" args="(const struct lu_env *env, struct mdd_object *parent, struct mdd_object *child, struct lu_attr *attr, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_object_initialize </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01862">1862</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l00542">dot</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00452">LA_TYPE</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03402">mdd_declare_migrate_create()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02020">mdd_declare_object_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ae545e38192cdfe9b73e56ec55177c9e2"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_rename" ref="ae545e38192cdfe9b73e56ec55177c9e2" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *mdd_spobj, struct mdd_object *mdd_tpobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *sname, const struct lu_name *tname, struct md_attr *ma, struct linkea_data *ldata, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_rename </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_spobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tpobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>sname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>tname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02637">2637</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01428">mdd_declare_finish_unlink()</a>, <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00601">mdo_declare_index_delete()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00632">mdo_declare_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00167">MLAO_CHECK</a>, <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>, and <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e98f9c4bf36d173c3c817cf93419b9e"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_unlink" ref="a0e98f9c4bf36d173c3c817cf93419b9e" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *p, struct mdd_object *c, const struct lu_name *name, struct md_attr *ma, struct thandle *handle, int no_name, int is_dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_unlink </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>no_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>is_dir</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01516">1516</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01428">mdd_declare_finish_unlink()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00601">mdo_declare_index_delete()</a>, <a class="el" href="mdd__internal_8h_source.html#l00632">mdo_declare_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, and <a class="el" href="obd__support_8h_source.html#l00552">OBD_FAIL_LFSCK_DANGLING2</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="ad544b9f357b04739a9189fd172b1465b"></a><!-- doxytag: member="mdd_dir.c::mdd_declare_update_linkea" ref="ad544b9f357b04739a9189fd172b1465b" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *child_name, struct linkea_data *ldata, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_declare_update_linkea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>child_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03810">3810</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03834">mdd_declare_migrate_update_name()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8c996645ef9ff5006721588070366c5"></a><!-- doxytag: member="mdd_dir.c::mdd_dir_is_empty" ref="aa8c996645ef9ff5006721588070366c5" args="(const struct lu_env *env, struct mdd_object *dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_dir_is_empty </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00297">297</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="lustre__idl_8h_source.html#l00872">LUDA_64BITHASH</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00485">mdd_may_delete()</a>.</p>

</div>
</div>
<a class="anchor" id="a889982c31cd18ff95bab878f1248ab65"></a><!-- doxytag: member="mdd_dir.c::mdd_finish_unlink" ref="a889982c31cd18ff95bab878f1248ab65" args="(const struct lu_env *env, struct mdd_object *obj, struct md_attr *ma, const struct mdd_object *pobj, const struct lu_name *lname, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_finish_unlink </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01453">1453</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__orphans_8c_source.html#l00628">__mdd_orphan_add()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="mdd__internal_8h_source.html#l00120">DEAD_OBJ</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="mdd__dir_8c_source.html#l01080">mdd_links_del()</a>, <a class="el" href="mdd__dir_8c_source.html#l01407">mdd_mark_orphan_object()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__lock_8c_source.html#l00079">mdd_write_locked()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00682">mdo_destroy()</a>, <a class="el" href="mdd__internal_8h_source.html#l00127">mdd_object::mod_count</a>, <a class="el" href="mdd__internal_8h_source.html#l00130">mdd_object::mod_flags</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf5e5e09d209ce0ce7c3d262335ba9e2"></a><!-- doxytag: member="mdd_dir.c::mdd_fld_lookup" ref="aaf5e5e09d209ce0ce7c3d262335ba9e2" args="(const struct lu_env *env, struct mdd_device *mdd, const struct lu_fid *fid, __u32 *mdt_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_fld_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>mdt_index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l04091">4091</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="lu__object_8h_source.html#l00645">lu_site::ld_seq_site</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00166">LU_SEQ_RANGE_MDT</a>, <a class="el" href="md__object_8h_source.html#l00282">md_device::md_lu_dev</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00099">mdd_device::mdd_md_dev</a>, <a class="el" href="mdd__internal_8h_source.html#l00162">mdd_thread_info::mti_range</a>, and <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04117">mdd_migrate_sanity_check()</a>.</p>

</div>
</div>
<a class="anchor" id="a25497d93d5a5fa48d6b02e1fa15a6c55"></a><!-- doxytag: member="mdd_dir.c::mdd_hsm_archive_exists" ref="a25497d93d5a5fa48d6b02e1fa15a6c55" args="(const struct lu_env *env, struct mdd_object *obj, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool mdd_hsm_archive_exists </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01576">1576</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8c_source.html#l02351">lu_buf_alloc()</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="md__attrs_8c_source.html#l00097">lustre_buf2hsm()</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdd__object_8c_source.html#l00100">mdd_buf_get()</a>, <a class="el" href="mdd__internal_8h_source.html#l00513">mdo_xattr_get()</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l01602">XATTR_NAME_HSM</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="afded43b629db5c8d23e7de3ac143c8dc"></a><!-- doxytag: member="mdd_dir.c::mdd_index_delete" ref="afded43b629db5c8d23e7de3ac143c8dc" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct lu_attr *cattr, const struct lu_name *lname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_index_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02303">2303</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00601">mdo_declare_index_delete()</a>, <a class="el" href="mdd__internal_8h_source.html#l00632">mdo_declare_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_local</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>.</p>

</div>
</div>
<a class="anchor" id="aac05a9f16fb55b71234136b42a74d2a6"></a><!-- doxytag: member="mdd_dir.c::mdd_is_parent" ref="aac05a9f16fb55b71234136b42a74d2a6" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *p1, const struct lu_attr *attr, const struct lu_fid *lf, struct lu_fid *pf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_is_parent </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>lf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00199">199</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l00184">mdd_is_root()</a>, <a class="el" href="mdd__internal_8h_source.html#l00104">mdd_device::mdd_local_root_fid</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__object_8c_source.html#l00202">mdd_object_find()</a>, <a class="el" href="mdd__internal_8h_source.html#l00326">mdd_object_put()</a>, <a class="el" href="mdd__dir_8c_source.html#l00141">mdd_parent_fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00134">mdd_thread_info::mti_fid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00259">mdd_is_subdir()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02563">mdd_rename_order()</a>.</p>

</div>
</div>
<a class="anchor" id="ad60e6ab0fa70382bd23ef46593faef36"></a><!-- doxytag: member="mdd_dir.c::mdd_is_root" ref="ad60e6ab0fa70382bd23ef46593faef36" args="(struct mdd_device *mdd, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_is_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00184">184</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00249">fid_oid()</a>, and <a class="el" href="mdd__internal_8h_source.html#l00103">mdd_device::mdd_root_fid</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00199">mdd_is_parent()</a>.</p>

</div>
</div>
<a class="anchor" id="af0eabd76e824fd6637d0bd409fe8ef41"></a><!-- doxytag: member="mdd_dir.c::mdd_is_sticky" ref="af0eabd76e824fd6637d0bd409fe8ef41" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_attr *pattr, struct mdd_object *cobj, const struct lu_attr *cattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_is_sticky </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>cobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00430">430</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="curproc_8h_source.html#l00115">CFS_CAP_FOWNER</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__ucred_8c_source.html#l00090">lu_ucred_assert()</a>, <a class="el" href="md__object_8h_source.html#l00618">md_capable()</a>, and <a class="el" href="md__object_8h_source.html#l00591">lu_ucred::uc_fsuid</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00485">mdd_may_delete()</a>.</p>

</div>
</div>
<a class="anchor" id="a118dbc57216c3060c13f6d23c295d9af"></a><!-- doxytag: member="mdd_dir.c::mdd_is_subdir" ref="a118dbc57216c3060c13f6d23c295d9af" args="(const struct lu_env *env, struct md_object *mo, const struct lu_fid *fid, struct lu_fid *sfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_is_subdir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>sfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00259">259</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__dir_8c_source.html#l00199">mdd_is_parent()</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a195432654a2b7455ae952c9dd0702eae"></a><!-- doxytag: member="mdd_dir.c::mdd_link" ref="a195432654a2b7455ae952c9dd0702eae" args="(const struct lu_env *env, struct md_object *tgt_obj, struct md_object *src_obj, const struct lu_name *lname, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_link </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>src_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01294">1294</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00603">__mdd_index_insert_only()</a>, <a class="el" href="lustre__user_8h_source.html#l00713">CL_HARDLINK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01248">mdd_declare_link()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__dir_8c_source.html#l00550">mdd_link_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l00959">mdd_linkea_prepare()</a>, <a class="el" href="mdd__dir_8c_source.html#l01069">mdd_links_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__object_8c_source.html#l00409">mdd_update_time()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00621">mdo_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00553">OBD_FAIL_LFSCK_DANGLING3</a>, <a class="el" href="obd__support_8h_source.html#l00558">OBD_FAIL_LFSCK_LESS_NLINK</a>, <a class="el" href="obd__support_8h_source.html#l00557">OBD_FAIL_LFSCK_MORE_NLINK</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

</div>
</div>
<a class="anchor" id="a59ca1e374b794b16e3a0cf5732cc40b2"></a><!-- doxytag: member="mdd_dir.c::mdd_link_sanity_check" ref="a59ca1e374b794b16e3a0cf5732cc40b2" args="(const struct lu_env *env, struct mdd_object *tgt_obj, const struct lu_attr *tattr, const struct lu_name *lname, struct mdd_object *src_obj, const struct lu_attr *cattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_link_sanity_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>tattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>src_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether it can create the link file(linked to ) under the target directory(), and src_obj has been locked by mdd_write_lock. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tgt_obj</em>&nbsp;</td><td>the target directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tattr</em>&nbsp;</td><td>attributes of target directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lname</em>&nbsp;</td><td>the link name </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>src_obj</em>&nbsp;</td><td>source object for link </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cattr</em>&nbsp;</td><td>attributes for source object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>=</em>&nbsp;</td><td>0 it is allowed to create the link file under tgt_obj </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error not allowed to create the link file </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00550">550</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00349">__mdd_may_link()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02119">LUSTRE_APPEND_FL</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__dir_8c_source.html#l00379">mdd_may_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l00061">mdd_name_check()</a>, <a class="el" href="mdd__internal_8h_source.html#l00420">mdd_obj2mdd_dev()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>.</p>

</div>
</div>
<a class="anchor" id="a66882f1c3c4a7c37c2f196154d560a65"></a><!-- doxytag: member="mdd_dir.c::mdd_linkea_declare_update_child" ref="a66882f1c3c4a7c37c2f196154d560a65" args="(const struct lu_env *env, struct mdd_object *parent, struct mdd_object *newparent, struct mdd_object *child, const char *name, int namelen, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_linkea_declare_update_child </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>newparent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03126">3126</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>.</p>

</div>
</div>
<a class="anchor" id="a37e5bc0def8aee023ddd868676d51ccc"></a><!-- doxytag: member="mdd_dir.c::mdd_linkea_prepare" ref="a37e5bc0def8aee023ddd868676d51ccc" args="(const struct lu_env *env, struct mdd_object *mdd_obj, const struct lu_fid *oldpfid, const struct lu_name *oldlname, const struct lu_fid *newpfid, const struct lu_name *newlname, int first, int check, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_linkea_prepare </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>oldpfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>oldlname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>newpfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>newlname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00959">959</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00894">__mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l00937">__mdd_links_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00120">DEAD_OBJ</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="mdd__internal_8h_source.html#l00130">mdd_object::mod_flags</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00518">OBD_FAIL_FID_IGIF</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l01008">mdd_links_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6a25d69bfc43bb679a28ffa71489d94"></a><!-- doxytag: member="mdd_dir.c::mdd_linkea_update_child" ref="aa6a25d69bfc43bb679a28ffa71489d94" args="(const struct lu_env *env, struct mdd_object *parent, struct mdd_object *newparent, struct mdd_object *child, const char *name, int namelen, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_linkea_update_child </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>newparent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03138">3138</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>.</p>

</div>
</div>
<a class="anchor" id="a889b47e15c00593b08deba6f055ef499"></a><!-- doxytag: member="mdd_dir.c::mdd_linkea_update_child_internal" ref="a889b47e15c00593b08deba6f055ef499" args="(const struct lu_env *env, struct mdd_object *parent, struct mdd_object *newparent, struct mdd_object *child, const char *name, int namelen, struct thandle *handle, bool declare)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_linkea_update_child_internal </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>newparent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>declare</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>During migration once the parent FID has been changed, we need update the parent FID in linkea. </p>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03063">3063</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="linkea_8c_source.html#l00075">linkea_entry_pack()</a>, <a class="el" href="linkea_8c_source.html#l00097">linkea_entry_unpack()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdd__dir_8c_source.html#l01149">mdd_links_write()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00166">MLAO_IGNORE</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00153">mdd_thread_info::mti_link_buf</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03126">mdd_linkea_declare_update_child()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03138">mdd_linkea_update_child()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d50f1b8b51caa4bf721293a03d68162"></a><!-- doxytag: member="mdd_dir.c::mdd_links_add" ref="a1d50f1b8b51caa4bf721293a03d68162" args="(const struct lu_env *env, struct mdd_object *mdd_obj, const struct lu_fid *pfid, const struct lu_name *lname, struct thandle *handle, struct linkea_data *ldata, int first)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_links_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01069">1069</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l01008">mdd_links_rename()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="a24b2562a623da6d8388449350491ee77"></a><!-- doxytag: member="mdd_dir.c::mdd_links_del" ref="a24b2562a623da6d8388449350491ee77" args="(const struct lu_env *env, struct mdd_object *mdd_obj, const struct lu_fid *pfid, const struct lu_name *lname, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_links_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01080">1080</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l01008">mdd_links_rename()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01453">mdd_finish_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a4af8acc8dae648f783c92620b7def024"></a><!-- doxytag: member="mdd_dir.c::mdd_links_get" ref="a4af8acc8dae648f783c92620b7def024" args="(const struct lu_env *env, struct mdd_object *mdd_obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__buf.html">lu_buf</a>* mdd_links_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the link EA into a temp buffer. </p>
<p>Uses the name_buf since it is generally large. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IS_ERR</em>&nbsp;</td><td>err </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr</em>&nbsp;</td><td>to <em><a class="el" href="structlu__buf.html" title="Common buffer structure to be passed around for various xattr_{s,g}et() methods.">lu_buf</a></em> (always <em>mti_big_buf</em>) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01139">1139</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, and <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>.</p>

<p>Referenced by <a class="el" href="mdd__object_8c_source.html#l01278">mdd_layout_swap_allowed()</a>.</p>

</div>
</div>
<a class="anchor" id="a0edb43e6fbdf25488d0d8deaf13571fa"></a><!-- doxytag: member="mdd_dir.c::mdd_links_read" ref="a0edb43e6fbdf25488d0d8deaf13571fa" args="(const struct lu_env *env, struct mdd_object *mdd_obj, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_links_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the link EA into a temp buffer. </p>
<p>Uses the <a class="el" href="structmdd__thread__info.html#a591cdb4fdbe219c6b664ba89b71c0ca8">mdd_thread_info::mti_big_buf</a> since it is generally large. A pointer to the buffer is stored in <em>ldata::ld_buf</em>.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>or error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01096">1096</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="linkea_8c_source.html#l00047">linkea_init()</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00513">mdo_xattr_get()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00894">__mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l00937">__mdd_links_del()</a>, <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l01139">mdd_links_get()</a>, <a class="el" href="mdd__dir_8c_source.html#l03467">mdd_migrate_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l04117">mdd_migrate_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, and <a class="el" href="mdd__dir_8c_source.html#l00141">mdd_parent_fid()</a>.</p>

</div>
</div>
<a class="anchor" id="a3177090dcc7095d1afe6881fc26d8ea7"></a><!-- doxytag: member="mdd_dir.c::mdd_links_rename" ref="a3177090dcc7095d1afe6881fc26d8ea7" args="(const struct lu_env *env, struct mdd_object *mdd_obj, const struct lu_fid *oldpfid, const struct lu_name *oldlname, const struct lu_fid *newpfid, const struct lu_name *newlname, struct thandle *handle, struct linkea_data *ldata, int first, int check)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_links_rename </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>oldpfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>oldlname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>newpfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>newlname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>check</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01008">1008</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="it__test_8c_source.html#l00055">error</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l00959">mdd_linkea_prepare()</a>, <a class="el" href="mdd__dir_8c_source.html#l01149">mdd_links_write()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01069">mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l01080">mdd_links_del()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="a7c0b1a550b6f60ac9313f6c4bef8650d"></a><!-- doxytag: member="mdd_dir.c::mdd_links_write" ref="a7c0b1a550b6f60ac9313f6c4bef8650d" args="(const struct lu_env *env, struct mdd_object *mdd_obj, struct linkea_data *ldata, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_links_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01149">1149</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03470">LE_SKIP_NLINK</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00087">lfsck_pack_rfa()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00171">LFSCK_TYPE_NAMESPACE</a>, <a class="el" href="mdd__internal_8h_source.html#l00102">mdd_device::mdd_bottom</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00445">mdd_object_remote()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00530">mdo_xattr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00161">mdd_thread_info::mti_lr</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00550">OBD_FAIL_LFSCK_NO_LINKEA</a>, <a class="el" href="update__trans_8c_source.html#l01164">thandle_get_sub_by_dt()</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03063">mdd_linkea_update_child_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l01008">mdd_links_rename()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03467">mdd_migrate_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a5855174e656ddb4d0909841ca8f8468c"></a><!-- doxytag: member="mdd_dir.c::mdd_llog_record_calc_size" ref="a5855174e656ddb4d0909841ca8f8468c" args="(const struct lu_env *env, const struct lu_name *tname, const struct lu_name *sname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_llog_record_calc_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>tname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>sname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00666">666</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00888">changelog_rec_offset()</a>, <a class="el" href="lustre__user_8h_source.html#l00753">CLF_JOBID</a>, <a class="el" href="lustre__user_8h_source.html#l00752">CLF_RENAME</a>, <a class="el" href="lustre__log_8h_source.html#l00355">llog_data_len()</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, and <a class="el" href="md__object_8h_source.html#l00598">lu_ucred::uc_jobid</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>, and <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c4a040bf5959fbd2c83dadb7afc24ef"></a><!-- doxytag: member="mdd_dir.c::mdd_lookup" ref="a4c4a040bf5959fbd2c83dadb7afc24ef" args="(const struct lu_env *env, struct md_object *pobj, const struct lu_name *lname, struct lu_fid *fid, struct md_op_spec *spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00110">110</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00073">__mdd_lookup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_permitted</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a37f361eb18235afc05a13df92efddf20"></a><!-- doxytag: member="mdd_dir.c::mdd_mark_orphan_object" ref="a37f361eb18235afc05a13df92efddf20" args="(const struct lu_env *env, struct mdd_object *obj, struct thandle *handle, bool declare)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_mark_orphan_object </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>declare</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01407">1407</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00453">LA_FLAGS</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02135">LUSTRE_ORPHAN_FL</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00500">mdo_attr_set()</a>, and <a class="el" href="mdd__internal_8h_source.html#l00491">mdo_declare_attr_set()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01428">mdd_declare_finish_unlink()</a>, <a class="el" href="mdd__dir_8c_source.html#l01453">mdd_finish_unlink()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>.</p>

</div>
</div>
<a class="anchor" id="ad53e9284ea8d10d83db5f5223a06c7eb"></a><!-- doxytag: member="mdd_dir.c::mdd_may_create" ref="ad53e9284ea8d10d83db5f5223a06c7eb" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_attr *pattr, struct mdd_object *cobj, bool check_perm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_may_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>cobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>check_perm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether it may create the cobj under the pobj. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pobj</em>&nbsp;</td><td>the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pattr</em>&nbsp;</td><td>the attribute of the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cobj</em>&nbsp;</td><td>the child to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>check_perm</em>&nbsp;</td><td>if check WRITE|EXEC permission for parent</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>=</em>&nbsp;</td><td>0 create the child under this dir is allowed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno create the child under this dir is not allowed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00379">379</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00474">mdd_permission_internal_locked()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01940">mdd_create_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l00550">mdd_link_sanity_check()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02597">mdd_rename_sanity_check()</a>.</p>

</div>
</div>
<a class="anchor" id="af834b8acf5e955ef4f681fc99054db23"></a><!-- doxytag: member="mdd_dir.c::mdd_may_delete" ref="af834b8acf5e955ef4f681fc99054db23" args="(const struct lu_env *env, struct mdd_object *tpobj, const struct lu_attr *tpattr, struct mdd_object *tobj, const struct lu_attr *tattr, const struct lu_attr *cattr, int check_perm, int check_empty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_may_delete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tpobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>tpattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>tattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>check_perm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>check_empty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00485">485</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="lustre__idl_8h_source.html#l02119">LUSTRE_APPEND_FL</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="mdd__dir_8c_source.html#l00297">mdd_dir_is_empty()</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__dir_8c_source.html#l00430">mdd_is_sticky()</a>, <a class="el" href="mdd__dir_8c_source.html#l00452">mdd_may_delete_entry()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00103">mdd_device::mdd_root_fid</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__object_8c_source.html#l00441">mdd_fix_attr()</a>, <a class="el" href="mdd__dir_8c_source.html#l02597">mdd_rename_sanity_check()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01503">mdd_unlink_sanity_check()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8b77eb4d63c0f23b8b939ce14eaf1ba"></a><!-- doxytag: member="mdd_dir.c::mdd_may_delete_entry" ref="ac8b77eb4d63c0f23b8b939ce14eaf1ba" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_attr *pattr, int check_perm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_may_delete_entry </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>check_perm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00452">452</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02119">LUSTRE_APPEND_FL</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00474">mdd_permission_internal_locked()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00485">mdd_may_delete()</a>.</p>

</div>
</div>
<a class="anchor" id="ab910ad3e9fa9e2f33462c2e1bf598a2a"></a><!-- doxytag: member="mdd_dir.c::mdd_may_unlink" ref="ab910ad3e9fa9e2f33462c2e1bf598a2a" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_attr *pattr, const struct lu_attr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_may_unlink </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00402">402</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02119">LUSTRE_APPEND_FL</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00474">mdd_permission_internal_locked()</a>, <a class="el" href="md__object_8h_source.html#l00566">MOR_TGT_PARENT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a232e1dab8523c3d22a3dcef03b929650"></a><!-- doxytag: member="mdd_dir.c::mdd_migrate" ref="a232e1dab8523c3d22a3dcef03b929650" args="(const struct lu_env *env, struct md_object *pobj, struct md_object *sobj, const struct lu_name *lname, struct md_object *tobj, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_migrate </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l04213">4213</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__dir_8c_source.html#l03467">mdd_migrate_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, <a class="el" href="mdd__dir_8c_source.html#l04117">mdd_migrate_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l03299">mdd_migrate_xattrs()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__lock_8c_source.html#l00057">mdd_read_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00072">mdd_read_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="md__object_8h_source.html#l00287">md_object::mo_lu</a>, <a class="el" href="mdd__internal_8h_source.html#l00127">mdd_object::mod_count</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="md__object_8h_source.html#l00565">MOR_SRC_CHILD</a>, <a class="el" href="obd__support_8h_source.html#l00622">OBD_FAIL_CHECK_RESET</a>, <a class="el" href="obd__support_8h_source.html#l00184">OBD_FAIL_MDS_REINT_NET_REP</a>, <a class="el" href="obd__support_8h_source.html#l00582">OBD_FAIL_MIGRATE_DELAY</a>, <a class="el" href="obd__support_8h_source.html#l00579">OBD_FAIL_MIGRATE_NET_REP</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a1ee109930fdf9cdec2710b3cf2f42166"></a><!-- doxytag: member="mdd_dir.c::mdd_migrate_create" ref="a1ee109930fdf9cdec2710b3cf2f42166" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *lname, struct lu_attr *la)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_migrate_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>la</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03467">3467</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8c_source.html#l00575">dt_directory_features</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00453">LA_FLAGS</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00454">LA_NLINK</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02658">lmv_mds_md_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__dir_8c_source.html#l03402">mdd_declare_migrate_create()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__object_8c_source.html#l01193">mdd_get_lov_ea()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdd__dir_8c_source.html#l01149">mdd_links_write()</a>, <a class="el" href="mdd__dir_8c_source.html#l02189">mdd_object_create()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__object_8c_source.html#l01571">mdd_object_make_hint()</a>, <a class="el" href="mdd__object_8c_source.html#l00271">mdd_readlink()</a>, <a class="el" href="mdd__internal_8h_source.html#l00455">mdd_seq_site()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00500">mdo_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00530">mdo_xattr_set()</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00156">mdd_thread_info::mti_hint</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, <a class="el" href="mdd__internal_8h_source.html#l00159">mdd_thread_info::mti_spec</a>, <a class="el" href="mdd__internal_8h_source.html#l00155">mdd_thread_info::mti_xattr_buf</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_cr_lookup</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00155">md_op_spec::sp_feat</a>, <a class="el" href="md__object_8h_source.html#l00134">md_op_spec::sp_symname</a>, <a class="el" href="lustre__fid_8h_source.html#l00454">seq_server_site::ss_node_id</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_local</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04213">mdd_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="ab64f35ef61855048778a328443d4c7e0"></a><!-- doxytag: member="mdd_dir.c::mdd_migrate_entries" ref="ab64f35ef61855048778a328443d4c7e0" args="(const struct lu_env *env, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_migrate_entries </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03606">3606</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l00588">__mdd_index_delete_only()</a>, <a class="el" href="mdd__dir_8c_source.html#l00631">__mdd_index_insert()</a>, <a class="el" href="mdd__dir_8c_source.html#l00603">__mdd_index_insert_only()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lustre__idl_8h_source.html#l00870">LUDA_FID</a>, <a class="el" href="lustre__idl_8h_source.html#l00871">LUDA_TYPE</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l03126">mdd_linkea_declare_update_child()</a>, <a class="el" href="mdd__dir_8c_source.html#l03138">mdd_linkea_update_child()</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__object_8c_source.html#l00202">mdd_object_find()</a>, <a class="el" href="mdd__internal_8h_source.html#l00326">mdd_object_put()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00601">mdo_declare_index_delete()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00632">mdo_declare_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="md__object_8h_source.html#l00565">MOR_SRC_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00135">mdd_thread_info::mti_fid2</a>, <a class="el" href="mdd__internal_8h_source.html#l00150">mdd_thread_info::mti_key</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00580">OBD_FAIL_MIGRATE_ENTRIES</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_local</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04213">mdd_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f2368f5c30cb2a0565da877d432fe9d"></a><!-- doxytag: member="mdd_dir.c::mdd_migrate_sanity_check" ref="a1f2368f5c30cb2a0565da877d432fe9d" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_attr *pattr, struct mdd_object *sobj, struct lu_attr *sattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_migrate_sanity_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>sattr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether we should migrate the file/dir return val &lt; 0 permission check failed or other error. </p>
<p>= 0 the file can be migrated. &gt; 0 the file does not need to be migrated, mostly for multiple link file </p>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l04117">4117</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lu__object_8h_source.html#l00645">lu_site::ld_seq_site</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="linkea_8c_source.html#l00097">linkea_entry_unpack()</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02654">lmv_mds_md::lmv_md_v1</a>, <a class="el" href="lustre__idl_8h_source.html#l02658">lmv_mds_md_size()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="md__object_8h_source.html#l00282">md_device::md_lu_dev</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l04091">mdd_fld_lookup()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdd__internal_8h_source.html#l00099">mdd_device::mdd_md_dev</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__dir_8c_source.html#l02597">mdd_rename_sanity_check()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00513">mdo_xattr_get()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00152">mdd_thread_info::mti_big_buf</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__fid_8h_source.html#l00454">seq_server_site::ss_node_id</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04213">mdd_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a61fd499a13962c97ccf2ae41919e625c"></a><!-- doxytag: member="mdd_dir.c::mdd_migrate_update_name" ref="a61fd499a13962c97ccf2ae41919e625c" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *lname, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_migrate_update_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03933">3933</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l00631">__mdd_index_insert()</a>, <a class="el" href="mdd__orphans_8c_source.html#l00628">__mdd_orphan_add()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00730">CL_MIGRATE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="mdd__internal_8h_source.html#l00120">DEAD_OBJ</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00453">LA_FLAGS</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__idl_8h_source.html#l02118">LUSTRE_IMMUTABLE_FL</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__object_8c_source.html#l00394">mdd_attr_set_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l03834">mdd_declare_migrate_update_name()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__dir_8c_source.html#l01069">mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdd__dir_8c_source.html#l01407">mdd_mark_orphan_object()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__dir_8c_source.html#l03822">mdd_update_linkea()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00500">mdo_attr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00551">mdo_xattr_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00530">mdo_xattr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00130">mdd_object::mod_flags</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04213">mdd_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="afb1fd1ee5b5138778ae7a506a0a44602"></a><!-- doxytag: member="mdd_dir.c::mdd_migrate_xattrs" ref="afb1fd1ee5b5138778ae7a506a0a44602" args="(const struct lu_env *env, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_migrate_xattrs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03299">3299</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00520">mdo_declare_xattr_set()</a>, <a class="el" href="mdd__internal_8h_source.html#l00513">mdo_xattr_get()</a>, <a class="el" href="mdd__internal_8h_source.html#l00563">mdo_xattr_list()</a>, <a class="el" href="mdd__internal_8h_source.html#l00530">mdo_xattr_set()</a>, <a class="el" href="md__object_8h_source.html#l00287">md_object::mo_lu</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00152">mdd_thread_info::mti_big_buf</a>, <a class="el" href="mdd__internal_8h_source.html#l00153">mdd_thread_info::mti_link_buf</a>, <a class="el" href="lnet_2utils_2wirecheck_8c_source.html#l00051">strnlen</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_local</a>, <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>, <a class="el" href="lustre__idl_8h_source.html#l01595">XATTR_NAME_LMA</a>, <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04213">mdd_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="ad12ed47dc06c20b5d1169e6362707e69"></a><!-- doxytag: member="mdd_dir.c::mdd_name_check" ref="ad12ed47dc06c20b5d1169e6362707e69" args="(struct mdd_device *m, const struct lu_name *ln)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_name_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>ln</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00061">61</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l00078">dt_device_param::ddp_max_name_len</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8h_source.html#l01320">lu_name_is_valid()</a>, and <a class="el" href="mdd__internal_8h_source.html#l00105">mdd_device::mdd_dt_conf</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01940">mdd_create_sanity_check()</a>, <a class="el" href="mdd__dir_8c_source.html#l00550">mdd_link_sanity_check()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="aef73126d058a9c07b7754e499214e637"></a><!-- doxytag: member="mdd_dir.c::mdd_object_create" ref="aef73126d058a9c07b7754e499214e637" args="(const struct lu_env *env, struct mdd_object *pobj, struct mdd_object *son, struct lu_attr *attr, struct md_op_spec *spec, struct lu_buf *acl_buf, struct lu_buf *def_acl_buf, struct dt_allocation_hint *hint, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_object_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>son</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>def_acl_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a metadata object and initialize it, set acl, xattr. </p>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02189">2189</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lustre__sec_8h_source.html#l01170">CFS_CAP_SYS_RESOURCE_MASK</a>, <a class="el" href="structdt__body__operations.html#a1d14bb3445892ab680cd8885645334bb">dt_body_operations::dbo_write</a>, <a class="el" href="dt__object_8h_source.html#l01752">dt_object::do_body_ops</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__ucred_8c_source.html#l00090">lu_ucred_assert()</a>, <a class="el" href="mdd__object_8c_source.html#l00110">mdd_buf_get_const()</a>, <a class="el" href="mdd__internal_8h_source.html#l00409">mdd_object_child()</a>, <a class="el" href="mdd__object_8c_source.html#l00377">mdd_object_create_internal()</a>, <a class="el" href="mdd__dir_8c_source.html#l01899">mdd_object_initialize()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00682">mdo_destroy()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00530">mdo_xattr_set()</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::no_create</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00134">md_op_spec::sp_symname</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, <a class="el" href="md__object_8h_source.html#l00594">lu_ucred::uc_cap</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__idl_8h_source.html#l01588">XATTR_NAME_ACL_ACCESS</a>, <a class="el" href="lustre__idl_8h_source.html#l01589">XATTR_NAME_ACL_DEFAULT</a>, <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03467">mdd_migrate_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d7d2f3f277371f66438f24dae9e3829"></a><!-- doxytag: member="mdd_dir.c::mdd_object_initialize" ref="a8d7d2f3f277371f66438f24dae9e3829" args="(const struct lu_env *env, const struct lu_fid *pfid, struct mdd_object *child, struct lu_attr *attr, struct thandle *handle, const struct md_op_spec *spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_object_initialize </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__op__spec.html">md_op_spec</a> *&nbsp;</td>
          <td class="paramname"> <em>spec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01899">1899</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00603">__mdd_index_insert_only()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00542">dot</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00621">mdo_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02189">mdd_object_create()</a>.</p>

</div>
</div>
<a class="anchor" id="afdeaec990d186a386cb1801e0e1f1c42"></a><!-- doxytag: member="mdd_dir.c::mdd_parent_fid" ref="afdeaec990d186a386cb1801e0e1f1c42" args="(const struct lu_env *env, struct mdd_object *obj, const struct lu_attr *attr, struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_parent_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get parent FID of the directory. </p>
<p>Read parent FID from linkEA, if that fails, then do lookup dotdot to get the parent FID.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>object from which to find the parent FID </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of the object </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>fid to get the parent FID</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if getting the parent FID succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if getting the parent FID fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00141">141</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00073">__mdd_lookup()</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="linkea_8c_source.html#l00097">linkea_entry_unpack()</a>, <a class="el" href="iam__ut_8c_source.html#l00142">lookup()</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l01096">mdd_links_read()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="mdd__internal_8h_source.html#l00153">mdd_thread_info::mti_link_buf</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00199">mdd_is_parent()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f00ffff49998dd7f2e445f9ab0d7001"></a><!-- doxytag: member="mdd_dir.c::mdd_rename" ref="a9f00ffff49998dd7f2e445f9ab0d7001" args="(const struct lu_env *env, struct md_object *src_pobj, struct md_object *tgt_pobj, const struct lu_fid *lf, const struct lu_name *lsname, struct md_object *tobj, const struct lu_name *ltname, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_rename </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>src_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>lf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lsname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>ltname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02759">2759</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l00588">__mdd_index_delete_only()</a>, <a class="el" href="mdd__dir_8c_source.html#l00631">__mdd_index_insert()</a>, <a class="el" href="mdd__dir_8c_source.html#l00603">__mdd_index_insert_only()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00718">CL_RENAME</a>, <a class="el" href="fsx_8c_source.html#l01082">cleanup()</a>, <a class="el" href="lustre__user_8h_source.html#l00764">CLF_RENAME_LAST</a>, <a class="el" href="lustre__user_8h_source.html#l00766">CLF_RENAME_LAST_EXISTS</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l02637">mdd_declare_rename()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__dir_8c_source.html#l01453">mdd_finish_unlink()</a>, <a class="el" href="mdd__dir_8c_source.html#l01576">mdd_hsm_archive_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00435">mdd_is_dead_obj()</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__dir_8c_source.html#l00959">mdd_linkea_prepare()</a>, <a class="el" href="mdd__dir_8c_source.html#l01069">mdd_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l01008">mdd_links_rename()</a>, <a class="el" href="mdd__dir_8c_source.html#l00061">mdd_name_check()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__object_8c_source.html#l00202">mdd_object_find()</a>, <a class="el" href="mdd__internal_8h_source.html#l00326">mdd_object_put()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__dir_8c_source.html#l02563">mdd_rename_order()</a>, <a class="el" href="mdd__dir_8c_source.html#l02597">mdd_rename_sanity_check()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__object_8c_source.html#l00409">mdd_update_time()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00621">mdo_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="md__object_8h_source.html#l00565">MOR_SRC_CHILD</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>, <a class="el" href="mdd__internal_8h_source.html#l00158">mdd_thread_info::mti_link_data</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

</div>
</div>
<a class="anchor" id="afc4793297095de69c984962c5b1add87"></a><!-- doxytag: member="mdd_dir.c::mdd_rename_order" ref="afc4793297095de69c984962c5b1add87" args="(const struct lu_env *env, struct mdd_device *mdd, struct mdd_object *src_pobj, const struct lu_attr *pattr, struct mdd_object *tgt_pobj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_rename_order </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__device.html">mdd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>src_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_pobj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02563">2563</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdd__dir_8c_source.html#l00199">mdd_is_parent()</a>, <a class="el" href="mdd__dir_8c_source.html#l02558">MDD_RN_SAME</a>, <a class="el" href="mdd__dir_8c_source.html#l02559">MDD_RN_SRCTGT</a>, <a class="el" href="mdd__dir_8c_source.html#l02560">MDD_RN_TGTSRC</a>, <a class="el" href="mdd__internal_8h_source.html#l00103">mdd_device::mdd_root_fid</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="a6158fd3abf6f52453669d34d15885c2b"></a><!-- doxytag: member="mdd_dir.c::mdd_rename_sanity_check" ref="a6158fd3abf6f52453669d34d15885c2b" args="(const struct lu_env *env, struct mdd_object *src_pobj, const struct lu_attr *pattr, struct mdd_object *tgt_pobj, const struct lu_attr *tpattr, struct mdd_object *sobj, const struct lu_attr *cattr, struct mdd_object *tobj, const struct lu_attr *tattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_rename_sanity_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>src_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>tpattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>tattr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l02597">2597</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00349">__mdd_may_link()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdd__dir_8c_source.html#l00379">mdd_may_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l00485">mdd_may_delete()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l04117">mdd_migrate_sanity_check()</a>, and <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="acc29609d5e677b3053099acaea9e0405"></a><!-- doxytag: member="mdd_dir.c::mdd_unlink" ref="acc29609d5e677b3053099acaea9e0405" args="(const struct lu_env *env, struct md_object *pobj, struct md_object *cobj, const struct lu_name *lname, struct md_attr *ma, int no_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_unlink </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td>
          <td class="paramname"> <em>cobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>no_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete name entry and the object. </p>
<p>Note: no_name == 1 means it only destory the object, i.e. name_entry does not exist for this object, and it could only happen during resending of remote unlink. see the comments in mdt_reint_unlink. Unfortunately, lname is also needed in this case(needed by changelog), so we have to add another parameter(no_name)here. XXX: this is only needed in DNE phase I, on Phase II, the ENOENT failure should be able to be fixed by redo mechanism. </p>

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01612">1612</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l00603">__mdd_index_insert_only()</a>, <a class="el" href="lustre__user_8h_source.html#l00717">CL_RMDIR</a>, <a class="el" href="lustre__user_8h_source.html#l00716">CL_UNLINK</a>, <a class="el" href="fsx_8c_source.html#l01082">cleanup()</a>, <a class="el" href="lustre__user_8h_source.html#l00761">CLF_UNLINK_HSM_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l00760">CLF_UNLINK_LAST</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdd__internal_8h_source.html#l00393">md2mdd_obj()</a>, <a class="el" href="mdd__dir_8c_source.html#l00817">mdd_changelog_ns_store()</a>, <a class="el" href="mdd__dir_8c_source.html#l01516">mdd_declare_unlink()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__internal_8h_source.html#l00246">MDD_ENV_VAR</a>, <a class="el" href="mdd__dir_8c_source.html#l01453">mdd_finish_unlink()</a>, <a class="el" href="mdd__dir_8c_source.html#l01576">mdd_hsm_archive_exists()</a>, <a class="el" href="mdd__object_8c_source.html#l00065">mdd_la_get()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__trans_8c_source.html#l00051">mdd_trans_create()</a>, <a class="el" href="mdd__trans_8c_source.html#l00057">mdd_trans_start()</a>, <a class="el" href="mdd__trans_8c_source.html#l00063">mdd_trans_stop()</a>, <a class="el" href="mdd__dir_8c_source.html#l01503">mdd_unlink_sanity_check()</a>, <a class="el" href="mdd__object_8c_source.html#l00409">mdd_update_time()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00425">mdo2fid()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00127">mdd_object::mod_count</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00144">mdd_thread_info::mti_la_for_fix</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00552">OBD_FAIL_LFSCK_DANGLING2</a>, <a class="el" href="obd__support_8h_source.html#l00554">OBD_FAIL_LFSCK_MUL_REF</a>, <a class="el" href="obd__support_8h_source.html#l00556">OBD_FAIL_LFSCK_NO_NAMEENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a1aceed0a6b0ac4992a2078cb5dfe6a77"></a><!-- doxytag: member="mdd_dir.c::mdd_unlink_sanity_check" ref="a1aceed0a6b0ac4992a2078cb5dfe6a77" args="(const struct lu_env *env, struct mdd_object *pobj, const struct lu_attr *pattr, struct mdd_object *cobj, const struct lu_attr *cattr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdd_unlink_sanity_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>pattr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>cobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>cattr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l01503">1503</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdd__dir_8c_source.html#l00485">mdd_may_delete()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b39a856a92505612a429ae1fff7ae2c"></a><!-- doxytag: member="mdd_dir.c::mdd_update_linkea" ref="a6b39a856a92505612a429ae1fff7ae2c" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *child_name, struct linkea_data *ldata, struct thandle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_update_linkea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>child_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03822">3822</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l03150">mdd_update_linkea_internal()</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>.</p>

</div>
</div>
<a class="anchor" id="a113660560d0829fe9a8f8ceaf8d35fdf"></a><!-- doxytag: member="mdd_dir.c::mdd_update_linkea_internal" ref="a113660560d0829fe9a8f8ceaf8d35fdf" args="(const struct lu_env *env, struct mdd_object *mdd_pobj, struct mdd_object *mdd_sobj, struct mdd_object *mdd_tobj, const struct lu_name *child_name, struct linkea_data *ldata, struct thandle *handle, int declare)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdd_update_linkea_internal </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_pobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_sobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdd__object.html">mdd_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdd_tobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>child_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>declare</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l03150">3150</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>References <a class="el" href="mdd__dir_8c_source.html#l00649">__mdd_index_delete()</a>, <a class="el" href="mdd__dir_8c_source.html#l00631">__mdd_index_insert()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lu__object_8h_source.html#l01325">DNAME</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="linkea_8c_source.html#l00142">linkea_del_buf()</a>, <a class="el" href="linkea_8c_source.html#l00097">linkea_entry_unpack()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdd__internal_8h_source.html#l00415">mdd2obd_dev()</a>, <a class="el" href="mdd__object_8c_source.html#l00090">mdd_env_info()</a>, <a class="el" href="mdd__dir_8c_source.html#l00110">mdd_lookup()</a>, <a class="el" href="mdd__internal_8h_source.html#l00440">mdd_object_exists()</a>, <a class="el" href="mdd__internal_8h_source.html#l00450">mdd_object_fid()</a>, <a class="el" href="mdd__object_8c_source.html#l00202">mdd_object_find()</a>, <a class="el" href="mdd__internal_8h_source.html#l00326">mdd_object_put()</a>, <a class="el" href="mdd__internal_8h_source.html#l00430">mdd_object_type()</a>, <a class="el" href="mdd__lock_8c_source.html#l00049">mdd_write_lock()</a>, <a class="el" href="mdd__lock_8c_source.html#l00065">mdd_write_unlock()</a>, <a class="el" href="mdd__internal_8h_source.html#l00388">mdo2mdd()</a>, <a class="el" href="mdd__internal_8h_source.html#l00601">mdo_declare_index_delete()</a>, <a class="el" href="mdd__internal_8h_source.html#l00575">mdo_declare_index_insert()</a>, <a class="el" href="mdd__internal_8h_source.html#l00613">mdo_declare_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00632">mdo_declare_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00621">mdo_ref_add()</a>, <a class="el" href="mdd__internal_8h_source.html#l00640">mdo_ref_del()</a>, <a class="el" href="mdd__internal_8h_source.html#l00125">mdd_object::mod_obj</a>, <a class="el" href="md__object_8h_source.html#l00565">MOR_SRC_CHILD</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="mdd__internal_8h_source.html#l00134">mdd_thread_info::mti_fid</a>, <a class="el" href="mdd__internal_8h_source.html#l00150">mdd_thread_info::mti_key</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lu__object_8h_source.html#l01326">PNAME</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l03810">mdd_declare_update_linkea()</a>, and <a class="el" href="mdd__dir_8c_source.html#l03822">mdd_update_linkea()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abe6cafa537717678814801ed8d6cb180"></a><!-- doxytag: member="mdd_dir.c::dot" ref="abe6cafa537717678814801ed8d6cb180" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="osd-ldiskfs_2osd__handler_8c.html#abe6cafa537717678814801ed8d6cb180">dot</a>[] = &quot;.&quot;<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00052">52</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7914eee395b20d62ae6bc4a189f3a468"></a><!-- doxytag: member="mdd_dir.c::dotdot" ref="a7914eee395b20d62ae6bc4a189f3a468" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="osd-ldiskfs_2osd__handler_8c.html#a7914eee395b20d62ae6bc4a189f3a468">dotdot</a>[] = &quot;..&quot;<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00053">53</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0f1ddec14cafc4fdeebebfed36921569"></a><!-- doxytag: member="mdd_dir.c::lname_dotdot" ref="a0f1ddec14cafc4fdeebebfed36921569" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__name.html">lu_name</a> <a class="el" href="mdd__dir_8c.html#a0f1ddec14cafc4fdeebebfed36921569">lname_dotdot</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        (<span class="keywordtype">char</span> *) <a class="code" href="lfsck__internal_8h.html#a7914eee395b20d62ae6bc4a189f3a468">dotdot</a>,
        <span class="keyword">sizeof</span>(<a class="code" href="lfsck__internal_8h.html#a7914eee395b20d62ae6bc4a189f3a468">dotdot</a>) - 1
}
</pre></div>
<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l00055">55</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

</div>
</div>
<a class="anchor" id="a256957dd4d8cb3232bf258e1240f0a74"></a><!-- doxytag: member="mdd_dir.c::mdd_dir_ops" ref="a256957dd4d8cb3232bf258e1240f0a74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmd__dir__operations.html">md_dir_operations</a> <a class="el" href="mdd__internal_8h.html#a256957dd4d8cb3232bf258e1240f0a74">mdd_dir_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .mdo_is_subdir     = <a class="code" href="mdd__dir_8c.html#a118dbc57216c3060c13f6d23c295d9af">mdd_is_subdir</a>,
        .mdo_lookup        = <a class="code" href="mdd__dir_8c.html#a4c4a040bf5959fbd2c83dadb7afc24ef">mdd_lookup</a>,
        .mdo_create        = <a class="code" href="mdd__dir_8c.html#a10c0cb63316d4299af7a5a1476017e5c">mdd_create</a>,
        .mdo_rename        = <a class="code" href="mdd__dir_8c.html#a9f00ffff49998dd7f2e445f9ab0d7001">mdd_rename</a>,
        .mdo_link          = <a class="code" href="mdd__dir_8c.html#a195432654a2b7455ae952c9dd0702eae">mdd_link</a>,
        .mdo_unlink        = <a class="code" href="mdd__dir_8c.html#acc29609d5e677b3053099acaea9e0405" title="Delete name entry and the object.">mdd_unlink</a>,
        .mdo_create_data   = <a class="code" href="mdd__dir_8c.html#af588c4bbef9fa7e4757fea11423146a1">mdd_create_data</a>,
        .mdo_migrate       = <a class="code" href="mdd__dir_8c.html#a232e1dab8523c3d22a3dcef03b929650">mdd_migrate</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="mdd__dir_8c_source.html#l04311">4311</a> of file <a class="el" href="mdd__dir_8c_source.html">mdd_dir.c</a>.</p>

<p>Referenced by <a class="el" href="mdd__object_8c_source.html#l00121">mdd_object_alloc()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
