<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lfsck/lfsck_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lfsck/lfsck_internal.h File Reference</h1><code>#include &lt;<a class="el" href="lustre__lfsck__user_8h_source.html">lustre/lustre_lfsck_user.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__user_8h_source.html">lustre/lustre_user.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lfsck_8h_source.html">lustre_lfsck.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lu__object_8h_source.html">lu_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="md__object_8h_source.html">md_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__linkea_8h_source.html">lustre_linkea.h</a>&gt;</code><br/>

<p><a href="lfsck__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__position.html">lfsck_position</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__bookmark.html">lfsck_bookmark</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__namespace.html">lfsck_namespace</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__layout.html">lfsck_layout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__operations.html">lfsck_operations</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__tgt__desc__idx.html">lfsck_tgt_desc_idx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__sub__trace__obj.html">lfsck_sub_trace_obj</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__component.html">lfsck_component</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__slave__lmv__rec.html">lfsck_slave_lmv_rec</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__lmv.html">lfsck_lmv</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__lmv__unit.html">lfsck_lmv_unit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__rec__lmv__save.html">lfsck_rec_lmv_save</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__instance.html">lfsck_instance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__async__interpret__args.html">lfsck_async_interpret_args</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__thread__args.html">lfsck_thread_args</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__assistant__req.html">lfsck_assistant_req</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__layout__req.html">lfsck_layout_req</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__assistant__operations.html">lfsck_assistant_operations</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfsck__thread__info.html">lfsck_thread_info</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a605192d3013ba4d5780ab2667429d973">HALF_SEC</a>&nbsp;&nbsp;&nbsp;msecs_to_jiffies(MSEC_PER_SEC &gt;&gt; 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a50380623f4d7d0d30f1b61b2e71ee2fc">LFSCK_CHECKPOINT_INTERVAL</a>&nbsp;&nbsp;&nbsp;60</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a117afde0fc9f7138bf657a5f3e70f00f">TGT_PTRS</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a6f54ff6e890afe3f22f8feb22f7ce69a">TGT_PTRS_PER_BLOCK</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a0a12258c4a75fc77951320eeb2c167a8">LFSCK_STF_BITS</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a001e112f96436345749574e4f755aeb5">LFSCK_STF_COUNT</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; LFSCK_STF_BITS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3cd5671d85b056e93ad42c7163dcbefb">LFSCK_LMV_MAX_STRIPES</a>&nbsp;&nbsp;&nbsp;LMV_MAX_STRIPE_COUNT</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#abf766b65319f11e27aec9860097ca167">LFSCK_LMV_DEF_STRIPES</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ab8d20f766ded5e6401745bb798562869">LFSCK_REC_LMV_MAX_DEPTH</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a36ecf822caad5be9e2d8c92bb0f527da">LFSCK_TMPBUF_LEN</a>&nbsp;&nbsp;&nbsp;64</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861">lfsck_flags</a> { <br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861a0ee0038a37509ab7cc245875f4e9d177">LF_SCANNED_ONCE</a> =  0x00000001ULL, 
<a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861a8ecf74bf87e893a2b338bc5cf22db252">LF_INCONSISTENT</a> =  0x00000002ULL, 
<a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861a3c3b07f5a6924934a0fd8e086b061878">LF_UPGRADE</a> =  0x00000004ULL, 
<a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861ae11da1b86ed6b9769a9903a393d0a22d">LF_INCOMPLETE</a> =  0x00000008ULL, 
<br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861ae8f41f5d1bee4e29af859304b0b0ffc4">LF_CRASHED_LASTID</a> =  0x00000010ULL
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3">lfsck_namespace_trace_flags</a> { <br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3a191b56c3df67572c8d052456866d6fb7">LNTF_CHECK_LINKEA</a> =  0x01, 
<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3a39589a019789c5f199221b9775506944">LNTF_CHECK_PARENT</a> =  0x02, 
<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3a3a927f274cc9bb2c93ff34e2672c3603">LNTF_SKIP_NLINK</a> =  0x04, 
<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3a8329bb34aea189cd6a111aef0468e485">LNTF_CHECK_ORPHAN</a> =  0x08, 
<br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3aa0ed1417ba4b57a54a8ce598a22be234">LNTF_UNCERTAIN_LMV</a> =  0x10, 
<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3a90f28fa690daf3b328c530f181f50291">LNTF_RECHECK_NAME_HASH</a> =  0x20, 
<a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3ae45dedf9f566566f2492bdf7d5171be6">LNTF_ALL</a> =  0xff
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73">lfsck_namespace_inconsistency_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73a40a056ef76d0d0e9b6a6e36c5c620eea">LNIT_NONE</a> =  0, 
<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73ace5dedf3ef6ec55a636d58087282da93">LNIT_BAD_LINKEA</a> =  1, 
<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73a5a2dcc82b4f2fb31dcf2a86c0e7f80dd">LNIT_UNMATCHED_PAIRS</a> =  2, 
<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73ace6344584e9a391ec5a532fea993cc1e">LNIT_DANGLING</a> =  3, 
<br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73a183b304fdc1b5024e8eae9ddcceac828">LNIT_MUL_REF</a> =  4, 
<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73af5737cb59892fc40e026f6af0f70d58f">LNIT_BAD_TYPE</a> =  5, 
<a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73a0b39fde38ed5ff30da44ca1dd147337e">LNIT_BAD_DIRENT</a> =  6
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6">lfsck_layout_inconsistency_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6a5d1bc01e329983358c4c2ab184e8768f">LLIT_NONE</a> =  0, 
<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6a0327bf06d9a2d295de1c2d33fceeb2cc">LLIT_DANGLING</a> =  1, 
<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6a5c705034e55669316fd94399fedc1ec4">LLIT_UNMATCHED_PAIR</a> =  2, 
<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6aa8ea827be3fbe01e253fc900c9a03ad8">LLIT_MULTIPLE_REFERENCED</a> =  3, 
<br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6a393625499d83f8ad5c7d479ebee9e42e">LLIT_ORPHAN</a> =  4, 
<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6a2320a7ead868961e01a9c577d38342c5">LLIT_INCONSISTENT_OWNER</a> =  5, 
<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6a8707d8904974558ec4824c601a6d13d8">LLIT_OTHERS</a> =  6, 
<a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6aae7264dad2898ea487256a20d5bd9705">LLIT_MAX</a> =  LLIT_OTHERS
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8">lfsck_slave_lmv_flags</a> { <br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8a6729067b506e2c74c06e6a2eb24ebaac">LSLF_NONE</a> =  0, 
<a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8a6f9fb93416e81f23daa0e48b08fef9ac">LSLF_BAD_INDEX2</a> =  1, 
<a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8ab2edd2dee6d7c7fa6a37e2bc45cfeef7">LSLF_NO_LMVEA</a> =  2, 
<a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8a9018c3c4e64be45180636b753f08952a">LSLF_DANGLING</a> =  3, 
<br/>
&nbsp;&nbsp;<a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8a32d3aff2097666b34cd86f22e8df1045">LSLF_BAD_INDEX1</a> =  4
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a2193f42020089643af5541bd7aad7738">lfsck_ltd2tgt</a> (struct <a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a> *ltd, __u32 index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a25d116de291305e5db73db09daa87e2c">lfsck_assign_tgt</a> (struct <a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a> *ltd, struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *tgt, __u32 index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af50cdbcf1743b1d7dee64e0a62df834d">lfsck_fid_alloc</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, bool locked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a78fb1ef9b282636ee28936fe69c56bec">lfsck_ibits_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> bits, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Request the specified ibits lock for the given object.  <a href="#a78fb1ef9b282636ee28936fe69c56bec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a5641b50be030cde48d9b7ce69a8935a6">lfsck_ibits_unlock</a> (struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release the the specified ibits lock.  <a href="#a5641b50be030cde48d9b7ce69a8935a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a7ffad8457ec83d8c3b1fc036d5de0ed1">lfsck_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a> *llh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> bits, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Request compound ibits locks for the given &lt;obj, name&gt; pairs.  <a href="#a7ffad8457ec83d8c3b1fc036d5de0ed1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3b430a41ada3bb7bfa164b3e6763e090">lfsck_unlock</a> (struct <a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a> *llh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release the the compound ibits locks.  <a href="#a3b430a41ada3bb7bfa164b3e6763e090"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aa7c1dbcdae1c09a1496699e6024f1d94">lfsck_find_mdt_idx_by_fid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a235b73ea0f2bfe50f7488ff8e3bf672a">lfsck_verify_lpf</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify the /ROOT/.lustre/lost+found/ directory.  <a href="#a235b73ea0f2bfe50f7488ff8e3bf672a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aa672e5f8f93c88210e5beaecff3eb945">lfsck_instance_find</a> (struct <a class="el" href="structdt__device.html">dt_device</a> *key, bool ref, bool unlink)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a7ec34b9d3099402caeb31a697da5156a">lfsck_component_find</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, __u16 type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ae724d778f2abcb4b28962980190eb8a6">lfsck_component_cleanup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a474e8af1234983aaac508e097a6591b1">lfsck_instance_cleanup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#abe516a41304b585c949041d0950aa73b">lfsck_bits_dump</a> (struct seq_file *m, int bits, const char *<a class="el" href="structnames.html">names</a>[], const char *prefix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a20d93b09f0f3c750a8906c1d08a97e9e">lfsck_time_dump</a> (struct seq_file *m, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> time, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a64065c8a338ab8c1c8a96b02a81af111">lfsck_pos_dump</a> (struct seq_file *m, struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos, const char *prefix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3e65e3b2aaca23ac9b822723a0ea82c4">lfsck_pos_fill</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos, bool init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a457d2c0d47464aedb4b8f6573b3ef0bc">__lfsck_set_speed</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, __u32 limit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ac409556d9d200cda4725c66911141f9e">lfsck_control_speed</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a499f6bef84e17d8ad4f2b394087d2088">lfsck_control_speed_by_self</a> (struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a46d16afd1ac6190eea05603982199cc7">lfsck_thread_args_fini</a> (struct <a class="el" href="structlfsck__thread__args.html">lfsck_thread_args</a> *lta)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a91ba202cb28f813deab0f88595a3fd81">lfsck_assistant_data_init</a> (struct <a class="el" href="structlfsck__assistant__operations.html">lfsck_assistant_operations</a> *lao, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aef355d12cbdcf3070cf8e4308fd4ce97">lfsck_assistant_object_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie, bool is_dir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af0c9fabc156cfdcbb55004cb41f82fbe">lfsck_assistant_object_load</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#adb8936a0e8a677bf08ec493bae27ee2b">lfsck_async_interpret_common</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, void *args, int rc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic LFSCK asynchronous communication interpretor function.  <a href="#adb8936a0e8a677bf08ec493bae27ee2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a59e07dbd52e13234ae4b8e6aca81ce71">lfsck_async_request</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set, <a class="el" href="group__net.html#ga80bef25da5dad7e788b4427e8c5e7df6">ptlrpc_interpterer_t</a> interpterer, void *args, int request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad74ecfc36f73d5b86c4e04bd55cb368d">lfsck_query_all</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a9b1abf8fc2b212540452dffbcf53f5e2">lfsck_start_assistant</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *lsp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a0f9811a3a6a0834e9db6e31711b15b0f">lfsck_checkpoint_generic</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a6313d77f10125f9ac63084e00f94ec26">lfsck_post_generic</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, int *result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aa484cbbcab8be42ead2a8c9fddedc29c">lfsck_double_scan_generic</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, int <a class="el" href="lustre__rsync_8c.html#a55591f17a60f597b63f070969c54fd6c">status</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aa6b8e589e419e7ecddba665d1ab21a53">lfsck_quit_generic</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a6d82da3d39b3f8ece030b7ebe9c795d8">lfsck_unpack_ent</a> (struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *ent, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *cookie, __u16 *type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ace551cca750b4f93d390e7cfe358f872">lfsck_close_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, int result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ae12b9de56925df21d23623b31717bb38">lfsck_open_dir</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a0cfcafda3509ba234d752164ac56754f">lfsck_master_engine</a> (void *args)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aef963a42c4d33910f66d304fb29a101e">lfsck_assistant_engine</a> (void *args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The LFSCK assistant thread is triggered by the LFSCK main engine.  <a href="#aef963a42c4d33910f66d304fb29a101e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ac0d6d50da53e07cb34bdf34b0f77b80c">lfsck_bookmark_cpu_to_le</a> (struct <a class="el" href="structlfsck__bookmark.html">lfsck_bookmark</a> *des, struct <a class="el" href="structlfsck__bookmark.html">lfsck_bookmark</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3d7eecf40465035dc6f7025a4a9047ee">lfsck_bookmark_store</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af586081c2c66b40de85eafdbf2e74bc4">lfsck_bookmark_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3207c9708a433b4dbf655915841b8b4b">lfsck_set_param</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structlfsck__start.html">lfsck_start</a> *<a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>, bool reset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad9e1b6d4d1e59c15c70f27ee5e2aa804">lfsck_namespace_trace_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const __u8 flags, bool add)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the namespace LFSCK trace file for the given .  <a href="#ad9e1b6d4d1e59c15c70f27ee5e2aa804"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a85e6979b2c419199ab5aff81fe89fcd9">lfsck_namespace_check_exist</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *<a class="el" href="mdsrate_8c.html#a929b6cee0a8e867ee7380bf26947cef2">dir</a>, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ae813731a3c21ac557857ceb6a94d2e2e">__lfsck_links_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a5e5221a7fc1e062d8b163cd4bb1789c5">lfsck_namespace_rebuild_linkea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overwrite the linkEA for the object with the given ldata.  <a href="#a5e5221a7fc1e062d8b163cd4bb1789c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a499639286c429a090c0ba2f745b31363">lfsck_namespace_repair_dangling</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structdt__object.html">dt_object</a> *child, struct <a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a> *lnr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Repair dangling name entry.  <a href="#a499639286c429a090c0ba2f745b31363"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a7802d2fdae444eb243bebb9b92a8238a">lfsck_namespace_repair_dirent</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structdt__object.html">dt_object</a> *child, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *name2, __u16 type, bool update, bool dec)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Repair invalid name entry.  <a href="#a7802d2fdae444eb243bebb9b92a8238a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a10e7572a512be6782d27190bbe4f52cf">lfsck_verify_linkea</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, const struct <a class="el" href="structlu__name.html">lu_name</a> *cname, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify the specified linkEA entry for the given directory object.  <a href="#a10e7572a512be6782d27190bbe4f52cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a153a7a6d32e606e697c11f4054eedf1b">lfsck_links_get_first</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structlu__fid.html">lu_fid</a> *pfid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the name and parent directory's FID from the first linkEA entry.  <a href="#a153a7a6d32e606e697c11f4054eedf1b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3ab12cffcdd69732db02236b292c3e57">lfsck_update_name_entry</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, struct <a class="el" href="structdt__object.html">dt_object</a> *<a class="el" href="mdsrate_8c.html#a929b6cee0a8e867ee7380bf26947cef2">dir</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, __u32 type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the object's name entry with the given FID.  <a href="#a3ab12cffcdd69732db02236b292c3e57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a12be37000161af347ac970c78a35db56">lfsck_namespace_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a16bf9373cf85c4c057eade31b469ef09">lfsck_lmv_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *llmv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a248445b5a863838c6de16febb9ff50b0">lfsck_read_stripe_lmv</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *lmv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a85d16d415e427fa3c8d7aa008453644b">lfsck_shard_name_to_index</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen, __u16 type, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse the shard's index from the given shard name.  <a href="#a85d16d415e427fa3c8d7aa008453644b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ae4fe510053a9ba9be1fb937afbe31315">lfsck_is_valid_slave_name_entry</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *llmv, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a7eee69b6a91e0241801bd0911409913e">lfsck_namespace_check_name</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *parent, struct <a class="el" href="structdt__object.html">dt_object</a> *child, const struct <a class="el" href="structlu__name.html">lu_name</a> *cname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether the given name is a valid entry under the .  <a href="#a7eee69b6a91e0241801bd0911409913e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a12465f080d74c44e795ab94ce3b12f29">lfsck_namespace_update_lmv</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *lmv, bool locked)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the object's LMV EA with the given .  <a href="#a12465f080d74c44e795ab94ce3b12f29"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#acc843dd85fecd4c3fdd9a05361412a9f">lfsck_namespace_verify_stripe_slave</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *llmv)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify the slave object's (of striped directory) LMV EA.  <a href="#acc843dd85fecd4c3fdd9a05361412a9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#abfc4c3f7a5a20c98a99c5bd1b963042e">lfsck_namespace_scan_shard</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *child)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scan the shard of a striped directory for name hash verification.  <a href="#abfc4c3f7a5a20c98a99c5bd1b963042e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#afb643704151cecb5c2a54a638f15366b">lfsck_namespace_notify_lmv_master_local</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate request for local LFSCK instance to rescan the striped directory.  <a href="#afb643704151cecb5c2a54a638f15366b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ab795dfd20bcc40d70ccc7e1a3f8b4ea3">lfsck_namespace_repair_bad_name_hash</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structdt__object.html">dt_object</a> *shard, struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *llmv, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Repair the bad name hash.  <a href="#ab795dfd20bcc40d70ccc7e1a3f8b4ea3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a386b5a0ea946859c7ed3d9f2e7175af5">lfsck_namespace_striped_dir_rescan</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a> *lnr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double scan the striped directory or the shard.  <a href="#a386b5a0ea946859c7ed3d9f2e7175af5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a58127449240233d6dc445e92a938a7cb">lfsck_namespace_handle_striped_master</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, struct <a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a> *lnr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify the shard's name entry under the striped directory.  <a href="#a58127449240233d6dc445e92a938a7cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a45153a26a55e704921bcc3292e79df9f">lfsck_layout_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ac71353e14cda7a003d491ffbb5f8a82c">name_is_dot_or_dotdot</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a34bbe61a915878b2496b4571468f0170">lfsck_obj2dev</a> (struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__thread__info.html">lfsck_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#abb9457be30c659d70ff99694ad4fe480">lfsck_env_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a3c71cb235d8b239b216cab76c3828ba6">lfsck_name_get_const</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const void *area, ssize_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a985320d06e3b2d949b8a2d2783261112">lfsck_buf_init</a> (struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, void *area, ssize_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af8eec8ad32707cdb4c403212177c3d25">lfsck_buf_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, void *area, ssize_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad70629c60e1f76feb699e6feb14dae4d">lfsck_buf_get_const</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const void *area, ssize_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a0831bfac60acb71557806a7943785cd3">lfsck_lfsck2name</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a0835d03ca8154d89267d733058026c0a">lfsck_dto2fid</a> (const struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad85b99e001d4f19c2c3a1bee02254cba">lfsck_pos_set_zero</a> (struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a54c73eedbd176af3251cd7ca60b3de43">lfsck_pos_is_zero</a> (const struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad88f5d82295cfd4bf98f4692b53dc51a">lfsck_pos_is_eq</a> (const struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos1, const struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *pos2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a60b0b56361fb0605f39ac0b2dcccdea4">lfsck_position_le_to_cpu</a> (struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *des, struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aa53b7f7188c062313cd33afb8d157988">lfsck_position_cpu_to_le</a> (struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *des, struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static umode_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a5cd3909a5fad1d7d7b7eb60efa6771c2">lfsck_object_type</a> (const struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af23f68396835a9567c498d615438155c">lfsck_is_dead_obj</a> (const struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#abd2599948f7713e824a60303245df1f2">lfsck_object_get</a> (struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ac0be804c9127f9c877d7af9a6d1b4d1a">lfsck_object_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structseq__server__site.html">seq_server_site</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a7c681b8477093d202e3cd99847fc973d">lfsck_dev_site</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a8c12679b2d7674a1b3283cbb618fe682">lfsck_dev_idx</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a872a96eba836a4991b1b5b6e621228ae">lfsck_object_find_by_dev_nowait</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a1d3ee0baebb2ac9ddf27235090be1e37">lfsck_object_find_by_dev</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dev, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a68644127bb0e0d87ba7a9fa87cbe5271">lfsck_find_dev_by_fid</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aeaef5d2115f85ec66a66efadc2a49d63">lfsck_object_find_bottom</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a438e8c3a8e6ddb4b96abb4f3e8b7724f">lfsck_object_find_bottom_nowait</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ab87e385c443875b600b4e1a966b5d9a0">lfsck_object_locate</a> (struct <a class="el" href="structdt__device.html">dt_device</a> *dev, struct <a class="el" href="structdt__object.html">dt_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#afc488a07d39217283f875a850e9d81b2">lfsck_tgt_get</a> (struct <a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a> *ltds, __u32 index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a6b98305b4735183505e40791dc33c88f">lfsck_tgt_put</a> (struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *ltd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad106250e84ff81f4b8f0d4de4ee9fe13">lfsck_component_get</a> (struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ac4fdef79518be720c926d699115191b2">lfsck_component_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#af1ab4397428fd452aae5c21570c80be8">lfsck_instance_get</a> (struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a77a79e177b50ef7ed74cbcc9d185cc57">lfsck_instance_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *lfsck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#add754bfac6a9b0fd7ed2eb0796537fa1">lfsck_phase2_next_ready</a> (struct <a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a> *lad)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a4fa0e5c8fa0d4dd053a6fc665b7906d6">lfsck_lad_set_bitmap</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *com, __u32 index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a1f781ea9d5b9b7ac50bb9de228f2ae3e">lfsck_links_read</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a793ba45056d1b49963ce36b64e15ac79">lfsck_links_read2</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a4c5cf782bc8dcdfe49a7879370b414ac">lfsck_lmv_get</a> (struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *llmv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aece39034244d13590528f27d9f97e4a2">lfsck_sub_trace_file_fid2idx</a> (const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a70c45ebcb2d00daacd82b18b6d5d36a2">lfsck_lmv_header_le_to_cpu</a> (struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *dst, const struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a77d3a46f480b658ce300d8155d0eeabb">lfsck_lmv_header_cpu_to_le</a> (struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *dst, const struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <br class="typebreak"/>
<a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad0bd27463a47f4fb9cf0bae1dc0505b3">lfsck_assistant_object_get</a> (struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a397e4d101d19fc3a145635b044601d88">lfsck_assistant_object_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *lso)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#abe6cafa537717678814801ed8d6cb180">dot</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#a7914eee395b20d62ae6bc4a189f3a468">dotdot</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aaa144f60df2565e5cce1b0d967597320">lfsck_flags_names</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#ad1157db3beb29bc193fce02f85b07981">lfsck_param_names</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__context__key.html">lu_context_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lfsck__internal_8h.html#aeff576b7c084908278912545672aa6d0">lfsck_thread_key</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a605192d3013ba4d5780ab2667429d973"></a><!-- doxytag: member="lfsck_internal.h::HALF_SEC" ref="a605192d3013ba4d5780ab2667429d973" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HALF_SEC&nbsp;&nbsp;&nbsp;msecs_to_jiffies(MSEC_PER_SEC &gt;&gt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00050">50</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01332">lfsck_layout_double_scan_result()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04750">lfsck_layout_dump()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03944">lfsck_layout_master_checkpoint()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04625">lfsck_layout_master_post()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03981">lfsck_layout_slave_checkpoint()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04680">lfsck_layout_slave_post()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03866">lfsck_namespace_checkpoint()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05977">lfsck_namespace_double_scan_one_trace_file()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06171">lfsck_namespace_double_scan_result()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04152">lfsck_namespace_post()</a>, <a class="el" href="osd__scrub_8c_source.html#l00728">osd_scrub_checkpoint()</a>, <a class="el" href="osd__scrub_8c_source.html#l03071">osd_scrub_dump()</a>, and <a class="el" href="osd__scrub_8c_source.html#l00751">osd_scrub_post()</a>.</p>

</div>
</div>
<a class="anchor" id="a50380623f4d7d0d30f1b61b2e71ee2fc"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_CHECKPOINT_INTERVAL" ref="a50380623f4d7d0d30f1b61b2e71ee2fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_CHECKPOINT_INTERVAL&nbsp;&nbsp;&nbsp;60</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00051">51</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00389">lfsck_checkpoint()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06106">lfsck_namespace_assistant_handler_p2()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05977">lfsck_namespace_double_scan_one_trace_file()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="abf766b65319f11e27aec9860097ca167"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_LMV_DEF_STRIPES" ref="abf766b65319f11e27aec9860097ca167" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_LMV_DEF_STRIPES&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00565">565</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">lfsck_namespace_notify_lmv_master_local()</a>.</p>

</div>
</div>
<a class="anchor" id="a3cd5671d85b056e93ad42c7163dcbefb"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_LMV_MAX_STRIPES" ref="a3cd5671d85b056e93ad42c7163dcbefb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_LMV_MAX_STRIPES&nbsp;&nbsp;&nbsp;LMV_MAX_STRIPE_COUNT</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00564">564</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l00277">lfsck_is_valid_slave_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">lfsck_namespace_notify_lmv_master_local()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00485">lfsck_record_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00385">lfsck_replace_lmv()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l00880">lfsck_shard_name_to_index()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8d20f766ded5e6401745bb798562869"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_REC_LMV_MAX_DEPTH" ref="ab8d20f766ded5e6401745bb798562869" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_REC_LMV_MAX_DEPTH&nbsp;&nbsp;&nbsp;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00631">631</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l00485">lfsck_record_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a12258c4a75fc77951320eeb2c167a8"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_STF_BITS" ref="a0a12258c4a75fc77951320eeb2c167a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_STF_BITS&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00518">518</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a001e112f96436345749574e4f755aeb5"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_STF_COUNT" ref="a001e112f96436345749574e4f755aeb5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_STF_COUNT&nbsp;&nbsp;&nbsp;(1 &lt;&lt; LFSCK_STF_BITS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00520">520</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06106">lfsck_namespace_assistant_handler_p2()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00460">lfsck_namespace_load_sub_trace_files()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06514">lfsck_namespace_setup()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01453">lfsck_sub_trace_file_fid2idx()</a>.</p>

</div>
</div>
<a class="anchor" id="a36ecf822caad5be9e2d8c92bb0f527da"></a><!-- doxytag: member="lfsck_internal.h::LFSCK_TMPBUF_LEN" ref="a36ecf822caad5be9e2d8c92bb0f527da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LFSCK_TMPBUF_LEN&nbsp;&nbsp;&nbsp;64</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00845">845</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l03774">lfsck_namespace_close_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a117afde0fc9f7138bf657a5f3e70f00f"></a><!-- doxytag: member="lfsck_internal.h::TGT_PTRS" ref="a117afde0fc9f7138bf657a5f3e70f00f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TGT_PTRS&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00443">443</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00121">lfsck_tgt_descs_fini()</a>, and <a class="el" href="lod__lov_8c_source.html#l00490">lod_fini_tgt()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f54ff6e890afe3f22f8feb22f7ce69a"></a><!-- doxytag: member="lfsck_internal.h::TGT_PTRS_PER_BLOCK" ref="a6f54ff6e890afe3f22f8feb22f7ce69a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TGT_PTRS_PER_BLOCK&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00444">444</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00171">__lfsck_add_target()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00508">lfsck_assign_tgt()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, and <a class="el" href="lod__lov_8c_source.html#l00207">lod_add_device()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a572af1bd0c8abadbaf9ce0fabe683861"></a><!-- doxytag: member="lfsck_internal.h::lfsck_flags" ref="a572af1bd0c8abadbaf9ce0fabe683861" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lfsck__internal_8h.html#a572af1bd0c8abadbaf9ce0fabe683861">lfsck_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a572af1bd0c8abadbaf9ce0fabe683861a0ee0038a37509ab7cc245875f4e9d177"></a><!-- doxytag: member="LF_SCANNED_ONCE" ref="a572af1bd0c8abadbaf9ce0fabe683861a0ee0038a37509ab7cc245875f4e9d177" args="" -->LF_SCANNED_ONCE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a572af1bd0c8abadbaf9ce0fabe683861a8ecf74bf87e893a2b338bc5cf22db252"></a><!-- doxytag: member="LF_INCONSISTENT" ref="a572af1bd0c8abadbaf9ce0fabe683861a8ecf74bf87e893a2b338bc5cf22db252" args="" -->LF_INCONSISTENT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a572af1bd0c8abadbaf9ce0fabe683861a3c3b07f5a6924934a0fd8e086b061878"></a><!-- doxytag: member="LF_UPGRADE" ref="a572af1bd0c8abadbaf9ce0fabe683861a3c3b07f5a6924934a0fd8e086b061878" args="" -->LF_UPGRADE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a572af1bd0c8abadbaf9ce0fabe683861ae11da1b86ed6b9769a9903a393d0a22d"></a><!-- doxytag: member="LF_INCOMPLETE" ref="a572af1bd0c8abadbaf9ce0fabe683861ae11da1b86ed6b9769a9903a393d0a22d" args="" -->LF_INCOMPLETE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a572af1bd0c8abadbaf9ce0fabe683861ae8f41f5d1bee4e29af859304b0b0ffc4"></a><!-- doxytag: member="LF_CRASHED_LASTID" ref="a572af1bd0c8abadbaf9ce0fabe683861ae8f41f5d1bee4e29af859304b0b0ffc4" args="" -->LF_CRASHED_LASTID</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00053">53</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6"></a><!-- doxytag: member="lfsck_internal.h::lfsck_layout_inconsistency_type" ref="a593d25af9e72552c046dd9ca2d44e4f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lfsck__internal_8h.html#a593d25af9e72552c046dd9ca2d44e4f6">lfsck_layout_inconsistency_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6a5d1bc01e329983358c4c2ab184e8768f"></a><!-- doxytag: member="LLIT_NONE" ref="a593d25af9e72552c046dd9ca2d44e4f6a5d1bc01e329983358c4c2ab184e8768f" args="" -->LLIT_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6a0327bf06d9a2d295de1c2d33fceeb2cc"></a><!-- doxytag: member="LLIT_DANGLING" ref="a593d25af9e72552c046dd9ca2d44e4f6a0327bf06d9a2d295de1c2d33fceeb2cc" args="" -->LLIT_DANGLING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6a5c705034e55669316fd94399fedc1ec4"></a><!-- doxytag: member="LLIT_UNMATCHED_PAIR" ref="a593d25af9e72552c046dd9ca2d44e4f6a5c705034e55669316fd94399fedc1ec4" args="" -->LLIT_UNMATCHED_PAIR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6aa8ea827be3fbe01e253fc900c9a03ad8"></a><!-- doxytag: member="LLIT_MULTIPLE_REFERENCED" ref="a593d25af9e72552c046dd9ca2d44e4f6aa8ea827be3fbe01e253fc900c9a03ad8" args="" -->LLIT_MULTIPLE_REFERENCED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6a393625499d83f8ad5c7d479ebee9e42e"></a><!-- doxytag: member="LLIT_ORPHAN" ref="a593d25af9e72552c046dd9ca2d44e4f6a393625499d83f8ad5c7d479ebee9e42e" args="" -->LLIT_ORPHAN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6a2320a7ead868961e01a9c577d38342c5"></a><!-- doxytag: member="LLIT_INCONSISTENT_OWNER" ref="a593d25af9e72552c046dd9ca2d44e4f6a2320a7ead868961e01a9c577d38342c5" args="" -->LLIT_INCONSISTENT_OWNER</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6a8707d8904974558ec4824c601a6d13d8"></a><!-- doxytag: member="LLIT_OTHERS" ref="a593d25af9e72552c046dd9ca2d44e4f6a8707d8904974558ec4824c601a6d13d8" args="" -->LLIT_OTHERS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a593d25af9e72552c046dd9ca2d44e4f6aae7264dad2898ea487256a20d5bd9705"></a><!-- doxytag: member="LLIT_MAX" ref="a593d25af9e72552c046dd9ca2d44e4f6aae7264dad2898ea487256a20d5bd9705" args="" -->LLIT_MAX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00282">282</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_inconsistency_type" ref="af23e062ce2b323adb6d73b5694a10e73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lfsck__internal_8h.html#af23e062ce2b323adb6d73b5694a10e73">lfsck_namespace_inconsistency_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73a40a056ef76d0d0e9b6a6e36c5c620eea"></a><!-- doxytag: member="LNIT_NONE" ref="af23e062ce2b323adb6d73b5694a10e73a40a056ef76d0d0e9b6a6e36c5c620eea" args="" -->LNIT_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73ace5dedf3ef6ec55a636d58087282da93"></a><!-- doxytag: member="LNIT_BAD_LINKEA" ref="af23e062ce2b323adb6d73b5694a10e73ace5dedf3ef6ec55a636d58087282da93" args="" -->LNIT_BAD_LINKEA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73a5a2dcc82b4f2fb31dcf2a86c0e7f80dd"></a><!-- doxytag: member="LNIT_UNMATCHED_PAIRS" ref="af23e062ce2b323adb6d73b5694a10e73a5a2dcc82b4f2fb31dcf2a86c0e7f80dd" args="" -->LNIT_UNMATCHED_PAIRS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73ace6344584e9a391ec5a532fea993cc1e"></a><!-- doxytag: member="LNIT_DANGLING" ref="af23e062ce2b323adb6d73b5694a10e73ace6344584e9a391ec5a532fea993cc1e" args="" -->LNIT_DANGLING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73a183b304fdc1b5024e8eae9ddcceac828"></a><!-- doxytag: member="LNIT_MUL_REF" ref="af23e062ce2b323adb6d73b5694a10e73a183b304fdc1b5024e8eae9ddcceac828" args="" -->LNIT_MUL_REF</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73af5737cb59892fc40e026f6af0f70d58f"></a><!-- doxytag: member="LNIT_BAD_TYPE" ref="af23e062ce2b323adb6d73b5694a10e73af5737cb59892fc40e026f6af0f70d58f" args="" -->LNIT_BAD_TYPE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af23e062ce2b323adb6d73b5694a10e73a0b39fde38ed5ff30da44ca1dd147337e"></a><!-- doxytag: member="LNIT_BAD_DIRENT" ref="af23e062ce2b323adb6d73b5694a10e73a0b39fde38ed5ff30da44ca1dd147337e" args="" -->LNIT_BAD_DIRENT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00121">121</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_trace_flags" ref="a98262cb18f4b83f09f139618b21d80c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lfsck__internal_8h.html#a98262cb18f4b83f09f139618b21d80c3">lfsck_namespace_trace_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3a191b56c3df67572c8d052456866d6fb7"></a><!-- doxytag: member="LNTF_CHECK_LINKEA" ref="a98262cb18f4b83f09f139618b21d80c3a191b56c3df67572c8d052456866d6fb7" args="" -->LNTF_CHECK_LINKEA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3a39589a019789c5f199221b9775506944"></a><!-- doxytag: member="LNTF_CHECK_PARENT" ref="a98262cb18f4b83f09f139618b21d80c3a39589a019789c5f199221b9775506944" args="" -->LNTF_CHECK_PARENT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3a3a927f274cc9bb2c93ff34e2672c3603"></a><!-- doxytag: member="LNTF_SKIP_NLINK" ref="a98262cb18f4b83f09f139618b21d80c3a3a927f274cc9bb2c93ff34e2672c3603" args="" -->LNTF_SKIP_NLINK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3a8329bb34aea189cd6a111aef0468e485"></a><!-- doxytag: member="LNTF_CHECK_ORPHAN" ref="a98262cb18f4b83f09f139618b21d80c3a8329bb34aea189cd6a111aef0468e485" args="" -->LNTF_CHECK_ORPHAN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3aa0ed1417ba4b57a54a8ce598a22be234"></a><!-- doxytag: member="LNTF_UNCERTAIN_LMV" ref="a98262cb18f4b83f09f139618b21d80c3aa0ed1417ba4b57a54a8ce598a22be234" args="" -->LNTF_UNCERTAIN_LMV</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3a90f28fa690daf3b328c530f181f50291"></a><!-- doxytag: member="LNTF_RECHECK_NAME_HASH" ref="a98262cb18f4b83f09f139618b21d80c3a90f28fa690daf3b328c530f181f50291" args="" -->LNTF_RECHECK_NAME_HASH</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a98262cb18f4b83f09f139618b21d80c3ae45dedf9f566566f2492bdf7d5171be6"></a><!-- doxytag: member="LNTF_ALL" ref="a98262cb18f4b83f09f139618b21d80c3ae45dedf9f566566f2492bdf7d5171be6" args="" -->LNTF_ALL</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00111">111</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a86361247977ad8ba066c73786ef924a8"></a><!-- doxytag: member="lfsck_internal.h::lfsck_slave_lmv_flags" ref="a86361247977ad8ba066c73786ef924a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="lfsck__internal_8h.html#a86361247977ad8ba066c73786ef924a8">lfsck_slave_lmv_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a86361247977ad8ba066c73786ef924a8a6729067b506e2c74c06e6a2eb24ebaac"></a><!-- doxytag: member="LSLF_NONE" ref="a86361247977ad8ba066c73786ef924a8a6729067b506e2c74c06e6a2eb24ebaac" args="" -->LSLF_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a86361247977ad8ba066c73786ef924a8a6f9fb93416e81f23daa0e48b08fef9ac"></a><!-- doxytag: member="LSLF_BAD_INDEX2" ref="a86361247977ad8ba066c73786ef924a8a6f9fb93416e81f23daa0e48b08fef9ac" args="" -->LSLF_BAD_INDEX2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a86361247977ad8ba066c73786ef924a8ab2edd2dee6d7c7fa6a37e2bc45cfeef7"></a><!-- doxytag: member="LSLF_NO_LMVEA" ref="a86361247977ad8ba066c73786ef924a8ab2edd2dee6d7c7fa6a37e2bc45cfeef7" args="" -->LSLF_NO_LMVEA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a86361247977ad8ba066c73786ef924a8a9018c3c4e64be45180636b753f08952a"></a><!-- doxytag: member="LSLF_DANGLING" ref="a86361247977ad8ba066c73786ef924a8a9018c3c4e64be45180636b753f08952a" args="" -->LSLF_DANGLING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a86361247977ad8ba066c73786ef924a8a32d3aff2097666b34cd86f22e8df1045"></a><!-- doxytag: member="LSLF_BAD_INDEX1" ref="a86361247977ad8ba066c73786ef924a8a32d3aff2097666b34cd86f22e8df1045" args="" -->LSLF_BAD_INDEX1</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00569">569</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae813731a3c21ac557857ceb6a94d2e2e"></a><!-- doxytag: member="lfsck_internal.h::__lfsck_links_read" ref="ae813731a3c21ac557857ceb6a94d2e2e" args="(const struct lu_env *env, struct dt_object *obj, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __lfsck_links_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l00671">671</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="linkea_8c_source.html#l00047">linkea_init()</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="lu__object_8c_source.html#l02362">lu_buf_realloc()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="lfsck__internal_8h_source.html#l01423">lfsck_links_read()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01434">lfsck_links_read2()</a>.</p>

</div>
</div>
<a class="anchor" id="a457d2c0d47464aedb4b8f6573b3ef0bc"></a><!-- doxytag: member="lfsck_internal.h::__lfsck_set_speed" ref="a457d2c0d47464aedb4b8f6573b3ef0bc" args="(struct lfsck_instance *lfsck, __u32 limit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool __lfsck_set_speed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>limit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01830">1830</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00093">lfsck_bookmark::lb_speed_limit</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00181">LFSCK_SPEED_NO_LIMIT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00719">lfsck_instance::li_sleep_jif</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00716">lfsck_instance::li_sleep_rate</a>.</p>

<p>Referenced by <a class="el" href="lfsck__bookmark_8c_source.html#l00203">lfsck_set_param()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02656">lfsck_set_speed()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a25d116de291305e5db73db09daa87e2c"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assign_tgt" ref="a25d116de291305e5db73db09daa87e2c" args="(struct lfsck_tgt_descs *ltd, struct lfsck_tgt_desc *tgt, __u32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_assign_tgt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00508">508</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00470">lfsck_tgt_desc_idx::ldi_tgts</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lfsck__internal_8h_source.html#l00475">lfsck_tgt_descs::ltd_tgts_idx</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00444">TGT_PTRS_PER_BLOCK</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00171">__lfsck_add_target()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03710">lfsck_del_target()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l00121">lfsck_tgt_descs_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a91ba202cb28f813deab0f88595a3fd81"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assistant_data_init" ref="a91ba202cb28f813deab0f88595a3fd81" args="(struct lfsck_assistant_operations *lao, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a>* lfsck_assistant_data_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__operations.html">lfsck_assistant_operations</a> *&nbsp;</td>
          <td class="paramname"> <em>lao</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01929">1929</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="bitmap_8h_source.html#l00049">CFS_ALLOCATE_BITMAP()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00804">lfsck_assistant_data::lad_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00817">lfsck_assistant_data::lad_mdt_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00823">lfsck_assistant_data::lad_mdt_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00829">lfsck_assistant_data::lad_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00808">lfsck_assistant_data::lad_ost_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06514">lfsck_namespace_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="aef963a42c4d33910f66d304fb29a101e"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assistant_engine" ref="aef963a42c4d33910f66d304fb29a101e" args="(void *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_assistant_engine </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The LFSCK assistant thread is triggered by the LFSCK main engine. </p>
<p>They co-work together as an asynchronous pipeline: the LFSCK main engine scans the system and pre-fetches the objects, attributes, or name entries, etc, and pushes them into the pipeline as input requests for the LFSCK assistant thread; on the other end of the pipeline, the LFSCK assistant thread performs the real check and repair for every request from the main engine.</p>
<p>Generally, the assistant engine may be blocked when check/repair something, so the LFSCK main engine will run some faster. On the other hand, the LFSCK main engine will drive multiple assistant threads in parallel, means for each LFSCK component on the master (such as layout LFSCK, namespace LFSCK), there is an independent LFSCK assistant thread. So under such 1:N multiple asynchronous pipelines mode, the whole LFSCK performance will be much better than check/repair everything by the LFSCK main engine itself. </p>

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l01543">1543</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l02465">dt_sync()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="structlfsck__assistant__operations.html#a4685cd01fa262cb4103be7c925cd8738">lfsck_assistant_operations::la_double_scan_result</a>, <a class="el" href="structlfsck__assistant__operations.html#af96714cea710e972beb127ff305fd55f">lfsck_assistant_operations::la_fill_pos</a>, <a class="el" href="structlfsck__assistant__operations.html#ac72b81752b3e68d507135580e7d1312e">lfsck_assistant_operations::la_handler_p1</a>, <a class="el" href="structlfsck__assistant__operations.html#a0595011e4f5f571f5fec77e77bdebfbd">lfsck_assistant_operations::la_handler_p2</a>, <a class="el" href="structlfsck__assistant__operations.html#a5bf116339a7158c05aa075cbbde2133d">lfsck_assistant_operations::la_req_fini</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_in_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00804">lfsck_assistant_data::lad_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00829">lfsck_assistant_data::lad_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00836">lfsck_assistant_data::lad_post_result</a>, <a class="el" href="lfsck__internal_8h_source.html#l00834">lfsck_assistant_data::lad_prefetched</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00827">lfsck_assistant_data::lad_task</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_post</a>, <a class="el" href="lfsck__internal_8h_source.html#l00756">lfsck_assistant_req::lar_list</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00556">lfsck_component::lc_new_checked</a>, <a class="el" href="lfsck__internal_8h_source.html#l00559">lfsck_component::lc_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00537">lfsck_component::lc_pos_start</a>, <a class="el" href="lfsck__internal_8h_source.html#l00548">lfsck_component::lc_time_last_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00551">lfsck_component::lc_time_next_checkpoint</a>, <a class="el" href="lustre__idl_8h_source.html#l03466">LE_PEER_EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03462">LE_START</a>, <a class="el" href="lustre__idl_8h_source.html#l03463">LE_STOP</a>, <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01106">lfsck_assistant_req_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00051">LFSCK_CHECKPOINT_INTERVAL</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01396">lfsck_phase2_next_ready()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00658">lfsck_instance::li_double_scan_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00728">lfsck_instance::li_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00669">lfsck_instance::li_next</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00725">lfsck_instance::li_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00145">LPF_ALL_TGT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00136">LPF_RESET</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03441">lfsck_request::lr_param</a>, <a class="el" href="lustre__idl_8h_source.html#l03436">lfsck_request::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00100">LS_CO_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00106">LS_CO_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00103">LS_CO_STOPPED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00751">lfsck_thread_args::lta_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00749">lfsck_thread_args::lta_env</a>, <a class="el" href="lfsck__internal_8h_source.html#l00750">lfsck_thread_args::lta_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="lustre__lib_8h_source.html#l00180">LWI_TIMEOUT_INTERVAL</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00533">OBD_FAIL_LFSCK_NO_DOUBLESCAN</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02484">lfsck_start_assistant()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0bd27463a47f4fb9cf0bae1dc0505b3"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assistant_object_get" ref="ad0bd27463a47f4fb9cf0bae1dc0505b3" args="(struct lfsck_assistant_object *lso)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a>* lfsck_assistant_object_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01479">1479</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00367">lfsck_assistant_object::lso_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00183">lfsck_layout_assistant_req_init()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l00061">lfsck_namespace_assistant_req_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aef355d12cbdcf3070cf8e4308fd4ce97"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assistant_object_init" ref="aef355d12cbdcf3070cf8e4308fd4ce97" args="(const struct lu_env *env, const struct lu_fid *fid, const struct lu_attr *attr, __u64 cookie, bool is_dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a>* lfsck_assistant_object_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_dir</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01959">1959</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00366">lfsck_assistant_object::lso_attr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00364">lfsck_assistant_object::lso_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00368">lfsck_assistant_object::lso_is_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00365">lfsck_assistant_object::lso_oit_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00367">lfsck_assistant_object::lso_ref</a>, and <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03774">lfsck_namespace_close_dir()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="af0c9fabc156cfdcbb55004cb41f82fbe"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assistant_object_load" ref="af0c9fabc156cfdcbb55004cb41f82fbe" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lfsck_assistant_object *lso)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_assistant_object_load </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01982">1982</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00368">lfsck_assistant_object::lso_dead</a>, <a class="el" href="lfsck__internal_8h_source.html#l00364">lfsck_assistant_object::lso_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00368">lfsck_assistant_object::lso_is_dir</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>.</p>

</div>
</div>
<a class="anchor" id="a397e4d101d19fc3a145635b044601d88"></a><!-- doxytag: member="lfsck_internal.h::lfsck_assistant_object_put" ref="a397e4d101d19fc3a145635b044601d88" args="(const struct lu_env *env, struct lfsck_assistant_object *lso)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_assistant_object_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__object.html">lfsck_assistant_object</a> *&nbsp;</td>
          <td class="paramname"> <em>lso</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01487">1487</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00367">lfsck_assistant_object::lso_ref</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00202">lfsck_layout_assistant_req_fini()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00087">lfsck_namespace_assistant_req_fini()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="adb8936a0e8a677bf08ec493bae27ee2b"></a><!-- doxytag: member="lfsck_internal.h::lfsck_async_interpret_common" ref="adb8936a0e8a677bf08ec493bae27ee2b" args="(const struct lu_env *env, struct ptlrpc_request *req, void *args, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_async_interpret_common </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generic LFSCK asynchronous communication interpretor function. </p>
<p>The LFSCK RPC reply for both the event notification and status querying will be handled here.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>req</em>&nbsp;</td><td>pointer to the LFSCK request </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>args</em>&nbsp;</td><td>pointer to the <a class="el" href="structlfsck__async__interpret__args.html">lfsck_async_interpret_args</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rc</em>&nbsp;</td><td>the result for handling the LFSCK request</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02021">2021</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lfsck__internal_8h_source.html#l00817">lfsck_assistant_data::lad_mdt_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00823">lfsck_assistant_data::lad_mdt_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00808">lfsck_assistant_data::lad_ost_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00739">lfsck_async_interpret_args::laia_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00742">lfsck_async_interpret_args::laia_lr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00741">lfsck_async_interpret_args::laia_ltd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00740">lfsck_async_interpret_args::laia_ltds</a>, <a class="el" href="lfsck__internal_8h_source.html#l00745">lfsck_async_interpret_args::laia_shared</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03466">LE_PEER_EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03460">LE_PHASE1_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03461">LE_PHASE2_DONE</a>, <a class="el" href="lustre__idl_8h_source.html#l03464">LE_QUERY</a>, <a class="el" href="lustre__idl_8h_source.html#l03462">LE_START</a>, <a class="el" href="lustre__idl_8h_source.html#l03463">LE_STOP</a>, <a class="el" href="lustre__idl_8h_source.html#l03481">LEF_QUERY_ALL</a>, <a class="el" href="lustre__idl_8h_source.html#l03476">LEF_TO_OST</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00098">lfsck_reset_ltd_status()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lnetctl_8c_source.html#l00969">list</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03454">lfsck_reply::lr_repaired</a>, <a class="el" href="lustre__idl_8h_source.html#l03452">lfsck_reply::lr_status</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00463">lfsck_tgt_desc::ltd_dead</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00463">lfsck_tgt_desc::ltd_layout_done</a>, <a class="el" href="lfsck__internal_8h_source.html#l00451">lfsck_tgt_desc::ltd_layout_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00452">lfsck_tgt_desc::ltd_layout_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00457">lfsck_tgt_desc::ltd_layout_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00455">lfsck_tgt_desc::ltd_layout_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00481">lfsck_tgt_descs::ltd_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00463">lfsck_tgt_desc::ltd_namespace_done</a>, <a class="el" href="lfsck__internal_8h_source.html#l00453">lfsck_tgt_desc::ltd_namespace_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00454">lfsck_tgt_desc::ltd_namespace_phase_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00458">lfsck_tgt_desc::ltd_namespace_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00456">lfsck_tgt_desc::ltd_namespace_status</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01214">RMF_LFSCK_REPLY</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02236">lfsck_interpret()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="a59e07dbd52e13234ae4b8e6aca81ce71"></a><!-- doxytag: member="lfsck_internal.h::lfsck_async_request" ref="a59e07dbd52e13234ae4b8e6aca81ce71" args="(const struct lu_env *env, struct obd_export *exp, struct lfsck_request *lr, struct ptlrpc_request_set *set, ptlrpc_interpterer_t interpterer, void *args, int request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_async_request </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *&nbsp;</td>
          <td class="paramname"> <em>lr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net.html#ga80bef25da5dad7e788b4427e8c5e7df6">ptlrpc_interpterer_t</a>&nbsp;</td>
          <td class="paramname"> <em>interpterer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02369">2369</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00739">lfsck_async_interpret_args::laia_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l01345">lfsck_component_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l02726">LFSCK_NOTIFY</a>, <a class="el" href="lustre__idl_8h_source.html#l02727">LFSCK_QUERY</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__net_8h_source.html#l00505">ptlrpc_req_async_args</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="client_8c_source.html#l01050">ptlrpc_set_add_req()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l01209">RMF_LFSCK_REQUEST</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_allow_intr</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="layout_8c_source.html#l01680">RQF_LFSCK_NOTIFY</a>, and <a class="el" href="layout_8c_source.html#l01684">RQF_LFSCK_QUERY</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00250">lfsck_layout_assistant_sync_failures()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06245">lfsck_namespace_assistant_sync_failures()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02848">lfsck_start_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02778">lfsck_stop_all()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="abe516a41304b585c949041d0950aa73b"></a><!-- doxytag: member="lfsck_internal.h::lfsck_bits_dump" ref="abe516a41304b585c949041d0950aa73b" args="(struct seq_file *m, int bits, const char *names[], const char *prefix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_bits_dump </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>names</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01741">1741</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04750">lfsck_layout_dump()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="ac0d6d50da53e07cb34bdf34b0f77b80c"></a><!-- doxytag: member="lfsck_internal.h::lfsck_bookmark_cpu_to_le" ref="ac0d6d50da53e07cb34bdf34b0f77b80c" args="(struct lfsck_bookmark *des, struct lfsck_bookmark *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_bookmark_cpu_to_le </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__bookmark.html">lfsck_bookmark</a> *&nbsp;</td>
          <td class="paramname"> <em>des</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__bookmark.html">lfsck_bookmark</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__bookmark_8c_source.html#l00054">54</a> of file <a class="el" href="lfsck__bookmark_8c_source.html">lfsck_bookmark.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lfsck__internal_8h_source.html#l00105">lfsck_bookmark::lb_last_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00102">lfsck_bookmark::lb_lpf_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00084">lfsck_bookmark::lb_magic</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00093">lfsck_bookmark::lb_speed_limit</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00087">lfsck_bookmark::lb_version</a>.</p>

<p>Referenced by <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>.</p>

</div>
</div>
<a class="anchor" id="af586081c2c66b40de85eafdbf2e74bc4"></a><!-- doxytag: member="lfsck_internal.h::lfsck_bookmark_setup" ref="af586081c2c66b40de85eafdbf2e74bc4" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_bookmark_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__bookmark_8c_source.html#l00158">158</a> of file <a class="el" href="lfsck__bookmark_8c_source.html">lfsck_bookmark.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00183">LFSCK_ASYNC_WIN_DEFAULT</a>, <a class="el" href="lustre__disk_8h_source.html#l00074">LFSCK_BOOKMARK</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00142">lfsck_bookmark_init()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00066">lfsck_bookmark_load()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00677">lfsck_instance::li_bookmark_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00674">lfsck_instance::li_local_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00673">lfsck_instance::li_los</a>, <a class="el" href="lfsck__internal_8h_source.html#l00634">lfsck_instance::li_mutex</a>, <a class="el" href="local__storage_8c_source.html#l00432">local_file_find_or_create()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d7eecf40465035dc6f7025a4a9047ee"></a><!-- doxytag: member="lfsck_internal.h::lfsck_bookmark_store" ref="a3d7eecf40465035dc6f7025a4a9047ee" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_bookmark_store </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__bookmark_8c_source.html#l00099">99</a> of file <a class="el" href="lfsck__bookmark_8c_source.html">lfsck_bookmark.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00504">dt_record_write()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00054">lfsck_bookmark_cpu_to_le()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00682">lfsck_instance::li_bookmark_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00677">lfsck_instance::li_bookmark_obj</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>.</p>

<p>Referenced by <a class="el" href="lfsck__bookmark_8c_source.html#l00142">lfsck_bookmark_init()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00158">lfsck_bookmark_setup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00329">lfsck_fid_alloc()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00203">lfsck_set_param()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02656">lfsck_set_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02709">lfsck_set_windows()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01149">lfsck_update_lpf_entry()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="af8eec8ad32707cdb4c403212177c3d25"></a><!-- doxytag: member="lfsck_internal.h::lfsck_buf_get" ref="af8eec8ad32707cdb4c403212177c3d25" args="(const struct lu_env *env, void *area, ssize_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__buf.html">lu_buf</a>* lfsck_buf_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01112">1112</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00858">lfsck_thread_info::lti_buf</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00973">fid_is_for_ostobj()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00066">lfsck_bookmark_load()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01407">lfsck_layout_get_def_stripesize()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01038">lfsck_layout_lastid_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01105">lfsck_layout_lastid_reload()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01149">lfsck_layout_lastid_store()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00835">lfsck_layout_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00760">lfsck_layout_load_bitmap()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00336">lfsck_namespace_load()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00268">lfsck_namespace_load_bitmap()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00369">lfsck_namespace_store()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="ad70629c60e1f76feb699e6feb14dae4d"></a><!-- doxytag: member="lfsck_internal.h::lfsck_buf_get_const" ref="ad70629c60e1f76feb699e6feb14dae4d" args="(const struct lu_env *env, const void *area, ssize_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__buf.html">lu_buf</a>* lfsck_buf_get_const </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01123">1123</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00858">lfsck_thread_info::lti_buf</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l00653">lfsck_declare_namespace_exec_dir()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l00769">lfsck_links_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a985320d06e3b2d949b8a2d2783261112"></a><!-- doxytag: member="lfsck_internal.h::lfsck_buf_init" ref="a985320d06e3b2d949b8a2d2783261112" args="(struct lu_buf *buf, void *area, ssize_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_buf_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01105">1105</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, and <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01576">__lfsck_layout_update_pfid()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01441">lfsck_layout_refill_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01910">lfsck_namespace_rebuild_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f9811a3a6a0834e9db6e31711b15b0f"></a><!-- doxytag: member="lfsck_internal.h::lfsck_checkpoint_generic" ref="a0f9811a3a6a0834e9db6e31711b15b0f" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_checkpoint_generic </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02531">2531</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__lib_8c_source.html#l00047">LFSCK_CHECKPOINT_SKIP</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03944">lfsck_layout_master_checkpoint()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l03866">lfsck_namespace_checkpoint()</a>.</p>

</div>
</div>
<a class="anchor" id="ace551cca750b4f93d390e7cfe358f872"></a><!-- doxytag: member="lfsck_internal.h::lfsck_close_dir" ref="ace551cca750b4f93d390e7cfe358f872" args="(const struct lu_env *env, struct lfsck_instance *lfsck, int result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_close_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00297">297</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="structlfsck__operations.html#a6d6512749b0f55779af0c7d4fb46ac74">lfsck_operations::lfsck_close_dir</a>, <a class="el" href="lfsck__engine_8c_source.html#l00082">lfsck_di_dir_put()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">lfsck_lmv_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00597">lfsck_lmv::ll_exit_value</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00337">lfsck_open_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="ae724d778f2abcb4b28962980190eb8a6"></a><!-- doxytag: member="lfsck_internal.h::lfsck_component_cleanup" ref="ae724d778f2abcb4b28962980190eb8a6" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_component_cleanup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00318">318</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="list_8h_source.html#l00161">list_empty()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l01613">lfsck_instance_cleanup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06514">lfsck_namespace_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ec34b9d3099402caeb31a697da5156a"></a><!-- doxytag: member="lfsck_internal.h::lfsck_component_find" ref="a7ec34b9d3099402caeb31a697da5156a" args="(struct lfsck_instance *lfsck, __u16 type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__component.html">lfsck_component</a>* lfsck_component_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00295">295</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l00282">__lfsck_component_find()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01345">lfsck_component_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02745">lfsck_dump()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>.</p>

</div>
</div>
<a class="anchor" id="ad106250e84ff81f4b8f0d4de4ee9fe13"></a><!-- doxytag: member="lfsck_internal.h::lfsck_component_get" ref="ad106250e84ff81f4b8f0d4de4ee9fe13" args="(struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__component.html">lfsck_component</a>* lfsck_component_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01345">1345</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00535">lfsck_component::lc_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02369">lfsck_async_request()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00295">lfsck_component_find()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03487">lfsck_layout_async_query()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01893">lfsck_thread_args_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4fdef79518be720c926d699115191b2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_component_put" ref="ac4fdef79518be720c926d699115191b2" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_component_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01352">1352</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00543">lfsck_component::lc_file_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00535">lfsck_component::lc_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00540">lfsck_component::lc_sub_trace_objs</a>, <a class="el" href="structlfsck__operations.html#ad7a107262d05e75c5b11266147c76a3b">lfsck_operations::lfsck_data_release</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00520">LFSCK_STF_COUNT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00523">lfsck_sub_trace_obj::lsto_obj</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00318">lfsck_component_cleanup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02745">lfsck_dump()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03436">lfsck_layout_slave_async_interpret()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05908">lfsck_orphan_it_fini()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ac409556d9d200cda4725c66911141f9e"></a><!-- doxytag: member="lfsck_internal.h::lfsck_control_speed" ref="ac409556d9d200cda4725c66911141f9e" args="(struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_control_speed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01857">1857</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00722">lfsck_instance::li_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00719">lfsck_instance::li_sleep_jif</a>, <a class="el" href="lfsck__internal_8h_source.html#l00716">lfsck_instance::li_sleep_rate</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lustre__lib_8h_source.html#l00159">LWI_ON_SIGNAL_NOOP</a>, <a class="el" href="lustre__lib_8h_source.html#l00189">LWI_TIMEOUT_INTR</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, and <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>.</p>

</div>
</div>
<a class="anchor" id="a499f6bef84e17d8ad4f2b394087d2088"></a><!-- doxytag: member="lfsck_internal.h::lfsck_control_speed_by_self" ref="a499f6bef84e17d8ad4f2b394087d2088" args="(struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_control_speed_by_self </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01874">1874</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00559">lfsck_component::lc_new_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00719">lfsck_instance::li_sleep_jif</a>, <a class="el" href="lfsck__internal_8h_source.html#l00716">lfsck_instance::li_sleep_rate</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lustre__lib_8h_source.html#l00159">LWI_ON_SIGNAL_NOOP</a>, <a class="el" href="lustre__lib_8h_source.html#l00189">LWI_TIMEOUT_INTR</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, and <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05977">lfsck_namespace_double_scan_one_trace_file()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c12679b2d7674a1b3283cbb618fe682"></a><!-- doxytag: member="lfsck_internal.h::lfsck_dev_idx" ref="a8c12679b2d7674a1b3283cbb618fe682" args="(struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static u32 lfsck_dev_idx </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01231">1231</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, and <a class="el" href="lustre__fid_8h_source.html#l00454">seq_server_site::ss_node_id</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01254">lfsck_find_dev_by_fid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03837">lfsck_namespace_open_dir()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00551">lfsck_rbtree_setup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02848">lfsck_start_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02778">lfsck_stop_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>.</p>

</div>
</div>
<a class="anchor" id="a7c681b8477093d202e3cd99847fc973d"></a><!-- doxytag: member="lfsck_internal.h::lfsck_dev_site" ref="a7c681b8477093d202e3cd99847fc973d" args="(struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structseq__server__site.html">seq_server_site</a>* lfsck_dev_site </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01226">1226</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, and <a class="el" href="lu__object_8h_source.html#l00661">lu_site2seq()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l00973">fid_is_for_ostobj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01566">lfsck_fid_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05696">lfsck_fid_match_idx()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00526">lfsck_find_mdt_idx_by_fid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03789">lfsck_layout_slave_check_pairs()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="aa484cbbcab8be42ead2a8c9fddedc29c"></a><!-- doxytag: member="lfsck_internal.h::lfsck_double_scan_generic" ref="aa484cbbcab8be42ead2a8c9fddedc29c" args="(const struct lu_env *env, struct lfsck_component *com, int status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_double_scan_generic </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02580">2580</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_in_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04912">lfsck_layout_master_double_scan()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04380">lfsck_namespace_double_scan()</a>.</p>

</div>
</div>
<a class="anchor" id="a0835d03ca8154d89267d733058026c0a"></a><!-- doxytag: member="lfsck_internal.h::lfsck_dto2fid" ref="a0835d03ca8154d89267d733058026c0a" args="(const struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__fid.html">lu_fid</a>* lfsck_dto2fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01138">1138</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00202">lfsck_disable_master_lmv()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05734">lfsck_layout_destroy_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01497">lfsck_layout_extend_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01038">lfsck_layout_lastid_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00628">lfsck_namespace_check_exist()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03670">lfsck_namespace_check_for_double_scan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00948">lfsck_namespace_check_name()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03774">lfsck_namespace_close_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00714">lfsck_namespace_links_remove()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01910">lfsck_namespace_rebuild_linkea()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01624">lfsck_namespace_shrink_linkea_cond()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01796">lfsck_pos_fill()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00485">lfsck_record_lmv()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01149">lfsck_update_lpf_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06441">lfsck_update_name_entry()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="abb9457be30c659d70ff99694ad4fe480"></a><!-- doxytag: member="lfsck_internal.h::lfsck_env_info" ref="abb9457be30c659d70ff99694ad4fe480" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__thread__info.html">lfsck_thread_info</a>* lfsck_env_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01084">1084</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lfsck__internal_8h.html#aeff576b7c084908278912545672aa6d0">lfsck_thread_key</a>, and <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00355">__lfsck_ibits_lock()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01576">__lfsck_layout_update_pfid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00973">fid_is_for_ostobj()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01089">lfsck_allow_regenerate_master_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01123">lfsck_buf_get_const()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00202">lfsck_disable_master_lmv()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05696">lfsck_fid_match_idx()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00526">lfsck_find_mdt_idx_by_fid()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00250">lfsck_layout_assistant_sync_failures()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01407">lfsck_layout_get_def_stripesize()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01038">lfsck_layout_lastid_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01900">lfsck_layout_master_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05162">lfsck_layout_master_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01441">lfsck_layout_refill_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03789">lfsck_layout_slave_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06404">lfsck_links_get_first()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01423">lfsck_links_read()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01434">lfsck_links_read2()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01094">lfsck_name_get_const()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06245">lfsck_namespace_assistant_sync_failures()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00628">lfsck_namespace_check_exist()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03670">lfsck_namespace_check_for_double_scan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00948">lfsck_namespace_check_name()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02263">lfsck_namespace_dsd_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00460">lfsck_namespace_load_sub_trace_files()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">lfsck_namespace_notify_lmv_master_local()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05560">lfsck_namespace_scan_local_lpf_one()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01624">lfsck_namespace_shrink_linkea_cond()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01237">lfsck_object_find_by_dev_nowait()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00551">lfsck_rbtree_setup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00334">lfsck_remove_dirent()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01088">lfsck_scan_lpf_bad_entries()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00880">lfsck_shard_name_to_index()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02848">lfsck_start_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02778">lfsck_stop_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06441">lfsck_update_name_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="af50cdbcf1743b1d7dee64e0a62df834d"></a><!-- doxytag: member="lfsck_internal.h::lfsck_fid_alloc" ref="af50cdbcf1743b1d7dee64e0a62df834d" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lu_fid *fid, bool locked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_fid_alloc </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>locked</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00329">329</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00105">lfsck_bookmark::lb_last_fid</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00634">lfsck_instance::li_mutex</a>, <a class="el" href="lfsck__internal_8h_source.html#l00680">lfsck_instance::li_seq</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="fid__request_8c_source.html#l00320">seq_client_alloc_fid()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>.</p>

</div>
</div>
<a class="anchor" id="a68644127bb0e0d87ba7a9fa87cbe5271"></a><!-- doxytag: member="lfsck_internal.h::lfsck_find_dev_by_fid" ref="a68644127bb0e0d87ba7a9fa87cbe5271" args="(const struct lu_env *env, struct lfsck_instance *lfsck, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__device.html">dt_device</a>* lfsck_find_dev_by_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01254">1254</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00526">lfsck_find_mdt_idx_by_fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01296">lfsck_object_find_bottom_nowait()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7c1dbcdae1c09a1496699e6024f1d94"></a><!-- doxytag: member="lfsck_internal.h::lfsck_find_mdt_idx_by_fid" ref="aa7c1dbcdae1c09a1496699e6024f1d94" args="(const struct lu_env *env, struct lfsck_instance *lfsck, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_find_mdt_idx_by_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00526">526</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="seq__range_8h_source.html#l00091">fld_range_set_mdt()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, and <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>.</p>

<p>Referenced by <a class="el" href="lfsck__internal_8h_source.html#l01254">lfsck_find_dev_by_fid()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>.</p>

</div>
</div>
<a class="anchor" id="a78fb1ef9b282636ee28936fe69c56bec"></a><!-- doxytag: member="lfsck_internal.h::lfsck_ibits_lock" ref="a78fb1ef9b282636ee28936fe69c56bec" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj, struct lustre_handle *lh, __u64 bits, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_ibits_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request the specified ibits lock for the given object. </p>
<p>Before the LFSCK modifying on the namespace visible object, it needs to acquire related ibits ldlm lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the <a class="el" href="structdt__object.html">dt_object</a> to be locked </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>lh</em>&nbsp;</td><td>pointer to the lock handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bits</em>&nbsp;</td><td>the bits for the ldlm lock to be acquired </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>the mode for the ldlm lock to be acquired</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00415">415</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l00355">__lfsck_ibits_lock()</a>, <a class="el" href="lustre__fid_8h_source.html#l00541">fid_build_reg_res_name()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00885">lfsck_thread_info::lti_resid</a>, and <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00301">lfsck_remove_lmv()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a5641b50be030cde48d9b7ce69a8935a6"></a><!-- doxytag: member="lfsck_internal.h::lfsck_ibits_unlock" ref="a5641b50be030cde48d9b7ce69a8935a6" args="(struct lustre_handle *lh, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_ibits_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release the the specified ibits lock. </p>
<p>If the lock has been acquired before, release it and cleanup the handle. Otherwise, do nothing.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lh</em>&nbsp;</td><td>pointer to the lock handle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>the mode for the ldlm lock to be released </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00436">436</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02263">lfsck_namespace_dsd_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00301">lfsck_remove_lmv()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00520">lfsck_unlock()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a474e8af1234983aaac508e097a6591b1"></a><!-- doxytag: member="lfsck_internal.h::lfsck_instance_cleanup" ref="a474e8af1234983aaac508e097a6591b1" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_instance_cleanup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01613">1613</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lfsck__lib_8c_source.html#l00318">lfsck_component_cleanup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01604">lfsck_fid_fini()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">lfsck_lmv_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00121">lfsck_tgt_descs_fini()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00677">lfsck_instance::li_bookmark_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00676">lfsck_instance::li_lfsck_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00638">lfsck_instance::li_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00655">lfsck_instance::li_list_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00686">lfsck_instance::li_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00673">lfsck_instance::li_los</a>, <a class="el" href="lfsck__internal_8h_source.html#l00678">lfsck_instance::li_lpf_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00679">lfsck_instance::li_lpf_root_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lfsck__internal_8h_source.html#l00594">lfsck_lmv::ll_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00620">lfsck_lmv_unit::llu_lmv</a>, <a class="el" href="local__storage_8c_source.html#l00936">local_oid_storage_fini()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01537">thread_is_init()</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__internal_8h_source.html#l01389">lfsck_instance_put()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>.</p>

</div>
</div>
<a class="anchor" id="aa672e5f8f93c88210e5beaecff3eb945"></a><!-- doxytag: member="lfsck_internal.h::lfsck_instance_find" ref="aa672e5f8f93c88210e5beaecff3eb945" args="(struct dt_device *key, bool ref, bool unlink)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a>* lfsck_instance_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>unlink</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01712">1712</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l01694">__lfsck_instance_find()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03651">lfsck_degister()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02745">lfsck_dump()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02631">lfsck_get_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02684">lfsck_get_windows()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03457">lfsck_register_namespace()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02656">lfsck_set_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02709">lfsck_set_windows()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="af1ab4397428fd452aae5c21570c80be8"></a><!-- doxytag: member="lfsck_internal.h::lfsck_instance_get" ref="af1ab4397428fd452aae5c21570c80be8" args="(struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a>* lfsck_instance_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01382">1382</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00657">lfsck_instance::li_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l01694">__lfsck_instance_find()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01893">lfsck_thread_args_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a77a79e177b50ef7ed74cbcc9d185cc57"></a><!-- doxytag: member="lfsck_internal.h::lfsck_instance_put" ref="a77a79e177b50ef7ed74cbcc9d185cc57" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_instance_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01389">1389</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l01613">lfsck_instance_cleanup()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00657">lfsck_instance::li_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03661">lfsck_add_target()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03651">lfsck_degister()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03710">lfsck_del_target()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02745">lfsck_dump()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02631">lfsck_get_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02684">lfsck_get_windows()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03296">lfsck_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03364">lfsck_query()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03457">lfsck_register_namespace()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02656">lfsck_set_speed()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02709">lfsck_set_windows()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="af23f68396835a9567c498d615438155c"></a><!-- doxytag: member="lfsck_internal.h::lfsck_is_dead_obj" ref="af23f68396835a9567c498d615438155c" args="(const struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_is_dead_obj </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01206">1206</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="lu__object_8h_source.html#l00530">lu_object_header::loh_flags</a>, and <a class="el" href="lu__object_8h_source.html#l00493">LU_OBJECT_HEARD_BANSHEE</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l01982">lfsck_assistant_object_load()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00202">lfsck_disable_master_lmv()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03856">lfsck_layout_slave_repair_pfid()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00628">lfsck_namespace_check_exist()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04094">lfsck_namespace_exec_dir()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00714">lfsck_namespace_links_remove()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01910">lfsck_namespace_rebuild_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01624">lfsck_namespace_shrink_linkea_cond()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, and <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4fe510053a9ba9be1fb937afbe31315"></a><!-- doxytag: member="lfsck_internal.h::lfsck_is_valid_slave_name_entry" ref="ae4fe510053a9ba9be1fb937afbe31315" args="(const struct lu_env *env, struct lfsck_lmv *llmv, const char *name, int namelen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lfsck_is_valid_slave_name_entry </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *&nbsp;</td>
          <td class="paramname"> <em>llmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l00910">910</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_slave</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_verified</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__lmv_8h_source.html#l00140">lmv_name_to_stripe_index()</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>.</p>

</div>
</div>
<a class="anchor" id="a4fa0e5c8fa0d4dd053a6fc665b7906d6"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lad_set_bitmap" ref="a4fa0e5c8fa0d4dd053a6fc665b7906d6" args="(const struct lu_env *env, struct lfsck_component *com, __u32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_lad_set_bitmap </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01403">1403</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="bitmap_8h_source.html#l00075">cfs_bitmap_set()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00831">lfsck_assistant_data::lad_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_incomplete</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00171">LFSCK_TYPE_NAMESPACE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, and <a class="el" href="bitmap_8h_source.html#l00040">cfs_bitmap::size</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05162">lfsck_layout_master_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>.</p>

</div>
</div>
<a class="anchor" id="a45153a26a55e704921bcc3292e79df9f"></a><!-- doxytag: member="lfsck_internal.h::lfsck_layout_setup" ref="a45153a26a55e704921bcc3292e79df9f" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_layout_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__layout_8c_source.html#l05556">5556</a> of file <a class="el" href="lfsck__layout_8c_source.html">lfsck_layout.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00543">lfsck_component::lc_file_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00535">lfsck_component::lc_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03458">LE_LASTID_REBUILDING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00068">LF_CRASHED_LASTID</a>, <a class="el" href="lfsck__internal_8h_source.html#l00065">LF_INCOMPLETE</a>, <a class="el" href="lfsck__lib_8c_source.html#l01929">lfsck_assistant_data_init()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00318">lfsck_component_cleanup()</a>, <a class="el" href="lustre__disk_8h_source.html#l00075">LFSCK_LAYOUT</a>, <a class="el" href="lfsck__layout_8c_source.html#l00957">lfsck_layout_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00835">lfsck_layout_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00674">lfsck_instance::li_local_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00673">lfsck_instance::li_los</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00667">lfsck_instance::li_out_notify</a>, <a class="el" href="lfsck__internal_8h_source.html#l00668">lfsck_instance::li_out_notify_data</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00301">lfsck_layout::ll_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00298">lfsck_layout::ll_status</a>, <a class="el" href="lfsck__layout_8c_source.html#l00085">lfsck_layout_slave_data::llsd_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00084">lfsck_layout_slave_data::llsd_master_list</a>, <a class="el" href="lfsck__layout_8c_source.html#l00089">lfsck_layout_slave_data::llsd_rb_lock</a>, <a class="el" href="lfsck__layout_8c_source.html#l00088">lfsck_layout_slave_data::llsd_rb_root</a>, <a class="el" href="lfsck__layout_8c_source.html#l00081">lfsck_layout_slave_data::llsd_seq_list</a>, <a class="el" href="local__storage_8c_source.html#l00432">local_file_find_or_create()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00100">LS_CO_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00106">LS_CO_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00103">LS_CO_STOPPED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00080">LS_COMPLETED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00094">LS_CRASHED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00069">LS_INIT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00097">LS_PARTIAL</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a0831bfac60acb71557806a7943785cd3"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lfsck2name" ref="a0831bfac60acb71557806a7943785cd3" args="(struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* lfsck_lfsck2name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01133">1133</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, and <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00171">__lfsck_add_target()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00066">lfsck_bookmark_load()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00202">lfsck_disable_master_lmv()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02580">lfsck_double_scan_generic()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01566">lfsck_fid_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03390">lfsck_layout_assistant_handler_p2()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00250">lfsck_layout_assistant_sync_failures()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01497">lfsck_layout_extend_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01038">lfsck_layout_lastid_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01105">lfsck_layout_lastid_reload()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01149">lfsck_layout_lastid_store()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00835">lfsck_layout_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03944">lfsck_layout_master_checkpoint()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05162">lfsck_layout_master_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04625">lfsck_layout_master_post()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04124">lfsck_layout_master_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04015">lfsck_layout_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01312">lfsck_layout_record_failure()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03895">lfsck_layout_reset()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03436">lfsck_layout_slave_async_interpret()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03981">lfsck_layout_slave_checkpoint()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04950">lfsck_layout_slave_double_scan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04504">lfsck_layout_slave_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05276">lfsck_layout_slave_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03628">lfsck_layout_slave_notify_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04680">lfsck_layout_slave_post()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04083">lfsck_layout_slave_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03555">lfsck_layout_slave_query_master()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03856">lfsck_layout_slave_repair_pfid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06106">lfsck_namespace_assistant_handler_p2()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06245">lfsck_namespace_assistant_sync_failures()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03866">lfsck_namespace_checkpoint()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00714">lfsck_namespace_links_remove()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00336">lfsck_namespace_load()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04152">lfsck_namespace_post()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03904">lfsck_namespace_prep()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01910">lfsck_namespace_rebuild_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00238">lfsck_namespace_record_failure()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03699">lfsck_namespace_reset()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06514">lfsck_namespace_setup()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00369">lfsck_namespace_store()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05908">lfsck_orphan_it_fini()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05818">lfsck_orphan_it_init()</a>, <a class="el" href="lfsck__layout_8c_source.html#l06208">lfsck_orphan_it_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02551">lfsck_post_generic()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00585">lfsck_rbtree_cleanup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00551">lfsck_rbtree_setup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00617">lfsck_rbtree_update_bitmap()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00485">lfsck_record_lmv()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02709">lfsck_set_windows()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02848">lfsck_start_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02484">lfsck_start_assistant()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03213">lfsck_stop()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02778">lfsck_stop_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01149">lfsck_update_lpf_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06441">lfsck_update_name_entry()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a153a7a6d32e606e697c11f4054eedf1b"></a><!-- doxytag: member="lfsck_internal.h::lfsck_links_get_first" ref="a153a7a6d32e606e697c11f4054eedf1b" args="(const struct lu_env *env, struct dt_object *obj, char *name, struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_links_get_first </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the name and parent directory's FID from the first linkEA entry. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the object which get linkEA from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>pointer to the buffer to hold the name in the first linkEA entry </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pfid</em>&nbsp;</td><td>pointer to the buffer to hold the parent directory's FID in the first linkEA entry</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l06404">6404</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="lustre__linkea_8h_source.html#l00041">linkea_data::ld_lee</a>, <a class="el" href="lustre__linkea_8h_source.html#l00042">linkea_data::ld_reclen</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01423">lfsck_links_read()</a>, <a class="el" href="linkea_8c_source.html#l00097">linkea_entry_unpack()</a>, <a class="el" href="lustre__linkea_8h_source.html#l00057">linkea_first_entry()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00856">lfsck_thread_info::lti_name</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f781ea9d5b9b7ac50bb9de228f2ae3e"></a><!-- doxytag: member="lfsck_internal.h::lfsck_links_read" ref="a1f781ea9d5b9b7ac50bb9de228f2ae3e" args="(const struct lu_env *env, struct dt_object *obj, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_links_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01423">1423</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__namespace_8c_source.html#l00671">__lfsck_links_read()</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, and <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l06404">lfsck_links_get_first()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="a793ba45056d1b49963ce36b64e15ac79"></a><!-- doxytag: member="lfsck_internal.h::lfsck_links_read2" ref="a793ba45056d1b49963ce36b64e15ac79" args="(const struct lu_env *env, struct dt_object *obj, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_links_read2 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01434">1434</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__namespace_8c_source.html#l00671">__lfsck_links_read()</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, and <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c5cf782bc8dcdfe49a7879370b414ac"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lmv_get" ref="a4c5cf782bc8dcdfe49a7879370b414ac" args="(struct lfsck_lmv *llmv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a>* lfsck_lmv_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *&nbsp;</td>
          <td class="paramname"> <em>llmv</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01445">1445</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00594">lfsck_lmv::ll_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l00061">lfsck_namespace_assistant_req_init()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l03774">lfsck_namespace_close_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a77d3a46f480b658ce300d8155d0eeabb"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lmv_header_cpu_to_le" ref="a77d3a46f480b658ce300d8155d0eeabb" args="(struct lmv_mds_md_v1 *dst, const struct lmv_mds_md_v1 *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_lmv_header_cpu_to_le </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01468">1468</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02588">lmv_mds_md_v1::lmv_layout_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, and <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a70c45ebcb2d00daacd82b18b6d5d36a2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lmv_header_le_to_cpu" ref="a70c45ebcb2d00daacd82b18b6d5d36a2" args="(struct lmv_mds_md_v1 *dst, const struct lmv_mds_md_v1 *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_lmv_header_le_to_cpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01458">1458</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02588">lmv_mds_md_v1::lmv_layout_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, and <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a16bf9373cf85c4c057eade31b469ef09"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lmv_put" ref="a16bf9373cf85c4c057eade31b469ef09" args="(const struct lu_env *env, struct lfsck_lmv *llmv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_lmv_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *&nbsp;</td>
          <td class="paramname"> <em>llmv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">155</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_inline</a>, <a class="el" href="lfsck__internal_8h_source.html#l00608">lfsck_lmv::ll_lslr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00594">lfsck_lmv::ll_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00595">lfsck_lmv::ll_stripes_allocated</a>, <a class="el" href="lfsck__internal_8h_source.html#l00622">lfsck_lmv_unit::llu_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00619">lfsck_lmv_unit::llu_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00621">lfsck_lmv_unit::llu_obj</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01613">lfsck_instance_cleanup()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00087">lfsck_namespace_assistant_req_fini()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">lfsck_namespace_notify_lmv_master_local()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03647">lfsck_namespace_release_lmv()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ffad8457ec83d8c3b1fc036d5de0ed1"></a><!-- doxytag: member="lfsck_internal.h::lfsck_lock" ref="a7ffad8457ec83d8c3b1fc036d5de0ed1" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *obj, const char *name, struct lfsck_lock_handle *llh, __u64 bits, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request compound ibits locks for the given &lt;obj, name&gt; pairs. </p>
<p>Before the LFSCK modifying on the namespace visible object, it needs to acquire related ibits ldlm lock. Usually, we can use lfsck_ibits_lock for the lock purpose. But the simple lfsck_ibits_lock for directory-based modificationis (such as insert name entry to the directory) may be too coarse-grained and not efficient.</p>
<p>The <a class="el" href="lfsck__internal_8h.html#a7ffad8457ec83d8c3b1fc036d5de0ed1" title="Request compound ibits locks for the given &lt;obj, name&gt; pairs.">lfsck_lock()</a> will request compound ibits locks on the specified &lt;obj, name&gt; pairs: the PDO (Parallel Directory Operations) ibits (UPDATE) lock on the directory object, and the regular ibits lock on the name hash.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the <a class="el" href="structdt__object.html">dt_object</a> to be locked </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>used for building the PDO lock resource </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>llh</em>&nbsp;</td><td>pointer to the <a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bits</em>&nbsp;</td><td>the bits for the ldlm lock to be acquired </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>the mode for the ldlm lock to be acquired</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00468">468</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l00355">__lfsck_ibits_lock()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__fid_8h_source.html#l00541">fid_build_reg_res_name()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00295">LCK_CR</a>, <a class="el" href="packet-lustre_8c_source.html#l00294">LCK_CW</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00848">lfsck_lock_handle::llh_pdo_lh</a>, <a class="el" href="lfsck__internal_8h_source.html#l00850">lfsck_lock_handle::llh_pdo_mode</a>, <a class="el" href="lfsck__internal_8h_source.html#l00849">lfsck_lock_handle::llh_reg_lh</a>, <a class="el" href="lfsck__internal_8h_source.html#l00851">lfsck_lock_handle::llh_reg_mode</a>, <a class="el" href="lfsck__internal_8h_source.html#l00885">lfsck_thread_info::lti_resid</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__idl_8h_source.html#l02108">LUSTRE_RES_ID_HSH_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01624">lfsck_namespace_shrink_linkea_cond()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06441">lfsck_update_name_entry()</a>.</p>

</div>
</div>
<a class="anchor" id="a2193f42020089643af5541bd7aad7738"></a><!-- doxytag: member="lfsck_internal.h::lfsck_ltd2tgt" ref="a2193f42020089643af5541bd7aad7738" args="(struct lfsck_tgt_descs *ltd, __u32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a>* lfsck_ltd2tgt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l00494">494</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lfsck__internal_8h_source.html#l00470">lfsck_tgt_desc_idx::ldi_tgts</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lfsck__internal_8h_source.html#l00475">lfsck_tgt_descs::ltd_tgts_idx</a>, <a class="el" href="lfsck__internal_8h_source.html#l00443">TGT_PTRS</a>, <a class="el" href="lfsck__internal_8h_source.html#l00444">TGT_PTRS_PER_BLOCK</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03710">lfsck_del_target()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01254">lfsck_find_dev_by_fid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00250">lfsck_layout_assistant_sync_failures()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05162">lfsck_layout_master_in_notify()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05385">lfsck_layout_query_all()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06245">lfsck_namespace_assistant_sync_failures()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04687">lfsck_namespace_query_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00121">lfsck_tgt_descs_fini()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01326">lfsck_tgt_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a0cfcafda3509ba234d752164ac56754f"></a><!-- doxytag: member="lfsck_internal.h::lfsck_master_engine" ref="a0cfcafda3509ba234d752164ac56754f" args="(void *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_master_engine </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00996">996</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux_2libcfs_8h_source.html#l00145">current_pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00069">lfsck_di_oit_put()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00617">lfsck_double_scan()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01796">lfsck_pos_fill()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00649">lfsck_quit()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00713">lfsck_instance::li_args_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00710">lfsck_instance::li_args_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00649">lfsck_instance::li_list_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00684">lfsck_instance::li_pos_checkpoint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_start_unplug</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lfsck__internal_8h_source.html#l00749">lfsck_thread_args::lta_env</a>, <a class="el" href="lfsck__internal_8h_source.html#l00750">lfsck_thread_args::lta_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00752">lfsck_thread_args::lta_lsp</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00531">OBD_FAIL_LFSCK_CRASH</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c71cb235d8b239b216cab76c3828ba6"></a><!-- doxytag: member="lfsck_internal.h::lfsck_name_get_const" ref="a3c71cb235d8b239b216cab76c3828ba6" args="(const struct lu_env *env, const void *area, ssize_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__name.html">lu_name</a>* lfsck_name_get_const </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01094">1094</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00855">lfsck_thread_info::lti_name_const</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a85e6979b2c419199ab5aff81fe89fcd9"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_check_exist" ref="a85e6979b2c419199ab5aff81fe89fcd9" args="(const struct lu_env *env, struct dt_object *dir, struct dt_object *obj, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_check_exist </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l00628">628</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00055">LFSCK_NAMEENTRY_DEAD</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00057">LFSCK_NAMEENTRY_RECREATED</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00056">LFSCK_NAMEENTRY_REMOVED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>.</p>

</div>
</div>
<a class="anchor" id="a7eee69b6a91e0241801bd0911409913e"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_check_name" ref="a7eee69b6a91e0241801bd0911409913e" args="(const struct lu_env *env, struct dt_object *parent, struct dt_object *child, const struct lu_name *cname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_check_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>cname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether the given name is a valid entry under the . </p>
<p>If the  is a striped directory then the  should one shard of the striped directory, its name should be $FID:$index.</p>
<p>If the  is a shard of a striped directory, then the name hash should match the MDT, otherwise it is invalid.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent</em>&nbsp;</td><td>the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>child</em>&nbsp;</td><td>the child object to be checked </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cname</em>&nbsp;</td><td>the name for the  in the parent directory</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for invalid name entry </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the name is valid or uncertain </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l00948">948</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00277">lfsck_is_valid_slave_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00880">lfsck_shard_name_to_index()</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__lmv_8h_source.html#l00140">lmv_name_to_stripe_index()</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00896">lfsck_thread_info::lti_lmv</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>.</p>

</div>
</div>
<a class="anchor" id="a58127449240233d6dc445e92a938a7cb"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_handle_striped_master" ref="a58127449240233d6dc445e92a938a7cb" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_namespace_req *lnr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_handle_striped_master </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a> *&nbsp;</td>
          <td class="paramname"> <em>lnr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verify the shard's name entry under the striped directory. </p>
<p>Before all shards of the striped directory scanned, the LFSCK cannot know whether the master LMV EA is valid or not, and also cannot know how to repair an invalid shard exactly. For example, the stripe index stored in the shard's name does not match the stripe index stored in the slave LMV EA, then the LFSCK cannot know which one is correct. If the LFSCK just assumed one is correct, and fixed the other, then as the LFSCK processing, it may find that the former reparation is wrong and have to roll back. Unfortunately, if some applications saw the changes and made further modification based on such changes, then the roll back is almost impossible.</p>
<p>To avoid above trouble, the LFSCK will scan the master object of the striped directory twice, that is NOT the same as normal two-stages scanning, the double scanning the striped directory will happen both during the first-stage scanning:</p>
<p>1) When the striped directory is opened for scanning, the LFSCK will iterate each shard in turn, and records its slave LMV EA in the <a class="el" href="structlfsck__lmv.html#a336362d57069fe85f44c450ad1c52a44">lfsck_lmv::ll_lslr</a>. In this step, if the 'shard' (may be fake shard) name does not match the shard naming rule, for example, it does not contains the shard's FID, or not contains index, then we can remove the bad name entry directly. But if the name is valid, but the shard has no slave LMV EA or the slave LMV EA does not match its name, then we just record related information in the <a class="el" href="structlfsck__lmv.html#a336362d57069fe85f44c450ad1c52a44">lfsck_lmv::ll_lslr</a> in RAM.</p>
<p>2) When all the known shards have been scanned, then the engine will generate a dummy request (via lfsck_namespace_close_dir) to tell the assistant thread that all the known shards have been scanned. Since the assistant has got the global knowledge about the index conflict, stripe count, hash type, and so on. Then the assistant thread will scan the <a class="el" href="structlfsck__lmv.html#a336362d57069fe85f44c450ad1c52a44">lfsck_lmv::ll_lslr</a>, and for every shard in the record, check and repair inconsistency.</p>
<p>Generally, the stripe directory has only several shards, and there will NOT be a lof of striped directory. So double scanning striped directory will not much affect the LFSCK performance.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lnr</em>&nbsp;</td><td>pointer to the namespace request that contains the shard's name, parent object, parent's LMV, and ect.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">2248</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="mmap__sanity_8c_source.html#l00053">dir</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00757">lfsck_assistant_req::lar_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__lib_8c_source.html#l01982">lfsck_assistant_object_load()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00526">lfsck_find_mdt_idx_by_fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01403">lfsck_lad_set_bitmap()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00628">lfsck_namespace_check_exist()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01237">lfsck_object_find_by_dev_nowait()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00485">lfsck_record_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00880">lfsck_shard_name_to_index()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_failed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_ignore</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00221">lfsck_namespace::ln_bad_type_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00196">lfsck_namespace::ln_dirent_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00172">lfsck_namespace::ln_items_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00128">LNIT_BAD_DIRENT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00127">LNIT_BAD_TYPE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00122">LNIT_NONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00763">lfsck_namespace_req::lnr_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00761">lfsck_namespace_req::lnr_lar</a>, <a class="el" href="lfsck__internal_8h_source.html#l00762">lfsck_namespace_req::lnr_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00769">lfsck_namespace_req::lnr_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00768">lfsck_namespace_req::lnr_namelen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00767">lfsck_namespace_req::lnr_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00113">LNTF_CHECK_PARENT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00574">LSLF_BAD_INDEX1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00573">LSLF_DANGLING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00572">LSLF_NO_LMVEA</a>, <a class="el" href="lfsck__internal_8h_source.html#l00570">LSLF_NONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00364">lfsck_assistant_object::lso_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, <a class="el" href="lfsck__internal_8h_source.html#l00896">lfsck_thread_info::lti_lmv</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="afb643704151cecb5c2a54a638f15366b"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_notify_lmv_master_local" ref="afb643704151cecb5c2a54a638f15366b" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_notify_lmv_master_local </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate request for local LFSCK instance to rescan the striped directory. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the striped directory to be rescanned</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number if nothing to be done </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">1264</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00565">LFSCK_LMV_DEF_STRIPES</a>, <a class="el" href="lfsck__internal_8h_source.html#l00564">LFSCK_LMV_MAX_STRIPES</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">lfsck_lmv_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01213">lfsck_object_get()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00655">lfsck_instance::li_list_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00600">lfsck_lmv::ll_hash_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_inline</a>, <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00608">lfsck_lmv::ll_lslr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00594">lfsck_lmv::ll_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00595">lfsck_lmv::ll_stripes_allocated</a>, <a class="el" href="lfsck__internal_8h_source.html#l00622">lfsck_lmv_unit::llu_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00619">lfsck_lmv_unit::llu_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00620">lfsck_lmv_unit::llu_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00621">lfsck_lmv_unit::llu_obj</a>, <a class="el" href="lustre__user_8h_source.html#l00447">LMV_HASH_TYPE_UNKNOWN</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00136">lfsck_namespace::ln_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00243">lfsck_namespace::ln_striped_dirs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00253">lfsck_namespace::ln_striped_dirs_skipped</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00899">lfsck_thread_info::lti_lmv4</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e5221a7fc1e062d8b163cd4bb1789c5"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_rebuild_linkea" ref="a5e5221a7fc1e062d8b163cd4bb1789c5" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *obj, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_rebuild_linkea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overwrite the linkEA for the object with the given ldata. </p>
<p>The caller should take the ldlm lock before the calling.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the <a class="el" href="structdt__object.html">dt_object</a> to be handled </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ldata</em>&nbsp;</td><td>pointer to the new linkEA data</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for repaired cases </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if nothing to be repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l01910">1910</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l00058">LF_INCONSISTENT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>.</p>

</div>
</div>
<a class="anchor" id="ab795dfd20bcc40d70ccc7e1a3f8b4ea3"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_repair_bad_name_hash" ref="ab795dfd20bcc40d70ccc7e1a3f8b4ea3" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *shard, struct lfsck_lmv *llmv, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_repair_bad_name_hash </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>shard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *&nbsp;</td>
          <td class="paramname"> <em>llmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Repair the bad name hash. </p>
<p>If the name hash of some name entry under the striped directory does not match the shard of the striped directory, then the LFSCK will repair the inconsistency. Ideally, the LFSCK should migrate the name entry from the current MDT to the right MDT (another one), but before the async commit finished, the LFSCK will change the striped directory's hash type as LMV_HASH_TYPE_UNKNOWN and mark the lmv flags as LMV_HASH_FLAG_BAD_TYPE.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>shard</em>&nbsp;</td><td>pointer to the shard of the striped directory that contains the bad name entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>llmv</em>&nbsp;</td><td>pointer to lfsck LMV EA structure </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the name of the bad name hash</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number if nothing to be done </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">1473</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03478">LEF_SET_LMV_HASH</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lustre__idl_8h_source.html#l02617">LMV_HASH_FLAG_BAD_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__user_8h_source.html#l00447">LMV_HASH_TYPE_UNKNOWN</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00864">lfsck_thread_info::lti_fid3</a>, <a class="el" href="lfsck__internal_8h_source.html#l00897">lfsck_thread_info::lti_lmv2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>.</p>

</div>
</div>
<a class="anchor" id="a499639286c429a090c0ba2f745b31363"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_repair_dangling" ref="a499639286c429a090c0ba2f745b31363" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct dt_object *child, struct lfsck_namespace_req *lnr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_repair_dangling </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a> *&nbsp;</td>
          <td class="paramname"> <em>lnr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Repair dangling name entry. </p>
<p>For the name entry with dangling reference, we need to repare the inconsistency according to the LFSCK sponsor's requirement:</p>
<p>1) Keep the inconsistency there and report the inconsistency case, then give the chance to the application to find related issues, and the users can make the decision about how to handle it with more human knownledge. (by default)</p>
<p>2) Re-create the missing MDT-object with the FID information.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent</em>&nbsp;</td><td>pointer to the dir object that contains the dangling name entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>child</em>&nbsp;</td><td>pointer to the object corresponding to the dangling name entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lnr</em>&nbsp;</td><td>pointer to the namespace request that contains the name's name, parent object, parent's LMV, and ect.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number if no need to repair </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for repaired successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l04790">4790</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="structdt__object__operations.html#a00fed99bee94890d3e36719af00d5595">dt_object_operations::do_ah_init</a>, <a class="el" href="dt__object_8h_source.html#l01751">dt_object::do_ops</a>, <a class="el" href="dt__object_8h_source.html#l00396">dt_object_format::dof_type</a>, <a class="el" href="lfsck__lib_8c_source.html#l00542">dot</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="dt__object_8h_source.html#l02266">dt_declare_ref_add()</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8c_source.html#l00192">dt_mode_to_dft()</a>, <a class="el" href="dt__object_8h_source.html#l02279">dt_ref_add()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00444">LA_ATIME</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00452">LA_TYPE</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lfsck__internal_8h_source.html#l00058">LF_INCONSISTENT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01468">lfsck_lmv_header_cpu_to_le()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01094">lfsck_name_get_const()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00628">lfsck_namespace_check_exist()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01310">lfsck_object_locate()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00880">lfsck_shard_name_to_index()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00520">lfsck_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00669">lfsck_instance::li_next</a>, <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, <a class="el" href="linkea_8c_source.html#l00034">linkea_data_new()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_master</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00762">lfsck_namespace_req::lnr_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00769">lfsck_namespace_req::lnr_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00768">lfsck_namespace_req::lnr_namelen</a>, <a class="el" href="lfsck__internal_8h_source.html#l00767">lfsck_namespace_req::lnr_type</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00157">LPF_CREATE_MDTOBJ</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00873">lfsck_thread_info::lti_dof</a>, <a class="el" href="lfsck__internal_8h_source.html#l00893">lfsck_thread_info::lti_dt_rec</a>, <a class="el" href="lfsck__internal_8h_source.html#l00890">lfsck_thread_info::lti_hint</a>, <a class="el" href="lfsck__internal_8h_source.html#l00865">lfsck_thread_info::lti_la</a>, <a class="el" href="lfsck__internal_8h_source.html#l00860">lfsck_thread_info::lti_linkea_buf2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00900">lfsck_thread_info::lti_llh</a>, <a class="el" href="lfsck__internal_8h_source.html#l00897">lfsck_thread_info::lti_lmv2</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>.</p>

</div>
</div>
<a class="anchor" id="a7802d2fdae444eb243bebb9b92a8238a"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_repair_dirent" ref="a7802d2fdae444eb243bebb9b92a8238a" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *parent, struct dt_object *child, const char *name, const char *name2, __u16 type, bool update, bool dec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_repair_dirent </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>dec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Repair invalid name entry. </p>
<p>If the name entry contains invalid information, such as bad file type or (and) corrupted object FID, then either remove the name entry or udpate the name entry with the given (right) information.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent</em>&nbsp;</td><td>pointer to the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>child</em>&nbsp;</td><td>pointer to the object referenced by the name entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the old name of the child under the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name2</em>&nbsp;</td><td>the new name of the child under the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>the type claimed by the name entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>update</em>&nbsp;</td><td>update the name entry if true; otherwise, remove it </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dec</em>&nbsp;</td><td>decrease the parent nlink count if true</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for repaired successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if nothing to be repaired </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l01990">1990</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02615">dt_declare_delete()</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="dt__object_8h_source.html#l02292">dt_declare_ref_del()</a>, <a class="el" href="dt__object_8h_source.html#l02630">dt_delete()</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8h_source.html#l02305">dt_ref_del()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lfsck__internal_8h_source.html#l00058">LF_INCONSISTENT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01310">lfsck_object_locate()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00520">lfsck_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00669">lfsck_instance::li_next</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00112">LNTF_CHECK_LINKEA</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00893">lfsck_thread_info::lti_dt_rec</a>, <a class="el" href="lfsck__internal_8h_source.html#l00900">lfsck_thread_info::lti_llh</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l00334">lfsck_remove_dirent()</a>.</p>

</div>
</div>
<a class="anchor" id="abfc4c3f7a5a20c98a99c5bd1b963042e"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_scan_shard" ref="abfc4c3f7a5a20c98a99c5bd1b963042e" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *child)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_scan_shard </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>child</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scan the shard of a striped directory for name hash verification. </p>
<p>During the first-stage scanning, if the LFSCK cannot make sure whether the shard of a stripe directory contains valid slave LMV EA or not, then it will skip the name hash verification for this shard temporarily, and record the shard's FID in the LFSCK tracing file. As the LFSCK processing, the slave LMV EA may has been verified/fixed by LFSCK instance on master. Then in the second-stage scanning, the shard will be re-scanned, and for every name entry under the shard, the name hash will be verified, and for unmatched name entry, the LFSCK will try to fix it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>child</em>&nbsp;</td><td>pointer to the directory object to be handled</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for scanning successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for the scanning is paused </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">1545</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__fail_8h_source.html#l00139">CFS_FAIL_TIMEOUT</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00058">LF_INCONSISTENT</a>, <a class="el" href="lfsck__lib_8c_source.html#l01857">lfsck_control_speed()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00910">lfsck_is_valid_slave_name_entry()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">lfsck_lmv_put()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00042">lfsck_unpack_ent()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00713">lfsck_instance::li_args_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00139">lfsck_namespace::ln_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00271">lfsck_namespace::ln_name_hash_repaired</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00875">lfsck_thread_info::lti_key</a>, <a class="el" href="lfsck__internal_8h_source.html#l00896">lfsck_thread_info::lti_lmv</a>, <a class="el" href="lustre__idl_8h_source.html#l00888">LUDA_VERIFY</a>, <a class="el" href="lustre__idl_8h_source.html#l00886">LUDA_VERIFY_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l01072">name_is_dot_or_dotdot()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00525">OBD_FAIL_LFSCK_DELAY3</a>, <a class="el" href="obd__support_8h_source.html#l00530">OBD_FAIL_LFSCK_FATAL2</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a12be37000161af347ac970c78a35db56"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_setup" ref="a12be37000161af347ac970c78a35db56" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l06514">6514</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8c_source.html#l00594">dt_lfsck_features</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00543">lfsck_component::lc_file_disk</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00553">lfsck_component::lc_file_size</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00529">lfsck_component::lc_link</a>, <a class="el" href="lfsck__internal_8h_source.html#l00532">lfsck_component::lc_link_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00539">lfsck_component::lc_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__internal_8h_source.html#l00535">lfsck_component::lc_ref</a>, <a class="el" href="lfsck__internal_8h_source.html#l00534">lfsck_component::lc_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00540">lfsck_component::lc_sub_trace_objs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lfsck__lib_8c_source.html#l01929">lfsck_assistant_data_init()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00318">lfsck_component_cleanup()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lustre__disk_8h_source.html#l00076">LFSCK_NAMESPACE</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00495">lfsck_namespace_init()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00336">lfsck_namespace_load()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00460">lfsck_namespace_load_sub_trace_files()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03699">lfsck_namespace_reset()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00520">LFSCK_STF_COUNT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00171">LFSCK_TYPE_NAMESPACE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00652">lfsck_instance::li_list_idle</a>, <a class="el" href="lfsck__internal_8h_source.html#l00641">lfsck_instance::li_list_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00674">lfsck_instance::li_local_root_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00673">lfsck_instance::li_los</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00136">lfsck_namespace::ln_status</a>, <a class="el" href="local__storage_8c_source.html#l00519">local_index_find_or_create()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00080">LS_COMPLETED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00094">LS_CRASHED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00083">LS_FAILED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00069">LS_INIT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00090">LS_PAUSED</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00073">LS_SCANNING_PHASE1</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00077">LS_SCANNING_PHASE2</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00086">LS_STOPPED</a>, <a class="el" href="lfsck__internal_8h_source.html#l00524">lfsck_sub_trace_obj::lsto_mutex</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a386b5a0ea946859c7ed3d9f2e7175af5"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_striped_dir_rescan" ref="a386b5a0ea946859c7ed3d9f2e7175af5" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_namespace_req *lnr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_striped_dir_rescan </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__namespace__req.html">lfsck_namespace_req</a> *&nbsp;</td>
          <td class="paramname"> <em>lnr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Double scan the striped directory or the shard. </p>
<p>All the shards' under the given striped directory or its shard have been scanned, the LFSCK has got the global knownledge about the LMV EA consistency.</p>
<p>If the target is one shard of a striped directory, then only needs to update related tracing file.</p>
<p>If the target is the master MDT-object of a striped directory, then the LFSCK will make the decision about whether the master LMV EA is invalid or not, and repair it if inconsistenct; for every shard of the striped directory, whether the slave LMV EA is invalid or not, and repair it if inconsistent.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lnr</em>&nbsp;</td><td>pointer to the namespace request that contains the striped directory or the shard</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">1817</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="mmap__sanity_8c_source.html#l00053">dir</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="seq__range_8h_source.html#l00091">fld_range_set_mdt()</a>, <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00757">lfsck_assistant_req::lar_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00542">lfsck_component::lc_file_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03472">LE_SET_LMV_SLAVE</a>, <a class="el" href="lustre__idl_8h_source.html#l03480">LEF_RECHECK_NAME_HASH</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="lfsck__lib_8c_source.html#l01982">lfsck_assistant_object_load()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01226">lfsck_dev_site()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01423">lfsck_links_read()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00564">LFSCK_LMV_MAX_STRIPES</a>, <a class="el" href="lfsck__internal_8h_source.html#l01094">lfsck_name_get_const()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01910">lfsck_namespace_rebuild_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01296">lfsck_object_find_bottom_nowait()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, <a class="el" href="linkea_8c_source.html#l00034">linkea_data_new()</a>, <a class="el" href="linkea_8c_source.html#l00171">linkea_links_find()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00597">lfsck_lmv::ll_exit_value</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_failed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00600">lfsck_lmv::ll_hash_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_ignore</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_inline</a>, <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_slave</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_updated</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_verified</a>, <a class="el" href="lfsck__internal_8h_source.html#l00608">lfsck_lmv::ll_lslr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00599">lfsck_lmv::ll_max_filled_off</a>, <a class="el" href="lfsck__internal_8h_source.html#l00598">lfsck_lmv::ll_max_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02617">LMV_HASH_FLAG_BAD_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02606">LMV_HASH_TYPE_MASK</a>, <a class="el" href="lustre__user_8h_source.html#l00447">LMV_HASH_TYPE_UNKNOWN</a>, <a class="el" href="lustre__lmv_8h_source.html#l00173">lmv_is_known_hash_type()</a>, <a class="el" href="lustre__idl_8h_source.html#l02588">lmv_mds_md_v1::lmv_layout_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00214">lfsck_namespace::ln_dangling_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00196">lfsck_namespace::ln_dirent_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00199">lfsck_namespace::ln_linkea_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00246">lfsck_namespace::ln_striped_dirs_failed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00243">lfsck_namespace::ln_striped_dirs_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00240">lfsck_namespace::ln_striped_dirs_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00262">lfsck_namespace::ln_striped_shards_failed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00259">lfsck_namespace::ln_striped_shards_repaired</a>, <a class="el" href="lfsck__internal_8h_source.html#l00256">lfsck_namespace::ln_striped_shards_scanned</a>, <a class="el" href="lfsck__internal_8h_source.html#l00763">lfsck_namespace_req::lnr_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00761">lfsck_namespace_req::lnr_lar</a>, <a class="el" href="lfsck__internal_8h_source.html#l00762">lfsck_namespace_req::lnr_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00769">lfsck_namespace_req::lnr_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00767">lfsck_namespace_req::lnr_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00117">LNTF_RECHECK_NAME_HASH</a>, <a class="el" href="lfsck__internal_8h_source.html#l00116">LNTF_UNCERTAIN_LMV</a>, <a class="el" href="lfsck__internal_8h_source.html#l00574">LSLF_BAD_INDEX1</a>, <a class="el" href="lfsck__internal_8h_source.html#l00571">LSLF_BAD_INDEX2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00573">LSLF_DANGLING</a>, <a class="el" href="lfsck__internal_8h_source.html#l00572">LSLF_NO_LMVEA</a>, <a class="el" href="lfsck__internal_8h_source.html#l00570">LSLF_NONE</a>, <a class="el" href="lfsck__internal_8h_source.html#l00585">lfsck_slave_lmv_rec::lslr_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00589">lfsck_slave_lmv_rec::lslr_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00588">lfsck_slave_lmv_rec::lslr_hash_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l00587">lfsck_slave_lmv_rec::lslr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00586">lfsck_slave_lmv_rec::lslr_stripe_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00364">lfsck_assistant_object::lso_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00861">lfsck_thread_info::lti_big_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00897">lfsck_thread_info::lti_lmv2</a>, <a class="el" href="lfsck__internal_8h_source.html#l00895">lfsck_thread_info::lti_range</a>, <a class="el" href="lfsck__internal_8h_source.html#l00876">lfsck_thread_info::lti_tmpbuf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00877">lfsck_thread_info::lti_tmpbuf2</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__fid_8h_source.html#l00458">seq_server_site::ss_server_fld</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9e1b6d4d1e59c15c70f27ee5e2aa804"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_trace_update" ref="ad9e1b6d4d1e59c15c70f27ee5e2aa804" args="(const struct lu_env *env, struct lfsck_component *com, const struct lu_fid *fid, const __u8 flags, bool add)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_trace_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const __u8&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>add</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the namespace LFSCK trace file for the given . </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>the fid which flags to be updated in the lfsck trace file </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>add</em>&nbsp;</td><td>true if add new flags, otherwise remove flags</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success or nothing to be done </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l00525">525</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02615">dt_declare_delete()</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="dt__object_8h_source.html#l02630">dt_delete()</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00779">fid_cpu_to_be()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00540">lfsck_component::lc_sub_trace_objs</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01453">lfsck_sub_trace_file_fid2idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00524">lfsck_sub_trace_obj::lsto_mutex</a>, <a class="el" href="lfsck__internal_8h_source.html#l00523">lfsck_sub_trace_obj::lsto_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00864">lfsck_thread_info::lti_fid3</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03670">lfsck_namespace_check_for_double_scan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l00485">lfsck_record_lmv()</a>.</p>

</div>
</div>
<a class="anchor" id="a12465f080d74c44e795ab94ce3b12f29"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_update_lmv" ref="a12465f080d74c44e795ab94ce3b12f29" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *obj, struct lmv_mds_md_v1 *lmv, bool locked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_update_lmv </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>locked</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the object's LMV EA with the given . </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the object which LMV EA will be updated </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lmv</em>&nbsp;</td><td>pointer to buffer holding the new LMV EA </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>locked</em>&nbsp;</td><td>whether the caller has held ldlm lock on the  or not</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for nothing to be done </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>if updated successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">993</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00415">lfsck_ibits_lock()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01206">lfsck_is_dead_obj()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01468">lfsck_lmv_header_cpu_to_le()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lfsck__internal_8h_source.html#l00858">lfsck_thread_info::lti_buf</a>, <a class="el" href="lfsck__internal_8h_source.html#l00899">lfsck_thread_info::lti_lmv4</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>.</p>

</div>
</div>
<a class="anchor" id="acc843dd85fecd4c3fdd9a05361412a9f"></a><!-- doxytag: member="lfsck_internal.h::lfsck_namespace_verify_stripe_slave" ref="acc843dd85fecd4c3fdd9a05361412a9f" args="(const struct lu_env *env, struct lfsck_component *com, struct dt_object *obj, struct lfsck_lmv *llmv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_namespace_verify_stripe_slave </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lmv.html">lfsck_lmv</a> *&nbsp;</td>
          <td class="paramname"> <em>llmv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verify the slave object's (of striped directory) LMV EA. </p>
<p>For the slave object of a striped directory, before traversing the shard the LFSCK will verify whether its slave LMV EA matches its parent's master LMV EA or not.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>com</em>&nbsp;</td><td>pointer to the lfsck component </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the object which LMV EA will be checked </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>llmv</em>&nbsp;</td><td>pointer to buffer holding the slave LMV EA</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number if nothing to be done </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">1672</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lfsck__lib_8c_source.html#l00543">dotdot</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lustre__idl_8h_source.html#l03479">LEF_SET_LMV_ALL</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00277">lfsck_is_valid_slave_lmv()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06404">lfsck_links_get_first()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">lfsck_read_stripe_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00593">lfsck_lmv::ll_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00601">lfsck_lmv::ll_lmv_verified</a>, <a class="el" href="lustre__idl_8h_source.html#l02617">LMV_HASH_FLAG_BAD_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02606">LMV_HASH_TYPE_MASK</a>, <a class="el" href="lustre__user_8h_source.html#l00447">LMV_HASH_TYPE_UNKNOWN</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lfsck__internal_8h_source.html#l00116">LNTF_UNCERTAIN_LMV</a>, <a class="el" href="lfsck__internal_8h_source.html#l00864">lfsck_thread_info::lti_fid3</a>, <a class="el" href="lfsck__internal_8h_source.html#l00875">lfsck_thread_info::lti_key</a>, <a class="el" href="lfsck__internal_8h_source.html#l00896">lfsck_thread_info::lti_lmv</a>, <a class="el" href="lfsck__internal_8h_source.html#l00877">lfsck_thread_info::lti_tmpbuf2</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l03837">lfsck_namespace_open_dir()</a>.</p>

</div>
</div>
<a class="anchor" id="a34bbe61a915878b2496b4571468f0170"></a><!-- doxytag: member="lfsck_internal.h::lfsck_obj2dev" ref="a34bbe61a915878b2496b4571468f0170" args="(struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__device.html">dt_device</a>* lfsck_obj2dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01078">1078</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01576">__lfsck_layout_update_pfid()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00202">lfsck_disable_master_lmv()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02071">lfsck_layout_conflict_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05734">lfsck_layout_destroy_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01038">lfsck_layout_lastid_create()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02169">lfsck_layout_recreate_lovea()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02625">lfsck_layout_repair_dangling()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03014">lfsck_layout_repair_owner()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02732">lfsck_layout_repair_unmatched_pair()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00883">lfsck_layout_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00714">lfsck_namespace_links_remove()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01910">lfsck_namespace_rebuild_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01498">lfsck_namespace_shrink_linkea()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00369">lfsck_namespace_store()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00993">lfsck_namespace_update_lmv()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01310">lfsck_object_locate()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06441">lfsck_update_name_entry()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="aeaef5d2115f85ec66a66efadc2a49d63"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_find_bottom" ref="aeaef5d2115f85ec66a66efadc2a49d63" args="(const struct lu_env *env, struct lfsck_instance *lfsck, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_object_find_bottom </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01283">1283</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01254">lfsck_find_dev_by_fid()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l01982">lfsck_assistant_object_load()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03856">lfsck_layout_slave_repair_pfid()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05977">lfsck_namespace_double_scan_one_trace_file()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00334">lfsck_remove_dirent()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a438e8c3a8e6ddb4b96abb4f3e8b7724f"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_find_bottom_nowait" ref="a438e8c3a8e6ddb4b96abb4f3e8b7724f" args="(const struct lu_env *env, struct lfsck_instance *lfsck, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_object_find_bottom_nowait </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01296">1296</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01254">lfsck_find_dev_by_fid()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01237">lfsck_object_find_by_dev_nowait()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d3ee0baebb2ac9ddf27235090be1e37"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_find_by_dev" ref="a1d3ee0baebb2ac9ddf27235090be1e37" args="(const struct lu_env *env, struct dt_device *dev, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_object_find_by_dev </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01247">1247</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01774">dt2lu_dev()</a>, <a class="el" href="dt__object_8h_source.html#l01779">lu2dt()</a>, and <a class="el" href="lu__object_8c_source.html#l00808">lu_object_find_slice()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02441">lfsck_layout_scan_orphan_one()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01621">lfsck_layout_update_pfid()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05560">lfsck_namespace_scan_local_lpf_one()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>.</p>

</div>
</div>
<a class="anchor" id="a872a96eba836a4991b1b5b6e621228ae"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_find_by_dev_nowait" ref="a872a96eba836a4991b1b5b6e621228ae" args="(const struct lu_env *env, struct dt_device *dev, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_object_find_by_dev_nowait </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01237">1237</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01774">dt2lu_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lu__object_8h_source.html#l00175">LOC_F_NOWAIT</a>, <a class="el" href="lu__object_8h_source.html#l00187">lu_object_conf::loc_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00894">lfsck_thread_info::lti_conf</a>, <a class="el" href="dt__object_8h_source.html#l01779">lu2dt()</a>, and <a class="el" href="lu__object_8c_source.html#l00808">lu_object_find_slice()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l01296">lfsck_object_find_bottom_nowait()</a>.</p>

</div>
</div>
<a class="anchor" id="abd2599948f7713e824a60303245df1f2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_get" ref="abd2599948f7713e824a60303245df1f2" args="(struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_object_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01213">1213</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">lfsck_namespace_notify_lmv_master_local()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>.</p>

</div>
</div>
<a class="anchor" id="ab87e385c443875b600b4e1a966b5d9a0"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_locate" ref="ab87e385c443875b600b4e1a966b5d9a0" args="(struct dt_device *dev, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* lfsck_object_locate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01310">1310</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lu__object_8h_source.html#l00275">lu_device::ld_type</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="dt__object_8h_source.html#l01779">lu2dt()</a>, <a class="el" href="lu__object_8c_source.html#l01329">lu_object_locate()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>.</p>

</div>
</div>
<a class="anchor" id="ac0be804c9127f9c877d7af9a6d1b4d1a"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_put" ref="ac0be804c9127f9c877d7af9a6d1b4d1a" args="(const struct lu_env *env, struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_object_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01219">1219</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l01982">lfsck_assistant_object_load()</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00158">lfsck_bookmark_setup()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01613">lfsck_instance_cleanup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03225">lfsck_layout_assistant_handler_p1()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00202">lfsck_layout_assistant_req_fini()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01407">lfsck_layout_get_def_stripesize()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01222">lfsck_layout_lastid_load()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02829">lfsck_layout_repair_multiple_references()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02511">lfsck_layout_scan_orphan()</a>, <a class="el" href="lfsck__layout_8c_source.html#l02441">lfsck_layout_scan_orphan_one()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05556">lfsck_layout_setup()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05129">lfsck_layout_slave_quit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03856">lfsck_layout_slave_repair_pfid()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01621">lfsck_layout_update_pfid()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00155">lfsck_lmv_put()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05977">lfsck_namespace_double_scan_one_trace_file()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02604">lfsck_namespace_dsd_multiple()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00460">lfsck_namespace_load_sub_trace_files()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03699">lfsck_namespace_reset()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05560">lfsck_namespace_scan_local_lpf_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06514">lfsck_namespace_setup()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01817">lfsck_namespace_striped_dir_rescan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05939">lfsck_orphan_it_next()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l00585">lfsck_rbtree_cleanup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00334">lfsck_remove_dirent()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cd3909a5fad1d7d7b7eb60efa6771c2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_object_type" ref="a5cd3909a5fad1d7d7b7eb60efa6771c2" args="(const struct dt_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static umode_t lfsck_object_type </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01201">1201</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, and <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l03085">lfsck_layout_check_parent()</a>, <a class="el" href="lfsck__layout_8c_source.html#l03704">lfsck_layout_master_check_pairs()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04370">lfsck_layout_master_exec_oit()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03670">lfsck_namespace_check_for_double_scan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00948">lfsck_namespace_check_name()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03220">lfsck_namespace_double_scan_one()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04005">lfsck_namespace_exec_oit()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05560">lfsck_namespace_scan_local_lpf_one()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00132">lfsck_needs_scan_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00096">lfsck_parent_fid()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>.</p>

</div>
</div>
<a class="anchor" id="ae12b9de56925df21d23623b31717bb38"></a><!-- doxytag: member="lfsck_internal.h::lfsck_open_dir" ref="ae12b9de56925df21d23623b31717bb38" args="(const struct lu_env *env, struct lfsck_instance *lfsck, __u64 cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_open_dir </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00337">337</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a74b9db7e1791f6accf99c80a3a0c43e2">dt_index_operations::dt_it_ops::init</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00541">lfsck_component::lc_ops</a>, <a class="el" href="lfsck__engine_8c_source.html#l00297">lfsck_close_dir()</a>, <a class="el" href="structlfsck__operations.html#a0f17b6351c430903278a1ee3b87457a3">lfsck_operations::lfsck_open_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00713">lfsck_instance::li_args_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00707">lfsck_instance::li_cookie_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00646">lfsck_instance::li_list_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00635">lfsck_instance::li_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00516">lfsck_exec_oit()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00811">lfsck_master_oit_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="add754bfac6a9b0fd7ed2eb0796537fa1"></a><!-- doxytag: member="lfsck_internal.h::lfsck_phase2_next_ready" ref="add754bfac6a9b0fd7ed2eb0796537fa1" args="(struct lfsck_assistant_data *lad)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool lfsck_phase2_next_ready </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__assistant__data.html">lfsck_assistant_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lad</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01396">1396</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00820">lfsck_assistant_data::lad_mdt_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00811">lfsck_assistant_data::lad_ost_phase1_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00814">lfsck_assistant_data::lad_ost_phase2_list</a>, and <a class="el" href="list_8h_source.html#l00161">list_empty()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__layout_8c_source.html#l05162">lfsck_layout_master_in_notify()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="a64065c8a338ab8c1c8a96b02a81af111"></a><!-- doxytag: member="lfsck_internal.h::lfsck_pos_dump" ref="a64065c8a338ab8c1c8a96b02a81af111" args="(struct seq_file *m, struct lfsck_position *pos, const char *prefix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_pos_dump </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01779">1779</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e65e3b2aaca23ac9b822723a0ea82c4"></a><!-- doxytag: member="lfsck_internal.h::lfsck_pos_fill" ref="a3e65e3b2aaca23ac9b822723a0ea82c4" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lfsck_position *pos, bool init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_pos_fill </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>init</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01796">1796</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="structdt__index__operations.html#a16b19879e71b5cb1aaa459d731d580cb">dt_index_operations::dio_it</a>, <a class="el" href="dt__object_8h_source.html#l01753">dt_object::do_index_ops</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_current_oit_processed</a>, <a class="el" href="lfsck__internal_8h_source.html#l00698">lfsck_instance::li_di_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00695">lfsck_instance::li_di_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00692">lfsck_instance::li_obj_dir</a>, <a class="el" href="lfsck__internal_8h_source.html#l00689">lfsck_instance::li_obj_oit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l00997">MDS_DIR_END_OFF</a>, <a class="el" href="structdt__index__operations_1_1dt__it__ops.html#a2966e2ef5ccc21df92b6a31b7c4a56f5">dt_index_operations::dt_it_ops::store</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00389">lfsck_checkpoint()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00238">lfsck_namespace_record_failure()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00570">lfsck_post()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="ad88f5d82295cfd4bf98f4692b53dc51a"></a><!-- doxytag: member="lfsck_internal.h::lfsck_pos_is_eq" ref="ad88f5d82295cfd4bf98f4692b53dc51a" args="(const struct lfsck_position *pos1, const struct lfsck_position *pos2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_pos_is_eq </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01153">1153</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>, and <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l00238">lfsck_namespace_record_failure()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="a54c73eedbd176af3251cd7ca60b3de43"></a><!-- doxytag: member="lfsck_internal.h::lfsck_pos_is_zero" ref="a54c73eedbd176af3251cd7ca60b3de43" args="(const struct lfsck_position *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_pos_is_zero </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01148">1148</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03904">lfsck_namespace_prep()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00238">lfsck_namespace_record_failure()</a>, and <a class="el" href="lfsck__engine_8c_source.html#l00413">lfsck_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="ad85b99e001d4f19c2c3a1bee02254cba"></a><!-- doxytag: member="lfsck_internal.h::lfsck_pos_set_zero" ref="ad85b99e001d4f19c2c3a1bee02254cba" args="(struct lfsck_position *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_pos_set_zero </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01143">1143</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l03904">lfsck_namespace_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="aa53b7f7188c062313cd33afb8d157988"></a><!-- doxytag: member="lfsck_internal.h::lfsck_position_cpu_to_le" ref="aa53b7f7188c062313cd33afb8d157988" args="(struct lfsck_position *des, struct lfsck_position *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_position_cpu_to_le </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>des</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01193">1193</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l00169">lfsck_namespace_cpu_to_le()</a>.</p>

</div>
</div>
<a class="anchor" id="a60b0b56361fb0605f39ac0b2dcccdea4"></a><!-- doxytag: member="lfsck_internal.h::lfsck_position_le_to_cpu" ref="a60b0b56361fb0605f39ac0b2dcccdea4" args="(struct lfsck_position *des, struct lfsck_position *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_position_le_to_cpu </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>des</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__position.html">lfsck_position</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01185">1185</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lfsck__internal_8h_source.html#l00079">lfsck_position::lp_dir_cookie</a>, <a class="el" href="lfsck__internal_8h_source.html#l00076">lfsck_position::lp_dir_parent</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00073">lfsck_position::lp_oit_cookie</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l00100">lfsck_namespace_le_to_cpu()</a>.</p>

</div>
</div>
<a class="anchor" id="a6313d77f10125f9ac63084e00f94ec26"></a><!-- doxytag: member="lfsck_internal.h::lfsck_post_generic" ref="a6313d77f10125f9ac63084e00f94ec26" args="(const struct lu_env *env, struct lfsck_component *com, int *result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_post_generic </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02551">2551</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00836">lfsck_assistant_data::lad_post_result</a>, <a class="el" href="lfsck__internal_8h_source.html#l00805">lfsck_assistant_data::lad_req_list</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_post</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04625">lfsck_layout_master_post()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04152">lfsck_namespace_post()</a>.</p>

</div>
</div>
<a class="anchor" id="ad74ecfc36f73d5b86c4e04bd55cb368d"></a><!-- doxytag: member="lfsck_internal.h::lfsck_query_all" ref="ad74ecfc36f73d5b86c4e04bd55cb368d" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_query_all </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02420">2420</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="bitmap_8h_source.html#l00116">cfs_foreach_bit</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00739">lfsck_async_interpret_args::laia_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00742">lfsck_async_interpret_args::laia_lr</a>, <a class="el" href="lfsck__internal_8h_source.html#l00741">lfsck_async_interpret_args::laia_ltd</a>, <a class="el" href="lfsck__internal_8h_source.html#l00740">lfsck_async_interpret_args::laia_ltds</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00561">lfsck_component::lc_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03464">LE_QUERY</a>, <a class="el" href="lustre__idl_8h_source.html#l03481">LEF_QUERY_ALL</a>, <a class="el" href="lustre__idl_8h_source.html#l03476">LEF_TO_OST</a>, <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02369">lfsck_async_request()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l02727">LFSCK_QUERY</a>, <a class="el" href="lfsck__lib_8c_source.html#l00098">lfsck_reset_ltd_status()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01326">lfsck_tgt_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="lfsck__internal_8h_source.html#l00701">lfsck_instance::li_ost_descs</a>, <a class="el" href="lustre__idl_8h_source.html#l03440">lfsck_request::lr_active</a>, <a class="el" href="lustre__idl_8h_source.html#l03430">lfsck_request::lr_event</a>, <a class="el" href="lustre__idl_8h_source.html#l03432">lfsck_request::lr_flags</a>, <a class="el" href="lfsck__internal_8h_source.html#l00450">lfsck_tgt_desc::ltd_exp</a>, <a class="el" href="lfsck__internal_8h_source.html#l00460">lfsck_tgt_desc::ltd_index</a>, <a class="el" href="lfsck__internal_8h_source.html#l00484">lfsck_tgt_descs::ltd_rw_sem</a>, <a class="el" href="lfsck__internal_8h_source.html#l00478">lfsck_tgt_descs::ltd_tgts_bitmap</a>, <a class="el" href="lfsck__internal_8h_source.html#l00879">lfsck_thread_info::lti_laia</a>, <a class="el" href="lfsck__internal_8h_source.html#l00878">lfsck_thread_info::lti_lr</a>, <a class="el" href="client_8c_source.html#l00913">ptlrpc_prep_set()</a>, <a class="el" href="client_8c_source.html#l00973">ptlrpc_set_destroy()</a>, <a class="el" href="client_8c_source.html#l02260">ptlrpc_set_wait()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05385">lfsck_layout_query_all()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04687">lfsck_namespace_query_all()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6b8e589e419e7ecddba665d1ab21a53"></a><!-- doxytag: member="lfsck_internal.h::lfsck_quit_generic" ref="aa6b8e589e419e7ecddba665d1ab21a53" args="(const struct lu_env *env, struct lfsck_component *com)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_quit_generic </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02613">2613</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01537">thread_is_init()</a>, and <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l05087">lfsck_layout_master_quit()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04443">lfsck_namespace_quit()</a>.</p>

</div>
</div>
<a class="anchor" id="a248445b5a863838c6de16febb9ff50b0"></a><!-- doxytag: member="lfsck_internal.h::lfsck_read_stripe_lmv" ref="a248445b5a863838c6de16febb9ff50b0" args="(const struct lu_env *env, struct dt_object *obj, struct lmv_mds_md_v1 *lmv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_read_stripe_lmv </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l00841">841</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02165">dt_read_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02185">dt_read_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02588">dt_xattr_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01112">lfsck_buf_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01458">lfsck_lmv_header_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00225">lfsck_load_stripe_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00948">lfsck_namespace_check_name()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01264">lfsck_namespace_notify_lmv_master_local()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01359">lfsck_namespace_set_lmv_master()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>.</p>

</div>
</div>
<a class="anchor" id="a3207c9708a433b4dbf655915841b8b4b"></a><!-- doxytag: member="lfsck_internal.h::lfsck_set_param" ref="a3207c9708a433b4dbf655915841b8b4b" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct lfsck_start *start, bool reset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_set_param </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start.html">lfsck_start</a> *&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>reset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__bookmark_8c_source.html#l00203">203</a> of file <a class="el" href="lfsck__bookmark_8c_source.html">lfsck_bookmark.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l01830">__lfsck_set_speed()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00096">lfsck_bookmark::lb_async_windows</a>, <a class="el" href="lfsck__internal_8h_source.html#l00090">lfsck_bookmark::lb_param</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00183">LFSCK_ASYNC_WIN_DEFAULT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00184">LFSCK_ASYNC_WIN_MAX</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00181">LFSCK_SPEED_NO_LIMIT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_drop_dryrun</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00145">LPF_ALL_TGT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00157">LPF_CREATE_MDTOBJ</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00154">LPF_CREATE_OSTOBJ</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00142">LPF_DRYRUN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00139">LPF_FAILOUT</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00151">LPF_OST_ORPHAN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00214">lfsck_start::ls_async_windows</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00211">lfsck_start::ls_flags</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00202">lfsck_start::ls_speed_limit</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00199">lfsck_start::ls_valid</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00191">LSV_ASYNC_WINDOWS</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00193">LSV_CREATE_MDTOBJ</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00192">LSV_CREATE_OSTOBJ</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00190">LSV_DRYRUN</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00189">LSV_ERROR_HANDLE</a>, and <a class="el" href="lustre__lfsck__user_8h_source.html#l00188">LSV_SPEED_LIMIT</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04124">lfsck_layout_master_prep()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04015">lfsck_layout_prep()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l03904">lfsck_namespace_prep()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a85d16d415e427fa3c8d7aa008453644b"></a><!-- doxytag: member="lfsck_internal.h::lfsck_shard_name_to_index" ref="a85d16d415e427fa3c8d7aa008453644b" args="(const struct lu_env *env, const char *name, int namelen, __u16 type, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_shard_name_to_index </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parse the shard's index from the given shard name. </p>
<p>The valid shard name/type should be: 1) The type must be S_IFDIR 2) The name should be $FID:$index 3) the index should within valid range.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the shard name </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>namelen</em>&nbsp;</td><td>the name length </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>the entry's type </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>the entry's FID</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>or positive number for the index from the name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__striped__dir_8c_source.html#l00880">880</a> of file <a class="el" href="lfsck__striped__dir_8c_source.html">lfsck_striped_dir.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00564">LFSCK_LMV_MAX_STRIPES</a>, <a class="el" href="lfsck__internal_8h_source.html#l00877">lfsck_thread_info::lti_tmpbuf2</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01089">lfsck_allow_regenerate_master_lmv()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l00948">lfsck_namespace_check_name()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02328">lfsck_namespace_dsd_single()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b1abf8fc2b212540452dffbcf53f5e2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_start_assistant" ref="a9b1abf8fc2b212540452dffbcf53f5e2" args="(const struct lu_env *env, struct lfsck_component *com, struct lfsck_start_param *lsp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_start_assistant </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__component.html">lfsck_component</a> *&nbsp;</td>
          <td class="paramname"> <em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__start__param.html">lfsck_start_param</a> *&nbsp;</td>
          <td class="paramname"> <em>lsp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l02484">2484</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lfsck__internal_8h_source.html#l00842">lfsck_assistant_data::lad_advance_lock</a>, <a class="el" href="lfsck__internal_8h_source.html#l00835">lfsck_assistant_data::lad_assistant_status</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_exit</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_in_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00825">lfsck_assistant_data::lad_name</a>, <a class="el" href="lfsck__internal_8h_source.html#l00836">lfsck_assistant_data::lad_post_result</a>, <a class="el" href="lfsck__internal_8h_source.html#l00826">lfsck_assistant_data::lad_thread</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_double_scan</a>, <a class="el" href="lfsck__internal_8h_source.html#l00837">lfsck_assistant_data::lad_to_post</a>, <a class="el" href="lfsck__internal_8h_source.html#l00544">lfsck_component::lc_data</a>, <a class="el" href="lfsck__internal_8h_source.html#l00538">lfsck_component::lc_lfsck</a>, <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01919">lfsck_thread_args_fini()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01893">lfsck_thread_args_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00659">lfsck_instance::li_thread</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04124">lfsck_layout_master_prep()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l03904">lfsck_namespace_prep()</a>.</p>

</div>
</div>
<a class="anchor" id="aece39034244d13590528f27d9f97e4a2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_sub_trace_file_fid2idx" ref="aece39034244d13590528f27d9f97e4a2" args="(const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lfsck_sub_trace_file_fid2idx </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01453">1453</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00520">LFSCK_STF_COUNT</a>.</p>

<p>Referenced by <a class="el" href="lfsck__namespace_8c_source.html#l06106">lfsck_namespace_assistant_handler_p2()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04473">lfsck_namespace_in_notify()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02853">lfsck_namespace_repair_nlink()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05560">lfsck_namespace_scan_local_lpf_one()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l00525">lfsck_namespace_trace_update()</a>.</p>

</div>
</div>
<a class="anchor" id="afc488a07d39217283f875a850e9d81b2"></a><!-- doxytag: member="lfsck_internal.h::lfsck_tgt_get" ref="afc488a07d39217283f875a850e9d81b2" args="(struct lfsck_tgt_descs *ltds, __u32 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a>* lfsck_tgt_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__descs.html">lfsck_tgt_descs</a> *&nbsp;</td>
          <td class="paramname"> <em>ltds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01326">1326</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00494">lfsck_ltd2tgt()</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00459">lfsck_tgt_desc::ltd_ref</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01900">lfsck_layout_master_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02848">lfsck_start_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02778">lfsck_stop_all()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b98305b4735183505e40791dc33c88f"></a><!-- doxytag: member="lfsck_internal.h::lfsck_tgt_put" ref="a6b98305b4735183505e40791dc33c88f" args="(struct lfsck_tgt_desc *ltd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lfsck_tgt_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__tgt__desc.html">lfsck_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ltd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01338">1338</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l00459">lfsck_tgt_desc::ltd_ref</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03661">lfsck_add_target()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01248">lfsck_assistant_notify_others()</a>, <a class="el" href="lfsck__engine_8c_source.html#l01131">lfsck_assistant_query_others()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02352">lfsck_async_interpret()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02021">lfsck_async_interpret_common()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03710">lfsck_del_target()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03807">lfsck_exit()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01900">lfsck_layout_master_conditional_destroy()</a>, <a class="el" href="lfsck__layout_8c_source.html#l04159">lfsck_layout_scan_stripes()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01197">lfsck_namespace_notify_lmv_remote()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02420">lfsck_query_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02848">lfsck_start_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02778">lfsck_stop_all()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02259">lfsck_stop_notify()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00121">lfsck_tgt_descs_fini()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>.</p>

</div>
</div>
<a class="anchor" id="a46d16afd1ac6190eea05603982199cc7"></a><!-- doxytag: member="lfsck_internal.h::lfsck_thread_args_fini" ref="a46d16afd1ac6190eea05603982199cc7" args="(struct lfsck_thread_args *lta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_thread_args_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__thread__args.html">lfsck_thread_args</a> *&nbsp;</td>
          <td class="paramname"> <em>lta</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01919">1919</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__internal_8h_source.html#l01352">lfsck_component_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01389">lfsck_instance_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00751">lfsck_thread_args::lta_com</a>, <a class="el" href="lfsck__internal_8h_source.html#l00749">lfsck_thread_args::lta_env</a>, <a class="el" href="lfsck__internal_8h_source.html#l00750">lfsck_thread_args::lta_lfsck</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l01543">lfsck_assistant_engine()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="lfsck__lib_8c_source.html#l02937">lfsck_start()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l02484">lfsck_start_assistant()</a>.</p>

</div>
</div>
<a class="anchor" id="a20d93b09f0f3c750a8906c1d08a97e9e"></a><!-- doxytag: member="lfsck_internal.h::lfsck_time_dump" ref="a20d93b09f0f3c750a8906c1d08a97e9e" args="(struct seq_file *m, __u64 time, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_time_dump </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01767">1767</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04750">lfsck_layout_dump()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b430a41ada3bb7bfa164b3e6763e090"></a><!-- doxytag: member="lfsck_internal.h::lfsck_unlock" ref="a3b430a41ada3bb7bfa164b3e6763e090" args="(struct lfsck_lock_handle *llh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfsck_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release the the compound ibits locks. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>llh</em>&nbsp;</td><td>pointer to the <a class="el" href="structlfsck__lock__handle.html">lfsck_lock_handle</a> to be released </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00520">520</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00848">lfsck_lock_handle::llh_pdo_lh</a>, <a class="el" href="lfsck__internal_8h_source.html#l00850">lfsck_lock_handle::llh_pdo_mode</a>, <a class="el" href="lfsck__internal_8h_source.html#l00849">lfsck_lock_handle::llh_reg_lh</a>, and <a class="el" href="lfsck__internal_8h_source.html#l00851">lfsck_lock_handle::llh_reg_mode</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01092">lfsck_namespace_insert_normal()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01990">lfsck_namespace_repair_dirent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01624">lfsck_namespace_shrink_linkea_cond()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l06441">lfsck_update_name_entry()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d82da3d39b3f8ece030b7ebe9c795d8"></a><!-- doxytag: member="lfsck_internal.h::lfsck_unpack_ent" ref="a6d82da3d39b3f8ece030b7ebe9c795d8" args="(struct lu_dirent *ent, __u64 *cookie, __u16 *type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_unpack_ent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *&nbsp;</td>
          <td class="paramname"> <em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16 *&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__engine_8c_source.html#l00042">42</a> of file <a class="el" href="lfsck__engine_8c_source.html">lfsck_engine.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00908">lu_dirent::lde_attrs</a>, <a class="el" href="lustre__idl_8h_source.html#l00898">lu_dirent::lde_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00900">lu_dirent::lde_hash</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="lustre__idl_8h_source.html#l00902">lu_dirent::lde_reclen</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l00941">luda_type::lt_type</a>, <a class="el" href="lustre__idl_8h_source.html#l00871">LUDA_TYPE</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01089">lfsck_allow_regenerate_master_lmv()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00678">lfsck_master_dir_engine()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, and <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ab12cffcdd69732db02236b292c3e57"></a><!-- doxytag: member="lfsck_internal.h::lfsck_update_name_entry" ref="a3ab12cffcdd69732db02236b292c3e57" args="(const struct lu_env *env, struct lfsck_instance *lfsck, struct dt_object *dir, const char *name, const struct lu_fid *fid, __u32 type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_update_name_entry </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the object's name entry with the given FID. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dir</em>&nbsp;</td><td>pointer to the directory that holds the name entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the name for the entry to be updated </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>the new FID for the name entry referenced </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>the type for the name entry to be updated</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l06441">6441</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l02615">dt_declare_delete()</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="dt__object_8h_source.html#l02266">dt_declare_ref_add()</a>, <a class="el" href="dt__object_8h_source.html#l02630">dt_delete()</a>, <a class="el" href="dt__object_8h_source.html#l02497">dt_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02279">dt_ref_add()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00468">lfsck_lock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00520">lfsck_unlock()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00893">lfsck_thread_info::lti_dt_rec</a>, <a class="el" href="lfsck__internal_8h_source.html#l00900">lfsck_thread_info::lti_llh</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="rename__many_8c_source.html#l00056">stop</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l01149">lfsck_update_lpf_entry()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a10e7572a512be6782d27190bbe4f52cf"></a><!-- doxytag: member="lfsck_internal.h::lfsck_verify_linkea" ref="a10e7572a512be6782d27190bbe4f52cf" args="(const struct lu_env *env, struct dt_object *obj, const struct lu_name *cname, const struct lu_fid *pfid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_verify_linkea </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>cname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>pfid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verify the specified linkEA entry for the given directory object. </p>
<p>If the object has no such linkEA entry or it has more other linkEA entries, then re-generate the linkEA with the given information.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>pointer to the <a class="el" href="structdt__object.html">dt_object</a> to be handled </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cname</em>&nbsp;</td><td>the name for the child in the parent directory </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pfid</em>&nbsp;</td><td>the parent directory's FID for the linkEA</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__namespace_8c_source.html#l06325">6325</a> of file <a class="el" href="lfsck__namespace_8c_source.html">lfsck_namespace.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="dt__object_8h_source.html#l02559">dt_xattr_set()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00040">linkea_data::ld_leh</a>, <a class="el" href="lustre__idl_8h_source.html#l03675">link_ea_header::leh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03674">link_ea_header::leh_reccount</a>, <a class="el" href="lfsck__internal_8h_source.html#l01105">lfsck_buf_init()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01423">lfsck_links_read()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01078">lfsck_obj2dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="linkea_8c_source.html#l00113">linkea_add_buf()</a>, <a class="el" href="linkea_8c_source.html#l00034">linkea_data_new()</a>, <a class="el" href="linkea_8c_source.html#l00171">linkea_links_find()</a>, <a class="el" href="lu__object_8h_source.html#l00910">LU_XATTR_CREATE</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="rename__many_8c_source.html#l00056">stop</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l03474">lfsck_register()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>.</p>

</div>
</div>
<a class="anchor" id="a235b73ea0f2bfe50f7488ff8e3bf672a"></a><!-- doxytag: member="lfsck_internal.h::lfsck_verify_lpf" ref="a235b73ea0f2bfe50f7488ff8e3bf672a" args="(const struct lu_env *env, struct lfsck_instance *lfsck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfsck_verify_lpf </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlfsck__instance.html">lfsck_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>lfsck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verify the /ROOT/.lustre/lost+found/ directory. </p>
<p>/ROOT/.lustre/lost+found/ is a special directory to hold the objects that the LFSCK does not exactly know how to handle, such as orphans. So before the LFSCK scanning the system, the consistency of such directory needs to be verified firstly to allow the users to use it during the LFSCK.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lfsck</em>&nbsp;</td><td>pointer to the lfsck instance</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>positive</em>&nbsp;</td><td>number for uncertain inconsistency </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>for success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>error number on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l01371">1371</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00157">D_LFSCK</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8c_source.html#l00058">dt_key</a>, <a class="el" href="dt__object_8h_source.html#l02654">dt_lookup()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="dt__object_8h_source.html#l01795">dt_object_remote()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00477">fid_is_norm()</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lfsck__internal_8h_source.html#l00102">lfsck_bookmark::lb_lpf_fid</a>, <a class="el" href="lfsck__bookmark_8c_source.html#l00099">lfsck_bookmark_store()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01231">lfsck_dev_idx()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01138">lfsck_dto2fid()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01133">lfsck_lfsck2name()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00561">lfsck_lpf_remove_name_entry()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01094">lfsck_name_get_const()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01283">lfsck_object_find_bottom()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01247">lfsck_object_find_by_dev()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01219">lfsck_object_put()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01201">lfsck_object_type()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01088">lfsck_scan_lpf_bad_entries()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01326">lfsck_tgt_get()</a>, <a class="el" href="lfsck__internal_8h_source.html#l01338">lfsck_tgt_put()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l06325">lfsck_verify_linkea()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>, <a class="el" href="lfsck__internal_8h_source.html#l00681">lfsck_instance::li_bookmark_ram</a>, <a class="el" href="lfsck__internal_8h_source.html#l00670">lfsck_instance::li_bottom</a>, <a class="el" href="lfsck__internal_8h_source.html#l00678">lfsck_instance::li_lpf_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00679">lfsck_instance::li_lpf_root_obj</a>, <a class="el" href="lfsck__internal_8h_source.html#l00730">lfsck_instance::li_master</a>, <a class="el" href="lfsck__internal_8h_source.html#l00704">lfsck_instance::li_mdt_descs</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lfsck__internal_8h_source.html#l00448">lfsck_tgt_desc::ltd_tgt</a>, <a class="el" href="lfsck__internal_8h_source.html#l00862">lfsck_thread_info::lti_fid</a>, <a class="el" href="lfsck__internal_8h_source.html#l00863">lfsck_thread_info::lti_fid2</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="fid__lib_8c_source.html#l00096">LU_LPF_FID</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00093">LVLT_BY_BOOKMARK</a>, <a class="el" href="lfsck__lib_8c_source.html#l00094">LVLT_BY_NAMEENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>.</p>

</div>
</div>
<a class="anchor" id="ac71353e14cda7a003d491ffbb5f8a82c"></a><!-- doxytag: member="lfsck_internal.h::name_is_dot_or_dotdot" ref="ac71353e14cda7a003d491ffbb5f8a82c" args="(const char *name, int namelen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool name_is_dot_or_dotdot </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__internal_8h_source.html#l01072">1072</a> of file <a class="el" href="lfsck__internal_8h_source.html">lfsck_internal.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__striped__dir_8c_source.html#l01089">lfsck_allow_regenerate_master_lmv()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05869">lfsck_namespace_rescan_striped_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05699">lfsck_namespace_scan_local_lpf()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01545">lfsck_namespace_scan_shard()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l01088">lfsck_scan_lpf_bad_entries()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abe6cafa537717678814801ed8d6cb180"></a><!-- doxytag: member="lfsck_internal.h::dot" ref="abe6cafa537717678814801ed8d6cb180" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="osd-ldiskfs_2osd__handler_8c.html#abe6cafa537717678814801ed8d6cb180">dot</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00542">542</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>, <a class="el" href="mdd__dir_8c_source.html#l01862">mdd_declare_object_initialize()</a>, and <a class="el" href="mdd__dir_8c_source.html#l01899">mdd_object_initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a7914eee395b20d62ae6bc4a189f3a468"></a><!-- doxytag: member="lfsck_internal.h::dotdot" ref="a7914eee395b20d62ae6bc4a189f3a468" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="osd-ldiskfs_2osd__handler_8c.html#a7914eee395b20d62ae6bc4a189f3a468">dotdot</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00543">543</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00615">lfsck_create_lpf_local()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00774">lfsck_create_lpf_remote()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l05012">lfsck_namespace_assistant_handler_p1()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02990">lfsck_namespace_double_scan_dir()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l02248">lfsck_namespace_handle_striped_master()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00861">lfsck_namespace_insert_orphan()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01473">lfsck_namespace_repair_bad_name_hash()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l04790">lfsck_namespace_repair_dangling()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l02147">lfsck_namespace_repair_unmatched_pairs()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01213">lfsck_verify_lpf_pairs()</a>, <a class="el" href="llite__nfs_8c_source.html#l00287">ll_dir_get_parent_fid()</a>, <a class="el" href="lod__object_8c_source.html#l01558">lod_dir_declare_create_stripes()</a>, <a class="el" href="lod__object_8c_source.html#l02365">lod_xattr_set_lmv()</a>, <a class="el" href="mdd__dir_8c_source.html#l01862">mdd_declare_object_initialize()</a>, <a class="el" href="mdd__dir_8c_source.html#l02637">mdd_declare_rename()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, <a class="el" href="mdd__dir_8c_source.html#l01899">mdd_object_initialize()</a>, <a class="el" href="mdd__dir_8c_source.html#l02759">mdd_rename()</a>, <a class="el" href="mdd__orphans_8c_source.html#l00152">orph_declare_index_insert()</a>, and <a class="el" href="mdd__orphans_8c_source.html#l00196">orph_index_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa144f60df2565e5cce1b0d967597320"></a><!-- doxytag: member="lfsck_internal.h::lfsck_flags_names" ref="aaa144f60df2565e5cce1b0d967597320" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="lfsck__lib_8c.html#aaa144f60df2565e5cce1b0d967597320">lfsck_flags_names</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00071">71</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04750">lfsck_layout_dump()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1157db3beb29bc193fce02f85b07981"></a><!-- doxytag: member="lfsck_internal.h::lfsck_param_names" ref="ad1157db3beb29bc193fce02f85b07981" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="lfsck__lib_8c.html#ad1157db3beb29bc193fce02f85b07981">lfsck_param_names</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lfsck__lib_8c_source.html#l00080">80</a> of file <a class="el" href="lfsck__lib_8c_source.html">lfsck_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lfsck__layout_8c_source.html#l04750">lfsck_layout_dump()</a>, and <a class="el" href="lfsck__namespace_8c_source.html#l04209">lfsck_namespace_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="aeff576b7c084908278912545672aa6d0"></a><!-- doxytag: member="lfsck_internal.h::lfsck_thread_key" ref="aeff576b7c084908278912545672aa6d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__context__key.html">lu_context_key</a> <a class="el" href="lfsck__internal_8h.html#aeff576b7c084908278912545672aa6d0">lfsck_thread_key</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="lfsck__internal_8h_source.html#l01084">lfsck_env_info()</a>, <a class="el" href="lfsck__lib_8c_source.html#l03807">lfsck_exit()</a>, and <a class="el" href="lfsck__lib_8c_source.html#l03790">lfsck_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
