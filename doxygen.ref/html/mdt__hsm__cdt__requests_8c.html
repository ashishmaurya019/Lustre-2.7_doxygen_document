<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdt/mdt_hsm_cdt_requests.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdt/mdt_hsm_cdt_requests.c File Reference</h1><code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__user_8h_source.html">lustre/lustre_user.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lprocfs__status_8h_source.html">lprocfs_status.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>&quot;</code><br/>

<p><a href="mdt__hsm__cdt__requests_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structreq__interval__data.html">req_interval_data</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#ac2d5d52a79307e0120d3deb97815de11">NODE_VECTOR_SZ</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a5655b6d25f3107eba3d873ec4a262c34">dump_requests</a> (char *prefix, struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">dump requests list  <a href="#a5655b6d25f3107eba3d873ec4a262c34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="interval__tree_8h.html#afed43ecf13ee5bd9e84e3cd11f5cfe63">interval_iter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#ac46280bc4737af58a9e3e174d7945bd7">req_interval_cb</a> (struct <a class="el" href="structinterval__node.html">interval_node</a> *node, void *args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">interval tree cb, used to go through all the tree of extent done  <a href="#ac46280bc4737af58a9e3e174d7945bd7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#aaec633eaea4ebd17a01eb05630a96526">mdt_cdt_get_work_done</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *done_sz)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">scan the interval tree associated to a request to compute the amount of work done  <a href="#aaec633eaea4ebd17a01eb05630a96526"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#ac8a9cc047294763e63c0b57b0f0a9e4c">mdt_cdt_free_request_tree</a> (struct <a class="el" href="structcdt__req__progress.html">cdt_req_progress</a> *crp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">free the interval tree associated to a request  <a href="#ac8a9cc047294763e63c0b57b0f0a9e4c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#aedba3c8694608320c321a482c9790989">hsm_update_work</a> (struct <a class="el" href="structcdt__req__progress.html">cdt_req_progress</a> *crp, const struct <a class="el" href="structhsm__extent.html">hsm_extent</a> *extent)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update data moved information during a request  <a href="#aedba3c8694608320c321a482c9790989"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a5897c5859c641d6a1d0ab5e9edf976ee">mdt_cdt_init_request_tree</a> (struct <a class="el" href="structcdt__req__progress.html">cdt_req_progress</a> *crp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">init the interval tree associated to a request  <a href="#a5897c5859c641d6a1d0ab5e9edf976ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a2ddaf229180ed7953231af312d40daf8">mdt_cdt_alloc_request</a> (<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> compound_id, __u32 archive_id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate/init an agent request and its sub-structures.  <a href="#a2ddaf229180ed7953231af312d40daf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a99444194d1d6dae1e3e80f19c94afb51">mdt_cdt_free_request</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free an agent request and its sub-structures.  <a href="#a99444194d1d6dae1e3e80f19c94afb51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a3d33ca187324fa66270836b52f402018">mdt_cdt_get_request</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">inc refcount of a request  <a href="#a3d33ca187324fa66270836b52f402018"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a2579740f003e375e1ad619bd2bb90709">mdt_cdt_put_request</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">dec refcount of a request free if no more refcount  <a href="#a2579740f003e375e1ad619bd2bb90709"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#aecda6ecf22b034aec88cbb89f7ec829e">cdt_find_request_nolock</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find request in the list by cookie or by fid lock cdt_request_lock needs to be held by caller  <a href="#aecda6ecf22b034aec88cbb89f7ec829e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a21f22a4c2e3cd213cfde79382288ebb4">mdt_cdt_add_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *new_car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add a request to the list  <a href="#a21f22a4c2e3cd213cfde79382288ebb4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a64d2403d975452ea1fc0015fd3bd1ada">mdt_cdt_find_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find request in the list by cookie or by fid  <a href="#a64d2403d975452ea1fc0015fd3bd1ada"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a55c303cdfbd0965d0228593f6a61ae35">mdt_cdt_remove_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove request from the list  <a href="#a55c303cdfbd0965d0228593f6a61ae35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#ad88558ab3ed050728b858802aa00f826">mdt_cdt_update_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, const struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *pgs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update a request in the list on success, add a ref to the request returned  <a href="#ad88558ab3ed050728b858802aa00f826"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a0e024d2098ada49ef9182ee88e4ddb2c">mdt_hsm_active_requests_proc_start</a> (struct seq_file *s, loff_t *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">seq_file method called to start access to /proc file  <a href="#a0e024d2098ada49ef9182ee88e4ddb2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a57fb04f2e2da4e40004a2d2c794f0158">mdt_hsm_active_requests_proc_next</a> (struct seq_file *s, void *v, loff_t *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">seq_file method called to get next item just returns NULL at eof  <a href="#a57fb04f2e2da4e40004a2d2c794f0158"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a4b49271936b07ff9d5076982a6cfe5fe">mdt_hsm_active_requests_proc_show</a> (struct seq_file *s, void *v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">display request data  <a href="#a4b49271936b07ff9d5076982a6cfe5fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a88c55a98c442083dc00e21b4fe4b0e2b">mdt_hsm_active_requests_proc_stop</a> (struct seq_file *s, void *v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">seq_file method called to stop access to /proc file  <a href="#a88c55a98c442083dc00e21b4fe4b0e2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a150267c66ce610886b9a2f73ba52cb32">lprocfs_open_hsm_active_requests</a> (struct inode *inode, struct file *file)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">public function called at open of /proc file to get list of agents  <a href="#a150267c66ce610886b9a2f73ba52cb32"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct seq_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a5520b8001626445a772c56f04dc7a230">mdt_hsm_active_requests_proc_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__requests_8c.html#a8a5e8807a037144bdea0c3e7b101e039">mdt_hsm_active_requests_fops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00037">37</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac2d5d52a79307e0120d3deb97815de11"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::NODE_VECTOR_SZ" ref="ac2d5d52a79307e0120d3deb97815de11" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODE_VECTOR_SZ&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00113">113</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00154">hsm_update_work()</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00117">mdt_cdt_free_request_tree()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aecda6ecf22b034aec88cbb89f7ec829e"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::cdt_find_request_nolock" ref="aecda6ecf22b034aec88cbb89f7ec829e" args="(struct coordinator *cdt, __u64 cookie, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* cdt_find_request_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find request in the list by cookie or by fid lock cdt_request_lock needs to be held by caller </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] request cookie </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] fid </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer or NULL if not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">309</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00284">mdt_cdt_get_request()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">mdt_cdt_add_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">mdt_cdt_remove_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a5655b6d25f3107eba3d873ec4a262c34"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::dump_requests" ref="a5655b6d25f3107eba3d873ec4a262c34" args="(char *prefix, struct coordinator *cdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_requests </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>dump requests list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00048">48</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00463">cdt_agent_req::car_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00460">cdt_agent_req::car_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00461">cdt_agent_req::car_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>, <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="aedba3c8694608320c321a482c9790989"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::hsm_update_work" ref="aedba3c8694608320c321a482c9790989" args="(struct cdt_req_progress *crp, const struct hsm_extent *extent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_update_work </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__req__progress.html">cdt_req_progress</a> *&nbsp;</td>
          <td class="paramname"> <em>crp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structhsm__extent.html">hsm_extent</a> *&nbsp;</td>
          <td class="paramname"> <em>extent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update data moved information during a request </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00154">154</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="mdt__internal_8h_source.html#l00453">cdt_req_progress::crp_cnt</a>, <a class="el" href="mdt__internal_8h_source.html#l00447">cdt_req_progress::crp_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00454">cdt_req_progress::crp_max</a>, <a class="el" href="mdt__internal_8h_source.html#l00450">cdt_req_progress::crp_node</a>, <a class="el" href="mdt__internal_8h_source.html#l00448">cdt_req_progress::crp_root</a>, <a class="el" href="mdsrate_8c_source.html#l00132">end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="interval__tree_8c_source.html#l00383">interval_insert()</a>, <a class="el" href="interval__tree_8h_source.html#l00080">interval_set()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00113">NODE_VECTOR_SZ</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a150267c66ce610886b9a2f73ba52cb32"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::lprocfs_open_hsm_active_requests" ref="a150267c66ce610886b9a2f73ba52cb32" args="(struct inode *inode, struct file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lprocfs_open_hsm_active_requests </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>public function called at open of /proc file to get list of agents </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00571">571</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00560">mdt_hsm_active_requests_proc_ops</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a21f22a4c2e3cd213cfde79382288ebb4"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_add_request" ref="a21f22a4c2e3cd213cfde79382288ebb4" args="(struct coordinator *cdt, struct cdt_agent_req *new_car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_cdt_add_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>new_car</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add a request to the list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">336</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00237">mdt_hsm_agent_update_statistics()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ddaf229180ed7953231af312d40daf8"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_alloc_request" ref="a2ddaf229180ed7953231af312d40daf8" args="(__u64 compound_id, __u32 archive_id, __u64 flags, struct obd_uuid *uuid, struct hsm_action_item *hai)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* mdt_cdt_alloc_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>compound_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>archive_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate/init an agent request and its sub-structures. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>compound_id</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive_id</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[OUT] success valid structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[OUT] </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00238">238</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00463">cdt_agent_req::car_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00460">cdt_agent_req::car_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00461">cdt_agent_req::car_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>, <a class="el" href="mdt__internal_8h_source.html#l00465">cdt_agent_req::car_req_start</a>, <a class="el" href="mdt__internal_8h_source.html#l00466">cdt_agent_req::car_req_update</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00220">mdt_cdt_init_request_tree()</a>, <a class="el" href="mdt__handler_8c_source.html#l00111">mdt_hsm_car_kmem</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00845">OBD_SLAB_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>.</p>

</div>
</div>
<a class="anchor" id="a64d2403d975452ea1fc0015fd3bd1ada"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_find_request" ref="a64d2403d975452ea1fc0015fd3bd1ada" args="(struct coordinator *cdt, const __u64 cookie, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* mdt_cdt_find_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find request in the list by cookie or by fid </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] request cookie </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] fid </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer or NULL if not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">369</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>, and <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00482">mdt_hsm_get_running()</a>.</p>

</div>
</div>
<a class="anchor" id="a99444194d1d6dae1e3e80f19c94afb51"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_free_request" ref="a99444194d1d6dae1e3e80f19c94afb51" args="(struct cdt_agent_req *car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_free_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free an agent request and its sub-structures. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] Request to be freed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">273</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00117">mdt_cdt_free_request_tree()</a>, <a class="el" href="mdt__handler_8c_source.html#l00111">mdt_hsm_car_kmem</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8a9cc047294763e63c0b57b0f0a9e4c"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_free_request_tree" ref="ac8a9cc047294763e63c0b57b0f0a9e4c" args="(struct cdt_req_progress *crp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_cdt_free_request_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__req__progress.html">cdt_req_progress</a> *&nbsp;</td>
          <td class="paramname"> <em>crp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>free the interval tree associated to a request </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00117">117</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00453">cdt_req_progress::crp_cnt</a>, <a class="el" href="mdt__internal_8h_source.html#l00447">cdt_req_progress::crp_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00454">cdt_req_progress::crp_max</a>, <a class="el" href="mdt__internal_8h_source.html#l00450">cdt_req_progress::crp_node</a>, <a class="el" href="mdt__internal_8h_source.html#l00448">cdt_req_progress::crp_root</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="interval__tree_8c_source.html#l00523">interval_erase()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00113">NODE_VECTOR_SZ</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d33ca187324fa66270836b52f402018"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_get_request" ref="a3d33ca187324fa66270836b52f402018" args="(struct cdt_agent_req *car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_get_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>inc refcount of a request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00284">284</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="aaec633eaea4ebd17a01eb05630a96526"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_get_work_done" ref="aaec633eaea4ebd17a01eb05630a96526" args="(struct cdt_agent_req *car, __u64 *done_sz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_get_work_done </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>done_sz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>scan the interval tree associated to a request to compute the amount of work done </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>done_sz</em>&nbsp;</td><td>[OUT] will be set to the size of work done </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00098">98</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00074">req_interval_data::crp</a>, <a class="el" href="mdt__internal_8h_source.html#l00447">cdt_req_progress::crp_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00448">cdt_req_progress::crp_root</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00075">req_interval_data::done_sz</a>, <a class="el" href="interval__tree_8c_source.html#l00189">interval_iterate()</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00081">req_interval_cb()</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00512">mdt_hsm_active_requests_proc_show()</a>, and <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="a5897c5859c641d6a1d0ab5e9edf976ee"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_init_request_tree" ref="a5897c5859c641d6a1d0ab5e9edf976ee" args="(struct cdt_req_progress *crp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_cdt_init_request_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__req__progress.html">cdt_req_progress</a> *&nbsp;</td>
          <td class="paramname"> <em>crp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>init the interval tree associated to a request </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00220">220</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00453">cdt_req_progress::crp_cnt</a>, <a class="el" href="mdt__internal_8h_source.html#l00447">cdt_req_progress::crp_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00454">cdt_req_progress::crp_max</a>, and <a class="el" href="mdt__internal_8h_source.html#l00448">cdt_req_progress::crp_root</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00238">mdt_cdt_alloc_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a2579740f003e375e1ad619bd2bb90709"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_put_request" ref="a2579740f003e375e1ad619bd2bb90709" args="(struct cdt_agent_req *car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_put_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>dec refcount of a request free if no more refcount </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">294</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">mdt_cdt_add_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">mdt_cdt_remove_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00482">mdt_hsm_get_running()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="a55c303cdfbd0965d0228593f6a61ae35"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_remove_request" ref="a55c303cdfbd0965d0228593f6a61ae35" args="(struct coordinator *cdt, __u64 cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_cdt_remove_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove request from the list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] request cookie </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">389</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="ad88558ab3ed050728b858802aa00f826"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_cdt_update_request" ref="ad88558ab3ed050728b858802aa00f826" args="(struct coordinator *cdt, const struct hsm_progress_kernel *pgs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* mdt_cdt_update_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *&nbsp;</td>
          <td class="paramname"> <em>pgs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update a request in the list on success, add a ref to the request returned </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgs</em>&nbsp;</td><td>[IN] progression (cookie + extent + err) </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">424</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="mdt__internal_8h_source.html#l00466">cdt_agent_req::car_req_update</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00154">hsm_update_work()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00237">mdt_hsm_agent_update_statistics()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="a57fb04f2e2da4e40004a2d2c794f0158"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_hsm_active_requests_proc_next" ref="a57fb04f2e2da4e40004a2d2c794f0158" args="(struct seq_file *s, void *v, loff_t *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* mdt_hsm_active_requests_proc_next </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>seq_file method called to get next item just returns NULL at eof </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00489">489</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a4b49271936b07ff9d5076982a6cfe5fe"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_hsm_active_requests_proc_show" ref="a4b49271936b07ff9d5076982a6cfe5fe" args="(struct seq_file *s, void *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_active_requests_proc_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>display request data </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00512">512</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00463">cdt_agent_req::car_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00460">cdt_agent_req::car_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00461">cdt_agent_req::car_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01257">hai_dump_data_field()</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00098">mdt_cdt_get_work_done()</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a0e024d2098ada49ef9182ee88e4ddb2c"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_hsm_active_requests_proc_start" ref="a0e024d2098ada49ef9182ee88e4ddb2c" args="(struct seq_file *s, loff_t *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* mdt_hsm_active_requests_proc_start </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>seq_file method called to start access to /proc file </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00460">460</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a88c55a98c442083dc00e21b4fe4b0e2b"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_hsm_active_requests_proc_stop" ref="a88c55a98c442083dc00e21b4fe4b0e2b" args="(struct seq_file *s, void *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_hsm_active_requests_proc_stop </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>seq_file method called to stop access to /proc file </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00548">548</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, and <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>.</p>

</div>
</div>
<a class="anchor" id="ac46280bc4737af58a9e3e174d7945bd7"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::req_interval_cb" ref="ac46280bc4737af58a9e3e174d7945bd7" args="(struct interval_node *node, void *args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="interval__tree_8h.html#afed43ecf13ee5bd9e84e3cd11f5cfe63">interval_iter</a> req_interval_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinterval__node.html">interval_node</a> *&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>interval tree cb, used to go through all the tree of extent done </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00081">81</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00075">req_interval_data::done_sz</a>, <a class="el" href="interval__tree_8h_source.html#l00056">interval_node::interval_node_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="structinterval__node.html#a9fdbb3d38027b4bcc418350cad4f72d7">interval_node::in_extent</a>, <a class="el" href="interval__tree_8h_source.html#l00061">INTERVAL_ITER_CONT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="interval__tree_8h_source.html#l00055">interval_node::interval_node_extent::start</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00098">mdt_cdt_get_work_done()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a8a5e8807a037144bdea0c3e7b101e039"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_hsm_active_requests_fops" ref="a8a5e8807a037144bdea0c3e7b101e039" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="mdt__internal_8h.html#a8a5e8807a037144bdea0c3e7b101e039">mdt_hsm_active_requests_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .owner          = THIS_MODULE,
        .open           = <a class="code" href="mdt__hsm__cdt__requests_8c.html#a150267c66ce610886b9a2f73ba52cb32" title="public function called at open of /proc file to get list of agents">lprocfs_open_hsm_active_requests</a>,
        .read           = seq_read,
        .llseek         = seq_lseek,
        .release        = lprocfs_seq_release,
}
</pre></div>
<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00589">589</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5520b8001626445a772c56f04dc7a230"></a><!-- doxytag: member="mdt_hsm_cdt_requests.c::mdt_hsm_active_requests_proc_ops" ref="a5520b8001626445a772c56f04dc7a230" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct seq_operations <a class="el" href="mdt__hsm__cdt__requests_8c.html#a5520b8001626445a772c56f04dc7a230">mdt_hsm_active_requests_proc_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .start          = <a class="code" href="mdt__hsm__cdt__requests_8c.html#a0e024d2098ada49ef9182ee88e4ddb2c" title="seq_file method called to start access to /proc file">mdt_hsm_active_requests_proc_start</a>,
        .next           = <a class="code" href="mdt__hsm__cdt__requests_8c.html#a57fb04f2e2da4e40004a2d2c794f0158" title="seq_file method called to get next item just returns NULL at eof">mdt_hsm_active_requests_proc_next</a>,
        .show           = <a class="code" href="mdt__hsm__cdt__requests_8c.html#a4b49271936b07ff9d5076982a6cfe5fe" title="display request data">mdt_hsm_active_requests_proc_show</a>,
        .stop           = <a class="code" href="mdt__hsm__cdt__requests_8c.html#a88c55a98c442083dc00e21b4fe4b0e2b" title="seq_file method called to stop access to /proc file">mdt_hsm_active_requests_proc_stop</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00560">560</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00571">lprocfs_open_hsm_active_requests()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
