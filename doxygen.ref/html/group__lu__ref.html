<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lu_ref</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lu_ref</h1>
<p>An interface to track references between objects.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__ref.html">lu_ref</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__ref__link.html">lu_ref_link</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga9e184f4b29fde345f30c4edf9cc2dd35">lu_ref_init</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga140f372d7e8759582cf915483282ada4">lu_ref_fini</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref, const char *scope, const void *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga53f12cf34123caa33e548e6884577b78">lu_ref_add_atomic</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref, const char *scope, const void *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#gabe710beca3f3c5af633d2daf11ee3020">lu_ref_add_at</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref, struct <a class="el" href="structlu__ref__link.html">lu_ref_link</a> *link, const char *scope, const void *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref, const char *scope, const void *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga6da652af2b78a2a9eb89b083a43b2699">lu_ref_set_at</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref, struct <a class="el" href="structlu__ref__link.html">lu_ref_link</a> *link, const char *scope, const void *source0, const void *source1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga054ca475530771326ea8b5aa8a0e08a1">lu_ref_del_at</a> (struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref, struct <a class="el" href="structlu__ref__link.html">lu_ref_link</a> *link, const char *scope, const void *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga5c45a2775b7d526248c306668b46ff43">lu_ref_global_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#ga668e7052c874559803a72c6b9e15f6ca">lu_ref_global_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#gae9bb8ebc5ec698a282f70cfff695ec85">lu_ref_print</a> (const struct <a class="el" href="structlu__ref.html">lu_ref</a> *ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__ref.html#gaeea2c7875929a027e977a77108b6bb22">lu_ref_print_all</a> (void)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>An interface to track references between objects. </p>
<p>Mostly for debugging.</p>
<p>Suppose there is a reference counted data-structure struct foo. To track who acquired references to instance of struct foo, add <a class="el" href="structlu__ref.html">lu_ref</a> field to it:</p>
<div class="fragment"><pre class="fragment">         <span class="keyword">struct </span>foo {
                 atomic_t      foo_refcount;
                 <span class="keyword">struct </span><a class="code" href="structlu__ref.html">lu_ref</a> foo_reference;
                 ...
         };
</pre></div><p>foo::foo_reference has to be initialized by calling <a class="el" href="group__lu__ref.html#ga9e184f4b29fde345f30c4edf9cc2dd35">lu_ref_init()</a>. Typically there will be functions or macros to increment and decrement foo::foo_refcount, let's say they are foo_get(struct foo *foo) and foo_put(struct foo *foo), respectively.</p>
<p>Whenever foo_get() is called to acquire a reference on a foo, <a class="el" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add()</a> has to be called to insert into foo::foo_reference a record, describing acquired reference. Dually, <a class="el" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del()</a> removes matching record. Typical usages are:</p>
<div class="fragment"><pre class="fragment">        <span class="keyword">struct </span>bar *bar;

        <span class="comment">// bar owns a reference to foo.</span>
        bar-&gt;bar_foo = foo_get(foo);
        <a class="code" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add</a>(&amp;foo-&gt;foo_reference, <span class="stringliteral">&quot;bar&quot;</span>, bar);

        ...

        <span class="comment">// reference from bar to foo is released.</span>
        <a class="code" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del</a>(&amp;foo-&gt;foo_reference, <span class="stringliteral">&quot;bar&quot;</span>, bar);
        foo_put(bar-&gt;bar_foo);


        <span class="comment">// current thread acquired a temporary reference to foo.</span>
        foo_get(foo);
        <a class="code" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add</a>(&amp;foo-&gt;reference, __FUNCTION__, current);

        ...

        <span class="comment">// temporary reference is released.</span>
        <a class="code" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del</a>(&amp;foo-&gt;reference, __FUNCTION__, current);
        foo_put(foo);
</pre></div><p><em>Et</em> <em>cetera</em>. Often it makes sense to include <a class="el" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add()</a> and <a class="el" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del()</a> calls into foo_get() and foo_put(). When an instance of struct foo is destroyed, <a class="el" href="group__lu__ref.html#ga140f372d7e8759582cf915483282ada4">lu_ref_fini()</a> has to be called that checks that no pending references remain. <a class="el" href="group__lu__ref.html#gae9bb8ebc5ec698a282f70cfff695ec85">lu_ref_print()</a> can be used to dump a list of pending references, while hunting down a leak.</p>
<p>For objects to which a large number of references can be acquired, <a class="el" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del()</a> can become cpu consuming, as it has to scan the list of references. To work around this, remember result of <a class="el" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add()</a> (usually in the same place where pointer to struct foo is stored), and use <a class="el" href="group__lu__ref.html#ga054ca475530771326ea8b5aa8a0e08a1">lu_ref_del_at()</a>:</p>
<div class="fragment"><pre class="fragment">        <span class="comment">// There is a large number of bar&apos;s for a single foo.</span>
        bar-&gt;bar_foo     = foo_get(foo);
        bar-&gt;bar_foo_ref = <a class="code" href="group__lu__ref.html#gad327cc83dc17317225095651013e1fd6">lu_ref_add</a>(&amp;foo-&gt;foo_reference, <span class="stringliteral">&quot;bar&quot;</span>, bar);

        ...

        <span class="comment">// reference from bar to foo is released.</span>
        <a class="code" href="group__lu__ref.html#ga054ca475530771326ea8b5aa8a0e08a1">lu_ref_del_at</a>(&amp;foo-&gt;foo_reference, bar-&gt;bar_foo_ref, <span class="stringliteral">&quot;bar&quot;</span>, bar);
        foo_put(bar-&gt;bar_foo);
</pre></div><p><a class="el" href="structlu__ref.html">lu_ref</a> interface degrades gracefully in case of memory shortages. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gad327cc83dc17317225095651013e1fd6"></a><!-- doxytag: member="lu_ref.h::lu_ref_add" ref="gad327cc83dc17317225095651013e1fd6" args="(struct lu_ref *ref, const char *scope, const void *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00204">204</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="cl__object_8c_source.html#l01247">cl_type_setup()</a>, <a class="el" href="obd__config_8c_source.html#l00336">class_attach()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="rw_8c_source.html#l00178">ll_read_ahead_page()</a>, <a class="el" href="rw26_8c_source.html#l00627">ll_write_begin()</a>, <a class="el" href="rw_8c_source.html#l00887">ll_writepage()</a>, <a class="el" href="lovsub__dev_8c_source.html#l00055">lovsub_device_init()</a>, <a class="el" href="lu__object_8h_source.html#l00866">lu_object_ref_add()</a>, <a class="el" href="lu__object_8c_source.html#l01058">lu_site_init()</a>, <a class="el" href="osc__cache_8c_source.html#l00619">osc_extent_find()</a>, <a class="el" href="osc__cache_8c_source.html#l00355">osc_extent_put()</a>, <a class="el" href="osc__cache_8c_source.html#l00961">osc_extent_truncate()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="qmt__pool_8c_source.html#l00235">qmt_pool_alloc()</a>, <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, <a class="el" href="qsd__lib_8c_source.html#l00557">qsd_init()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, <a class="el" href="vvp__dev_8c_source.html#l00231">vvp_device_init()</a>, and <a class="el" href="vvp__io_8c_source.html#l01202">vvp_io_fault_start()</a>.</p>

</div>
</div>
<a class="anchor" id="gabe710beca3f3c5af633d2daf11ee3020"></a><!-- doxytag: member="lu_ref.h::lu_ref_add_at" ref="gabe710beca3f3c5af633d2daf11ee3020" args="(struct lu_ref *ref, struct lu_ref_link *link, const char *scope, const void *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_add_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__ref__link.html">lu_ref_link</a> *&nbsp;</td>
          <td class="paramname"> <em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00216">216</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00866">cl_page_list_add()</a>, <a class="el" href="lu__object_8c_source.html#l01242">lu_object_init()</a>, <a class="el" href="lu__object_8h_source.html#l00873">lu_object_ref_add_at()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l01303">osd_trans_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga53f12cf34123caa33e548e6884577b78"></a><!-- doxytag: member="lu_ref.h::lu_ref_add_atomic" ref="ga53f12cf34123caa33e548e6884577b78" args="(struct lu_ref *ref, const char *scope, const void *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_add_atomic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00210">210</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="obd__config_8c_source.html#l00717">class_incref()</a>, <a class="el" href="lu__object_8c_source.html#l01653">keys_fill()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, and <a class="el" href="osc__page_8c_source.html#l00166">osc_page_transfer_get()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9502d6573eadb28a4ea33ff6482e1752"></a><!-- doxytag: member="lu_ref.h::lu_ref_del" ref="ga9502d6573eadb28a4ea33ff6482e1752" args="(struct lu_ref *ref, const char *scope, const void *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00223">223</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="obd__config_8c_source.html#l00729">class_decref()</a>, <a class="el" href="lu__object_8c_source.html#l01429">key_fini()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="rw_8c_source.html#l00178">ll_read_ahead_page()</a>, <a class="el" href="rw26_8c_source.html#l00730">ll_write_end()</a>, <a class="el" href="rw_8c_source.html#l00887">ll_writepage()</a>, <a class="el" href="lu__object_8h_source.html#l00881">lu_object_ref_del()</a>, <a class="el" href="lu__object_8c_source.html#l01140">lu_site_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01349">lu_stack_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="osc__cache_8c_source.html#l01309">osc_completion()</a>, <a class="el" href="osc__cache_8c_source.html#l00961">osc_extent_truncate()</a>, <a class="el" href="osc__lock_8c_source.html#l01025">osc_lock_detach()</a>, <a class="el" href="osc__page_8c_source.html#l00176">osc_page_transfer_put()</a>, <a class="el" href="qmt__pool_8c_source.html#l00304">qmt_pool_free()</a>, <a class="el" href="qsd__lib_8c_source.html#l00474">qsd_fini()</a>, <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00236">qsd_glb_glimpse_ast()</a>, <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, <a class="el" href="vvp__io_8c_source.html#l00870">vvp_io_commit_sync()</a>, <a class="el" href="vvp__io_8c_source.html#l00361">vvp_io_fault_fini()</a>, <a class="el" href="vvp__io_8c_source.html#l00968">vvp_io_write_commit()</a>, and <a class="el" href="vvp__io_8c_source.html#l00928">write_commit_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga054ca475530771326ea8b5aa8a0e08a1"></a><!-- doxytag: member="lu_ref.h::lu_ref_del_at" ref="ga054ca475530771326ea8b5aa8a0e08a1" args="(struct lu_ref *ref, struct lu_ref_link *link, const char *scope, const void *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_del_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__ref__link.html">lu_ref_link</a> *&nbsp;</td>
          <td class="paramname"> <em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00234">234</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00886">cl_page_list_del()</a>, <a class="el" href="cl__io_8c_source.html#l00963">cl_page_list_disown()</a>, <a class="el" href="lu__object_8c_source.html#l01259">lu_object_fini()</a>, <a class="el" href="lu__object_8h_source.html#l00887">lu_object_ref_del_at()</a>, and <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l01182">osd_trans_commit_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga140f372d7e8759582cf915483282ada4"></a><!-- doxytag: member="lu_ref.h::lu_ref_fini" ref="ga140f372d7e8759582cf915483282ada4" args="(struct lu_ref *ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00200">200</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01267">__ldlm_resource_putref_final()</a>, <a class="el" href="cl__object_8c_source.html#l01325">cl_key_exit()</a>, <a class="el" href="cl__object_8c_source.html#l01313">cl_key_fini()</a>, <a class="el" href="cl__page_8c_source.html#l00133">cl_page_free()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="lu__object_8c_source.html#l01455">lu_context_key_degister()</a>, <a class="el" href="lu__object_8c_source.html#l01218">lu_device_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01316">lu_object_header_fini()</a>, <a class="el" href="genops_8c_source.html#l00089">obd_device_free()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00273">qsd_qtype_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ga668e7052c874559803a72c6b9e15f6ca"></a><!-- doxytag: member="lu_ref.h::lu_ref_global_fini" ref="ga668e7052c874559803a72c6b9e15f6ca" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_global_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00244">244</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="lu__object_8c_source.html#l02181">lu_global_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5c45a2775b7d526248c306668b46ff43"></a><!-- doxytag: member="lu_ref.h::lu_ref_global_init" ref="ga5c45a2775b7d526248c306668b46ff43" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lu_ref_global_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00239">239</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="lu__object_8c_source.html#l02134">lu_global_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9e184f4b29fde345f30c4edf9cc2dd35"></a><!-- doxytag: member="lu_ref.h::lu_ref_init" ref="ga9e184f4b29fde345f30c4edf9cc2dd35" args="(struct lu_ref *ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00196">196</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="cl__object_8c_source.html#l01325">cl_key_exit()</a>, <a class="el" href="cl__object_8c_source.html#l01298">cl_key_init()</a>, <a class="el" href="cl__page_8c_source.html#l00172">cl_page_alloc()</a>, <a class="el" href="obd__config_8c_source.html#l00336">class_attach()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01132">ldlm_resource_new()</a>, <a class="el" href="lu__object_8c_source.html#l01401">lu_context_key_register()</a>, <a class="el" href="lu__object_8c_source.html#l01200">lu_device_init()</a>, <a class="el" href="lu__object_8c_source.html#l01301">lu_object_header_init()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00360">qsd_qtype_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gae9bb8ebc5ec698a282f70cfff695ec85"></a><!-- doxytag: member="lu_ref.h::lu_ref_print" ref="gae9bb8ebc5ec698a282f70cfff695ec85" args="(const struct lu_ref *ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_print </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00248">248</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="lu__object_8c_source.html#l02111">lu_context_keys_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="gaeea2c7875929a027e977a77108b6bb22"></a><!-- doxytag: member="lu_ref.h::lu_ref_print_all" ref="gaeea2c7875929a027e977a77108b6bb22" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_print_all </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00252">252</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6da652af2b78a2a9eb89b083a43b2699"></a><!-- doxytag: member="lu_ref.h::lu_ref_set_at" ref="ga6da652af2b78a2a9eb89b083a43b2699" args="(struct lu_ref *ref, struct lu_ref_link *link, const char *scope, const void *source0, const void *source1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lu_ref_set_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ref.html">lu_ref</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__ref__link.html">lu_ref_link</a> *&nbsp;</td>
          <td class="paramname"> <em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>source1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lu__ref_8h_source.html#l00228">228</a> of file <a class="el" href="lu__ref_8h_source.html">lu_ref.h</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00905">cl_page_list_move()</a>, and <a class="el" href="cl__io_8c_source.html#l00925">cl_page_list_move_head()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
