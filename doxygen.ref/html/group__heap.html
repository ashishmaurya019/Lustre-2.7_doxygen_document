<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: Binary heap</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Binary heap</h1>
<p>The binary heap is a scalable data structure created using a binary tree.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Binary heap node.  <a href="structcfs__binheap__node.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__binheap__ops.html">cfs_binheap_ops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Binary heap operations.  <a href="structcfs__binheap__ops.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__binheap.html">cfs_binheap</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Binary heap object.  <a href="structcfs__binheap.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga6b8f98ada426485f014501cc0edf43ff">CBH_SHIFT</a>&nbsp;&nbsp;&nbsp;9</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga04dc5cb2905e02ec2806d0d1c908a5ff">CBH_SIZE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; CBH_SHIFT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga053b5f64be37e3f4ba48b343b588ded2">CBH_MASK</a>&nbsp;&nbsp;&nbsp;(CBH_SIZE - 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga88c2f653fa84918cc724f0007c8361a3">CBH_NOB</a>&nbsp;&nbsp;&nbsp;(CBH_SIZE * sizeof(struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gafa133d68b95143970bc6b6efcbcea293">CBH_POISON</a>&nbsp;&nbsp;&nbsp;0xdeadbeef</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gabda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LNET</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gaea328bd366c605dfe0898aa43a768e2e">CBH_ALLOC</a>(ptr, h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gac47338e2a0f4de9f0d7a7d8f40c37f8a">CBH_FREE</a>(ptr)&nbsp;&nbsp;&nbsp;LIBCFS_FREE(ptr, CBH_NOB)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__heap.html#gga0c5bde183ecefe103f70b49ad9740bcda872dfd02841bb39b9a2e341ca78caebf">CBH_FLAG_ATOMIC_GROW</a> =  1
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Binary heap flags. </p>
 <a href="group__heap.html#ga0c5bde183ecefe103f70b49ad9740bcd">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga5cfc116d87eae85890585d4a195db252">cfs_binheap_destroy</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Releases all resources associated with a binary heap instance.  <a href="#ga5cfc116d87eae85890585d4a195db252"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gaca8b0cf2ec8b0240e39a18600a58acab">cfs_binheap_create</a> (struct <a class="el" href="structcfs__binheap__ops.html">cfs_binheap_ops</a> *ops, unsigned int flags, unsigned count, void *arg, struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *cptab, int cptid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and initializes a binary heap instance.  <a href="#gaca8b0cf2ec8b0240e39a18600a58acab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gacc327e9f82cd476e96cc667c102f0f1a">cfs_binheap_find</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, unsigned int idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtains a pointer to a heap element, given its index into the binary tree.  <a href="#gacc327e9f82cd476e96cc667c102f0f1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gad2addbe43a8767c18143e564f3384033">cfs_binheap_insert</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sort-inserts a node into the binary heap.  <a href="#gad2addbe43a8767c18143e564f3384033"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga2508e7b6c81ff6b17dae6189dd410e26">cfs_binheap_remove</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a node from the binary heap.  <a href="#ga2508e7b6c81ff6b17dae6189dd410e26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga89a148e32784ccfcb0479ef9e3cde31f">cfs_binheap_relocate</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Relocate a node in the binary heap.  <a href="#ga89a148e32784ccfcb0479ef9e3cde31f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gadc26f0febb0b3113bc1dfea04dc33c24">cfs_binheap_size</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga019d1b8f448c8cb0ef7c2e00cb4893ea">cfs_binheap_is_empty</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga6d6545b20a149a20add24b5496f49b5a">cfs_binheap_root</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga74fc5506ec7eed820dd36d5309316fa7">cfs_binheap_remove_root</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gac6b9b69a041890ca53e8b35eddf492ab">cfs_binheap_grow</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Grows the capacity of a binary heap so that it can handle a larger number of <em>struct</em> <a class="el" href="structcfs__binheap__node.html" title="Binary heap node.">cfs_binheap_node</a> objects.  <a href="#gac6b9b69a041890ca53e8b35eddf492ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#gab73849027fdab39c0e895f4829b11920">cfs_binheap_pointer</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, unsigned int idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtains a double pointer to a heap element, given its index into the binary tree.  <a href="#gab73849027fdab39c0e895f4829b11920"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga56392c6c98c541d784ece5e47bf51a93">cfs_binheap_bubble</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves a node upwards, towards the root of the binary tree.  <a href="#ga56392c6c98c541d784ece5e47bf51a93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__heap.html#ga0af9fab8c6618ca160554bb560dca4c4">cfs_binheap_sink</a> (struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *h, struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves a node downwards, towards the last level of the binary tree.  <a href="#ga0af9fab8c6618ca160554bb560dca4c4"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The binary heap is a scalable data structure created using a binary tree. </p>
<p>It is capable of maintaining large sets of elements sorted usually by one or more element properties, but really based on anything that can be used as a binary predicate in order to determine the relevant ordering of any two nodes that belong to the set. There is no search operation, rather the intention is for the element of the lowest priority which will always be at the root of the tree (as this is an implementation of a min-heap) to be removed by users for consumption.</p>
<p>Users of the heap should embed a <em>struct</em> <a class="el" href="structcfs__binheap__node.html" title="Binary heap node.">cfs_binheap_node</a> object instance on every object of the set that they wish the binary heap instance to handle, and (at a minimum) provide a struct <a class="el" href="structcfs__binheap__ops.html#a871342e2162314a3c37f78c374a5c472" title="A binary predicate which is called during internal heap sorting operations, and used...">cfs_binheap_ops::hop_compare()</a> implementation which is used by the heap as the binary predicate during its internal sorting operations.</p>
<p>The current implementation enforces no locking scheme, and so assumes the user caters for locking between calls to insert, delete and lookup operations. Since the only consumer for the data structure at this point are NRS policies, and these operate on a per-CPT basis, binary heap instances are tied to a specific CPT. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gaea328bd366c605dfe0898aa43a768e2e"></a><!-- doxytag: member="heap.c::CBH_ALLOC" ref="gaea328bd366c605dfe0898aa43a768e2e" args="(ptr, h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_ALLOC</td>
          <td>(</td>
          <td class="paramtype">ptr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">h&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                    \
        <span class="keywordflow">if</span> (h-&gt;cbh_cptab) {                                             \
                <span class="keywordflow">if</span> ((h)-&gt;cbh_flags &amp; <a class="code" href="group__heap.html#gga0c5bde183ecefe103f70b49ad9740bcda872dfd02841bb39b9a2e341ca78caebf">CBH_FLAG_ATOMIC_GROW</a>)              \
                        <a class="code" href="libcfs__private_8h.html#afb4a3ebd16a00eeb1474f63640ce258a">LIBCFS_CPT_ALLOC_GFP</a>((ptr), h-&gt;cbh_cptab,       \
                                             h-&gt;cbh_cptid, <a class="code" href="group__heap.html#ga88c2f653fa84918cc724f0007c8361a3">CBH_NOB</a>,     \
                                             GFP_ATOMIC);               \
                <span class="keywordflow">else</span>                                                    \
                        <a class="code" href="libcfs__private_8h.html#a44cef2d4d37d2d32ecabd11908b4850c">LIBCFS_CPT_ALLOC</a>((ptr), h-&gt;cbh_cptab,           \
                                         h-&gt;cbh_cptid, <a class="code" href="group__heap.html#ga88c2f653fa84918cc724f0007c8361a3">CBH_NOB</a>);        \
        } <span class="keywordflow">else</span> {                                                        \
                <span class="keywordflow">if</span> ((h)-&gt;cbh_flags &amp; CBH_FLAG_ATOMIC_GROW)              \
                        LIBCFS_ALLOC_ATOMIC((ptr), <a class="code" href="group__heap.html#ga88c2f653fa84918cc724f0007c8361a3">CBH_NOB</a>);            \
                <span class="keywordflow">else</span>                                                    \
                        <a class="code" href="libcfs__private_8h.html#a87a8b94124ee7f73a969859a2fd83294">LIBCFS_ALLOC</a>((ptr), <a class="code" href="group__heap.html#ga88c2f653fa84918cc724f0007c8361a3">CBH_NOB</a>);                   \
        }                                                               \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Definition at line <a class="el" href="heap_8c_source.html#l00040">40</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>.</p>

</div>
</div>
<a class="anchor" id="gac47338e2a0f4de9f0d7a7d8f40c37f8a"></a><!-- doxytag: member="heap.c::CBH_FREE" ref="gac47338e2a0f4de9f0d7a7d8f40c37f8a" args="(ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_FREE</td>
          <td>(</td>
          <td class="paramtype">ptr&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LIBCFS_FREE(ptr, CBH_NOB)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heap_8c_source.html#l00058">58</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00215">cfs_binheap_destroy()</a>, and <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>.</p>

</div>
</div>
<a class="anchor" id="ga053b5f64be37e3f4ba48b343b588ded2"></a><!-- doxytag: member="libcfs_heap.h::CBH_MASK" ref="ga053b5f64be37e3f4ba48b343b588ded2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_MASK&nbsp;&nbsp;&nbsp;(CBH_SIZE - 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00073">73</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>, and <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>.</p>

</div>
</div>
<a class="anchor" id="ga88c2f653fa84918cc724f0007c8361a3"></a><!-- doxytag: member="libcfs_heap.h::CBH_NOB" ref="ga88c2f653fa84918cc724f0007c8361a3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_NOB&nbsp;&nbsp;&nbsp;(CBH_SIZE * sizeof(struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00074">74</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafa133d68b95143970bc6b6efcbcea293"></a><!-- doxytag: member="libcfs_heap.h::CBH_POISON" ref="gafa133d68b95143970bc6b6efcbcea293" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_POISON&nbsp;&nbsp;&nbsp;0xdeadbeef</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00076">76</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00455">cfs_binheap_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6b8f98ada426485f014501cc0edf43ff"></a><!-- doxytag: member="libcfs_heap.h::CBH_SHIFT" ref="ga6b8f98ada426485f014501cc0edf43ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_SHIFT&nbsp;&nbsp;&nbsp;9</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00071">71</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>, and <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>.</p>

</div>
</div>
<a class="anchor" id="ga04dc5cb2905e02ec2806d0d1c908a5ff"></a><!-- doxytag: member="libcfs_heap.h::CBH_SIZE" ref="ga04dc5cb2905e02ec2806d0d1c908a5ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBH_SIZE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; CBH_SHIFT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00072">72</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00215">cfs_binheap_destroy()</a>, <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>, and <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>.</p>

</div>
</div>
<a class="anchor" id="gabda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="heap.c::DEBUG_SUBSYSTEM" ref="gabda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LNET</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heap_8c_source.html#l00036">36</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga0c5bde183ecefe103f70b49ad9740bcd"></a><!-- doxytag: member="libcfs_heap.h::@258" ref="ga0c5bde183ecefe103f70b49ad9740bcd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Binary heap flags. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga0c5bde183ecefe103f70b49ad9740bcda872dfd02841bb39b9a2e341ca78caebf"></a><!-- doxytag: member="CBH_FLAG_ATOMIC_GROW" ref="gga0c5bde183ecefe103f70b49ad9740bcda872dfd02841bb39b9a2e341ca78caebf" args="" -->CBH_FLAG_ATOMIC_GROW</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00081">81</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga56392c6c98c541d784ece5e47bf51a93"></a><!-- doxytag: member="heap.c::cfs_binheap_bubble" ref="ga56392c6c98c541d784ece5e47bf51a93" args="(struct cfs_binheap *h, struct cfs_binheap_node *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cfs_binheap_bubble </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Moves a node upwards, towards the root of the binary tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The heap </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>e</em>&nbsp;</td><td>The node</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>The position of <em>e</em> in the tree was changed at least once </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>The position of <em>e</em> in the tree was not changed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00311">311</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00153">cfs_binheap::cbh_ops</a>, <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>, <a class="el" href="libcfs__heap_8h_source.html#l00068">cfs_binheap_node::chn_index</a>, <a class="el" href="structcfs__binheap__ops.html#a871342e2162314a3c37f78c374a5c472">cfs_binheap_ops::hop_compare</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00419">cfs_binheap_insert()</a>, and <a class="el" href="heap_8c_source.html#l00493">cfs_binheap_relocate()</a>.</p>

</div>
</div>
<a class="anchor" id="gaca8b0cf2ec8b0240e39a18600a58acab"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_create" ref="gaca8b0cf2ec8b0240e39a18600a58acab" args="(struct cfs_binheap_ops *ops, unsigned int flags, unsigned count, void *arg, struct cfs_cpt_table *cptab, int cptid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> * cfs_binheap_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap__ops.html">cfs_binheap_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__cpt__table.html">cfs_cpt_table</a> *&nbsp;</td>
          <td class="paramname"> <em>cptab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cptid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates and initializes a binary heap instance. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>The operations to be used </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>The heap flags [in] count The initial heap capacity in # of elements </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>arg</em>&nbsp;</td><td>An optional private argument </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cptab</em>&nbsp;</td><td>The CPT table this heap instance will operate over </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cptid</em>&nbsp;</td><td>The CPT id of <em>cptab</em> this heap instance will operate over</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid-pointer</em>&nbsp;</td><td>A newly-created and initialized binary heap object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00167">167</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00157">cfs_binheap::cbh_cptab</a>, <a class="el" href="libcfs__heap_8h_source.html#l00159">cfs_binheap::cbh_cptid</a>, <a class="el" href="libcfs__heap_8h_source.html#l00082">CBH_FLAG_ATOMIC_GROW</a>, <a class="el" href="libcfs__heap_8h_source.html#l00151">cfs_binheap::cbh_flags</a>, <a class="el" href="libcfs__heap_8h_source.html#l00149">cfs_binheap::cbh_hwm</a>, <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>, <a class="el" href="libcfs__heap_8h_source.html#l00153">cfs_binheap::cbh_ops</a>, <a class="el" href="libcfs__heap_8h_source.html#l00155">cfs_binheap::cbh_private</a>, <a class="el" href="heap_8c_source.html#l00215">cfs_binheap_destroy()</a>, <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>, <a class="el" href="libcfs__cpu_8h_source.html#l00095">CFS_CPT_ANY</a>, <a class="el" href="structcfs__binheap__ops.html#a871342e2162314a3c37f78c374a5c472">cfs_binheap_ops::hop_compare</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00291">LIBCFS_ALLOC</a>, and <a class="el" href="libcfs__private_8h_source.html#l00295">LIBCFS_CPT_ALLOC</a>.</p>

</div>
</div>
<a class="anchor" id="ga5cfc116d87eae85890585d4a195db252"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_destroy" ref="ga5cfc116d87eae85890585d4a195db252" args="(struct cfs_binheap *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_binheap_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Releases all resources associated with a binary heap instance. </p>
<p>Deallocates memory for all indirection levels and the binary heap object itself.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The binary heap object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00215">215</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00145">cfs_binheap::cbh_elements1</a>, <a class="el" href="libcfs__heap_8h_source.html#l00143">cfs_binheap::cbh_elements2</a>, <a class="el" href="libcfs__heap_8h_source.html#l00141">cfs_binheap::cbh_elements3</a>, <a class="el" href="heap_8c_source.html#l00058">CBH_FREE</a>, <a class="el" href="libcfs__heap_8h_source.html#l00149">cfs_binheap::cbh_hwm</a>, <a class="el" href="libcfs__heap_8h_source.html#l00072">CBH_SIZE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="libcfs__private_8h_source.html#l00290">LIBCFS_FREE</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00167">cfs_binheap_create()</a>.</p>

</div>
</div>
<a class="anchor" id="gacc327e9f82cd476e96cc667c102f0f1a"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_find" ref="gacc327e9f82cd476e96cc667c102f0f1a" args="(struct cfs_binheap *h, unsigned int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> * cfs_binheap_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtains a pointer to a heap element, given its index into the binary tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The binary heap </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>The requested node's index</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid-pointer</em>&nbsp;</td><td>The requested heap node </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>Supplied index is out of bounds </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00292">292</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>, and <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>.</p>

<p>Referenced by <a class="el" href="libcfs__heap_8h_source.html#l00192">cfs_binheap_remove_root()</a>, and <a class="el" href="libcfs__heap_8h_source.html#l00186">cfs_binheap_root()</a>.</p>

</div>
</div>
<a class="anchor" id="gac6b9b69a041890ca53e8b35eddf492ab"></a><!-- doxytag: member="heap.c::cfs_binheap_grow" ref="gac6b9b69a041890ca53e8b35eddf492ab" args="(struct cfs_binheap *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cfs_binheap_grow </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Grows the capacity of a binary heap so that it can handle a larger number of <em>struct</em> <a class="el" href="structcfs__binheap__node.html" title="Binary heap node.">cfs_binheap_node</a> objects. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The binary heap</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>Successfully grew the heap </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>OOM error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00070">70</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="heap_8c_source.html#l00040">CBH_ALLOC</a>, <a class="el" href="libcfs__heap_8h_source.html#l00145">cfs_binheap::cbh_elements1</a>, <a class="el" href="libcfs__heap_8h_source.html#l00143">cfs_binheap::cbh_elements2</a>, <a class="el" href="libcfs__heap_8h_source.html#l00141">cfs_binheap::cbh_elements3</a>, <a class="el" href="heap_8c_source.html#l00058">CBH_FREE</a>, <a class="el" href="libcfs__heap_8h_source.html#l00149">cfs_binheap::cbh_hwm</a>, <a class="el" href="libcfs__heap_8h_source.html#l00073">CBH_MASK</a>, <a class="el" href="libcfs__heap_8h_source.html#l00071">CBH_SHIFT</a>, <a class="el" href="libcfs__heap_8h_source.html#l00072">CBH_SIZE</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00167">cfs_binheap_create()</a>, and <a class="el" href="heap_8c_source.html#l00419">cfs_binheap_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="gad2addbe43a8767c18143e564f3384033"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_insert" ref="gad2addbe43a8767c18143e564f3384033" args="(struct cfs_binheap *h, struct cfs_binheap_node *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cfs_binheap_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sort-inserts a node into the binary heap. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The heap </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>e</em>&nbsp;</td><td>The node</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>Element inserted successfully </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>!=</em>&nbsp;</td><td>0 error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00419">419</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00149">cfs_binheap::cbh_hwm</a>, <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>, <a class="el" href="libcfs__heap_8h_source.html#l00153">cfs_binheap::cbh_ops</a>, <a class="el" href="heap_8c_source.html#l00311">cfs_binheap_bubble()</a>, <a class="el" href="heap_8c_source.html#l00070">cfs_binheap_grow()</a>, <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>, <a class="el" href="libcfs__heap_8h_source.html#l00068">cfs_binheap_node::chn_index</a>, and <a class="el" href="structcfs__binheap__ops.html#a881f0fcaa2a48cd45d0d1d2cbfaff362">cfs_binheap_ops::hop_enter</a>.</p>

</div>
</div>
<a class="anchor" id="ga019d1b8f448c8cb0ef7c2e00cb4893ea"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_is_empty" ref="ga019d1b8f448c8cb0ef7c2e00cb4893ea" args="(struct cfs_binheap *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cfs_binheap_is_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00180">180</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>.</p>

</div>
</div>
<a class="anchor" id="gab73849027fdab39c0e895f4829b11920"></a><!-- doxytag: member="heap.c::cfs_binheap_pointer" ref="gab73849027fdab39c0e895f4829b11920" args="(struct cfs_binheap *h, unsigned int idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a>** cfs_binheap_pointer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtains a double pointer to a heap element, given its index into the binary tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The binary heap instance </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>idx</em>&nbsp;</td><td>The requested node's index</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid-pointer</em>&nbsp;</td><td>A double pointer to a heap pointer entry </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00267">267</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00145">cfs_binheap::cbh_elements1</a>, <a class="el" href="libcfs__heap_8h_source.html#l00143">cfs_binheap::cbh_elements2</a>, <a class="el" href="libcfs__heap_8h_source.html#l00141">cfs_binheap::cbh_elements3</a>, <a class="el" href="libcfs__heap_8h_source.html#l00073">CBH_MASK</a>, <a class="el" href="libcfs__heap_8h_source.html#l00071">CBH_SHIFT</a>, and <a class="el" href="libcfs__heap_8h_source.html#l00072">CBH_SIZE</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00311">cfs_binheap_bubble()</a>, <a class="el" href="heap_8c_source.html#l00292">cfs_binheap_find()</a>, <a class="el" href="heap_8c_source.html#l00419">cfs_binheap_insert()</a>, <a class="el" href="heap_8c_source.html#l00455">cfs_binheap_remove()</a>, and <a class="el" href="heap_8c_source.html#l00354">cfs_binheap_sink()</a>.</p>

</div>
</div>
<a class="anchor" id="ga89a148e32784ccfcb0479ef9e3cde31f"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_relocate" ref="ga89a148e32784ccfcb0479ef9e3cde31f" args="(struct cfs_binheap *h, struct cfs_binheap_node *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_binheap_relocate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Relocate a node in the binary heap. </p>
<p>Should be called whenever a node's values which affects its ranking are changed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The heap </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>e</em>&nbsp;</td><td>The node </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00493">493</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="heap_8c_source.html#l00311">cfs_binheap_bubble()</a>, and <a class="el" href="heap_8c_source.html#l00354">cfs_binheap_sink()</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00455">cfs_binheap_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2508e7b6c81ff6b17dae6189dd410e26"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_remove" ref="ga2508e7b6c81ff6b17dae6189dd410e26" args="(struct cfs_binheap *h, struct cfs_binheap_node *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cfs_binheap_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes a node from the binary heap. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The heap </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>e</em>&nbsp;</td><td>The node </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00455">455</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>, <a class="el" href="libcfs__heap_8h_source.html#l00153">cfs_binheap::cbh_ops</a>, <a class="el" href="libcfs__heap_8h_source.html#l00076">CBH_POISON</a>, <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>, <a class="el" href="heap_8c_source.html#l00493">cfs_binheap_relocate()</a>, <a class="el" href="libcfs__heap_8h_source.html#l00068">cfs_binheap_node::chn_index</a>, <a class="el" href="structcfs__binheap__ops.html#a6644484a7c0a1cc3fc57e0e6d0447e8d">cfs_binheap_ops::hop_exit</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="libcfs__heap_8h_source.html#l00192">cfs_binheap_remove_root()</a>.</p>

</div>
</div>
<a class="anchor" id="ga74fc5506ec7eed820dd36d5309316fa7"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_remove_root" ref="ga74fc5506ec7eed820dd36d5309316fa7" args="(struct cfs_binheap *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a>* cfs_binheap_remove_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00192">192</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>References <a class="el" href="heap_8c_source.html#l00292">cfs_binheap_find()</a>, and <a class="el" href="heap_8c_source.html#l00455">cfs_binheap_remove()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6d6545b20a149a20add24b5496f49b5a"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_root" ref="ga6d6545b20a149a20add24b5496f49b5a" args="(struct cfs_binheap *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a>* cfs_binheap_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00186">186</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>References <a class="el" href="heap_8c_source.html#l00292">cfs_binheap_find()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0af9fab8c6618ca160554bb560dca4c4"></a><!-- doxytag: member="heap.c::cfs_binheap_sink" ref="ga0af9fab8c6618ca160554bb560dca4c4" args="(struct cfs_binheap *h, struct cfs_binheap_node *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cfs_binheap_sink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap__node.html">cfs_binheap_node</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Moves a node downwards, towards the last level of the binary tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>h</em>&nbsp;</td><td>The heap </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>e</em>&nbsp;</td><td>The node</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>The position of <em>e</em> in the tree was changed at least once </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>The position of <em>e</em> in the tree was not changed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="heap_8c_source.html#l00354">354</a> of file <a class="el" href="heap_8c_source.html">heap.c</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>, <a class="el" href="libcfs__heap_8h_source.html#l00153">cfs_binheap::cbh_ops</a>, <a class="el" href="heap_8c_source.html#l00267">cfs_binheap_pointer()</a>, <a class="el" href="libcfs__heap_8h_source.html#l00068">cfs_binheap_node::chn_index</a>, <a class="el" href="structcfs__binheap__ops.html#a871342e2162314a3c37f78c374a5c472">cfs_binheap_ops::hop_compare</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="heap_8c_source.html#l00493">cfs_binheap_relocate()</a>.</p>

</div>
</div>
<a class="anchor" id="gadc26f0febb0b3113bc1dfea04dc33c24"></a><!-- doxytag: member="libcfs_heap.h::cfs_binheap_size" ref="gadc26f0febb0b3113bc1dfea04dc33c24" args="(struct cfs_binheap *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cfs_binheap_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__binheap.html">cfs_binheap</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs__heap_8h_source.html#l00174">174</a> of file <a class="el" href="libcfs__heap_8h_source.html">libcfs_heap.h</a>.</p>

<p>References <a class="el" href="libcfs__heap_8h_source.html#l00147">cfs_binheap::cbh_nelements</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
