<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: libcfs/include/libcfs/linux/libcfs.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>libcfs/include/libcfs/linux/libcfs.h File Reference</h1><code>#include &lt;linux/bitops.h&gt;</code><br/>
<code>#include &lt;linux/compiler.h&gt;</code><br/>
<code>#include &lt;linux/ctype.h&gt;</code><br/>
<code>#include &lt;linux/errno.h&gt;</code><br/>
<code>#include &lt;linux/file.h&gt;</code><br/>
<code>#include &lt;linux/fs.h&gt;</code><br/>
<code>#include &lt;linux/highmem.h&gt;</code><br/>
<code>#include &lt;linux/interrupt.h&gt;</code><br/>
<code>#include &lt;linux/kallsyms.h&gt;</code><br/>
<code>#include &lt;linux/kernel.h&gt;</code><br/>
<code>#include &lt;linux/kmod.h&gt;</code><br/>
<code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;linux/miscdevice.h&gt;</code><br/>
<code>#include &lt;linux/mm.h&gt;</code><br/>
<code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/moduleparam.h&gt;</code><br/>
<code>#include &lt;linux/mutex.h&gt;</code><br/>
<code>#include &lt;linux/notifier.h&gt;</code><br/>
<code>#include &lt;linux/random.h&gt;</code><br/>
<code>#include &lt;linux/rbtree.h&gt;</code><br/>
<code>#include &lt;linux/rwsem.h&gt;</code><br/>
<code>#include &lt;linux/scatterlist.h&gt;</code><br/>
<code>#include &lt;linux/sched.h&gt;</code><br/>
<code>#include &lt;linux/signal.h&gt;</code><br/>
<code>#include &lt;linux/slab.h&gt;</code><br/>
<code>#include &lt;linux/smp.h&gt;</code><br/>
<code>#include &lt;linux/stat.h&gt;</code><br/>
<code>#include &lt;linux/string.h&gt;</code><br/>
<code>#include &lt;linux/time.h&gt;</code><br/>
<code>#include &lt;linux/timer.h&gt;</code><br/>
<code>#include &lt;linux/types.h&gt;</code><br/>
<code>#include &lt;linux/unistd.h&gt;</code><br/>
<code>#include &lt;linux/vmalloc.h&gt;</code><br/>
<code>#include &lt;net/sock.h&gt;</code><br/>
<code>#include &lt;linux/atomic.h&gt;</code><br/>
<code>#include &lt;asm/div64.h&gt;</code><br/>
<code>#include &lt;linux/timex.h&gt;</code><br/>
<code>#include &lt;linux/uaccess.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="linux-cpu_8h_source.html">libcfs/linux/linux-cpu.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="linux-time_8h_source.html">libcfs/linux/linux-time.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="linux-mem_8h_source.html">libcfs/linux/linux-mem.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="linux-misc_8h_source.html">libcfs/linux/linux-misc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="linux-fs_8h_source.html">libcfs/linux/linux-fs.h</a>&gt;</code><br/>

<p><a href="linux_2libcfs_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#acfc503af60449eda663b349b5c16faf0">CDEBUG_STACK</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#a1f344bef09403e4e6b1c9119254be4a1">__CHECK_STACK</a>(msgdata, mask, cdls)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#ad2d0f10c02056c04ed00c3a1ef3ae20d">CFS_CHECK_STACK</a>(msgdata, mask, cdls)&nbsp;&nbsp;&nbsp;__CHECK_STACK(msgdata, mask, cdls)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#abe89a3a6d0dc0d2df1d2592526ff9010">CFS_CURPROC_COMM_MAX</a>&nbsp;&nbsp;&nbsp;(sizeof ((struct task_struct *)0)-&gt;comm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Platform specific declarations for cfs_curproc API (<a class="el" href="curproc_8h.html">libcfs/curproc.h</a>).  <a href="#abe89a3a6d0dc0d2df1d2592526ff9010"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#a9fce95151f16556044079367a03239bb">current_pid</a>()&nbsp;&nbsp;&nbsp;(current-&gt;pid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#abf3c2c07ba6bba1be0b48e2d9c5c10ea">current_comm</a>()&nbsp;&nbsp;&nbsp;(current-&gt;comm)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#a9e1ddc2dec795ae28ef37d90d2065a77">lprocfs_call_handler</a> (void *data, int write, loff_t *ppos, void __user *buffer, size_t *lenp, int(*handler)(void *data, int write, loff_t pos, void __user *buffer, int len))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linux_2libcfs_8h.html#ae2fca6d15f042999566c6f4398d5ceb9">current_is_32bit</a> (void)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a1f344bef09403e4e6b1c9119254be4a1"></a><!-- doxytag: member="libcfs.h::__CHECK_STACK" ref="a1f344bef09403e4e6b1c9119254be4a1" args="(msgdata, mask, cdls)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __CHECK_STACK</td>
          <td>(</td>
          <td class="paramtype">msgdata, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mask, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cdls&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                    \
        <span class="keywordflow">if</span> (<a class="code" href="libcfs__private_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="linux_2libcfs_8h.html#acfc503af60449eda663b349b5c16faf0">CDEBUG_STACK</a>() &gt; <a class="code" href="libcfs__debug_8h.html#aaadf520b1d87f162c06bd29b22d53b0d">libcfs_stack</a>)) {                  \
                <a class="code" href="libcfs__debug_8h.html#ac15745017cf019588c0ac987089076dd">LIBCFS_DEBUG_MSG_DATA_INIT</a>(msgdata, <a class="code" href="libcfs__debug_8h.html#acca9c9cff9837f6f3d2759b02a61ff1d">D_WARNING</a>, NULL);   \
                <a class="code" href="libcfs__debug_8h.html#aaadf520b1d87f162c06bd29b22d53b0d">libcfs_stack</a> = <a class="code" href="linux_2libcfs_8h.html#acfc503af60449eda663b349b5c16faf0">CDEBUG_STACK</a>();                          \
                <a class="code" href="libcfs__debug_8h.html#a5235a496d6d927890d31b4b47a314077">libcfs_debug_msg</a>(msgdata,                               \
                                 <span class="stringliteral">&quot;maximum lustre stack %lu\n&quot;</span>,          \
                                 <a class="code" href="linux_2libcfs_8h.html#acfc503af60449eda663b349b5c16faf0">CDEBUG_STACK</a>());                       \
                (msgdata)-&gt;msg_mask = mask;                             \
                (msgdata)-&gt;msg_cdls = cdls;                             \
                dump_stack();                                           \
              <span class="comment">/*panic(&quot;LBUG&quot;);*/</span>                                        \
        }                                                               \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Definition at line <a class="el" href="linux_2libcfs_8h_source.html#l00105">105</a> of file <a class="el" href="linux_2libcfs_8h_source.html">libcfs.h</a>.</p>

</div>
</div>
<a class="anchor" id="acfc503af60449eda663b349b5c16faf0"></a><!-- doxytag: member="libcfs.h::CDEBUG_STACK" ref="acfc503af60449eda663b349b5c16faf0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDEBUG_STACK</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(THREAD_SIZE -                                 \
                          ((<span class="keywordtype">unsigned</span> long)__builtin_frame_address(0) &amp;  \
                           (THREAD_SIZE - 1)))
</pre></div>
<p>Definition at line <a class="el" href="linux_2libcfs_8h_source.html#l00100">100</a> of file <a class="el" href="linux_2libcfs_8h_source.html">libcfs.h</a>.</p>

<p>Referenced by <a class="el" href="tracefile_8c_source.html#l00475">cfs_trace_assertion_failed()</a>, and <a class="el" href="tracefile_8c_source.html#l00260">libcfs_debug_vmsg2()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2d0f10c02056c04ed00c3a1ef3ae20d"></a><!-- doxytag: member="libcfs.h::CFS_CHECK_STACK" ref="ad2d0f10c02056c04ed00c3a1ef3ae20d" args="(msgdata, mask, cdls)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CFS_CHECK_STACK</td>
          <td>(</td>
          <td class="paramtype">msgdata, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mask, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cdls&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;__CHECK_STACK(msgdata, mask, cdls)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="linux_2libcfs_8h_source.html#l00119">119</a> of file <a class="el" href="linux_2libcfs_8h_source.html">libcfs.h</a>.</p>

</div>
</div>
<a class="anchor" id="abe89a3a6d0dc0d2df1d2592526ff9010"></a><!-- doxytag: member="libcfs.h::CFS_CURPROC_COMM_MAX" ref="abe89a3a6d0dc0d2df1d2592526ff9010" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CFS_CURPROC_COMM_MAX&nbsp;&nbsp;&nbsp;(sizeof ((struct task_struct *)0)-&gt;comm)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Platform specific declarations for cfs_curproc API (<a class="el" href="curproc_8h.html">libcfs/curproc.h</a>). </p>
<p>Implementation is in <a class="el" href="linux-curproc_8c.html">linux-curproc.c</a> </p>

<p>Definition at line <a class="el" href="linux_2libcfs_8h_source.html#l00130">130</a> of file <a class="el" href="linux_2libcfs_8h_source.html">libcfs.h</a>.</p>

</div>
</div>
<a class="anchor" id="abf3c2c07ba6bba1be0b48e2d9c5c10ea"></a><!-- doxytag: member="libcfs.h::current_comm" ref="abf3c2c07ba6bba1be0b48e2d9c5c10ea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define current_comm</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(current-&gt;comm)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="linux_2libcfs_8h_source.html#l00146">146</a> of file <a class="el" href="linux_2libcfs_8h_source.html">libcfs.h</a>.</p>

<p>Referenced by <a class="el" href="class__obd_8c_source.html#l00130">lustre_get_jobid()</a>, <a class="el" href="osc__request_8c_source.html#l02385">osc_iocontrol()</a>, <a class="el" href="osp__dev_8c_source.html#l01660">osp_iocontrol()</a>, <a class="el" href="client_8c_source.html#l01644">ptlrpc_check_set()</a>, <a class="el" href="client_8c_source.html#l01494">ptlrpc_send_new_req()</a>, and <a class="el" href="service_8c_source.html#l01999">ptlrpc_server_handle_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fce95151f16556044079367a03239bb"></a><!-- doxytag: member="libcfs.h::current_pid" ref="a9fce95151f16556044079367a03239bb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define current_pid</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(current-&gt;pid)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="linux_2libcfs_8h_source.html#l00145">145</a> of file <a class="el" href="linux_2libcfs_8h_source.html">libcfs.h</a>.</p>

<p>Referenced by <a class="el" href="llite__internal_8h_source.html#l01262">dentry_may_statahead()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="lfsck__engine_8c_source.html#l00996">lfsck_master_engine()</a>, <a class="el" href="libcfs_2libcfs_2debug_8c_source.html#l00251">libcfs_debug_dumplog()</a>, <a class="el" href="statahead_8c_source.html#l00868">ll_agl_thread()</a>, <a class="el" href="statahead_8c_source.html#l01198">ll_authorize_statahead()</a>, <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>, <a class="el" href="file_8c_source.html#l00314">ll_file_release()</a>, <a class="el" href="xattr_8c_source.html#l00357">ll_getxattr_common()</a>, <a class="el" href="xattr_8c_source.html#l00115">ll_setxattr_common()</a>, <a class="el" href="statahead_8c_source.html#l00967">ll_statahead_thread()</a>, <a class="el" href="lov__merge_8c_source.html#l00049">lov_merge_lvb_kms()</a>, <a class="el" href="lov__obd_8c_source.html#l01366">lov_stripe_lock()</a>, <a class="el" href="lov__obd_8c_source.html#l01375">lov_stripe_unlock()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="genops_8c_source.html#l01745">obd_zombie_barrier()</a>, <a class="el" href="genops_8c_source.html#l01830">obd_zombie_impexp_thread()</a>, <a class="el" href="linux-debug_8c_source.html#l00273">panic_notifier()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="pinger_8c_source.html#l00245">ptlrpc_pinger_main()</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l01494">ptlrpc_send_new_req()</a>, <a class="el" href="statahead_8c_source.html#l01534">start_statahead_thread()</a>, and <a class="el" href="tgt__handler_8c_source.html#l00653">tgt_request_handle()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae2fca6d15f042999566c6f4398d5ceb9"></a><!-- doxytag: member="libcfs.h::current_is_32bit" ref="ae2fca6d15f042999566c6f4398d5ceb9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int current_is_32bit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9e1ddc2dec795ae28ef37d90d2065a77"></a><!-- doxytag: member="libcfs.h::lprocfs_call_handler" ref="a9e1ddc2dec795ae28ef37d90d2065a77" args="(void *data, int write, loff_t *ppos, void __user *buffer, size_t *lenp, int(*handler)(void *data, int write, loff_t pos, void __user *buffer, int len))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lprocfs_call_handler </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>ppos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>lenp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *data, int write, loff_t pos, void __user *buffer, int len)&nbsp;</td>
          <td class="paramname"> <em>handler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00164">164</a> of file <a class="el" href="libcfs_2libcfs_2module_8c_source.html">module.c</a>.</p>

<p>References <a class="el" href="rename__many_8c_source.html#l00079">handler()</a>.</p>

<p>Referenced by <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00463">proc_cpt_table()</a>, <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00270">proc_daemon_file()</a>, <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00296">proc_debug_mb()</a>, <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00226">proc_dobitmasks()</a>, <a class="el" href="libcfs_2libcfs_2module_8c_source.html#l00246">proc_dump_kernel()</a>, <a class="el" href="router__proc_8c_source.html#l00626">proc_lnet_buffers()</a>, <a class="el" href="router__proc_8c_source.html#l00852">proc_lnet_portal_rotor()</a>, and <a class="el" href="router__proc_8c_source.html#l00129">proc_lnet_stats()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:45 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
