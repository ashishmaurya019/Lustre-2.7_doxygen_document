<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/llite/dir.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/llite/dir.c File Reference</h1><code>#include &lt;linux/fs.h&gt;</code><br/>
<code>#include &lt;linux/pagemap.h&gt;</code><br/>
<code>#include &lt;linux/mm.h&gt;</code><br/>
<code>#include &lt;linux/version.h&gt;</code><br/>
<code>#include &lt;linux/user_namespace.h&gt;</code><br/>
<code>#include &lt;asm/uaccess.h&gt;</code><br/>
<code>#include &lt;linux/buffer_head.h&gt;</code><br/>
<code>#include &lt;linux/pagevec.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__ioctl_8h_source.html">lustre_ioctl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__kernelcomm_8h_source.html">lustre_kernelcomm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__swab_8h_source.html">lustre_swab.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="llite__internal_8h_source.html">llite_internal.h</a>&quot;</code><br/>

<p><a href="dir_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LLITE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a91c3bb80c2e95c70a81d9a67796bed3d">ll_putname</a>(<a class="el" href="parallel__grouplock_8c.html#a582cf4e6d51f51bab9e0e27ce07bb334">filename</a>)&nbsp;&nbsp;&nbsp;OBD_FREE(<a class="el" href="parallel__grouplock_8c.html#a582cf4e6d51f51bab9e0e27ce07bb334">filename</a>, NAME_MAX + 1);</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct page *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a252cd1012e3753c4add6cdd2cad85fd0">ll_get_dir_page</a> (struct inode *<a class="el" href="mdsrate_8c.html#a929b6cee0a8e867ee7380bf26947cef2">dir</a>, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> offset, struct <a class="el" href="structll__dir__chain.html">ll_dir_chain</a> *chain)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a2cc8bab6f0014a701581e84a4010f9cd">ll_release_page</a> (struct inode *inode, struct page *page, bool remove)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a28e60037cc441f94af007a1f29e33f9d">ll_dirent_type_get</a> (struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *ent)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return IF_* type for given <a class="el" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> entry.  <a href="#a28e60037cc441f94af007a1f29e33f9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a0becafca92b5a5061f857d9d10844954">ll_dir_read</a> (struct inode *inode, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *ppos, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, void *cookie, filldir_t filldir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a02fc49484dd637318ad2cc32510eff5d">ll_readdir</a> (struct file *filp, void *cookie, filldir_t filldir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a4d63a10e318aa7dfbf234601525038e4">ll_send_mgc_param</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *mgc, char *string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a25ce5b790c9240ef7ae2a430a9204a10">ll_dir_setdirstripe</a> (struct inode *parent, struct lmv_user_md *lump, const char *dirname, umode_t <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create striped directory with specified stripe().  <a href="#a25ce5b790c9240ef7ae2a430a9204a10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a1d2e95c2fe9223c7f6217cebd9dfb422">ll_dir_setstripe</a> (struct inode *inode, struct lov_user_md *lump, int set_default)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a61a3bfb99fbd368040679a9f59d8ba7b">ll_dir_getstripe</a> (struct inode *inode, void **plmm, int *plmm_size, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request, u64 valid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function will be used to get default LOV/LMV/Default LMV  will be used to indicate which stripe it will retrieve OBD_MD_MEA LMV stripe EA OBD_MD_DEFAULT_MEA Default LMV stripe EA otherwise Default LOV EA.  <a href="#a61a3bfb99fbd368040679a9f59d8ba7b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a4b67ef8b120e0ebe58224f0081232b0d">ll_get_mdt_idx_by_fid</a> (struct <a class="el" href="structll__sb__info.html">ll_sb_info</a> *sbi, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a1aff8da586bd84f694e721478e32827a">ll_get_mdt_idx</a> (struct inode *inode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#ad66174423e9c7390289db1b45e05b616">ll_ioc_copy_start</a> (struct super_block *sb, struct <a class="el" href="structhsm__copy.html">hsm_copy</a> *copy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic handler to do any pre-copy work.  <a href="#ad66174423e9c7390289db1b45e05b616"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a84e98ec1afa4c0155bc90bb16adc9f07">ll_ioc_copy_end</a> (struct super_block *sb, struct <a class="el" href="structhsm__copy.html">hsm_copy</a> *copy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic handler to do any post-copy work.  <a href="#a84e98ec1afa4c0155bc90bb16adc9f07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a2a0b635338a22d9b3cd9749bbc6fe0cb">copy_and_ioctl</a> (int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const void __user *data, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a4bf17082610eeafac6f8552b1800f725">quotactl_ioctl</a> (struct <a class="el" href="structll__sb__info.html">ll_sb_info</a> *sbi, struct <a class="el" href="structif__quotactl.html">if_quotactl</a> *qctl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#ae7ecc58abec640306d59276188d20acf">ll_getname</a> (const char __user *<a class="el" href="parallel__grouplock_8c.html#a582cf4e6d51f51bab9e0e27ce07bb334">filename</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a6c035f1b0aaec9aee14d4bb3f061fb43">ll_dir_ioctl</a> (struct file *file, unsigned int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, unsigned long arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static loff_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#ac7598782724545a0c4369cc8fd914667">ll_dir_seek</a> (struct file *file, loff_t offset, int origin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#ab2f5f48bd1716323320be7b1bdf0fcd7">ll_dir_open</a> (struct inode *inode, struct file *file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a5819df2f49651137b6db80229333882a">ll_dir_release</a> (struct inode *inode, struct file *file)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8c.html#a66da0db9bdc04362a81cc4fafe8b56b6">ll_dir_operations</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="dir.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LLITE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00053">53</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

</div>
</div>
<a class="anchor" id="a91c3bb80c2e95c70a81d9a67796bed3d"></a><!-- doxytag: member="dir.c::ll_putname" ref="a91c3bb80c2e95c70a81d9a67796bed3d" args="(filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ll_putname</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="parallel__grouplock_8c.html#a582cf4e6d51f51bab9e0e27ce07bb334">filename</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;OBD_FREE(<a class="el" href="parallel__grouplock_8c.html#a582cf4e6d51f51bab9e0e27ce07bb334">filename</a>, NAME_MAX + 1);</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l01095">1095</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2a0b635338a22d9b3cd9749bbc6fe0cb"></a><!-- doxytag: member="dir.c::copy_and_ioctl" ref="a2a0b635338a22d9b3cd9749bbc6fe0cb" args="(int cmd, struct obd_export *exp, const void __user *data, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int copy_and_ioctl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void __user *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00917">917</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a61a3bfb99fbd368040679a9f59d8ba7b"></a><!-- doxytag: member="dir.c::ll_dir_getstripe" ref="a61a3bfb99fbd368040679a9f59d8ba7b" args="(struct inode *inode, void **plmm, int *plmm_size, struct ptlrpc_request **request, u64 valid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ll_dir_getstripe </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>plmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>plmm_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>valid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function will be used to get default LOV/LMV/Default LMV  will be used to indicate which stripe it will retrieve OBD_MD_MEA LMV stripe EA OBD_MD_DEFAULT_MEA Default LMV stripe EA otherwise Default LOV EA. </p>
<p>Each time, it can only retrieve 1 stripe EA </p>

<p>Definition at line <a class="el" href="dir_8c_source.html#l00631">631</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="llite__lib_8c_source.html#l02507">ll_finish_md_op_data()</a>, <a class="el" href="llite__lib_8c_source.html#l00649">ll_get_default_mdsize()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="llite__internal_8h_source.html#l01105">ll_inode2fid()</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="llite__lib_8c_source.html#l02440">ll_prep_md_op_data()</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__user_8h_source.html#l00343">LMV_USER_MAGIC</a>, <a class="el" href="lustre__user_8h_source.html#l00458">lmv_user_md</a>, <a class="el" href="packet-lustre_8c_source.html#l00086">LOV_MAGIC</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01502">lov_mds_md</a>, <a class="el" href="llite__internal_8h_source.html#l00940">LUSTRE_OPC_ANY</a>, <a class="el" href="pack__generic_8c_source.html#l02091">lustre_swab_lmv_mds_md()</a>, <a class="el" href="req-layout_8c_source.html#l00114">lustre_swab_lmv_user_md</a>, <a class="el" href="pack__generic_8c_source.html#l02165">lustre_swab_lov_user_md_v1()</a>, <a class="el" href="pack__generic_8c_source.html#l02174">lustre_swab_lov_user_md_v3()</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="obd__class_8h_source.html#l01282">md_getattr()</a>, <a class="el" href="lustre__idl_8h_source.html#l01684">OBD_MD_FLDIREA</a>, <a class="el" href="lustre__idl_8h_source.html#l01672">OBD_MD_FLEASIZE</a>, <a class="el" href="obd_8h_source.html#l00826">md_op_data::op_valid</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l02186">req_capsule_server_sized_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="layout_8c_source.html#l01058">RMF_MDT_MD</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>, <a class="el" href="xattr_8c_source.html#l00521">ll_getxattr_lov()</a>, and <a class="el" href="namei_8c_source.html#l00946">ll_new_node()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c035f1b0aaec9aee14d4bb3f061fb43"></a><!-- doxytag: member="dir.c::ll_dir_ioctl" ref="a6c035f1b0aaec9aee14d4bb3f061fb43" args="(struct file *file, unsigned int cmd, unsigned long arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static long ll_dir_ioctl </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l01097">1097</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="ioctl_8h_source.html#l00048">__user</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="linux-curproc_8c_source.html#l00128">cfs_capable()</a>, <a class="el" href="dir_8c_source.html#l00917">copy_and_ioctl()</a>, <a class="el" href="linux_2libcfs_8h_source.html#l00145">current_pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00150">D_VFSTRACE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="llite__internal_8h_source.html#l00679">ll_file_data::fd_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="mdsrate_8c_source.html#l00127">filename</a>, <a class="el" href="lustre__user_8h_source.html#l00088">FSFILT_IOC_GETFLAGS</a>, <a class="el" href="lustre__user_8h_source.html#l00090">FSFILT_IOC_GETVERSION</a>, <a class="el" href="lustre__user_8h_source.html#l00092">FSFILT_IOC_GETVERSION_OLD</a>, <a class="el" href="lustre__user_8h_source.html#l00089">FSFILT_IOC_SETFLAGS</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01353">hsm_progress::hp_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01356">hsm_progress::hp_errval</a>, <a class="el" href="lustre__user_8h_source.html#l01354">hsm_progress::hp_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01352">hsm_progress::hp_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01355">hsm_progress::hp_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03743">hsm_progress_kernel::hpk_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01163">hsm_request::hr_action</a>, <a class="el" href="lustre__user_8h_source.html#l01166">hsm_request::hr_itemcount</a>, <a class="el" href="lustre__user_8h_source.html#l01133">HUA_RELEASE</a>, <a class="el" href="lustre__user_8h_source.html#l01171">hsm_user_item::hui_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01195">hur_len()</a>, <a class="el" href="lustre__user_8h_source.html#l01176">hsm_user_request::hur_request</a>, <a class="el" href="lustre__user_8h_source.html#l01177">hsm_user_request::hur_user_item</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00107">obd_ioctl_data::ioc_inlbuf1</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00109">obd_ioctl_data::ioc_inlbuf2</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00106">obd_ioctl_data::ioc_inllen1</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00108">obd_ioctl_data::ioc_inllen2</a>, <a class="el" href="lustre__user_8h_source.html#l00313">IOC_MDC_GETFILEINFO</a>, <a class="el" href="lustre__user_8h_source.html#l00312">IOC_MDC_GETFILESTRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00311">IOC_MDC_LOOKUP</a>, <a class="el" href="lustre__user_8h_source.html#l00260">IOC_OBD_STATFS</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00097">obd_ioctl_data::ioc_type</a>, <a class="el" href="obd_8h_source.html#l00757">KEY_TGT_COUNT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="dir_8c_source.html#l00631">ll_dir_getstripe()</a>, <a class="el" href="dir_8c_source.html#l00449">ll_dir_setdirstripe()</a>, <a class="el" href="dir_8c_source.html#l00514">ll_dir_setstripe()</a>, <a class="el" href="llite__internal_8h_source.html#l00524">ll_sb_info::ll_dt_exp</a>, <a class="el" href="file_8c_source.html#l01811">ll_fid2path()</a>, <a class="el" href="lustre__user_8h_source.html#l00334">LL_FILE_RMTACL</a>, <a class="el" href="llite__internal_8h_source.html#l00528">ll_sb_info::ll_flags</a>, <a class="el" href="llite__lib_8c_source.html#l02145">ll_flush_ctx()</a>, <a class="el" href="file_8c_source.html#l03049">ll_get_fid_by_name()</a>, <a class="el" href="llite__lib_8c_source.html#l02583">ll_get_fsname()</a>, <a class="el" href="dir_8c_source.html#l00734">ll_get_mdt_idx()</a>, <a class="el" href="dir_8c_source.html#l00709">ll_get_mdt_idx_by_fid()</a>, <a class="el" href="llite__lib_8c_source.html#l02555">ll_get_obd_name()</a>, <a class="el" href="dir_8c_source.html#l01072">ll_getname()</a>, <a class="el" href="llite__lib_8c_source.html#l02770">ll_getparent()</a>, <a class="el" href="file_8c_source.html#l01915">ll_hsm_release()</a>, <a class="el" href="llite__internal_8h_source.html#l01100">ll_i2mdexp()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="llite__internal_8h_source.html#l01105">ll_inode2fid()</a>, <a class="el" href="dir_8c_source.html#l00829">ll_ioc_copy_end()</a>, <a class="el" href="dir_8c_source.html#l00750">ll_ioc_copy_start()</a>, <a class="el" href="lustre__user_8h_source.html#l00295">LL_IOC_FID2MDTIDX</a>, <a class="el" href="lustre__user_8h_source.html#l00262">LL_IOC_FLUSHCTX</a>, <a class="el" href="lustre__user_8h_source.html#l00270">LL_IOC_GET_CONNECT_FLAGS</a>, <a class="el" href="lustre__user_8h_source.html#l00271">LL_IOC_GET_MDTIDX</a>, <a class="el" href="lustre__user_8h_source.html#l00264">LL_IOC_GETOBDCOUNT</a>, <a class="el" href="lustre__user_8h_source.html#l00296">LL_IOC_GETPARENT</a>, <a class="el" href="lustre__user_8h_source.html#l00278">LL_IOC_HSM_COPY_END</a>, <a class="el" href="lustre__user_8h_source.html#l00277">LL_IOC_HSM_COPY_START</a>, <a class="el" href="lustre__user_8h_source.html#l00276">LL_IOC_HSM_CT_START</a>, <a class="el" href="lustre__user_8h_source.html#l00279">LL_IOC_HSM_PROGRESS</a>, <a class="el" href="lustre__user_8h_source.html#l00280">LL_IOC_HSM_REQUEST</a>, <a class="el" href="lustre__user_8h_source.html#l00288">LL_IOC_LMV_GETSTRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00293">LL_IOC_LMV_SET_DEFAULT_STRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00287">LL_IOC_LMV_SETSTRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00251">LL_IOC_LOV_GETSTRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00250">LL_IOC_LOV_SETSTRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00282">LL_IOC_LOV_SWAP_LAYOUTS</a>, <a class="el" href="lustre__user_8h_source.html#l00314">LL_IOC_MDC_GETINFO</a>, <a class="el" href="lustre__user_8h_source.html#l00294">LL_IOC_MIGRATE</a>, <a class="el" href="lustre__user_8h_source.html#l00269">LL_IOC_PATH2FID</a>, <a class="el" href="lustre__user_8h_source.html#l00289">LL_IOC_REMOVE_ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00263">LL_IOC_RMTACL</a>, <a class="el" href="llite__lib_8c_source.html#l02064">ll_iocontrol()</a>, <a class="el" href="file_8c_source.html#l01471">ll_lov_getstripe_ea_info()</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="file_8c_source.html#l03083">ll_migrate()</a>, <a class="el" href="llite__lib_8c_source.html#l02369">ll_obd_statfs()</a>, <a class="el" href="dir_8c_source.html#l01095">ll_putname</a>, <a class="el" href="llite__internal_8h_source.html#l00581">ll_sb_info::ll_rct</a>, <a class="el" href="namei_8c_source.html#l01243">ll_rmdir_entry()</a>, <a class="el" href="llite__internal_8h_source.html#l00431">LL_SBI_RMT_CLIENT</a>, <a class="el" href="llite__internal_8h_source.html#l00737">ll_stats_ops_tally()</a>, <a class="el" href="lustre__user_8h_source.html#l00385">lov_user_md_v1::lmm_magic</a>, <a class="el" href="lustre__user_8h_source.html#l00412">lov_user_md_v3::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02672">lmv_mds_md_stripe_count_get()</a>, <a class="el" href="lustre__user_8h_source.html#l00343">LMV_USER_MAGIC</a>, <a class="el" href="lustre__user_8h_source.html#l00458">lmv_user_md</a>, <a class="el" href="lustre__user_8h_source.html#l00472">lmv_user_md_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l01502">lov_mds_md</a>, <a class="el" href="lustre__user_8h_source.html#l00339">LOV_USER_MAGIC_V3</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, <a class="el" href="llite__internal_8h_source.html#l00747">LPROC_LL_IOCTL</a>, <a class="el" href="llite__internal_8h_source.html#l00078">LUSTRE_FPRIVATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02195">mdt_body::mbo_atime</a>, <a class="el" href="lustre__idl_8h_source.html#l02197">mdt_body::mbo_blocks</a>, <a class="el" href="lustre__idl_8h_source.html#l02196">mdt_body::mbo_ctime</a>, <a class="el" href="lustre__idl_8h_source.html#l02207">mdt_body::mbo_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l02205">mdt_body::mbo_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02194">mdt_body::mbo_mtime</a>, <a class="el" href="lustre__idl_8h_source.html#l02210">mdt_body::mbo_nlink</a>, <a class="el" href="lustre__idl_8h_source.html#l02209">mdt_body::mbo_rdev</a>, <a class="el" href="lustre__idl_8h_source.html#l02193">mdt_body::mbo_size</a>, <a class="el" href="lustre__idl_8h_source.html#l02206">mdt_body::mbo_uid</a>, <a class="el" href="lustre__net_8h_source.html#l00330">MDS_MAXREQSIZE</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01233">OBD_CONNECT_LVB_TYPE</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00505">obd_get_info()</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00374">OBD_IOC_CHANGELOG_CLEAR</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00360">OBD_IOC_CHANGELOG_SEND</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00362">OBD_IOC_FID2PATH</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00347">OBD_IOC_GETDTNAME</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00346">OBD_IOC_GETMDNAME</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00370">OBD_IOC_QUOTACTL</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="lustre_2obdclass_2linux_2linux-module_8c_source.html#l00080">obd_ioctl_getdata()</a>, <a class="el" href="lustre__idl_8h_source.html#l01718">OBD_MD_DEFAULT_MEA</a>, <a class="el" href="lustre__idl_8h_source.html#l01691">OBD_MD_MEA</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="dir_8c_source.html#l00939">quotactl_ioctl()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="llite__nfs_8c_source.html#l00060">search_inode_for_lustre()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2f5f48bd1716323320be7b1bdf0fcd7"></a><!-- doxytag: member="dir.c::ll_dir_open" ref="ab2f5f48bd1716323320be7b1bdf0fcd7" args="(struct inode *inode, struct file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_dir_open </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l01778">1778</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="file_8c_source.html#l00491">ll_file_open()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a0becafca92b5a5061f857d9d10844954"></a><!-- doxytag: member="dir.c::ll_dir_read" ref="a0becafca92b5a5061f857d9d10844954" args="(struct inode *inode, __u64 *ppos, struct md_op_data *op_data, void *cookie, filldir_t filldir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ll_dir_read </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>ppos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">filldir_t&nbsp;</td>
          <td class="paramname"> <em>filldir</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00214">214</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lcommon__cl_8c_source.html#l00269">cl_fid_build_ino()</a>, <a class="el" href="parser_8c_source.html#l00044">done</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00898">lu_dirent::lde_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00900">lu_dirent::lde_hash</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="lustre__idl_8h_source.html#l00960">LDF_COLLIDE</a>, <a class="el" href="lustre__idl_8h_source.html#l00947">lu_dirpage::ldp_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00946">lu_dirpage::ldp_hash_end</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="llite__internal_8h_source.html#l00785">ll_dir_chain_fini()</a>, <a class="el" href="llite__internal_8h_source.html#l00781">ll_dir_chain_init()</a>, <a class="el" href="dir_8c_source.html#l00191">ll_dirent_type_get()</a>, <a class="el" href="llite__internal_8h_source.html#l00528">ll_sb_info::ll_flags</a>, <a class="el" href="dir_8c_source.html#l00149">ll_get_dir_page()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="llite__internal_8h_source.html#l00706">ll_need_32bit_api()</a>, <a class="el" href="dir_8c_source.html#l00164">ll_release_page()</a>, <a class="el" href="llite__internal_8h_source.html#l00439">LL_SBI_64BIT_HASH</a>, <a class="el" href="lustre__idl_8h_source.html#l00971">lu_dirent_next()</a>, <a class="el" href="lustre__idl_8h_source.html#l00963">lu_dirent_start()</a>, <a class="el" href="lustre__idl_8h_source.html#l00997">MDS_DIR_END_OFF</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="llite__nfs_8c_source.html#l00221">ll_get_name()</a>, and <a class="el" href="dir_8c_source.html#l00328">ll_readdir()</a>.</p>

</div>
</div>
<a class="anchor" id="a5819df2f49651137b6db80229333882a"></a><!-- doxytag: member="dir.c::ll_dir_release" ref="a5819df2f49651137b6db80229333882a" args="(struct inode *inode, struct file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_dir_release </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l01784">1784</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="file_8c_source.html#l00314">ll_file_release()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ac7598782724545a0c4369cc8fd914667"></a><!-- doxytag: member="dir.c::ll_dir_seek" ref="ac7598782724545a0c4369cc8fd914667" args="(struct file *file, loff_t offset, int origin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static loff_t ll_dir_seek </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>origin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l01727">1727</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="llite__internal_8h_source.html#l00678">ll_file_data::lfd_pos</a>, <a class="el" href="llite__internal_8h_source.html#l00071">LL_DIR_END_OFF</a>, <a class="el" href="llite__internal_8h_source.html#l00072">LL_DIR_END_OFF_32BIT</a>, <a class="el" href="llite__internal_8h_source.html#l00528">ll_sb_info::ll_flags</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="llite__internal_8h_source.html#l00706">ll_need_32bit_api()</a>, <a class="el" href="llite__internal_8h_source.html#l00439">LL_SBI_64BIT_HASH</a>, <a class="el" href="llite__internal_8h_source.html#l00078">LUSTRE_FPRIVATE</a>, <a class="el" href="lustre__idl_8h_source.html#l00997">MDS_DIR_END_OFF</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>.</p>

</div>
</div>
<a class="anchor" id="a25ce5b790c9240ef7ae2a430a9204a10"></a><!-- doxytag: member="dir.c::ll_dir_setdirstripe" ref="a25ce5b790c9240ef7ae2a430a9204a10" args="(struct inode *parent, struct lmv_user_md *lump, const char *dirname, umode_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_dir_setdirstripe </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lmv_user_md *&nbsp;</td>
          <td class="paramname"> <em>lump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>dirname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">umode_t&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create striped directory with specified stripe(). </p>
<p>param[in]parent the parent of the directory. param[in]lump the specified stripes. param[in]dirname the name of the directory. param[in]mode the specified mode of the directory.</p>
<p>retval =0 if striped directory is being created successfully. &lt;0 if the creation is failed. </p>

<p>Definition at line <a class="el" href="dir_8c_source.html#l00449">449</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-curproc_8c_source.html#l00112">cfs_curproc_cap_pack()</a>, <a class="el" href="obd_8h_source.html#l00795">CLI_SET_MEA</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00150">D_VFSTRACE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00363">exp_connect_umask()</a>, <a class="el" href="curproc_8h_source.html#l00085">from_kgid()</a>, <a class="el" href="curproc_8h_source.html#l00080">from_kuid()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="llite__lib_8c_source.html#l02507">ll_finish_md_op_data()</a>, <a class="el" href="llite__internal_8h_source.html#l01100">ll_i2mdexp()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="xattr__security_8c_source.html#l00112">ll_init_security()</a>, <a class="el" href="llite__internal_8h_source.html#l01105">ll_inode2fid()</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="llite__lib_8c_source.html#l02284">ll_prep_inode()</a>, <a class="el" href="llite__lib_8c_source.html#l02440">ll_prep_md_op_data()</a>, <a class="el" href="lustre__user_8h_source.html#l00343">LMV_USER_MAGIC</a>, <a class="el" href="llite__internal_8h_source.html#l00936">LUSTRE_OPC_MKDIR</a>, <a class="el" href="req-layout_8c_source.html#l00114">lustre_swab_lmv_user_md</a>, <a class="el" href="obd__class_8h_source.html#l01316">md_create()</a>, <a class="el" href="lustre__idl_8h_source.html#l01246">OBD_CONNECT_DIR_STRIPE</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00513">OBD_FAIL_LLITE_NO_CHECK_DEAD</a>, <a class="el" href="obd_8h_source.html#l00838">md_op_data::op_cli_flags</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d2e95c2fe9223c7f6217cebd9dfb422"></a><!-- doxytag: member="dir.c::ll_dir_setstripe" ref="a1d2e95c2fe9223c7f6217cebd9dfb422" args="(struct inode *inode, struct lov_user_md *lump, int set_default)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ll_dir_setstripe </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lov_user_md *&nbsp;</td>
          <td class="paramname"> <em>lump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>set_default</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00514">514</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="mdsrate_8c_source.html#l00132">end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="llite__lib_8c_source.html#l02507">ll_finish_md_op_data()</a>, <a class="el" href="llite__lib_8c_source.html#l02583">ll_get_fsname()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="llite__lib_8c_source.html#l02440">ll_prep_md_op_data()</a>, <a class="el" href="dir_8c_source.html#l00419">ll_send_mgc_param()</a>, <a class="el" href="lustre__user_8h_source.html#l00343">LMV_USER_MAGIC</a>, <a class="el" href="lustre__user_8h_source.html#l00458">lmv_user_md</a>, <a class="el" href="lustre__user_8h_source.html#l00336">LOV_USER_MAGIC_V1</a>, <a class="el" href="lustre__user_8h_source.html#l00339">LOV_USER_MAGIC_V3</a>, <a class="el" href="llite__internal_8h_source.html#l00940">LUSTRE_OPC_ANY</a>, <a class="el" href="req-layout_8c_source.html#l00114">lustre_swab_lmv_user_md</a>, <a class="el" href="pack__generic_8c_source.html#l02165">lustre_swab_lov_user_md_v1()</a>, <a class="el" href="pack__generic_8c_source.html#l02174">lustre_swab_lov_user_md_v3()</a>, <a class="el" href="obd__class_8h_source.html#l01399">md_setattr()</a>, <a class="el" href="lustre__idl_8h_source.html#l02951">MGS_PARAM_MAXLEN</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>, and <a class="el" href="xattr_8c_source.html#l00265">ll_setxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a28e60037cc441f94af007a1f29e33f9d"></a><!-- doxytag: member="dir.c::ll_dirent_type_get" ref="a28e60037cc441f94af007a1f29e33f9d" args="(struct lu_dirent *ent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static u16 ll_dirent_type_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__dirent.html">lu_dirent</a> *&nbsp;</td>
          <td class="paramname"> <em>ent</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return IF_* type for given <a class="el" href="structlu__dirent.html" title="Layout of readdir pages, as transmitted on wire.">lu_dirent</a> entry. </p>
<p>IF_* flag shld be converted to particular OS file type in platform llite module. </p>

<p>Definition at line <a class="el" href="dir_8c_source.html#l00191">191</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="linux-fs_8h_source.html#l00080">IFTODT</a>, <a class="el" href="lustre__idl_8h_source.html#l00908">lu_dirent::lde_attrs</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l00941">luda_type::lt_type</a>, and <a class="el" href="lustre__idl_8h_source.html#l00871">LUDA_TYPE</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l00214">ll_dir_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a252cd1012e3753c4add6cdd2cad85fd0"></a><!-- doxytag: member="dir.c::ll_get_dir_page" ref="a252cd1012e3753c4add6cdd2cad85fd0" args="(struct inode *dir, struct md_op_data *op_data, __u64 offset, struct ll_dir_chain *chain)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct page* ll_get_dir_page </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structll__dir__chain.html">ll_dir_chain</a> *&nbsp;</td>
          <td class="paramname"> <em>chain</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00149">149</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="llite__internal_8h_source.html#l01100">ll_i2mdexp()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="structmd__callback.html#a0badebd22380956ad60edcabb363790a">md_callback::md_blocking_ast</a>, and <a class="el" href="obd__class_8h_source.html#l01424">md_read_page()</a>.</p>

<p>Referenced by <a class="el" href="statahead_8c_source.html#l01263">is_first_dirent()</a>, <a class="el" href="dir_8c_source.html#l00214">ll_dir_read()</a>, and <a class="el" href="statahead_8c_source.html#l00967">ll_statahead_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a1aff8da586bd84f694e721478e32827a"></a><!-- doxytag: member="dir.c::ll_get_mdt_idx" ref="a1aff8da586bd84f694e721478e32827a" args="(struct inode *inode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ll_get_mdt_idx </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00734">734</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="dir_8c_source.html#l00709">ll_get_mdt_idx_by_fid()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, and <a class="el" href="llite__internal_8h_source.html#l01105">ll_inode2fid()</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>, and <a class="el" href="file_8c_source.html#l02260">ll_file_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b67ef8b120e0ebe58224f0081232b0d"></a><!-- doxytag: member="dir.c::ll_get_mdt_idx_by_fid" ref="a4b67ef8b120e0ebe58224f0081232b0d" args="(struct ll_sb_info *sbi, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ll_get_mdt_idx_by_fid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structll__sb__info.html">ll_sb_info</a> *&nbsp;</td>
          <td class="paramname"> <em>sbi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00709">709</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="obd__class_8h_source.html#l01282">md_getattr()</a>, <a class="el" href="obd_8h_source.html#l00791">MF_GET_MDT_IDX</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>, <a class="el" href="dir_8c_source.html#l00734">ll_get_mdt_idx()</a>, and <a class="el" href="file_8c_source.html#l03083">ll_migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7ecc58abec640306d59276188d20acf"></a><!-- doxytag: member="dir.c::ll_getname" ref="ae7ecc58abec640306d59276188d20acf" args="(const char __user *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* ll_getname </td>
          <td>(</td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l01072">1072</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a84e98ec1afa4c0155bc90bb16adc9f07"></a><!-- doxytag: member="dir.c::ll_ioc_copy_end" ref="a84e98ec1afa4c0155bc90bb16adc9f07" args="(struct super_block *sb, struct hsm_copy *copy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_ioc_copy_end </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__copy.html">hsm_copy</a> *&nbsp;</td>
          <td class="paramname"> <em>copy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generic handler to do any post-copy work. </p>
<p>It will send the last <a class="el" href="structhsm__progress.html">hsm_progress</a> update to <a class="el" href="structcoordinator.html">coordinator</a> to inform it that copy is finished and whether it was successful or not.</p>
<p>Moreover,</p>
<ul>
<li>for ARCHIVE request, it will sample the file data version and compare it with the version saved in <a class="el" href="dir_8c.html#ad66174423e9c7390289db1b45e05b616" title="Generic handler to do any pre-copy work.">ll_ioc_copy_start()</a>. If they do not match, copy will be considered as failed.</li>
<li>for RESTORE request, it will sample the file data version and send it to <a class="el" href="structcoordinator.html">coordinator</a> which is useful if the file was imported as 'released'.</li>
</ul>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

<p>Definition at line <a class="el" href="dir_8c_source.html#l00829">829</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01361">hsm_copy::hc_data_version</a>, <a class="el" href="lustre__user_8h_source.html#l01363">hsm_copy::hc_errval</a>, <a class="el" href="lustre__user_8h_source.html#l01362">hsm_copy::hc_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01365">hsm_copy::hc_hai</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__user_8h_source.html#l01349">HP_FLAG_RETRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03743">hsm_progress_kernel::hpk_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="file_8c_source.html#l01869">ll_data_version()</a>, <a class="el" href="lustre__user_8h_source.html#l01028">LL_DV_RD_FLUSH</a>, <a class="el" href="lustre__user_8h_source.html#l00279">LL_IOC_HSM_PROGRESS</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="llite__internal_8h_source.html#l01067">ll_s2sbi</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="llite__nfs_8c_source.html#l00060">search_inode_for_lustre()</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="ad66174423e9c7390289db1b45e05b616"></a><!-- doxytag: member="dir.c::ll_ioc_copy_start" ref="ad66174423e9c7390289db1b45e05b616" args="(struct super_block *sb, struct hsm_copy *copy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_ioc_copy_start </td>
          <td>(</td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__copy.html">hsm_copy</a> *&nbsp;</td>
          <td class="paramname"> <em>copy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generic handler to do any pre-copy work. </p>
<p>It sends a first <a class="el" href="structhsm__progress.html">hsm_progress</a> (with extent length == 0) to <a class="el" href="structcoordinator.html">coordinator</a> as a first information for it that real work has started.</p>
<p>Moreover, for a ARCHIVE request, it will sample the file data version and store it in <em>copy</em>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

<p>Definition at line <a class="el" href="dir_8c_source.html#l00750">750</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01361">hsm_copy::hc_data_version</a>, <a class="el" href="lustre__user_8h_source.html#l01365">hsm_copy::hc_hai</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__user_8h_source.html#l01349">HP_FLAG_RETRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03743">hsm_progress_kernel::hpk_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="file_8c_source.html#l01869">ll_data_version()</a>, <a class="el" href="lustre__user_8h_source.html#l01028">LL_DV_RD_FLUSH</a>, <a class="el" href="lustre__user_8h_source.html#l00279">LL_IOC_HSM_PROGRESS</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="llite__internal_8h_source.html#l01067">ll_s2sbi</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="llite__nfs_8c_source.html#l00060">search_inode_for_lustre()</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a02fc49484dd637318ad2cc32510eff5d"></a><!-- doxytag: member="dir.c::ll_readdir" ref="a02fc49484dd637318ad2cc32510eff5d" args="(struct file *filp, void *cookie, filldir_t filldir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_readdir </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">filldir_t&nbsp;</td>
          <td class="paramname"> <em>filldir</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00328">328</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00150">D_VFSTRACE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="packet-lustre_8c_source.html#l00290">LCK_MINMODE</a>, <a class="el" href="llite__internal_8h_source.html#l00678">ll_file_data::lfd_pos</a>, <a class="el" href="llite__internal_8h_source.html#l00071">LL_DIR_END_OFF</a>, <a class="el" href="llite__internal_8h_source.html#l00072">LL_DIR_END_OFF_32BIT</a>, <a class="el" href="llite__nfs_8c_source.html#l00287">ll_dir_get_parent_fid()</a>, <a class="el" href="dir_8c_source.html#l00214">ll_dir_read()</a>, <a class="el" href="llite__lib_8c_source.html#l02507">ll_finish_md_op_data()</a>, <a class="el" href="llite__internal_8h_source.html#l00528">ll_sb_info::ll_flags</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="llite__internal_8h_source.html#l01090">ll_i2sbi()</a>, <a class="el" href="llite__internal_8h_source.html#l01105">ll_inode2fid()</a>, <a class="el" href="llite__internal_8h_source.html#l00554">ll_sb_info::ll_md_brw_pages</a>, <a class="el" href="llite__internal_8h_source.html#l00706">ll_need_32bit_api()</a>, <a class="el" href="llite__lib_8c_source.html#l02440">ll_prep_md_op_data()</a>, <a class="el" href="llite__internal_8h_source.html#l00439">LL_SBI_64BIT_HASH</a>, <a class="el" href="llite__internal_8h_source.html#l00737">ll_stats_ops_tally()</a>, <a class="el" href="llite__internal_8h_source.html#l00753">LPROC_LL_READDIR</a>, <a class="el" href="llite__internal_8h_source.html#l00078">LUSTRE_FPRIVATE</a>, <a class="el" href="llite__internal_8h_source.html#l00940">LUSTRE_OPC_ANY</a>, <a class="el" href="lustre__idl_8h_source.html#l00997">MDS_DIR_END_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="obd_8h_source.html#l00805">md_op_data::op_fid3</a>, <a class="el" href="obd_8h_source.html#l00834">md_op_data::op_max_pages</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a2cc8bab6f0014a701581e84a4010f9cd"></a><!-- doxytag: member="dir.c::ll_release_page" ref="a2cc8bab6f0014a701581e84a4010f9cd" args="(struct inode *inode, struct page *page, bool remove)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ll_release_page </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page *&nbsp;</td>
          <td class="paramname"> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>remove</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00164">164</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="llite__internal_8h_source.html#l00332">ll_i2info()</a>, and <a class="el" href="lustre__patchless__compat_8h_source.html#l00091">truncate_complete_page()</a>.</p>

<p>Referenced by <a class="el" href="statahead_8c_source.html#l01263">is_first_dirent()</a>, <a class="el" href="dir_8c_source.html#l00214">ll_dir_read()</a>, and <a class="el" href="statahead_8c_source.html#l00967">ll_statahead_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d63a10e318aa7dfbf234601525038e4"></a><!-- doxytag: member="dir.c::ll_send_mgc_param" ref="a4d63a10e318aa7dfbf234601525038e4" args="(struct obd_export *mgc, char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ll_send_mgc_param </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>mgc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00419">419</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__idl_8h_source.html#l02952">KEY_SET_INFO</a>, <a class="el" href="lustre__idl_8h_source.html#l02955">mgs_send_param::mgs_param</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l00514">ll_dir_setstripe()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bf17082610eeafac6f8552b1800f725"></a><!-- doxytag: member="dir.c::quotactl_ioctl" ref="a4bf17082610eeafac6f8552b1800f725" args="(struct ll_sb_info *sbi, struct if_quotactl *qctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int quotactl_ioctl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structll__sb__info.html">ll_sb_info</a> *&nbsp;</td>
          <td class="paramname"> <em>sbi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structif__quotactl.html">if_quotactl</a> *&nbsp;</td>
          <td class="paramname"> <em>qctl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dir_8c_source.html#l00939">939</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="linux-curproc_8c_source.html#l00128">cfs_capable()</a>, <a class="el" href="mdsrate_8c_source.html#l00115">cmd</a>, <a class="el" href="lustre__user_8h_source.html#l00662">obd_dqblk::dqb_curinodes</a>, <a class="el" href="lustre__user_8h_source.html#l00659">obd_dqblk::dqb_curspace</a>, <a class="el" href="lustre__user_8h_source.html#l00665">obd_dqblk::dqb_valid</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="llite__internal_8h_source.html#l00524">ll_sb_info::ll_dt_exp</a>, <a class="el" href="llite__internal_8h_source.html#l00528">ll_sb_info::ll_flags</a>, <a class="el" href="llite__internal_8h_source.html#l00523">ll_sb_info::ll_md_exp</a>, <a class="el" href="llite__internal_8h_source.html#l00431">LL_SBI_RMT_CLIENT</a>, <a class="el" href="curproc_8h_source.html#l00075">make_kgid()</a>, <a class="el" href="curproc_8h_source.html#l00070">make_kuid()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00370">OBD_IOC_QUOTACTL</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="obd__class_8h_source.html#l01213">obd_quotactl()</a>, <a class="el" href="lustre__user_8h_source.html#l00569">Q_GETOINFO</a>, <a class="el" href="lustre__user_8h_source.html#l00570">Q_GETOQUOTA</a>, <a class="el" href="lustre__idl_8h_source.html#l01856">obd_quotactl::qc_cmd</a>, <a class="el" href="lustre__user_8h_source.html#l00677">if_quotactl::qc_cmd</a>, <a class="el" href="lustre__idl_8h_source.html#l01861">obd_quotactl::qc_dqblk</a>, <a class="el" href="lustre__user_8h_source.html#l00670">QC_GENERAL</a>, <a class="el" href="lustre__idl_8h_source.html#l01858">obd_quotactl::qc_id</a>, <a class="el" href="lustre__user_8h_source.html#l00679">if_quotactl::qc_id</a>, <a class="el" href="lustre__user_8h_source.html#l00671">QC_MDTIDX</a>, <a class="el" href="lustre__user_8h_source.html#l00672">QC_OSTIDX</a>, <a class="el" href="lustre__idl_8h_source.html#l01857">obd_quotactl::qc_type</a>, <a class="el" href="lustre__user_8h_source.html#l00678">if_quotactl::qc_type</a>, <a class="el" href="lustre__user_8h_source.html#l00673">QC_UUID</a>, <a class="el" href="lustre__user_8h_source.html#l00681">if_quotactl::qc_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l01866">QCTL_COPY</a>, <a class="el" href="lustre__user_8h_source.html#l00626">QIF_INODES</a>, <a class="el" href="lustre__user_8h_source.html#l00624">QIF_SPACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="curproc_8h_source.html#l00090">uid_eq()</a>.</p>

<p>Referenced by <a class="el" href="dir_8c_source.html#l01097">ll_dir_ioctl()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a66da0db9bdc04362a81cc4fafe8b56b6"></a><!-- doxytag: member="dir.c::ll_dir_operations" ref="a66da0db9bdc04362a81cc4fafe8b56b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="llite__internal_8h.html#a66da0db9bdc04362a81cc4fafe8b56b6">ll_dir_operations</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .llseek         = <a class="code" href="dir_8c.html#ac7598782724545a0c4369cc8fd914667">ll_dir_seek</a>,
        .open           = <a class="code" href="dir_8c.html#ab2f5f48bd1716323320be7b1bdf0fcd7">ll_dir_open</a>,
        .release        = <a class="code" href="dir_8c.html#a5819df2f49651137b6db80229333882a">ll_dir_release</a>,
        .read           = generic_read_dir,



        .readdir        = <a class="code" href="dir_8c.html#a02fc49484dd637318ad2cc32510eff5d">ll_readdir</a>,

        .unlocked_ioctl = <a class="code" href="dir_8c.html#a6c035f1b0aaec9aee14d4bb3f061fb43">ll_dir_ioctl</a>,
        .fsync          = <a class="code" href="file_8c.html#a6a8a62adc93b58d6b8a8fa595a679d23">ll_fsync</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="dir_8c_source.html#l01790">1790</a> of file <a class="el" href="dir_8c_source.html">dir.c</a>.</p>

<p>Referenced by <a class="el" href="llite__lib_8c_source.html#l01217">ll_iget_anon_dir()</a>, and <a class="el" href="llite__lib_8c_source.html#l01987">ll_read_inode2()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
