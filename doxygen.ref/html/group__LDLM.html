<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: Lustre Distributed Lock Manager</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Lustre Distributed Lock Manager</h1>
<p>Lustre DLM is based on VAX DLM.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__pool__ops.html">ldlm_pool_ops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Operations on LDLM pools.  <a href="structldlm__pool__ops.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__pool.html">ldlm_pool</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LDLM pool structure to track granted locks.  <a href="structldlm__pool.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__valblock__ops.html">ldlm_valblock_ops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LVB operations.  <a href="structldlm__valblock__ops.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__ns__bucket.html">ldlm_ns_bucket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__namespace.html">ldlm_namespace</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LDLM Namespace.  <a href="structldlm__namespace.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__glimpse__work.html">ldlm_glimpse_work</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Work list for sending GL ASTs to multiple locks.  <a href="structldlm__glimpse__work.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__interval.html">ldlm_interval</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interval node data for each LDLM_EXTENT lock.  <a href="structldlm__interval.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__interval__tree.html">ldlm_interval_tree</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interval tree for extent locks.  <a href="structldlm__interval__tree.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__flock.html">ldlm_flock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html">ldlm_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LDLM lock structure.  <a href="structldlm__lock.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__resource.html">ldlm_resource</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LDLM resource description.  <a href="structldlm__resource.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__ast__work.html">ldlm_ast_work</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Common ldlm_enqueue parameters.  <a href="structldlm__enqueue__info.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__callback__suite.html">ldlm_callback_suite</a></td></tr>
<tr><td colspan="2"><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldlm__iterator.html">Lock iterators</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>LDLM provides for a way to iterate through every lock on a resource or namespace or every resource in a namespace. </p>
<br/></td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldlm__local__ast.html">Default AST handlers for local locks</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>These AST handlers are typically used for server-side local locks and are also used by client-side lock handlers to perform minimum level base processing. </p>
<br/></td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldlm__cli__api.html">API to operate on locks from actual LDLM users.</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>These are typically used by client and server (*_local versions) to obtain and release locks. </p>
<br/></td></tr>
</p>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ldlm__pools.html">Various LDLM pool related functions</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>There are not used outside of ldlm. </p>
<br/></td></tr>
</p>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga281358eddc378923c68a44476ad434ae">OBD_LDLM_DEVICENAME</a>&nbsp;&nbsp;&nbsp;&quot;ldlm&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac60d99ba1ee452e88e798028c77a6ee2">LDLM_DEFAULT_LRU_SIZE</a>&nbsp;&nbsp;&nbsp;(100 * num_online_cpus())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9aa31582e16bd5db20efd0ad4ba2922e">LDLM_DEFAULT_MAX_ALIVE</a>&nbsp;&nbsp;&nbsp;(cfs_time_seconds(3900))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad0d5691a254c18afb27cbe41e96e18dc">LDLM_CTIME_AGE_LIMIT</a>&nbsp;&nbsp;&nbsp;(10)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8a89bf73dae43048239ae31f0f4f776f">LDLM_DEFAULT_PARALLEL_AST_LIMIT</a>&nbsp;&nbsp;&nbsp;1024</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac91b29eaa6987e07656d85e9e139ca3f">LDLM_CB_BLOCKING</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The blocking callback is overloaded to perform two functions.  <a href="#gac91b29eaa6987e07656d85e9e139ca3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5d94274920487243f51d4942f163b947">LDLM_CB_CANCELING</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga051e68d1bff6a791da6164eda988c466">DLM_OST_NAMESPACE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae53cad77171aae681bc27e8cf30fda42">DLM_MDS_NAMESPACE</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadbb6d2680a2d2d7ab15623b03f058edc">LDLM_POOLS_THREAD_PERIOD</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">One second for pools thread check interval.  <a href="#gadbb6d2680a2d2d7ab15623b03f058edc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7712344fc932485bff52275c2193484a">LDLM_POOLS_MODEST_MARGIN_SHIFT</a>&nbsp;&nbsp;&nbsp;(4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">~6% margin for modest pools.  <a href="#ga7712344fc932485bff52275c2193484a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga41802548f309704722be627a3d83e310">LDLM_POOL_SRV_DEF_RECALC_PERIOD</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default recalc period for server side pools in sec.  <a href="#ga41802548f309704722be627a3d83e310"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga032adcd4a0ffd13b0425ae6dc9fb4033">LDLM_POOL_CLI_DEF_RECALC_PERIOD</a>&nbsp;&nbsp;&nbsp;(10)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default recalc period for client side pools in sec.  <a href="#ga032adcd4a0ffd13b0425ae6dc9fb4033"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga79f569c8af2bddcadd03bb0f5252c5a5">NS_DEFAULT_MAX_NOLOCK_BYTES</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default values for the "max_nolock_size", "contention_time" and "contended_locks" namespace tunables.  <a href="#ga79f569c8af2bddcadd03bb0f5252c5a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga222ec4eb7473a27407d03b6219387330">NS_DEFAULT_CONTENTION_SECONDS</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga04cc41bb0ea0cb2dbb2b743ddef676d3">NS_DEFAULT_CONTENDED_LOCKS</a>&nbsp;&nbsp;&nbsp;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga003105401547ae27f8ae4d9b4c232f27">LDLM_GL_WORK_NOFREE</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The <a class="el" href="structldlm__glimpse__work.html" title="Work list for sending GL ASTs to multiple locks.">ldlm_glimpse_work</a> is allocated on the stack and should not be freed.  <a href="#ga003105401547ae27f8ae4d9b4c232f27"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae83cd198e77c1f09846f131fd1b76dee">to_ldlm_interval</a>(n)&nbsp;&nbsp;&nbsp;container_of(n, struct <a class="el" href="structldlm__interval.html">ldlm_interval</a>, li_node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5eaa516285c80b8a6bb5f879fa3191b9">LUSTRE_TRACKS_LOCK_EXP_REFS</a>&nbsp;&nbsp;&nbsp;(0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether to track references to exports by LDLM locks.  <a href="#ga5eaa516285c80b8a6bb5f879fa3191b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga23d29567f6cc8a2df9416fe89a728b0e">LDLM_GID_ANY</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)-1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LDLM_GID_ANY is used to match any group id in <a class="el" href="group__LDLM.html#ga1373811e4c4edbb039f1da1ca7947b03" title="Attempt to find a lock with specified properties.">ldlm_lock_match()</a>.  <a href="#ga23d29567f6cc8a2df9416fe89a728b0e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5d4a0edfc41ee022966d492b8fa6bf0d">l_transno</a>&nbsp;&nbsp;&nbsp;l_client_cookie</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For uncommitted cross-MDT lock, store transno this lock belongs to.  <a href="#ga5d4a0edfc41ee022966d492b8fa6bf0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga23707c2e0c762c2638ee3bfa714f74de">l_slc_link</a>&nbsp;&nbsp;&nbsp;l_rk_ast</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For uncommitted cross-MDT lock, which is client lock, share with l_rk_ast which is for server.  <a href="#ga23707c2e0c762c2638ee3bfa714f74de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gacc5fbacf11637d2acac3440b4dbe56f6">ei_res_id</a>&nbsp;&nbsp;&nbsp;ei_cb_gl</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae27210c0d51e6f38e3b5f2ff08793f97">LDLM_DEBUG_NOLOCK</a>(format, a...)&nbsp;&nbsp;&nbsp;CDEBUG(D_DLMTRACE, &quot;### &quot; format &quot;\n&quot; , ##a)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Just a fancy CDEBUG call with log level preset to LDLM_DEBUG.  <a href="#gae27210c0d51e6f38e3b5f2ff08793f97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1e2b479743aab3ba4119e5c751a6f188">LDLM_DEBUG_LIMIT</a>(mask, lock, fmt, a...)&nbsp;&nbsp;&nbsp;((void)0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Support function for lock information printing into debug logs.  <a href="#ga1e2b479743aab3ba4119e5c751a6f188"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad8d04218a1ba26d32ea36a1f5aebc505">LDLM_DEBUG</a>(lock, fmt, a...)&nbsp;&nbsp;&nbsp;((void)0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga658466373582d350c15ffa570d598c35">LDLM_ERROR</a>(lock, fmt, a...)&nbsp;&nbsp;&nbsp;((void)0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae6f33fb4095ce2a0e694892623aee022">LDLM_ITER_CONTINUE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return values for lock iterators.  <a href="#gae6f33fb4095ce2a0e694892623aee022"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7232aeca0a992a2e812f6d639de7ea6b">LDLM_ITER_STOP</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga597fb61624bdd33a92ba76a5a67679d4">LDLM_LOCK_REF_DEL</a>(lock)&nbsp;&nbsp;&nbsp;lu_ref_del(&amp;lock-&gt;l_reference, &quot;handle&quot;, current)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5945b4d89a157c2e0fb6d955b3bf0c3f">LDLM_LOCK_PUT</a>(lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a temporary lock reference obtained by <a class="el" href="group__LDLM.html#ga362da0472f4016a927cc50b1163585e4" title="Obtain a lock reference by its handle.">ldlm_handle2lock()</a> or <a class="el" href="group__LDLM.html#gabac2ce09f8215c4f05a3a8113fa72545" title="Obtain a lock reference by handle.">__ldlm_handle2lock()</a>.  <a href="#ga5945b4d89a157c2e0fb6d955b3bf0c3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf3357d35be5378aa299677e298c5a625">LDLM_LOCK_RELEASE</a>(lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a lock reference obtained by some other means (see <a class="el" href="group__LDLM.html#ga5945b4d89a157c2e0fb6d955b3bf0c3f" title="Release a temporary lock reference obtained by ldlm_handle2lock() or __ldlm_handle2lock()...">LDLM_LOCK_PUT()</a>).  <a href="#gaf3357d35be5378aa299677e298c5a625"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9c871836dbef822ef90080b3d6569c5f">LDLM_LOCK_GET</a>(lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaec77446f52676c0679185593ce8e58e3">ldlm_lock_list_put</a>(<a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>, member, count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga605a491c960028a1b607ba7d2477eca1">LDLM_RESOURCE_ADDREF</a>(res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabcad3c4dc7bec07ec9942a817293935a">LDLM_RESOURCE_DELREF</a>(res)</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga07447890235da125e60400b2dee48626">ldlm_res_policy</a> )(struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> **, void *req_cookie, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab397db2317d35a64df513cd6072de20c">ldlm_cancel_cbt</a> )(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a> )(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *new, void *data, int flag)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type for blocking callback function of a lock.  <a href="#gac111233b56bdf7a4767dcd7a2f15b378"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac03b996dc38f767ddd9b2f5ae779b257">ldlm_completion_callback</a> )(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type for completion callback function of a lock.  <a href="#gac03b996dc38f767ddd9b2f5ae779b257"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6e5c291246d5e6fb302d99a6111cb03d">ldlm_glimpse_callback</a> )(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type for glimpse callback function of a lock.  <a href="#ga6e5c291246d5e6fb302d99a6111cb03d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4b5fe8de6c014f23ce08ae949daef596">ldlm_processing_policy</a> )(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *flags, int first_enq, enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> *err, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga755fb40aeaf77f3a7d1591645ce49ce3">ldlm_iterator_t</a> )(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, void *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadc68d2afc94858f99c2d2306f8285273">ldlm_res_iterator_t</a> )(struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *, void *)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7a469cbc24e6549b934f26184a5a78230e">ELDLM_OK</a> =  0, 
<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7a6545cc9db51172495cf36a4c88abca7d">ELDLM_LOCK_MATCHED</a> =  1, 
<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7aad827eee63f1fb0bd13912b82915f6f5">ELDLM_LOCK_CHANGED</a> =  300, 
<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7a28c1d219b7543f767cee582a9daf0ee4">ELDLM_LOCK_ABORTED</a> =  301, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7ad2b452e88a337a4a273ac71919544a61">ELDLM_LOCK_REPLACED</a> =  302, 
<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7a1e8fbbeb38571f8585669ab5c6b8b826">ELDLM_NO_LOCK_DATA</a> =  303, 
<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7adc752fef82372dea573a2efc868d937d">ELDLM_LOCK_WOULDBLOCK</a> =  304, 
<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7af441d44d6cd8360c0690ee5d3dcae1e6">ELDLM_NAMESPACE_EXISTS</a> =  400, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__LDLM.html#ggaa2fbd012972eb2b2d0653c8df02964f7ad3bcb2932ca3f78b679bce01f6890410">ELDLM_BAD_NAMESPACE</a> =  401
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>LDLM non-error return states. </p>
 <a href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> { <a class="el" href="group__LDLM.html#ggac4b4584603b76e6cc86c82a64f59defdad589556d4b2a4f1a2f0793c32688d90d">LDLM_NAMESPACE_SERVER</a> =  0x01, 
<a class="el" href="group__LDLM.html#ggac4b4584603b76e6cc86c82a64f59defda7b389ca5799b0c65fd290cfe04e34143">LDLM_NAMESPACE_CLIENT</a> =  0x02
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>LDLM namespace type. </p>
 <a href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gafcd8eee315d3a7e1313596efd678d77e">ldlm_appetite</a> { <a class="el" href="group__LDLM.html#ggafcd8eee315d3a7e1313596efd678d77eac02de5a88f2822d394681c400959434d">LDLM_NAMESPACE_GREEDY</a> =  1 &lt;&lt; 0, 
<a class="el" href="group__LDLM.html#ggafcd8eee315d3a7e1313596efd678d77ea779499ef38fbd29e9e2a3cb0b5a69e6a">LDLM_NAMESPACE_MODEST</a> =  1 &lt;&lt; 1
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>LDLM pools related, type of lock pool in the namespace. </p>
 <a href="group__LDLM.html#gafcd8eee315d3a7e1313596efd678d77e">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__LDLM.html#ggae8a3b6a5d0d3244ed73924ab2421a0d0ac9ce485ce53eddc4df436c8df18871e4">LDLM_NSS_LOCKS</a> =  0, 
<a class="el" href="group__LDLM.html#ggae8a3b6a5d0d3244ed73924ab2421a0d0a6598fd5fe5e1403bf48c2f02a018d2e6">LDLM_NSS_LAST</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga516147f10f1ca82e556a7f8c3ee5d6ff">ldlm_ns_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffaf5e8bcf861bcd7b236cb287da70a974e">LDLM_NS_TYPE_UNKNOWN</a> =  0, 
<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffaabe8a36130ca1ffe942ad581cc3b7d50">LDLM_NS_TYPE_MDC</a>, 
<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffa6f51895209e33fae55026bc462d17ed1">LDLM_NS_TYPE_MDT</a>, 
<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffab42df29b6de6da3b65b3db2496efe009">LDLM_NS_TYPE_OSC</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffabaac77dbb962ddbffeb7d4092d38c141">LDLM_NS_TYPE_OST</a>, 
<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffabdcaf331de52005bd3c5c67979a44601">LDLM_NS_TYPE_MGC</a>, 
<a class="el" href="group__LDLM.html#gga516147f10f1ca82e556a7f8c3ee5d6ffa8fcb201d020caf855369cdcb8796ec9b">LDLM_NS_TYPE_MGT</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> { <a class="el" href="group__LDLM.html#gga0b718c2d27bc15f43205e50e4da16ec9a280acd6e88765fc97a4833aa18e30968">LCF_ASYNC</a> =  0x1, 
<a class="el" href="group__LDLM.html#gga0b718c2d27bc15f43205e50e4da16ec9af745ae50a795037166be155b3a00183d">LCF_LOCAL</a> =  0x2, 
<a class="el" href="group__LDLM.html#gga0b718c2d27bc15f43205e50e4da16ec9acec66c002c870ae3b45fbd09ad15ad16">LCF_BL_AST</a> =  0x4
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Cancel flags. </p>
 <a href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a> { <a class="el" href="group__LDLM.html#gga2e4dbf6d38ddcec566ec40c96391622bab1967a2d167089505571b25c0a6547f2">LVB_T_NONE</a> =  0, 
<a class="el" href="group__LDLM.html#gga2e4dbf6d38ddcec566ec40c96391622ba2ae75dc7422531699cd74001225a39e2">LVB_T_OST</a> =  1, 
<a class="el" href="group__LDLM.html#gga2e4dbf6d38ddcec566ec40c96391622baaab44131ef0d4c55db5843cebc2cd7be">LVB_T_LQUOTA</a> =  2, 
<a class="el" href="group__LDLM.html#gga2e4dbf6d38ddcec566ec40c96391622ba0a84718eea4af0a71dee79c2d1d535e4">LVB_T_LAYOUT</a> =  3
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gade643efde1936c79a28d8a944592c5c0">lock_res_type</a> { <a class="el" href="group__LDLM.html#ggade643efde1936c79a28d8a944592c5c0ad775dfdebf93887431d72e62cbe354d5">LRT_NORMAL</a>, 
<a class="el" href="group__LDLM.html#ggade643efde1936c79a28d8a944592c5c0a4a0f0c6e05a64fe747ae65a84f5485f6">LRT_NEW</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>"Modes" of acquiring lock_res, necessary to tell lockdep that taking more than one lock_res is dead-lock safe. </p>
 <a href="group__LDLM.html#gade643efde1936c79a28d8a944592c5c0">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6c0f99a4b156117149e846fee0571ca1">lockmode_verify</a> (enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga26ec85b7dbc46f65a8e212ce53366a9a">lockmode_compat</a> (enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> exist_mode, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> new_mode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae9d5e1e0b2f2985e97aca30f2f1a145b">ns_is_client</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if namespace <em>ns</em> is a client namespace.  <a href="#gae9d5e1e0b2f2985e97aca30f2f1a145b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga31d7e8c3808dd5cd2e15aea3257e4097">ns_is_server</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if namespace <em>ns</em> is a server namespace.  <a href="#ga31d7e8c3808dd5cd2e15aea3257e4097"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1f4b542b9827f58e6dd3823356c2fd4f">ns_connect_cancelset</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if namespace <em>ns</em> supports early lock cancel (ELC).  <a href="#ga1f4b542b9827f58e6dd3823356c2fd4f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac757615521e2e49225316a38d68c5a7c">ns_connect_lru_resize</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if this namespace supports lru_resize.  <a href="#gac757615521e2e49225316a38d68c5a7c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf469134f642cdcfacd9f0a9e21365111">ns_register_cancel</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, <a class="el" href="group__LDLM.html#gab397db2317d35a64df513cd6072de20c">ldlm_cancel_cbt</a> arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga82466f1300e6e9395e768b7336c0ac46">ldlm_convert_policy_to_wire</a> (enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy, union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts lock policy from local format to on the wire lock_desc format.  <a href="#ga82466f1300e6e9395e768b7336c0ac46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0f272b273065dc0d916fcb5c6b61d656">ldlm_convert_policy_to_local</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *wpolicy, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *lpolicy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts lock policy from on the wire lock_desc format to local format.  <a href="#ga0f272b273065dc0d916fcb5c6b61d656"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8d888511805f9240f67510e7b149938c">ldlm_has_layout</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad993dd3adae260ee3796898ec494d3cc">ldlm_ns_name</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2f90eea238f99079aa6e2ee64c623e43">ldlm_res_to_ns</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaebd5b336cb74307b3f15e7b922e20294">ldlm_lock_to_ns</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3cfe3f5a492fdb04c6c46dbd7b91bcb0">ldlm_lock_to_ns_name</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structadaptive__timeout.html">adaptive_timeout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8e3dcd014075af79a7f3b9d089769837">ldlm_lock_to_ns_at</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0ce4a4a1e256dd8b6243c96eb669bc71">ldlm_lvbo_init</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga177ac9912af912c52cd450e3bf11acb5">ldlm_lvbo_size</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4ce8965091314ccd3278e3695205c1c7">ldlm_lvbo_fill</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, void *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad3450a8071d042dd92be8f2a9177e112">ldlm_it2str</a> (enum <a class="el" href="group__lustreidl.html#ga9c053c844f0d79b44f18bb65850a6081">ldlm_intent_flags</a> it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga878ffb8d1a87e3787eb2bb6170fed457">ldlm_replay_locks</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga921f8d85541cbe1fa330b9a12080103f">ldlm_flock_completion_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flock completion callback function.  <a href="#ga921f8d85541cbe1fa330b9a12080103f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa9bd1ddd8fa94d5bb36d9ab2499148f3">ldlm_extent_shift_kms</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> old_kms)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2efedea3f32b10e36e3bcf7dc9aa44d2">ldlm_del_waiting_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad3d835ffc8ea5737e46381b9772cc224">ldlm_refresh_waiting_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, int <a class="el" href="o2iblnd__modparams_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2582912f032081101820c56da0dbfb76">ldlm_get_ref</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabab5acbe0d24c0a37be4893ae6e00dcf">ldlm_put_ref</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa1ae45d9f2b5213f12d150a3806e03b4">ldlm_init_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga20871b8557c0afe94cb45c2d64cbd31f">ldlm_destroy_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad7430abbe52b72b069536f6f99336d94">ldlm_request_lock</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga70d54ed9384416cd5e19fc593dac071f">ldlm_register_intent</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, <a class="el" href="group__LDLM.html#ga07447890235da125e60400b2dee48626">ldlm_res_policy</a> arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga35362f3605ec8dec52464f153c932c85">ldlm_lock2handle</a> (const struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fills in handle for LDLM lock <em>lock</em> into supplied <em>lockh</em> Does not take any references.  <a href="#ga35362f3605ec8dec52464f153c932c85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabac2ce09f8215c4f05a3a8113fa72545">__ldlm_handle2lock</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtain a lock reference by handle.  <a href="#gabac2ce09f8215c4f05a3a8113fa72545"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0a466989372b56e3cde1edae472be066">ldlm_cancel_callback</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper function to call blocking AST for LDLM lock <em>lock</em> in a "cancelling" mode.  <a href="#ga0a466989372b56e3cde1edae472be066"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7f23553f0695eacc8686c25985aa564d">ldlm_lock_remove_from_lru</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga098ec9c63984ffbe25f17174b376b1a0">ldlm_lock_set_data</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set opaque data into the lock that only makes sense to upper layer.  <a href="#ga098ec9c63984ffbe25f17174b376b1a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga362da0472f4016a927cc50b1163585e4">ldlm_handle2lock</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *h)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtain a lock reference by its handle.  <a href="#ga362da0472f4016a927cc50b1163585e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaee7a1e25a9767f6e3bdbade69a15764f">ldlm_handle2lock_long</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *h, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4e79f430a220b667aaffb6b9c90d8de6">ldlm_res_lvbo_update</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int increase)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update Lock Value Block Operations (LVBO) on a resource taking into account data from request <em>r</em>.  <a href="#ga4e79f430a220b667aaffb6b9c90d8de6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7dac0446d813ef65c24c0831b6d1a519">ldlm_error2errno</a> (enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> error)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rather arbitrary mapping from LDLM error codes to errno values.  <a href="#ga7dac0446d813ef65c24c0831b6d1a519"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9d483fecb156d6db20dc2bfc1d6f11be">ldlm_errno2error</a> (int err_no)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dual to <a class="el" href="group__LDLM.html#ga7dac0446d813ef65c24c0831b6d1a519" title="Rather arbitrary mapping from LDLM error codes to errno values.">ldlm_error2errno()</a>: maps errno values back to enum ldlm_error.  <a href="#ga9d483fecb156d6db20dc2bfc1d6f11be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac526504450a40715c8e25fbab715689e">ldlm_lock_get</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a reference on a lock.  <a href="#gac526504450a40715c8e25fbab715689e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5e363707438fb69f9253f2ab8bf4c5e6">ldlm_lock_put</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release lock reference.  <a href="#ga5e363707438fb69f9253f2ab8bf4c5e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga833125f7d72f8e77cb16c031c56dd2a0">ldlm_lock_destroy</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a LDLM lock <em>lock</em>.  <a href="#ga833125f7d72f8e77cb16c031c56dd2a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7b4cfac056355ba992b1b7d9bfbaa25b">ldlm_lock2desc</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *desc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fill in "on the wire" representation for given LDLM lock into supplied lock descriptor <em>desc</em> structure.  <a href="#ga7b4cfac056355ba992b1b7d9bfbaa25b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2d77135057c3b9123a3ae5704752c946">ldlm_lock_addref</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add specified reader/writer reference to LDLM lock with handle <em>lockh</em>.  <a href="#ga2d77135057c3b9123a3ae5704752c946"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga580d951cff91ebd5c1d2a7588d4c2ea3">ldlm_lock_addref_try</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempts to add reader/writer reference to a lock with handle <em>lockh</em>, and fails if lock is already LDLM_FL_CBPENDING or destroyed.  <a href="#ga580d951cff91ebd5c1d2a7588d4c2ea3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga82ed1d0d1d2788cad8813e69df77d625">ldlm_lock_decref</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decrease reader/writer refcount for LDLM lock with handle <em>lockh</em>.  <a href="#ga82ed1d0d1d2788cad8813e69df77d625"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad236a9af5f0845e1046060a55419914b">ldlm_lock_decref_and_cancel</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decrease reader/writer refcount for LDLM lock with handle <em>lockh</em> and mark it for subsequent cancellation once r/w refcount drops to zero instead of putting into LRU.  <a href="#gad236a9af5f0845e1046060a55419914b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3f34c3286a49d3d2f1e4b16029647a5b">ldlm_lock_fail_match_locked</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae911593eccfe0aa5995935808b646d2a">ldlm_lock_fail_match</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9e8b401ed51dda94f553670e73872135">ldlm_lock_allow_match</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark lock as "matchable" by OST.  <a href="#ga9e8b401ed51dda94f553670e73872135"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab9c1d858901b9d9a4db13ffbad095fb6">ldlm_lock_allow_match_locked</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark lock as "matchable" by OST.  <a href="#gab9c1d858901b9d9a4db13ffbad095fb6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1373811e4c4edbb039f1da1ca7947b03">ldlm_lock_match</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *, enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *, int unref)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to find a lock with specified properties.  <a href="#ga1373811e4c4edbb039f1da1ca7947b03"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga396833924edeb2118df4fdff47aa7489">ldlm_revalidate_lock_handle</a> (const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *bits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaeeab5a5dbe0a5b966d52f388b69eed3f">ldlm_lock_convert</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> new_mode, __u32 *flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to convert already granted lock to a different mode.  <a href="#gaeeab5a5dbe0a5b966d52f388b69eed3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1ae32c9c745cefc485fd39cf0054e2ef">ldlm_lock_downgrade</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> new_mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Downgrade an exclusive lock.  <a href="#ga1ae32c9c745cefc485fd39cf0054e2ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadec8a773eb3b13c995cf35a4d013393b">ldlm_lock_cancel</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempts to cancel LDLM lock <em>lock</em> that has no reader/writer references.  <a href="#gadec8a773eb3b13c995cf35a4d013393b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6fea368fc4ea7002b0dcd068bbe8771a">ldlm_reprocess_all</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to grant all waiting locks on a resource.  <a href="#ga6fea368fc4ea7002b0dcd068bbe8771a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6a893da5c75236bb6f573e2484d4eecc">ldlm_reprocess_all_ns</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterate through all resources on a namespace attempting to grant waiting locks.  <a href="#ga6a893da5c75236bb6f573e2484d4eecc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5f3ca6b2c348db5cd17b45c0e2b99ba8">ldlm_lock_dump_handle</a> (int level, const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print lock with lock handle <em>lockh</em> description into debug log.  <a href="#ga5f3ca6b2c348db5cd17b45c0e2b99ba8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaff973b12d9e531ff04c69b478d6750cb">ldlm_unlink_lock_skiplist</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove skiplist-enabled LDLM lock <em>req</em> from granted list.  <a href="#gaff973b12d9e531ff04c69b478d6750cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4b345e88ea06fc28c099254650b75c38">ldlm_namespace_new</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client, enum <a class="el" href="group__LDLM.html#gafcd8eee315d3a7e1313596efd678d77e">ldlm_appetite</a> apt, enum <a class="el" href="group__LDLM.html#ga516147f10f1ca82e556a7f8c3ee5d6ff">ldlm_ns_type</a> ns_type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and initialize new empty namespace.  <a href="#ga4b345e88ea06fc28c099254650b75c38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gacfe66a2d51a46f0bf611952a83119bbc">ldlm_namespace_cleanup</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancel and destroy all locks in the namespace.  <a href="#gacfe66a2d51a46f0bf611952a83119bbc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa7271dfc42956d8d75b2435a22c83832">ldlm_namespace_free_prior</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structobd__import.html">obd_import</a> *imp, int force)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performs various cleanups for passed <em>ns</em> to make it drop refc and be ready for freeing.  <a href="#gaa7271dfc42956d8d75b2435a22c83832"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga10faf90111f6da7206f8b140b8d98fed">ldlm_namespace_free_post</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performs freeing memory structures related to <em>ns</em>.  <a href="#ga10faf90111f6da7206f8b140b8d98fed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9f9b87f84a794b96c043799f3840765c">ldlm_namespace_free</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structobd__import.html">obd_import</a> *imp, int force)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanup the resource, and free namespace.  <a href="#ga9f9b87f84a794b96c043799f3840765c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1403410a2012b2c625b74126ffcb2089">ldlm_namespace_register</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register <em>ns</em> in the list of namespaces.  <a href="#ga1403410a2012b2c625b74126ffcb2089"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf842bf901a93420ecbc2365d778b3a4b">ldlm_namespace_unregister</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister <em>ns</em> from the list of namespaces.  <a href="#gaf842bf901a93420ecbc2365d778b3a4b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1399afd082a31b5066cefa9093eec736">ldlm_namespace_get</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2418ea6dcbcd76ad54666a106b23b891">ldlm_namespace_put</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8047d7cda49f6bf14c41a5105c55a378">ldlm_proc_setup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga03d9eac35193176ee999b155838ccfe8">ldlm_proc_cleanup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga083fb1ea92619c4b2e526633c3a486fb">ldlm_resource_get</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *parent, const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *, enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, int create)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a reference to resource with given name, creating it if necessary.  <a href="#ga083fb1ea92619c4b2e526633c3a486fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga41b0bd74d466ccd76abb0adfcc3fbe8a">ldlm_resource_getref</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9ba8220d356d680f204b8882db1c50c9">ldlm_resource_putref</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaee0426408b282c2c2606c218f79dcd9a">ldlm_resource_add_lock</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, struct <a class="el" href="structlist__head.html">list_head</a> *<a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a lock into a given resource into specified lock list.  <a href="#gaee0426408b282c2c2606c218f79dcd9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga12496ecd5cca95892b66801ab8428b97">ldlm_resource_unlink_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadb1efc6cf4a9e128dd2a25c78685f2de">ldlm_res2desc</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, struct <a class="el" href="structldlm__resource__desc.html">ldlm_resource_desc</a> *desc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga70a63f0359188ff0526655c7c664ef1d">ldlm_dump_all_namespaces</a> (enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a> client, int level)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print information about all locks in all namespaces on this node to debug log.  <a href="#ga70a63f0359188ff0526655c7c664ef1d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga72eedaa0c612fbc5daad8d622e0502f1">ldlm_namespace_dump</a> (int level, struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print information about all locks in this namespace on this node to debug log.  <a href="#ga72eedaa0c612fbc5daad8d622e0502f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6abb0daf1a4f9af18526f4a14c5fbf0c">ldlm_resource_dump</a> (int level, struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print information about all locks in this resource to debug log.  <a href="#ga6abb0daf1a4f9af18526f4a14c5fbf0c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gafd6a07a826f7d2789696e472dd81adc2">ldlm_lock_change_resource</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves LDLM lock <em>lock</em> to another resource.  <a href="#gafd6a07a826f7d2789696e472dd81adc2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadc8dcde45df7d4bea889736aca442600">ldlm_expired_completion_wait</a> (void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga372b1e5c9e8be8bd6bbd2c3e279ec146">intent_disposition</a> (struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, int flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3b01cf0ee883cc9a25d74ca83032a529">intent_set_disposition</a> (struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, int flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga83aa57fc458f3a4c11022b4dad580a21">lock_res</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock resource.  <a href="#ga83aa57fc458f3a4c11022b4dad580a21"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf8e33b62440b4b67aaf93c301ce81fb8">lock_res_nested</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, enum <a class="el" href="group__LDLM.html#gade643efde1936c79a28d8a944592c5c0">lock_res_type</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock resource with a way to instruct lockdep code about nestedness-safe.  <a href="#gaf8e33b62440b4b67aaf93c301ce81fb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3f0f8c873e05a9986550f5a8c245e6d5">unlock_res</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock resource.  <a href="#ga3f0f8c873e05a9986550f5a8c245e6d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gafcd013e3a5397cfa341646d8522d2563">check_res_locked</a> (struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if resource is already locked, assert if not.  <a href="#gafcd013e3a5397cfa341646d8522d2563"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7ea7aa073d254d8500c07d2664cbecf9">lock_res_and_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock a lock and its resource.  <a href="#ga7ea7aa073d254d8500c07d2664cbecf9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf9b19facd1a8bb3cdfcac5047159f15e">unlock_res_and_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock a lock and its resource previously locked with lock_res_and_lock.  <a href="#gaf9b19facd1a8bb3cdfcac5047159f15e"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3cf0131341b6663da454ede83009988b">lck_compat_array</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__ops.html">obd_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga84fad911c326a86839530f221c86f7e7">ldlm_obd_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaacf06e33756d242222391e67857d6e14">ldlm_lockname</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0ec36144688c37580c1c66f547ba3c08">ldlm_typename</a> []</td></tr>
<tr><td colspan="2"><h2>Lock Compatibility Matrix.</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpde75a3e2d89e27903c98ccee5d444afa"></a>A lock has both a type (extent, flock, inode bits, or plain) and a mode.</p>
<p>Lock types are described in their respective implementation files: ldlm_{extent,flock,inodebits,plain}.c.</p>
<p>There are six lock modes along with a compatibility matrix to indicate if two locks are compatible.</p>
<ul>
<li>EX: Exclusive mode. Before a new file is created, MDS requests EX lock on the parent.</li>
<li>PW: Protective Write (normal write) mode. When a client requests a write lock from an OST, a lock with PW mode will be issued.</li>
<li>PR: Protective Read (normal read) mode. When a client requests a read from an OST, a lock with PR mode will be issued. Also, if the client opens a file for execution, it is granted a lock with PR mode.</li>
<li>CW: Concurrent Write mode. The type of lock that the MDS grants if a client requests a write lock during a file open operation.</li>
<li>CR Concurrent Read mode. When a client performs a path lookup, MDS grants an inodebit lock with the CR mode on the intermediate path component.</li>
<li>NL Null mode.</li>
</ul>
<pre>
       NL  CR  CW  PR  PW  EX
  NL    1   1   1   1   1   1
  CR    1   1   1   1   1   0
  CW    1   1   1   0   0   0
  PR    1   1   0   1   0   0
  PW    1   1   0   0   0   0
  EX    1   0   0   0   0   0
 </pre> <br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga646c49fc0ba78c1d5b30d7ef0b6fcc64">LCK_COMPAT_EX</a>&nbsp;&nbsp;&nbsp;LCK_NL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0770471a8652e45673670fea9548e43b">LCK_COMPAT_PW</a>&nbsp;&nbsp;&nbsp;(LCK_COMPAT_EX | LCK_CR)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga74166fe3a7e2cf51787984249cffe774">LCK_COMPAT_PR</a>&nbsp;&nbsp;&nbsp;(LCK_COMPAT_PW | LCK_PR)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga972ad785641586babf8f2b9c07db438f">LCK_COMPAT_CW</a>&nbsp;&nbsp;&nbsp;(LCK_COMPAT_PW | LCK_CW)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0d0f660e4e3edea1831b6216c617b3a7">LCK_COMPAT_CR</a>&nbsp;&nbsp;&nbsp;(LCK_COMPAT_CW | LCK_PR | LCK_PW)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga47b10c6ee643a2e1c1710814e425008f">LCK_COMPAT_NL</a>&nbsp;&nbsp;&nbsp;(LCK_COMPAT_CR | LCK_EX | LCK_GROUP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga24e6e4b3c28390e97d02f7852d804297">LCK_COMPAT_GROUP</a>&nbsp;&nbsp;&nbsp;(LCK_GROUP | LCK_NL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac19878e62234fb5258f7c8761a3e4d61">LCK_COMPAT_COS</a>&nbsp;&nbsp;&nbsp;(LCK_COS)</td></tr>
<tr><td colspan="2"><h2>flags</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp4e5868d676cb634aa75b125a0f741abf"></a>The flags and collections of flags (masks) for</p>
<dl class="see"><dt><b>See also:</b></dt><dd>struct <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a>. </dd></dl>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad4c476a01ccda6b86755b0ea2825d7d4">LDLM_FL_ALL_FLAGS_MASK</a>&nbsp;&nbsp;&nbsp;0x00FFFFFFC08F932FULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">l_flags bits marked as "all_flags" bits  <a href="#gad4c476a01ccda6b86755b0ea2825d7d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga79f84ccf0096f82e1153bb5646c4a4d6">LDLM_FL_LOCK_CHANGED</a>&nbsp;&nbsp;&nbsp;0x0000000000000001ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extent, mode, or resource changed  <a href="#ga79f84ccf0096f82e1153bb5646c4a4d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaff23b1afc481fda943d8487fac8eb047">ldlm_is_lock_changed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga82d504378e8b1d65a835a79152748f53">ldlm_set_lock_changed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga649010d0b83059be3940476ce896f464">ldlm_clear_lock_changed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2c6bbb5a5fb8a17d596ecaba494aa7d2">LDLM_FL_BLOCK_GRANTED</a>&nbsp;&nbsp;&nbsp;0x0000000000000002ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server placed lock on granted list, or a recovering client wants the lock added to the granted list, no questions asked.  <a href="#ga2c6bbb5a5fb8a17d596ecaba494aa7d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9c47b874204dac128040e1657cf8d91b">ldlm_is_block_granted</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga779c8f83ccfcd61abea9771b55ad8a56">ldlm_set_block_granted</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2cc2fe0b9eb806ceaf0b9eb35442d9f6">ldlm_clear_block_granted</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga912be807748854a27fde8d99ab122dc2">LDLM_FL_BLOCK_CONV</a>&nbsp;&nbsp;&nbsp;0x0000000000000004ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server placed lock on conv list, or a recovering client wants the lock added to the conv list, no questions asked.  <a href="#ga912be807748854a27fde8d99ab122dc2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaabc904a075732b018f974ba7a5295f8f">ldlm_is_block_conv</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7691070837359cb8e8e16ee3dad6e353">ldlm_set_block_conv</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaaa4e6f906aec77ce6071712f1f98b8c1">ldlm_clear_block_conv</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf787c22790fe3d611cd92199be25dd19">LDLM_FL_BLOCK_WAIT</a>&nbsp;&nbsp;&nbsp;0x0000000000000008ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server placed lock on wait list, or a recovering client wants the lock added to the wait list, no questions asked.  <a href="#gaf787c22790fe3d611cd92199be25dd19"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga973b7c56eaf5f397ac45f27853e7e79f">ldlm_is_block_wait</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  3)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2158f1c3045fa2970d6feb793314995a">ldlm_set_block_wait</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  3)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8df760dc9316ae28f4fa66dab92c1f60">ldlm_clear_block_wait</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  3)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3fb0e46d8dcf09f83494412e8cb5d588">LDLM_FL_AST_SENT</a>&nbsp;&nbsp;&nbsp;0x0000000000000020ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">blocking or cancel packet was queued for sending.  <a href="#ga3fb0e46d8dcf09f83494412e8cb5d588"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab62f7929418e41f69892278ca2a2bba0">ldlm_is_ast_sent</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4459ec2a203f7d86097155ded2b55ee6">ldlm_set_ast_sent</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9a881944ad35592fb4ee3c29a433d6ae">ldlm_clear_ast_sent</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4210c27164df8fc68b15a5c6f88d3063">LDLM_FL_REPLAY</a>&nbsp;&nbsp;&nbsp;0x0000000000000100ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock is being replayed.  <a href="#ga4210c27164df8fc68b15a5c6f88d3063"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7c664dab7f5faa023093942b65ab6b23">ldlm_is_replay</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa8cc9ba6a0568a0fa36cf0d0669185dd">ldlm_set_replay</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac5e16d6fd3f10a9fd5335bf7c1596c16">ldlm_clear_replay</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga423c3fc60972417ed98ea9124cdae163">LDLM_FL_INTENT_ONLY</a>&nbsp;&nbsp;&nbsp;0x0000000000000200ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Don't grant lock, just do intent.  <a href="#ga423c3fc60972417ed98ea9124cdae163"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad86120436504cad63e6a672234011b21">ldlm_is_intent_only</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad5522f52af5b1f744f66e1bcdc55ad2c">ldlm_set_intent_only</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabf0dd7c3c1fd21cd8314f0cc4ac2a139">ldlm_clear_intent_only</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga71a692568def3030f14e3a56f51eacc2">LDLM_FL_HAS_INTENT</a>&nbsp;&nbsp;&nbsp;0x0000000000001000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lock request has intent  <a href="#ga71a692568def3030f14e3a56f51eacc2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0614281afd9fd8d52b1397d93ca0ce2a">ldlm_is_has_intent</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 12)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadcd131921eac33013ad7c34c37444557">ldlm_set_has_intent</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 12)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6bf94fc518423d69a91c37577e575f86">ldlm_clear_has_intent</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 12)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga563e13b57ba8a8c2cf4801660334d35d">LDLM_FL_FLOCK_DEADLOCK</a>&nbsp;&nbsp;&nbsp;0x0000000000008000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flock deadlock detected  <a href="#ga563e13b57ba8a8c2cf4801660334d35d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7b0e5fbe0e62ecda174187118d2c9ce2">ldlm_is_flock_deadlock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 15)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga82dffd503bdf56054744254c54345ab8">ldlm_set_flock_deadlock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 15)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac74982ddc5a69206df4fbb85f7c72e86">ldlm_clear_flock_deadlock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 15)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae90502de9395d7874082193d36611053">LDLM_FL_DISCARD_DATA</a>&nbsp;&nbsp;&nbsp;0x0000000000010000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">discard (no writeback) on cancel  <a href="#gae90502de9395d7874082193d36611053"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7fcf88e1d975071d9eebf367aa9c6d5c">ldlm_is_discard_data</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 16)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab1fcda5e154caa22af1ad60fdf2e0b06">ldlm_set_discard_data</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 16)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabb8161d30da91eb1a4970e7682440cdb">ldlm_clear_discard_data</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 16)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4df4a9b0f96c19fcdbd88c767b92cfe3">LDLM_FL_NO_TIMEOUT</a>&nbsp;&nbsp;&nbsp;0x0000000000020000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Blocked by group lock - wait indefinitely.  <a href="#ga4df4a9b0f96c19fcdbd88c767b92cfe3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga578593a6a1c0707427c231f7ce413faf">ldlm_is_no_timeout</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 17)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga140b6c4b5684017ae84afed9324fde44">ldlm_set_no_timeout</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 17)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8ec923ef49ec233445dc18a64448bf57">ldlm_clear_no_timeout</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 17)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga34a11c94b46a7cd00e464a9063ff3879">LDLM_FL_BLOCK_NOWAIT</a>&nbsp;&nbsp;&nbsp;0x0000000000040000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Server told not to wait if blocked.  <a href="#ga34a11c94b46a7cd00e464a9063ff3879"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga18742375606df585379a379ab9ddae83">ldlm_is_block_nowait</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 18)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gacee4620434ad52c895a506b803b3f149">ldlm_set_block_nowait</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 18)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa59d400b2c912384c2c531419eef1ffb">ldlm_clear_block_nowait</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 18)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga58e627c7337b75f31e5879803c02d7f5">LDLM_FL_TEST_LOCK</a>&nbsp;&nbsp;&nbsp;0x0000000000080000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return blocking lock  <a href="#ga58e627c7337b75f31e5879803c02d7f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6248a5aef4f62ab807060a21f7fb9f92">ldlm_is_test_lock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 19)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad450843c02c2370e1552213d971a466d">ldlm_set_test_lock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 19)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga31a6e824141572d0a64f228988ae36d0">ldlm_clear_test_lock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 19)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6ac6aa7bab27701ec8d953219626df95">LDLM_FL_MATCH_LOCK</a>&nbsp;&nbsp;&nbsp;0x0000000000100000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">match lock only  <a href="#ga6ac6aa7bab27701ec8d953219626df95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga71cf8c345c175dcb2f9b8713e8b2bf00">LDLM_FL_CANCEL_ON_BLOCK</a>&nbsp;&nbsp;&nbsp;0x0000000000800000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Immediatelly cancel such locks when they block some other locks.  <a href="#ga71cf8c345c175dcb2f9b8713e8b2bf00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga73119e9c11597e56dbb17bb8202f0707">ldlm_is_cancel_on_block</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 23)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8860e90a297fa3f61b43725e1342a47b">ldlm_set_cancel_on_block</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 23)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf923c2d29e2d294f8d9e6d1ed19d0eb0">ldlm_clear_cancel_on_block</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 23)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0b1ea8608da80462dc9948160ebe5cdc">LDLM_FL_COS_INCOMPAT</a>&nbsp;&nbsp;&nbsp;0x0000000001000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag whether a lock is enqueued from a distributed transaction, and the requesting lock mode is PW/EX, if so, it will check compatibility with COS locks, and different from original COS semantic, transactions from the same client is also treated as lock conflict.  <a href="#ga0b1ea8608da80462dc9948160ebe5cdc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1443982a9767db12a97505d177434c90">ldlm_is_cos_incompat</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG((_l), 1ULL &lt;&lt; 24)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga95f858294d4e46e79a669cb0ace58663">ldlm_set_cos_incompat</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((_l), 1ULL &lt;&lt; 24)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6dfa5f908f7f3776efcea79d0f29d762">ldlm_clear_cos_incompat</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 24)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga38083448d90777d7741c673dbcf70a94">LDLM_FL_DENY_ON_CONTENTION</a>&nbsp;&nbsp;&nbsp;0x0000000040000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">measure lock contention and return -EUSERS if locking contention is high  <a href="#ga38083448d90777d7741c673dbcf70a94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac6147e3315d99418b2d6b3b3b630f2ac">ldlm_is_deny_on_contention</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 30)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga85029d0b6047061906198d0c51015991">ldlm_set_deny_on_contention</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 30)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9f57a763161f4a4f8716c703fc5441d5">ldlm_clear_deny_on_contention</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 30)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga28476345c80ee86025d566e9e7c432b9">LDLM_FL_AST_DISCARD_DATA</a>&nbsp;&nbsp;&nbsp;0x0000000080000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">These are flags that are mapped into the flags and ASTs of blocking locks Add FL_DISCARD to blocking ASTs.  <a href="#ga28476345c80ee86025d566e9e7c432b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7bfe9401ff4041d82224f7d9fd5a8482">ldlm_is_ast_discard_data</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 31)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gafe1cc46d9650a5e6d82c06a29c159e26">ldlm_set_ast_discard_data</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 31)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaeef5a5406be3d635276f1dd9630ce559">ldlm_clear_ast_discard_data</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 31)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6fc806ac2146cf3505a29a50fd6b75a9">LDLM_FL_FAIL_LOC</a>&nbsp;&nbsp;&nbsp;0x0000000100000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used for marking lock as a target for -EINTR while cp_ast sleep emulation + race with upcoming bl_ast.  <a href="#ga6fc806ac2146cf3505a29a50fd6b75a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga83cf5bbfe33014e79f316460af990d0f">ldlm_is_fail_loc</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 32)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9959f1bf5959d4735edf1126fb3ec9ea">ldlm_set_fail_loc</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 32)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2459c6cc4da5cf0f7e7ca7f2260b2b44">ldlm_clear_fail_loc</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 32)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga09f2515df973bc9c1733ac4cec99eebb">LDLM_FL_SKIPPED</a>&nbsp;&nbsp;&nbsp;0x0000000200000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used while processing the unused list to know that we have already handled this lock and decided to skip it.  <a href="#ga09f2515df973bc9c1733ac4cec99eebb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga09b9e8e58911eac14982b28b2f55c44b">ldlm_is_skipped</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 33)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga10634512888c4b543623f6822cf0b598">ldlm_set_skipped</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 33)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4deb5f953bb86cc42ef265cdf32bf003">ldlm_clear_skipped</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 33)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3845b64e7040a6d03323e5289bd71adc">LDLM_FL_CBPENDING</a>&nbsp;&nbsp;&nbsp;0x0000000400000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this lock is being destroyed  <a href="#ga3845b64e7040a6d03323e5289bd71adc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga43193bfc763430ef2aa1cf62ab70fb53">ldlm_is_cbpending</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 34)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga027fc0a527a829ee53067e2dc1f726e0">ldlm_set_cbpending</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 34)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga29713ca290c3e6a4982dbf101ef5c48b">ldlm_clear_cbpending</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 34)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gae36b9cddb3e68705d21f384ad3a3e1e6">LDLM_FL_WAIT_NOREPROC</a>&nbsp;&nbsp;&nbsp;0x0000000800000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">not a real flag, not saved in lock  <a href="#gae36b9cddb3e68705d21f384ad3a3e1e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaac93e17f7ef1c3bcbdc6eb964b2fbd4d">ldlm_is_wait_noreproc</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 35)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf0eb44893de7ec7beef6d5dc5c40cc2a">ldlm_set_wait_noreproc</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 35)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7debc0a316f795e18ca7f7acf491e508">ldlm_clear_wait_noreproc</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 35)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4572b427a57d005afd5bb1d6998966b1">LDLM_FL_CANCEL</a>&nbsp;&nbsp;&nbsp;0x0000001000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cancellation callback already run  <a href="#ga4572b427a57d005afd5bb1d6998966b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8e254e67c9d5e30dcdebed85a929317b">ldlm_is_cancel</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 36)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1455f1e0a776204e58a9ba541ef1df4a">ldlm_set_cancel</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 36)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab37fb493f16ceb215a65c0c1c1d6a641">ldlm_clear_cancel</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 36)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa938e2a5e2f72e996711b5c4ba8dd9fc">LDLM_FL_LOCAL_ONLY</a>&nbsp;&nbsp;&nbsp;0x0000002000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">whatever it might mean -- never transmitted?  <a href="#gaa938e2a5e2f72e996711b5c4ba8dd9fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga59d7f1e4366c08874123b7ff01fec2e4">ldlm_is_local_only</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 37)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab9ff50503a54dc02b071cac02c759ebe">ldlm_set_local_only</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 37)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5bdb815fb3ce9a4ed869c61ad4a1c8f3">ldlm_clear_local_only</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 37)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga932d0cd6d35eceab182f01ec135eef3f">LDLM_FL_FAILED</a>&nbsp;&nbsp;&nbsp;0x0000004000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">don't run the cancel callback under ldlm_cli_cancel_unused  <a href="#ga932d0cd6d35eceab182f01ec135eef3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga134eadd13e54392d473877fa17a99480">ldlm_is_failed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 38)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3b8a5b390db02bd12e40b4ed36128b3a">ldlm_set_failed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 38)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7bffcf04b76de167e0ccd125ac8a8dc2">ldlm_clear_failed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 38)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2dfca50053d3cc6f54e5a980c4c76082">LDLM_FL_CANCELING</a>&nbsp;&nbsp;&nbsp;0x0000008000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lock cancel has already been sent  <a href="#ga2dfca50053d3cc6f54e5a980c4c76082"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga81096d9ba93553f9b5cde134be5877e2">ldlm_is_canceling</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 39)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1bb6795e0e56604996d55b697f494459">ldlm_set_canceling</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 39)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6f40de1f083b653ce0e2ee2437b1e1c4">ldlm_clear_canceling</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 39)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad4346ef6efe6b430b0bc38976491fc84">LDLM_FL_LOCAL</a>&nbsp;&nbsp;&nbsp;0x0000010000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">local lock (ie, no srv/cli split)  <a href="#gad4346ef6efe6b430b0bc38976491fc84"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gacc15d0f5e765ee7b4bafe289bb993c9f">ldlm_is_local</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 40)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga736ca9f23df632e681be02324d6c0930">ldlm_set_local</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 40)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf4083f16184de18d7b605b3c94f9e302">ldlm_clear_local</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 40)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3af51d9e1097e0aeaacd1c3cc88fec62">LDLM_FL_LVB_READY</a>&nbsp;&nbsp;&nbsp;0x0000020000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">XXX FIXME: This is being added to b_size as a low-risk fix to the fact that the LVB filling happens _after_ the lock has been granted, so another thread can match it before the LVB has been updated.  <a href="#ga3af51d9e1097e0aeaacd1c3cc88fec62"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaed5bff466beca77dbeade6f4c5726704">ldlm_is_lvb_ready</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 41)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4ce6ecb0916ab03eb35c3f8edab8b329">ldlm_set_lvb_ready</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 41)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gacd7c6970649184c616f396b4531a91ee">ldlm_clear_lvb_ready</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 41)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaafdd093df952018e6f7acbbf8cad985b">LDLM_FL_KMS_IGNORE</a>&nbsp;&nbsp;&nbsp;0x0000040000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A lock contributes to the known minimum size (KMS) calculation until it has finished the part of its cancelation that performs write back on its dirty pages.  <a href="#gaafdd093df952018e6f7acbbf8cad985b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf3ef14e4e8c865fd02181c0082c475dc">ldlm_is_kms_ignore</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 42)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0e60a57328a2460fd4bb8e22f852ad78">ldlm_set_kms_ignore</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 42)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1a64c5397b30cfcc732e069003e6daf5">ldlm_clear_kms_ignore</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 42)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7259a0a7fa4504cb1b275d17f60e9641">LDLM_FL_CP_REQD</a>&nbsp;&nbsp;&nbsp;0x0000080000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">completion AST to be executed  <a href="#ga7259a0a7fa4504cb1b275d17f60e9641"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf785d0cee97d42a28f2868918830c6fb">ldlm_is_cp_reqd</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 43)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6bfa8f5643c8d7d52675bc11afb2501e">ldlm_set_cp_reqd</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 43)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9cc599ed974d9b794332e9b39d6273af">ldlm_clear_cp_reqd</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 43)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5b38820179446c103f27d0da2a94c028">LDLM_FL_CLEANED</a>&nbsp;&nbsp;&nbsp;0x0000100000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cleanup_resource has already handled the lock  <a href="#ga5b38820179446c103f27d0da2a94c028"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8e7ea6cd9a438a76fdb3f4e64fe6b7ab">ldlm_is_cleaned</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 44)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga05f04ea5b9a6e868bba1a518b9dbe116">ldlm_set_cleaned</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 44)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga624fc38460b964fc708ddfac76db95d6">ldlm_clear_cleaned</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 44)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf5ca91a80dd3fc578d5a9fc7fb815b74">LDLM_FL_ATOMIC_CB</a>&nbsp;&nbsp;&nbsp;0x0000200000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">optimization hint: LDLM can run blocking callback from current context w/o involving separate thread.  <a href="#gaf5ca91a80dd3fc578d5a9fc7fb815b74"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaae29299151b2559f1b361e60629217ad">ldlm_is_atomic_cb</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 45)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga585f9ffdbdb997584971f65cc5a2cf42">ldlm_set_atomic_cb</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 45)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab62c1e6231ef2a0547518303f684509e">ldlm_clear_atomic_cb</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 45)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga043b49bb5e4be85bb6a3937bb241aab1">LDLM_FL_BL_AST</a>&nbsp;&nbsp;&nbsp;0x0000400000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">It may happen that a client initiates two operations, e.g.  <a href="#ga043b49bb5e4be85bb6a3937bb241aab1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gab40aaa76d1d92290eab3d4e9f9b013ce">ldlm_is_bl_ast</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 46)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga709cdcdf17c6cf36bb25699a92edf8c9">ldlm_set_bl_ast</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 46)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gafd6578ae29904b313f9b419980304181">ldlm_clear_bl_ast</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 46)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaef583898e5ca87d62c007b0a797f1f70">LDLM_FL_BL_DONE</a>&nbsp;&nbsp;&nbsp;0x0000800000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set by <a class="el" href="group__LDLM.html#ga0a466989372b56e3cde1edae472be066" title="Helper function to call blocking AST for LDLM lock lock in a &quot;cancelling&quot;...">ldlm_cancel_callback()</a> when lock cache is dropped to let <a class="el" href="ldlm__lockd_8c.html#a6a0cb59e13512393ad9ecf942489bae7">ldlm_callback_handler()</a> return EINVAL to the server.  <a href="#gaef583898e5ca87d62c007b0a797f1f70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7abc8519b7d186988adc9d7ae97f1741">ldlm_is_bl_done</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 47)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga65a2c69bab1a1910e7aaec262d102828">ldlm_set_bl_done</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 47)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga0007fdaa295898e0192aa22d925afda1">ldlm_clear_bl_done</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 47)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga628bde1454443ba6f69043120c61acb9">LDLM_FL_NO_LRU</a>&nbsp;&nbsp;&nbsp;0x0001000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Don't put lock into the LRU list, so that it is not canceled due to aging.  <a href="#ga628bde1454443ba6f69043120c61acb9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad81285aa9c1da0efc00da7a222975806">ldlm_is_no_lru</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 48)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga950bb24d826f69faf0428634cd6c391c">ldlm_set_no_lru</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 48)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac13b65b4a0c6e897e36ed67a4e2e2097">ldlm_clear_no_lru</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 48)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga958240fb760018d3be665a8f0730b9c4">LDLM_FL_FAIL_NOTIFIED</a>&nbsp;&nbsp;&nbsp;0x0002000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set for locks that failed and where the server has been notified.  <a href="#ga958240fb760018d3be665a8f0730b9c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabe3d376b307f7e3fe634dda3ea682131">ldlm_is_fail_notified</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 49)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4c912c9c53a0937fa3f84b251025e245">ldlm_set_fail_notified</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 49)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7a581e63032fc853a77eb0bf64a8ac4a">ldlm_clear_fail_notified</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 49)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaf74d13556ae1283f30228d20c497cfa8">LDLM_FL_DESTROYED</a>&nbsp;&nbsp;&nbsp;0x0004000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set for locks that were removed from class hash table and will be destroyed when last reference to them is released.  <a href="#gaf74d13556ae1283f30228d20c497cfa8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa42d6481767a1729beb6c8e23dad96ea">ldlm_is_destroyed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 50)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac2d57af4742b5f8e68ff0962881ec391">ldlm_set_destroyed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 50)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga399a230cadef0a280fc699b93fcc6452">ldlm_clear_destroyed</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 50)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4f201720943af861e6cfe2d0ef5a0ecf">LDLM_FL_SERVER_LOCK</a>&nbsp;&nbsp;&nbsp;0x0008000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag whether this is a server namespace lock  <a href="#ga4f201720943af861e6cfe2d0ef5a0ecf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaefed8e4293c5cbf21341e5d3b6af482e">ldlm_is_server_lock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 51)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga62001bc2dfedff189ccb0b575cbae129">ldlm_set_server_lock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 51)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga432487b59e9007c35b5219f6005920f1">ldlm_clear_server_lock</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 51)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga080ded1bdce4915f2fd693eaf027f73f">LDLM_FL_RES_LOCKED</a>&nbsp;&nbsp;&nbsp;0x0010000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">It's set in <a class="el" href="group__LDLM.html#ga7ea7aa073d254d8500c07d2664cbecf9" title="Lock a lock and its resource.">lock_res_and_lock()</a> and unset in <a class="el" href="group__LDLM.html#gaf9b19facd1a8bb3cdfcac5047159f15e" title="Unlock a lock and its resource previously locked with lock_res_and_lock.">unlock_res_and_lock()</a>.  <a href="#ga080ded1bdce4915f2fd693eaf027f73f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga90bc0fd0c6d2467778dd66329a070e5f">ldlm_is_res_locked</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 52)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadcbced8b4756867913762470edd5a315">ldlm_set_res_locked</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 52)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gafdbd97aab8e1229a2c5ad8d5fc4ca5ed">ldlm_clear_res_locked</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 52)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga68ed1455a628dbdd814b21b50e455923">LDLM_FL_WAITED</a>&nbsp;&nbsp;&nbsp;0x0020000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">It's set once we call ldlm_add_waiting_lock_res_locked() to start the lock-timeout timer and it will never be reset.  <a href="#ga68ed1455a628dbdd814b21b50e455923"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad0bc7d2f9026b7113847e8d2caa39562">ldlm_is_waited</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 53)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1a43222f9825622a304f7bc5049a3b70">ldlm_set_waited</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 53)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad9802f5a74d47be01de0da224c633eb6">ldlm_clear_waited</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 53)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gacddab05dc5721dad535a55534eeb9234">LDLM_FL_NS_SRV</a>&nbsp;&nbsp;&nbsp;0x0040000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag whether this is a server namespace lock.  <a href="#gacddab05dc5721dad535a55534eeb9234"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga953f5fcbd58ad14fb6fbd150d8eacfc8">ldlm_is_ns_srv</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 54)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga4716ec80fd743545a4632ad220f795db">ldlm_set_ns_srv</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 54)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadfd41a6a0097fba092197478947dd99e">ldlm_clear_ns_srv</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 54)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga353cf18a1a7c41ccaf72d5c8bf71a129">LDLM_FL_EXCL</a>&nbsp;&nbsp;&nbsp;0x0080000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag whether this lock can be reused.  <a href="#ga353cf18a1a7c41ccaf72d5c8bf71a129"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga9a64f245838f42950fc52eff18dce5e7">ldlm_is_excl</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 55)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga5bba3d22c5ba6c45a8319f75b42fddca">ldlm_set_excl</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 55)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga7c105f3f44caa5b904252ff20c3e509a">ldlm_clear_excl</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 55)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6f5efeebb55b0f19c9403ae53405b424">LDLM_FL_RESENT</a>&nbsp;&nbsp;&nbsp;0x0100000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag whether a lock is found on server for re-sent RPC.  <a href="#ga6f5efeebb55b0f19c9403ae53405b424"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gac07f3063e5cf037bcfd71c86da494518">LDLM_FL_COS_ENABLED</a>&nbsp;&nbsp;&nbsp;0x0200000000000000ULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag whether Commit-on-Sharing is enabled, if LDLM_FL_COS_INCOMPAT is set this flag may not be set because once the former is set this flag won't be checked, and for cross-MDT lock COS_INCOMPAT is always set but ast handle is in ldlm context which doesn't know whether COS is enabled or not.  <a href="#gac07f3063e5cf037bcfd71c86da494518"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2fedc3f645ac443888603c0d55c17620">ldlm_is_cos_enabled</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG((_l), 1ULL &lt;&lt; 57)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga8e392ecba11d0501bfaa09d9da572c31">ldlm_set_cos_enabled</a>(_l)&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((_l), 1ULL &lt;&lt; 57)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1321f3908418c02cb06351a16e1f2109">LDLM_FL_AST_MASK</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">l_flags bits marked as "ast" bits  <a href="#ga1321f3908418c02cb06351a16e1f2109"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga6316c2ca1fd038c2cc96402b744d16c9">LDLM_FL_BLOCKED_MASK</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">l_flags bits marked as "blocked" bits  <a href="#ga6316c2ca1fd038c2cc96402b744d16c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gadfabf01b5433e46225676763fd9b3611">LDLM_FL_GONE_MASK</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">l_flags bits marked as "gone" bits  <a href="#gadfabf01b5433e46225676763fd9b3611"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga1a53232f696448d6586b6d66e973b9c6">LDLM_FL_INHERIT_MASK</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">l_flags bits marked as "inherit" bits  <a href="#ga1a53232f696448d6586b6d66e973b9c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga100f8e004856a4aa214a829dd7e3b42c">LDLM_FL_SRV_ENQ_MASK</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flags returned in  parameter on ldlm_lock_enqueue, to be re-constructed on re-send  <a href="#ga100f8e004856a4aa214a829dd7e3b42c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2a5e0653974bf9d9f69eafa8a1e1daa8">LDLM_TEST_FLAG</a>(_l, _b)&nbsp;&nbsp;&nbsp;(((_l)-&gt;l_flags &amp; (_b)) != 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">test for <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> flag bit set  <a href="#ga2a5e0653974bf9d9f69eafa8a1e1daa8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga062ca8745e6e880e11a83540c17ff81c">LDLM_HAVE_MASK</a>(_l, _m)&nbsp;&nbsp;&nbsp;(((_l)-&gt;l_flags &amp; LDLM_FL_##_m##_MASK) != 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">multi-bit test: are any of mask bits set?  <a href="#ga062ca8745e6e880e11a83540c17ff81c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2ded8bccac20ba7892e7733ceb7cdcb5">LDLM_SET_FLAG</a>(_l, _b)&nbsp;&nbsp;&nbsp;((_l)-&gt;l_flags |= (_b))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set a <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> flag bit  <a href="#ga2ded8bccac20ba7892e7733ceb7cdcb5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga3abf079d3e6069d3c0bc4334da16f2e1">LDLM_CLEAR_FLAG</a>(_l, _b)&nbsp;&nbsp;&nbsp;((_l)-&gt;l_flags &amp;= ~(_b))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clear a <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> flag bit  <a href="#ga3abf079d3e6069d3c0bc4334da16f2e1"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Lustre DLM is based on VAX DLM. </p>
<p>Its two main roles are:</p>
<ul>
<li>To provide locking assuring consistency of data on all Lustre nodes.</li>
<li>To allow clients to cache state protected by a lock by holding the lock until a conflicting lock is requested or it is expired by the LRU. </li>
</ul>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gae53cad77171aae681bc27e8cf30fda42"></a><!-- doxytag: member="lustre_dlm.h::DLM_MDS_NAMESPACE" ref="gae53cad77171aae681bc27e8cf30fda42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DLM_MDS_NAMESPACE&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00170">170</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga051e68d1bff6a791da6164eda988c466"></a><!-- doxytag: member="lustre_dlm.h::DLM_OST_NAMESPACE" ref="ga051e68d1bff6a791da6164eda988c466" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DLM_OST_NAMESPACE&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00169">169</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacc5fbacf11637d2acac3440b4dbe56f6"></a><!-- doxytag: member="lustre_dlm.h::ei_res_id" ref="gacc5fbacf11637d2acac3440b4dbe56f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ei_res_id&nbsp;&nbsp;&nbsp;ei_cb_gl</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01109">1109</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga23707c2e0c762c2638ee3bfa714f74de"></a><!-- doxytag: member="lustre_dlm.h::l_slc_link" ref="ga23707c2e0c762c2638ee3bfa714f74de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_slc_link&nbsp;&nbsp;&nbsp;l_rk_ast</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For uncommitted cross-MDT lock, which is client lock, share with l_rk_ast which is for server. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00909">909</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5d4a0edfc41ee022966d492b8fa6bf0d"></a><!-- doxytag: member="lustre_dlm.h::l_transno" ref="ga5d4a0edfc41ee022966d492b8fa6bf0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define l_transno&nbsp;&nbsp;&nbsp;l_client_cookie</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For uncommitted cross-MDT lock, store transno this lock belongs to. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00905">905</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac19878e62234fb5258f7c8761a3e4d61"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_COS" ref="gac19878e62234fb5258f7c8761a3e4d61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_COS&nbsp;&nbsp;&nbsp;(LCK_COS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00147">147</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0d0f660e4e3edea1831b6216c617b3a7"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_CR" ref="ga0d0f660e4e3edea1831b6216c617b3a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_CR&nbsp;&nbsp;&nbsp;(LCK_COMPAT_CW | LCK_PR | LCK_PW)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00144">144</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga972ad785641586babf8f2b9c07db438f"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_CW" ref="ga972ad785641586babf8f2b9c07db438f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_CW&nbsp;&nbsp;&nbsp;(LCK_COMPAT_PW | LCK_CW)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00143">143</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga646c49fc0ba78c1d5b30d7ef0b6fcc64"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_EX" ref="ga646c49fc0ba78c1d5b30d7ef0b6fcc64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_EX&nbsp;&nbsp;&nbsp;LCK_NL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00140">140</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga24e6e4b3c28390e97d02f7852d804297"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_GROUP" ref="ga24e6e4b3c28390e97d02f7852d804297" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_GROUP&nbsp;&nbsp;&nbsp;(LCK_GROUP | LCK_NL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00146">146</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga47b10c6ee643a2e1c1710814e425008f"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_NL" ref="ga47b10c6ee643a2e1c1710814e425008f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_NL&nbsp;&nbsp;&nbsp;(LCK_COMPAT_CR | LCK_EX | LCK_GROUP)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00145">145</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga74166fe3a7e2cf51787984249cffe774"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_PR" ref="ga74166fe3a7e2cf51787984249cffe774" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_PR&nbsp;&nbsp;&nbsp;(LCK_COMPAT_PW | LCK_PR)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00142">142</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0770471a8652e45673670fea9548e43b"></a><!-- doxytag: member="lustre_dlm.h::LCK_COMPAT_PW" ref="ga0770471a8652e45673670fea9548e43b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LCK_COMPAT_PW&nbsp;&nbsp;&nbsp;(LCK_COMPAT_EX | LCK_CR)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00141">141</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac91b29eaa6987e07656d85e9e139ca3f"></a><!-- doxytag: member="lustre_dlm.h::LDLM_CB_BLOCKING" ref="gac91b29eaa6987e07656d85e9e139ca3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_CB_BLOCKING&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The blocking callback is overloaded to perform two functions. </p>
<p>These flags indicate which operation should be performed. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00103">103</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01984">ldlm_work_revoke_ast_lock()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="file_8c_source.html#l00673">ll_md_blocking_lease_ast()</a>, <a class="el" href="mdt__handler_8c_source.html#l02366">mdt_remote_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="osc__lock_8c_source.html#l00534">osc_ldlm_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, and <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5d94274920487243f51d4942f163b947"></a><!-- doxytag: member="lustre_dlm.h::LDLM_CB_CANCELING" ref="ga5d94274920487243f51d4942f163b947" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_CB_CANCELING&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00104">104</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00828">ldlm_flock_blocking_ast()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="file_8c_source.html#l00673">ll_md_blocking_lease_ast()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__handler_8c_source.html#l02366">mdt_remote_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__lock_8c_source.html#l00534">osc_ldlm_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01312">tgt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="gaeef5a5406be3d635276f1dd9630ce559"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_ast_discard_data" ref="gaeef5a5406be3d635276f1dd9630ce559" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_ast_discard_data</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 31)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00154">154</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9a881944ad35592fb4ee3c29a433d6ae"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_ast_sent" ref="ga9a881944ad35592fb4ee3c29a433d6ae" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_ast_sent</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00065">65</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab62c1e6231ef2a0547518303f684509e"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_atomic_cb" ref="gab62c1e6231ef2a0547518303f684509e" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_atomic_cb</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 45)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00261">261</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafd6578ae29904b313f9b419980304181"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_bl_ast" ref="gafd6578ae29904b313f9b419980304181" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_bl_ast</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 46)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00273">273</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0007fdaa295898e0192aa22d925afda1"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_bl_done" ref="ga0007fdaa295898e0192aa22d925afda1" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_bl_done</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 47)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00283">283</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaaa4e6f906aec77ce6071712f1f98b8c1"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_block_conv" ref="gaaa4e6f906aec77ce6071712f1f98b8c1" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_block_conv</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00051">51</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2cc2fe0b9eb806ceaf0b9eb35442d9f6"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_block_granted" ref="ga2cc2fe0b9eb806ceaf0b9eb35442d9f6" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_block_granted</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00043">43</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa59d400b2c912384c2c531419eef1ffb"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_block_nowait" ref="gaa59d400b2c912384c2c531419eef1ffb" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_block_nowait</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 18)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00111">111</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8df760dc9316ae28f4fa66dab92c1f60"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_block_wait" ref="ga8df760dc9316ae28f4fa66dab92c1f60" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_block_wait</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00059">59</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab37fb493f16ceb215a65c0c1c1d6a641"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_cancel" ref="gab37fb493f16ceb215a65c0c1c1d6a641" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_cancel</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 36)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00188">188</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf923c2d29e2d294f8d9e6d1ed19d0eb0"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_cancel_on_block" ref="gaf923c2d29e2d294f8d9e6d1ed19d0eb0" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_cancel_on_block</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 23)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00130">130</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6f40de1f083b653ce0e2ee2437b1e1c4"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_canceling" ref="ga6f40de1f083b653ce0e2ee2437b1e1c4" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_canceling</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 39)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00206">206</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga29713ca290c3e6a4982dbf101ef5c48b"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_cbpending" ref="ga29713ca290c3e6a4982dbf101ef5c48b" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_cbpending</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 34)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00176">176</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga624fc38460b964fc708ddfac76db95d6"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_cleaned" ref="ga624fc38460b964fc708ddfac76db95d6" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_cleaned</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 44)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00253">253</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="osc__request_8c_source.html#l02601">osc_ldlm_resource_invalidate()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6dfa5f908f7f3776efcea79d0f29d762"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_cos_incompat" ref="ga6dfa5f908f7f3776efcea79d0f29d762" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_cos_incompat</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 24)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00139">139</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9cc599ed974d9b794332e9b39d6273af"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_cp_reqd" ref="ga9cc599ed974d9b794332e9b39d6273af" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_cp_reqd</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 43)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00247">247</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f57a763161f4a4f8716c703fc5441d5"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_deny_on_contention" ref="ga9f57a763161f4a4f8716c703fc5441d5" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_deny_on_contention</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 30)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00146">146</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga399a230cadef0a280fc699b93fcc6452"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_destroyed" ref="ga399a230cadef0a280fc699b93fcc6452" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_destroyed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 50)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00312">312</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabb8161d30da91eb1a4970e7682440cdb"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_discard_data" ref="gabb8161d30da91eb1a4970e7682440cdb" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_discard_data</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 16)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00097">97</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7c105f3f44caa5b904252ff20c3e509a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_excl" ref="ga7c105f3f44caa5b904252ff20c3e509a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_excl</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 55)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00352">352</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2459c6cc4da5cf0f7e7ca7f2260b2b44"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_fail_loc" ref="ga2459c6cc4da5cf0f7e7ca7f2260b2b44" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_fail_loc</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 32)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00162">162</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7a581e63032fc853a77eb0bf64a8ac4a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_fail_notified" ref="ga7a581e63032fc853a77eb0bf64a8ac4a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_fail_notified</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 49)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00301">301</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7bffcf04b76de167e0ccd125ac8a8dc2"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_failed" ref="ga7bffcf04b76de167e0ccd125ac8a8dc2" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_failed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 38)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00200">200</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3abf079d3e6069d3c0bc4334da16f2e1"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_CLEAR_FLAG" ref="ga3abf079d3e6069d3c0bc4334da16f2e1" args="(_l, _b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_CLEAR_FLAG</td>
          <td>(</td>
          <td class="paramtype">_l, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_b&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((_l)-&gt;l_flags &amp;= ~(_b))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>clear a <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> flag bit </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00402">402</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac74982ddc5a69206df4fbb85f7c72e86"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_flock_deadlock" ref="gac74982ddc5a69206df4fbb85f7c72e86" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_flock_deadlock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 15)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00091">91</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6bf94fc518423d69a91c37577e575f86"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_has_intent" ref="ga6bf94fc518423d69a91c37577e575f86" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_has_intent</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 12)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00085">85</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabf0dd7c3c1fd21cd8314f0cc4ac2a139"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_intent_only" ref="gabf0dd7c3c1fd21cd8314f0cc4ac2a139" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_intent_only</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  9)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00079">79</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a64c5397b30cfcc732e069003e6daf5"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_kms_ignore" ref="ga1a64c5397b30cfcc732e069003e6daf5" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_kms_ignore</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 42)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00241">241</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf4083f16184de18d7b605b3c94f9e302"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_local" ref="gaf4083f16184de18d7b605b3c94f9e302" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_local</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 40)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00212">212</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5bdb815fb3ce9a4ed869c61ad4a1c8f3"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_local_only" ref="ga5bdb815fb3ce9a4ed869c61ad4a1c8f3" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_local_only</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 37)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00194">194</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga649010d0b83059be3940476ce896f464"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_lock_changed" ref="ga649010d0b83059be3940476ce896f464" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_lock_changed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00035">35</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacd7c6970649184c616f396b4531a91ee"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_lvb_ready" ref="gacd7c6970649184c616f396b4531a91ee" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_lvb_ready</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 41)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00229">229</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac13b65b4a0c6e897e36ed67a4e2e2097"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_no_lru" ref="gac13b65b4a0c6e897e36ed67a4e2e2097" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_no_lru</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 48)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00292">292</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8ec923ef49ec233445dc18a64448bf57"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_no_timeout" ref="ga8ec923ef49ec233445dc18a64448bf57" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_no_timeout</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 17)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00103">103</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadfd41a6a0097fba092197478947dd99e"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_ns_srv" ref="gadfd41a6a0097fba092197478947dd99e" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_ns_srv</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 54)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00346">346</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac5e16d6fd3f10a9fd5335bf7c1596c16"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_replay" ref="gac5e16d6fd3f10a9fd5335bf7c1596c16" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_replay</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt;  8)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00073">73</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafdbd97aab8e1229a2c5ad8d5fc4ca5ed"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_res_locked" ref="gafdbd97aab8e1229a2c5ad8d5fc4ca5ed" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_res_locked</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 52)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00330">330</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga432487b59e9007c35b5219f6005920f1"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_server_lock" ref="ga432487b59e9007c35b5219f6005920f1" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_server_lock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 51)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00318">318</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4deb5f953bb86cc42ef265cdf32bf003"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_skipped" ref="ga4deb5f953bb86cc42ef265cdf32bf003" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_skipped</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 33)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00170">170</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga31a6e824141572d0a64f228988ae36d0"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_test_lock" ref="ga31a6e824141572d0a64f228988ae36d0" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_test_lock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 19)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00117">117</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7debc0a316f795e18ca7f7acf491e508"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_wait_noreproc" ref="ga7debc0a316f795e18ca7f7acf491e508" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_wait_noreproc</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 35)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00182">182</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad9802f5a74d47be01de0da224c633eb6"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_clear_waited" ref="gad9802f5a74d47be01de0da224c633eb6" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_clear_waited</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_CLEAR_FLAG((_l), 1ULL &lt;&lt; 53)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00340">340</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad0d5691a254c18afb27cbe41e96e18dc"></a><!-- doxytag: member="lustre_dlm.h::LDLM_CTIME_AGE_LIMIT" ref="gad0d5691a254c18afb27cbe41e96e18dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_CTIME_AGE_LIMIT&nbsp;&nbsp;&nbsp;(10)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00067">67</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="gad8d04218a1ba26d32ea36a1f5aebc505"></a><!-- doxytag: member="lustre_dlm.h::LDLM_DEBUG" ref="gad8d04218a1ba26d32ea36a1f5aebc505" args="(lock, fmt, a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_DEBUG</td>
          <td>(</td>
          <td class="paramtype">lock, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">a...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void)0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01168">1168</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00682">ldlm_add_cp_work_item()</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01148">ldlm_cancel_pack()</a>, <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l01001">ldlm_cli_convert_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__request_8c_source.html#l00160">ldlm_completion_tail()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01345">ldlm_resource_insert_lock_after()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__handler_8c_source.html#l03215">mdt_intent_fixup_resent()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l02366">mdt_remote_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="ofd__dev_8c_source.html#l02292">ofd_prolong_one_lock()</a>, <a class="el" href="osc__lock_8c_source.html#l00191">osc_lock_lvb_update()</a>, <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l02175">replay_lock_interpret()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1e2b479743aab3ba4119e5c751a6f188"></a><!-- doxytag: member="lustre_dlm.h::LDLM_DEBUG_LIMIT" ref="ga1e2b479743aab3ba4119e5c751a6f188" args="(mask, lock, fmt, a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_DEBUG_LIMIT</td>
          <td>(</td>
          <td class="paramtype">mask, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lock, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">a...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void)0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Support function for lock information printing into debug logs. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__LDLM.html#gad8d04218a1ba26d32ea36a1f5aebc505">LDLM_DEBUG</a> </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01167">1167</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02586">ldlm_lock_dump_handle()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01448">ldlm_resource_dump()</a>, and <a class="el" href="llite__lib_8c_source.html#l01180">ll_inode_from_resource_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gae27210c0d51e6f38e3b5f2ff08793f97"></a><!-- doxytag: member="lustre_dlm.h::LDLM_DEBUG_NOLOCK" ref="gae27210c0d51e6f38e3b5f2ff08793f97" args="(format, a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_DEBUG_NOLOCK</td>
          <td>(</td>
          <td class="paramtype">format, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">a...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CDEBUG(D_DLMTRACE, &quot;### &quot; format &quot;\n&quot; , ##a)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Just a fancy CDEBUG call with log level preset to LDLM_DEBUG. </p>
<p>For the cases where we do not have actual lock to print along with a debugging message that is ldlm-related </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01122">1122</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="file_8c_source.html#l04076">ll_layout_refresh_locked()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, and <a class="el" href="osc__lock_8c_source.html#l01162">osc_lock_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gac60d99ba1ee452e88e798028c77a6ee2"></a><!-- doxytag: member="lustre_dlm.h::LDLM_DEFAULT_LRU_SIZE" ref="gac60d99ba1ee452e88e798028c77a6ee2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_DEFAULT_LRU_SIZE&nbsp;&nbsp;&nbsp;(100 * num_online_cpus())</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00065">65</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9aa31582e16bd5db20efd0ad4ba2922e"></a><!-- doxytag: member="lustre_dlm.h::LDLM_DEFAULT_MAX_ALIVE" ref="ga9aa31582e16bd5db20efd0ad4ba2922e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_DEFAULT_MAX_ALIVE&nbsp;&nbsp;&nbsp;(cfs_time_seconds(3900))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00066">66</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8a89bf73dae43048239ae31f0f4f776f"></a><!-- doxytag: member="lustre_dlm.h::LDLM_DEFAULT_PARALLEL_AST_LIMIT" ref="ga8a89bf73dae43048239ae31f0f4f776f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_DEFAULT_PARALLEL_AST_LIMIT&nbsp;&nbsp;&nbsp;1024</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00068">68</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga658466373582d350c15ffa570d598c35"></a><!-- doxytag: member="lustre_dlm.h::LDLM_ERROR" ref="ga658466373582d350c15ffa570d598c35" args="(lock, fmt, a...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_ERROR</td>
          <td>(</td>
          <td class="paramtype">lock, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">a...&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void)0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01169">1169</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00090">ldlm_expired_completion_wait()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01539">ldlm_fill_lvb()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00955">search_granted_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gad4c476a01ccda6b86755b0ea2825d7d4"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_ALL_FLAGS_MASK" ref="gad4c476a01ccda6b86755b0ea2825d7d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_ALL_FLAGS_MASK&nbsp;&nbsp;&nbsp;0x00FFFFFFC08F932FULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>l_flags bits marked as "all_flags" bits </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00029">29</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga28476345c80ee86025d566e9e7c432b9"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_AST_DISCARD_DATA" ref="ga28476345c80ee86025d566e9e7c432b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_AST_DISCARD_DATA&nbsp;&nbsp;&nbsp;0x0000000080000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>These are flags that are mapped into the flags and ASTs of blocking locks Add FL_DISCARD to blocking ASTs. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00151">151</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ofd__obd_8c_source.html#l00984">ofd_destroy_by_fid()</a>, <a class="el" href="ofd__dev_8c_source.html#l02007">ofd_punch_hdl()</a>, and <a class="el" href="osc__lock_8c_source.html#l00162">osc_enq2ldlm_flags()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1321f3908418c02cb06351a16e1f2109"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_AST_MASK" ref="ga1321f3908418c02cb06351a16e1f2109" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_AST_MASK</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="group__LDLM.html#ga563e13b57ba8a8c2cf4801660334d35d" title="flock deadlock detected">LDLM_FL_FLOCK_DEADLOCK</a>         |\
                                         <a class="code" href="group__LDLM.html#ga28476345c80ee86025d566e9e7c432b9" title="These are flags that are mapped into the flags and ASTs of blocking locks Add FL_DISCARD...">LDLM_FL_AST_DISCARD_DATA</a>)
</pre></div>
<p>l_flags bits marked as "ast" bits </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00366">366</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3fb0e46d8dcf09f83494412e8cb5d588"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_AST_SENT" ref="ga3fb0e46d8dcf09f83494412e8cb5d588" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_AST_SENT&nbsp;&nbsp;&nbsp;0x0000000000000020ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>blocking or cancel packet was queued for sending. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00062">62</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02292">ofd_prolong_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf5ca91a80dd3fc578d5a9fc7fb815b74"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_ATOMIC_CB" ref="gaf5ca91a80dd3fc578d5a9fc7fb815b74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_ATOMIC_CB&nbsp;&nbsp;&nbsp;0x0000200000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>optimization hint: LDLM can run blocking callback from current context w/o involving separate thread. </p>
<p>in order to decrease cs rate </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00258">258</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="lfsck__lib_8c_source.html#l00355">__lfsck_ibits_lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="lod__object_8c_source.html#l03889">lod_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01215">mdt_pdir_hash_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01250">mdt_rename_lock()</a>, and <a class="el" href="mgs__handler_8c_source.html#l00227">mgs_revoke_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga043b49bb5e4be85bb6a3937bb241aab1"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BL_AST" ref="ga043b49bb5e4be85bb6a3937bb241aab1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BL_AST&nbsp;&nbsp;&nbsp;0x0000400000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>It may happen that a client initiates two operations, e.g. </p>
<p>unlink and mkdir, such that the server sends a blocking AST for conflicting locks to this client for the first operation, whereas the second operation has canceled this lock and is waiting for rpc_lock which is taken by the first operation. LDLM_FL_BL_AST is set by <a class="el" href="ldlm__lockd_8c.html#a6a0cb59e13512393ad9ecf942489bae7">ldlm_callback_handler()</a> in the lock to prevent the Early Lock Cancel (ELC) code from cancelling it. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00270">270</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="gaef583898e5ca87d62c007b0a797f1f70"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BL_DONE" ref="gaef583898e5ca87d62c007b0a797f1f70" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BL_DONE&nbsp;&nbsp;&nbsp;0x0000800000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set by <a class="el" href="group__LDLM.html#ga0a466989372b56e3cde1edae472be066" title="Helper function to call blocking AST for LDLM lock lock in a &quot;cancelling&quot;...">ldlm_cancel_callback()</a> when lock cache is dropped to let <a class="el" href="ldlm__lockd_8c.html#a6a0cb59e13512393ad9ecf942489bae7">ldlm_callback_handler()</a> return EINVAL to the server. </p>
<p>It is used when ELC RPC is already prepared and is waiting for rpc_lock, too late to send a separate CANCEL RPC. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00280">280</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga912be807748854a27fde8d99ab122dc2"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BLOCK_CONV" ref="ga912be807748854a27fde8d99ab122dc2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BLOCK_CONV&nbsp;&nbsp;&nbsp;0x0000000000000004ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Server placed lock on conv list, or a recovering client wants the lock added to the conv list, no questions asked. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00048">48</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2c6bbb5a5fb8a17d596ecaba494aa7d2"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BLOCK_GRANTED" ref="ga2c6bbb5a5fb8a17d596ecaba494aa7d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BLOCK_GRANTED&nbsp;&nbsp;&nbsp;0x0000000000000002ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Server placed lock on granted list, or a recovering client wants the lock added to the granted list, no questions asked. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00040">40</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="file_8c_source.html#l00245">ll_md_close()</a>, <a class="el" href="file_8c_source.html#l03279">ll_take_md_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l00985">mdc_revalidate_lock()</a>, <a class="el" href="osc__lock_8c_source.html#l01210">osc_dlmlock_at_pgoff()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__lock_8c_source.html#l01162">osc_lock_init()</a>, <a class="el" href="osc__object_8c_source.html#l00225">osc_object_fiemap()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga34a11c94b46a7cd00e464a9063ff3879"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BLOCK_NOWAIT" ref="ga34a11c94b46a7cd00e464a9063ff3879" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BLOCK_NOWAIT&nbsp;&nbsp;&nbsp;0x0000000000040000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Server told not to wait if blocked. </p>
<p>For AGL, OST will not send glimpse callback. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00108">108</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="file_8c_source.html#l02907">ll_file_flock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="osc__lock_8c_source.html#l00162">osc_enq2ldlm_flags()</a>, <a class="el" href="osc__lock_8c_source.html#l01162">osc_lock_init()</a>, and <a class="el" href="osp__md__object_8c_source.html#l00880">osp_md_object_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf787c22790fe3d611cd92199be25dd19"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BLOCK_WAIT" ref="gaf787c22790fe3d611cd92199be25dd19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BLOCK_WAIT&nbsp;&nbsp;&nbsp;0x0000000000000008ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Server placed lock on wait list, or a recovering client wants the lock added to the wait list, no questions asked. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00056">56</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6316c2ca1fd038c2cc96402b744d16c9"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_BLOCKED_MASK" ref="ga6316c2ca1fd038c2cc96402b744d16c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_BLOCKED_MASK</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="group__LDLM.html#ga2c6bbb5a5fb8a17d596ecaba494aa7d2" title="Server placed lock on granted list, or a recovering client wants the lock added to...">LDLM_FL_BLOCK_GRANTED</a>          |\
                                         <a class="code" href="group__LDLM.html#ga912be807748854a27fde8d99ab122dc2" title="Server placed lock on conv list, or a recovering client wants the lock added to the...">LDLM_FL_BLOCK_CONV</a>             |\
                                         <a class="code" href="group__LDLM.html#gaf787c22790fe3d611cd92199be25dd19" title="Server placed lock on wait list, or a recovering client wants the lock added to the...">LDLM_FL_BLOCK_WAIT</a>)
</pre></div>
<p>l_flags bits marked as "blocked" bits </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00370">370</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4572b427a57d005afd5bb1d6998966b1"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_CANCEL" ref="ga4572b427a57d005afd5bb1d6998966b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_CANCEL&nbsp;&nbsp;&nbsp;0x0000001000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cancellation callback already run </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00185">185</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga71cf8c345c175dcb2f9b8713e8b2bf00"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_CANCEL_ON_BLOCK" ref="ga71cf8c345c175dcb2f9b8713e8b2bf00" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_CANCEL_ON_BLOCK&nbsp;&nbsp;&nbsp;0x0000000000800000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Immediatelly cancel such locks when they block some other locks. </p>
<p>Send cancel notification to original lock holder, but expect no reply. This is for clients (like liblustre) that cannot be expected to reliably response to blocking AST. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00127">127</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2dfca50053d3cc6f54e5a980c4c76082"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_CANCELING" ref="ga2dfca50053d3cc6f54e5a980c4c76082" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_CANCELING&nbsp;&nbsp;&nbsp;0x0000008000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lock cancel has already been sent </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00203">203</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3845b64e7040a6d03323e5289bd71adc"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_CBPENDING" ref="ga3845b64e7040a6d03323e5289bd71adc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_CBPENDING&nbsp;&nbsp;&nbsp;0x0000000400000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this lock is being destroyed </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00173">173</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, and <a class="el" href="osc__lock_8c_source.html#l01210">osc_dlmlock_at_pgoff()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5b38820179446c103f27d0da2a94c028"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_CLEANED" ref="ga5b38820179446c103f27d0da2a94c028" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_CLEANED&nbsp;&nbsp;&nbsp;0x0000100000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cleanup_resource has already handled the lock </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00250">250</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac07f3063e5cf037bcfd71c86da494518"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_COS_ENABLED" ref="gac07f3063e5cf037bcfd71c86da494518" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_COS_ENABLED&nbsp;&nbsp;&nbsp;0x0200000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag whether Commit-on-Sharing is enabled, if LDLM_FL_COS_INCOMPAT is set this flag may not be set because once the former is set this flag won't be checked, and for cross-MDT lock COS_INCOMPAT is always set but ast handle is in ldlm context which doesn't know whether COS is enabled or not. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00361">361</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0b1ea8608da80462dc9948160ebe5cdc"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_COS_INCOMPAT" ref="ga0b1ea8608da80462dc9948160ebe5cdc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_COS_INCOMPAT&nbsp;&nbsp;&nbsp;0x0000000001000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag whether a lock is enqueued from a distributed transaction, and the requesting lock mode is PW/EX, if so, it will check compatibility with COS locks, and different from original COS semantic, transactions from the same client is also treated as lock conflict. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00136">136</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="lod__object_8c_source.html#l03889">lod_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01215">mdt_pdir_hash_lock()</a>, and <a class="el" href="osp__md__object_8c_source.html#l00880">osp_md_object_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7259a0a7fa4504cb1b275d17f60e9641"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_CP_REQD" ref="ga7259a0a7fa4504cb1b275d17f60e9641" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_CP_REQD&nbsp;&nbsp;&nbsp;0x0000080000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>completion AST to be executed </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00244">244</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga38083448d90777d7741c673dbcf70a94"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_DENY_ON_CONTENTION" ref="ga38083448d90777d7741c673dbcf70a94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_DENY_ON_CONTENTION&nbsp;&nbsp;&nbsp;0x0000000040000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>measure lock contention and return -EUSERS if locking contention is high </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00143">143</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="osc__lock_8c_source.html#l01162">osc_lock_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf74d13556ae1283f30228d20c497cfa8"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_DESTROYED" ref="gaf74d13556ae1283f30228d20c497cfa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_DESTROYED&nbsp;&nbsp;&nbsp;0x0004000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set for locks that were removed from class hash table and will be destroyed when last reference to them is released. </p>
<p>Set by <a class="el" href="ldlm__lock_8c.html#af9f34c7a223ad572da0072d448e49021" title="Helper to destroy a locked lock.">ldlm_lock_destroy_internal()</a>.</p>
<p>Protected by lock and resource locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00309">309</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02292">ofd_prolong_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gae90502de9395d7874082193d36611053"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_DISCARD_DATA" ref="gae90502de9395d7874082193d36611053" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_DISCARD_DATA&nbsp;&nbsp;&nbsp;0x0000000000010000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>discard (no writeback) on cancel </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00094">94</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="osc__request_8c_source.html#l00606">osc_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga353cf18a1a7c41ccaf72d5c8bf71a129"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_EXCL" ref="ga353cf18a1a7c41ccaf72d5c8bf71a129" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_EXCL&nbsp;&nbsp;&nbsp;0x0080000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag whether this lock can be reused. </p>
<p>Used by exclusive open. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00349">349</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="file_8c_source.html#l00700">ll_lease_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6fc806ac2146cf3505a29a50fd6b75a9"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_FAIL_LOC" ref="ga6fc806ac2146cf3505a29a50fd6b75a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_FAIL_LOC&nbsp;&nbsp;&nbsp;0x0000000100000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used for marking lock as a target for -EINTR while cp_ast sleep emulation + race with upcoming bl_ast. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00159">159</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ga958240fb760018d3be665a8f0730b9c4"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_FAIL_NOTIFIED" ref="ga958240fb760018d3be665a8f0730b9c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_FAIL_NOTIFIED&nbsp;&nbsp;&nbsp;0x0002000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set for locks that failed and where the server has been notified. </p>
<p>Protected by lock and resource locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00298">298</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01298">ldlm_lock_fail_match_locked()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="ga932d0cd6d35eceab182f01ec135eef3f"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_FAILED" ref="ga932d0cd6d35eceab182f01ec135eef3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_FAILED&nbsp;&nbsp;&nbsp;0x0000004000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>don't run the cancel callback under ldlm_cli_cancel_unused </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00197">197</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ga563e13b57ba8a8c2cf4801660334d35d"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_FLOCK_DEADLOCK" ref="ga563e13b57ba8a8c2cf4801660334d35d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_FLOCK_DEADLOCK&nbsp;&nbsp;&nbsp;0x0000000000008000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>flock deadlock detected </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00088">88</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="gadfabf01b5433e46225676763fd9b3611"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_GONE_MASK" ref="gadfabf01b5433e46225676763fd9b3611" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_GONE_MASK</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="group__LDLM.html#gaf74d13556ae1283f30228d20c497cfa8" title="Set for locks that were removed from class hash table and will be destroyed when...">LDLM_FL_DESTROYED</a>              |\
                                         <a class="code" href="group__LDLM.html#ga932d0cd6d35eceab182f01ec135eef3f" title="don&amp;#39;t run the cancel callback under ldlm_cli_cancel_unused">LDLM_FL_FAILED</a>)
</pre></div>
<p>l_flags bits marked as "gone" bits </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00375">375</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga71a692568def3030f14e3a56f51eacc2"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_HAS_INTENT" ref="ga71a692568def3030f14e3a56f51eacc2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_HAS_INTENT&nbsp;&nbsp;&nbsp;0x0000000000001000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lock request has intent </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00082">82</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00724">mdc_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l01181">mdc_intent_getattr_async()</a>, <a class="el" href="mdc__locks_8c_source.html#l01131">mdc_intent_getattr_async_interpret()</a>, <a class="el" href="osc__lock_8c_source.html#l00162">osc_enq2ldlm_flags()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__request_8c_source.html#l01952">osc_enqueue_fini()</a>, <a class="el" href="osc__lock_8c_source.html#l01162">osc_lock_init()</a>, <a class="el" href="qsd__request_8c_source.html#l00156">qsd_intent_interpret()</a>, and <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a53232f696448d6586b6d66e973b9c6"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_INHERIT_MASK" ref="ga1a53232f696448d6586b6d66e973b9c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_INHERIT_MASK</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="group__LDLM.html#ga71cf8c345c175dcb2f9b8713e8b2bf00" title="Immediatelly cancel such locks when they block some other locks.">LDLM_FL_CANCEL_ON_BLOCK</a>        |\
                                         <a class="code" href="group__LDLM.html#ga4df4a9b0f96c19fcdbd88c767b92cfe3" title="Blocked by group lock - wait indefinitely.">LDLM_FL_NO_TIMEOUT</a>             |\
                                         <a class="code" href="group__LDLM.html#ga58e627c7337b75f31e5879803c02d7f5" title="return blocking lock">LDLM_FL_TEST_LOCK</a>)
</pre></div>
<p>l_flags bits marked as "inherit" bits </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00382">382</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ga423c3fc60972417ed98ea9124cdae163"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_INTENT_ONLY" ref="ga423c3fc60972417ed98ea9124cdae163" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_INTENT_ONLY&nbsp;&nbsp;&nbsp;0x0000000000000200ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Don't grant lock, just do intent. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00076">76</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>.</p>

</div>
</div>
<a class="anchor" id="gaafdd093df952018e6f7acbbf8cad985b"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_KMS_IGNORE" ref="gaafdd093df952018e6f7acbbf8cad985b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_KMS_IGNORE&nbsp;&nbsp;&nbsp;0x0000040000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A lock contributes to the known minimum size (KMS) calculation until it has finished the part of its cancelation that performs write back on its dirty pages. </p>
<p>It can remain on the granted list during this whole time. Threads racing to update the KMS after performing their writeback need to know to exclude each other's locks from the calculation as they walk the granted list. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00238">238</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad4346ef6efe6b430b0bc38976491fc84"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_LOCAL" ref="gad4346ef6efe6b430b0bc38976491fc84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_LOCAL&nbsp;&nbsp;&nbsp;0x0000010000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>local lock (ie, no srv/cli split) </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00209">209</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa938e2a5e2f72e996711b5c4ba8dd9fc"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_LOCAL_ONLY" ref="gaa938e2a5e2f72e996711b5c4ba8dd9fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_LOCAL_ONLY&nbsp;&nbsp;&nbsp;0x0000002000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>whatever it might mean -- never transmitted? </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00191">191</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="lwp__dev_8c_source.html#l00582">lwp_import_event()</a>, <a class="el" href="mdc__request_8c_source.html#l02510">mdc_import_event()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01215">mdt_pdir_hash_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01250">mdt_rename_lock()</a>, <a class="el" href="mgc__request_8c_source.html#l01282">mgc_import_event()</a>, <a class="el" href="osc__request_8c_source.html#l02632">osc_import_event()</a>, and <a class="el" href="osp__dev_8c_source.html#l01574">osp_import_event()</a>.</p>

</div>
</div>
<a class="anchor" id="ga79f84ccf0096f82e1153bb5646c4a4d6"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_LOCK_CHANGED" ref="ga79f84ccf0096f82e1153bb5646c4a4d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_LOCK_CHANGED&nbsp;&nbsp;&nbsp;0x0000000000000001ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>extent, mode, or resource changed </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00032">32</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3af51d9e1097e0aeaacd1c3cc88fec62"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_LVB_READY" ref="ga3af51d9e1097e0aeaacd1c3cc88fec62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_LVB_READY&nbsp;&nbsp;&nbsp;0x0000020000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>XXX FIXME: This is being added to b_size as a low-risk fix to the fact that the LVB filling happens _after_ the lock has been granted, so another thread can match it before the LVB has been updated. </p>
<p>As a dirty hack, we set LDLM_FL_LVB_READY only after we've done the LVB poop. this is only needed on LOV/OSC now, where LVB is actually used and callers must set it in input flags.</p>
<p>The proper fix is to do the granting inside of the completion AST, which can be replaced with a LVB-aware wrapping function for OSC locks. That change is pretty high-risk, though, and would need a lot more testing. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00226">226</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__request_8c_source.html#l01952">osc_enqueue_fini()</a>, <a class="el" href="osc__lock_8c_source.html#l01066">osc_lock_cancel()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="osc__lock_8c_source.html#l00302">osc_lock_upcall()</a>, and <a class="el" href="osc__object_8c_source.html#l00225">osc_object_fiemap()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6ac6aa7bab27701ec8d953219626df95"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_MATCH_LOCK" ref="ga6ac6aa7bab27701ec8d953219626df95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_MATCH_LOCK&nbsp;&nbsp;&nbsp;0x0000000000100000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>match lock only </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00120">120</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="osc__lock_8c_source.html#l00162">osc_enq2ldlm_flags()</a>, and <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>.</p>

</div>
</div>
<a class="anchor" id="ga628bde1454443ba6f69043120c61acb9"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_NO_LRU" ref="ga628bde1454443ba6f69043120c61acb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_NO_LRU&nbsp;&nbsp;&nbsp;0x0001000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Don't put lock into the LRU list, so that it is not canceled due to aging. </p>
<p>Used by MGC locks, they are cancelled only at unmount or by callback. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00289">289</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="file_8c_source.html#l00700">ll_lease_open()</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, <a class="el" href="osp__md__object_8c_source.html#l00880">osp_md_object_lock()</a>, and <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4df4a9b0f96c19fcdbd88c767b92cfe3"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_NO_TIMEOUT" ref="ga4df4a9b0f96c19fcdbd88c767b92cfe3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_NO_TIMEOUT&nbsp;&nbsp;&nbsp;0x0000000000020000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blocked by group lock - wait indefinitely. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00100">100</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="gacddab05dc5721dad535a55534eeb9234"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_NS_SRV" ref="gacddab05dc5721dad535a55534eeb9234" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_NS_SRV&nbsp;&nbsp;&nbsp;0x0040000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag whether this is a server namespace lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00343">343</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4210c27164df8fc68b15a5c6f88d3063"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_REPLAY" ref="ga4210c27164df8fc68b15a5c6f88d3063" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_REPLAY&nbsp;&nbsp;&nbsp;0x0000000000000100ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock is being replayed. </p>
<p>This could probably be implied by the fact that one of BLOCK_{GRANTED,CONV,WAIT} is set, but that is pretty dangerous. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00070">70</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga080ded1bdce4915f2fd693eaf027f73f"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_RES_LOCKED" ref="ga080ded1bdce4915f2fd693eaf027f73f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_RES_LOCKED&nbsp;&nbsp;&nbsp;0x0010000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>It's set in <a class="el" href="group__LDLM.html#ga7ea7aa073d254d8500c07d2664cbecf9" title="Lock a lock and its resource.">lock_res_and_lock()</a> and unset in <a class="el" href="group__LDLM.html#gaf9b19facd1a8bb3cdfcac5047159f15e" title="Unlock a lock and its resource previously locked with lock_res_and_lock.">unlock_res_and_lock()</a>. </p>
<p>NB: compared with <a class="el" href="group__LDLM.html#gafcd013e3a5397cfa341646d8522d2563" title="Check if resource is already locked, assert if not.">check_res_locked()</a>, checking this bit is cheaper. Also, spin_is_locked() is deprecated for kernel code; one reason is because it works only for SMP so user needs to add extra macros like LASSERT_SPIN_LOCKED for uniprocessor kernels. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00327">327</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6f5efeebb55b0f19c9403ae53405b424"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_RESENT" ref="ga6f5efeebb55b0f19c9403ae53405b424" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_RESENT&nbsp;&nbsp;&nbsp;0x0100000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag whether a lock is found on server for re-sent RPC. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00355">355</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="mdt__handler_8c_source.html#l03215">mdt_intent_fixup_resent()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, and <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4f201720943af861e6cfe2d0ef5a0ecf"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_SERVER_LOCK" ref="ga4f201720943af861e6cfe2d0ef5a0ecf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_SERVER_LOCK&nbsp;&nbsp;&nbsp;0x0008000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>flag whether this is a server namespace lock </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00315">315</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga09f2515df973bc9c1733ac4cec99eebb"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_SKIPPED" ref="ga09f2515df973bc9c1733ac4cec99eebb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_SKIPPED&nbsp;&nbsp;&nbsp;0x0000000200000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used while processing the unused list to know that we have already handled this lock and decided to skip it. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00167">167</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga100f8e004856a4aa214a829dd7e3b42c"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_SRV_ENQ_MASK" ref="ga100f8e004856a4aa214a829dd7e3b42c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_SRV_ENQ_MASK</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="group__LDLM.html#ga79f84ccf0096f82e1153bb5646c4a4d6" title="extent, mode, or resource changed">LDLM_FL_LOCK_CHANGED</a>           |\
                                 <a class="code" href="group__LDLM.html#ga6316c2ca1fd038c2cc96402b744d16c9" title="l_flags bits marked as &amp;quot;blocked&amp;quot; bits">LDLM_FL_BLOCKED_MASK</a>           |\
                                 <a class="code" href="group__LDLM.html#ga4df4a9b0f96c19fcdbd88c767b92cfe3" title="Blocked by group lock - wait indefinitely.">LDLM_FL_NO_TIMEOUT</a>)
</pre></div>
<p>flags returned in  parameter on ldlm_lock_enqueue, to be re-constructed on re-send </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00388">388</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga58e627c7337b75f31e5879803c02d7f5"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_TEST_LOCK" ref="ga58e627c7337b75f31e5879803c02d7f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_TEST_LOCK&nbsp;&nbsp;&nbsp;0x0000000000080000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return blocking lock </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00114">114</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="file_8c_source.html#l02907">ll_file_flock()</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="file_8c_source.html#l00245">ll_md_close()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="osc__lock_8c_source.html#l01210">osc_dlmlock_at_pgoff()</a>, <a class="el" href="osc__lock_8c_source.html#l00162">osc_enq2ldlm_flags()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__lock_8c_source.html#l00925">osc_lock_enqueue()</a>, and <a class="el" href="osc__request_8c_source.html#l02201">osc_match_base()</a>.</p>

</div>
</div>
<a class="anchor" id="gae36b9cddb3e68705d21f384ad3a3e1e6"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_WAIT_NOREPROC" ref="gae36b9cddb3e68705d21f384ad3a3e1e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_WAIT_NOREPROC&nbsp;&nbsp;&nbsp;0x0000000800000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>not a real flag, not saved in lock </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00179">179</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga68ed1455a628dbdd814b21b50e455923"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_FL_WAITED" ref="ga68ed1455a628dbdd814b21b50e455923" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_FL_WAITED&nbsp;&nbsp;&nbsp;0x0020000000000000ULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>It's set once we call ldlm_add_waiting_lock_res_locked() to start the lock-timeout timer and it will never be reset. </p>
<p>Protected by lock and resource locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00337">337</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga23d29567f6cc8a2df9416fe89a728b0e"></a><!-- doxytag: member="lustre_dlm.h::LDLM_GID_ANY" ref="ga23d29567f6cc8a2df9416fe89a728b0e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_GID_ANY&nbsp;&nbsp;&nbsp;((<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>LDLM_GID_ANY is used to match any group id in <a class="el" href="group__LDLM.html#ga1373811e4c4edbb039f1da1ca7947b03" title="Attempt to find a lock with specified properties.">ldlm_lock_match()</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00655">655</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, and <a class="el" href="osc__lock_8c_source.html#l01210">osc_dlmlock_at_pgoff()</a>.</p>

</div>
</div>
<a class="anchor" id="ga003105401547ae27f8ae4d9b4c232f27"></a><!-- doxytag: member="lustre_dlm.h::LDLM_GL_WORK_NOFREE" ref="ga003105401547ae27f8ae4d9b4c232f27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_GL_WORK_NOFREE&nbsp;&nbsp;&nbsp;0x1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The <a class="el" href="structldlm__glimpse__work.html" title="Work list for sending GL ASTs to multiple locks.">ldlm_glimpse_work</a> is allocated on the stack and should not be freed. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00588">588</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02012">ldlm_work_gl_ast_lock()</a>, and <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga062ca8745e6e880e11a83540c17ff81c"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_HAVE_MASK" ref="ga062ca8745e6e880e11a83540c17ff81c" args="(_l, _m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_HAVE_MASK</td>
          <td>(</td>
          <td class="paramtype">_l, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_m&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((_l)-&gt;l_flags &amp; LDLM_FL_##_m##_MASK) != 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>multi-bit test: are any of mask bits set? </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00396">396</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7bfe9401ff4041d82224f7d9fd5a8482"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_ast_discard_data" ref="ga7bfe9401ff4041d82224f7d9fd5a8482" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_ast_discard_data</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 31)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00152">152</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>.</p>

</div>
</div>
<a class="anchor" id="gab62f7929418e41f69892278ca2a2bba0"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_ast_sent" ref="gab62f7929418e41f69892278ca2a2bba0" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_ast_sent</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00063">63</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, and <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>.</p>

</div>
</div>
<a class="anchor" id="gaae29299151b2559f1b361e60629217ad"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_atomic_cb" ref="gaae29299151b2559f1b361e60629217ad" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_atomic_cb</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 45)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00259">259</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02366">mdt_remote_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="gab40aaa76d1d92290eab3d4e9f9b013ce"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_bl_ast" ref="gab40aaa76d1d92290eab3d4e9f9b013ce" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_bl_ast</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 46)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00271">271</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7abc8519b7d186988adc9d7ae97f1741"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_bl_done" ref="ga7abc8519b7d186988adc9d7ae97f1741" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_bl_done</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 47)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00281">281</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02188">is_bl_done()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="gaabc904a075732b018f974ba7a5295f8f"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_block_conv" ref="gaabc904a075732b018f974ba7a5295f8f" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_block_conv</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00049">49</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9c47b874204dac128040e1657cf8d91b"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_block_granted" ref="ga9c47b874204dac128040e1657cf8d91b" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_block_granted</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00041">41</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga18742375606df585379a379ab9ddae83"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_block_nowait" ref="ga18742375606df585379a379ab9ddae83" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_block_nowait</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 18)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00109">109</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga973b7c56eaf5f397ac45f27853e7e79f"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_block_wait" ref="ga973b7c56eaf5f397ac45f27853e7e79f" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_block_wait</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00057">57</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e254e67c9d5e30dcdebed85a929317b"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cancel" ref="ga8e254e67c9d5e30dcdebed85a929317b" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cancel</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 36)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00186">186</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="file_8c_source.html#l02260">ll_file_ioctl()</a>, <a class="el" href="file_8c_source.html#l00901">ll_lease_close()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="ga73119e9c11597e56dbb17bb8202f0707"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cancel_on_block" ref="ga73119e9c11597e56dbb17bb8202f0707" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cancel_on_block</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 23)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00128">128</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga81096d9ba93553f9b5cde134be5877e2"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_canceling" ref="ga81096d9ba93553f9b5cde134be5877e2" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_canceling</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 39)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00204">204</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga43193bfc763430ef2aa1cf62ab70fb53"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cbpending" ref="ga43193bfc763430ef2aa1cf62ab70fb53" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cbpending</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 34)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00174">174</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="tgt__handler_8c_source.html#l01312">tgt_blocking_ast()</a>, <a class="el" href="tgt__main_8c_source.html#l00086">tgt_discard_slc_lock()</a>, and <a class="el" href="tgt__main_8c_source.html#l00054">tgt_save_slc_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e7ea6cd9a438a76fdb3f4e64fe6b7ab"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cleaned" ref="ga8e7ea6cd9a438a76fdb3f4e64fe6b7ab" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cleaned</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 44)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00251">251</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2fedc3f645ac443888603c0d55c17620"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cos_enabled" ref="ga2fedc3f645ac443888603c0d55c17620" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cos_enabled</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG((_l), 1ULL &lt;&lt; 57)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00362">362</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1443982a9767db12a97505d177434c90"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cos_incompat" ref="ga1443982a9767db12a97505d177434c90" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cos_incompat</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG((_l), 1ULL &lt;&lt; 24)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00137">137</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf785d0cee97d42a28f2868918830c6fb"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_cp_reqd" ref="gaf785d0cee97d42a28f2868918830c6fb" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_cp_reqd</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 43)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00245">245</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00682">ldlm_add_cp_work_item()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gac6147e3315d99418b2d6b3b3b630f2ac"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_deny_on_contention" ref="gac6147e3315d99418b2d6b3b3b630f2ac" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_deny_on_contention</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 30)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00144">144</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa42d6481767a1729beb6c8e23dad96ea"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_destroyed" ref="gaa42d6481767a1729beb6c8e23dad96ea" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_destroyed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 50)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">310</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__request_8c_source.html#l00160">ldlm_completion_tail()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01345">ldlm_resource_insert_lock_after()</a>, and <a class="el" href="osc__lock_8c_source.html#l00088">osc_lock_invariant()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7fcf88e1d975071d9eebf367aa9c6d5c"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_discard_data" ref="ga7fcf88e1d975071d9eebf367aa9c6d5c" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_discard_data</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 16)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00095">95</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l01980">__ldlm_bl_to_thread()</a>, and <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9a64f245838f42950fc52eff18dce5e7"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_excl" ref="ga9a64f245838f42950fc52eff18dce5e7" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_excl</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 55)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00350">350</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>.</p>

</div>
</div>
<a class="anchor" id="ga83cf5bbfe33014e79f316460af990d0f"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_fail_loc" ref="ga83cf5bbfe33014e79f316460af990d0f" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_fail_loc</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 32)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00160">160</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="gabe3d376b307f7e3fe634dda3ea682131"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_fail_notified" ref="gabe3d376b307f7e3fe634dda3ea682131" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_fail_notified</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 49)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00299">299</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga134eadd13e54392d473877fa17a99480"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_failed" ref="ga134eadd13e54392d473877fa17a99480" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_failed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 38)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00198">198</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__request_8c_source.html#l00160">ldlm_completion_tail()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, and <a class="el" href="osc__cache_8c_source.html#l00182">osc_extent_sanity_check0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7b0e5fbe0e62ecda174187118d2c9ce2"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_flock_deadlock" ref="ga7b0e5fbe0e62ecda174187118d2c9ce2" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_flock_deadlock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 15)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00089">89</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0614281afd9fd8d52b1397d93ca0ce2a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_has_intent" ref="ga0614281afd9fd8d52b1397d93ca0ce2a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_has_intent</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 12)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00083">83</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad86120436504cad63e6a672234011b21"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_intent_only" ref="gad86120436504cad63e6a672234011b21" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_intent_only</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  9)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00077">77</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf3ef14e4e8c865fd02181c0082c475dc"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_kms_ignore" ref="gaf3ef14e4e8c865fd02181c0082c475dc" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_kms_ignore</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 42)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00239">239</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00802">ldlm_extent_shift_kms()</a>.</p>

</div>
</div>
<a class="anchor" id="gacc15d0f5e765ee7b4bafe289bb993c9f"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_local" ref="gacc15d0f5e765ee7b4bafe289bb993c9f" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_local</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 40)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00210">210</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>.</p>

</div>
</div>
<a class="anchor" id="ga59d7f1e4366c08874123b7ff01fec2e4"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_local_only" ref="ga59d7f1e4366c08874123b7ff01fec2e4" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_local_only</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 37)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00192">192</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, and <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="gaff23b1afc481fda943d8487fac8eb047"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_lock_changed" ref="gaff23b1afc481fda943d8487fac8eb047" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_lock_changed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00033">33</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaed5bff466beca77dbeade6f4c5726704"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_lvb_ready" ref="gaed5bff466beca77dbeade6f4c5726704" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_lvb_ready</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 41)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00227">227</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="file_8c_source.html#l03925">ll_layout_fetch()</a>, and <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>.</p>

</div>
</div>
<a class="anchor" id="gad81285aa9c1da0efc00da7a222975806"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_no_lru" ref="gad81285aa9c1da0efc00da7a222975806" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_no_lru</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 48)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00290">290</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="ga578593a6a1c0707427c231f7ce413faf"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_no_timeout" ref="ga578593a6a1c0707427c231f7ce413faf" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_no_timeout</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 17)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00101">101</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ga953f5fcbd58ad14fb6fbd150d8eacfc8"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_ns_srv" ref="ga953f5fcbd58ad14fb6fbd150d8eacfc8" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_ns_srv</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 54)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00344">344</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00259">ldlm_lock_remove_from_lru_check()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00313">ldlm_lock_touch_in_lru()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7c664dab7f5faa023093942b65ab6b23"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_replay" ref="ga7c664dab7f5faa023093942b65ab6b23" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_replay</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt;  8)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00071">71</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga90bc0fd0c6d2467778dd66329a070e5f"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_res_locked" ref="ga90bc0fd0c6d2467778dd66329a070e5f" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_res_locked</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 52)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00328">328</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaefed8e4293c5cbf21341e5d3b6af482e"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_server_lock" ref="gaefed8e4293c5cbf21341e5d3b6af482e" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_server_lock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 51)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00316">316</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga09b9e8e58911eac14982b28b2f55c44b"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_skipped" ref="ga09b9e8e58911eac14982b28b2f55c44b" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_skipped</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 33)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00168">168</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6248a5aef4f62ab807060a21f7fb9f92"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_test_lock" ref="ga6248a5aef4f62ab807060a21f7fb9f92" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_test_lock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 19)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00115">115</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaac93e17f7ef1c3bcbdc6eb964b2fbd4d"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_wait_noreproc" ref="gaac93e17f7ef1c3bcbdc6eb964b2fbd4d" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_wait_noreproc</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 35)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00180">180</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad0bc7d2f9026b7113847e8d2caa39562"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_is_waited" ref="gad0bc7d2f9026b7113847e8d2caa39562" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_is_waited</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_TEST_FLAG(( _l), 1ULL &lt;&lt; 53)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00338">338</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="gae6f33fb4095ce2a0e694892623aee022"></a><!-- doxytag: member="lustre_dlm.h::LDLM_ITER_CONTINUE" ref="gae6f33fb4095ce2a0e694892623aee022" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_ITER_CONTINUE&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return values for lock iterators. </p>
<p>Also used during deciding of lock grants and cancellations. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01180">1180</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="ldlm__request_8c_source.html#l02056">ldlm_resource_foreach()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="osc__object_8c_source.html#l00203">osc_object_ast_clear()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02107">reprocess_one_queue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7232aeca0a992a2e812f6d639de7ea6b"></a><!-- doxytag: member="lustre_dlm.h::LDLM_ITER_STOP" ref="ga7232aeca0a992a2e812f6d639de7ea6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_ITER_STOP&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01181">1181</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02662">ldlm_bl_thread_blwi()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02113">ldlm_reprocess_res()</a>, <a class="el" href="ldlm__request_8c_source.html#l02105">ldlm_res_iter_helper()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02056">ldlm_resource_foreach()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9c871836dbef822ef90080b3d6569c5f"></a><!-- doxytag: member="lustre_dlm.h::LDLM_LOCK_GET" ref="ga9c871836dbef822ef90080b3d6569c5f" args="(lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_LOCK_GET</td>
          <td>(</td>
          <td class="paramtype">lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                              \
        <a class="code" href="group__LDLM.html#gac526504450a40715c8e25fbab715689e" title="Get a reference on a lock.">ldlm_lock_get</a>(lock);                    \
        <span class="comment">/*LDLM_DEBUG((lock), &quot;get&quot;);*/</span>          \
        lock;                                   \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01344">1344</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00682">ldlm_add_cp_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02341">ldlm_cancel_locks_for_export_cb()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02361">ldlm_export_cancel_blocked_locks()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00894">ldlm_export_flock_get()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02856">ldlm_export_lock_get()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00436">lock_handle_addref()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01154">lock_matches()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00069">ofd_intent_cb()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="osc__cache_8c_source.html#l00619">osc_extent_find()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaec77446f52676c0679185593ce8e58e3"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_list_put" ref="gaec77446f52676c0679185593ce8e58e3" args="(head, member, count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_lock_list_put</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">member, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">count&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        <span class="keyword">struct </span><a class="code" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> *_lock, *_next;                        \
        <span class="keywordtype">int</span> c = count;                                          \
        <a class="code" href="list_8h.html#ac3f72d6bd5144c7970824813810d2da1" title="Iterate over a list of given type safe against removal of list entry.">list_for_each_entry_safe</a>(_lock, _next, <a class="code" href="writemany_8c.html#af39400667a953a7c5c34e3964aa1ce9f">head</a>, member) {  \
                <span class="keywordflow">if</span> (c-- == 0)                                   \
                        <span class="keywordflow">break</span>;                                  \
                <a class="code" href="list_8h.html#ae1cde0f50b85945cfff23be4fc1586f4" title="Remove an entry from the list it is currently in and reinitialize it.">list_del_init</a>(&amp;_lock-&gt;member);                  \
                <a class="code" href="group__LDLM.html#gaf3357d35be5378aa299677e298c5a625" title="Release a lock reference obtained by some other means (see LDLM_LOCK_PUT()).">LDLM_LOCK_RELEASE</a>(_lock);                       \
        }                                                       \
        <a class="code" href="utils_2wirehdr_8c.html#a40eabc293a68a6404ce1de507c99c4b5">LASSERT</a>(c &lt;= 0);                                        \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01351">1351</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01917">ldlm_cli_cancel_list()</a>, <a class="el" href="ldlm__request_8c_source.html#l00762">ldlm_prep_elc_req()</a>, <a class="el" href="mdc__reint_8c_source.html#l00155">mdc_create()</a>, <a class="el" href="mdc__locks_8c_source.html#l00238">mdc_intent_open_pack()</a>, <a class="el" href="mdc__request_8c_source.html#l02008">mdc_ioc_swap_layouts()</a>, <a class="el" href="mdc__reint_8c_source.html#l00305">mdc_link()</a>, <a class="el" href="mdc__reint_8c_source.html#l00350">mdc_rename()</a>, <a class="el" href="mdc__reint_8c_source.html#l00102">mdc_setattr()</a>, <a class="el" href="mdc__reint_8c_source.html#l00254">mdc_unlink()</a>, and <a class="el" href="osc__request_8c_source.html#l00606">osc_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5945b4d89a157c2e0fb6d955b3bf0c3f"></a><!-- doxytag: member="lustre_dlm.h::LDLM_LOCK_PUT" ref="ga5945b4d89a157c2e0fb6d955b3bf0c3f" args="(lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_LOCK_PUT</td>
          <td>(</td>
          <td class="paramtype">lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                            \
        <a class="code" href="group__LDLM.html#ga597fb61624bdd33a92ba76a5a67679d4">LDLM_LOCK_REF_DEL</a>(lock);                \
        <span class="comment">/*LDLM_DEBUG((lock), &quot;put&quot;);*/</span>          \
        <a class="code" href="group__LDLM.html#ga5e363707438fb69f9253f2ab8bf4c5e6" title="Release lock reference.">ldlm_lock_put</a>(lock);                    \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Release a temporary lock reference obtained by <a class="el" href="group__LDLM.html#ga362da0472f4016a927cc50b1163585e4" title="Obtain a lock reference by its handle.">ldlm_handle2lock()</a> or <a class="el" href="group__LDLM.html#gabac2ce09f8215c4f05a3a8113fa72545" title="Obtain a lock reference by handle.">__ldlm_handle2lock()</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01327">1327</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="osc__cache_8c_source.html#l03131">check_and_discard_cb()</a>, <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l01001">ldlm_cli_convert_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00717">ldlm_lock_addref()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02586">ldlm_lock_dump_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02293">ldlm_lock_set_data()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="file_8c_source.html#l02260">ll_file_ioctl()</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="file_8c_source.html#l00901">ll_lease_close()</a>, <a class="el" href="llite__lib_8c_source.html#l02284">ll_prep_inode()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__lib_8c_source.html#l00400">mdc_intent_close_pack()</a>, <a class="el" href="mdc__locks_8c_source.html#l00102">mdc_set_lock_data()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__request_8c_source.html#l01990">osc_enqueue_interpret()</a>, <a class="el" href="osc__cache_8c_source.html#l00355">osc_extent_put()</a>, <a class="el" href="osc__lock_8c_source.html#l00075">osc_handle_ptr()</a>, <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>, <a class="el" href="osc__request_8c_source.html#l02201">osc_match_base()</a>, <a class="el" href="osc__io_8c_source.html#l00076">osc_read_ahead_release()</a>, <a class="el" href="osc__object_8c_source.html#l00353">osc_req_attr_set()</a>, <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>, <a class="el" href="qmt__lock_8c_source.html#l00043">qmt_intent_policy()</a>, <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, <a class="el" href="qsd__handler_8c_source.html#l00085">qsd_ready()</a>, <a class="el" href="ldlm__request_8c_source.html#l02175">replay_lock_interpret()</a>, <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>, <a class="el" href="tgt__main_8c_source.html#l00086">tgt_discard_slc_lock()</a>, and <a class="el" href="tgt__main_8c_source.html#l00054">tgt_save_slc_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga597fb61624bdd33a92ba76a5a67679d4"></a><!-- doxytag: member="lustre_dlm.h::LDLM_LOCK_REF_DEL" ref="ga597fb61624bdd33a92ba76a5a67679d4" args="(lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_LOCK_REF_DEL</td>
          <td>(</td>
          <td class="paramtype">lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;lu_ref_del(&amp;lock-&gt;l_reference, &quot;handle&quot;, current)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01278">1278</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="lustre__dlm_8h_source.html#l01282">ldlm_handle2lock_long()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf3357d35be5378aa299677e298c5a625"></a><!-- doxytag: member="lustre_dlm.h::LDLM_LOCK_RELEASE" ref="gaf3357d35be5378aa299677e298c5a625" args="(lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_LOCK_RELEASE</td>
          <td>(</td>
          <td class="paramtype">lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                            \
        <span class="comment">/*LDLM_DEBUG((lock), &quot;put&quot;);*/</span>          \
        <a class="code" href="group__LDLM.html#ga5e363707438fb69f9253f2ab8bf4c5e6" title="Release lock reference.">ldlm_lock_put</a>(lock);                    \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Release a lock reference obtained by some other means (see <a class="el" href="group__LDLM.html#ga5945b4d89a157c2e0fb6d955b3bf0c3f" title="Release a temporary lock reference obtained by ldlm_handle2lock() or __ldlm_handle2lock()...">LDLM_LOCK_PUT()</a>). </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01338">1338</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02341">ldlm_cancel_locks_for_export_cb()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02361">ldlm_export_cancel_blocked_locks()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00909">ldlm_export_flock_put()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02865">ldlm_export_lock_put()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l02338">ldlm_replay_locks()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02012">ldlm_work_gl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01984">ldlm_work_revoke_ast_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00069">ofd_intent_cb()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="osc__lock_8c_source.html#l01025">osc_lock_detach()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga032adcd4a0ffd13b0425ae6dc9fb4033"></a><!-- doxytag: member="lustre_dlm.h::LDLM_POOL_CLI_DEF_RECALC_PERIOD" ref="ga032adcd4a0ffd13b0425ae6dc9fb4033" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_POOL_CLI_DEF_RECALC_PERIOD&nbsp;&nbsp;&nbsp;(10)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default recalc period for client side pools in sec. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00228">228</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga41802548f309704722be627a3d83e310"></a><!-- doxytag: member="lustre_dlm.h::LDLM_POOL_SRV_DEF_RECALC_PERIOD" ref="ga41802548f309704722be627a3d83e310" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_POOL_SRV_DEF_RECALC_PERIOD&nbsp;&nbsp;&nbsp;(1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default recalc period for server side pools in sec. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00225">225</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7712344fc932485bff52275c2193484a"></a><!-- doxytag: member="lustre_dlm.h::LDLM_POOLS_MODEST_MARGIN_SHIFT" ref="ga7712344fc932485bff52275c2193484a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_POOLS_MODEST_MARGIN_SHIFT&nbsp;&nbsp;&nbsp;(4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>~6% margin for modest pools. </p>
<p>See <a class="el" href="ldlm__pool_8c.html">ldlm_pool.c</a> for details. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00222">222</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadbb6d2680a2d2d7ab15623b03f058edc"></a><!-- doxytag: member="lustre_dlm.h::LDLM_POOLS_THREAD_PERIOD" ref="gadbb6d2680a2d2d7ab15623b03f058edc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_POOLS_THREAD_PERIOD&nbsp;&nbsp;&nbsp;(1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>One second for pools thread check interval. </p>
<p>Each pool has own period. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00219">219</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga605a491c960028a1b607ba7d2477eca1"></a><!-- doxytag: member="lustre_dlm.h::LDLM_RESOURCE_ADDREF" ref="ga605a491c960028a1b607ba7d2477eca1" args="(res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_RESOURCE_ADDREF</td>
          <td>(</td>
          <td class="paramtype">res&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                  \
        <a class="code" href="group__lu__ref.html#ga53f12cf34123caa33e548e6884577b78">lu_ref_add_atomic</a>(&amp;(res)-&gt;lr_reference, __FUNCTION__, current);  \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01435">1435</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01971">ldlm_cli_cancel_unused_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l02131">ldlm_resource_iterate()</a>, <a class="el" href="mdc__reint_8c_source.html#l00067">mdc_resource_get_unused()</a>, and <a class="el" href="osc__request_8c_source.html#l00545">osc_resource_get_unused()</a>.</p>

</div>
</div>
<a class="anchor" id="gabcad3c4dc7bec07ec9942a817293935a"></a><!-- doxytag: member="lustre_dlm.h::LDLM_RESOURCE_DELREF" ref="gabcad3c4dc7bec07ec9942a817293935a" args="(res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_RESOURCE_DELREF</td>
          <td>(</td>
          <td class="paramtype">res&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                  \
        <a class="code" href="group__lu__ref.html#ga9502d6573eadb28a4ea33ff6482e1752">lu_ref_del</a>(&amp;(res)-&gt;lr_reference, __FUNCTION__, current);  \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01439">1439</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01971">ldlm_cli_cancel_unused_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l02131">ldlm_resource_iterate()</a>, <a class="el" href="mdc__reint_8c_source.html#l00067">mdc_resource_get_unused()</a>, and <a class="el" href="osc__request_8c_source.html#l00545">osc_resource_get_unused()</a>.</p>

</div>
</div>
<a class="anchor" id="gafe1cc46d9650a5e6d82c06a29c159e26"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_ast_discard_data" ref="gafe1cc46d9650a5e6d82c06a29c159e26" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_ast_discard_data</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 31)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00153">153</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4459ec2a203f7d86097155ded2b55ee6"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_ast_sent" ref="ga4459ec2a203f7d86097155ded2b55ee6" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_ast_sent</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00064">64</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>.</p>

</div>
</div>
<a class="anchor" id="ga585f9ffdbdb997584971f65cc5a2cf42"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_atomic_cb" ref="ga585f9ffdbdb997584971f65cc5a2cf42" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_atomic_cb</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 45)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00260">260</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="ga709cdcdf17c6cf36bb25699a92edf8c9"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_bl_ast" ref="ga709cdcdf17c6cf36bb25699a92edf8c9" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_bl_ast</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 46)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00272">272</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="ga65a2c69bab1a1910e7aaec262d102828"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_bl_done" ref="ga65a2c69bab1a1910e7aaec262d102828" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_bl_done</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 47)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00282">282</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7691070837359cb8e8e16ee3dad6e353"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_block_conv" ref="ga7691070837359cb8e8e16ee3dad6e353" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_block_conv</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00050">50</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga779c8f83ccfcd61abea9771b55ad8a56"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_block_granted" ref="ga779c8f83ccfcd61abea9771b55ad8a56" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_block_granted</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00042">42</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gacee4620434ad52c895a506b803b3f149"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_block_nowait" ref="gacee4620434ad52c895a506b803b3f149" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_block_nowait</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 18)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00110">110</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2158f1c3045fa2970d6feb793314995a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_block_wait" ref="ga2158f1c3045fa2970d6feb793314995a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_block_wait</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00058">58</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1455f1e0a776204e58a9ba541ef1df4a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cancel" ref="ga1455f1e0a776204e58a9ba541ef1df4a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cancel</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 36)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00187">187</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8860e90a297fa3f61b43725e1342a47b"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cancel_on_block" ref="ga8860e90a297fa3f61b43725e1342a47b" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cancel_on_block</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 23)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00129">129</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1bb6795e0e56604996d55b697f494459"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_canceling" ref="ga1bb6795e0e56604996d55b697f494459" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_canceling</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 39)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00205">205</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="ga027fc0a527a829ee53067e2dc1f726e0"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cbpending" ref="ga027fc0a527a829ee53067e2dc1f726e0" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cbpending</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 34)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">175</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00633">ldlm_flock_interrupted_wait()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, and <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="ga05f04ea5b9a6e868bba1a518b9dbe116"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cleaned" ref="ga05f04ea5b9a6e868bba1a518b9dbe116" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cleaned</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 44)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00252">252</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e392ecba11d0501bfaa09d9da572c31"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cos_enabled" ref="ga8e392ecba11d0501bfaa09d9da572c31" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cos_enabled</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((_l), 1ULL &lt;&lt; 57)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00363">363</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga95f858294d4e46e79a669cb0ace58663"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cos_incompat" ref="ga95f858294d4e46e79a669cb0ace58663" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cos_incompat</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((_l), 1ULL &lt;&lt; 24)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00138">138</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6bfa8f5643c8d7d52675bc11afb2501e"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_cp_reqd" ref="ga6bfa8f5643c8d7d52675bc11afb2501e" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_cp_reqd</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 43)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00246">246</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00682">ldlm_add_cp_work_item()</a>.</p>

</div>
</div>
<a class="anchor" id="ga85029d0b6047061906198d0c51015991"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_deny_on_contention" ref="ga85029d0b6047061906198d0c51015991" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_deny_on_contention</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 30)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00145">145</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac2d57af4742b5f8e68ff0962881ec391"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_destroyed" ref="gac2d57af4742b5f8e68ff0962881ec391" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_destroyed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 50)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00311">311</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="gab1fcda5e154caa22af1ad60fdf2e0b06"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_discard_data" ref="gab1fcda5e154caa22af1ad60fdf2e0b06" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_discard_data</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 16)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00096">96</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00661">ldlm_add_bl_work_item()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5bba3d22c5ba6c45a8319f75b42fddca"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_excl" ref="ga5bba3d22c5ba6c45a8319f75b42fddca" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_excl</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 55)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00351">351</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9959f1bf5959d4735edf1126fb3ec9ea"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_fail_loc" ref="ga9959f1bf5959d4735edf1126fb3ec9ea" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_fail_loc</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 32)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00161">161</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4c912c9c53a0937fa3f84b251025e245"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_fail_notified" ref="ga4c912c9c53a0937fa3f84b251025e245" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_fail_notified</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 49)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00300">300</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3b8a5b390db02bd12e40b4ed36128b3a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_failed" ref="ga3b8a5b390db02bd12e40b4ed36128b3a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_failed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 38)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00199">199</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2ded8bccac20ba7892e7733ceb7cdcb5"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_SET_FLAG" ref="ga2ded8bccac20ba7892e7733ceb7cdcb5" args="(_l, _b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_SET_FLAG</td>
          <td>(</td>
          <td class="paramtype">_l, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_b&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((_l)-&gt;l_flags |= (_b))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>set a <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> flag bit </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00399">399</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga82dffd503bdf56054744254c54345ab8"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_flock_deadlock" ref="ga82dffd503bdf56054744254c54345ab8" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_flock_deadlock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 15)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00090">90</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadcd131921eac33013ad7c34c37444557"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_has_intent" ref="gadcd131921eac33013ad7c34c37444557" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_has_intent</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 12)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00084">84</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad5522f52af5b1f744f66e1bcdc55ad2c"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_intent_only" ref="gad5522f52af5b1f744f66e1bcdc55ad2c" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_intent_only</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  9)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00078">78</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0e60a57328a2460fd4bb8e22f852ad78"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_kms_ignore" ref="ga0e60a57328a2460fd4bb8e22f852ad78" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_kms_ignore</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 42)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00240">240</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00802">ldlm_extent_shift_kms()</a>.</p>

</div>
</div>
<a class="anchor" id="ga736ca9f23df632e681be02324d6c0930"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_local" ref="ga736ca9f23df632e681be02324d6c0930" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_local</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 40)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00211">211</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>.</p>

</div>
</div>
<a class="anchor" id="gab9ff50503a54dc02b071cac02c759ebe"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_local_only" ref="gab9ff50503a54dc02b071cac02c759ebe" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_local_only</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 37)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00193">193</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>.</p>

</div>
</div>
<a class="anchor" id="ga82d504378e8b1d65a835a79152748f53"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_lock_changed" ref="ga82d504378e8b1d65a835a79152748f53" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_lock_changed</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00034">34</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4ce6ecb0916ab03eb35c3f8edab8b329"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_lvb_ready" ref="ga4ce6ecb0916ab03eb35c3f8edab8b329" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_lvb_ready</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 41)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00228">228</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01321">ldlm_lock_allow_match_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="ga950bb24d826f69faf0428634cd6c391c"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_no_lru" ref="ga950bb24d826f69faf0428634cd6c391c" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_no_lru</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 48)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00291">291</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga140b6c4b5684017ae84afed9324fde44"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_no_timeout" ref="ga140b6c4b5684017ae84afed9324fde44" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_no_timeout</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 17)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00102">102</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4716ec80fd743545a4632ad220f795db"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_ns_srv" ref="ga4716ec80fd743545a4632ad220f795db" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_ns_srv</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 54)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00345">345</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa8cc9ba6a0568a0fa36cf0d0669185dd"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_replay" ref="gaa8cc9ba6a0568a0fa36cf0d0669185dd" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_replay</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt;  8)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00072">72</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadcbced8b4756867913762470edd5a315"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_res_locked" ref="gadcbced8b4756867913762470edd5a315" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_res_locked</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 52)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00329">329</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga62001bc2dfedff189ccb0b575cbae129"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_server_lock" ref="ga62001bc2dfedff189ccb0b575cbae129" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_server_lock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 51)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00317">317</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga10634512888c4b543623f6822cf0b598"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_skipped" ref="ga10634512888c4b543623f6822cf0b598" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_skipped</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 33)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00169">169</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01458">ldlm_cancel_no_wait_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="gad450843c02c2370e1552213d971a466d"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_test_lock" ref="gad450843c02c2370e1552213d971a466d" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_test_lock</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 19)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00116">116</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf0eb44893de7ec7beef6d5dc5c40cc2a"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_wait_noreproc" ref="gaf0eb44893de7ec7beef6d5dc5c40cc2a" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_wait_noreproc</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 35)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00181">181</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a43222f9825622a304f7bc5049a3b70"></a><!-- doxytag: member="lustre_dlm_flags.h::ldlm_set_waited" ref="ga1a43222f9825622a304f7bc5049a3b70" args="(_l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ldlm_set_waited</td>
          <td>(</td>
          <td class="paramtype">_l&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LDLM_SET_FLAG((  _l), 1ULL &lt;&lt; 53)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00339">339</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2a5e0653974bf9d9f69eafa8a1e1daa8"></a><!-- doxytag: member="lustre_dlm_flags.h::LDLM_TEST_FLAG" ref="ga2a5e0653974bf9d9f69eafa8a1e1daa8" args="(_l, _b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDLM_TEST_FLAG</td>
          <td>(</td>
          <td class="paramtype">_l, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_b&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((_l)-&gt;l_flags &amp; (_b)) != 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>test for <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a> flag bit set </p>

<p>Definition at line <a class="el" href="lustre__dlm__flags_8h_source.html#l00393">393</a> of file <a class="el" href="lustre__dlm__flags_8h_source.html">lustre_dlm_flags.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5eaa516285c80b8a6bb5f879fa3191b9"></a><!-- doxytag: member="lustre_dlm.h::LUSTRE_TRACKS_LOCK_EXP_REFS" ref="ga5eaa516285c80b8a6bb5f879fa3191b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUSTRE_TRACKS_LOCK_EXP_REFS&nbsp;&nbsp;&nbsp;(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Whether to track references to exports by LDLM locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00612">612</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga04cc41bb0ea0cb2dbb2b743ddef676d3"></a><!-- doxytag: member="lustre_dlm.h::NS_DEFAULT_CONTENDED_LOCKS" ref="ga04cc41bb0ea0cb2dbb2b743ddef676d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_DEFAULT_CONTENDED_LOCKS&nbsp;&nbsp;&nbsp;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00315">315</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga222ec4eb7473a27407d03b6219387330"></a><!-- doxytag: member="lustre_dlm.h::NS_DEFAULT_CONTENTION_SECONDS" ref="ga222ec4eb7473a27407d03b6219387330" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_DEFAULT_CONTENTION_SECONDS&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00314">314</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga79f569c8af2bddcadd03bb0f5252c5a5"></a><!-- doxytag: member="lustre_dlm.h::NS_DEFAULT_MAX_NOLOCK_BYTES" ref="ga79f569c8af2bddcadd03bb0f5252c5a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_DEFAULT_MAX_NOLOCK_BYTES&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default values for the "max_nolock_size", "contention_time" and "contended_locks" namespace tunables. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00313">313</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga281358eddc378923c68a44476ad434ae"></a><!-- doxytag: member="lustre_dlm.h::OBD_LDLM_DEVICENAME" ref="ga281358eddc378923c68a44476ad434ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBD_LDLM_DEVICENAME&nbsp;&nbsp;&nbsp;&quot;ldlm&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00063">63</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae83cd198e77c1f09846f131fd1b76dee"></a><!-- doxytag: member="lustre_dlm.h::to_ldlm_interval" ref="gae83cd198e77c1f09846f131fd1b76dee" args="(n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define to_ldlm_interval</td>
          <td>(</td>
          <td class="paramtype">n&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;container_of(n, struct <a class="el" href="structldlm__interval.html">ldlm_interval</a>, li_node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00596">596</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01228">itree_overlap_cb()</a>, and <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gac111233b56bdf7a4767dcd7a2f15b378"></a><!-- doxytag: member="lustre_dlm.h::ldlm_blocking_callback" ref="gac111233b56bdf7a4767dcd7a2f15b378" args=")(struct ldlm_lock *lock, struct ldlm_lock_desc *new, void *data, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a>)(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *new, void *data, int flag)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type for blocking callback function of a lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00569">569</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab397db2317d35a64df513cd6072de20c"></a><!-- doxytag: member="lustre_dlm.h::ldlm_cancel_cbt" ref="gab397db2317d35a64df513cd6072de20c" args=")(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#gab397db2317d35a64df513cd6072de20c">ldlm_cancel_cbt</a>)(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00273">273</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac03b996dc38f767ddd9b2f5ae779b257"></a><!-- doxytag: member="lustre_dlm.h::ldlm_completion_callback" ref="gac03b996dc38f767ddd9b2f5ae779b257" args=")(struct ldlm_lock *lock, __u64 flags, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#gac03b996dc38f767ddd9b2f5ae779b257">ldlm_completion_callback</a>)(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type for completion callback function of a lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00573">573</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6e5c291246d5e6fb302d99a6111cb03d"></a><!-- doxytag: member="lustre_dlm.h::ldlm_glimpse_callback" ref="ga6e5c291246d5e6fb302d99a6111cb03d" args=")(struct ldlm_lock *lock, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#ga6e5c291246d5e6fb302d99a6111cb03d">ldlm_glimpse_callback</a>)(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type for glimpse callback function of a lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00576">576</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga755fb40aeaf77f3a7d1591645ce49ce3"></a><!-- doxytag: member="lustre_dlm.h::ldlm_iterator_t" ref="ga755fb40aeaf77f3a7d1591645ce49ce3" args=")(struct ldlm_lock *, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#ga755fb40aeaf77f3a7d1591645ce49ce3">ldlm_iterator_t</a>)(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, void *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01183">1183</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4b5fe8de6c014f23ce08ae949daef596"></a><!-- doxytag: member="lustre_dlm.h::ldlm_processing_policy" ref="ga4b5fe8de6c014f23ce08ae949daef596" args=")(struct ldlm_lock *lock, __u64 *flags, int first_enq, enum ldlm_error *err, struct list_head *work_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#ga4b5fe8de6c014f23ce08ae949daef596">ldlm_processing_policy</a>)(struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *flags, int first_enq, enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> *err, struct <a class="el" href="structlist__head.html">list_head</a> *work_list)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01172">1172</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadc68d2afc94858f99c2d2306f8285273"></a><!-- doxytag: member="lustre_dlm.h::ldlm_res_iterator_t" ref="gadc68d2afc94858f99c2d2306f8285273" args=")(struct ldlm_resource *, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#gadc68d2afc94858f99c2d2306f8285273">ldlm_res_iterator_t</a>)(struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *, void *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01184">1184</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga07447890235da125e60400b2dee48626"></a><!-- doxytag: member="lustre_dlm.h::ldlm_res_policy" ref="ga07447890235da125e60400b2dee48626" args=")(struct ldlm_namespace *, struct ldlm_lock **, void *req_cookie, enum ldlm_mode mode, __u64 flags, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="group__LDLM.html#ga07447890235da125e60400b2dee48626">ldlm_res_policy</a>)(struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> **, void *req_cookie, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, void *data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00269">269</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gae8a3b6a5d0d3244ed73924ab2421a0d0"></a><!-- doxytag: member="lustre_dlm.h::@48" ref="gae8a3b6a5d0d3244ed73924ab2421a0d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggae8a3b6a5d0d3244ed73924ab2421a0d0ac9ce485ce53eddc4df436c8df18871e4"></a><!-- doxytag: member="LDLM_NSS_LOCKS" ref="ggae8a3b6a5d0d3244ed73924ab2421a0d0ac9ce485ce53eddc4df436c8df18871e4" args="" -->LDLM_NSS_LOCKS</em>&nbsp;</td><td>
<p>LDLM namespace lock stats. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggae8a3b6a5d0d3244ed73924ab2421a0d0a6598fd5fe5e1403bf48c2f02a018d2e6"></a><!-- doxytag: member="LDLM_NSS_LAST" ref="ggae8a3b6a5d0d3244ed73924ab2421a0d0a6598fd5fe5e1403bf48c2f02a018d2e6" args="" -->LDLM_NSS_LAST</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00332">332</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafcd8eee315d3a7e1313596efd678d77e"></a><!-- doxytag: member="lustre_dlm.h::ldlm_appetite" ref="gafcd8eee315d3a7e1313596efd678d77e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#gafcd8eee315d3a7e1313596efd678d77e">ldlm_appetite</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>LDLM pools related, type of lock pool in the namespace. </p>
<p>Greedy means release cached locks aggressively </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggafcd8eee315d3a7e1313596efd678d77eac02de5a88f2822d394681c400959434d"></a><!-- doxytag: member="LDLM_NAMESPACE_GREEDY" ref="ggafcd8eee315d3a7e1313596efd678d77eac02de5a88f2822d394681c400959434d" args="" -->LDLM_NAMESPACE_GREEDY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggafcd8eee315d3a7e1313596efd678d77ea779499ef38fbd29e9e2a3cb0b5a69e6a"></a><!-- doxytag: member="LDLM_NAMESPACE_MODEST" ref="ggafcd8eee315d3a7e1313596efd678d77ea779499ef38fbd29e9e2a3cb0b5a69e6a" args="" -->LDLM_NAMESPACE_MODEST</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00304">304</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0b718c2d27bc15f43205e50e4da16ec9"></a><!-- doxytag: member="lustre_dlm.h::ldlm_cancel_flags" ref="ga0b718c2d27bc15f43205e50e4da16ec9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel flags. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga0b718c2d27bc15f43205e50e4da16ec9a280acd6e88765fc97a4833aa18e30968"></a><!-- doxytag: member="LCF_ASYNC" ref="gga0b718c2d27bc15f43205e50e4da16ec9a280acd6e88765fc97a4833aa18e30968" args="" -->LCF_ASYNC</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0b718c2d27bc15f43205e50e4da16ec9af745ae50a795037166be155b3a00183d"></a><!-- doxytag: member="LCF_LOCAL" ref="gga0b718c2d27bc15f43205e50e4da16ec9af745ae50a795037166be155b3a00183d" args="" -->LCF_LOCAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0b718c2d27bc15f43205e50e4da16ec9acec66c002c870ae3b45fbd09ad15ad16"></a><!-- doxytag: member="LCF_BL_AST" ref="gga0b718c2d27bc15f43205e50e4da16ec9acec66c002c870ae3b45fbd09ad15ad16" args="" -->LCF_BL_AST</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00615">615</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa2fbd012972eb2b2d0653c8df02964f7"></a><!-- doxytag: member="lustre_dlm.h::ldlm_error" ref="gaa2fbd012972eb2b2d0653c8df02964f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>LDLM non-error return states. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7a469cbc24e6549b934f26184a5a78230e"></a><!-- doxytag: member="ELDLM_OK" ref="ggaa2fbd012972eb2b2d0653c8df02964f7a469cbc24e6549b934f26184a5a78230e" args="" -->ELDLM_OK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7a6545cc9db51172495cf36a4c88abca7d"></a><!-- doxytag: member="ELDLM_LOCK_MATCHED" ref="ggaa2fbd012972eb2b2d0653c8df02964f7a6545cc9db51172495cf36a4c88abca7d" args="" -->ELDLM_LOCK_MATCHED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7aad827eee63f1fb0bd13912b82915f6f5"></a><!-- doxytag: member="ELDLM_LOCK_CHANGED" ref="ggaa2fbd012972eb2b2d0653c8df02964f7aad827eee63f1fb0bd13912b82915f6f5" args="" -->ELDLM_LOCK_CHANGED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7a28c1d219b7543f767cee582a9daf0ee4"></a><!-- doxytag: member="ELDLM_LOCK_ABORTED" ref="ggaa2fbd012972eb2b2d0653c8df02964f7a28c1d219b7543f767cee582a9daf0ee4" args="" -->ELDLM_LOCK_ABORTED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7ad2b452e88a337a4a273ac71919544a61"></a><!-- doxytag: member="ELDLM_LOCK_REPLACED" ref="ggaa2fbd012972eb2b2d0653c8df02964f7ad2b452e88a337a4a273ac71919544a61" args="" -->ELDLM_LOCK_REPLACED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7a1e8fbbeb38571f8585669ab5c6b8b826"></a><!-- doxytag: member="ELDLM_NO_LOCK_DATA" ref="ggaa2fbd012972eb2b2d0653c8df02964f7a1e8fbbeb38571f8585669ab5c6b8b826" args="" -->ELDLM_NO_LOCK_DATA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7adc752fef82372dea573a2efc868d937d"></a><!-- doxytag: member="ELDLM_LOCK_WOULDBLOCK" ref="ggaa2fbd012972eb2b2d0653c8df02964f7adc752fef82372dea573a2efc868d937d" args="" -->ELDLM_LOCK_WOULDBLOCK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7af441d44d6cd8360c0690ee5d3dcae1e6"></a><!-- doxytag: member="ELDLM_NAMESPACE_EXISTS" ref="ggaa2fbd012972eb2b2d0653c8df02964f7af441d44d6cd8360c0690ee5d3dcae1e6" args="" -->ELDLM_NAMESPACE_EXISTS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa2fbd012972eb2b2d0653c8df02964f7ad3bcb2932ca3f78b679bce01f6890410"></a><!-- doxytag: member="ELDLM_BAD_NAMESPACE" ref="ggaa2fbd012972eb2b2d0653c8df02964f7ad3bcb2932ca3f78b679bce01f6890410" args="" -->ELDLM_BAD_NAMESPACE</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00073">73</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga516147f10f1ca82e556a7f8c3ee5d6ff"></a><!-- doxytag: member="lustre_dlm.h::ldlm_ns_type" ref="ga516147f10f1ca82e556a7f8c3ee5d6ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#ga516147f10f1ca82e556a7f8c3ee5d6ff">ldlm_ns_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffaf5e8bcf861bcd7b236cb287da70a974e"></a><!-- doxytag: member="LDLM_NS_TYPE_UNKNOWN" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffaf5e8bcf861bcd7b236cb287da70a974e" args="" -->LDLM_NS_TYPE_UNKNOWN</em>&nbsp;</td><td>
<p>invalid type </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffaabe8a36130ca1ffe942ad581cc3b7d50"></a><!-- doxytag: member="LDLM_NS_TYPE_MDC" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffaabe8a36130ca1ffe942ad581cc3b7d50" args="" -->LDLM_NS_TYPE_MDC</em>&nbsp;</td><td>
<p>MDC namespace. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffa6f51895209e33fae55026bc462d17ed1"></a><!-- doxytag: member="LDLM_NS_TYPE_MDT" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffa6f51895209e33fae55026bc462d17ed1" args="" -->LDLM_NS_TYPE_MDT</em>&nbsp;</td><td>
<p>MDT namespace. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffab42df29b6de6da3b65b3db2496efe009"></a><!-- doxytag: member="LDLM_NS_TYPE_OSC" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffab42df29b6de6da3b65b3db2496efe009" args="" -->LDLM_NS_TYPE_OSC</em>&nbsp;</td><td>
<p>OSC namespace. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffabaac77dbb962ddbffeb7d4092d38c141"></a><!-- doxytag: member="LDLM_NS_TYPE_OST" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffabaac77dbb962ddbffeb7d4092d38c141" args="" -->LDLM_NS_TYPE_OST</em>&nbsp;</td><td>
<p>OST namespace. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffabdcaf331de52005bd3c5c67979a44601"></a><!-- doxytag: member="LDLM_NS_TYPE_MGC" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffabdcaf331de52005bd3c5c67979a44601" args="" -->LDLM_NS_TYPE_MGC</em>&nbsp;</td><td>
<p>MGC namespace. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga516147f10f1ca82e556a7f8c3ee5d6ffa8fcb201d020caf855369cdcb8796ec9b"></a><!-- doxytag: member="LDLM_NS_TYPE_MGT" ref="gga516147f10f1ca82e556a7f8c3ee5d6ffa8fcb201d020caf855369cdcb8796ec9b" args="" -->LDLM_NS_TYPE_MGT</em>&nbsp;</td><td>
<p>MGT namespace. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00338">338</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac4b4584603b76e6cc86c82a64f59defd"></a><!-- doxytag: member="lustre_dlm.h::ldlm_side" ref="gac4b4584603b76e6cc86c82a64f59defd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>LDLM namespace type. </p>
<p>The "client" type is actually an indication that this is a narrow local view into complete namespace on the server. Such namespaces cannot make any decisions about lack of conflicts or do any autonomous lock granting without first speaking to a server. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggac4b4584603b76e6cc86c82a64f59defdad589556d4b2a4f1a2f0793c32688d90d"></a><!-- doxytag: member="LDLM_NAMESPACE_SERVER" ref="ggac4b4584603b76e6cc86c82a64f59defdad589556d4b2a4f1a2f0793c32688d90d" args="" -->LDLM_NAMESPACE_SERVER</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggac4b4584603b76e6cc86c82a64f59defda7b389ca5799b0c65fd290cfe04e34143"></a><!-- doxytag: member="LDLM_NAMESPACE_CLIENT" ref="ggac4b4584603b76e6cc86c82a64f59defda7b389ca5799b0c65fd290cfe04e34143" args="" -->LDLM_NAMESPACE_CLIENT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00094">94</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="gade643efde1936c79a28d8a944592c5c0"></a><!-- doxytag: member="lustre_dlm.h::lock_res_type" ref="gade643efde1936c79a28d8a944592c5c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#gade643efde1936c79a28d8a944592c5c0">lock_res_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>"Modes" of acquiring lock_res, necessary to tell lockdep that taking more than one lock_res is dead-lock safe. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggade643efde1936c79a28d8a944592c5c0ad775dfdebf93887431d72e62cbe354d5"></a><!-- doxytag: member="LRT_NORMAL" ref="ggade643efde1936c79a28d8a944592c5c0ad775dfdebf93887431d72e62cbe354d5" args="" -->LRT_NORMAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggade643efde1936c79a28d8a944592c5c0a4a0f0c6e05a64fe747ae65a84f5485f6"></a><!-- doxytag: member="LRT_NEW" ref="ggade643efde1936c79a28d8a944592c5c0a4a0f0c6e05a64fe747ae65a84f5485f6" args="" -->LRT_NEW</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01531">1531</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2e4dbf6d38ddcec566ec40c96391622b"></a><!-- doxytag: member="lustre_dlm.h::lvb_type" ref="ga2e4dbf6d38ddcec566ec40c96391622b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#ga2e4dbf6d38ddcec566ec40c96391622b">lvb_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga2e4dbf6d38ddcec566ec40c96391622bab1967a2d167089505571b25c0a6547f2"></a><!-- doxytag: member="LVB_T_NONE" ref="gga2e4dbf6d38ddcec566ec40c96391622bab1967a2d167089505571b25c0a6547f2" args="" -->LVB_T_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga2e4dbf6d38ddcec566ec40c96391622ba2ae75dc7422531699cd74001225a39e2"></a><!-- doxytag: member="LVB_T_OST" ref="gga2e4dbf6d38ddcec566ec40c96391622ba2ae75dc7422531699cd74001225a39e2" args="" -->LVB_T_OST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga2e4dbf6d38ddcec566ec40c96391622baaab44131ef0d4c55db5843cebc2cd7be"></a><!-- doxytag: member="LVB_T_LQUOTA" ref="gga2e4dbf6d38ddcec566ec40c96391622baaab44131ef0d4c55db5843cebc2cd7be" args="" -->LVB_T_LQUOTA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga2e4dbf6d38ddcec566ec40c96391622ba0a84718eea4af0a71dee79c2d1d535e4"></a><!-- doxytag: member="LVB_T_LAYOUT" ref="gga2e4dbf6d38ddcec566ec40c96391622ba0a84718eea4af0a71dee79c2d1d535e4" args="" -->LVB_T_LAYOUT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00645">645</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gabac2ce09f8215c4f05a3a8113fa72545"></a><!-- doxytag: member="lustre_dlm.h::__ldlm_handle2lock" ref="gabac2ce09f8215c4f05a3a8113fa72545" args="(const struct lustre_handle *, __u64 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* __ldlm_handle2lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtain a lock reference by handle. </p>
<p>if <em>flags:</em> atomically get the lock and set the flags. Return NULL if flag already set </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00594">594</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__handles_8c_source.html#l00155">class_handle2object()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00885">ldlm_lock::l_reference</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">ldlm_is_destroyed</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lu__ref_8h_source.html#l00204">lu_ref_add()</a>, <a class="el" href="lu__ref_8h_source.html#l00210">lu_ref_add_atomic()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01282">ldlm_handle2lock_long()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="gafcd013e3a5397cfa341646d8522d2563"></a><!-- doxytag: member="lustre_dlm.h::check_res_locked" ref="gafcd013e3a5397cfa341646d8522d2563" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void check_res_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if resource is already locked, assert if not. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01556">1556</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00935">ldlm_resource::lr_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00700">ldlm_add_ast_work_item()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00118">ldlm_flock_blocking_unlink()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01345">ldlm_resource_insert_lock_after()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, and <a class="el" href="osc__lock_8c_source.html#l00191">osc_lock_lvb_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga372b1e5c9e8be8bd6bbd2c3e279ec146"></a><!-- doxytag: member="lustre_dlm.h::intent_disposition" ref="ga372b1e5c9e8be8bd6bbd2c3e279ec146" args="(struct ldlm_reply *rep, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int intent_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga3b01cf0ee883cc9a25d74ca83032a529"></a><!-- doxytag: member="lustre_dlm.h::intent_set_disposition" ref="ga3b01cf0ee883cc9a25d74ca83032a529" args="(struct ldlm_reply *rep, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intent_set_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga0a466989372b56e3cde1edae472be066"></a><!-- doxytag: member="lustre_dlm.h::ldlm_cancel_callback" ref="ga0a466989372b56e3cde1edae472be066" args="(struct ldlm_lock *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_cancel_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helper function to call blocking AST for LDLM lock <em>lock</em> in a "cancelling" mode. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02205">2205</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02188">is_bl_done()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00822">ldlm_lock::l_ast_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lustre__dlm_8h_source.html#l00791">ldlm_lock::l_waitq</a>, <a class="el" href="lustre__dlm_8h_source.html#l00104">LDLM_CB_CANCELING</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00281">ldlm_is_bl_done</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00186">ldlm_is_cancel</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00282">ldlm_set_bl_done</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00187">ldlm_set_cancel</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0f272b273065dc0d916fcb5c6b61d656"></a><!-- doxytag: member="lustre_dlm.h::ldlm_convert_policy_to_local" ref="ga0f272b273065dc0d916fcb5c6b61d656" args="(struct obd_export *exp, enum ldlm_type type, const union ldlm_wire_policy_data *wpolicy, union ldlm_policy_data *lpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_convert_policy_to_local </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts lock policy from on the wire lock_desc format to local format. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00103">103</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02819">LDLM_MIN_TYPE</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00072">ldlm_policy_wire_to_local</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga82466f1300e6e9395e768b7336c0ac46"></a><!-- doxytag: member="lustre_dlm.h::ldlm_convert_policy_to_wire" ref="ga82466f1300e6e9395e768b7336c0ac46" args="(enum ldlm_type type, const union ldlm_policy_data *lpolicy, union ldlm_wire_policy_data *wpolicy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_convert_policy_to_wire </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>lpolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__wire__policy__data.html">ldlm_wire_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>wpolicy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts lock policy from local format to on the wire lock_desc format. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00089">89</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02819">LDLM_MIN_TYPE</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00079">ldlm_policy_local_to_wire</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2efedea3f32b10e36e3bcf7dc9aa44d2"></a><!-- doxytag: member="lustre_dlm.h::ldlm_del_waiting_lock" ref="ga2efedea3f32b10e36e3bcf7dc9aa44d2" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_del_waiting_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00595">595</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="ga20871b8557c0afe94cb45c2d64cbd31f"></a><!-- doxytag: member="lustre_dlm.h::ldlm_destroy_export" ref="ga20871b8557c0afe94cb45c2d64cbd31f" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_destroy_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02913">2913</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00221">obd_export::exp_lock_hash</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00955">ldlm_destroy_flock_export()</a>.</p>

<p>Referenced by <a class="el" href="echo_8c_source.html#l00097">echo_destroy_export()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02884">ldlm_init_export()</a>, <a class="el" href="mdt__handler_8c_source.html#l05397">mdt_destroy_export()</a>, <a class="el" href="mgs__handler_8c_source.html#l00616">mgs_destroy_export()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00492">ofd_destroy_export()</a>.</p>

</div>
</div>
<a class="anchor" id="ga70a63f0359188ff0526655c7c664ef1d"></a><!-- doxytag: member="lustre_dlm.h::ldlm_dump_all_namespaces" ref="ga70a63f0359188ff0526655c7c664ef1d" args="(enum ldlm_side client, int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_dump_all_namespaces </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print information about all locks in all namespaces on this node to debug log. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01389">1389</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="ldlm__resource_8c_source.html#l01425">ldlm_namespace_dump()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00070">ldlm_namespace_list()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="portals_8c_source.html#l00045">libcfs_debug</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9d483fecb156d6db20dc2bfc1d6f11be"></a><!-- doxytag: member="lustre_dlm.h::ldlm_errno2error" ref="ga9d483fecb156d6db20dc2bfc1d6f11be" args="(int err_no)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a> ldlm_errno2error </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>err_no</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dual to <a class="el" href="group__LDLM.html#ga7dac0446d813ef65c24c0831b6d1a519" title="Rather arbitrary mapping from LDLM error codes to errno values.">ldlm_error2errno()</a>: maps errno values back to enum ldlm_error. </p>

<p>Definition at line <a class="el" href="ldlm__lib_8c_source.html#l03009">3009</a> of file <a class="el" href="ldlm__lib_8c_source.html">ldlm_lib.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00084">ELDLM_BAD_NAMESPACE</a>, <a class="el" href="lustre__dlm_8h_source.html#l00078">ELDLM_LOCK_ABORTED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00077">ELDLM_LOCK_CHANGED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00079">ELDLM_LOCK_REPLACED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00083">ELDLM_NAMESPACE_EXISTS</a>, <a class="el" href="lustre__dlm_8h_source.html#l00080">ELDLM_NO_LOCK_DATA</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, and <a class="el" href="it__test_8c_source.html#l00055">error</a>.</p>

</div>
</div>
<a class="anchor" id="ga7dac0446d813ef65c24c0831b6d1a519"></a><!-- doxytag: member="lustre_dlm.h::ldlm_error2errno" ref="ga7dac0446d813ef65c24c0831b6d1a519" args="(enum ldlm_error error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_error2errno </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gaa2fbd012972eb2b2d0653c8df02964f7">ldlm_error</a>&nbsp;</td>
          <td class="paramname"> <em>error</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Rather arbitrary mapping from LDLM error codes to errno values. </p>
<p>This should not escape to the user level. </p>

<p>Definition at line <a class="el" href="ldlm__lib_8c_source.html#l02967">2967</a> of file <a class="el" href="ldlm__lib_8c_source.html">ldlm_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l00084">ELDLM_BAD_NAMESPACE</a>, <a class="el" href="lustre__dlm_8h_source.html#l00078">ELDLM_LOCK_ABORTED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00077">ELDLM_LOCK_CHANGED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00075">ELDLM_LOCK_MATCHED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00079">ELDLM_LOCK_REPLACED</a>, <a class="el" href="lustre__dlm_8h_source.html#l00083">ELDLM_NAMESPACE_EXISTS</a>, <a class="el" href="lustre__dlm_8h_source.html#l00080">ELDLM_NO_LOCK_DATA</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>.</p>

<p>Referenced by <a class="el" href="osc__lock_8c_source.html#l00302">osc_lock_upcall()</a>, and <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>.</p>

</div>
</div>
<a class="anchor" id="gadc8dcde45df7d4bea889736aca442600"></a><!-- doxytag: member="lustre_dlm.h::ldlm_expired_completion_wait" ref="gadc8dcde45df7d4bea889736aca442600" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_expired_completion_wait </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__request_8c_source.html#l00090">90</a> of file <a class="el" href="ldlm__request_8c_source.html">ldlm_request.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00523">ptlrpc_connection::c_remote_uuid</a>, <a class="el" href="linux-time_8h_source.html#l00263">CFS_DURATION_T</a>, <a class="el" href="libcfs__time_8h_source.html#l00056">cfs_time_after()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__time_8h_source.html#l00067">cfs_time_shift()</a>, <a class="el" href="libcfs__time_8h_source.html#l00051">cfs_time_sub()</a>, <a class="el" href="linux-time_8h_source.html#l00262">CFS_TIME_T</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00170">obd_import::imp_connection</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00797">ldlm_lock::l_last_activity</a>, <a class="el" href="lustre__dlm_8h_source.html#l01169">LDLM_ERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01425">ldlm_namespace_dump()</a>, <a class="el" href="libcfs_2libcfs_2debug_8c_source.html#l00251">libcfs_debug_dumplog()</a>, <a class="el" href="ldlm__request_8c_source.html#l00083">lock_wait_data::lwd_conn_cnt</a>, <a class="el" href="ldlm__request_8c_source.html#l00082">lock_wait_data::lwd_lock</a>, <a class="el" href="obd_8h_source.html#l00332">obd2cli_tgt</a>, <a class="el" href="import_8c_source.html#l00429">ptlrpc_fail_import()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa9bd1ddd8fa94d5bb36d9ab2499148f3"></a><!-- doxytag: member="lustre_dlm.h::ldlm_extent_shift_kms" ref="gaa9bd1ddd8fa94d5bb36d9ab2499148f3" args="(struct ldlm_lock *lock, __u64 old_kms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ldlm_extent_shift_kms </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>old_kms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__extent_8c_source.html#l00802">802</a> of file <a class="el" href="ldlm__extent_8c_source.html">ldlm_extent.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00239">ldlm_is_kms_ignore</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00240">ldlm_set_kms_ignore</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga921f8d85541cbe1fa330b9a12080103f"></a><!-- doxytag: member="lustre_dlm.h::ldlm_flock_completion_ast" ref="ga921f8d85541cbe1fa330b9a12080103f" args="(struct ldlm_lock *lock, __u64 flags, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_flock_completion_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flock completion callback function. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lock</em>&nbsp;</td><td>[in,out]: A lock to be handled </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>[in]: flags </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*data</em>&nbsp;</td><td>[in]: <a class="el" href="ldlm__lock_8c.html#a41414c0cf9fe6b7650866733df35e9ac" title="Process a call to completion AST callback for a lock in ast_work list.">ldlm_work_cp_ast_lock()</a> will use <a class="el" href="structldlm__cb__set__arg.html">ldlm_cb_set_arg</a></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>: success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>&lt;0</em>&nbsp;</td><td>: failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__flock_8c_source.html#l00662">662</a> of file <a class="el" href="ldlm__flock_8c_source.html">ldlm_flock.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="lustre__dlm_8h_source.html#l00623">ldlm_flock::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="linux-fs_8h_source.html#l00073">flock_set_end</a>, <a class="el" href="linux-fs_8h_source.html#l00069">flock_set_pid</a>, <a class="el" href="linux-fs_8h_source.html#l00071">flock_set_start</a>, <a class="el" href="linux-fs_8h_source.html#l00067">flock_set_type</a>, <a class="el" href="linux-fs_8h_source.html#l00066">flock_type</a>, <a class="el" href="ldlm__flock_8c_source.html#l00629">ldlm_flock_wait_data::fwd_generation</a>, <a class="el" href="ldlm__flock_8c_source.html#l00628">ldlm_flock_wait_data::fwd_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00237">obd_import::imp_generation</a>, <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00822">ldlm_lock::l_ast_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00634">ldlm_policy_data::l_flock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lustre__dlm_8h_source.html#l00791">ldlm_lock::l_waitq</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00370">LDLM_FL_BLOCKED_MASK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00173">LDLM_FL_CBPENDING</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00159">LDLM_FL_FAIL_LOC</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00197">LDLM_FL_FAILED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00088">LDLM_FL_FLOCK_DEADLOCK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00114">LDLM_FL_TEST_LOCK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00179">LDLM_FL_WAIT_NOREPROC</a>, <a class="el" href="ldlm__flock_8c_source.html#l00133">ldlm_flock_destroy()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00633">ldlm_flock_interrupted_wait()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">ldlm_is_destroyed</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00198">ldlm_is_failed</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00089">ldlm_is_flock_deadlock</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00115">ldlm_is_test_lock</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__lib_8h_source.html#l00189">LWI_TIMEOUT_INTR</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="obd__support_8h_source.html#l00349">OBD_FAIL_LDLM_CP_CB_WAIT</a>, <a class="el" href="obd__support_8h_source.html#l00360">OBD_FAIL_LDLM_CP_CB_WAIT2</a>, <a class="el" href="obd__support_8h_source.html#l00361">OBD_FAIL_LDLM_CP_CB_WAIT3</a>, <a class="el" href="obd__support_8h_source.html#l00362">OBD_FAIL_LDLM_CP_CB_WAIT4</a>, <a class="el" href="obd__support_8h_source.html#l00363">OBD_FAIL_LDLM_CP_CB_WAIT5</a>, <a class="el" href="obd__support_8h_source.html#l00618">OBD_FAIL_PRECHECK</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00629">ldlm_flock::pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__dlm_8h_source.html#l00622">ldlm_flock::start</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l02907">ll_file_flock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2582912f032081101820c56da0dbfb76"></a><!-- doxytag: member="lustre_dlm.h::ldlm_get_ref" ref="ga2582912f032081101820c56da0dbfb76" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_get_ref </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02783">2783</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00059">ldlm_ref_mutex</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00060">ldlm_refcount</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lib_8c_source.html#l00261">client_obd_setup()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga362da0472f4016a927cc50b1163585e4"></a><!-- doxytag: member="lustre_dlm.h::ldlm_handle2lock" ref="ga362da0472f4016a927cc50b1163585e4" args="(const struct lustre_handle *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* ldlm_handle2lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtain a lock reference by its handle. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01273">1273</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00717">ldlm_lock_addref()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02586">ldlm_lock_dump_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02293">ldlm_lock_set_data()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="file_8c_source.html#l02260">ll_file_ioctl()</a>, <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="file_8c_source.html#l00901">ll_lease_close()</a>, <a class="el" href="llite__lib_8c_source.html#l02284">ll_prep_inode()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__lib_8c_source.html#l00400">mdc_intent_close_pack()</a>, <a class="el" href="mdc__locks_8c_source.html#l00102">mdc_set_lock_data()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02735">mdt_save_remote_lock()</a>, <a class="el" href="ofd__dev_8c_source.html#l02344">ofd_prolong_extent_locks()</a>, <a class="el" href="osc__lock_8c_source.html#l01210">osc_dlmlock_at_pgoff()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__request_8c_source.html#l01990">osc_enqueue_interpret()</a>, <a class="el" href="osc__lock_8c_source.html#l00075">osc_handle_ptr()</a>, <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>, <a class="el" href="osc__request_8c_source.html#l02201">osc_match_base()</a>, <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>, <a class="el" href="qmt__lock_8c_source.html#l00043">qmt_intent_policy()</a>, <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, <a class="el" href="qsd__handler_8c_source.html#l00085">qsd_ready()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02175">replay_lock_interpret()</a>.</p>

</div>
</div>
<a class="anchor" id="gaee7a1e25a9767f6e3bdbade69a15764f"></a><!-- doxytag: member="lustre_dlm.h::ldlm_handle2lock_long" ref="gaee7a1e25a9767f6e3bdbade69a15764f" args="(const struct lustre_handle *h, __u64 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* ldlm_handle2lock_long </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01282">1282</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01278">LDLM_LOCK_REF_DEL</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, and <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8d888511805f9240f67510e7b149938c"></a><!-- doxytag: member="lustre_dlm.h::ldlm_has_layout" ref="ga8d888511805f9240f67510e7b149938c" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool ldlm_has_layout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00987">987</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02841">ldlm_inodebits::bits</a>, <a class="el" href="lustre__dlm_8h_source.html#l00635">ldlm_policy_data::l_inodebits</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, and <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l03872">ll_layout_conf()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="llite__lib_8c_source.html#l02284">ll_prep_inode()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, and <a class="el" href="mdt__lvb_8c_source.html#l00073">mdt_lvbo_size()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa1ae45d9f2b5213f12d150a3806e03b4"></a><!-- doxytag: member="lustre_dlm.h::ldlm_init_export" ref="gaa1ae45d9f2b5213f12d150a3806e03b4" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_init_export </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02884">2884</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00165">CFS_HASH_DEFAULT</a>, <a class="el" href="libcfs__hash_8h_source.html#l00775">CFS_HASH_MAX_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00774">CFS_HASH_MIN_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00159">CFS_HASH_NBLK_CHANGE</a>, <a class="el" href="libcfs__hash_8h_source.html#l00146">CFS_HASH_REHASH_KEY</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00221">obd_export::exp_lock_hash</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="obd__support_8h_source.html#l00102">HASH_EXP_LOCK_BKT_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00103">HASH_EXP_LOCK_CUR_BITS</a>, <a class="el" href="obd__support_8h_source.html#l00104">HASH_EXP_LOCK_MAX_BITS</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02913">ldlm_destroy_export()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00936">ldlm_init_flock_export()</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="echo_8c_source.html#l00092">echo_init_export()</a>, <a class="el" href="mdt__handler_8c_source.html#l05360">mdt_init_export()</a>, <a class="el" href="mgs__handler_8c_source.html#l00597">mgs_init_export()</a>, and <a class="el" href="ofd__obd_8c_source.html#l00456">ofd_init_export()</a>.</p>

</div>
</div>
<a class="anchor" id="gad3450a8071d042dd92be8f2a9177e112"></a><!-- doxytag: member="lustre_dlm.h::ldlm_it2str" ref="gad3450a8071d042dd92be8f2a9177e112" args="(enum ldlm_intent_flags it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ldlm_it2str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga9c053c844f0d79b44f18bb65850a6081">ldlm_intent_flags</a>&nbsp;</td>
          <td class="paramname"> <em>it</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00114">114</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="packet-lustre_8c_source.html#l00234">IT_CREAT</a>, <a class="el" href="packet-lustre_8c_source.html#l00236">IT_GETATTR</a>, <a class="el" href="packet-lustre_8c_source.html#l00239">IT_GETXATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l02880">IT_LAYOUT</a>, <a class="el" href="packet-lustre_8c_source.html#l00237">IT_LOOKUP</a>, <a class="el" href="packet-lustre_8c_source.html#l00233">IT_OPEN</a>, <a class="el" href="packet-lustre_8c_source.html#l00235">IT_READDIR</a>, and <a class="el" href="packet-lustre_8c_source.html#l00238">IT_UNLINK</a>.</p>

<p>Referenced by <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l01181">mdc_intent_getattr_async()</a>, and <a class="el" href="mdc__locks_8c_source.html#l01077">mdc_intent_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7b4cfac056355ba992b1b7d9bfbaa25b"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock2desc" ref="ga7b4cfac056355ba992b1b7d9bfbaa25b" args="(struct ldlm_lock *lock, struct ldlm_lock_desc *desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock2desc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fill in "on the wire" representation for given LDLM lock into supplied lock descriptor <em>desc</em> structure. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00646">646</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02899">ldlm_lock_desc::l_granted_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02900">ldlm_lock_desc::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02898">ldlm_lock_desc::l_req_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02897">ldlm_lock_desc::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="ldlm__lock_8c_source.html#l00089">ldlm_convert_policy_to_wire()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01379">ldlm_res2desc()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01984">ldlm_work_revoke_ast_lock()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga35362f3605ec8dec52464f153c932c85"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock2handle" ref="ga35362f3605ec8dec52464f153c932c85" args="(const struct ldlm_lock *lock, struct lustre_handle *lockh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock2handle </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fills in handle for LDLM lock <em>lock</em> into supplied <em>lockh</em> Does not take any references. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00582">582</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00678">ldlm_lock::l_handle</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="namei_8c_source.html#l00187">ll_md_blocking_ast()</a>, <a class="el" href="file_8c_source.html#l00673">ll_md_blocking_lease_ast()</a>, <a class="el" href="mdt__handler_8c_source.html#l02366">mdt_remote_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>, <a class="el" href="osc__io_8c_source.html#l00087">osc_io_read_ahead()</a>, <a class="el" href="osc__lock_8c_source.html#l00534">osc_ldlm_blocking_ast()</a>, <a class="el" href="osc__io_8c_source.html#l00076">osc_read_ahead_release()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>, and <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2d77135057c3b9123a3ae5704752c946"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_addref" ref="ga2d77135057c3b9123a3ae5704752c946" args="(const struct lustre_handle *lockh, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_addref </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add specified reader/writer reference to LDLM lock with handle <em>lockh</em>. </p>
<p>r/w reference type is determined by <em>mode</em> Calls ldlm_lock_addref_internal. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00717">717</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00786">ldlm_lock_addref_internal()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>.</p>

<p>Referenced by <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="osc__request_8c_source.html#l01990">osc_enqueue_interpret()</a>, <a class="el" href="osc__io_8c_source.html#l00087">osc_io_read_ahead()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, and <a class="el" href="osc__object_8c_source.html#l00225">osc_object_fiemap()</a>.</p>

</div>
</div>
<a class="anchor" id="ga580d951cff91ebd5c1d2a7588d4c2ea3"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_addref_try" ref="ga580d951cff91ebd5c1d2a7588d4c2ea3" args="(const struct lustre_handle *lockh, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_lock_addref_try </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to add reader/writer reference to a lock with handle <em>lockh</em>, and fails if lock is already LDLM_FL_CBPENDING or destroyed. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success, lock was addref-ed</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EAGAIN</em>&nbsp;</td><td>lock is being canceled. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00760">760</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00174">ldlm_is_cbpending</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9e8b401ed51dda94f553670e73872135"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_allow_match" ref="ga9e8b401ed51dda94f553670e73872135" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_allow_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mark lock as "matchable" by OST. </p>
<p>Locks the lock and then </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__LDLM.html#gab9c1d858901b9d9a4db13ffbad095fb6" title="Mark lock as &quot;matchable&quot; by OST.">ldlm_lock_allow_match_locked</a> </dd></dl>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01332">1332</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l01321">ldlm_lock_allow_match_locked()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l03872">ll_layout_conf()</a>.</p>

</div>
</div>
<a class="anchor" id="gab9c1d858901b9d9a4db13ffbad095fb6"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_allow_match_locked" ref="gab9c1d858901b9d9a4db13ffbad095fb6" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_allow_match_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mark lock as "matchable" by OST. </p>
<p>Used to prevent certain races in LOV/OSC where the lock is granted, but LVB is not yet valid. Assumes LDLM lock is already locked. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01321">1321</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00791">ldlm_lock::l_waitq</a>, and <a class="el" href="lustre__dlm__flags_8h_source.html#l00228">ldlm_set_lvb_ready</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01332">ldlm_lock_allow_match()</a>, and <a class="el" href="osc__lock_8c_source.html#l00191">osc_lock_lvb_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gadec8a773eb3b13c995cf35a4d013393b"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_cancel" ref="gadec8a773eb3b13c995cf35a4d013393b" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to cancel LDLM lock <em>lock</em> that has no reader/writer references. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02249">2249</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00290">LCK_MINMODE</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00595">ldlm_del_waiting_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01169">LDLM_ERROR</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00338">ldlm_is_waited</a>, <a class="el" href="ldlm__lock_8c_source.html#l00422">ldlm_lock_destroy_nolock()</a>, <a class="el" href="ldlm__pool_8c_source.html#l01541">ldlm_pool_del()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00466">ldlm_namespace::ns_pool</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, and <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gafd6a07a826f7d2789696e472dd81adc2"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_change_resource" ref="gafd6a07a826f7d2789696e472dd81adc2" args="(struct ldlm_namespace *, struct ldlm_lock *, const struct ldlm_res_id *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_lock_change_resource </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>new_resid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Moves LDLM lock <em>lock</em> to another resource. </p>
<p>This is used on client when server returns some other lock than requested (typically as a result of intent operation) </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00514">514</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00689">ldlm_lock::l_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01537">lock_res()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01543">lock_res_nested()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00984">ldlm_resource::lr_reference</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="lustre__dlm_8h_source.html#l01533">LRT_NEW</a>, <a class="el" href="lu__ref_8h_source.html#l00204">lu_ref_add()</a>, <a class="el" href="lu__ref_8h_source.html#l00223">lu_ref_del()</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__dlm_8h_source.html#l01550">unlock_res()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="gaeeab5a5dbe0a5b966d52f388b69eed3f"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_convert" ref="gaeeab5a5dbe0a5b966d52f388b69eed3f" args="(struct ldlm_lock *lock, enum ldlm_mode new_mode, __u32 *flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a>* ldlm_lock_convert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>new_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempt to convert already granted lock to a different mode. </p>
<p>While lock conversion is not currently used, future client-side optimizations could take advantage of it to avoid discarding cached pages on a file. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02459">2459</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00881">ldlm_lock::l_sl_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00882">ldlm_lock::l_sl_policy</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lustre__dlm_8h_source.html#l01169">LDLM_ERROR</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00048">LDLM_FL_BLOCK_CONV</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00040">LDLM_FL_BLOCK_GRANTED</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="ldlm__extent_8c_source.html#l00861">ldlm_interval_attach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00835">ldlm_interval_slab</a>, <a class="el" href="lustre__dlm_8h_source.html#l01181">LDLM_ITER_STOP</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="ldlm__pool_8c_source.html#l01541">ldlm_pool_del()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00593">ldlm_interval::li_group</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00943">ldlm_resource::lr_converting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="ldlm__lock_8c_source.html#l00937">sl_insert_point::mode_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00466">ldlm_namespace::ns_pool</a>, <a class="el" href="obd__support_8h_source.html#l00851">OBD_SLAB_ALLOC_PTR_GFP</a>, <a class="el" href="ldlm__lock_8c_source.html#l00938">sl_insert_point::policy_link</a>, <a class="el" href="list_8h_source.html#l00043">list_head::prev</a>, <a class="el" href="ldlm__lock_8c_source.html#l00936">sl_insert_point::res_link</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01001">ldlm_cli_convert_local()</a>.</p>

</div>
</div>
<a class="anchor" id="ga82ed1d0d1d2788cad8813e69df77d625"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_decref" ref="ga82ed1d0d1d2788cad8813e69df77d625" args="(const struct lustre_handle *lockh, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_decref </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrease reader/writer refcount for LDLM lock with handle <em>lockh</em>. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00903">903</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, and <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>.</p>

<p>Referenced by <a class="el" href="echo_8c_source.html#l00592">echo_cleanup()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00436">lfsck_ibits_unlock()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01954">lfsck_layout_slave_conditional_destroy()</a>, <a class="el" href="dcache_8c_source.html#l00204">ll_intent_drop_lock()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="lmv__intent_8c_source.html#l00469">lmv_intent_lock()</a>, <a class="el" href="lmv__intent_8c_source.html#l00058">lmv_intent_remote()</a>, <a class="el" href="lmv__intent_8c_source.html#l00155">lmv_revalidate_slaves()</a>, <a class="el" href="lod__object_8c_source.html#l03820">lod_object_unlock_internal()</a>, <a class="el" href="mdc__locks_8c_source.html#l00724">mdc_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__request_8c_source.html#l01286">mdc_read_page()</a>, <a class="el" href="mdt__internal_8h_source.html#l00977">mdt_fid_unlock()</a>, <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02735">mdt_save_remote_lock()</a>, <a class="el" href="mgc__request_8c_source.html#l01097">mgc_cancel()</a>, <a class="el" href="ofd__obd_8c_source.html#l00984">ofd_destroy_by_fid()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__request_8c_source.html#l01952">osc_enqueue_fini()</a>, <a class="el" href="osc__request_8c_source.html#l01990">osc_enqueue_interpret()</a>, <a class="el" href="osc__io_8c_source.html#l00087">osc_io_read_ahead()</a>, <a class="el" href="osc__lock_8c_source.html#l01025">osc_lock_detach()</a>, <a class="el" href="osc__request_8c_source.html#l02201">osc_match_base()</a>, <a class="el" href="osc__object_8c_source.html#l00225">osc_object_fiemap()</a>, <a class="el" href="osc__io_8c_source.html#l00076">osc_read_ahead_release()</a>, <a class="el" href="osp__md__object_8c_source.html#l00936">osp_md_object_unlock()</a>, <a class="el" href="service_8c_source.html#l02149">ptlrpc_handle_rs()</a>, <a class="el" href="service_8c_source.html#l00183">ptlrpc_save_lock()</a>, <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01709">tgt_extent_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="gad236a9af5f0845e1046060a55419914b"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_decref_and_cancel" ref="gad236a9af5f0845e1046060a55419914b" args="(const struct lustre_handle *lockh, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_decref_and_cancel </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrease reader/writer refcount for LDLM lock with handle <em>lockh</em> and mark it for subsequent cancellation once r/w refcount drops to zero instead of putting into LRU. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00918">918</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="ldlm__lock_8c_source.html#l00052">ldlm_lockname</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">ldlm_set_cbpending</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l00700">ll_lease_open()</a>, <a class="el" href="xattr__cache_8c_source.html#l00385">ll_xattr_cache_refill()</a>, <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01294">mdt_rename_unlock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02735">mdt_save_remote_lock()</a>, <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>, and <a class="el" href="qsd__lock_8c_source.html#l00494">qsd_id_lock_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="ga833125f7d72f8e77cb16c031c56dd2a0"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_destroy" ref="ga833125f7d72f8e77cb16c031c56dd2a0" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys a LDLM lock <em>lock</em>. </p>
<p>Performs necessary locking first. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00403">403</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00885">ldlm_lock::l_reference</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lu__ref_8h_source.html#l00223">lu_ref_del()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1ae32c9c745cefc485fd39cf0054e2ef"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_downgrade" ref="ga1ae32c9c745cefc485fd39cf0054e2ef" args="(struct ldlm_lock *lock, enum ldlm_mode new_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_downgrade </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>new_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Downgrade an exclusive lock. </p>
<p>A fast variant of ldlm_lock_convert for convertion of exclusive locks. The convertion is always successful. Used by Commit on Sharing (COS) code.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lock</em>&nbsp;</td><td>A lock to convert </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>new_mode</em>&nbsp;</td><td>new lock mode </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02428">2428</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02805">LCK_COS</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="ldlm__pool_8c_source.html#l01541">ldlm_pool_del()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5f3ca6b2c348db5cd17b45c0e2b99ba8"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_dump_handle" ref="ga5f3ca6b2c348db5cd17b45c0e2b99ba8" args="(int level, const struct lustre_handle *lockh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_dump_handle </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print lock with lock handle <em>lockh</em> description into debug log. </p>
<p>Used when printing all locks on a resource for debug purposes. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02586">2586</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l01167">LDLM_DEBUG_LIMIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, and <a class="el" href="portals_8c_source.html#l00045">libcfs_debug</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="gae911593eccfe0aa5995935808b646d2a"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_fail_match" ref="gae911593eccfe0aa5995935808b646d2a" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_fail_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01307">1307</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l01298">ldlm_lock_fail_match_locked()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3f34c3286a49d3d2f1e4b16029647a5b"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_fail_match_locked" ref="ga3f34c3286a49d3d2f1e4b16029647a5b" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_fail_match_locked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01298">1298</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00791">ldlm_lock::l_waitq</a>, and <a class="el" href="lustre__dlm__flags_8h_source.html#l00298">LDLM_FL_FAIL_NOTIFIED</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01307">ldlm_lock_fail_match()</a>.</p>

</div>
</div>
<a class="anchor" id="gac526504450a40715c8e25fbab715689e"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_get" ref="gac526504450a40715c8e25fbab715689e" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* ldlm_lock_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a reference on a lock. </p>
<p>Lock refcounts, during creation:</p>
<ul>
<li>one special one for allocation, dec'd only once in destroy</li>
<li>one for being a lock that's in-use</li>
<li>one for the addref associated with a new lock </li>
</ul>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00178">178</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1373811e4c4edbb039f1da1ca7947b03"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_match" ref="ga1373811e4c4edbb039f1da1ca7947b03" args="(struct ldlm_namespace *ns, __u64 flags, const struct ldlm_res_id *, enum ldlm_type type, union ldlm_policy_data *, enum ldlm_mode mode, struct lustre_handle *, int unref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> ldlm_lock_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>unref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempt to find a lock with specified properties. </p>
<p>Typically returns a reference to matched lock unless LDLM_FL_TEST_LOCK is set in <em>flags</em> </p>
<p>Can be called in two ways:</p>
<p>If 'ns' is NULL, then lockh describes an existing lock that we want to look for a duplicate of.</p>
<p>Otherwise, all of the fields must be filled in, to match against.</p>
<p>If 'flags' contains LDLM_FL_LOCAL_ONLY, then only match local locks on the server (ie, connh is NULL) If 'flags' contains LDLM_FL_BLOCK_GRANTED, then only locks on the granted list will be considered If 'flags' contains LDLM_FL_CBPENDING, then locks that have been marked to be canceled can still be matched as long as they still have reader or writer refernces If 'flags' contains LDLM_FL_TEST_LOCK, then don't actually reference a lock, just tell us if we would have matched.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>if it finds an already-existing lock that is compatible; in this case, lockh is filled in with a addref()ed lock</td></tr>
  </table>
  </dd>
</dl>
<p>We also check security context, and if that fails we simply return 0 (to keep caller code unchanged), the context failure will be discovered by caller sometime later. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01370">1370</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00730">ldlm_lock::l_completion_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00633">ldlm_policy_data::l_extent</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lustre__dlm_8h_source.html#l00791">ldlm_lock::l_waitq</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01122">LDLM_DEBUG_NOLOCK</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00040">LDLM_FL_BLOCK_GRANTED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00309">LDLM_FL_DESTROYED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00298">LDLM_FL_FAIL_NOTIFIED</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00226">LDLM_FL_LVB_READY</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00114">LDLM_FL_TEST_LOCK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00179">LDLM_FL_WAIT_NOREPROC</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00227">ldlm_is_lvb_ready</a>, <a class="el" href="ldlm__lock_8c_source.html#l00582">ldlm_lock2handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="lustre__dlm_8h_source.html#l01435">LDLM_RESOURCE_ADDREF</a>, <a class="el" href="lustre__dlm_8h_source.html#l01439">LDLM_RESOURCE_DELREF</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01139">lock_match_data::lmd_old</a>, <a class="el" href="lustre__dlm_8h_source.html#l01537">lock_res()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__dlm_8h_source.html#l00943">ldlm_resource::lr_converting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="lustre__dlm_8h_source.html#l00947">ldlm_resource::lr_waiting</a>, <a class="el" href="lustre__lib_8h_source.html#l00159">LWI_ON_SIGNAL_NOOP</a>, <a class="el" href="lustre__lib_8h_source.html#l00189">LWI_TIMEOUT_INTR</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="ldlm__lock_8c_source.html#l01251">search_itree()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01284">search_queue()</a>, <a class="el" href="sec_8c_source.html#l00926">sptlrpc_import_check_ctx()</a>, <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01550">unlock_res()</a>.</p>

<p>Referenced by <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l00139">mdc_lock_match()</a>, <a class="el" href="osc__request_8c_source.html#l02052">osc_enqueue_base()</a>, <a class="el" href="osc__request_8c_source.html#l02201">osc_match_base()</a>, and <a class="el" href="osc__object_8c_source.html#l00225">osc_object_fiemap()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5e363707438fb69f9253f2ab8bf4c5e6"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_put" ref="ga5e363707438fb69f9253f2ab8bf4c5e6" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_lock_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release lock reference. </p>
<p>Also frees the lock if it was last reference. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00190">190</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="obd__class_8h_source.html#l00263">class_export_lock_put</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00901">ldlm_lock::l_exp_list</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00678">ldlm_lock::l_handle</a>, <a class="el" href="lustre__dlm_8h_source.html#l00819">ldlm_lock::l_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00818">ldlm_lock::l_lvb_len</a>, <a class="el" href="lustre__dlm_8h_source.html#l00843">ldlm_lock::l_pending_chain</a>, <a class="el" href="lustre__dlm_8h_source.html#l00684">ldlm_lock::l_refc</a>, <a class="el" href="lustre__dlm_8h_source.html#l00885">ldlm_lock::l_reference</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="ldlm__extent_8c_source.html#l00871">ldlm_interval_detach()</a>, <a class="el" href="ldlm__extent_8c_source.html#l00851">ldlm_interval_free()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">ldlm_is_destroyed</a>, <a class="el" href="lustre__dlm_8h_source.html#l00334">LDLM_NSS_LOCKS</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00875">lprocfs_counter_decr()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00984">ldlm_resource::lr_reference</a>, <a class="el" href="lu__ref_8h_source.html#l00223">lu_ref_del()</a>, <a class="el" href="lu__ref_8h_source.html#l00200">lu_ref_fini()</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, and <a class="el" href="obd__support_8h_source.html#l00794">OBD_FREE_RCU</a>.</p>

</div>
</div>
<a class="anchor" id="ga7f23553f0695eacc8686c25985aa564d"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_remove_from_lru" ref="ga7f23553f0695eacc8686c25985aa564d" args="(struct ldlm_lock *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_lock_remove_from_lru </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga098ec9c63984ffbe25f17174b376b1a0"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_set_data" ref="ga098ec9c63984ffbe25f17174b376b1a0" args="(const struct lustre_handle *lockh, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_lock_set_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set opaque data into the lock that only makes sense to upper layer. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02293">2293</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00822">ldlm_lock::l_ast_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>.</p>

</div>
</div>
<a class="anchor" id="gaebd5b336cb74307b3f15e7b922e20294"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_to_ns" ref="gaebd5b336cb74307b3f15e7b922e20294" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a>* ldlm_lock_to_ns </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01006">1006</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01001">ldlm_cli_convert_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00090">ldlm_expired_completion_wait()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00298">ldlm_lock_add_to_lru()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00281">ldlm_lock_add_to_lru_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00259">ldlm_lock_remove_from_lru_check()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00233">ldlm_lock_remove_from_lru_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01012">ldlm_lock_to_ns_name()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00313">ldlm_lock_touch_in_lru()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01064">ldlm_lvbo_fill()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01054">ldlm_lvbo_size()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, and <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e3dcd014075af79a7f3b9d089769837"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_to_ns_at" ref="ga8e3dcd014075af79a7f3b9d089769837" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structadaptive__timeout.html">adaptive_timeout</a>* ldlm_lock_to_ns_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01018">1018</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00923">ldlm_resource::lr_ns_bucket</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00325">ldlm_ns_bucket::nsb_at_estimate</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00160">ldlm_completion_tail()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00142">ldlm_cp_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3cfe3f5a492fdb04c6c46dbd7b91bcb0"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lock_to_ns_name" ref="ga3cfe3f5a492fdb04c6c46dbd7b91bcb0" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* ldlm_lock_to_ns_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01012">1012</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00994">ldlm_ns_name()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4ce8965091314ccd3278e3695205c1c7"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lvbo_fill" ref="ga4ce8965091314ccd3278e3695205c1c7" args="(struct ldlm_lock *lock, void *buf, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_lvbo_fill </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01064">1064</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01023">ldlm_lvbo_init()</a>, <a class="el" href="structldlm__valblock__ops.html#aa3569cda637416d3f27f7a4f1de678ef">ldlm_valblock_ops::lvbo_fill</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00452">ldlm_namespace::ns_lvbo</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00043">qmt_intent_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0ce4a4a1e256dd8b6243c96eb669bc71"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lvbo_init" ref="ga0ce4a4a1e256dd8b6243c96eb669bc71" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_lvbo_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01023">1023</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00979">ldlm_resource::lr_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00981">ldlm_resource::lr_lvb_initialized</a>, <a class="el" href="lustre__dlm_8h_source.html#l00976">ldlm_resource::lr_lvb_len</a>, <a class="el" href="lustre__dlm_8h_source.html#l00977">ldlm_resource::lr_lvb_mutex</a>, <a class="el" href="structldlm__valblock__ops.html#a163fdf3cd2200c7fed6efeffc10a9f9a">ldlm_valblock_ops::lvbo_init</a>, <a class="el" href="lustre__dlm_8h_source.html#l00452">ldlm_namespace::ns_lvbo</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01064">ldlm_lvbo_fill()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01296">ldlm_res_lvbo_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga177ac9912af912c52cd450e3bf11acb5"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lvbo_size" ref="ga177ac9912af912c52cd450e3bf11acb5" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_lvbo_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01054">1054</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="structldlm__valblock__ops.html#ab6db7ae145623d30b6700052ac56367c">ldlm_valblock_ops::lvbo_size</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00452">ldlm_namespace::ns_lvbo</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00043">qmt_intent_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="gacfe66a2d51a46f0bf611952a83119bbc"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_cleanup" ref="gacfe66a2d51a46f0bf611952a83119bbc" args="(struct ldlm_namespace *ns, __u64 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_namespace_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel and destroy all locks in the namespace. </p>
<p>Typically used during evictions when server notified client that it was evicted and all of its state needs to be destroyed. Also used during shutdown. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00892">892</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01663">cfs_hash_for_each_nolock()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="ldlm__resource_8c_source.html#l00856">ldlm_resource_clean()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00869">ldlm_resource_complain()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>, <a class="el" href="lwp__dev_8c_source.html#l00582">lwp_import_event()</a>, <a class="el" href="mdc__request_8c_source.html#l02510">mdc_import_event()</a>, <a class="el" href="mgc__request_8c_source.html#l01282">mgc_import_event()</a>, <a class="el" href="osc__request_8c_source.html#l02632">osc_import_event()</a>, and <a class="el" href="osp__dev_8c_source.html#l01574">osp_import_event()</a>.</p>

</div>
</div>
<a class="anchor" id="ga72eedaa0c612fbc5daad8d622e0502f1"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_dump" ref="ga72eedaa0c612fbc5daad8d622e0502f1" args="(int level, struct ldlm_namespace *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_dump </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print information about all locks in this namespace on this node to debug log. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01425">1425</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="hash_8c_source.html#l01663">cfs_hash_for_each_nolock()</a>, <a class="el" href="linux-time_8h_source.html#l00142">cfs_time_before()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="libcfs__time_8h_source.html#l00067">cfs_time_shift()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l00994">ldlm_ns_name()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01408">ldlm_res_hash_dump()</a>, <a class="el" href="portals_8c_source.html#l00045">libcfs_debug</a>, <a class="el" href="lustre__dlm_8h_source.html#l00383">ldlm_namespace::ns_bref</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00443">ldlm_namespace::ns_next_dump</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01389">ldlm_dump_all_namespaces()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00090">ldlm_expired_completion_wait()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f9b87f84a794b96c043799f3840765c"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_free" ref="ga9f9b87f84a794b96c043799f3840765c" args="(struct ldlm_namespace *ns, struct obd_import *imp, int force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cleanup the resource, and free namespace. </p>
<p>bug 12864: Deadlock issue: proc1: destroy import class_disconnect_export(grab cl_sem) -&gt; -&gt; ldlm_namespace_free -&gt; -&gt; lprocfs_remove(grab _lprocfs_lock). proc2: read proc info lprocfs_fops_read(grab _lprocfs_lock) -&gt; -&gt; osc_rd_active, etc(grab cl_sem).</p>
<p>So that I have to split the ldlm_namespace_free into two parts - the first part ldlm_namespace_free_prior is used to cleanup the resource which is being used; the 2nd part ldlm_namespace_free_post is used to unregister the lprocfs entries, and then free memory. It will be called w/o cli-&gt;cl_sem held. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01052">1052</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l01007">ldlm_namespace_free_post()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00966">ldlm_namespace_free_prior()</a>.</p>

<p>Referenced by <a class="el" href="echo_8c_source.html#l00592">echo_cleanup()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mgs__handler_8c_source.html#l01094">mgs_init0()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02814">ofd_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga10faf90111f6da7206f8b140b8d98fed"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_free_post" ref="ga10faf90111f6da7206f8b140b8d98fed" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_free_post </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs freeing memory structures related to <em>ns</em>. </p>
<p>This is only done when ldlm_namespce_free_prior() successfully removed all resources referencing <em>ns</em> and its refc == 0. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01007">1007</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__resource_8c_source.html#l00499">ldlm_namespace_proc_unregister</a>, <a class="el" href="ldlm__resource_8c_source.html#l01091">ldlm_namespace_unregister()</a>, <a class="el" href="ldlm__pool_8c_source.html#l01531">ldlm_pool_fini()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02798">ldlm_put_ref()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00374">ldlm_namespace::ns_client</a>, <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>, <a class="el" href="lustre__dlm_8h_source.html#l00466">ldlm_namespace::ns_pool</a>, <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lib_8c_source.html#l00504">client_obd_cleanup()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01052">ldlm_namespace_free()</a>, <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, <a class="el" href="mgs__handler_8c_source.html#l01382">mgs_device_fini()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02983">ofd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa7271dfc42956d8d75b2435a22c83832"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_free_prior" ref="gaa7271dfc42956d8d75b2435a22c83832" args="(struct ldlm_namespace *ns, struct obd_import *imp, int force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_free_prior </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs various cleanups for passed <em>ns</em> to make it drop refc and be ready for freeing. </p>
<p>Waits for refc == 0.</p>
<p>The following is done: (0) Unregister <em>ns</em> from its list to make inaccessible for potential users like pools thread and others; (1) Clear all locks in <em>ns</em>. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00966">966</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00507">ldlm_namespace::ns_stopping</a>, <a class="el" href="import_8c_source.html#l01550">ptlrpc_disconnect_import()</a>, and <a class="el" href="import_8c_source.html#l00286">ptlrpc_invalidate_import()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lib_8c_source.html#l00604">client_disconnect_export()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01052">ldlm_namespace_free()</a>, <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, <a class="el" href="mgs__handler_8c_source.html#l01382">mgs_device_fini()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02983">ofd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1399afd082a31b5066cefa9093eec736"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_get" ref="ga1399afd082a31b5066cefa9093eec736" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01061">1061</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00383">ldlm_namespace::ns_bref</a>.</p>

</div>
</div>
<a class="anchor" id="ga4b345e88ea06fc28c099254650b75c38"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_new" ref="ga4b345e88ea06fc28c099254650b75c38" args="(struct obd_device *obd, char *name, enum ldlm_side client, enum ldlm_appetite apt, enum ldlm_ns_type ns_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a>* ldlm_namespace_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gafcd8eee315d3a7e1313596efd678d77e">ldlm_appetite</a>&nbsp;</td>
          <td class="paramname"> <em>apt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga516147f10f1ca82e556a7f8c3ee5d6ff">ldlm_ns_type</a>&nbsp;</td>
          <td class="paramname"> <em>ns_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and initialize new empty namespace. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l00661">661</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00355">at_init()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__hash_8h_source.html#l00571">cfs_hash_bd_extra_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00142">CFS_HASH_BIGNAME</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00154">CFS_HASH_DEPTH</a>, <a class="el" href="libcfs__hash_8h_source.html#l00848">cfs_hash_for_each_bucket</a>, <a class="el" href="libcfs__hash_8h_source.html#l00775">CFS_HASH_MAX_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00774">CFS_HASH_MIN_THETA</a>, <a class="el" href="libcfs__hash_8h_source.html#l00140">CFS_HASH_NO_ITEMREF</a>, <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00136">CFS_HASH_SPIN_BKTLOCK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00067">LDLM_CTIME_AGE_LIMIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00065">LDLM_DEFAULT_LRU_SIZE</a>, <a class="el" href="lustre__dlm_8h_source.html#l00066">LDLM_DEFAULT_MAX_ALIVE</a>, <a class="el" href="lustre__dlm_8h_source.html#l00068">LDLM_DEFAULT_PARALLEL_AST_LIMIT</a>, <a class="el" href="ldlm__request_8c_source.html#l00070">ldlm_enqueue_min</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02783">ldlm_get_ref()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00892">ldlm_namespace_cleanup()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00048">ldlm_namespace_nr_read()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00500">ldlm_namespace_proc_register</a>, <a class="el" href="ldlm__resource_8c_source.html#l00499">ldlm_namespace_proc_unregister</a>, <a class="el" href="ldlm__resource_8c_source.html#l01081">ldlm_namespace_register()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00339">LDLM_NS_TYPE_UNKNOWN</a>, <a class="el" href="ldlm__pool_8c_source.html#l01525">ldlm_pool_init()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02798">ldlm_put_ref()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00468">ldlm_namespace::ns_appetite</a>, <a class="el" href="lustre__dlm_8h_source.html#l00383">ldlm_namespace::ns_bref</a>, <a class="el" href="lustre__dlm_8h_source.html#l00374">ldlm_namespace::ns_client</a>, <a class="el" href="lustre__dlm_8h_source.html#l00389">ldlm_namespace::ns_connect_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00475">ldlm_namespace::ns_contended_locks</a>, <a class="el" href="lustre__dlm_8h_source.html#l00481">ldlm_namespace::ns_contention_time</a>, <a class="el" href="lustre__dlm_8h_source.html#l00436">ldlm_namespace::ns_ctime_age_limit</a>, <a class="el" href="lustre__dlm_8h_source.html#l00315">NS_DEFAULT_CONTENDED_LOCKS</a>, <a class="el" href="lustre__dlm_8h_source.html#l00314">NS_DEFAULT_CONTENTION_SECONDS</a>, <a class="el" href="lustre__dlm_8h_source.html#l00313">NS_DEFAULT_MAX_NOLOCK_BYTES</a>, <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>, <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00424">ldlm_namespace::ns_max_age</a>, <a class="el" href="lustre__dlm_8h_source.html#l00489">ldlm_namespace::ns_max_nolock_size</a>, <a class="el" href="lustre__dlm_8h_source.html#l00492">ldlm_namespace::ns_max_parallel_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00422">ldlm_namespace::ns_max_unused</a>, <a class="el" href="lustre__dlm_8h_source.html#l00415">ldlm_namespace::ns_nr_unused</a>, <a class="el" href="lustre__dlm_8h_source.html#l00371">ldlm_namespace::ns_obd</a>, <a class="el" href="lustre__dlm_8h_source.html#l00392">ldlm_namespace::ns_orig_connect_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00466">ldlm_namespace::ns_pool</a>, <a class="el" href="lustre__dlm_8h_source.html#l00512">ldlm_namespace::ns_reclaim_start</a>, <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00507">ldlm_namespace::ns_stopping</a>, <a class="el" href="lustre__dlm_8h_source.html#l00429">ldlm_namespace::ns_timeouts</a>, <a class="el" href="lustre__dlm_8h_source.html#l00413">ldlm_namespace::ns_unused_list</a>, <a class="el" href="lustre__dlm_8h_source.html#l00464">ldlm_namespace::ns_waitq</a>, <a class="el" href="lustre__dlm_8h_source.html#l00325">ldlm_ns_bucket::nsb_at_estimate</a>, <a class="el" href="lustre__dlm_8h_source.html#l00319">ldlm_ns_bucket::nsb_namespace</a>, <a class="el" href="lustre__dlm_8h_source.html#l00329">ldlm_ns_bucket::nsb_reclaim_start</a>, <a class="el" href="ldlm__resource_8c_source.html#l00610">ldlm_ns_hash_def::nsd_all_bits</a>, <a class="el" href="ldlm__resource_8c_source.html#l00608">ldlm_ns_hash_def::nsd_bkt_bits</a>, <a class="el" href="ldlm__resource_8c_source.html#l00612">ldlm_ns_hash_def::nsd_hops</a>, <a class="el" href="ldlm__resource_8c_source.html#l00606">ldlm_ns_hash_def::nsd_type</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lib_8c_source.html#l00261">client_obd_setup()</a>, <a class="el" href="echo_8c_source.html#l00548">echo_setup()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mgs__handler_8c_source.html#l01094">mgs_init0()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02814">ofd_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2418ea6dcbcd76ad54666a106b23b891"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_put" ref="ga2418ea6dcbcd76ad54666a106b23b891" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01072">1072</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00383">ldlm_namespace::ns_bref</a>, <a class="el" href="lustre__dlm_8h_source.html#l00380">ldlm_namespace::ns_lock</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00464">ldlm_namespace::ns_waitq</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01267">__ldlm_resource_putref_final()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1403410a2012b2c625b74126ffcb2089"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_register" ref="ga1403410a2012b2c625b74126ffcb2089" args="(struct ldlm_namespace *ns, enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register <em>ns</em> in the list of namespaces. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01081">1081</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00077">ldlm_namespace_inactive_list()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00054">ldlm_namespace_nr_inc()</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf842bf901a93420ecbc2365d778b3a4b"></a><!-- doxytag: member="lustre_dlm.h::ldlm_namespace_unregister" ref="gaf842bf901a93420ecbc2365d778b3a4b" args="(struct ldlm_namespace *ns, enum ldlm_side client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_namespace_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gac4b4584603b76e6cc86c82a64f59defd">ldlm_side</a>&nbsp;</td>
          <td class="paramname"> <em>client</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregister <em>ns</em> from the list of namespaces. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01091">1091</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00062">ldlm_namespace_nr_dec()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00401">ldlm_namespace::ns_list_chain</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01007">ldlm_namespace_free_post()</a>.</p>

</div>
</div>
<a class="anchor" id="gad993dd3adae260ee3796898ec494d3cc"></a><!-- doxytag: member="lustre_dlm.h::ldlm_ns_name" ref="gad993dd3adae260ee3796898ec494d3cc" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* ldlm_ns_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00994">994</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="libcfs__hash_8h_source.html#l00268">cfs_hash::hs_name</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00912">__ldlm_namespace_free()</a>, <a class="el" href="ldlm__request_8c_source.html#l02319">ldlm_cancel_unused_locks_for_replay()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01012">ldlm_lock_to_ns_name()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01425">ldlm_namespace_dump()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00869">ldlm_resource_complain()</a>.</p>

</div>
</div>
<a class="anchor" id="ga03d9eac35193176ee999b155838ccfe8"></a><!-- doxytag: member="lustre_dlm.h::ldlm_proc_cleanup" ref="ga03d9eac35193176ee999b155838ccfe8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_proc_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01414">1414</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8047d7cda49f6bf14c41a5105c55a378"></a><!-- doxytag: member="lustre_dlm.h::ldlm_proc_setup" ref="ga8047d7cda49f6bf14c41a5105c55a378" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_proc_setup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="gabab5acbe0d24c0a37be4893ae6e00dcf"></a><!-- doxytag: member="lustre_dlm.h::ldlm_put_ref" ref="gabab5acbe0d24c0a37be4893ae6e00dcf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_put_ref </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02798">2798</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00059">ldlm_ref_mutex</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l00060">ldlm_refcount</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lib_8c_source.html#l00504">client_obd_cleanup()</a>, <a class="el" href="ldlm__lib_8c_source.html#l00261">client_obd_setup()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01007">ldlm_namespace_free_post()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00661">ldlm_namespace_new()</a>.</p>

</div>
</div>
<a class="anchor" id="gad3d835ffc8ea5737e46381b9772cc224"></a><!-- doxytag: member="lustre_dlm.h::ldlm_refresh_waiting_lock" ref="gad3d835ffc8ea5737e46381b9772cc224" args="(struct ldlm_lock *lock, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_refresh_waiting_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00600">600</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ofd__dev_8c_source.html#l02292">ofd_prolong_one_lock()</a>, and <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>.</p>

</div>
</div>
<a class="anchor" id="ga70d54ed9384416cd5e19fc593dac071f"></a><!-- doxytag: member="lustre_dlm.h::ldlm_register_intent" ref="ga70d54ed9384416cd5e19fc593dac071f" args="(struct ldlm_namespace *ns, ldlm_res_policy arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_register_intent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__LDLM.html#ga07447890235da125e60400b2dee48626">ldlm_res_policy</a>&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00159">159</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00446">ldlm_namespace::ns_policy</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02814">ofd_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga878ffb8d1a87e3787eb2bb6170fed457"></a><!-- doxytag: member="lustre_dlm.h::ldlm_replay_locks" ref="ga878ffb8d1a87e3787eb2bb6170fed457" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_replay_locks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__request_8c_source.html#l02338">2338</a> of file <a class="el" href="ldlm__request_8c_source.html">ldlm_request.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00224">obd_import::imp_replay_inflight</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_vbr_failed</a>, <a class="el" href="lustre__dlm_8h_source.html#l00843">ldlm_lock::l_pending_chain</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__request_8c_source.html#l00075">ldlm_cancel_unused_locks_before_replay</a>, <a class="el" href="ldlm__request_8c_source.html#l02319">ldlm_cancel_unused_locks_for_replay()</a>, <a class="el" href="ldlm__request_8c_source.html#l02155">ldlm_chain_lock_for_replay()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="ldlm__request_8c_source.html#l02115">ldlm_namespace_foreach()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="list_8h_source.html#l00046">LIST_HEAD_INIT</a>, <a class="el" href="obd_8h_source.html#l00641">obd_device::obd_namespace</a>, <a class="el" href="ldlm__request_8c_source.html#l02226">replay_one_lock()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="import_8c_source.html#l01449">ptlrpc_import_recovery_state_machine()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6fea368fc4ea7002b0dcd068bbe8771a"></a><!-- doxytag: member="lustre_dlm.h::ldlm_reprocess_all" ref="ga6fea368fc4ea7002b0dcd068bbe8771a" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_reprocess_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Try to grant all waiting locks on a resource. </p>
<p>Calls ldlm_reprocess_queue on converting and waiting queues.</p>
<p>Typically called after some resource locks are cancelled to see if anything could be granted as a result of the cancellation. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02147">2147</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01180">LDLM_ITER_CONTINUE</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02050">ldlm_run_ast_work()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00141">LDLM_WORK_CP_AST</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01537">lock_res()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00943">ldlm_resource::lr_converting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00947">ldlm_resource::lr_waiting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01550">unlock_res()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01029">ldlm_cli_convert()</a>, <a class="el" href="ldlm__request_8c_source.html#l01001">ldlm_cli_convert_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02107">reprocess_one_queue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6a893da5c75236bb6f573e2484d4eecc"></a><!-- doxytag: member="lustre_dlm.h::ldlm_reprocess_all_ns" ref="ga6a893da5c75236bb6f573e2484d4eecc" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_reprocess_all_ns </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Iterate through all resources on a namespace attempting to grant waiting locks. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02128">2128</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01663">cfs_hash_for_each_nolock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="ldlm__lock_8c_source.html#l02113">ldlm_reprocess_res()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>.</p>

</div>
</div>
<a class="anchor" id="gad7430abbe52b72b069536f6f99336d94"></a><!-- doxytag: member="lustre_dlm.h::ldlm_request_lock" ref="gad7430abbe52b72b069536f6f99336d94" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a>* ldlm_request_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00236">qmt_lvbo_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gadb1efc6cf4a9e128dd2a25c78685f2de"></a><!-- doxytag: member="lustre_dlm.h::ldlm_res2desc" ref="gadb1efc6cf4a9e128dd2a25c78685f2de" args="(struct ldlm_resource *res, struct ldlm_resource_desc *desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_res2desc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource__desc.html">ldlm_resource_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01379">1379</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__idl_8h_source.html#l02893">ldlm_resource_desc::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, and <a class="el" href="lustre__idl_8h_source.html#l02891">ldlm_resource_desc::lr_type</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4e79f430a220b667aaffb6b9c90d8de6"></a><!-- doxytag: member="lustre_dlm.h::ldlm_res_lvbo_update" ref="ga4e79f430a220b667aaffb6b9c90d8de6" args="(struct ldlm_resource *res, struct ptlrpc_request *req, int increase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_res_lvbo_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>increase</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update Lock Value Block Operations (LVBO) on a resource taking into account data from request <em>r</em>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01296">1296</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l01023">ldlm_lvbo_init()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="structldlm__valblock__ops.html#a2a67bc2634b21d63b85e93494b74a067">ldlm_valblock_ops::lvbo_update</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00452">ldlm_namespace::ns_lvbo</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, <a class="el" href="ofd__io_8c_source.html#l01163">ofd_commitrw()</a>, <a class="el" href="ofd__obd_8c_source.html#l00892">ofd_echo_setattr()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="ofd__dev_8c_source.html#l02007">ofd_punch_hdl()</a>, and <a class="el" href="ofd__dev_8c_source.html#l01363">ofd_setattr_hdl()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2f90eea238f99079aa6e2ee64c623e43"></a><!-- doxytag: member="lustre_dlm.h::ldlm_res_to_ns" ref="ga2f90eea238f99079aa6e2ee64c623e43" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a>* ldlm_res_to_ns </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01000">1000</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00923">ldlm_resource::lr_ns_bucket</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00319">ldlm_ns_bucket::nsb_namespace</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l02010">ldlm_cli_hash_cancel_unused()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01023">ldlm_lvbo_init()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01296">ldlm_res_lvbo_update()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00869">ldlm_resource_complain()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00183">mdt_lvbo_free()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00037">mdt_lvbo_init()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00073">mdt_lvbo_size()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00053">mdt_lvbo_update()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00085">ofd_lvbo_init()</a>, and <a class="el" href="ofd__lvb_8c_source.html#l00182">ofd_lvbo_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gaee0426408b282c2c2606c218f79dcd9a"></a><!-- doxytag: member="lustre_dlm.h::ldlm_resource_add_lock" ref="gaee0426408b282c2c2606c218f79dcd9a" args="(struct ldlm_resource *res, struct list_head *head, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_resource_add_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a lock into a given resource into specified lock list. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01323">1323</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">ldlm_is_destroyed</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, and <a class="el" href="list_8h_source.html#l00161">list_empty()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__extent_8c_source.html#l00898">ldlm_extent_add_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6abb0daf1a4f9af18526f4a14c5fbf0c"></a><!-- doxytag: member="lustre_dlm.h::ldlm_resource_dump" ref="ga6abb0daf1a4f9af18526f4a14c5fbf0c" args="(int level, struct ldlm_resource *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_resource_dump </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print information about all locks in this resource to debug log. </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01448">1448</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00167">D_CANTMASK</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="lustre__idl_8h_source.html#l02783">DLDLMRES</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l01167">LDLM_DEBUG_LIMIT</a>, <a class="el" href="ldlm__resource_8c_source.html#l00071">ldlm_dump_granted_max</a>, <a class="el" href="portals_8c_source.html#l00045">libcfs_debug</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="list_8h_source.html#l00472">list_for_each_entry_reverse</a>, <a class="el" href="lustre__dlm_8h_source.html#l00943">ldlm_resource::lr_converting</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="lustre__dlm_8h_source.html#l00932">ldlm_resource::lr_refcount</a>, <a class="el" href="lustre__dlm_8h_source.html#l00947">ldlm_resource::lr_waiting</a>, <a class="el" href="lustre__idl_8h_source.html#l02784">PLDLMRES</a>, and <a class="el" href="lustre__idl_8h_source.html#l02778">RES_NAME_SIZE</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01267">__ldlm_resource_putref_final()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01040">ldlm_granted_list_add_lock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01408">ldlm_res_hash_dump()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00869">ldlm_resource_complain()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01345">ldlm_resource_insert_lock_after()</a>, and <a class="el" href="osc__object_8c_source.html#l00353">osc_req_attr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ga083fb1ea92619c4b2e526633c3a486fb"></a><!-- doxytag: member="lustre_dlm.h::ldlm_resource_get" ref="ga083fb1ea92619c4b2e526633c3a486fb" args="(struct ldlm_namespace *ns, struct ldlm_resource *parent, const struct ldlm_res_id *, enum ldlm_type type, int create)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a>* ldlm_resource_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>create</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return a reference to resource with given name, creating it if necessary. </p>
<p>Args: namespace with ns_lock unlocked Locks: takes and releases NS hash-lock and res-&gt;lr_lock Returns: referenced, unlocked <a class="el" href="structldlm__resource.html" title="LDLM resource description.">ldlm_resource</a> or NULL </p>

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01179">1179</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="hash_8c_source.html#l00529">cfs_hash_bd_add_locked()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00585">cfs_hash_bd_count_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00571">cfs_hash_bd_extra_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00549">cfs_hash_bd_get_and_lock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00529">cfs_hash_bd_lock()</a>, <a class="el" href="hash_8c_source.html#l00667">cfs_hash_bd_lookup_locked()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00535">cfs_hash_bd_unlock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00578">cfs_hash_bd_version_get()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__idl_8h_source.html#l02809">LCK_MODE_NUM</a>, <a class="el" href="ldlm__resource_8c_source.html#l00049">ldlm_interval_tree_slab</a>, <a class="el" href="lustre__idl_8h_source.html#l02816">LDLM_MAX_TYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02819">LDLM_MIN_TYPE</a>, <a class="el" href="lustre__dlm_8h_source.html#l00096">LDLM_NAMESPACE_CLIENT</a>, <a class="el" href="ldlm__resource_8c_source.html#l01067">ldlm_namespace_get_return()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01104">ldlm_namespace_move_to_active_locked()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01132">ldlm_resource_new()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_resource_slab</a>, <a class="el" href="lustre__dlm_8h_source.html#l00929">ldlm_resource::lr_hash</a>, <a class="el" href="lustre__dlm_8h_source.html#l00956">ldlm_resource::lr_itree</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00923">ldlm_resource::lr_ns_bucket</a>, <a class="el" href="lustre__dlm_8h_source.html#l00984">ldlm_resource::lr_reference</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="lu__ref_8h_source.html#l00200">lu_ref_fini()</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00518">ns_is_client()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>, <a class="el" href="obd__support_8h_source.html#l00338">OBD_FAIL_LDLM_CREATE_RESOURCE</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="obd__support_8h_source.html#l00832">OBD_SLAB_FREE</a>, and <a class="el" href="packet-lnet_8c_source.html#l00255">version</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01971">ldlm_cli_cancel_unused_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l02131">ldlm_resource_iterate()</a>, <a class="el" href="mdc__locks_8c_source.html#l00172">mdc_null_inode()</a>, <a class="el" href="mdc__reint_8c_source.html#l00067">mdc_resource_get_unused()</a>, <a class="el" href="ofd__io_8c_source.html#l01163">ofd_commitrw()</a>, <a class="el" href="ofd__obd_8c_source.html#l00892">ofd_echo_setattr()</a>, <a class="el" href="ofd__dev_8c_source.html#l02007">ofd_punch_hdl()</a>, <a class="el" href="ofd__dev_8c_source.html#l01363">ofd_setattr_hdl()</a>, <a class="el" href="osc__object_8c_source.html#l00353">osc_req_attr_set()</a>, <a class="el" href="osc__request_8c_source.html#l00545">osc_resource_get_unused()</a>, <a class="el" href="qmt__lock_8c_source.html#l00539">qmt_glb_lock_notify()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00598">qmt_id_lock_glimpse()</a>.</p>

</div>
</div>
<a class="anchor" id="ga41b0bd74d466ccd76abb0adfcc3fbe8a"></a><!-- doxytag: member="lustre_dlm.h::ldlm_resource_getref" ref="ga41b0bd74d466ccd76abb0adfcc3fbe8a" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a>* ldlm_resource_getref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01257">1257</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00932">ldlm_resource::lr_refcount</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00569">ldlm_res_hop_get_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9ba8220d356d680f204b8882db1c50c9"></a><!-- doxytag: member="lustre_dlm.h::ldlm_resource_putref" ref="ga9ba8220d356d680f204b8882db1c50c9" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_resource_putref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01295">1295</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="ldlm__resource_8c_source.html#l01267">__ldlm_resource_putref_final()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__hash_8h_source.html#l00618">cfs_hash_bd_dec_and_lock()</a>, <a class="el" href="hash_8c_source.html#l00491">cfs_hash_bd_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00535">cfs_hash_bd_unlock()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__private_8h_source.html#l00368">LASSERT_ATOMIC_GT_LT</a>, <a class="el" href="lustre__idl_8h_source.html#l02809">LCK_MODE_NUM</a>, <a class="el" href="ldlm__resource_8c_source.html#l00049">ldlm_interval_tree_slab</a>, <a class="el" href="lustre__dlm_8h_source.html#l01000">ldlm_res_to_ns()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_resource_slab</a>, <a class="el" href="lustre__dlm_8h_source.html#l00956">ldlm_resource::lr_itree</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00932">ldlm_resource::lr_refcount</a>, <a class="el" href="structldlm__valblock__ops.html#a1f9bba68aafe55b885f59f0ab69cca88">ldlm_valblock_ops::lvbo_free</a>, <a class="el" href="lustre__dlm_8h_source.html#l00452">ldlm_namespace::ns_lvbo</a>, <a class="el" href="lustre__dlm_8h_source.html#l00377">ldlm_namespace::ns_rs_hash</a>, and <a class="el" href="obd__support_8h_source.html#l00832">OBD_SLAB_FREE</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02315">ldlm_cancel_lock_for_export()</a>, <a class="el" href="ldlm__request_8c_source.html#l01971">ldlm_cli_cancel_unused_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00577">ldlm_res_hop_put()</a>, <a class="el" href="ldlm__request_8c_source.html#l02131">ldlm_resource_iterate()</a>, <a class="el" href="mdc__locks_8c_source.html#l00172">mdc_null_inode()</a>, <a class="el" href="mdc__reint_8c_source.html#l00067">mdc_resource_get_unused()</a>, <a class="el" href="ofd__io_8c_source.html#l01163">ofd_commitrw()</a>, <a class="el" href="ofd__obd_8c_source.html#l00892">ofd_echo_setattr()</a>, <a class="el" href="ofd__dev_8c_source.html#l02007">ofd_punch_hdl()</a>, <a class="el" href="ofd__dev_8c_source.html#l01363">ofd_setattr_hdl()</a>, <a class="el" href="osc__request_8c_source.html#l00545">osc_resource_get_unused()</a>, <a class="el" href="qmt__lock_8c_source.html#l00539">qmt_glb_lock_notify()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00598">qmt_id_lock_glimpse()</a>.</p>

</div>
</div>
<a class="anchor" id="ga12496ecd5cca95892b66801ab8428b97"></a><!-- doxytag: member="lustre_dlm.h::ldlm_resource_unlink_lock" ref="ga12496ecd5cca95892b66801ab8428b97" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_resource_unlink_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__resource_8c_source.html#l01366">1366</a> of file <a class="el" href="ldlm__resource_8c_source.html">ldlm_resource.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01556">check_res_locked()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00705">ldlm_lock::l_res_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="packet-lustre_8c_source.html#l00299">LDLM_EXTENT</a>, <a class="el" href="ldlm__extent_8c_source.html#l00936">ldlm_extent_unlink_lock()</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="ldlm__lock_8c_source.html#l02236">ldlm_unlink_lock_skiplist()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00250">ldlm_flock_cancel_on_deadlock()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, and <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>.</p>

</div>
</div>
<a class="anchor" id="ga396833924edeb2118df4fdff47aa7489"></a><!-- doxytag: member="lustre_dlm.h::ldlm_revalidate_lock_handle" ref="ga396833924edeb2118df4fdff47aa7489" args="(const struct lustre_handle *lockh, __u64 *bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> ldlm_revalidate_lock_handle </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>bits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l01504">1504</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02841">ldlm_inodebits::bits</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00635">ldlm_policy_data::l_inodebits</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00396">LDLM_HAVE_MASK</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00174">ldlm_is_cbpending</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="mdc__locks_8c_source.html#l00985">mdc_revalidate_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaff973b12d9e531ff04c69b478d6750cb"></a><!-- doxytag: member="lustre_dlm.h::ldlm_unlink_lock_skiplist" ref="gaff973b12d9e531ff04c69b478d6750cb" args="(struct ldlm_lock *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_unlink_lock_skiplist </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove skiplist-enabled LDLM lock <em>req</em> from granted list. </p>

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l02236">2236</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00881">ldlm_lock::l_sl_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00882">ldlm_lock::l_sl_policy</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga83aa57fc458f3a4c11022b4dad580a21"></a><!-- doxytag: member="lustre_dlm.h::lock_res" ref="ga83aa57fc458f3a4c11022b4dad580a21" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lock_res </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock resource. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01537">1537</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00935">ldlm_resource::lr_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01408">ldlm_res_hash_dump()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00869">ldlm_resource_complain()</a>, <a class="el" href="ldlm__request_8c_source.html#l02056">ldlm_resource_foreach()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="mdc__locks_8c_source.html#l00172">mdc_null_inode()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00361">ofd_lvbo_fill()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00182">ofd_lvbo_update()</a>, <a class="el" href="osc__request_8c_source.html#l02601">osc_ldlm_resource_invalidate()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7ea7aa073d254d8500c07d2664cbecf9"></a><!-- doxytag: member="lustre_dlm.h::lock_res_and_lock" ref="ga7ea7aa073d254d8500c07d2664cbecf9" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a>* lock_res_and_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock a lock and its resource. </p>
<p>LDLM locking uses resource to serialize access to locks but there is a case when we change resource of lock upon enqueue reply. We rely on lock-&gt;l_resource = new_res being an atomic operation. </p>

<p>Definition at line <a class="el" href="l__lock_8c_source.html#l00051">51</a> of file <a class="el" href="l__lock_8c_source.html">l_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00689">ldlm_lock::l_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00344">ldlm_is_ns_srv</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00329">ldlm_set_res_locked</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01537">lock_res()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02188">is_bl_done()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01458">ldlm_cancel_no_wait_policy()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00828">ldlm_flock_blocking_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00633">ldlm_flock_interrupted_wait()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00786">ldlm_lock_addref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01332">ldlm_lock_allow_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01307">ldlm_lock_fail_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>, <a class="el" href="file_8c_source.html#l02260">ll_file_ioctl()</a>, <a class="el" href="llite__lib_8c_source.html#l01180">ll_inode_from_resource_lock()</a>, <a class="el" href="file_8c_source.html#l03925">ll_layout_fetch()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="file_8c_source.html#l00901">ll_lease_close()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00102">mdc_set_lock_data()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__lock_8c_source.html#l00582">osc_ldlm_glimpse_ast()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>, <a class="el" href="osc__request_8c_source.html#l01934">osc_set_lock_data()</a>, <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, <a class="el" href="qsd__lock_8c_source.html#l00101">qsd_id_ast_data_get()</a>, <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>, <a class="el" href="tgt__main_8c_source.html#l00086">tgt_discard_slc_lock()</a>, and <a class="el" href="tgt__main_8c_source.html#l00054">tgt_save_slc_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf8e33b62440b4b67aaf93c301ce81fb8"></a><!-- doxytag: member="lustre_dlm.h::lock_res_nested" ref="gaf8e33b62440b4b67aaf93c301ce81fb8" args="(struct ldlm_resource *res, enum lock_res_type mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lock_res_nested </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#gade643efde1936c79a28d8a944592c5c0">lock_res_type</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock resource with a way to instruct lockdep code about nestedness-safe. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01543">1543</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00935">ldlm_resource::lr_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>.</p>

</div>
</div>
<a class="anchor" id="ga26ec85b7dbc46f65a8e212ce53366a9a"></a><!-- doxytag: member="lustre_dlm.h::lockmode_compat" ref="ga26ec85b7dbc46f65a8e212ce53366a9a" args="(enum ldlm_mode exist_mode, enum ldlm_mode new_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lockmode_compat </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>exist_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>new_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00157">157</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="ldlm__lib_8c_source.html#l02952">lck_compat_array</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, and <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6c0f99a4b156117149e846fee0571ca1"></a><!-- doxytag: member="lustre_dlm.h::lockmode_verify" ref="ga6c0f99a4b156117149e846fee0571ca1" args="(enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lockmode_verify </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00152">152</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02806">LCK_MAXMODE</a>, and <a class="el" href="packet-lustre_8c_source.html#l00290">LCK_MINMODE</a>.</p>

<p>Referenced by <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1f4b542b9827f58e6dd3823356c2fd4f"></a><!-- doxytag: member="lustre_dlm.h::ns_connect_cancelset" ref="ga1f4b542b9827f58e6dd3823356c2fd4f" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ns_connect_cancelset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if namespace <em>ns</em> supports early lock cancel (ELC). </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00544">544</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00389">ldlm_namespace::ns_connect_flags</a>, and <a class="el" href="lustre__idl_8h_source.html#l01205">OBD_CONNECT_CANCELSET</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00762">ldlm_prep_elc_req()</a>, <a class="el" href="mdc__reint_8c_source.html#l00067">mdc_resource_get_unused()</a>, and <a class="el" href="osc__request_8c_source.html#l00545">osc_resource_get_unused()</a>.</p>

</div>
</div>
<a class="anchor" id="gac757615521e2e49225316a38d68c5a7c"></a><!-- doxytag: member="lustre_dlm.h::ns_connect_lru_resize" ref="gac757615521e2e49225316a38d68c5a7c" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ns_connect_lru_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if this namespace supports lru_resize. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00553">553</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00389">ldlm_namespace::ns_connect_flags</a>, and <a class="el" href="lustre__idl_8h_source.html#l01208">OBD_CONNECT_LRU_RESIZE</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01613">ldlm_cancel_lru_policy()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__request_8c_source.html#l00762">ldlm_prep_elc_req()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>.</p>

</div>
</div>
<a class="anchor" id="gae9d5e1e0b2f2985e97aca30f2f1a145b"></a><!-- doxytag: member="lustre_dlm.h::ns_is_client" ref="gae9d5e1e0b2f2985e97aca30f2f1a145b" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ns_is_client </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if namespace <em>ns</em> is a client namespace. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00518">518</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00096">LDLM_NAMESPACE_CLIENT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00374">ldlm_namespace::ns_client</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01001">ldlm_cli_convert_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01708">ldlm_lock_enqueue()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01425">ldlm_namespace_dump()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>.</p>

</div>
</div>
<a class="anchor" id="ga31d7e8c3808dd5cd2e15aea3257e4097"></a><!-- doxytag: member="lustre_dlm.h::ns_is_server" ref="ga31d7e8c3808dd5cd2e15aea3257e4097" args="(struct ldlm_namespace *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ns_is_server </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if namespace <em>ns</em> is a server namespace. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00531">531</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00096">LDLM_NAMESPACE_CLIENT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00374">ldlm_namespace::ns_client</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l01641">ldlm_lock_create()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf469134f642cdcfacd9f0a9e21365111"></a><!-- doxytag: member="lustre_dlm.h::ns_register_cancel" ref="gaf469134f642cdcfacd9f0a9e21365111" args="(struct ldlm_namespace *ns, ldlm_cancel_cbt arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ns_register_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__LDLM.html#gab397db2317d35a64df513cd6072de20c">ldlm_cancel_cbt</a>&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00559">559</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00498">ldlm_namespace::ns_cancel</a>.</p>

<p>Referenced by <a class="el" href="mdc__request_8c_source.html#l02642">mdc_setup()</a>, <a class="el" href="osc__request_8c_source.html#l02738">osc_setup()</a>, and <a class="el" href="osp__dev_8c_source.html#l00996">osp_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3f0f8c873e05a9986550f5a8c245e6d5"></a><!-- doxytag: member="lustre_dlm.h::unlock_res" ref="ga3f0f8c873e05a9986550f5a8c245e6d5" args="(struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void unlock_res </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock resource. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l01550">1550</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00935">ldlm_resource::lr_lock</a>.</p>

<p>Referenced by <a class="el" href="ldlm__resource_8c_source.html#l00779">cleanup_resource()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01408">ldlm_res_hash_dump()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00869">ldlm_resource_complain()</a>, <a class="el" href="ldlm__request_8c_source.html#l02056">ldlm_resource_foreach()</a>, <a class="el" href="mdc__locks_8c_source.html#l00172">mdc_null_inode()</a>, <a class="el" href="ofd__dlm_8c_source.html#l00129">ofd_intent_policy()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00361">ofd_lvbo_fill()</a>, <a class="el" href="ofd__lvb_8c_source.html#l00182">ofd_lvbo_update()</a>, <a class="el" href="osc__request_8c_source.html#l02601">osc_ldlm_resource_invalidate()</a>, <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf9b19facd1a8bb3cdfcac5047159f15e"></a><!-- doxytag: member="lustre_dlm.h::unlock_res_and_lock" ref="gaf9b19facd1a8bb3cdfcac5047159f15e" args="(struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unlock_res_and_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock a lock and its resource previously locked with lock_res_and_lock. </p>

<p>Definition at line <a class="el" href="l__lock_8c_source.html#l00067">67</a> of file <a class="el" href="l__lock_8c_source.html">l_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00689">ldlm_lock::l_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00330">ldlm_clear_res_locked</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00344">ldlm_is_ns_srv</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01550">unlock_res()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l00491">failed_lock_cleanup()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02188">is_bl_done()</a>, <a class="el" href="ldlm__internal_8h_source.html#l00309">is_granted_or_cancelled()</a>, <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01458">ldlm_cancel_no_wait_policy()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01107">ldlm_cli_cancel_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00828">ldlm_flock_blocking_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00633">ldlm_flock_interrupted_wait()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00786">ldlm_lock_addref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01332">ldlm_lock_allow_match()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01307">ldlm_lock_fail_match()</a>, <a class="el" href="ldlm__request_8c_source.html#l01669">ldlm_prepare_lru_list()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00289">ldlm_process_flock_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01504">ldlm_revalidate_lock_handle()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01902">ldlm_work_bl_ast_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01939">ldlm_work_cp_ast_lock()</a>, <a class="el" href="file_8c_source.html#l02260">ll_file_ioctl()</a>, <a class="el" href="llite__lib_8c_source.html#l01180">ll_inode_from_resource_lock()</a>, <a class="el" href="file_8c_source.html#l03925">ll_layout_fetch()</a>, <a class="el" href="file_8c_source.html#l03997">ll_layout_lock_set()</a>, <a class="el" href="file_8c_source.html#l00901">ll_lease_close()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, <a class="el" href="mdc__locks_8c_source.html#l00102">mdc_set_lock_data()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mgs__handler_8c_source.html#l00166">mgs_completion_ast_generic()</a>, <a class="el" href="osc__lock_8c_source.html#l00429">osc_dlm_blocking_ast0()</a>, <a class="el" href="osc__lock_8c_source.html#l00582">osc_ldlm_glimpse_ast()</a>, <a class="el" href="osc__lock_8c_source.html#l00243">osc_lock_granted()</a>, <a class="el" href="osc__lock_8c_source.html#l00357">osc_lock_upcall_agl()</a>, <a class="el" href="osc__request_8c_source.html#l01934">osc_set_lock_data()</a>, <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, <a class="el" href="qsd__lock_8c_source.html#l00101">qsd_id_ast_data_get()</a>, <a class="el" href="tgt__main_8c_source.html#l00111">tgt_cancel_slc_locks()</a>, <a class="el" href="tgt__main_8c_source.html#l00086">tgt_discard_slc_lock()</a>, and <a class="el" href="tgt__main_8c_source.html#l00054">tgt_save_slc_lock()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga3cf0131341b6663da454ede83009988b"></a><!-- doxytag: member="lustre_dlm.h::lck_compat_array" ref="ga3cf0131341b6663da454ede83009988b" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="group__LDLM.html#ga3cf0131341b6663da454ede83009988b">lck_compat_array</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lib_8c_source.html#l02952">2952</a> of file <a class="el" href="ldlm__lib_8c_source.html">ldlm_lib.c</a>.</p>

<p>Referenced by <a class="el" href="lustre__dlm_8h_source.html#l00157">lockmode_compat()</a>.</p>

</div>
</div>
<a class="anchor" id="gaacf06e33756d242222391e67857d6e14"></a><!-- doxytag: member="lustre_dlm.h::ldlm_lockname" ref="gaacf06e33756d242222391e67857d6e14" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="group__LDLM.html#gaacf06e33756d242222391e67857d6e14">ldlm_lockname</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00052">52</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00735">ldlm_lock_addref_internal_nolock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00800">ldlm_lock_decref_internal_nolock()</a>, and <a class="el" href="file_8c_source.html#l03238">ll_have_md_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga84fad911c326a86839530f221c86f7e7"></a><!-- doxytag: member="lustre_dlm.h::ldlm_obd_ops" ref="ga84fad911c326a86839530f221c86f7e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__ops.html">obd_ops</a> <a class="el" href="group__LDLM.html#ga84fad911c326a86839530f221c86f7e7">ldlm_obd_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga0ec36144688c37580c1c66f547ba3c08"></a><!-- doxytag: member="lustre_dlm.h::ldlm_typename" ref="ga0ec36144688c37580c1c66f547ba3c08" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="group__LDLM.html#ga0ec36144688c37580c1c66f547ba3c08">ldlm_typename</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lock_8c_source.html#l00065">65</a> of file <a class="el" href="ldlm__lock_8c_source.html">ldlm_lock.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02607">_ldlm_lock_debug()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
