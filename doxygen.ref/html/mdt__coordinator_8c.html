<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdt/mdt_coordinator.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdt/mdt_coordinator.c File Reference</h1><code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__export_8h_source.html">lustre_export.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lprocfs__status_8h_source.html">lprocfs_status.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__kernelcomm_8h_source.html">lustre_kernelcomm.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>&quot;</code><br/>

<p><a href="mdt__coordinator_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhsm__scan__data.html">hsm_scan_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data passed to <a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback to scan requests and take actions  <a href="structhsm__scan__data.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhsm__restore__data.html">hsm_restore_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data passed to <a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback to scan requests and take actions  <a href="structhsm__restore__data.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhsm__cancel__all__data.html">hsm_cancel_all_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data passed to <a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback to cancel requests  <a href="structhsm__cancel__all__data.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a844ab6cc89275d7e6834cb2f13793ba8">GENERATE_PROC_METHOD</a>(VAR)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a5c28fc9e87411b616a59e4af2b5f489b">CDT_ENABLE_CMD</a>&nbsp;&nbsp;&nbsp;&quot;enabled&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a685da13968ced745d8d17c2ec7ee5125">CDT_STOP_CMD</a>&nbsp;&nbsp;&nbsp;&quot;shutdown&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ab0efccbd65c53397dd97871654b520b9">CDT_DISABLE_CMD</a>&nbsp;&nbsp;&nbsp;&quot;disabled&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a441f7a5739bb31e0ff7e8ff7ab1ae8b0">CDT_PURGE_CMD</a>&nbsp;&nbsp;&nbsp;&quot;purge&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#aebdf5f721be5b410276a9f06ed58dfe3">CDT_HELP_CMD</a>&nbsp;&nbsp;&nbsp;&quot;help&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ab1b2428d26e7431843dcaacce1688a21">CDT_MAX_CMD_LEN</a>&nbsp;&nbsp;&nbsp;10</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a6f4b191a27ceae23833d720870e40a2d">mdt_hsm_get_md_hsm</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structmd__hsm.html">md_hsm</a> *hsm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get obj and HSM attributes on a fid  <a href="#a6f4b191a27ceae23833d720870e40a2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ab83b175e5842c0a11100f2512cefc949">mdt_hsm_dump_hal</a> (int level, const char *prefix, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a9e05e84ae1f9c5d7acf13fe7966f72b3">mdt_coordinator_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *llh, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *hdr, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to:</p>
<ul>
<li>find waiting request and start action</li>
<li>purge canceled and done requests </li>
</ul>
 <a href="#a9e05e84ae1f9c5d7acf13fe7966f72b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a36226dcf6a48586f22c5895db40332e9">hsm_cdt_procfs_init</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">create /proc entries for <a class="el" href="structcoordinator.html">coordinator</a>  <a href="#a36226dcf6a48586f22c5895db40332e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a094eda24c77cb4ca7f6bb74cbb815f40">hsm_cdt_procfs_fini</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove /proc entries for <a class="el" href="structcoordinator.html">coordinator</a>  <a href="#a094eda24c77cb4ca7f6bb74cbb815f40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ac8fd334b515e93b39e6053686b76a8b4">hsm_cdt_get_proc_vars</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get vector of hsm cdt /proc vars  <a href="#ac8fd334b515e93b39e6053686b76a8b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ab5cfd50b0a35dbe9f2ebfeeb942cc295">mdt_coordinator</a> (void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#ab5cfd50b0a35dbe9f2ebfeeb942cc295"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ac5a880beb355228713092f559ba46a1c">mdt_hsm_restore_hdl_find</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lookup a restore handle by FID caller needs to hold cdt_restore_lock  <a href="#ac5a880beb355228713092f559ba46a1c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a0a42778988893b8ba7631258d4f81387">hsm_restore_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *llh, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *hdr, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to:</p>
<ul>
<li>find restore request and allocate the restore handle </li>
</ul>
 <a href="#a0a42778988893b8ba7631258d4f81387"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a8b6850303de6170b82112f06905a92c1">mdt_hsm_pending_restore</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">restore <a class="el" href="structcoordinator.html">coordinator</a> state at startup the goal is to take a layout lock for each registered restore request  <a href="#a8b6850303de6170b82112f06905a92c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a838dba3395050206bda9dc6c8cc3e4e9">hsm_init_ucred</a> (struct <a class="el" href="structlu__ucred.html">lu_ucred</a> *uc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a994ee79f8b760d995220674956f00cec">mdt_hsm_cdt_wakeup</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wake up <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#a994ee79f8b760d995220674956f00cec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a6c3974f6068537ee2ca1cefd4748640f">mdt_hsm_cdt_init</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize <a class="el" href="structcoordinator.html">coordinator</a> struct  <a href="#a6c3974f6068537ee2ca1cefd4748640f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a8dcc4f77765f8600a7a2edcd585d7049">mdt_hsm_cdt_fini</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">free a <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#a8dcc4f77765f8600a7a2edcd585d7049"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#acc0c8f1f89e01ca149ac5783131dca4e">mdt_hsm_cdt_start</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">start a <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#acc0c8f1f89e01ca149ac5783131dca4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a4555384b448ec81ce060dc5dfe25fda0">mdt_hsm_cdt_stop</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">stop a <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#a4555384b448ec81ce060dc5dfe25fda0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ac23fca3bab32403469666065055076a9">mdt_hsm_add_hal</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register all requests from an hal in the memory list  <a href="#ac23fca3bab32403469666065055076a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a2314134a1d32ee42d0f08c68f13652c2">hsm_swap_layouts</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, const <a class="el" href="structlu__fid.html">lustre_fid</a> *fid, const <a class="el" href="structlu__fid.html">lustre_fid</a> *dfid, struct <a class="el" href="structmd__hsm.html">md_hsm</a> *mh_common)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">swap layouts between 2 fids  <a href="#a2314134a1d32ee42d0f08c68f13652c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a71914400b50f5817f0b4a058cd4dbaa0">hsm_cdt_request_completed</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *pgs, const struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car, enum <a class="el" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> *<a class="el" href="lustre__rsync_8c.html#a55591f17a60f597b63f070969c54fd6c">status</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update status of a completed request  <a href="#a71914400b50f5817f0b4a058cd4dbaa0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a3b8427c08750b3ff8dac7dd04a04a683">mdt_hsm_update_request_state</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *pgs, const int update_record)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update status of a request  <a href="#a3b8427c08750b3ff8dac7dd04a04a683"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#af55fe7e8b1c6e1595e2d40508ee06f78">mdt_cancel_all_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *llh, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *hdr, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to:</p>
<ul>
<li>purge all requests </li>
</ul>
 <a href="#af55fe7e8b1c6e1595e2d40508ee06f78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a27af2d5cdcb0384597c8e261e3da7621">hsm_cancel_all_actions</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cancel all actions  <a href="#a27af2d5cdcb0384597c8e261e3da7621"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a79b7325228a5903643769041fc64bf56">mdt_hsm_is_action_compat</a> (const struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai, const int hal_an, const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> rq_flags, const struct <a class="el" href="structmd__hsm.html">md_hsm</a> *hsm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if a request is compatible with file status  <a href="#a79b7325228a5903643769041fc64bf56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a4142667448d641b26f07fb95ebaebbcd">hsm_policy_str2bit</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">convert a policy name to a bit  <a href="#a4142667448d641b26f07fb95ebaebbcd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a5fd86060fd6338912c6dcd55391d7c53">hsm_policy_bit2str</a> (struct seq_file *m, const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> mask, const bool hexa)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">convert a policy bit field to a string  <a href="#a5fd86060fd6338912c6dcd55391d7c53"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ac7f091a4f6b913583d549afe870ad428">mdt_hsm_policy_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#accdca174b4ce54287ca663fe3ea053a3">mdt_hsm_policy_seq_write</a> (struct file *file, const char __user *buffer, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a4f95cafbe59f890c64e009140bcb5988">LPROC_SEQ_FOPS</a> (mdt_hsm_policy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#aec2d2c33e1ecb9ab4970fe91d9dc4215">mdt_hsm_cdt_control_seq_write</a> (struct file *file, const char __user *buffer, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a397201e1ec41b4e0954b9d8320b2e282">mdt_hsm_cdt_control_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#acc3d9777b3bdf20a1ff4fb498623e03a">mdt_hsm_request_mask_show</a> (struct seq_file *m, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ae6e1459e3c8575214cf390e391ce0172">mdt_hsm_user_request_mask_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a600c22623c217d6b362aad0f0798ff9c">mdt_hsm_group_request_mask_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a38417c5139d4a86b1bd885d5e5a4cfc6">mdt_hsm_other_request_mask_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="group__lustreuser.html#ga8f11bf6f2778549a17dc5999701f3c0c">hsm_copytool_action</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ac2e8fcb16a9741917435d626fc0e601a">hsm_copytool_name2action</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a3bbd8bebb758b465e9ab8685f20a1c9e">mdt_write_hsm_request_mask</a> (struct file *file, const char __user *user_buf, size_t user_count, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ae183a2260a94754e37e4b3ed2cfefa51">mdt_hsm_user_request_mask_seq_write</a> (struct file *file, const char __user *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ab6396b73e7fb2b654e69941ab5262f8e">mdt_hsm_group_request_mask_seq_write</a> (struct file *file, const char __user *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a4da38a4c937a3301134b1ac1db95bfe4">mdt_hsm_other_request_mask_seq_write</a> (struct file *file, const char __user *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#aa35c70b58babbd108dddede8bb95b659">LPROC_SEQ_FOPS</a> (mdt_hsm_cdt_loop_period)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a1a0239f052c62eadb631618d4afd0528">LPROC_SEQ_FOPS</a> (mdt_hsm_cdt_grace_delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a4572a41246af210cb1d90d2cfe47c637">LPROC_SEQ_FOPS</a> (mdt_hsm_cdt_active_req_timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a1602a82027813a84e435b0720ff4a451">LPROC_SEQ_FOPS</a> (mdt_hsm_cdt_max_requests)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a171eddfb32efcfad364d35c15fccbc04">LPROC_SEQ_FOPS</a> (mdt_hsm_cdt_default_archive_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a18aa0afe519d5234a29274dcdaea21fa">LPROC_SEQ_FOPS</a> (mdt_hsm_user_request_mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#aacb0e44cac38229df205432526015e19">LPROC_SEQ_FOPS</a> (mdt_hsm_group_request_mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a6d35a51bf63acc20ac0802115b78d605">LPROC_SEQ_FOPS</a> (mdt_hsm_other_request_mask)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#ad2de70dc6f15ae7b621e7b44f21c2848">lprocfs_mdt_hsm_vars</a> []</td></tr>
<tr><td class="memItemLeft" >struct {</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;&nbsp;&nbsp;<a class="el" href="mdt__coordinator_8c.html#aa0c799ac9d48ac7b9369e35f4d188a8d">bit</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;char *&nbsp;&nbsp;&nbsp;<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;char *&nbsp;&nbsp;&nbsp;<a class="el" href="mdt__coordinator_8c.html#aebf3fd229429c27d00bd36dea7157407">nickname</a></td></tr>
<tr><td class="memItemLeft" valign="top">}&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__coordinator_8c.html#a159e6288c4f2c00727e1df3232b5f47c">hsm_policy_names</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ab0efccbd65c53397dd97871654b520b9"></a><!-- doxytag: member="mdt_coordinator.c::CDT_DISABLE_CMD" ref="ab0efccbd65c53397dd97871654b520b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_DISABLE_CMD&nbsp;&nbsp;&nbsp;&quot;disabled&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01894">1894</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a5c28fc9e87411b616a59e4af2b5f489b"></a><!-- doxytag: member="mdt_coordinator.c::CDT_ENABLE_CMD" ref="a5c28fc9e87411b616a59e4af2b5f489b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_ENABLE_CMD&nbsp;&nbsp;&nbsp;&quot;enabled&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01892">1892</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="aebdf5f721be5b410276a9f06ed58dfe3"></a><!-- doxytag: member="mdt_coordinator.c::CDT_HELP_CMD" ref="aebdf5f721be5b410276a9f06ed58dfe3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_HELP_CMD&nbsp;&nbsp;&nbsp;&quot;help&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01896">1896</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1b2428d26e7431843dcaacce1688a21"></a><!-- doxytag: member="mdt_coordinator.c::CDT_MAX_CMD_LEN" ref="ab1b2428d26e7431843dcaacce1688a21" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_MAX_CMD_LEN&nbsp;&nbsp;&nbsp;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01897">1897</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a441f7a5739bb31e0ff7e8ff7ab1ae8b0"></a><!-- doxytag: member="mdt_coordinator.c::CDT_PURGE_CMD" ref="a441f7a5739bb31e0ff7e8ff7ab1ae8b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_PURGE_CMD&nbsp;&nbsp;&nbsp;&quot;purge&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01895">1895</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a685da13968ced745d8d17c2ec7ee5125"></a><!-- doxytag: member="mdt_coordinator.c::CDT_STOP_CMD" ref="a685da13968ced745d8d17c2ec7ee5125" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_STOP_CMD&nbsp;&nbsp;&nbsp;&quot;shutdown&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01893">1893</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mdt_coordinator.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00039">39</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

</div>
</div>
<a class="anchor" id="a844ab6cc89275d7e6834cb2f13793ba8"></a><!-- doxytag: member="mdt_coordinator.c::GENERATE_PROC_METHOD" ref="a844ab6cc89275d7e6834cb2f13793ba8" args="(VAR)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GENERATE_PROC_METHOD</td>
          <td>(</td>
          <td class="paramtype">VAR&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">int</span> mdt_hsm_##VAR##_seq_show(<span class="keyword">struct</span> seq_file *m, <span class="keywordtype">void</span> *data)     \
{                                                                       \
        <span class="keyword">struct </span><a class="code" href="structmdt__device.html">mdt_device</a>       *mdt = m-&gt;private;                      \
        <span class="keyword">struct </span><a class="code" href="structcoordinator.html">coordinator</a>      *cdt = &amp;mdt-&gt;<a class="code" href="structmdt__device.html#a2edda46980827b0864072b7a17719380">mdt_coordinator</a>;           \
        <a class="code" href="flock_8c.html#affebc0cf7e41098a8c78a8c2c4586d72">ENTRY</a>;                                                          \
                                                                        \
        seq_printf(m, <a class="code" href="libcfs_2include_2libcfs_2types_8h.html#a5ef11521803262dc2f972061520e41f2">LPU64</a><span class="stringliteral">&quot;\n&quot;</span>, (<a class="code" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)cdt-&gt;VAR);                      \
        <a class="code" href="libcfs__debug_8h.html#a787d0616756df8ab4dceb42a0b73e6d6">RETURN</a>(0);                                                      \
}                                                                       \
<span class="keyword">static</span> ssize_t                                                          \
mdt_hsm_##VAR##_seq_write(<span class="keyword">struct</span> file *file, <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="ioctl_8h.html#ace6f17999da4ea3b93c4227beafcab95">__user</a> *buffer, \
                          <span class="keywordtype">size_t</span> count, loff_t *off)                    \
                                                                        \
{                                                                       \
        <span class="keyword">struct </span>seq_file         *m = file-&gt;private_data;                \
        <span class="keyword">struct </span><a class="code" href="structmdt__device.html">mdt_device</a>       *mdt = m-&gt;private;                      \
        <span class="keyword">struct </span><a class="code" href="structcoordinator.html">coordinator</a>      *cdt = &amp;mdt-&gt;<a class="code" href="structmdt__device.html#a2edda46980827b0864072b7a17719380">mdt_coordinator</a>;           \
        __s64                    val;                                   \
        <span class="keywordtype">int</span>                      rc;                                    \
        <a class="code" href="flock_8c.html#affebc0cf7e41098a8c78a8c2c4586d72">ENTRY</a>;                                                          \
                                                                        \
        rc = lprocfs_str_to_s64(buffer, count, &amp;val);                   \
        <span class="keywordflow">if</span> (rc)                                                         \
                <a class="code" href="libcfs__debug_8h.html#a787d0616756df8ab4dceb42a0b73e6d6">RETURN</a>(rc);                                             \
        <span class="keywordflow">if</span> (val &gt; 0 &amp;&amp; val &lt; INT_MAX) {                                 \
                cdt-&gt;VAR = val;                                         \
                <a class="code" href="libcfs__debug_8h.html#a787d0616756df8ab4dceb42a0b73e6d6">RETURN</a>(count);                                          \
        }                                                               \
        <a class="code" href="libcfs__debug_8h.html#a787d0616756df8ab4dceb42a0b73e6d6">RETURN</a>(-EINVAL);                                                \
}                                                                       \
</pre></div>
<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01850">1850</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a27af2d5cdcb0384597c8e261e3da7621"></a><!-- doxytag: member="mdt_coordinator.c::hsm_cancel_all_actions" ref="a27af2d5cdcb0384597c8e261e3da7621" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_cancel_all_actions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cancel all actions </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>obd</em>&nbsp;</td><td>[IN] MDT device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01544">1544</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00463">cdt_agent_req::car_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00460">cdt_agent_req::car_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00461">cdt_agent_req::car_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00101">CDT_DISABLE</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01289">hsm_action_list::hal_fsname</a>, <a class="el" href="lustre__user_8h_source.html#l01280">HAL_VERSION</a>, <a class="el" href="lustre__user_8h_source.html#l01283">hsm_action_list::hal_version</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01506">hsm_cancel_all_data::mdt</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01519">mdt_cancel_all_cb()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00284">mdt_cdt_get_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__user_8h_source.html#l00532">obd_uuid2fsname()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8fd334b515e93b39e6053686b76a8b4"></a><!-- doxytag: member="mdt_coordinator.c::hsm_cdt_get_proc_vars" ref="ac8fd334b515e93b39e6053686b76a8b4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a>* hsm_cdt_get_proc_vars </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get vector of hsm cdt /proc vars </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>var</em>&nbsp;</td><td>vector </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00414">414</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__coordinator_8c_source.html#l00051">lprocfs_mdt_hsm_vars</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04765">mdt_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a094eda24c77cb4ca7f6bb74cbb815f40"></a><!-- doxytag: member="mdt_coordinator.c::hsm_cdt_procfs_fini" ref="a094eda24c77cb4ca7f6bb74cbb815f40" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsm_cdt_procfs_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove /proc entries for <a class="el" href="structcoordinator.html">coordinator</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00400">400</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00116">coordinator::cdt_proc_dir</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l01010">mdt_procfs_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a36226dcf6a48586f22c5895db40332e9"></a><!-- doxytag: member="mdt_coordinator.c::hsm_cdt_procfs_init" ref="a36226dcf6a48586f22c5895db40332e9" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hsm_cdt_procfs_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>create /proc entries for <a class="el" href="structcoordinator.html">coordinator</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00375">375</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00116">coordinator::cdt_proc_dir</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00051">lprocfs_mdt_hsm_vars</a>, <a class="el" href="lprocfs__status_8h_source.html#l00949">lprocfs_register()</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l00966">mdt_procfs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a71914400b50f5817f0b4a058cd4dbaa0"></a><!-- doxytag: member="mdt_coordinator.c::hsm_cdt_request_completed" ref="a71914400b50f5817f0b4a058cd4dbaa0" args="(struct mdt_thread_info *mti, struct hsm_progress_kernel *pgs, const struct cdt_agent_req *car, enum agent_req_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_cdt_request_completed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *&nbsp;</td>
          <td class="paramname"> <em>pgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update status of a completed request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgs</em>&nbsp;</td><td>[IN] progress of the copy tool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>update_record</em>&nbsp;</td><td>[IN] update llog record </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01161">1161</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03226">ARS_FAILED</a>, <a class="el" href="lustre__idl_8h_source.html#l03228">ARS_SUCCEED</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00087">CDT_NORETRY_ACTION</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00726">CL_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00794">CLF_HSM_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l00792">CLF_HSM_ERROVERFLOW</a>, <a class="el" href="lustre__user_8h_source.html#l00791">CLF_HSM_MAXERROR</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l00798">HE_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l00800">HE_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l00802">HE_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l00799">HE_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01349">HP_FLAG_RETRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03743">hsm_progress_kernel::hpk_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01048">HS_ARCHIVED</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01051">HS_LOST</a>, <a class="el" href="lustre__user_8h_source.html#l00834">hsm_set_cl_error()</a>, <a class="el" href="lustre__user_8h_source.html#l00814">hsm_set_cl_event()</a>, <a class="el" href="lustre__user_8h_source.html#l00824">hsm_set_cl_flags()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00623">mdt_hsm_restore_hdl_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="md__object_8h_source.html#l00112">md_hsm::mh_arch_ver</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="md__object_8h_source.html#l00354">mo_changelog()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2e8fcb16a9741917435d626fc0e601a"></a><!-- doxytag: member="mdt_coordinator.c::hsm_copytool_name2action" ref="ac2e8fcb16a9741917435d626fc0e601a" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="group__lustreuser.html#ga8f11bf6f2778549a17dc5999701f3c0c">hsm_copytool_action</a> hsm_copytool_name2action </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02039">2039</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, and <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l02056">mdt_write_hsm_request_mask()</a>.</p>

</div>
</div>
<a class="anchor" id="a838dba3395050206bda9dc6c8cc3e4e9"></a><!-- doxytag: member="mdt_coordinator.c::hsm_init_ucred" ref="a838dba3395050206bda9dc6c8cc3e4e9" args="(struct lu_ucred *uc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_init_ucred </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__ucred.html">lu_ucred</a> *&nbsp;</td>
          <td class="paramname"> <em>uc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00745">745</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="curproc_8h_source.html#l00122">CFS_CAP_FS_MASK</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="md__object_8h_source.html#l00594">lu_ucred::uc_cap</a>, <a class="el" href="md__object_8h_source.html#l00592">lu_ucred::uc_fsgid</a>, <a class="el" href="md__object_8h_source.html#l00591">lu_ucred::uc_fsuid</a>, <a class="el" href="md__object_8h_source.html#l00590">lu_ucred::uc_gid</a>, <a class="el" href="md__object_8h_source.html#l00596">lu_ucred::uc_ginfo</a>, <a class="el" href="md__object_8h_source.html#l00597">lu_ucred::uc_identity</a>, <a class="el" href="md__object_8h_source.html#l00588">lu_ucred::uc_o_fsgid</a>, <a class="el" href="md__object_8h_source.html#l00587">lu_ucred::uc_o_fsuid</a>, <a class="el" href="md__object_8h_source.html#l00586">lu_ucred::uc_o_gid</a>, <a class="el" href="md__object_8h_source.html#l00585">lu_ucred::uc_o_uid</a>, <a class="el" href="md__object_8h_source.html#l00593">lu_ucred::uc_suppgids</a>, <a class="el" href="md__object_8h_source.html#l00589">lu_ucred::uc_uid</a>, <a class="el" href="md__object_8h_source.html#l00595">lu_ucred::uc_umask</a>, <a class="el" href="md__object_8h_source.html#l00584">lu_ucred::uc_valid</a>, and <a class="el" href="md__object_8h_source.html#l00579">UCRED_OLD</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00795">mdt_hsm_cdt_init()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="a5fd86060fd6338912c6dcd55391d7c53"></a><!-- doxytag: member="mdt_coordinator.c::hsm_policy_bit2str" ref="a5fd86060fd6338912c6dcd55391d7c53" args="(struct seq_file *m, const __u64 mask, const bool hexa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void hsm_policy_bit2str </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&nbsp;</td>
          <td class="paramname"> <em>hexa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>convert a policy bit field to a string </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mask</em>&nbsp;</td><td>[IN] policy bit field </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hexa</em>&nbsp;</td><td>[IN] print mask before bit <a class="el" href="structnames.html">names</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>[OUT] string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>[IN] size of buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01725">1725</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01692">bit</a>, <a class="el" href="mdt__internal_8h_source.html#l00089">CDT_POLICY_SHIFT_COUNT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c.html#a159e6288c4f2c00727e1df3232b5f47c">hsm_policy_names</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01753">mdt_hsm_policy_seq_show()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01764">mdt_hsm_policy_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a4142667448d641b26f07fb95ebaebbcd"></a><!-- doxytag: member="mdt_coordinator.c::hsm_policy_str2bit" ref="a4142667448d641b26f07fb95ebaebbcd" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hsm_policy_str2bit </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>convert a policy name to a bit </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>[IN] policy name </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>unknown </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>policy</em>&nbsp;</td><td>bit </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01707">1707</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__coordinator_8c.html#a159e6288c4f2c00727e1df3232b5f47c">hsm_policy_names</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01694">nickname</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01764">mdt_hsm_policy_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a42778988893b8ba7631258d4f81387"></a><!-- doxytag: member="mdt_coordinator.c::hsm_restore_cb" ref="a0a42778988893b8ba7631258d4f81387" args="(const struct lu_env *env, struct llog_handle *llh, struct llog_rec_hdr *hdr, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_restore_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to:</p>
<ul>
<li>find restore request and allocate the restore handle </li>
</ul>
</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>llh</em>&nbsp;</td><td>[IN] llog handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>[IN] llog record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN/OUT] cb data = struct <a class="el" href="structhsm__restore__data.html" title="data passed to llog_cat_process() callback to scan requests and take actions">hsm_restore_data</a> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00654">654</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03249">agent_req_in_final_state()</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03225">ARS_STARTED</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="mdt__internal_8h_source.html#l00121">coordinator::cdt_last_cookie</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="mdt__internal_8h_source.html#l00488">cdt_restore_handle::crh_extent</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00641">hsm_restore_data::hrd_mti</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="llog_8c_source.html#l01046">llog_write()</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00845">OBD_SLAB_ALLOC_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00731">mdt_hsm_pending_restore()</a>.</p>

</div>
</div>
<a class="anchor" id="a2314134a1d32ee42d0f08c68f13652c2"></a><!-- doxytag: member="mdt_coordinator.c::hsm_swap_layouts" ref="a2314134a1d32ee42d0f08c68f13652c2" args="(struct mdt_thread_info *mti, const lustre_fid *fid, const lustre_fid *dfid, struct md_hsm *mh_common)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_swap_layouts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structlu__fid.html">lustre_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structlu__fid.html">lustre_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>dfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>mh_common</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>swap layouts between 2 fids </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid1</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid2</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mh_common</em>&nbsp;</td><td>[IN] MD HSM </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01099">1099</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__internal_8h_source.html#l00271">MDT_LH_OLD</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="md__object_8h_source.html#l00405">mo_swap_layouts()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__user_8h_source.html#l00697">SWAP_LAYOUTS_MDS_HSM</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d35a51bf63acc20ac0802115b78d605"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a6d35a51bf63acc20ac0802115b78d605" args="(mdt_hsm_other_request_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_other_request_mask&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aacb0e44cac38229df205432526015e19"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="aacb0e44cac38229df205432526015e19" args="(mdt_hsm_group_request_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_group_request_mask&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a18aa0afe519d5234a29274dcdaea21fa"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a18aa0afe519d5234a29274dcdaea21fa" args="(mdt_hsm_user_request_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_user_request_mask&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a171eddfb32efcfad364d35c15fccbc04"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a171eddfb32efcfad364d35c15fccbc04" args="(mdt_hsm_cdt_default_archive_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_cdt_default_archive_id&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1602a82027813a84e435b0720ff4a451"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a1602a82027813a84e435b0720ff4a451" args="(mdt_hsm_cdt_max_requests)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_cdt_max_requests&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4572a41246af210cb1d90d2cfe47c637"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a4572a41246af210cb1d90d2cfe47c637" args="(mdt_hsm_cdt_active_req_timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_cdt_active_req_timeout&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1a0239f052c62eadb631618d4afd0528"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a1a0239f052c62eadb631618d4afd0528" args="(mdt_hsm_cdt_grace_delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_cdt_grace_delay&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa35c70b58babbd108dddede8bb95b659"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="aa35c70b58babbd108dddede8bb95b659" args="(mdt_hsm_cdt_loop_period)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_cdt_loop_period&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f95cafbe59f890c64e009140bcb5988"></a><!-- doxytag: member="mdt_coordinator.c::LPROC_SEQ_FOPS" ref="a4f95cafbe59f890c64e009140bcb5988" args="(mdt_hsm_policy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LPROC_SEQ_FOPS </td>
          <td>(</td>
          <td class="paramtype">mdt_hsm_policy&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af55fe7e8b1c6e1595e2d40508ee06f78"></a><!-- doxytag: member="mdt_coordinator.c::mdt_cancel_all_cb" ref="af55fe7e8b1c6e1595e2d40508ee06f78" args="(const struct lu_env *env, struct llog_handle *llh, struct llog_rec_hdr *hdr, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_cancel_all_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to:</p>
<ul>
<li>purge all requests </li>
</ul>
</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>llh</em>&nbsp;</td><td>[IN] llog handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>[IN] llog record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN] cb data = struct <a class="el" href="structhsm__cancel__all__data.html" title="data passed to llog_cat_process() callback to cancel requests">hsm_cancel_all_data</a> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01519">1519</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03227">ARS_CANCELED</a>, <a class="el" href="lustre__idl_8h_source.html#l03225">ARS_STARTED</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="llog_8c_source.html#l01046">llog_write()</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="ab5cfd50b0a35dbe9f2ebfeeb942cc295"></a><!-- doxytag: member="mdt_coordinator.c::mdt_coordinator" ref="ab5cfd50b0a35dbe9f2ebfeeb942cc295" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_coordinator </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN] obd device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00425">425</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03225">ARS_STARTED</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="mdt__internal_8h_source.html#l00101">CDT_DISABLE</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="mdt__internal_8h_source.html#l00130">coordinator::cdt_loop_period</a>, <a class="el" href="mdt__internal_8h_source.html#l00137">coordinator::cdt_max_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="linux_2libcfs_8h_source.html#l00145">current_pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00135">hsm_scan_data::fs_name</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00143">hsm_scan_data::hal</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00141">hsm_scan_data::hal_sz</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00138">hsm_scan_data::max_requests</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00134">hsm_scan_data::mti</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__user_8h_source.html#l00532">obd_uuid2fsname()</a>, <a class="el" href="structhsm__scan__data.html#ae2d2d3fc5424170e0d4dd53b2ea7a4be">hsm_scan_data::request</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00139">hsm_scan_data::request_cnt</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00137">hsm_scan_data::request_sz</a>, <a class="el" href="lustre__rsync_8c_source.html#l00187">status</a>, <a class="el" href="lustre__net_8h_source.html#l01498">SVC_EVENT</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e05e84ae1f9c5d7acf13fe7966f72b3"></a><!-- doxytag: member="mdt_coordinator.c::mdt_coordinator_cb" ref="a9e05e84ae1f9c5d7acf13fe7966f72b3" args="(const struct lu_env *env, struct llog_handle *llh, struct llog_rec_hdr *hdr, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_coordinator_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to:</p>
<ul>
<li>find waiting request and start action</li>
<li>purge canceled and done requests </li>
</ul>
</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>llh</em>&nbsp;</td><td>[IN] llog handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>[IN] llog record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN/OUT] cb data = struct <a class="el" href="structhsm__scan__data.html" title="data passed to llog_cat_process() callback to scan requests and take actions">hsm_scan_data</a> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00158">158</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03262">llog_agent_req_rec::arr_compound_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03263">llog_agent_req_rec::arr_req_create</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03227">ARS_CANCELED</a>, <a class="el" href="lustre__idl_8h_source.html#l03226">ARS_FAILED</a>, <a class="el" href="lustre__idl_8h_source.html#l03225">ARS_STARTED</a>, <a class="el" href="lustre__idl_8h_source.html#l03228">ARS_SUCCEED</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="mdt__internal_8h_source.html#l00466">cdt_agent_req::car_req_update</a>, <a class="el" href="mdt__internal_8h_source.html#l00131">coordinator::cdt_grace_delay</a>, <a class="el" href="mdt__internal_8h_source.html#l00137">coordinator::cdt_max_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00047">dump_llog_agent_req_rec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00135">hsm_scan_data::fs_name</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00143">hsm_scan_data::hal</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01289">hsm_action_list::hal_fsname</a>, <a class="el" href="lustre__user_8h_source.html#l01318">hal_size()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00141">hsm_scan_data::hal_sz</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00142">hsm_scan_data::hal_used_sz</a>, <a class="el" href="lustre__user_8h_source.html#l01280">HAL_VERSION</a>, <a class="el" href="lustre__user_8h_source.html#l01283">hsm_action_list::hal_version</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03743">hsm_progress_kernel::hpk_data_version</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__log_8h_source.html#l00329">LLOG_DEL_RECORD</a>, <a class="el" href="llog_8c_source.html#l01046">llog_write()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00138">hsm_scan_data::max_requests</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00134">hsm_scan_data::mti</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="createmany_8c_source.html#l00069">now()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="structhsm__scan__data.html#ae2d2d3fc5424170e0d4dd53b2ea7a4be">hsm_scan_data::request</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00139">hsm_scan_data::request_cnt</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>.</p>

</div>
</div>
<a class="anchor" id="ac23fca3bab32403469666065055076a9"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_add_hal" ref="ac23fca3bab32403469666065055076a9" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal, struct obd_uuid *uuid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_add_hal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>register all requests from an hal in the memory list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN] request </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[OUT] in case of CANCEL, the uuid of the agent which is running the CT </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01011">1011</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03227">ARS_CANCELED</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">mdt_cdt_add_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00238">mdt_cdt_alloc_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="md__object_8h_source.html#l00111">md_hsm::mh_arch_id</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a397201e1ec41b4e0954b9d8320b2e282"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_control_seq_show" ref="a397201e1ec41b4e0954b9d8320b2e282" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_control_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01968">1968</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00101">CDT_DISABLE</a>, <a class="el" href="mdt__internal_8h_source.html#l00099">CDT_INIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00100">CDT_RUNNING</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="aec2d2c33e1ecb9ab4970fe91d9dc4215"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_control_seq_write" ref="aec2d2c33e1ecb9ab4970fe91d9dc4215" args="(struct file *file, const char __user *buffer, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t mdt_hsm_cdt_control_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01900">1900</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00101">CDT_DISABLE</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01894">CDT_DISABLE_CMD</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01892">CDT_ENABLE_CMD</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01896">CDT_HELP_CMD</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01897">CDT_MAX_CMD_LEN</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01895">CDT_PURGE_CMD</a>, <a class="el" href="mdt__internal_8h_source.html#l00100">CDT_RUNNING</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01893">CDT_STOP_CMD</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00774">mdt_hsm_cdt_wakeup()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mmap__cat_8c_source.html#l00045">usage</a>.</p>

</div>
</div>
<a class="anchor" id="a8dcc4f77765f8600a7a2edcd585d7049"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_fini" ref="a8dcc4f77765f8600a7a2edcd585d7049" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>free a <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00852">852</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8c_source.html#l01786">lu_context_exit()</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c3974f6068537ee2ca1cefd4748640f"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_init" ref="a6c3974f6068537ee2ca1cefd4748640f" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize <a class="el" href="structcoordinator.html">coordinator</a> struct </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00795">795</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00133">coordinator::cdt_active_req_timeout</a>, <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="mdt__internal_8h_source.html#l00134">coordinator::cdt_default_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00096">CDT_DEFAULT_POLICY</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00131">coordinator::cdt_grace_delay</a>, <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00130">coordinator::cdt_loop_period</a>, <a class="el" href="mdt__internal_8h_source.html#l00137">coordinator::cdt_max_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00115">coordinator::cdt_session</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00745">hsm_init_ucred()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l01028">LCT_SERVER_SESSION</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8c_source.html#l01776">lu_context_enter()</a>, <a class="el" href="lu__object_8c_source.html#l01729">lu_context_init()</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="acc0c8f1f89e01ca149ac5783131dca4e"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_start" ref="acc0c8f1f89e01ca149ac5783131dca4e" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>start a <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00871">871</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00119">coordinator::cdt_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00096">CDT_DEFAULT_POLICY</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00149">coordinator::cdt_group_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00099">CDT_INIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00121">coordinator::cdt_last_cookie</a>, <a class="el" href="mdt__internal_8h_source.html#l00150">coordinator::cdt_other_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00088">CDT_POLICY_LAST</a>, <a class="el" href="mdt__internal_8h_source.html#l00089">CDT_POLICY_SHIFT_COUNT</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00100">CDT_RUNNING</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="mdt__internal_8h_source.html#l00148">coordinator::cdt_user_request_mask</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00048">dump_requests()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00731">mdt_hsm_pending_restore()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_coordinator</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a4555384b448ec81ce060dc5dfe25fda0"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_stop" ref="a4555384b448ec81ce060dc5dfe25fda0" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>stop a <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00941">941</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00474">hsm_agent::ha_list</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_coordinator</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a994ee79f8b760d995220674956f00cec"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_cdt_wakeup" ref="a994ee79f8b760d995220674956f00cec" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_wakeup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>wake up <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00774">774</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01498">SVC_EVENT</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="ab83b175e5842c0a11100f2512cefc949"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_dump_hal" ref="ab83b175e5842c0a11100f2512cefc949" args="(int level, const char *prefix, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_hsm_dump_hal </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00098">98</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01257">hai_dump_data_field()</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01283">hsm_action_list::hal_version</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

</div>
</div>
<a class="anchor" id="a6f4b191a27ceae23833d720870e40a2d"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_get_md_hsm" ref="a6f4b191a27ceae23833d720870e40a2d" args="(struct mdt_thread_info *mti, const struct lu_fid *fid, struct md_hsm *hsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_hsm_get_md_hsm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>hsm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get obj and HSM attributes on a fid </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] object fid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hsm</em>&nbsp;</td><td>[OUT] HSM meta data </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td>or error (-ENOENT if not found) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00060">60</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a600c22623c217d6b362aad0f0798ff9c"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_group_request_mask_seq_show" ref="a600c22623c217d6b362aad0f0798ff9c" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_group_request_mask_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02021">2021</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00149">coordinator::cdt_group_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01993">mdt_hsm_request_mask_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6396b73e7fb2b654e69941ab5262f8e"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_group_request_mask_seq_write" ref="ab6396b73e7fb2b654e69941ab5262f8e" args="(struct file *file, const char __user *buf, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t mdt_hsm_group_request_mask_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02114">2114</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00149">coordinator::cdt_group_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l02056">mdt_write_hsm_request_mask()</a>.</p>

</div>
</div>
<a class="anchor" id="a79b7325228a5903643769041fc64bf56"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_is_action_compat" ref="a79b7325228a5903643769041fc64bf56" args="(const struct hsm_action_item *hai, const int hal_an, const __u64 rq_flags, const struct md_hsm *hsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdt_hsm_is_action_compat </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>hal_an</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>rq_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>hsm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check if a request is compatible with file status </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] request description </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal_an</em>&nbsp;</td><td>[IN] request archive number (not used) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rq_flags</em>&nbsp;</td><td>[IN] request flags </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hsm</em>&nbsp;</td><td>[IN] file HSM metadata </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01648">1648</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01048">HS_ARCHIVED</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01051">HS_LOST</a>, <a class="el" href="lustre__user_8h_source.html#l01050">HS_NOARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a38417c5139d4a86b1bd885d5e5a4cfc6"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_other_request_mask_seq_show" ref="a38417c5139d4a86b1bd885d5e5a4cfc6" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_other_request_mask_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02030">2030</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00150">coordinator::cdt_other_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01993">mdt_hsm_request_mask_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a4da38a4c937a3301134b1ac1db95bfe4"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_other_request_mask_seq_write" ref="a4da38a4c937a3301134b1ac1db95bfe4" args="(struct file *file, const char __user *buf, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t mdt_hsm_other_request_mask_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02126">2126</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00150">coordinator::cdt_other_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l02056">mdt_write_hsm_request_mask()</a>.</p>

</div>
</div>
<a class="anchor" id="a8b6850303de6170b82112f06905a92c1"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_pending_restore" ref="a8b6850303de6170b82112f06905a92c1" args="(struct mdt_thread_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_pending_restore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>restore <a class="el" href="structcoordinator.html">coordinator</a> state at startup the goal is to take a layout lock for each registered restore request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00731">731</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00641">hsm_restore_data::hrd_mti</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00654">hsm_restore_cb()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ac7f091a4f6b913583d549afe870ad428"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_policy_seq_show" ref="ac7f091a4f6b913583d549afe870ad428" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_policy_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01753">1753</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01725">hsm_policy_bit2str()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="accdca174b4ce54287ca663fe3ea053a3"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_policy_seq_write" ref="accdca174b4ce54287ca663fe3ea053a3" args="(struct file *file, const char __user *buffer, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t mdt_hsm_policy_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01764">1764</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01725">hsm_policy_bit2str()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01707">hsm_policy_str2bit()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="rename__many_8c_source.html#l00057">start</a>.</p>

</div>
</div>
<a class="anchor" id="acc3d9777b3bdf20a1ff4fb498623e03a"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_request_mask_show" ref="acc3d9777b3bdf20a1ff4fb498623e03a" args="(struct seq_file *m, __u64 mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_request_mask_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01993">1993</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l02021">mdt_hsm_group_request_mask_seq_show()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l02030">mdt_hsm_other_request_mask_seq_show()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l02012">mdt_hsm_user_request_mask_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5a880beb355228713092f559ba46a1c"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_restore_hdl_find" ref="ac5a880beb355228713092f559ba46a1c" args="(struct coordinator *cdt, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a>* mdt_hsm_restore_hdl_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lookup a restore handle by FID caller needs to hold cdt_restore_lock </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] FID </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a></em>&nbsp;</td><td>found </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00623">623</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b8427c08750b3ff8dac7dd04a04a683"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_update_request_state" ref="a3b8427c08750b3ff8dac7dd04a04a683" args="(struct mdt_thread_info *mti, struct hsm_progress_kernel *pgs, const int update_record)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_update_request_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *&nbsp;</td>
          <td class="paramname"> <em>pgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>update_record</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update status of a request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgs</em>&nbsp;</td><td>[IN] progress of the copy tool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>update_record</em>&nbsp;</td><td>[IN] update llog record </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01382">1382</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00745">hsm_init_ucred()</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">mdt_cdt_remove_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00774">mdt_hsm_cdt_wakeup()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__rsync_8c_source.html#l00187">status</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00521">mdt_hsm_coordinator_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6e1459e3c8575214cf390e391ce0172"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_user_request_mask_seq_show" ref="ae6e1459e3c8575214cf390e391ce0172" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_user_request_mask_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02012">2012</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00148">coordinator::cdt_user_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01993">mdt_hsm_request_mask_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ae183a2260a94754e37e4b3ed2cfefa51"></a><!-- doxytag: member="mdt_coordinator.c::mdt_hsm_user_request_mask_seq_write" ref="ae183a2260a94754e37e4b3ed2cfefa51" args="(struct file *file, const char __user *buf, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t mdt_hsm_user_request_mask_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02102">2102</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00148">coordinator::cdt_user_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l02056">mdt_write_hsm_request_mask()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bbd8bebb758b465e9ab8685f20a1c9e"></a><!-- doxytag: member="mdt_coordinator.c::mdt_write_hsm_request_mask" ref="a3bbd8bebb758b465e9ab8685f20a1c9e" args="(struct file *file, const char __user *user_buf, size_t user_count, __u64 *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t mdt_write_hsm_request_mask </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>user_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>user_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l02056">2056</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__coordinator_8c_source.html#l02039">hsm_copytool_name2action()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l02114">mdt_hsm_group_request_mask_seq_write()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l02126">mdt_hsm_other_request_mask_seq_write()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l02102">mdt_hsm_user_request_mask_seq_write()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aa0c799ac9d48ac7b9369e35f4d188a8d"></a><!-- doxytag: member="mdt_coordinator.c::bit" ref="aa0c799ac9d48ac7b9369e35f4d188a8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="mdt__coordinator_8c.html#aa0c799ac9d48ac7b9369e35f4d188a8d">bit</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01692">1692</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01725">hsm_policy_bit2str()</a>, <a class="el" href="libcfs_2libcfs_2debug_8c_source.html#l00139">libcfs_debug_mask2str()</a>, and <a class="el" href="libcfs_2libcfs_2debug_8c_source.html#l00185">libcfs_debug_str2mask()</a>.</p>

</div>
</div>
<a class="anchor" id="a159e6288c4f2c00727e1df3232b5f47c"></a><!-- doxytag: member="mdt_coordinator.c::hsm_policy_names" ref="a159e6288c4f2c00727e1df3232b5f47c" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   <a class="el" href="mdt__coordinator_8c.html#a159e6288c4f2c00727e1df3232b5f47c">hsm_policy_names</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01725">hsm_policy_bit2str()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01707">hsm_policy_str2bit()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2de70dc6f15ae7b621e7b44f21c2848"></a><!-- doxytag: member="mdt_coordinator.c::lprocfs_mdt_hsm_vars" ref="ad2de70dc6f15ae7b621e7b44f21c2848" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a> <a class="el" href="mdt__coordinator_8c.html#ad2de70dc6f15ae7b621e7b44f21c2848">lprocfs_mdt_hsm_vars</a><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        { .name =       <span class="stringliteral">&quot;agents&quot;</span>,
          .fops =       &amp;<a class="code" href="mdt__hsm__cdt__agent_8c.html#ae27f872199c9effc47a6630d21ff2509">mdt_hsm_agent_fops</a>                     },
        { .name =       <span class="stringliteral">&quot;actions&quot;</span>,
          .fops =       &amp;<a class="code" href="mdt__hsm__cdt__actions_8c.html#abff0f16680b2b0d72232473a476bdb5a">mdt_hsm_actions_fops</a>,
          .proc_mode =  0444                                    },
        { .name =       <span class="stringliteral">&quot;default_archive_id&quot;</span>,
          .fops =       &amp;mdt_hsm_cdt_default_archive_id_fops    },
        { .name =       <span class="stringliteral">&quot;grace_delay&quot;</span>,
          .fops =       &amp;mdt_hsm_cdt_grace_delay_fops           },
        { .name =       <span class="stringliteral">&quot;loop_period&quot;</span>,
          .fops =       &amp;mdt_hsm_cdt_loop_period_fops           },
        { .name =       <span class="stringliteral">&quot;max_requests&quot;</span>,
          .fops =       &amp;mdt_hsm_cdt_max_requests_fops          },
        { .name =       <span class="stringliteral">&quot;policy&quot;</span>,
          .fops =       &amp;mdt_hsm_policy_fops                    },
        { .name =       <span class="stringliteral">&quot;active_request_timeout&quot;</span>,
          .fops =       &amp;mdt_hsm_cdt_active_req_timeout_fops    },
        { .name =       <span class="stringliteral">&quot;active_requests&quot;</span>,
          .fops =       &amp;<a class="code" href="mdt__hsm__cdt__requests_8c.html#a8a5e8807a037144bdea0c3e7b101e039">mdt_hsm_active_requests_fops</a>           },
        { .name =       <span class="stringliteral">&quot;user_request_mask&quot;</span>,
          .fops =       &amp;mdt_hsm_user_request_mask_fops,        },
        { .name =       <span class="stringliteral">&quot;group_request_mask&quot;</span>,
          .fops =       &amp;mdt_hsm_group_request_mask_fops,       },
        { .name =       <span class="stringliteral">&quot;other_request_mask&quot;</span>,
          .fops =       &amp;mdt_hsm_other_request_mask_fops,       },
        { 0 }
}
</pre></div>
<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00051">51</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00414">hsm_cdt_get_proc_vars()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00375">hsm_cdt_procfs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ac083a645d964373f022d03df4849c8"></a><!-- doxytag: member="mdt_coordinator.c::name" ref="a5ac083a645d964373f022d03df4849c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01693">1693</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l00073">__mdd_lookup()</a>, <a class="el" href="lustre_2utils_2wirecheck_8c_source.html#l01289">check_ldlm_res_id()</a>, <a class="el" href="obd__config_8c_source.html#l00336">class_attach()</a>, <a class="el" href="obd__config_8c_source.html#l01322">class_process_proc_param()</a>, <a class="el" href="ldlm__lib_8c_source.html#l00261">client_obd_setup()</a>, <a class="el" href="gssd__proc_8c_source.html#l00889">construct_service_name()</a>, <a class="el" href="lhsmtool__posix_8c_source.html#l00744">ct_copy_xattr()</a>, <a class="el" href="cyaml_8c_source.html#l00649">find_obj_iter()</a>, <a class="el" href="fld__request_8c_source.html#l00155">fld_client_add_target()</a>, <a class="el" href="gss__util_8c_source.html#l00225">gssd_acquire_cred()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01725">hsm_policy_bit2str()</a>, <a class="el" href="gss__internal_8h_source.html#l00120">import_to_gss_svc()</a>, <a class="el" href="statahead_8c_source.html#l01263">is_first_dirent()</a>, <a class="el" href="lustre__lfsck_8c_source.html#l00441">jt_lfsck_query()</a>, <a class="el" href="lst_8c_source.html#l02190">jt_lst_add_batch()</a>, <a class="el" href="lst_8c_source.html#l00995">jt_lst_add_group()</a>, <a class="el" href="lst_8c_source.html#l00539">jt_lst_new_session()</a>, <a class="el" href="lst_8c_source.html#l00647">jt_lst_show_session()</a>, <a class="el" href="obd_8c_source.html#l01130">jt_obd_md_common()</a>, <a class="el" href="gnilnd__conn_8c_source.html#l02447">kgnilnd_dgram_mover()</a>, <a class="el" href="gnilnd__conn_8c_source.html#l02270">kgnilnd_dgram_waitq()</a>, <a class="el" href="o2iblnd_8c_source.html#l03049">kiblnd_start_schedulers()</a>, <a class="el" href="socklnd_8c_source.html#l02372">ksocknal_base_startup()</a>, <a class="el" href="socklnd__cb_8c_source.html#l02011">ksocknal_connd_check_start()</a>, <a class="el" href="socklnd_8c_source.html#l02709">ksocknal_start_schedulers()</a>, <a class="el" href="lfsck__lib_8c_source.html#l00989">lfsck_create_lpf()</a>, <a class="el" href="lfsck__layout_8c_source.html#l01697">lfsck_layout_recreate_parent()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01226">lfsck_namespace_create_orphan_dir()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l00460">lfsck_namespace_load_sub_trace_files()</a>, <a class="el" href="lfsck__namespace_8c_source.html#l01711">lfsck_namespace_replace_cond()</a>, <a class="el" href="lfsck__striped__dir_8c_source.html#l01672">lfsck_namespace_verify_stripe_slave()</a>, <a class="el" href="lfsck__lib_8c_source.html#l01371">lfsck_verify_lpf()</a>, <a class="el" href="xattr__security_8c_source.html#l00112">ll_init_security()</a>, <a class="el" href="file_8c_source.html#l00369">ll_intent_file_open()</a>, <a class="el" href="namei_8c_source.html#l01152">ll_link()</a>, <a class="el" href="namei_8c_source.html#l01185">ll_mkdir()</a>, <a class="el" href="namei_8c_source.html#l01028">ll_mknod()</a>, <a class="el" href="namei_8c_source.html#l00946">ll_new_node()</a>, <a class="el" href="namei_8c_source.html#l01206">ll_rmdir()</a>, <a class="el" href="statahead_8c_source.html#l00967">ll_statahead_thread()</a>, <a class="el" href="namei_8c_source.html#l01132">ll_symlink()</a>, <a class="el" href="namei_8c_source.html#l01273">ll_unlink()</a>, <a class="el" href="llog__ioctl_8c_source.html#l00286">llog_ioctl()</a>, <a class="el" href="llog__server_8c_source.html#l00059">llog_origin_handle_open()</a>, <a class="el" href="llog__osd_8c_source.html#l01342">llog_osd_regular_fid_add_name_entry()</a>, <a class="el" href="llog__osd_8c_source.html#l01604">llog_osd_regular_fid_del_name_entry()</a>, <a class="el" href="llog__test_8c_source.html#l01960">llog_run_tests()</a>, <a class="el" href="llog__test_8c_source.html#l01450">llog_test_10()</a>, <a class="el" href="llog__test_8c_source.html#l00571">llog_test_4()</a>, <a class="el" href="llog__test_8c_source.html#l00752">llog_test_5()</a>, <a class="el" href="llog__test_8c_source.html#l01215">llog_test_8()</a>, <a class="el" href="lsupport_8c_source.html#l00312">lnet_nid2hostname()</a>, <a class="el" href="mount__utils_8c_source.html#l00534">load_backfs_module()</a>, <a class="el" href="lod__object_8c_source.html#l00776">lod_load_lmv_shards()</a>, <a class="el" href="liblnetconfig_8c_source.html#l01541">lookup_fn()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00845">lprocfs_add_nodemap_idmap_seq_write()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00727">lprocfs_add_nodemap_range_seq_write()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00914">lprocfs_del_nodemap_idmap_seq_write()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00786">lprocfs_del_nodemap_range_seq_write()</a>, <a class="el" href="lquota__disk_8c_source.html#l00461">lquota_disk_for_each_slv()</a>, <a class="el" href="lquota__disk_8c_source.html#l00099">lquota_disk_slv_filename()</a>, <a class="el" href="conctl_8c_source.html#l00445">lst_batch_add_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00605">lst_batch_info_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00547">lst_batch_query_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00478">lst_batch_run_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00512">lst_batch_stop_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00116">lst_debug_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00197">lst_group_add_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00230">lst_group_del_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00382">lst_group_info_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00263">lst_group_update_ioctl()</a>, <a class="el" href="lst_8c_source.html#l02480">lst_list_batch_all()</a>, <a class="el" href="lst_8c_source.html#l01321">lst_list_group_all()</a>, <a class="el" href="conctl_8c_source.html#l00320">lst_nodes_add_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00049">lst_session_new_ioctl()</a>, <a class="el" href="conctl_8c_source.html#l00670">lst_stat_query_ioctl()</a>, <a class="el" href="lu__object_8c_source.html#l01058">lu_site_init()</a>, <a class="el" href="ptlrpc_2wiretest_8c_source.html#l00049">lustre_assert_wire_constants()</a>, <a class="el" href="osd__iam__lvar_8c_source.html#l00544">lvar_key_cmp()</a>, <a class="el" href="osd__iam__lvar_8c_source.html#l00555">lvar_key_eq()</a>, <a class="el" href="osd__iam__lvar_8c_source.html#l00438">lvar_lookup()</a>, <a class="el" href="osd__iam__lvar_8c_source.html#l00879">lvar_node_load()</a>, <a class="el" href="lwp__dev_8c_source.html#l00427">lwp_notify_users()</a>, <a class="el" href="createtest_8c_source.html#l00054">main()</a>, <a class="el" href="mdc__request_8c_source.html#l00101">mdc_get_root()</a>, <a class="el" href="mdc__request_8c_source.html#l00250">mdc_getattr_name()</a>, <a class="el" href="mdd__dir_8c_source.html#l02347">mdd_create()</a>, <a class="el" href="mdd__dir_8c_source.html#l01294">mdd_link()</a>, <a class="el" href="mdd__dir_8c_source.html#l03606">mdd_migrate_entries()</a>, <a class="el" href="mdd__dir_8c_source.html#l03933">mdd_migrate_update_name()</a>, <a class="el" href="mdd__orphans_8c_source.html#l00595">mdd_orphan_cleanup()</a>, <a class="el" href="mdd__dir_8c_source.html#l01612">mdd_unlink()</a>, <a class="el" href="mdt__handler_8c_source.html#l00271">mdt_lookup_fileset()</a>, <a class="el" href="mdt__handler_8c_source.html#l04029">mdt_stack_init()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l02056">mdt_write_hsm_request_mask()</a>, <a class="el" href="mgs__nids_8c_source.html#l00419">mgs_ir_notify()</a>, <a class="el" href="mdd__device_8c_source.html#l00565">obf_lookup()</a>, <a class="el" href="ofd__dev_8c_source.html#l00824">ofd_fid_init()</a>, <a class="el" href="osd__compat_8c_source.html#l00221">osd_add_to_remote_parent()</a>, <a class="el" href="osd__compat_8c_source.html#l00261">osd_delete_from_remote_parent()</a>, <a class="el" href="osd__index_8c_source.html#l00739">osd_dir_delete()</a>, <a class="el" href="osd__index_8c_source.html#l00610">osd_dir_insert()</a>, <a class="el" href="osd__index_8c_source.html#l00801">osd_dir_it_get()</a>, <a class="el" href="osd__index_8c_source.html#l00418">osd_dir_lookup()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04603">osd_ea_lookup_rec()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00424">osd_get_name_n_idx()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l04766">osd_index_ea_insert()</a>, <a class="el" href="osd-ldiskfs_2osd__handler_8c_source.html#l05046">osd_it_iam_rec()</a>, <a class="el" href="osd__compat_8c_source.html#l00311">osd_lookup_in_remote_parent()</a>, <a class="el" href="osd__compat_8c_source.html#l01019">osd_obj_map_delete()</a>, <a class="el" href="osd__compat_8c_source.html#l00973">osd_obj_map_insert()</a>, <a class="el" href="osd__compat_8c_source.html#l00911">osd_obj_map_lookup()</a>, <a class="el" href="osd__compat_8c_source.html#l01078">osd_obj_map_recover()</a>, <a class="el" href="osd__compat_8c_source.html#l01050">osd_obj_map_update()</a>, <a class="el" href="osd__compat_8c_source.html#l01242">osd_obj_spec_insert()</a>, <a class="el" href="osd__compat_8c_source.html#l01263">osd_obj_spec_lookup()</a>, <a class="el" href="osd__compat_8c_source.html#l01221">osd_obj_spec_update()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00559">osd_oi_open_table()</a>, <a class="el" href="osd-zfs_2osd__oi_8c_source.html#l00581">osd_oi_probe()</a>, <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00286">osd_oi_table_open()</a>, <a class="el" href="osd-ldiskfs_2osd__oi_8c_source.html#l00357">osd_remove_ois()</a>, <a class="el" href="osd__xattr_8c_source.html#l00852">osd_sa_xattr_list()</a>, <a class="el" href="out__handler_8c_source.html#l00508">out_index_delete()</a>, <a class="el" href="out__handler_8c_source.html#l00451">out_index_insert()</a>, <a class="el" href="out__handler_8c_source.html#l00290">out_index_lookup()</a>, <a class="el" href="out__handler_8c_source.html#l00392">out_xattr_del()</a>, <a class="el" href="out__handler_8c_source.html#l00235">out_xattr_get()</a>, <a class="el" href="out__handler_8c_source.html#l00344">out_xattr_set()</a>, <a class="el" href="mkfs__lustre_8c_source.html#l00278">parse_opts()</a>, <a class="el" href="l__getidentity_8c_source.html#l00220">parse_perm()</a>, <a class="el" href="mdsrate_8c_source.html#l00266">process_args()</a>, <a class="el" href="qsd__reint_8c_source.html#l00624">qsd_start_reint_thread()</a>, <a class="el" href="lsupport_8c_source.html#l00416">read_mapping_db()</a>, <a class="el" href="fid__store_8c_source.html#l00200">seq_store_init()</a>, <a class="el" href="sec__config_8c_source.html#l00843">sptlrpc_conf_choose_flavor()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00834">test19()</a>, <a class="el" href="update__recovery_8c_source.html#l00962">update_recovery_index_delete()</a>, <a class="el" href="update__recovery_8c_source.html#l00908">update_recovery_index_insert()</a>, <a class="el" href="update__recovery_8c_source.html#l01028">update_recovery_xattr_del()</a>, and <a class="el" href="update__recovery_8c_source.html#l00861">update_recovery_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="aebf3fd229429c27d00bd36dea7157407"></a><!-- doxytag: member="mdt_coordinator.c::nickname" ref="aebf3fd229429c27d00bd36dea7157407" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="mdt__coordinator_8c.html#aebf3fd229429c27d00bd36dea7157407">nickname</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01694">1694</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01707">hsm_policy_str2bit()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
