<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: mdc</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>mdc</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serializes in-flight MDT-modifying RPC requests to preserve idempotency.  <a href="structmdc__rpc__lock.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#ga467c4096f8cb93093f536b556acdcff1">MDC_FAKE_RPCL_IT</a>&nbsp;&nbsp;&nbsp;((void *)0x2c0012bfUL)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#ga8193c107fbb2de7850d345571f61dbc1">mdc_init_rpc_lock</a> (struct <a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a> *lck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#gaa1bf56480aa46f3740d9ce1eb0bbf859">mdc_get_rpc_lock</a> (struct <a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a> *lck, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#gad14beafd56db09ee7da8e9616d4e3ab3">mdc_put_rpc_lock</a> (struct <a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a> *lck, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#ga032260d6a793915f4cf2f5ddbc7a44b4">mdc_get_mod_rpc_slot</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#gadc79aeb4b906dbc85955f2b964971a06">mdc_put_mod_rpc_slot</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#ga1745cd97fa3884352692f9c673b907d8">mdc_update_max_ea_from_body</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmdt__body.html">mdt_body</a> *body)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the maximum possible easize.  <a href="#ga1745cd97fa3884352692f9c673b907d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#ga627d4a077703417a194991de319199fd">it_open_error</a> (int phase, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#ga2416ea4e1fcebb443d42f2ca76c07cba">cl_is_lov_delay_create</a> (unsigned int flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mdc.html#gacafdbec26f953e965bd0dd016c0517a3">cl_lov_delay_create_clear</a> (unsigned int *flags)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga467c4096f8cb93093f536b556acdcff1"></a><!-- doxytag: member="lustre_mdc.h::MDC_FAKE_RPCL_IT" ref="ga467c4096f8cb93093f536b556acdcff1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDC_FAKE_RPCL_IT&nbsp;&nbsp;&nbsp;((void *)0x2c0012bfUL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00094">94</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>Referenced by <a class="el" href="lustre__mdc_8h_source.html#l00102">mdc_get_rpc_lock()</a>, and <a class="el" href="lustre__mdc_8h_source.html#l00142">mdc_put_rpc_lock()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga2416ea4e1fcebb443d42f2ca76c07cba"></a><!-- doxytag: member="lustre_mdc.h::cl_is_lov_delay_create" ref="ga2416ea4e1fcebb443d42f2ca76c07cba" args="(unsigned int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool cl_is_lov_delay_create </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00227">227</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00324">O_LOV_DELAY_CREATE_1_8</a>, and <a class="el" href="lustre__user_8h_source.html#l00325">O_LOV_DELAY_CREATE_MASK</a>.</p>

<p>Referenced by <a class="el" href="mdc__lib_8c_source.html#l00173">mds_pack_open_flags()</a>.</p>

</div>
</div>
<a class="anchor" id="gacafdbec26f953e965bd0dd016c0517a3"></a><!-- doxytag: member="lustre_mdc.h::cl_lov_delay_create_clear" ref="gacafdbec26f953e965bd0dd016c0517a3" args="(unsigned int *flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void cl_lov_delay_create_clear </td>
          <td>(</td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>flags</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00233">233</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00324">O_LOV_DELAY_CREATE_1_8</a>, and <a class="el" href="lustre__user_8h_source.html#l00325">O_LOV_DELAY_CREATE_MASK</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l00491">ll_file_open()</a>, and <a class="el" href="file_8c_source.html#l01445">ll_lov_setstripe_ea_info()</a>.</p>

</div>
</div>
<a class="anchor" id="ga627d4a077703417a194991de319199fd"></a><!-- doxytag: member="lustre_mdc.h::it_open_error" ref="ga627d4a077703417a194991de319199fd" args="(int phase, struct lookup_intent *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int it_open_error </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdc__locks_8c_source.html#l00058">58</a> of file <a class="el" href="mdc__locks_8c_source.html">mdc_locks.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__idl_8h_source.html#l02061">DISP_IT_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02062">DISP_LOOKUP_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02065">DISP_OPEN_CREATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02071">DISP_OPEN_LEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02066">DISP_OPEN_OPEN</a>, <a class="el" href="lustre__intent_8h_source.html#l00046">lookup_intent::it_disposition</a>, <a class="el" href="lustre__intent_8h_source.html#l00057">it_disposition()</a>, <a class="el" href="lustre__intent_8h_source.html#l00047">lookup_intent::it_status</a>, and <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>.</p>

<p>Referenced by <a class="el" href="namei_8c_source.html#l00899">ll_create_it()</a>, <a class="el" href="file_8c_source.html#l00491">ll_file_open()</a>, <a class="el" href="file_8c_source.html#l00369">ll_intent_file_open()</a>, <a class="el" href="file_8c_source.html#l00700">ll_lease_open()</a>, <a class="el" href="file_8c_source.html#l01719">ll_release_openhandle()</a>, <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="mdc__locks_8c_source.html#l00890">mdc_finish_intent_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga032260d6a793915f4cf2f5ddbc7a44b4"></a><!-- doxytag: member="lustre_mdc.h::mdc_get_mod_rpc_slot" ref="ga032260d6a793915f4cf2f5ddbc7a44b4" args="(struct ptlrpc_request *req, struct lookup_intent *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdc_get_mod_rpc_slot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00168">168</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="pack__generic_8c_source.html#l01377">lustre_msg_set_tag()</a>, <a class="el" href="genops_8c_source.html#l02229">obd_get_mod_rpc_slot()</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mdc__request_8c_source.html#l00757">mdc_close()</a>, <a class="el" href="mdc__locks_8c_source.html#l00724">mdc_enqueue()</a>, <a class="el" href="mdc__request_8c_source.html#l01527">mdc_ioc_hsm_progress()</a>, <a class="el" href="mdc__request_8c_source.html#l01742">mdc_ioc_hsm_request()</a>, <a class="el" href="mdc__request_8c_source.html#l01701">mdc_ioc_hsm_state_set()</a>, <a class="el" href="mdc__reint_8c_source.html#l00047">mdc_reint()</a>, and <a class="el" href="mdc__request_8c_source.html#l00294">mdc_xattr_common()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa1bf56480aa46f3740d9ce1eb0bbf859"></a><!-- doxytag: member="lustre_mdc.h::mdc_get_rpc_lock" ref="gaa1bf56480aa46f3740d9ce1eb0bbf859" args="(struct mdc_rpc_lock *lck, struct lookup_intent *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdc_get_rpc_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00102">102</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="libcfs__fail_8h_source.html#l00106">CFS_FAIL_CHECK_QUIET</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="packet-lustre_8c_source.html#l00236">IT_GETATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l02880">IT_LAYOUT</a>, <a class="el" href="packet-lustre_8c_source.html#l00237">IT_LOOKUP</a>, <a class="el" href="lustre__intent_8h_source.html#l00043">lookup_intent::it_op</a>, <a class="el" href="packet-lustre_8c_source.html#l00235">IT_READDIR</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__mdc_8h_source.html#l00094">MDC_FAKE_RPCL_IT</a>, <a class="el" href="obd__support_8h_source.html#l00452">OBD_FAIL_MDC_RPCS_SEM</a>, <a class="el" href="lustre__mdc_8h_source.html#l00091">mdc_rpc_lock::rpcl_fakes</a>, <a class="el" href="lustre__mdc_8h_source.html#l00089">mdc_rpc_lock::rpcl_it</a>, <a class="el" href="lustre__mdc_8h_source.html#l00087">mdc_rpc_lock::rpcl_mutex</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="osp__internal_8h_source.html#l00495">osp_get_rpc_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8193c107fbb2de7850d345571f61dbc1"></a><!-- doxytag: member="lustre_mdc.h::mdc_init_rpc_lock" ref="ga8193c107fbb2de7850d345571f61dbc1" args="(struct mdc_rpc_lock *lck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdc_init_rpc_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lck</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00096">96</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="lustre__mdc_8h_source.html#l00089">mdc_rpc_lock::rpcl_it</a>, and <a class="el" href="lustre__mdc_8h_source.html#l00087">mdc_rpc_lock::rpcl_mutex</a>.</p>

</div>
</div>
<a class="anchor" id="gadc79aeb4b906dbc85955f2b964971a06"></a><!-- doxytag: member="lustre_mdc.h::mdc_put_mod_rpc_slot" ref="gadc79aeb4b906dbc85955f2b964971a06" args="(struct ptlrpc_request *req, struct lookup_intent *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdc_put_mod_rpc_slot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00180">180</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="pack__generic_8c_source.html#l01026">lustre_msg_get_tag()</a>, <a class="el" href="genops_8c_source.html#l02281">obd_put_mod_rpc_slot()</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mdc__request_8c_source.html#l00757">mdc_close()</a>, <a class="el" href="mdc__locks_8c_source.html#l00724">mdc_enqueue()</a>, <a class="el" href="mdc__request_8c_source.html#l01527">mdc_ioc_hsm_progress()</a>, <a class="el" href="mdc__request_8c_source.html#l01742">mdc_ioc_hsm_request()</a>, <a class="el" href="mdc__request_8c_source.html#l01701">mdc_ioc_hsm_state_set()</a>, <a class="el" href="mdc__reint_8c_source.html#l00047">mdc_reint()</a>, and <a class="el" href="mdc__request_8c_source.html#l00294">mdc_xattr_common()</a>.</p>

</div>
</div>
<a class="anchor" id="gad14beafd56db09ee7da8e9616d4e3ab3"></a><!-- doxytag: member="lustre_mdc.h::mdc_put_rpc_lock" ref="gad14beafd56db09ee7da8e9616d4e3ab3" args="(struct mdc_rpc_lock *lck, struct lookup_intent *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdc_put_rpc_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdc__rpc__lock.html">mdc_rpc_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00142">142</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="packet-lustre_8c_source.html#l00236">IT_GETATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l02880">IT_LAYOUT</a>, <a class="el" href="packet-lustre_8c_source.html#l00237">IT_LOOKUP</a>, <a class="el" href="lustre__intent_8h_source.html#l00043">lookup_intent::it_op</a>, <a class="el" href="packet-lustre_8c_source.html#l00235">IT_READDIR</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__mdc_8h_source.html#l00094">MDC_FAKE_RPCL_IT</a>, <a class="el" href="lustre__mdc_8h_source.html#l00091">mdc_rpc_lock::rpcl_fakes</a>, <a class="el" href="lustre__mdc_8h_source.html#l00089">mdc_rpc_lock::rpcl_it</a>, and <a class="el" href="lustre__mdc_8h_source.html#l00087">mdc_rpc_lock::rpcl_mutex</a>.</p>

<p>Referenced by <a class="el" href="osp__internal_8h_source.html#l00502">osp_put_rpc_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1745cd97fa3884352692f9c673b907d8"></a><!-- doxytag: member="lustre_mdc.h::mdc_update_max_ea_from_body" ref="ga1745cd97fa3884352692f9c673b907d8" args="(struct obd_export *exp, struct mdt_body *body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdc_update_max_ea_from_body </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"> <em>body</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the maximum possible easize. </p>
<p>This value is learned from ptlrpc replies sent by the MDT. The default easize is initialized to the minimum value but allowed to grow up to a single page in size if required to handle the common case.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structclient__obd.html#aab81c7f514f35567f42ecae66a11af61">client_obd::cl_default_mds_easize</a></dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>export for MDC device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>body</em>&nbsp;</td><td>body of ptlrpc reply from MDT </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lustre__mdc_8h_source.html#l00207">207</a> of file <a class="el" href="lustre__mdc_8h_source.html">lustre_mdc.h</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00178">client_obd::cl_default_mds_easize</a>, <a class="el" href="obd_8h_source.html#l00183">client_obd::cl_max_mds_easize</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l02215">mdt_body::mbo_max_mdsize</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="obd_8h_source.html#l00155">OBD_MAX_DEFAULT_EA_SIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01687">OBD_MD_FLMODEASIZE</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mdc__locks_8c_source.html#l00523">mdc_finish_enqueue()</a>, and <a class="el" href="mdc__request_8c_source.html#l00165">mdc_getattr_common()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
