<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/target/tgt_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/target/tgt_internal.h File Reference</h1><code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lu__target_8h_source.html">lu_target.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__export_8h_source.html">lustre_export.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fld_8h_source.html">lustre_fld.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__req__layout_8h_source.html">lustre_req_layout.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__sec_8h_source.html">lustre_sec.h</a>&gt;</code><br/>

<p><a href="tgt__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtgt__thread__info.html">tgt_thread_info</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Common data shared by tg-level handlers.  <a href="structtgt__thread__info.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtgt__thread__big__cache.html">tgt_thread_big_cache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structupdate__thread__info.html">update_thread_info</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a29a0ac87775c9f48307e18f0e71b3296">MGS_SERVICE_WATCHDOG_FACTOR</a>&nbsp;&nbsp;&nbsp;(2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#af61bf68a3eda75df6d7f384d9bda0564">out_tx_create</a>(env, obj, attr, fid, dof, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ad106756cd455fcfaad67891764b11b0a">out_tx_attr_set</a>(env, obj, attr, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ab6340da5a8494c4a09f82bc85879e553">out_tx_xattr_set</a>(env, obj, <a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, <a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, fl, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#acb628e8381877d9b4487dd4301c41ad6">out_tx_xattr_del</a>(env, obj, <a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a3fe7f44d9c866568fc8a47d9b909d631">out_tx_ref_add</a>(env, obj, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a9fa1a61d557d523979fd37cdfcba3273">out_tx_ref_del</a>(env, obj, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a99d949e7fba09e4562bcdd96cea83695">out_tx_index_insert</a>(env, obj, rec, key, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ad4fd5dff4e7d2e8369be02116c5fd9c8">out_tx_index_delete</a>(env, obj, key, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a9320f225c325786e5c3fd085530e0656">out_tx_destroy</a>(env, obj, ta, th, reply, idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a593abf041b29c731c73d3e2edb7bf3b5">out_tx_write</a>(env, obj, <a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, pos, ta, th, reply, idx)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structtgt__thread__info.html">tgt_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#afee3174ebf16e838162396614b05a6fd">tgt_th_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a232ed291c8d95309a6a1791731b8e0ae">tgt_request_handle</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a5b04c67a3a7fa1840c5d8ed0d19aba41">req_xid_is_last</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#aeb38ee78c721cb94b8cf94978f74c63d">dt_obd_name</a> (struct <a class="el" href="structdt__device.html">dt_device</a> *dt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a14f1cb5f9757c08bced67647755c66e0">out_tx_create_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structtx__arg.html">tx_arg</a> *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtx__arg.html">tx_arg</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a5a5bc8081cdd143a21678e9167111189">tx_add_exec</a> (struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, <a class="el" href="lustre__update_8h.html#af28c3f8d6263730d6aa85705b1363fae">tx_exec_func_t</a> func, <a class="el" href="lustre__update_8h.html#af28c3f8d6263730d6aa85705b1363fae">tx_exec_func_t</a> undo, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a57ecfef7b3cbb12005ac99c53f2fb7a9">out_create_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *obj, struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structlu__fid.html">lu_fid</a> *parent_fid, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add create update to <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>.  <a href="#a57ecfef7b3cbb12005ac99c53f2fb7a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#adcbdb7337ed16536535cb2c2c42273de">out_attr_set_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#af7da7c9afd24f987cf7176c5994e0126">out_write_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, loff_t pos, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a2d7beb9108eddc83573b09b6738b9384">out_xattr_set_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int flags, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a909377c4f2f5dfb179ab1184f0bfa1a3">out_xattr_del_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a1d68d6a5d931a74b9d29bf811c0dba40">out_ref_add_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a3faa226d26e226a29821c8473939d14f">out_ref_del_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ae2e3df3813f4e52fa7cc78470de78f1d">out_index_insert_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a535d43f2edd4b2c11f81a20a59748aa1">out_index_delete_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ab4eb0d090b5d961020456dc6229a6934">out_destroy_add_exec</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__object.html">dt_object</a> *dt_obj, struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *ta, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, int index, const char *file, int line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a56cfd9fe6c653ab40caabbb459145656">out_handle</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Object updates between Targets.  <a href="#a56cfd9fe6c653ab40caabbb459145656"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#af41e2b72019c67f5f929c6a944d0801e">update_op_str</a> (__u16 opcode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ae37e9b2446f0e1978dddcf101571b39b">tgt_server_data_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__target.html">lu_target</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a38d59da36521433cfc15f37967c2746e">tgt_txn_start_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, void *cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a4422f06a2a87e28b67af5cf4d7443bac">tgt_txn_stop_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, void *cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#aef5902c344803dae3f192bf81060cc8a">tgt_handle_received_xid</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> rcvd_xid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a12b3a46bfd86349b6ffb61cd0d8c8847">tgt_handle_tag</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u16 tag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#af5e8c053444ba3fed9d4f22db1e0e643">update_records_dump</a> (const struct <a class="el" href="structupdate__records.html">update_records</a> *records, unsigned int mask, bool dump_updates)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump update record.  <a href="#af5e8c053444ba3fed9d4f22db1e0e643"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a18a6ce30ff68ba772a30fd9a164b9a18">check_and_prepare_update_record</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *tur)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check and prepare whether it needs to record update.  <a href="#a18a6ce30ff68ba772a30fd9a164b9a18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structupdate__thread__info.html">update_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a845853d38061c7c808963fb15039deae">update_env_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#abb3102b38b590d56d0c531397be53292">update_info_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a50e52cb7df7ffa36c19228b8fd137c28">update_info_fini</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsub__thandle.html">sub_thandle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a0d5350897e8c40320351e72ba090fa6c">create_sub_thandle</a> (struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *tmt, struct <a class="el" href="structdt__device.html">dt_device</a> *dt_dev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#aa345e2b1216b85fb0cfdb183553dc682">sub_thandle_trans_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structtop__thandle.html">top_thandle</a> *top_th, struct <a class="el" href="structsub__thandle.html">sub_thandle</a> *st)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>.  <a href="#aa345e2b1216b85fb0cfdb183553dc682"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a3200a46788d18886fc69a646f0ab85a6">distribute_txn_insert_by_batchid</a> (struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *new)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert distribute transaction to the distribute txn list.  <a href="#a3200a46788d18886fc69a646f0ab85a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#aa54680b77690cc5b396f50765afcbf88">top_trans_create_tmt</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structtop__thandle.html">top_thandle</a> *top_th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> for <a class="el" href="structtop__thandle.html">top_thandle</a>.  <a href="#aa54680b77690cc5b396f50765afcbf88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a6f4f8fa4a61a1414d1c06d82923daa08">tgt_cancel_slc_locks</a> (<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> transno)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#a0ea09250d6017d58c387ed32c646f5e3">tgt_lfsck_in_notify</a> )(const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *key, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__context__key.html">lu_context_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ae029171d369d93266ba4c388e7676e17">tgt_thread_key</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct page *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#ac116aa97f11bb8a64eababe44d507097">tgt_page_to_corrupt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__context__key.html">lu_context_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tgt__internal_8h.html#aa001baf045dcb5ffc759648eceddbccb">update_thread_key</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a29a0ac87775c9f48307e18f0e71b3296"></a><!-- doxytag: member="tgt_internal.h::MGS_SERVICE_WATCHDOG_FACTOR" ref="a29a0ac87775c9f48307e18f0e71b3296" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGS_SERVICE_WATCHDOG_FACTOR&nbsp;&nbsp;&nbsp;(2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00104">104</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad106756cd455fcfaad67891764b11b0a"></a><!-- doxytag: member="tgt_internal.h::out_tx_attr_set" ref="ad106756cd455fcfaad67891764b11b0a" args="(env, obj, attr, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_attr_set</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">attr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#adcbdb7337ed16536535cb2c2c42273de">out_attr_set_add_exec</a>(env, obj, attr, ta, th, reply, idx, \
                              __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00201">201</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00151">out_attr_set()</a>, and <a class="el" href="update__recovery_8c_source.html#l00825">update_recovery_attr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="af61bf68a3eda75df6d7f384d9bda0564"></a><!-- doxytag: member="tgt_internal.h::out_tx_create" ref="af61bf68a3eda75df6d7f384d9bda0564" args="(env, obj, attr, fid, dof, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_create</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">attr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fid, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dof, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#a57ecfef7b3cbb12005ac99c53f2fb7a9" title="Add create update to thandle.">out_create_add_exec</a>(env, obj, attr, fid, dof, ta, th, reply, idx, \
                            __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00197">197</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00096">out_create()</a>, and <a class="el" href="update__recovery_8c_source.html#l00737">update_recovery_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a9320f225c325786e5c3fd085530e0656"></a><!-- doxytag: member="tgt_internal.h::out_tx_destroy" ref="a9320f225c325786e5c3fd085530e0656" args="(env, obj, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_destroy</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#ab4eb0d090b5d961020456dc6229a6934">out_destroy_add_exec</a>(env, obj, ta, th, reply, idx,      \
                             __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00229">229</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00533">out_destroy()</a>, and <a class="el" href="update__recovery_8c_source.html#l00780">update_recovery_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4fd5dff4e7d2e8369be02116c5fd9c8"></a><!-- doxytag: member="tgt_internal.h::out_tx_index_delete" ref="ad4fd5dff4e7d2e8369be02116c5fd9c8" args="(env, obj, key, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_index_delete</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">key, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#a535d43f2edd4b2c11f81a20a59748aa1">out_index_delete_add_exec</a>(env, obj, key, ta, th, reply, idx, \
                                  __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00225">225</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00508">out_index_delete()</a>, and <a class="el" href="update__recovery_8c_source.html#l00962">update_recovery_index_delete()</a>.</p>

</div>
</div>
<a class="anchor" id="a99d949e7fba09e4562bcdd96cea83695"></a><!-- doxytag: member="tgt_internal.h::out_tx_index_insert" ref="a99d949e7fba09e4562bcdd96cea83695" args="(env, obj, rec, key, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_index_insert</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rec, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">key, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#ae2e3df3813f4e52fa7cc78470de78f1d">out_index_insert_add_exec</a>(env, obj, rec, key, ta, th, reply, idx, \
                                  __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00221">221</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00451">out_index_insert()</a>, and <a class="el" href="update__recovery_8c_source.html#l00908">update_recovery_index_insert()</a>.</p>

</div>
</div>
<a class="anchor" id="a3fe7f44d9c866568fc8a47d9b909d631"></a><!-- doxytag: member="tgt_internal.h::out_tx_ref_add" ref="a3fe7f44d9c866568fc8a47d9b909d631" args="(env, obj, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_ref_add</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#a1d68d6a5d931a74b9d29bf811c0dba40">out_ref_add_add_exec</a>(env, obj, ta, th, reply, idx,      \
                             __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00213">213</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00418">out_ref_add()</a>, and <a class="el" href="update__recovery_8c_source.html#l00795">update_recovery_ref_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fa1a61d557d523979fd37cdfcba3273"></a><!-- doxytag: member="tgt_internal.h::out_tx_ref_del" ref="a9fa1a61d557d523979fd37cdfcba3273" args="(env, obj, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_ref_del</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#a3faa226d26e226a29821c8473939d14f">out_ref_del_add_exec</a>(env, obj, ta, th, reply, idx,      \
                             __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00217">217</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00433">out_ref_del()</a>, and <a class="el" href="update__recovery_8c_source.html#l00810">update_recovery_ref_del()</a>.</p>

</div>
</div>
<a class="anchor" id="a593abf041b29c731c73d3e2edb7bf3b5"></a><!-- doxytag: member="tgt_internal.h::out_tx_write" ref="a593abf041b29c731c73d3e2edb7bf3b5" args="(env, obj, buf, pos, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_write</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pos, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#af7da7c9afd24f987cf7176c5994e0126">out_write_add_exec</a>(env, obj, <a class="code" href="parallel__grouplock_8c.html#a30581aaaef7980b9fc6df8f98406097c">buf</a>, pos, ta, th, reply, idx,\
                           __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00233">233</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00560">out_write()</a>, and <a class="el" href="update__recovery_8c_source.html#l00991">update_recovery_write()</a>.</p>

</div>
</div>
<a class="anchor" id="acb628e8381877d9b4487dd4301c41ad6"></a><!-- doxytag: member="tgt_internal.h::out_tx_xattr_del" ref="acb628e8381877d9b4487dd4301c41ad6" args="(env, obj, name, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_xattr_del</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#a909377c4f2f5dfb179ab1184f0bfa1a3">out_xattr_del_add_exec</a>(env, obj, <a class="code" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, ta, th, reply, idx,      \
                               __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00209">209</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00392">out_xattr_del()</a>, and <a class="el" href="update__recovery_8c_source.html#l01028">update_recovery_xattr_del()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6340da5a8494c4a09f82bc85879e553"></a><!-- doxytag: member="tgt_internal.h::out_tx_xattr_set" ref="ab6340da5a8494c4a09f82bc85879e553" args="(env, obj, buf, name, fl, ta, th, reply, idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define out_tx_xattr_set</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fl, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ta, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reply, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">idx&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="out__lib_8c.html#a2d7beb9108eddc83573b09b6738b9384">out_xattr_set_add_exec</a>(env, obj, <a class="code" href="parallel__grouplock_8c.html#a30581aaaef7980b9fc6df8f98406097c">buf</a>, <a class="code" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, fl, ta, th, reply, idx, \
                               __FILE__, __LINE__)
</pre></div>
<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00205">205</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00344">out_xattr_set()</a>, and <a class="el" href="update__recovery_8c_source.html#l00861">update_recovery_xattr_set()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a18a6ce30ff68ba772a30fd9a164b9a18"></a><!-- doxytag: member="tgt_internal.h::check_and_prepare_update_record" ref="a18a6ce30ff68ba772a30fd9a164b9a18" args="(const struct lu_env *env, struct thandle_update_records *tur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_and_prepare_update_record </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>tur</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check and prepare whether it needs to record update. </p>
<p>Checks if the transaction needs to record updates, and if it does, then initialize the update record buffer in the transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>transaction handle</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if updates recording succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if updates recording fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l01161">1161</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03300">LLOG_MIN_CHUNK_SIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="llog__test_8c_source.html#l00947">lur</a>, <a class="el" href="lustre__idl_8h_source.html#l04041">llog_update_record::lur_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l04042">llog_update_record::lur_update_rec</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__update_8h_source.html#l00278">thandle_update_records::tur_update_param_count</a>, <a class="el" href="lustre__update_8h_source.html#l00277">thandle_update_records::tur_update_params</a>, <a class="el" href="update__records_8c_source.html#l01103">tur_update_params_create()</a>, <a class="el" href="lustre__update_8h_source.html#l00273">thandle_update_records::tur_update_records</a>, <a class="el" href="update__records_8c_source.html#l00991">tur_update_records_create()</a>, <a class="el" href="lustre__idl_8h_source.html#l04024">update_records::ur_batchid</a>, <a class="el" href="lustre__idl_8h_source.html#l04025">update_records::ur_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l04023">update_records::ur_master_transno</a>, <a class="el" href="lustre__idl_8h_source.html#l04030">update_records::ur_param_count</a>, and <a class="el" href="lustre__idl_8h_source.html#l04029">update_records::ur_update_count</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l00750">prepare_multiple_node_trans()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d5350897e8c40320351e72ba090fa6c"></a><!-- doxytag: member="tgt_internal.h::create_sub_thandle" ref="a0d5350897e8c40320351e72ba090fa6c" args="(struct top_multiple_thandle *tmt, struct dt_device *dt_dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsub__thandle.html">sub_thandle</a>* create_sub_thandle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>tmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_dev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00436">436</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__update_8h_source.html#l00323">sub_thandle::st_cookie_list</a>, <a class="el" href="lustre__update_8h_source.html#l00322">sub_thandle::st_dt</a>, <a class="el" href="lustre__update_8h_source.html#l00329">sub_thandle::st_sub_list</a>, and <a class="el" href="lustre__update_8h_source.html#l00287">top_multiple_thandle::tmt_sub_thandle_list</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l01134">create_sub_thandle_with_thandle()</a>, and <a class="el" href="update__recovery_8c_source.html#l01137">update_recovery_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="a3200a46788d18886fc69a646f0ab85a6"></a><!-- doxytag: member="tgt_internal.h::distribute_txn_insert_by_batchid" ref="a3200a46788d18886fc69a646f0ab85a6" args="(struct top_multiple_thandle *new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void distribute_txn_insert_by_batchid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>new</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert distribute transaction to the distribute txn list. </p>
<p>Insert distribute transaction to the distribute txn list.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>new</em>&nbsp;</td><td>the distribute txn to be inserted. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00694">694</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="dt__object_8h_source.html#l01774">dt2lu_dev()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="list_8h_source.html#l00472">list_for_each_entry_reverse</a>, <a class="el" href="lu__object_8h_source.html#l00649">lu_site::ls_tgt</a>, <a class="el" href="lu__target_8h_source.html#l00122">lu_target::lut_tdtd</a>, <a class="el" href="lustre__update_8h_source.html#l00329">sub_thandle::st_sub_list</a>, <a class="el" href="lustre__update_8h_source.html#l00321">sub_thandle::st_sub_th</a>, <a class="el" href="update__trans_8c_source.html#l00502">sub_thandle_register_commit_cb()</a>, <a class="el" href="lu__target_8h_source.html#l00089">target_distribute_txn_data::tdtd_batchid_lock</a>, <a class="el" href="lu__target_8h_source.html#l00102">target_distribute_txn_data::tdtd_commit_thread_waitq</a>, <a class="el" href="lu__target_8h_source.html#l00099">target_distribute_txn_data::tdtd_list</a>, <a class="el" href="lustre__update_8h_source.html#l00295">top_multiple_thandle::tmt_batchid</a>, <a class="el" href="lustre__update_8h_source.html#l00290">top_multiple_thandle::tmt_commit_list</a>, <a class="el" href="update__trans_8c_source.html#l00069">top_multiple_thandle_dump()</a>, and <a class="el" href="lustre__update_8h_source.html#l00468">top_multiple_thandle_get()</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb38ee78c721cb94b8cf94978f74c63d"></a><!-- doxytag: member="tgt_internal.h::dt_obd_name" ref="aeb38ee78c721cb94b8cf94978f74c63d" args="(struct dt_device *dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* dt_obd_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00118">118</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, and <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, <a class="el" href="out__lib_8c_source.html#l00496">out_obj_destroy()</a>, <a class="el" href="out__lib_8c_source.html#l01029">out_obj_index_delete()</a>, <a class="el" href="out__lib_8c_source.html#l01006">out_obj_index_insert()</a>, <a class="el" href="out__handler_8c_source.html#l00042">out_reconstruct()</a>, <a class="el" href="out__lib_8c_source.html#l00626">out_tx_attr_set_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00616">out_tx_attr_set_undo()</a>, <a class="el" href="out__lib_8c_source.html#l00530">out_tx_create_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00518">out_tx_create_undo()</a>, <a class="el" href="out__lib_8c_source.html#l01175">out_tx_destroy_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01193">out_tx_destroy_undo()</a>, <a class="el" href="out__handler_8c_source.html#l00821">out_tx_end()</a>, <a class="el" href="out__lib_8c_source.html#l01114">out_tx_index_delete_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01132">out_tx_index_delete_undo()</a>, <a class="el" href="out__lib_8c_source.html#l01050">out_tx_index_insert_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00909">out_tx_ref_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00957">out_tx_ref_del_exec()</a>, <a class="el" href="out__handler_8c_source.html#l00765">out_tx_start()</a>, <a class="el" href="out__lib_8c_source.html#l00830">out_tx_xattr_del_exec()</a>, and <a class="el" href="out__lib_8c_source.html#l00730">out_tx_xattr_set_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="adcbdb7337ed16536535cb2c2c42273de"></a><!-- doxytag: member="tgt_internal.h::out_attr_set_add_exec" ref="adcbdb7337ed16536535cb2c2c42273de" args="(const struct lu_env *env, struct dt_object *dt_obj, const struct lu_attr *attr, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_attr_set_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00649">649</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="structtx__arg.html#afcc1689960955764a102a2ea42cdaced">tx_arg::attr_set</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02238">dt_declare_attr_set()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00626">out_tx_attr_set_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00616">out_tx_attr_set_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, and <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>.</p>

</div>
</div>
<a class="anchor" id="a57ecfef7b3cbb12005ac99c53f2fb7a9"></a><!-- doxytag: member="tgt_internal.h::out_create_add_exec" ref="a57ecfef7b3cbb12005ac99c53f2fb7a9" args="(const struct lu_env *env, struct dt_object *obj, struct lu_attr *attr, struct lu_fid *parent_fid, struct dt_object_format *dof, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_create_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add create update to <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>. </p>
<p>Declare create updates and add the update to the <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> updates exec array.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obj</em>&nbsp;</td><td>object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attributes of the creation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>parent_fid</em>&nbsp;</td><td>the fid of the parent </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>dt object format of the creation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ta</em>&nbsp;</td><td><a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> execuation args where all of updates of the transaction are stored </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td><a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> for this update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>reply</em>&nbsp;</td><td>reply of the updates </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>index</em>&nbsp;</td><td>index of the reply </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>file</em>&nbsp;</td><td>the file name where the function is called, which is only for debugging purpose. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>line</em>&nbsp;</td><td>the line number where the funtion is called, which is only for debugging purpose.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if updates is added successfully. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if update adding fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00582">582</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="structtx__arg.html#a76c887ae1c8f676beb8df45c85416b3f">tx_arg::create</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02103">dt_declare_create()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00530">out_tx_create_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00518">out_tx_create_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, and <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>.</p>

</div>
</div>
<a class="anchor" id="ab4eb0d090b5d961020456dc6229a6934"></a><!-- doxytag: member="tgt_internal.h::out_destroy_add_exec" ref="ab4eb0d090b5d961020456dc6229a6934" args="(const struct lu_env *env, struct dt_object *dt_obj, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_destroy_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l01201">1201</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02137">dt_declare_destroy()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l01175">out_tx_destroy_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01193">out_tx_destroy_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, and <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="a56cfd9fe6c653ab40caabbb459145656"></a><!-- doxytag: member="tgt_internal.h::out_handle" ref="a56cfd9fe6c653ab40caabbb459145656" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_handle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Object updates between Targets. </p>
<p>Because all the updates has been dis-assemblied into object updates at sender side, so OUT will call OSD API directly to execute these updates.</p>
<p>In DNE phase I all of the updates in the request need to be executed in one transaction, and the transaction has to be synchronously.</p>
<p>Please refer to <a class="el" href="lustre__idl_8h.html">lustre/include/lustre/lustre_idl.h</a> for req/reply format. </p>

<p>Definition at line <a class="el" href="out__handler_8c_source.html#l00894">894</a> of file <a class="el" href="out__handler_8c_source.html">out_handler.c</a>.</p>

<p>References <a class="el" href="structptlrpc__bulk__frag__ops.html#a071eacf4504ae84799e0f989a0e43229">ptlrpc_bulk_frag_ops::add_iov_frag</a>, <a class="el" href="lustre__net_8h_source.html#l01451">ptlrpc_bulk_desc::bd_frag_ops</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01732">dt_device::dd_record_fid_accessed</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l03465">LE_FID_ACCESSED</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00087">lfsck_pack_rfa()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00168">LFSCK_TYPE_LAYOUT</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="req-layout_8c_source.html#l00102">lustre_swab_object_update</a>, <a class="el" href="req-layout_8c_source.html#l00105">lustre_swab_object_update_request</a>, <a class="el" href="lu__target_8h_source.html#l00120">lu_target::lut_bottom</a>, <a class="el" href="lustre__idl_8h_source.html#l00104">MDS_BULK_PORTAL</a>, <a class="el" href="lu__target_8h_source.html#l00306">MUTABOR</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__idl_8h_source.html#l03889">object_update_request_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l03831">object_update::ou_batchid</a>, <a class="el" href="lustre__idl_8h_source.html#l03832">object_update::ou_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03829">object_update::ou_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03828">object_update::ou_result_size</a>, <a class="el" href="lustre__idl_8h_source.html#l03826">object_update::ou_type</a>, <a class="el" href="lustre__idl_8h_source.html#l03859">out_update_buffer::oub_size</a>, <a class="el" href="lustre__idl_8h_source.html#l03852">out_update_header::ouh_count</a>, <a class="el" href="lustre__idl_8h_source.html#l03855">out_update_header::ouh_inline_data</a>, <a class="el" href="lustre__idl_8h_source.html#l03853">out_update_header::ouh_inline_length</a>, <a class="el" href="lustre__idl_8h_source.html#l03851">out_update_header::ouh_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l03854">out_update_header::ouh_reply_size</a>, <a class="el" href="lustre__idl_8h_source.html#l03923">object_update_reply::ourp_count</a>, <a class="el" href="lustre__idl_8h_source.html#l03925">object_update_reply::ourp_lens</a>, <a class="el" href="lustre__idl_8h_source.html#l03922">object_update_reply::ourp_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l03842">object_update_request::ourq_count</a>, <a class="el" href="lustre__idl_8h_source.html#l03841">object_update_request::ourq_magic</a>, <a class="el" href="out__handler_8c_source.html#l00060">out_check_resent()</a>, <a class="el" href="out__handler_8c_source.html#l00750">out_handler_find()</a>, <a class="el" href="lustre__net_8h_source.html#l00375">OUT_MAXREQSIZE</a>, <a class="el" href="out__handler_8c_source.html#l00042">out_reconstruct()</a>, <a class="el" href="out__handler_8c_source.html#l00821">out_tx_end()</a>, <a class="el" href="out__handler_8c_source.html#l00765">out_tx_start()</a>, <a class="el" href="lustre__idl_8h_source.html#l03847">OUT_UPDATE_HEADER_MAGIC</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__net_8h_source.html#l01336">PTLRPC_BULK_BUF_KVEC</a>, <a class="el" href="lustre__net_8h_source.html#l01340">PTLRPC_BULK_GET_SINK</a>, <a class="el" href="client_8c_source.html#l00062">ptlrpc_bulk_kvec_ops</a>, <a class="el" href="lustre__net_8h_source.html#l00086">PTLRPC_BULK_OPS_COUNT</a>, <a class="el" href="client_8c_source.html#l00257">ptlrpc_free_bulk()</a>, <a class="el" href="lustre__net_8h_source.html#l01190">ptlrpc_req_need_swab()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00067">req_capsule::rc_req</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01868">req_capsule_server_pack()</a>, <a class="el" href="layout_8c_source.html#l01816">req_capsule_set()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01235">RMF_OUT_UPDATE_BUF</a>, <a class="el" href="layout_8c_source.html#l01231">RMF_OUT_UPDATE_HEADER</a>, <a class="el" href="layout_8c_source.html#l01199">RMF_OUT_UPDATE_REPLY</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_bulk_write</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="layout_8c_source.html#l01436">RQF_OUT_UPDATE</a>, <a class="el" href="lustre__update_8h_source.html#l00384">thandle_exec_args::ta_handle</a>, <a class="el" href="tgt__handler_8c.html#a0ea09250d6017d58c387ed32c646f5e3">tgt_lfsck_in_notify</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="structtgt__handler.html#aff632ea648dcc0f8ac411cf7b1c613d3">tgt_handler::th_act</a>, <a class="el" href="lu__target_8h_source.html#l00317">tgt_handler::th_flags</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="lu__target_8h_source.html#l00203">tgt_session_info::tsi_env</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>, <a class="el" href="lu__target_8h_source.html#l00204">tgt_session_info::tsi_tgt</a>, <a class="el" href="tgt__internal_8h_source.html#l00089">tgt_thread_info::tti_lr</a>, <a class="el" href="tgt__internal_8h_source.html#l00067">tgt_thread_info::tti_mult_trans</a>, <a class="el" href="tgt__internal_8h_source.html#l00071">tgt_thread_info::tti_tea</a>, <a class="el" href="structtgt__thread__info.html#a771b937e260fdbcc316028d045f4eda8">tgt_thread_info::tti_u</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="structtgt__thread__info.html#a7326e6aefe467eb228fe53e954db568b">tgt_thread_info::update</a>, <a class="el" href="lustre__idl_8h_source.html#l03806">UPDATE_FL_SYNC</a>, <a class="el" href="lustre__idl_8h_source.html#l03919">UPDATE_REPLY_MAGIC</a>, and <a class="el" href="lustre__idl_8h_source.html#l03838">UPDATE_REQUEST_MAGIC</a>.</p>

<p>Referenced by <a class="el" href="svcgssd__proc_8c_source.html#l00474">handle_nullreq()</a>.</p>

</div>
</div>
<a class="anchor" id="a535d43f2edd4b2c11f81a20a59748aa1"></a><!-- doxytag: member="tgt_internal.h::out_index_delete_add_exec" ref="a535d43f2edd4b2c11f81a20a59748aa1" args="(const struct lu_env *env, struct dt_object *dt_obj, const struct dt_key *key, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_index_delete_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l01141">1141</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02615">dt_declare_delete()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="structtx__arg.html#a2861559104afcdbfd72299957a4b4a34">tx_arg::insert</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l01114">out_tx_index_delete_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01132">out_tx_index_delete_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="lustre__update_8h_source.html#l00384">thandle_exec_args::ta_handle</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, and <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>.</p>

</div>
</div>
<a class="anchor" id="ae2e3df3813f4e52fa7cc78470de78f1d"></a><!-- doxytag: member="tgt_internal.h::out_index_insert_add_exec" ref="ae2e3df3813f4e52fa7cc78470de78f1d" args="(const struct lu_env *env, struct dt_object *dt_obj, const struct dt_rec *rec, const struct dt_key *key, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_index_insert_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l01078">1078</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02481">dt_declare_insert()</a>, <a class="el" href="dt__object_8c_source.html#l00184">dt_try_as_dir()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="structtx__arg.html#a2861559104afcdbfd72299957a4b4a34">tx_arg::insert</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l01050">out_tx_index_insert_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01072">out_tx_index_insert_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, and <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>.</p>

</div>
</div>
<a class="anchor" id="a1d68d6a5d931a74b9d29bf811c0dba40"></a><!-- doxytag: member="tgt_internal.h::out_ref_add_add_exec" ref="a1d68d6a5d931a74b9d29bf811c0dba40" args="(const struct lu_env *env, struct dt_object *dt_obj, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_ref_add_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00932">932</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02266">dt_declare_ref_add()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00909">out_tx_ref_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00926">out_tx_ref_add_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, and <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="a3faa226d26e226a29821c8473939d14f"></a><!-- doxytag: member="tgt_internal.h::out_ref_del_add_exec" ref="a3faa226d26e226a29821c8473939d14f" args="(const struct lu_env *env, struct dt_object *dt_obj, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_ref_del_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00981">981</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02292">dt_declare_ref_del()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00957">out_tx_ref_del_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00975">out_tx_ref_del_undo()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, and <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="a14f1cb5f9757c08bced67647755c66e0"></a><!-- doxytag: member="tgt_internal.h::out_tx_create_exec" ref="a14f1cb5f9757c08bced67647755c66e0" args="(const struct lu_env *env, struct thandle *th, struct tx_arg *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_tx_create_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtx__arg.html">tx_arg</a> *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00530">530</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="structtx__arg.html#a76c887ae1c8f676beb8df45c85416b3f">tx_arg::create</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00141">D_OTHER</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02120">dt_create()</a>, <a class="el" href="tgt__internal_8h_source.html#l00118">dt_obd_name()</a>, <a class="el" href="dt__object_8h_source.html#l02175">dt_write_lock()</a>, <a class="el" href="dt__object_8h_source.html#l02194">dt_write_unlock()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="md__object_8h_source.html#l00567">MOR_TGT_CHILD</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="lustre__update_8h_source.html#l00219">object_update_result_insert()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, and <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>.</p>

<p>Referenced by <a class="el" href="out__lib_8c_source.html#l00582">out_create_add_exec()</a>, and <a class="el" href="out__handler_8c_source.html#l00791">out_trans_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="af7da7c9afd24f987cf7176c5994e0126"></a><!-- doxytag: member="tgt_internal.h::out_write_add_exec" ref="af7da7c9afd24f987cf7176c5994e0126" args="(const struct lu_env *env, struct dt_object *dt_obj, const struct lu_buf *buf, loff_t pos, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_write_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00704">704</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00675">out_tx_write_exec()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>, and <a class="el" href="structtx__arg.html#a7e6e20b060dddaf48eed1da63bb4cd81">tx_arg::write</a>.</p>

</div>
</div>
<a class="anchor" id="a909377c4f2f5dfb179ab1184f0bfa1a3"></a><!-- doxytag: member="tgt_internal.h::out_xattr_del_add_exec" ref="a909377c4f2f5dfb179ab1184f0bfa1a3" args="(const struct lu_env *env, struct dt_object *dt_obj, const char *name, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_xattr_del_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00858">858</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02514">dt_declare_xattr_del()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00830">out_tx_xattr_del_exec()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>, and <a class="el" href="structtx__arg.html#a1124c868b0cd9298c631cf987b73e69c">tx_arg::xattr_set</a>.</p>

</div>
</div>
<a class="anchor" id="a2d7beb9108eddc83573b09b6738b9384"></a><!-- doxytag: member="tgt_internal.h::out_xattr_set_add_exec" ref="a2d7beb9108eddc83573b09b6738b9384" args="(const struct lu_env *env, struct dt_object *dt_obj, const struct lu_buf *buf, const char *name, int flags, struct thandle_exec_args *ta, struct thandle *th, struct object_update_reply *reply, int index, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_xattr_set_add_exec </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00783">783</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02543">dt_declare_xattr_set()</a>, <a class="el" href="lustre__update_8h_source.html#l00349">tx_arg::index</a>, <a class="el" href="lustre__idl_8h_source.html#l03469">LE_SKIP_NLINK_DECLARE</a>, <a class="el" href="lustre__lfsck_8h_source.html#l00087">lfsck_pack_rfa()</a>, <a class="el" href="lustre__lfsck__user_8h_source.html#l00171">LFSCK_TYPE_NAMESPACE</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="lustre__update_8h_source.html#l00345">tx_arg::object</a>, <a class="el" href="out__lib_8c_source.html#l00730">out_tx_xattr_set_exec()</a>, <a class="el" href="lustre__update_8h_source.html#l00347">tx_arg::reply</a>, <a class="el" href="lustre__update_8h_source.html#l00384">thandle_exec_args::ta_handle</a>, <a class="el" href="tgt__handler_8c.html#a0ea09250d6017d58c387ed32c646f5e3">tgt_lfsck_in_notify</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00089">tgt_thread_info::tti_lr</a>, <a class="el" href="out__lib_8c_source.html#l00468">tx_add_exec()</a>, <a class="el" href="structtx__arg.html#a6da1d2063d78a3aa5027503fe581d919">tx_arg::u</a>, <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>, and <a class="el" href="structtx__arg.html#a1124c868b0cd9298c631cf987b73e69c">tx_arg::xattr_set</a>.</p>

</div>
</div>
<a class="anchor" id="a5b04c67a3a7fa1840c5d8ed0d19aba41"></a><!-- doxytag: member="tgt_internal.h::req_xid_is_last" ref="a5b04c67a3a7fa1840c5d8ed0d19aba41" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int req_xid_is_last </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00109">109</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00364">lsd_client_data::lcd_last_close_xid</a>, <a class="el" href="lustre__disk_8h_source.html#l00359">lsd_client_data::lcd_last_xid</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, and <a class="el" href="lustre__net_8h_source.html#l01036">ptlrpc_request::rq_xid</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00060">out_check_resent()</a>.</p>

</div>
</div>
<a class="anchor" id="aa345e2b1216b85fb0cfdb183553dc682"></a><!-- doxytag: member="tgt_internal.h::sub_thandle_trans_create" ref="aa345e2b1216b85fb0cfdb183553dc682" args="(const struct lu_env *env, struct top_thandle *top_th, struct sub_thandle *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sub_thandle_trans_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtop__thandle.html">top_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>top_th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsub__thandle.html">sub_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>st</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>. </p>
<p>Create transaction handle for <a class="el" href="structsub__thandle.html">sub_thandle</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>st</em>&nbsp;</td><td><a class="el" href="structsub__thandle.html">sub_thandle</a></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if creation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if creation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00567">567</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="lustre__update_8h_source.html#l00322">sub_thandle::st_dt</a>, <a class="el" href="lustre__update_8h_source.html#l00321">sub_thandle::st_sub_th</a>, <a class="el" href="update__trans_8c_source.html#l00545">sub_thandle_register_stop_cb()</a>, <a class="el" href="dt__object_8h_source.html#l01836">thandle::th_top</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_wait_submit</a>, <a class="el" href="lustre__update_8h_source.html#l00310">top_thandle::tt_multiple_thandle</a>, and <a class="el" href="lustre__update_8h_source.html#l00306">top_thandle::tt_super</a>.</p>

</div>
</div>
<a class="anchor" id="a6f4f8fa4a61a1414d1c06d82923daa08"></a><!-- doxytag: member="tgt_internal.h::tgt_cancel_slc_locks" ref="a6f4f8fa4a61a1414d1c06d82923daa08" args="(__u64 transno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tgt_cancel_slc_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>transno</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__main_8c_source.html#l00111">111</a> of file <a class="el" href="tgt__main_8c_source.html">tgt_main.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00909">l_slc_link</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00582">ldlm_lock2handle()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">ldlm_set_cbpending</a>, <a class="el" href="lnetctl_8c_source.html#l00969">list</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="nodemap__lproc_8c.html#a16b50f3e067967583e9d2bc2eeb7ff68">LIST_HEAD()</a>, <a class="el" href="list_8h_source.html#l00137">list_move()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="tgt__main_8c_source.html#l00041">uncommitted_slc_locks</a>, <a class="el" href="tgt__main_8c_source.html#l00040">uncommitted_slc_locks_guard</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="tgt__lastrcvd_8c_source.html#l00761">tgt_cb_last_committed()</a>.</p>

</div>
</div>
<a class="anchor" id="aef5902c344803dae3f192bf81060cc8a"></a><!-- doxytag: member="tgt_internal.h::tgt_handle_received_xid" ref="aef5902c344803dae3f192bf81060cc8a" args="(struct obd_export *exp, __u64 rcvd_xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_handle_received_xid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>rcvd_xid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01995">1995</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__disk_8h_source.html#l00383">lsd_reply_data::lrd_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00085">tg_export_data::ted_release_xid</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">tgt_release_reply_data()</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>.</p>

<p>Referenced by <a class="el" href="tgt__handler_8c_source.html#l00607">process_req_last_xid()</a>.</p>

</div>
</div>
<a class="anchor" id="a12b3a46bfd86349b6ffb61cd0d8c8847"></a><!-- doxytag: member="tgt_internal.h::tgt_handle_tag" ref="a12b3a46bfd86349b6ffb61cd0d8c8847" args="(struct obd_export *exp, __u16 tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_handle_tag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>tag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l02013">2013</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__export_8h_source.html#l00064">tg_export_data::ted_lcd_lock</a>, <a class="el" href="lustre__export_8h_source.html#l00086">tg_export_data::ted_release_tag</a>, <a class="el" href="lustre__export_8h_source.html#l00079">tg_export_data::ted_reply_list</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00329">tgt_release_reply_data()</a>, <a class="el" href="lu__target_8h_source.html#l00175">tg_reply_data::trd_list</a>, and <a class="el" href="lu__target_8h_source.html#l00183">tg_reply_data::trd_tag</a>.</p>

<p>Referenced by <a class="el" href="tgt__handler_8c_source.html#l00607">process_req_last_xid()</a>.</p>

</div>
</div>
<a class="anchor" id="a232ed291c8d95309a6a1791731b8e0ae"></a><!-- doxytag: member="tgt_internal.h::tgt_request_handle" ref="a232ed291c8d95309a6a1791731b8e0ae" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_request_handle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__handler_8c_source.html#l00653">653</a> of file <a class="el" href="tgt__handler_8c_source.html">tgt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__fail_8h_source.html#l00118">CFS_FAIL_CHECK_ORSET</a>, <a class="el" href="libcfs__fail_8h_source.html#l00066">CFS_FAIL_ONCE</a>, <a class="el" href="genops_8c_source.html#l01260">class_connected_export()</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="linux_2libcfs_8h_source.html#l00145">current_pid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00291">obd_export::exp_last_xid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lnet_2lnet_2nidstrings_8c_source.html#l01236">libcfs_id2str()</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lu__object_8c_source.html#l01889">lu_env_refill()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="lustre__idl_8h_source.html#l01047">lustre_msg</a>, <a class="el" href="pack__generic_8c_source.html#l00104">lustre_msg_check_version()</a>, <a class="el" href="pack__generic_8c_source.html#l01251">lustre_msg_get_jobid()</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="pack__generic_8c_source.html#l00958">lustre_msg_get_version()</a>, <a class="el" href="lu__target_8h_source.html#l00127">lu_target::lut_reply_fail_id</a>, <a class="el" href="lu__target_8h_source.html#l00128">lu_target::lut_request_fail_id</a>, <a class="el" href="packet-lustre_8c_source.html#l00206">MDS_CONNECT</a>, <a class="el" href="packet-lustre_8c_source.html#l00309">MGS_CONNECT</a>, <a class="el" href="multiop_8c_source.html#l00063">msg</a>, <a class="el" href="lustre__idl_8h_source.html#l01225">OBD_CONNECT_JOBSTATS</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00316">OBD_FAIL_OST_CONNECT_NET2</a>, <a class="el" href="obd__support_8h_source.html#l00486">OBD_FAIL_SEC_CTX_INIT_NET</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00685">obd_device::obd_recovery_data</a>, <a class="el" href="packet-lustre_8c_source.html#l00171">OST_CONNECT</a>, <a class="el" href="tgt__handler_8c_source.html#l00607">process_req_last_xid()</a>, <a class="el" href="niobuf_8c_source.html#l00649">ptlrpc_error()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l01792">req_capsule_fini()</a>, <a class="el" href="layout_8c_source.html#l01762">req_capsule_init()</a>, <a class="el" href="layout_8c_source.html#l01816">req_capsule_set()</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01108">ptlrpc_request::rq_peer</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>, <a class="el" href="layout_8c_source.html#l01601">RQF_CONNECT</a>, <a class="el" href="lustre__idl_8h_source.html#l03594">SEC_CTX_FINI</a>, <a class="el" href="lustre__idl_8h_source.html#l03592">SEC_CTX_INIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03593">SEC_CTX_INIT_CONT</a>, <a class="el" href="tgt__handler_8c_source.html#l00514">tgt_handle_recovery()</a>, <a class="el" href="tgt__handler_8c_source.html#l00371">tgt_handle_request0()</a>, <a class="el" href="tgt__handler_8c_source.html#l00570">tgt_handler_find_check()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="lu__target_8h_source.html#l00315">tgt_handler::th_opc</a>, <a class="el" href="lu__target_8h_source.html#l00319">tgt_handler::th_version</a>, <a class="el" href="obd_8h_source.html#l00576">target_recovery_data::trd_processing_task</a>, <a class="el" href="lu__target_8h_source.html#l00208">tgt_session_info::tsi_corpus</a>, <a class="el" href="lu__target_8h_source.html#l00203">tgt_session_info::tsi_env</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00227">tgt_session_info::tsi_jobid</a>, <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>, <a class="el" href="lu__target_8h_source.html#l00224">tgt_session_info::tsi_reply_fail_id</a>, <a class="el" href="lu__target_8h_source.html#l00204">tgt_session_info::tsi_tgt</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="ae37e9b2446f0e1978dddcf101571b39b"></a><!-- doxytag: member="tgt_internal.h::tgt_server_data_init" ref="ae37e9b2446f0e1978dddcf101571b39b" args="(const struct lu_env *env, struct lu_target *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_server_data_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Interop: evict all clients at first boot with 1.8 last_rcvd</p>
<p>set 2.0 flag to upgrade/downgrade between 1.8 and 2.0 </p>
</p>

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">1525</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l01319">class_disconnect_exports()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="dt__object_8h_source.html#l02225">dt_attr_get()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01502">server_compat_data::incinit</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01500">server_compat_data::incompat</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lustre__disk_8h_source.html#l00080">LDD_F_SV_TYPE_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__disk_8h_source.html#l00271">LR_CLIENT_SIZE</a>, <a class="el" href="lustre__disk_8h_source.html#l00270">LR_CLIENT_START</a>, <a class="el" href="lustre__disk_8h_source.html#l00269">LR_SERVER_SIZE</a>, <a class="el" href="lustre__disk_8h_source.html#l00339">lr_server_data::lsd_client_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00338">lr_server_data::lsd_client_start</a>, <a class="el" href="lustre__disk_8h_source.html#l00334">lr_server_data::lsd_feature_compat</a>, <a class="el" href="lustre__disk_8h_source.html#l00336">lr_server_data::lsd_feature_incompat</a>, <a class="el" href="lustre__disk_8h_source.html#l00335">lr_server_data::lsd_feature_rocompat</a>, <a class="el" href="lustre__disk_8h_source.html#l00331">lr_server_data::lsd_last_transno</a>, <a class="el" href="lustre__disk_8h_source.html#l00333">lr_server_data::lsd_mount_count</a>, <a class="el" href="lustre__disk_8h_source.html#l00344">lr_server_data::lsd_osd_index</a>, <a class="el" href="lustre__disk_8h_source.html#l00352">lr_server_data::lsd_padding</a>, <a class="el" href="lustre__disk_8h_source.html#l00337">lr_server_data::lsd_server_size</a>, <a class="el" href="lustre__disk_8h_source.html#l00340">lr_server_data::lsd_subdir_count</a>, <a class="el" href="lustre__disk_8h_source.html#l00330">lr_server_data::lsd_uuid</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00146">lu_target::lut_last_transno</a>, <a class="el" href="lu__target_8h_source.html#l00144">lu_target::lut_lsd</a>, <a class="el" href="lu__target_8h_source.html#l00135">lu_target::lut_no_reconstruct</a>, <a class="el" href="lu__target_8h_source.html#l00119">lu_target::lut_obd</a>, <a class="el" href="lu__target_8h_source.html#l00148">lu_target::lut_translock</a>, <a class="el" href="lustre__disk_8h_source.html#l00293">OBD_COMPAT_20</a>, <a class="el" href="lustre__disk_8h_source.html#l00309">OBD_INCOMPAT_FID</a>, <a class="el" href="obd_8h_source.html#l00648">obd_device::obd_last_committed</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_replayable</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="obd__target_8h_source.html#l00052">OBJ_SUBDIR_COUNT</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01501">server_compat_data::rocinit</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01499">server_compat_data::rocompat</a>, <a class="el" href="obd__mount_8c_source.html#l00790">server_name2index()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01369">tgt_clients_data_init()</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00547">tgt_server_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00637">tgt_truncate_last_rcvd()</a>, <a class="el" href="tgt__internal_8h_source.html#l00062">tgt_thread_info::tti_attr</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="afee3174ebf16e838162396614b05a6fd"></a><!-- doxytag: member="tgt_internal.h::tgt_th_info" ref="afee3174ebf16e838162396614b05a6fd" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structtgt__thread__info.html">tgt_thread_info</a>* tgt_th_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00095">95</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, and <a class="el" href="tgt__main_8c_source.html#l00362">tgt_thread_key</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l01474">distribute_txn_commit_batchid_init()</a>, <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, <a class="el" href="out__handler_8c_source.html#l00187">out_attr_get()</a>, <a class="el" href="out__handler_8c_source.html#l00151">out_attr_set()</a>, <a class="el" href="out__handler_8c_source.html#l00096">out_create()</a>, <a class="el" href="out__handler_8c_source.html#l00533">out_destroy()</a>, <a class="el" href="out__handler_8c_source.html#l00894">out_handle()</a>, <a class="el" href="out__handler_8c_source.html#l00508">out_index_delete()</a>, <a class="el" href="out__handler_8c_source.html#l00451">out_index_insert()</a>, <a class="el" href="out__handler_8c_source.html#l00290">out_index_lookup()</a>, <a class="el" href="out__handler_8c_source.html#l00601">out_read()</a>, <a class="el" href="out__handler_8c_source.html#l00418">out_ref_add()</a>, <a class="el" href="out__handler_8c_source.html#l00433">out_ref_del()</a>, <a class="el" href="out__lib_8c_source.html#l00730">out_tx_xattr_set_exec()</a>, <a class="el" href="out__handler_8c_source.html#l00560">out_write()</a>, <a class="el" href="out__handler_8c_source.html#l00392">out_xattr_del()</a>, <a class="el" href="out__handler_8c_source.html#l00235">out_xattr_get()</a>, <a class="el" href="out__handler_8c_source.html#l00344">out_xattr_set()</a>, <a class="el" href="out__lib_8c_source.html#l00783">out_xattr_set_add_exec()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00441">tgt_client_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00488">tgt_client_data_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00468">tgt_client_data_write()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01329">tgt_last_rcvd_update_echo()</a>, <a class="el" href="tgt__handler_8c_source.html#l01185">tgt_obd_idx_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01806">tgt_reply_data_init()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00275">tgt_reply_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00246">tgt_reply_data_write()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00169">tgt_reply_header_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00199">tgt_reply_header_write()</a>, <a class="el" href="tgt__handler_8c_source.html#l01112">tgt_send_buffer()</a>, <a class="el" href="tgt__handler_8c_source.html#l01141">tgt_sendpage()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01525">tgt_server_data_init()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00547">tgt_server_data_read()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00591">tgt_server_data_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00565">tgt_server_data_write()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01697">tgt_txn_start_cb()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01760">tgt_txn_stop_cb()</a>, <a class="el" href="tgt__handler_8c_source.html#l00134">tgt_validate_obdo()</a>, <a class="el" href="update__trans_8c_source.html#l00935">top_trans_stop()</a>, and <a class="el" href="update__recovery_8c_source.html#l01066">update_recovery_update_ses()</a>.</p>

</div>
</div>
<a class="anchor" id="a38d59da36521433cfc15f37967c2746e"></a><!-- doxytag: member="tgt_internal.h::tgt_txn_start_cb" ref="a38d59da36521433cfc15f37967c2746e" args="(const struct lu_env *env, struct thandle *th, void *cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_txn_start_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01697">1697</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l02087">dt_declare_record_write()</a>, <a class="el" href="dt__object_8c_source.html#l00521">dt_declare_version_set()</a>, <a class="el" href="dt__object_8h_source.html#l01934">dt_object_locate()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8h_source.html#l00845">lu_object_remote</a>, <a class="el" href="lu__target_8h_source.html#l00140">lu_target::lut_last_rcvd</a>, <a class="el" href="lu__target_8h_source.html#l00155">lu_target::lut_num_clients</a>, <a class="el" href="lu__target_8h_source.html#l00159">lu_target::lut_reply_data</a>, <a class="el" href="lu__target_8h_source.html#l00351">tgt_is_multimodrpcs_client()</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00214">tgt_session_info::tsi_vbr_obj</a>, <a class="el" href="tgt__internal_8h_source.html#l00059">tgt_thread_info::tti_buf</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00366">tti_buf_lcd()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l00359">tti_buf_lsd()</a>, and <a class="el" href="tgt__internal_8h_source.html#l00060">tgt_thread_info::tti_off</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a4422f06a2a87e28b67af5cf4d7443bac"></a><!-- doxytag: member="tgt_internal.h::tgt_txn_stop_cb" ref="a4422f06a2a87e28b67af5cf4d7443bac" args="(const struct lu_env *env, struct thandle *th, void *cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tgt_txn_stop_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__lastrcvd_8c_source.html#l01760">1760</a> of file <a class="el" href="tgt__lastrcvd_8c_source.html">tgt_lastrcvd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lu__object_8h_source.html#l00845">lu_object_remote</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01130">tgt_last_rcvd_update()</a>, <a class="el" href="tgt__lastrcvd_8c_source.html#l01329">tgt_last_rcvd_update_echo()</a>, <a class="el" href="lu__target_8h_source.html#l00235">tgt_ses_info()</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, <a class="el" href="lu__target_8h_source.html#l00219">tgt_session_info::tsi_opdata</a>, <a class="el" href="lu__target_8h_source.html#l00214">tgt_session_info::tsi_vbr_obj</a>, <a class="el" href="lu__target_8h_source.html#l00230">tgt_session_info::tsi_xid</a>, <a class="el" href="tgt__internal_8h_source.html#l00067">tgt_thread_info::tti_has_trans</a>, <a class="el" href="tgt__internal_8h_source.html#l00067">tgt_thread_info::tti_mult_trans</a>, <a class="el" href="tgt__internal_8h_source.html#l00066">tgt_thread_info::tti_transno</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00147">tgt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa54680b77690cc5b396f50765afcbf88"></a><!-- doxytag: member="tgt_internal.h::top_trans_create_tmt" ref="aa54680b77690cc5b396f50765afcbf88" args="(const struct lu_env *env, struct top_thandle *top_th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int top_trans_create_tmt </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtop__thandle.html">top_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>top_th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> for <a class="el" href="structtop__thandle.html">top_thandle</a>. </p>
<p>Create top_mutilple_thandle to manage the mutiple node transaction for <a class="el" href="structtop__thandle.html">top_thandle</a>, and it also needs to add master sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> to the sub trans list now.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>top_th</em>&nbsp;</td><td>the top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if creation succeeds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if creation fails </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l01112">1112</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__update_8h_source.html#l00290">top_multiple_thandle::tmt_commit_list</a>, <a class="el" href="lustre__update_8h_source.html#l00297">top_multiple_thandle::tmt_magic</a>, <a class="el" href="lustre__update_8h_source.html#l00285">top_multiple_thandle::tmt_refcount</a>, <a class="el" href="lustre__update_8h_source.html#l00294">top_multiple_thandle::tmt_stop_waitq</a>, <a class="el" href="lustre__update_8h_source.html#l00288">top_multiple_thandle::tmt_sub_lock</a>, <a class="el" href="lustre__update_8h_source.html#l00287">top_multiple_thandle::tmt_sub_thandle_list</a>, <a class="el" href="lustre__update_8h_source.html#l00282">TOP_THANDLE_MAGIC</a>, and <a class="el" href="lustre__update_8h_source.html#l00310">top_thandle::tt_multiple_thandle</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, and <a class="el" href="update__trans_8c_source.html#l01164">thandle_get_sub_by_dt()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a5bc8081cdd143a21678e9167111189"></a><!-- doxytag: member="tgt_internal.h::tx_add_exec" ref="a5a5bc8081cdd143a21678e9167111189" args="(struct thandle_exec_args *ta, tx_exec_func_t func, tx_exec_func_t undo, const char *file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtx__arg.html">tx_arg</a>* tx_add_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthandle__exec__args.html">thandle_exec_args</a> *&nbsp;</td>
          <td class="paramname"> <em>ta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lustre__update_8h.html#af28c3f8d6263730d6aa85705b1363fae">tx_exec_func_t</a>&nbsp;</td>
          <td class="paramname"> <em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lustre__update_8h.html#af28c3f8d6263730d6aa85705b1363fae">tx_exec_func_t</a>&nbsp;</td>
          <td class="paramname"> <em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00468">468</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__update_8h_source.html#l00343">tx_arg::exec_fn</a>, <a class="el" href="lustre__update_8h_source.html#l00346">tx_arg::file</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__update_8h_source.html#l00348">tx_arg::line</a>, <a class="el" href="lustre__update_8h_source.html#l00386">thandle_exec_args::ta_alloc_args</a>, <a class="el" href="lustre__update_8h_source.html#l00385">thandle_exec_args::ta_argno</a>, <a class="el" href="lustre__update_8h_source.html#l00387">thandle_exec_args::ta_args</a>, <a class="el" href="out__lib_8c_source.html#l00467">TX_ALLOC_STEP</a>, <a class="el" href="out__lib_8c_source.html#l00425">tx_extend_args()</a>, and <a class="el" href="lustre__update_8h_source.html#l00344">tx_arg::undo_fn</a>.</p>

<p>Referenced by <a class="el" href="out__lib_8c_source.html#l00649">out_attr_set_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00582">out_create_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01201">out_destroy_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01141">out_index_delete_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01078">out_index_insert_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00932">out_ref_add_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00981">out_ref_del_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00704">out_write_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00858">out_xattr_del_add_exec()</a>, and <a class="el" href="out__lib_8c_source.html#l00783">out_xattr_set_add_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="a845853d38061c7c808963fb15039deae"></a><!-- doxytag: member="tgt_internal.h::update_env_info" ref="a845853d38061c7c808963fb15039deae" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structupdate__thread__info.html">update_thread_info</a>* update_env_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__internal_8h_source.html#l00271">271</a> of file <a class="el" href="tgt__internal_8h_source.html">tgt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, and <a class="el" href="tgt__internal_8h.html#aa001baf045dcb5ffc759648eceddbccb">update_thread_key</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, <a class="el" href="update__trans_8c_source.html#l00750">prepare_multiple_node_trans()</a>, <a class="el" href="update__records_8c_source.html#l00410">update_records_attr_set_pack()</a>, <a class="el" href="update__records_8c_source.html#l00327">update_records_create_pack()</a>, <a class="el" href="update__recovery_8c_source.html#l00825">update_recovery_attr_set()</a>, <a class="el" href="update__recovery_8c_source.html#l00737">update_recovery_create()</a>, <a class="el" href="update__recovery_8c_source.html#l00962">update_recovery_index_delete()</a>, <a class="el" href="update__recovery_8c_source.html#l00908">update_recovery_index_insert()</a>, <a class="el" href="update__recovery_8c_source.html#l00991">update_recovery_write()</a>, <a class="el" href="update__recovery_8c_source.html#l01028">update_recovery_xattr_del()</a>, and <a class="el" href="update__recovery_8c_source.html#l00861">update_recovery_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a50e52cb7df7ffa36c19228b8fd137c28"></a><!-- doxytag: member="tgt_internal.h::update_info_fini" ref="a50e52cb7df7ffa36c19228b8fd137c28" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_info_fini </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="update__records_8c_source.html#l01232">1232</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lu__object_8c_source.html#l01455">lu_context_key_degister()</a>, and <a class="el" href="tgt__internal_8h.html#aa001baf045dcb5ffc759648eceddbccb">update_thread_key</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00413">tgt_mod_exit()</a>.</p>

</div>
</div>
<a class="anchor" id="abb3102b38b590d56d0c531397be53292"></a><!-- doxytag: member="tgt_internal.h::update_info_init" ref="abb3102b38b590d56d0c531397be53292" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_info_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="update__records_8c_source.html#l01226">1226</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lu__object_8c_source.html#l01401">lu_context_key_register()</a>, and <a class="el" href="tgt__internal_8h.html#aa001baf045dcb5ffc759648eceddbccb">update_thread_key</a>.</p>

<p>Referenced by <a class="el" href="tgt__main_8c_source.html#l00393">tgt_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af41e2b72019c67f5f929c6a944d0801e"></a><!-- doxytag: member="tgt_internal.h::update_op_str" ref="af41e2b72019c67f5f929c6a944d0801e" args="(__u16 opcode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* update_op_str </td>
          <td>(</td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>opcode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00043">43</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l03790">OUT_ATTR_GET</a>, <a class="el" href="lustre__idl_8h_source.html#l03789">OUT_ATTR_SET</a>, <a class="el" href="lustre__idl_8h_source.html#l03785">OUT_CREATE</a>, <a class="el" href="lustre__idl_8h_source.html#l03786">OUT_DESTROY</a>, <a class="el" href="lustre__idl_8h_source.html#l03795">OUT_INDEX_DELETE</a>, <a class="el" href="lustre__idl_8h_source.html#l03794">OUT_INDEX_INSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l03793">OUT_INDEX_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l03800">OUT_NOOP</a>, <a class="el" href="lustre__idl_8h_source.html#l03798">OUT_PUNCH</a>, <a class="el" href="lustre__idl_8h_source.html#l03799">OUT_READ</a>, <a class="el" href="lustre__idl_8h_source.html#l03787">OUT_REF_ADD</a>, <a class="el" href="lustre__idl_8h_source.html#l03788">OUT_REF_DEL</a>, <a class="el" href="lustre__idl_8h_source.html#l03784">OUT_START</a>, <a class="el" href="lustre__idl_8h_source.html#l03796">OUT_WRITE</a>, <a class="el" href="lustre__idl_8h_source.html#l03797">OUT_XATTR_DEL</a>, <a class="el" href="lustre__idl_8h_source.html#l03792">OUT_XATTR_GET</a>, and <a class="el" href="lustre__idl_8h_source.html#l03791">OUT_XATTR_SET</a>.</p>

</div>
</div>
<a class="anchor" id="af5e8c053444ba3fed9d4f22db1e0e643"></a><!-- doxytag: member="tgt_internal.h::update_records_dump" ref="af5e8c053444ba3fed9d4f22db1e0e643" args="(const struct update_records *records, unsigned int mask, bool dump_updates)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_records_dump </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__records.html">update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>dump_updates</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump update record. </p>
<p>Dump all of updates in the <a class="el" href="structupdate__records.html">update_records</a>, mostly for debugging purpose.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>records</em>&nbsp;</td><td>update records to be dumpped </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mask</em>&nbsp;</td><td>debug level mask </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dump_params</em>&nbsp;</td><td>if dump all of updates the updates. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00063">63</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lustre__idl_8h_source.html#l03812">object_update_param::oup_len</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__idl_8h_source.html#l04002">update_ops::uops_op</a>, <a class="el" href="lustre__update_8h_source.html#l00105">update_op_next_op()</a>, <a class="el" href="out__lib_8c_source.html#l00043">update_op_str()</a>, <a class="el" href="lustre__update_8h_source.html#l00064">update_params_get_param()</a>, <a class="el" href="lustre__update_8h_source.html#l00126">update_records_get_params()</a>, <a class="el" href="lustre__idl_8h_source.html#l04024">update_records::ur_batchid</a>, <a class="el" href="lustre__idl_8h_source.html#l04025">update_records::ur_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l04023">update_records::ur_master_transno</a>, <a class="el" href="lustre__idl_8h_source.html#l04031">update_records::ur_ops</a>, <a class="el" href="lustre__idl_8h_source.html#l04030">update_records::ur_param_count</a>, and <a class="el" href="lustre__idl_8h_source.html#l04029">update_records::ur_update_count</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, <a class="el" href="update__recovery_8c_source.html#l00307">dtrq_append_updates()</a>, <a class="el" href="update__recovery_8c_source.html#l00480">dtrq_list_dump()</a>, <a class="el" href="update__trans_8c_source.html#l00343">prepare_writing_updates()</a>, and <a class="el" href="update__trans_8c_source.html#l00167">sub_updates_write()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a0ea09250d6017d58c387ed32c646f5e3"></a><!-- doxytag: member="tgt_internal.h::tgt_lfsck_in_notify" ref="a0ea09250d6017d58c387ed32c646f5e3" args=")(const struct lu_env *env, struct dt_device *key, struct lfsck_request *lr, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* <a class="el" href="tgt__internal_8h.html#a0ea09250d6017d58c387ed32c646f5e3">tgt_lfsck_in_notify</a>)(const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *key, struct <a class="el" href="structlfsck__request.html">lfsck_request</a> *lr, struct <a class="el" href="structthandle.html">thandle</a> *th)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00894">out_handle()</a>, <a class="el" href="out__lib_8c_source.html#l00730">out_tx_xattr_set_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00783">out_xattr_set_add_exec()</a>, <a class="el" href="tgt__handler_8c_source.html#l01585">tgt_handle_lfsck_notify()</a>, and <a class="el" href="tgt__handler_8c_source.html#l01559">tgt_register_lfsck_in_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="ac116aa97f11bb8a64eababe44d507097"></a><!-- doxytag: member="tgt_internal.h::tgt_page_to_corrupt" ref="ac116aa97f11bb8a64eababe44d507097" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct page* <a class="el" href="tgt__main_8c.html#ac116aa97f11bb8a64eababe44d507097">tgt_page_to_corrupt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__main_8c_source.html#l00391">391</a> of file <a class="el" href="tgt__main_8c_source.html">tgt_main.c</a>.</p>

<p>Referenced by <a class="el" href="tgt__handler_8c_source.html#l01757">tgt_checksum_bulk()</a>, <a class="el" href="tgt__main_8c_source.html#l00413">tgt_mod_exit()</a>, and <a class="el" href="tgt__main_8c_source.html#l00393">tgt_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae029171d369d93266ba4c388e7676e17"></a><!-- doxytag: member="tgt_internal.h::tgt_thread_key" ref="ae029171d369d93266ba4c388e7676e17" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__context__key.html">lu_context_key</a> <a class="el" href="tgt__main_8c.html#ae029171d369d93266ba4c388e7676e17">tgt_thread_key</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tgt__main_8c_source.html#l00362">362</a> of file <a class="el" href="tgt__main_8c_source.html">tgt_main.c</a>.</p>

<p>Referenced by <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>.</p>

</div>
</div>
<a class="anchor" id="aa001baf045dcb5ffc759648eceddbccb"></a><!-- doxytag: member="tgt_internal.h::update_thread_key" ref="aa001baf045dcb5ffc759648eceddbccb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__context__key.html">lu_context_key</a> <a class="el" href="tgt__internal_8h.html#aa001baf045dcb5ffc759648eceddbccb">update_thread_key</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="tgt__internal_8h_source.html#l00271">update_env_info()</a>, <a class="el" href="update__records_8c_source.html#l01232">update_info_fini()</a>, and <a class="el" href="update__records_8c_source.html#l01226">update_info_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
