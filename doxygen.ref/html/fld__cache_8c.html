<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/fld/fld_cache.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/fld/fld_cache.c File Reference</h1><code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/math64.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fld_8h_source.html">lustre_fld.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="fld__internal_8h_source.html">fld_internal.h</a>&quot;</code><br/>

<p><a href="fld__cache_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_FLD</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#adc5a9c9eb4b78c617cdfc3f4236bf469">fld_cache_init</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int cache_size, int cache_threshold)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">create fld cache.  <a href="#adc5a9c9eb4b78c617cdfc3f4236bf469"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a4bc6c8bbfe572f83c118908fadac8195">fld_cache_fini</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">destroy fld cache.  <a href="#a4bc6c8bbfe572f83c118908fadac8195"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ad167fda831fefd9cc65cab04cbb12995">fld_cache_entry_delete</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">delete given node from list.  <a href="#ad167fda831fefd9cc65cab04cbb12995"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a434d61fb1a06b7692b6bab43f5f1efc0">fld_fix_new_list</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">fix list by checking new entry with NEXT entry in order.  <a href="#a434d61fb1a06b7692b6bab43f5f1efc0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ad7db80feef3dce872ad880a7b15dcf40">fld_cache_entry_add</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *f_new, struct <a class="el" href="structlist__head.html">list_head</a> *pos)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add node to fld cache  <a href="#ad7db80feef3dce872ad880a7b15dcf40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a05c95e3301b4831a316d7995daf22eac">fld_cache_shrink</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if cache needs to be shrunk.  <a href="#a05c95e3301b4831a316d7995daf22eac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a57b4fb96cc87ef7181a8a7e5b0862613">fld_cache_flush</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">kill all fld cache entries.  <a href="#a57b4fb96cc87ef7181a8a7e5b0862613"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a71774129fc3bb8046a3a501632dab779">fld_cache_punch_hole</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *f_curr, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *f_new)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">punch hole in existing range.  <a href="#a71774129fc3bb8046a3a501632dab779"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a51f8f036c55a2643c51fb377821a285c">fld_cache_overlap_handle</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *f_curr, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *f_new)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">handle range overlap in fld cache.  <a href="#a51f8f036c55a2643c51fb377821a285c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a334e5a5d9487b8e8ab3976faaa546906">fld_cache_entry_create</a> (const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#af026ca18499ba4810c876a711ceb9a26">fld_cache_insert_nolock</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *f_new)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert FLD entry in FLD cache.  <a href="#af026ca18499ba4810c876a711ceb9a26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ab6a8b6228edc5f0b1e25a94da6d430da">fld_cache_insert</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ad5351077564d8a14ca9cbcf86d1a1239">fld_cache_delete_nolock</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ac01c2baf76470a0c9bffc189369f403e">fld_cache_delete</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete FLD entry in FLD cache.  <a href="#ac01c2baf76470a0c9bffc189369f403e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ac0c51e98f85b5ebfbd8f1cc1441620cc">fld_cache_entry_lookup_nolock</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#a917422f95a5fc54fc64cdc642dfcedfc">fld_cache_entry_lookup</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lookup <em>seq</em> sequence for range in fld cache.  <a href="#a917422f95a5fc54fc64cdc642dfcedfc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fld__cache_8c.html#ae75341a14d40893aac39981e55f785eb">fld_cache_lookup</a> (struct <a class="el" href="structfld__cache.html">fld_cache</a> *cache, const u64 seq, struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lookup <em>seq</em> sequence for range in fld cache.  <a href="#ae75341a14d40893aac39981e55f785eb"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="fld_cache.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_FLD</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00044">44</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac01c2baf76470a0c9bffc189369f403e"></a><!-- doxytag: member="fld_cache.c::fld_cache_delete" ref="ac01c2baf76470a0c9bffc189369f403e" args="(struct fld_cache *cache, const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_cache_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete FLD entry in FLD cache. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00479">479</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00096">fld_cache::fci_lock</a>, and <a class="el" href="fld__cache_8c_source.html#l00456">fld_cache_delete_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="ad5351077564d8a14ca9cbcf86d1a1239"></a><!-- doxytag: member="fld_cache.c::fld_cache_delete_nolock" ref="ad5351077564d8a14ca9cbcf86d1a1239" args="(struct fld_cache *cache, const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_cache_delete_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00456">456</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__internal_8h_source.html#l00116">fld_cache::fci_entries_head</a>, <a class="el" href="fld__cache_8c_source.html#l00121">fld_cache_entry_delete()</a>, <a class="el" href="writemany_8c_source.html#l00074">head</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, and <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00479">fld_cache_delete()</a>, and <a class="el" href="fld__index_8c_source.html#l00160">fld_index_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7db80feef3dce872ad880a7b15dcf40"></a><!-- doxytag: member="fld_cache.c::fld_cache_entry_add" ref="ad7db80feef3dce872ad880a7b15dcf40" args="(struct fld_cache *cache, struct fld_cache_entry *f_new, struct list_head *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void fld_cache_entry_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>f_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add node to fld cache </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00200">200</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00085">fld_cache_entry::fce_list</a>, <a class="el" href="fld__internal_8h_source.html#l00084">fld_cache_entry::fce_lru</a>, <a class="el" href="fld__internal_8h_source.html#l00108">fld_cache::fci_cache_count</a>, <a class="el" href="fld__internal_8h_source.html#l00112">fld_cache::fci_lru</a>, <a class="el" href="fld__cache_8c_source.html#l00133">fld_fix_new_list()</a>, and <a class="el" href="list_8h_source.html#l00076">list_add()</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00388">fld_cache_insert_nolock()</a>, <a class="el" href="fld__cache_8c_source.html#l00306">fld_cache_overlap_handle()</a>, and <a class="el" href="fld__cache_8c_source.html#l00264">fld_cache_punch_hole()</a>.</p>

</div>
</div>
<a class="anchor" id="a334e5a5d9487b8e8ab3976faaa546906"></a><!-- doxytag: member="fld_cache.c::fld_cache_entry_create" ref="a334e5a5d9487b8e8ab3976faaa546906" args="(const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a>* fld_cache_entry_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00368">368</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="seq__range_8h_source.html#l00146">lu_seq_range_is_sane()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00437">fld_cache_insert()</a>, and <a class="el" href="fld__index_8c_source.html#l00160">fld_index_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ad167fda831fefd9cc65cab04cbb12995"></a><!-- doxytag: member="fld_cache.c::fld_cache_entry_delete" ref="ad167fda831fefd9cc65cab04cbb12995" args="(struct fld_cache *cache, struct fld_cache_entry *node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_cache_entry_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>node</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>delete given node from list. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00121">121</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00085">fld_cache_entry::fce_list</a>, <a class="el" href="fld__internal_8h_source.html#l00084">fld_cache_entry::fce_lru</a>, <a class="el" href="fld__internal_8h_source.html#l00108">fld_cache::fci_cache_count</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00456">fld_cache_delete_nolock()</a>, <a class="el" href="fld__cache_8c_source.html#l00215">fld_cache_shrink()</a>, and <a class="el" href="fld__cache_8c_source.html#l00133">fld_fix_new_list()</a>.</p>

</div>
</div>
<a class="anchor" id="a917422f95a5fc54fc64cdc642dfcedfc"></a><!-- doxytag: member="fld_cache.c::fld_cache_entry_lookup" ref="a917422f95a5fc54fc64cdc642dfcedfc" args="(struct fld_cache *cache, const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a>* fld_cache_entry_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lookup <em>seq</em> sequence for range in fld cache. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00512">512</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__internal_8h_source.html#l00096">fld_cache::fci_lock</a>, <a class="el" href="fld__cache_8c_source.html#l00488">fld_cache_entry_lookup_nolock()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="ac0c51e98f85b5ebfbd8f1cc1441620cc"></a><!-- doxytag: member="fld_cache.c::fld_cache_entry_lookup_nolock" ref="ac0c51e98f85b5ebfbd8f1cc1441620cc" args="(struct fld_cache *cache, const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a>* fld_cache_entry_lookup_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00488">488</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__internal_8h_source.html#l00116">fld_cache::fci_entries_head</a>, <a class="el" href="writemany_8c_source.html#l00074">head</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00512">fld_cache_entry_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bc6c8bbfe572f83c118908fadac8195"></a><!-- doxytag: member="fld_cache.c::fld_cache_fini" ref="a4bc6c8bbfe572f83c118908fadac8195" args="(struct fld_cache *cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_cache_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>destroy fld cache. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00093">93</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__internal_8h_source.html#l00124">fld_cache::fci_name</a>, <a class="el" href="fld__internal_8h_source.html#l00120">fld_cache::fci_stat</a>, <a class="el" href="fld__cache_8c_source.html#l00247">fld_cache_flush()</a>, <a class="el" href="fld__internal_8h_source.html#l00069">fld_stats::fst_cache</a>, <a class="el" href="fld__internal_8h_source.html#l00068">fld_stats::fst_count</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="mdt__lproc_8c_source.html#l00083">pct</a>.</p>

<p>Referenced by <a class="el" href="fld__request_8c_source.html#l00333">fld_client_fini()</a>, <a class="el" href="fld__handler_8c_source.html#l00487">fld_server_fini()</a>, and <a class="el" href="fld__handler_8c_source.html#l00443">fld_server_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a57b4fb96cc87ef7181a8a7e5b0862613"></a><!-- doxytag: member="fld_cache.c::fld_cache_flush" ref="a57b4fb96cc87ef7181a8a7e5b0862613" args="(struct fld_cache *cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fld_cache_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>kill all fld cache entries. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00247">247</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__internal_8h_source.html#l00104">fld_cache::fci_cache_size</a>, <a class="el" href="fld__internal_8h_source.html#l00096">fld_cache::fci_lock</a>, and <a class="el" href="fld__cache_8c_source.html#l00215">fld_cache_shrink()</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00093">fld_cache_fini()</a>, and <a class="el" href="fld__request_8c_source.html#l00532">fld_client_flush()</a>.</p>

</div>
</div>
<a class="anchor" id="adc5a9c9eb4b78c617cdfc3f4236bf469"></a><!-- doxytag: member="fld_cache.c::fld_cache_init" ref="adc5a9c9eb4b78c617cdfc3f4236bf469" args="(const char *name, int cache_size, int cache_threshold)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfld__cache.html">fld_cache</a>* fld_cache_init </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cache_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cache_threshold</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>create fld cache. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00056">56</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__internal_8h_source.html#l00108">fld_cache::fci_cache_count</a>, <a class="el" href="fld__internal_8h_source.html#l00104">fld_cache::fci_cache_size</a>, <a class="el" href="fld__internal_8h_source.html#l00116">fld_cache::fci_entries_head</a>, <a class="el" href="fld__internal_8h_source.html#l00096">fld_cache::fci_lock</a>, <a class="el" href="fld__internal_8h_source.html#l00112">fld_cache::fci_lru</a>, <a class="el" href="fld__internal_8h_source.html#l00124">fld_cache::fci_name</a>, <a class="el" href="fld__internal_8h_source.html#l00120">fld_cache::fci_stat</a>, <a class="el" href="fld__internal_8h_source.html#l00100">fld_cache::fci_threshold</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="fld__request_8c_source.html#l00282">fld_client_init()</a>, and <a class="el" href="fld__handler_8c_source.html#l00443">fld_server_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6a8b6228edc5f0b1e25a94da6d430da"></a><!-- doxytag: member="fld_cache.c::fld_cache_insert" ref="ab6a8b6228edc5f0b1e25a94da6d430da" args="(struct fld_cache *cache, const struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_cache_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00437">437</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="fld__internal_8h_source.html#l00096">fld_cache::fci_lock</a>, <a class="el" href="fld__cache_8c_source.html#l00368">fld_cache_entry_create()</a>, <a class="el" href="fld__cache_8c_source.html#l00388">fld_cache_insert_nolock()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__request_8c_source.html#l00465">fld_client_lookup()</a>, <a class="el" href="fld__index_8c_source.html#l00326">fld_index_init()</a>, and <a class="el" href="fld__handler_8c_source.html#l00241">fld_server_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="af026ca18499ba4810c876a711ceb9a26"></a><!-- doxytag: member="fld_cache.c::fld_cache_insert_nolock" ref="af026ca18499ba4810c876a711ceb9a26" args="(struct fld_cache *cache, struct fld_cache_entry *f_new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_cache_insert_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>f_new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert FLD entry in FLD cache. </p>
<p>This function handles all cases of merging and breaking up of ranges. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00388">388</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__internal_8h_source.html#l00085">fld_cache_entry::fce_list</a>, <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__internal_8h_source.html#l00116">fld_cache::fci_entries_head</a>, <a class="el" href="fld__internal_8h_source.html#l00125">fld_cache::fci_no_shrink</a>, <a class="el" href="fld__cache_8c_source.html#l00200">fld_cache_entry_add()</a>, <a class="el" href="fld__cache_8c_source.html#l00306">fld_cache_overlap_handle()</a>, <a class="el" href="fld__cache_8c_source.html#l00215">fld_cache_shrink()</a>, <a class="el" href="writemany_8c_source.html#l00074">head</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, <a class="el" href="list_8h_source.html#l00043">list_head::prev</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00437">fld_cache_insert()</a>, and <a class="el" href="fld__index_8c_source.html#l00160">fld_index_create()</a>.</p>

</div>
</div>
<a class="anchor" id="ae75341a14d40893aac39981e55f785eb"></a><!-- doxytag: member="fld_cache.c::fld_cache_lookup" ref="ae75341a14d40893aac39981e55f785eb" args="(struct fld_cache *cache, const u64 seq, struct lu_seq_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fld_cache_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u64&nbsp;</td>
          <td class="paramname"> <em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__seq__range.html">lu_seq_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lookup <em>seq</em> sequence for range in fld cache. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00528">528</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__internal_8h_source.html#l00116">fld_cache::fci_entries_head</a>, <a class="el" href="fld__internal_8h_source.html#l00096">fld_cache::fci_lock</a>, <a class="el" href="fld__internal_8h_source.html#l00120">fld_cache::fci_stat</a>, <a class="el" href="fld__internal_8h_source.html#l00069">fld_stats::fst_cache</a>, <a class="el" href="fld__internal_8h_source.html#l00068">fld_stats::fst_count</a>, <a class="el" href="writemany_8c_source.html#l00074">head</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="seq__range_8h_source.html#l00136">lu_seq_range_within()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__handler_8c_source.html#l00371">fid_is_local()</a>, <a class="el" href="fld__request_8c_source.html#l00465">fld_client_lookup()</a>, <a class="el" href="fld__index_8c_source.html#l00233">fld_index_lookup()</a>, and <a class="el" href="fld__handler_8c_source.html#l00205">fld_local_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="a51f8f036c55a2643c51fb377821a285c"></a><!-- doxytag: member="fld_cache.c::fld_cache_overlap_handle" ref="a51f8f036c55a2643c51fb377821a285c" args="(struct fld_cache *cache, struct fld_cache_entry *f_curr, struct fld_cache_entry *f_new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void fld_cache_overlap_handle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>f_curr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>f_new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle range overlap in fld cache. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00306">306</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="fld__internal_8h_source.html#l00085">fld_cache_entry::fce_list</a>, <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__cache_8c_source.html#l00200">fld_cache_entry_add()</a>, <a class="el" href="fld__cache_8c_source.html#l00264">fld_cache_punch_hole()</a>, <a class="el" href="fld__cache_8c_source.html#l00133">fld_fix_new_list()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>, and <a class="el" href="list_8h_source.html#l00043">list_head::prev</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00388">fld_cache_insert_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="a71774129fc3bb8046a3a501632dab779"></a><!-- doxytag: member="fld_cache.c::fld_cache_punch_hole" ref="a71774129fc3bb8046a3a501632dab779" args="(struct fld_cache *cache, struct fld_cache_entry *f_curr, struct fld_cache_entry *f_new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void fld_cache_punch_hole </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>f_curr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structfld__cache__entry.html">fld_cache_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>f_new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>punch hole in existing range. </p>
<p>divide this range and add new entry accordingly. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00264">264</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__internal_8h_source.html#l00085">fld_cache_entry::fce_list</a>, <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__cache_8c_source.html#l00200">fld_cache_entry_add()</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="obd__support_8h_source.html#l00705">OBD_ALLOC_GFP</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00306">fld_cache_overlap_handle()</a>.</p>

</div>
</div>
<a class="anchor" id="a05c95e3301b4831a316d7995daf22eac"></a><!-- doxytag: member="fld_cache.c::fld_cache_shrink" ref="a05c95e3301b4831a316d7995daf22eac" args="(struct fld_cache *cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int fld_cache_shrink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if cache needs to be shrunk. </p>
<p>If so - do it. Remove one entry in list and so on until cache is shrunk enough. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00215">215</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__internal_8h_source.html#l00108">fld_cache::fci_cache_count</a>, <a class="el" href="fld__internal_8h_source.html#l00104">fld_cache::fci_cache_size</a>, <a class="el" href="fld__internal_8h_source.html#l00112">fld_cache::fci_lru</a>, <a class="el" href="fld__internal_8h_source.html#l00124">fld_cache::fci_name</a>, <a class="el" href="fld__internal_8h_source.html#l00100">fld_cache::fci_threshold</a>, <a class="el" href="fld__cache_8c_source.html#l00121">fld_cache_entry_delete()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00043">list_head::prev</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00247">fld_cache_flush()</a>, and <a class="el" href="fld__cache_8c_source.html#l00388">fld_cache_insert_nolock()</a>.</p>

</div>
</div>
<a class="anchor" id="a434d61fb1a06b7692b6bab43f5f1efc0"></a><!-- doxytag: member="fld_cache.c::fld_fix_new_list" ref="a434d61fb1a06b7692b6bab43f5f1efc0" args="(struct fld_cache *cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void fld_fix_new_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfld__cache.html">fld_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>fix list by checking new entry with NEXT entry in order. </p>

<p>Definition at line <a class="el" href="fld__cache_8c_source.html#l00133">133</a> of file <a class="el" href="fld__cache_8c_source.html">fld_cache.c</a>.</p>

<p>References <a class="el" href="seq__range_8h_source.html#l00184">DRANGE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="fld__internal_8h_source.html#l00085">fld_cache_entry::fce_list</a>, <a class="el" href="fld__internal_8h_source.html#l00088">fld_cache_entry::fce_range</a>, <a class="el" href="fld__internal_8h_source.html#l00116">fld_cache::fci_entries_head</a>, <a class="el" href="fld__cache_8c_source.html#l00121">fld_cache_entry_delete()</a>, <a class="el" href="writemany_8c_source.html#l00074">head</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__idl_8h_source.html#l00155">lu_seq_range::lsr_end</a>, <a class="el" href="lustre__idl_8h_source.html#l00157">lu_seq_range::lsr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00156">lu_seq_range::lsr_index</a>, <a class="el" href="lustre__idl_8h_source.html#l00154">lu_seq_range::lsr_start</a>, <a class="el" href="seq__range_8h_source.html#l00146">lu_seq_range_is_sane()</a>, <a class="el" href="lnet_2utils_2debug_8c_source.html#l00068">max</a>, and <a class="el" href="seq__range_8h_source.html#l00186">PRANGE</a>.</p>

<p>Referenced by <a class="el" href="fld__cache_8c_source.html#l00200">fld_cache_entry_add()</a>, and <a class="el" href="fld__cache_8c_source.html#l00306">fld_cache_overlap_handle()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:46 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
