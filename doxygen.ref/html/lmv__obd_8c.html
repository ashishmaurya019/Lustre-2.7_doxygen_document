<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lmv/lmv_obd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lmv/lmv_obd.c File Reference</h1><code>#include &lt;linux/slab.h&gt;</code><br/>
<code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/init.h&gt;</code><br/>
<code>#include &lt;linux/user_namespace.h&gt;</code><br/>
<code>#include &lt;linux/pagemap.h&gt;</code><br/>
<code>#include &lt;linux/mm.h&gt;</code><br/>
<code>#include &lt;linux/math64.h&gt;</code><br/>
<code>#include &lt;linux/seq_file.h&gt;</code><br/>
<code>#include &lt;linux/namei.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lib_8h_source.html">lustre_lib.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__lmv_8h_source.html">lustre_lmv.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lprocfs__status_8h_source.html">lprocfs_status.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cl__object_8h_source.html">cl_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__ioctl_8h_source.html">lustre_ioctl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__kernelcomm_8h_source.html">lustre_kernelcomm.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="lmv__internal_8h_source.html">lmv_internal.h</a>&quot;</code><br/>

<p><a href="lmv__obd_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LMV</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a220f38b26fa99d4d91b574f42d991516">MAX_STRING_SIZE</a>&nbsp;&nbsp;&nbsp;128</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ae7e8e11aebe0552a7567575d1a0d2bef">md_op_data_fid</a>(op_data, fl)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ac2c84bd171886ba98a55a62ae88e4491">lmv_activate_target</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *tgt, int activate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad17784cf12bb923322ae1b6ba12e6942">lmv_set_mdc_active</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, int activate)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Error codes:.  <a href="#ad17784cf12bb923322ae1b6ba12e6942"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a4f4cbe72defaebbbd48d57c3e562dacf">lmv_get_uuid</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aa869ce80b25cd9b74ed5f744408b6b9d">lmv_notify</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__device.html">obd_device</a> *watched, enum <a class="el" href="obd_8h.html#a2edf5111b5e48090a5f07f11a420c5cc">obd_notify_event</a> ev, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a3215b4f2832988ae74e314ebf87a9d06">lmv_connect</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> **exp, struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *cluuid, struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *data, void *localdata)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is fake connect function.  <a href="#a3215b4f2832988ae74e314ebf87a9d06"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#affc5ccbd65650a05ba6a3ecf93f57695">lmv_init_ea_size</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u32 easize, __u32 def_easize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad43125a1293c73669c2dd0766b896d77">lmv_connect_mdc</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ac45ea27cc91f6e323e5e8536e5efc49a">lmv_del_target</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aad58b1e1b2c6cf6d6ef68e97e629809d">lmv_add_target</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *uuidp, __u32 index, int gen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a09085a484116271aa4133de80a41928c">lmv_check_connect</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a80a17896c9642144eff88f0306cdd965">lmv_disconnect_mdc</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a8a025411eda85113b175add2a8b31199">lmv_disconnect</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a8cefc49b3fa55881bc63b08f9366976e">lmv_fid2path</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, int len, void *karg, void __user *uarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad9c4b4baef1afc86a2a3ca98bef3640e">lmv_hsm_req_count</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, const struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a> *hur, const struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *tgt_mds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a4609a6f2df6370ae19bce78b6f42ad8c">lmv_hsm_req_build</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a> *hur_in, const struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *tgt_mds, struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a> *hur_out)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a6e2141ccabf84032f49c16470e2d1b11">lmv_hsm_ct_unregister</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, unsigned int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, int len, struct <a class="el" href="structlustre__kernelcomm.html">lustre_kernelcomm</a> *lk, void __user *uarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a912145721e1263885704291a2147f9d1">lmv_hsm_ct_register</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, unsigned int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, int len, struct <a class="el" href="structlustre__kernelcomm.html">lustre_kernelcomm</a> *lk, __user void *uarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a1bc406e83f291f9544100be23621337d">lmv_iocontrol</a> (unsigned int <a class="el" href="mdsrate_8c.html#a7353cae57e2530c316ddacb27ef14932">cmd</a>, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, int len, void *karg, void __user *uarg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a3a860ca092aac41cd077ebd54513dc61">lmv_placement_policy</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, u32 *mds)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is _inode_ placement policy function (not name).  <a href="#a3a860ca092aac41cd077ebd54513dc61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a279e2f8b9987a90b0b37d05e8f89c345">__lmv_fid_alloc</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u32 mds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aa4764c5b00212c1e2a298d6c4780d248">lmv_fid_alloc</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a295efa072c780376181fc96771899903">lmv_setup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *lcfg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a6044af72bfa0163d8aa9859102b53cc9">lmv_cleanup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a89db0aa4067690e5a01f919ec4ab9d12">lmv_process_config</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, size_t len, void *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a3ab354bac566b6f197724735b8e99486">lmv_statfs</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__statfs.html">obd_statfs</a> *osfs, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> max_age, __u32 flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a8fa39ecac1dfe50f1ebdde9b8fb8798d">lmv_get_root</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const char *fileset, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a22af5ada04de1833fc34b44a81debfb3">lmv_getxattr</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u64 valid, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *input, int input_size, int output_size, int flags, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a912a94b2ced458d6853eddc7432dc9b5">lmv_setxattr</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u64 valid, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *input, int input_size, int output_size, int flags, __u32 suppgid, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a609037f05523b500d549599233b7d83f">lmv_getattr</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a1d77d1d8603229370a492c77d9b37b37">lmv_null_inode</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a7e108407d78521b4877acad2a638886b">lmv_close</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structmd__open__data.html">md_open_data</a> *mod, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a88408ee5a618fea7f219445b92570a10">lmv_locate_target_for_name</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u32 *mds)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Choosing the MDT by name or FID in .  <a href="#a88408ee5a618fea7f219445b92570a10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a6cbec485d68de683ee9aa59560c1b9b4">lmv_locate_mds</a> (struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *lmv, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Locate mds by fid or name.  <a href="#a6cbec485d68de683ee9aa59560c1b9b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ae3a46b26985b29c729e7f48c087c4359">lmv_create</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, const void *data, size_t datalen, umode_t <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, uid_t uid, gid_t gid, <a class="el" href="curproc_8h.html#a3cb6e21040ca4be7dd02ad341b27c28b">cfs_cap_t</a> cap_effective, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> rdev, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a400fcbf4f9ebb49443ca96f96b8d36f3">lmv_enqueue</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> *einfo, const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> extra_lock_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a064a9aa683e74e1fa42ad3cd120ddd47">lmv_getattr_name</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **preq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#acb28528e96bc841bc035cc1beaf7408d">lmv_early_cancel</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *tgt, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, __u32 op_tgt, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, int bits, int flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a65d95805f65731dcf53d86b1a6349280">lmv_link</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a4353f342e8661da339737eb530de97ca">lmv_rename</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, const char *old, size_t oldlen, const char *new, size_t newlen, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a5253b73fcc04860f8fbe1ddf51a80aef">lmv_setattr</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, void *ea, size_t ealen, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a24348514ac1032d2c71a05f4225faa2d">lmv_fsync</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad3e540df724497316005ac3e543ec1bc">lmv_get_min_striped_entry</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structmd__callback.html">md_callback</a> *cb_op, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> hash_offset, int *stripe_offset, struct <a class="el" href="structlu__dirent.html">lu_dirent</a> **entp, struct page **ppage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current minimum entry from striped directory.  <a href="#ad3e540df724497316005ac3e543ec1bc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a9306d1671483ded885d429e7e6d1cdaa">lmv_read_striped_page</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structmd__callback.html">md_callback</a> *cb_op, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> offset, struct page **ppage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Build dir entry page from a striped directory.  <a href="#a9306d1671483ded885d429e7e6d1cdaa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a77ddaef3bfdf78719995a9b055348eb9">lmv_read_page</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structmd__callback.html">md_callback</a> *cb_op, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> offset, struct page **ppage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a37f938dadecf8e635ec310b25da1af6e">lmv_unlink</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__op__data.html">md_op_data</a> *op_data, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlink a file/directory.  <a href="#a37f938dadecf8e635ec310b25da1af6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#adaf72ea703c580a88031d1ffc03adf36">lmv_precleanup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a185b85db495af14c9c1ae17f84ba2afa">lmv_get_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u32 keylen, void *key, __u32 *vallen, void *val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get by key a value associated with a LMV device.  <a href="#a185b85db495af14c9c1ae17f84ba2afa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a1b3bf908edcdf584cba9261f2050f3c8">lmv_set_info_async</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u32 keylen, void *key, __u32 vallen, void *val, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Asynchronously set by key a value associated with a LMV device.  <a href="#a1b3bf908edcdf584cba9261f2050f3c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad0722531e71fe7341af7b17354466cdf">lmv_unpack_md_v1</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm, const struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *lmm1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a9841ccb2cbc456a8ce1f0339b2e48eba">lmv_unpackmd</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> **lsmp, const union <a class="el" href="unionlmv__mds__md.html">lmv_mds_md</a> *lmm, size_t lmm_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a64b60257e23d09634ef0f4b5d9a84a13">lmv_free_memmd</a> (struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad7e5a72922ae183585448166d397eff9">lmv_cancel_unused</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> flags, void *opaque)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aa41138bbba5fea3e7e2e6e7db587ab45">lmv_set_lock_data</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *lockh, void *data, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *bits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a2ebc911562ec532addf480e9d4cfa519">lmv_lock_match</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a8546b65d07e6108f640182b4d8abb4df">lmv_get_lustre_md</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structobd__export.html">obd_export</a> *dt_exp, struct <a class="el" href="structobd__export.html">obd_export</a> *md_exp, struct <a class="el" href="structlustre__md.html">lustre_md</a> *md)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a2cfaa349554a8fbaff692c14a174d4ba">lmv_free_lustre_md</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlustre__md.html">lustre_md</a> *md)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#af57f91ac7d21cf3527c1b9eb97d2defe">lmv_set_open_replay_data</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__client__handle.html">obd_client_handle</a> *och, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a65eafe0ff27a1345e90853adb64b2829">lmv_clear_open_replay_data</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__client__handle.html">obd_client_handle</a> *och)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aa2bbb22e7c5a64e0bd3faad35d85fa7a">lmv_get_remote_perm</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, u32 suppgid, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aae835c2a7bd7abd5f52f7fc2930925e9">lmv_intent_getattr_async</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmd__enqueue__info.html">md_enqueue_info</a> *minfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a5f0eedaeac41ef96418edde28accae10">lmv_revalidate_lock</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *it, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *bits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a1e320cfb95fa8eaf45092695276c1b16">lmv_get_fid_from_lsm</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int namelen, struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a93a6be8a582b30476451a0cfee6dd136">lmv_quotactl</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *unused, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *oqctl)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For lmv, only need to send request to master MDT, and the master MDT will process with other slave MDTs.  <a href="#a93a6be8a582b30476451a0cfee6dd136"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a3190d6d24fe70f402b9f47672045f0d8">lmv_merge_attr</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *lsm, struct <a class="el" href="structcl__attr.html">cl_attr</a> *attr, <a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a> cb_blocking)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int __init&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a00db9320628641c4a5265a5f24014c28">lmv_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void __exit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a63836a421497b158a12c8a0ad65af700">lmv_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#adc10f40acba3bb9b2640e985276b0a7c">MODULE_AUTHOR</a> (&quot;OpenSFS, Inc. &lt;http://www.lustre.org/&gt;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#af187f592489ccf7710ef621f8a794595">MODULE_DESCRIPTION</a> (&quot;Lustre Logical Metadata Volume&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ae9c321be2136fb8501887ee69dac11a2">MODULE_VERSION</a> (LUSTRE_VERSION_STRING)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44">MODULE_LICENSE</a> (&quot;GPL&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#aef13f04b9c4a04743a1fd657a4b72e48">module_init</a> (lmv_init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a62194d5d51d7f806c2e0533716f8e957">module_exit</a> (lmv_exit)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__ops.html">obd_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a2315e48b42bb79af78f27d9b317566d8">lmv_obd_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmd__ops.html">md_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lmv__obd_8c.html#a4a222531b387bcb682a8a2cf3bc858e3">lmv_md_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="lmv_obd.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LMV</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00037">37</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

</div>
</div>
<a class="anchor" id="a220f38b26fa99d4d91b574f42d991516"></a><!-- doxytag: member="lmv_obd.c::MAX_STRING_SIZE" ref="a220f38b26fa99d4d91b574f42d991516" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_STRING_SIZE&nbsp;&nbsp;&nbsp;128</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00313">313</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae7e8e11aebe0552a7567575d1a0d2bef"></a><!-- doxytag: member="lmv_obd.c::md_op_data_fid" ref="ae7e8e11aebe0552a7567575d1a0d2bef" args="(op_data, fl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define md_op_data_fid</td>
          <td>(</td>
          <td class="paramtype">op_data, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fl&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(fl == <a class="code" href="obd_8h.html#af5f3a30050e9fc85c19ee2fff6bf4d41a1f9bccfb422835679c05221cdea088c4">MF_MDC_CANCEL_FID1</a> ? &amp;op_data-&gt;op_fid1 : \
         fl == <a class="code" href="obd_8h.html#af5f3a30050e9fc85c19ee2fff6bf4d41a7a13a85734f86ca674c7c13ea756b62c">MF_MDC_CANCEL_FID2</a> ? &amp;op_data-&gt;op_fid2 : \
         fl == <a class="code" href="obd_8h.html#af5f3a30050e9fc85c19ee2fff6bf4d41af3f650b715dd186cc2bee8eb6c7023a2">MF_MDC_CANCEL_FID3</a> ? &amp;op_data-&gt;op_fid3 : \
         fl == <a class="code" href="obd_8h.html#af5f3a30050e9fc85c19ee2fff6bf4d41ad9a3439c4b7f8d023f541f9c7c27b604">MF_MDC_CANCEL_FID4</a> ? &amp;op_data-&gt;op_fid4 : \
         NULL)
</pre></div>
<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01891">1891</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01898">lmv_early_cancel()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a279e2f8b9987a90b0b37d05e8f89c345"></a><!-- doxytag: member="lmv_obd.c::__lmv_fid_alloc" ref="a279e2f8b9987a90b0b37d05e8f89c345" args="(struct lmv_obd *lmv, struct lu_fid *fid, u32 mds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __lmv_fid_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>mds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01276">1276</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00399">lmv_tgt_desc::ltd_fid_mutex</a>, <a class="el" href="obd__class_8h_source.html#l00879">obd_fid_alloc()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01310">lmv_fid_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2c84bd171886ba98a55a62ae88e4491"></a><!-- doxytag: member="lmv_obd.c::lmv_activate_target" ref="ac2c84bd171886ba98a55a62ae88e4491" args="(struct lmv_obd *lmv, struct lmv_tgt_desc *tgt, int activate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lmv_activate_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>activate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00065">65</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l02563">lmv_desc::ld_active_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, and <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_inactive</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00598">lmv_disconnect_mdc()</a>, and <a class="el" href="lmv__obd_8c_source.html#l00085">lmv_set_mdc_active()</a>.</p>

</div>
</div>
<a class="anchor" id="aad58b1e1b2c6cf6d6ef68e97e629809d"></a><!-- doxytag: member="lmv_obd.c::lmv_add_target" ref="aad58b1e1b2c6cf6d6ef68e97e629809d" args="(struct obd_device *obd, struct obd_uuid *uuidp, __u32 index, int gen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_add_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuidp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>gen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00424">424</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00547">class_find_client_obd()</a>, <a class="el" href="obd_8h_source.html#l00423">lmv_obd::connected</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00315">lmv_connect_mdc()</a>, <a class="el" href="lmv__obd_8c_source.html#l00270">lmv_init_ea_size()</a>, <a class="el" href="obd_8h_source.html#l00422">lmv_obd::lmv_init_mutex</a>, <a class="el" href="obd_8h_source.html#l00415">lmv_obd::lmv_lock</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00399">lmv_tgt_desc::ltd_fid_mutex</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd_8h_source.html#l00460">LUSTRE_MDC_NAME</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="obd_8h_source.html#l00427">lmv_obd::tgts_size</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01414">lmv_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7e5a72922ae183585448166d397eff9"></a><!-- doxytag: member="lmv_obd.c::lmv_cancel_unused" ref="ad7e5a72922ae183585448166d397eff9" args="(struct obd_export *exp, const struct lu_fid *fid, union ldlm_policy_data *policy, enum ldlm_mode mode, enum ldlm_cancel_flags flags, void *opaque)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_cancel_unused </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>opaque</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02978">2978</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01539">md_cancel_unused()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a09085a484116271aa4133de80a41928c"></a><!-- doxytag: member="lmv_obd.c::lmv_check_connect" ref="a09085a484116271aa4133de80a41928c" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_check_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00524">524</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l01220">class_disconnect()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="obd_8h_source.html#l00418">lmv_obd::cluuid</a>, <a class="el" href="obd_8h_source.html#l00423">lmv_obd::connected</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00419">lmv_obd::exp</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02563">lmv_desc::ld_active_tgt_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00315">lmv_connect_mdc()</a>, <a class="el" href="lmv__obd_8c_source.html#l00270">lmv_init_ea_size()</a>, <a class="el" href="obd_8h_source.html#l00422">lmv_obd::lmv_init_mutex</a>, <a class="el" href="lustre__idl_8h_source.html#l02597">LMV_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02658">lmv_mds_md_size()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01624">lmv_close()</a>, <a class="el" href="lmv__obd_8c_source.html#l00207">lmv_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__obd_8c_source.html#l01805">lmv_enqueue()</a>, <a class="el" href="lmv__obd_8c_source.html#l02190">lmv_fsync()</a>, <a class="el" href="lmv__obd_8c_source.html#l02732">lmv_get_info()</a>, <a class="el" href="lmv__obd_8c_source.html#l03122">lmv_get_remote_perm()</a>, <a class="el" href="lmv__obd_8c_source.html#l01501">lmv_get_root()</a>, <a class="el" href="lmv__obd_8c_source.html#l01569">lmv_getattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01837">lmv_getattr_name()</a>, <a class="el" href="lmv__obd_8c_source.html#l01517">lmv_getxattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l03143">lmv_intent_getattr_async()</a>, <a class="el" href="lmv__intent_8c_source.html#l00469">lmv_intent_lock()</a>, <a class="el" href="lmv__obd_8c_source.html#l01937">lmv_link()</a>, <a class="el" href="lmv__obd_8c_source.html#l01596">lmv_null_inode()</a>, <a class="el" href="lmv__obd_8c_source.html#l02498">lmv_read_page()</a>, <a class="el" href="lmv__obd_8c_source.html#l02373">lmv_read_striped_page()</a>, <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>, <a class="el" href="lmv__obd_8c_source.html#l03182">lmv_revalidate_lock()</a>, <a class="el" href="lmv__obd_8c_source.html#l02164">lmv_setattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01542">lmv_setxattr()</a>, <a class="el" href="lmv__obd_8c_source.html#l01446">lmv_statfs()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a6044af72bfa0163d8aa9859102b53cc9"></a><!-- doxytag: member="lmv_obd.c::lmv_cleanup" ref="a6044af72bfa0163d8aa9859102b53cc9" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01395">1395</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__request_8c_source.html#l00333">fld_client_fini()</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00414">lmv_del_target()</a>, <a class="el" href="obd_8h_source.html#l00414">lmv_obd::lmv_fld</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="obd_8h_source.html#l00427">lmv_obd::tgts_size</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a65eafe0ff27a1345e90853adb64b2829"></a><!-- doxytag: member="lmv_obd.c::lmv_clear_open_replay_data" ref="a65eafe0ff27a1345e90853adb64b2829" args="(struct obd_export *exp, struct obd_client_handle *och)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_clear_open_replay_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__client__handle.html">obd_client_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>och</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03107">3107</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01520">md_clear_open_replay_data()</a>, <a class="el" href="obd_8h_source.html#l00991">obd_client_handle::och_fid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a7e108407d78521b4877acad2a638886b"></a><!-- doxytag: member="lmv_obd.c::lmv_close" ref="a7e108407d78521b4877acad2a638886b" args="(struct obd_export *exp, struct md_op_data *op_data, struct md_open_data *mod, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__open__data.html">md_open_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01624">1624</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01304">md_close()</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a3215b4f2832988ae74e314ebf87a9d06"></a><!-- doxytag: member="lmv_obd.c::lmv_connect" ref="a3215b4f2832988ae74e314ebf87a9d06" args="(const struct lu_env *env, struct obd_export **exp, struct obd_device *obd, struct obd_uuid *cluuid, struct obd_connect_data *data, void *localdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_connect </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> **&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>cluuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__connect__data.html">obd_connect_data</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>localdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is fake connect function. </p>
<p>Its purpose is to initialize lmv and say caller that everything is okay. Real connection will be performed later. </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00207">207</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00708">class_conn2export()</a>, <a class="el" href="genops_8c_source.html#l01150">class_connect()</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="obd_8h_source.html#l00418">lmv_obd::cluuid</a>, <a class="el" href="obd_8h_source.html#l00430">lmv_obd::conn_data</a>, <a class="el" href="obd_8h_source.html#l00423">lmv_obd::connected</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00419">lmv_obd::exp</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00949">lprocfs_register()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="lustre__idl_8h_source.html#l01210">OBD_CONNECT_REAL</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00712">obd_device::obd_proc_entry</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, <a class="el" href="obd_8h_source.html#l00413">lmv_obd::refcount</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00420">lmv_obd::targets_proc_entry</a>, <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="ad43125a1293c73669c2dd0766b896d77"></a><!-- doxytag: member="lmv_obd.c::lmv_connect_mdc" ref="ad43125a1293c73669c2dd0766b896d77" args="(struct obd_device *obd, struct lmv_tgt_desc *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_connect_mdc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00315">315</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00547">class_find_client_obd()</a>, <a class="el" href="obd_8h_source.html#l00418">lmv_obd::cluuid</a>, <a class="el" href="obd_8h_source.html#l00430">lmv_obd::conn_data</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="fld__request_8c_source.html#l00155">fld_client_add_target()</a>, <a class="el" href="lustre__fld_8h_source.html#l00068">lu_fld_target::ft_exp</a>, <a class="el" href="lustre__fld_8h_source.html#l00070">lu_fld_target::ft_idx</a>, <a class="el" href="lustre__fld_8h_source.html#l00069">lu_fld_target::ft_srv</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02563">lmv_desc::ld_active_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00414">lmv_obd::lmv_fld</a>, <a class="el" href="lprocfs__status_8h_source.html#l00942">lprocfs_add_symlink()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd_8h_source.html#l00460">LUSTRE_MDC_NAME</a>, <a class="el" href="lustre__fid_8h_source.html#l00339">LUSTRE_SEQ_METADATA</a>, <a class="el" href="obd_8h_source.html#l00425">lmv_obd::max_def_easize</a>, <a class="el" href="obd_8h_source.html#l00424">lmv_obd::max_easize</a>, <a class="el" href="obd__class_8h_source.html#l01568">md_init_ea_size()</a>, <a class="el" href="obd__class_8h_source.html#l00796">obd_connect()</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd__class_8h_source.html#l00854">obd_fid_init()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd__class_8h_source.html#l01162">obd_notify()</a>, <a class="el" href="obd_8h_source.html#l00539">OBD_NOTIFY_ACTIVE</a>, <a class="el" href="obd_8h_source.html#l00652">obd_device::obd_observer</a>, <a class="el" href="obd_8h_source.html#l00638">obd_device::obd_refcount</a>, <a class="el" href="obd__class_8h_source.html#l01253">obd_register_observer()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_set_up</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00420">lmv_obd::targets_proc_entry</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00424">lmv_add_target()</a>, and <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3a46b26985b29c729e7f48c087c4359"></a><!-- doxytag: member="lmv_obd.c::lmv_create" ref="ae3a46b26985b29c729e7f48c087c4359" args="(struct obd_export *exp, struct md_op_data *op_data, const void *data, size_t datalen, umode_t mode, uid_t uid, gid_t gid, cfs_cap_t cap_effective, __u64 rdev, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>datalen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">umode_t&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uid_t&nbsp;</td>
          <td class="paramname"> <em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gid_t&nbsp;</td>
          <td class="paramname"> <em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="curproc_8h.html#a3cb6e21040ca4be7dd02ad341b27c28b">cfs_cap_t</a>&nbsp;</td>
          <td class="paramname"> <em>cap_effective</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>rdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01749">1749</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00153">D_CONFIG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l02563">lmv_desc::ld_active_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01310">lmv_fid_alloc()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd__class_8h_source.html#l01316">md_create()</a>, <a class="el" href="obd_8h_source.html#l00787">MF_MDC_CANCEL_FID1</a>, <a class="el" href="lustre__idl_8h_source.html#l01246">OBD_CONNECT_DIR_STRIPE</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="ac45ea27cc91f6e323e5e8536e5efc49a"></a><!-- doxytag: member="lmv_obd.c::lmv_del_target" ref="ac45ea27cc91f6e323e5e8536e5efc49a" args="(struct lmv_obd *lmv, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lmv_del_target </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00414">414</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01395">lmv_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a025411eda85113b175add2a8b31199"></a><!-- doxytag: member="lmv_obd.c::lmv_disconnect" ref="a8a025411eda85113b175add2a8b31199" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_disconnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00642">642</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l01220">class_disconnect()</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="obd_8h_source.html#l00423">lmv_obd::connected</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00598">lmv_disconnect_mdc()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="obd_8h_source.html#l00413">lmv_obd::refcount</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00420">lmv_obd::targets_proc_entry</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a80a17896c9642144eff88f0306cdd965"></a><!-- doxytag: member="lmv_obd.c::lmv_disconnect_mdc" ref="a80a17896c9642144eff88f0306cdd965" args="(struct obd_device *obd, struct lmv_tgt_desc *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_disconnect_mdc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00598">598</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00065">lmv_activate_target()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00954">lprocfs_remove_proc_entry()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd__class_8h_source.html#l00842">obd_disconnect()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_fail</a>, <a class="el" href="obd__class_8h_source.html#l00867">obd_fid_fini()</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_no_recov</a>, <a class="el" href="obd__class_8h_source.html#l01253">obd_register_observer()</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00420">lmv_obd::targets_proc_entry</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00642">lmv_disconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="acb28528e96bc841bc035cc1beaf7408d"></a><!-- doxytag: member="lmv_obd.c::lmv_early_cancel" ref="acb28528e96bc841bc035cc1beaf7408d" args="(struct obd_export *exp, struct lmv_tgt_desc *tgt, struct md_op_data *op_data, __u32 op_tgt, enum ldlm_mode mode, int bits, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_early_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>op_tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01898">1898</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02841">ldlm_inodebits::bits</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00635">ldlm_policy_data::l_inodebits</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd__class_8h_source.html#l01539">md_cancel_unused()</a>, <a class="el" href="lmv__obd_8c_source.html#l01891">md_op_data_fid</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01937">lmv_link()</a>, <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a400fcbf4f9ebb49443ca96f96b8d36f3"></a><!-- doxytag: member="lmv_obd.c::lmv_enqueue" ref="a400fcbf4f9ebb49443ca96f96b8d36f3" args="(struct obd_export *exp, struct ldlm_enqueue_info *einfo, const union ldlm_policy_data *policy, struct lookup_intent *it, struct md_op_data *op_data, struct lustre_handle *lockh, __u64 extra_lock_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_enqueue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> *&nbsp;</td>
          <td class="paramname"> <em>einfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>extra_lock_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01805">1805</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="llite__internal_8h_source.html#l00077">LL_IT2STR</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd__class_8h_source.html#l01330">md_enqueue()</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a63836a421497b158a12c8a0ad65af700"></a><!-- doxytag: member="lmv_obd.c::lmv_exit" ref="a63836a421497b158a12c8a0ad65af700" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __exit lmv_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03371">3371</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00246">class_unregister_type()</a>, and <a class="el" href="obd_8h_source.html#l00450">LUSTRE_LMV_NAME</a>.</p>

</div>
</div>
<a class="anchor" id="a8cefc49b3fa55881bc63b08f9366976e"></a><!-- doxytag: member="lmv_obd.c::lmv_fid2path" ref="a8cefc49b3fa55881bc63b08f9366976e" args="(struct obd_export *exp, int len, void *karg, void __user *uarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_fid2path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>karg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&nbsp;</td>
          <td class="paramname"> <em>uarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00686">686</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l03693">getinfo_fid2path::gf_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03695">getinfo_fid2path::gf_linkno</a>, <a class="el" href="lustre__idl_8h_source.html#l03698">getinfo_fid2path::gf_path</a>, <a class="el" href="lustre__idl_8h_source.html#l03696">getinfo_fid2path::gf_pathlen</a>, <a class="el" href="lustre__idl_8h_source.html#l03694">getinfo_fid2path::gf_recno</a>, <a class="el" href="lustre__idl_8h_source.html#l03699">getinfo_fid2path::gf_root_fid</a>, <a class="el" href="structgetinfo__fid2path.html#afc20bdbe4bf31576ca10fc0ad6a7e8e9">getinfo_fid2path::gf_u</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00362">OBD_IOC_FID2PATH</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4764c5b00212c1e2a298d6c4780d248"></a><!-- doxytag: member="lmv_obd.c::lmv_fid_alloc" ref="aa4764c5b00212c1e2a298d6c4780d248" args="(const struct lu_env *env, struct obd_export *exp, struct lu_fid *fid, struct md_op_data *op_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_fid_alloc </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01310">1310</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lmv__obd_8c_source.html#l01276">__lmv_fid_alloc()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l01232">lmv_placement_policy()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__intent_8c_source.html#l00265">lmv_intent_open()</a>, and <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>.</p>

</div>
</div>
<a class="anchor" id="a2cfaa349554a8fbaff692c14a174d4ba"></a><!-- doxytag: member="lmv_obd.c::lmv_free_lustre_md" ref="a2cfaa349554a8fbaff692c14a174d4ba" args="(struct obd_export *exp, struct lustre_md *md)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_free_lustre_md </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__md.html">lustre_md</a> *&nbsp;</td>
          <td class="paramname"> <em>md</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03075">3075</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00974">lustre_md::lmv</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l02972">lmv_free_memmd()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01462">md_free_lustre_md()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a64b60257e23d09634ef0f4b5d9a84a13"></a><!-- doxytag: member="lmv_obd.c::lmv_free_memmd" ref="a64b60257e23d09634ef0f4b5d9a84a13" args="(struct lmv_stripe_md *lsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lmv_free_memmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02972">2972</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lmv__obd_8c_source.html#l02894">lmv_unpackmd()</a>.</p>

<p>Referenced by <a class="el" href="llite__lib_8c_source.html#l01205">ll_dir_clear_lsm_md()</a>, <a class="el" href="llite__lib_8c_source.html#l01320">ll_update_lsm_md()</a>, and <a class="el" href="lmv__obd_8c_source.html#l03075">lmv_free_lustre_md()</a>.</p>

</div>
</div>
<a class="anchor" id="a24348514ac1032d2c71a05f4225faa2d"></a><!-- doxytag: member="lmv_obd.c::lmv_fsync" ref="a24348514ac1032d2c71a05f4225faa2d" args="(struct obd_export *exp, const struct lu_fid *fid, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_fsync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02190">2190</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01411">md_fsync()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a1e320cfb95fa8eaf45092695276c1b16"></a><!-- doxytag: member="lmv_obd.c::lmv_get_fid_from_lsm" ref="a1e320cfb95fa8eaf45092695276c1b16" args="(struct obd_export *exp, const struct lmv_stripe_md *lsm, const char *name, int namelen, struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_get_fid_from_lsm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03203">3203</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lmv__internal_8h_source.html#l00133">lsm_name_to_stripe_info()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a185b85db495af14c9c1ae17f84ba2afa"></a><!-- doxytag: member="lmv_obd.c::lmv_get_info" ref="a185b85db495af14c9c1ae17f84ba2afa" args="(const struct lu_env *env, struct obd_export *exp, __u32 keylen, void *key, __u32 *vallen, void *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_get_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get by key a value associated with a LMV device. </p>
<p>Dispatch request to lower-layer devices as needed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>export for the LMV device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>keylen</em>&nbsp;</td><td>length of key identifier </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>identifier of key to get value for </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vallen</em>&nbsp;</td><td>size of <em>val</em> </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>val</em>&nbsp;</td><td>pointer to storage location for value </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lsm</em>&nbsp;</td><td>optional striping metadata of object</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>negated errno on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02732">2732</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00243">obd_export::exp_connect_data</a>, <a class="el" href="lustre__export_8h_source.html#l00175">obd_export::exp_handle</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="obd_8h_source.html#l00741">KEY_CONN_DATA</a>, <a class="el" href="obd_8h_source.html#l00752">KEY_DEFAULT_EASIZE</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="obd_8h_source.html#l00751">KEY_MAX_EASIZE</a>, <a class="el" href="obd_8h_source.html#l00757">KEY_TGT_COUNT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l00505">obd_get_info()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a8546b65d07e6108f640182b4d8abb4df"></a><!-- doxytag: member="lmv_obd.c::lmv_get_lustre_md" ref="a8546b65d07e6108f640182b4d8abb4df" args="(struct obd_export *exp, struct ptlrpc_request *req, struct obd_export *dt_exp, struct obd_export *md_exp, struct lustre_md *md)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_get_lustre_md </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>md_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__md.html">lustre_md</a> *&nbsp;</td>
          <td class="paramname"> <em>md</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03062">3062</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01450">md_get_lustre_md()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="ad3e540df724497316005ac3e543ec1bc"></a><!-- doxytag: member="lmv_obd.c::lmv_get_min_striped_entry" ref="ad3e540df724497316005ac3e543ec1bc" args="(struct obd_export *exp, struct md_op_data *op_data, struct md_callback *cb_op, __u64 hash_offset, int *stripe_offset, struct lu_dirent **entp, struct page **ppage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_get_min_striped_entry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__callback.html">md_callback</a> *&nbsp;</td>
          <td class="paramname"> <em>cb_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>hash_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>stripe_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__dirent.html">lu_dirent</a> **&nbsp;</td>
          <td class="paramname"> <em>entp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page **&nbsp;</td>
          <td class="paramname"> <em>ppage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get current minimum entry from striped directory. </p>
<p>This function will search the dir entry, whose hash value is the closest(&gt;=) to , from all of sub-stripes, and it is only being called for striped directory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>export of LMV </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op_data</em>&nbsp;</td><td>parameters transferred beween client MD stack stripe_information will be included in this parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cb_op</em>&nbsp;</td><td>ldlm callback being used in enqueue in mdc_read_page </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hash_offset</em>&nbsp;</td><td>the hash value, which is used to locate minum(closet) dir entry </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>stripe_offset the caller use this to indicate the stripe index of last entry, so to avoid hash conflict between stripes. It will also be used to return the stripe index of current dir entry. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>entp the minum entry and it also is being used to input the last dir entry to resolve the hash conflict</td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>ppage</em>&nbsp;</td><td>the page which holds the minum entry</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>=</em>&nbsp;</td><td>0 get the entry successfully negative errno (&lt; 0) does not get the entry </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02239">2239</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l00900">lu_dirent::lde_hash</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="lustre__idl_8h_source.html#l00946">lu_dirpage::ldp_hash_end</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00039">lmv_oinfo::lmo_mds</a>, <a class="el" href="lustre__lmv_8h_source.html#l00040">lmv_oinfo::lmo_root</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="lustre__idl_8h_source.html#l00971">lu_dirent_next()</a>, <a class="el" href="lustre__idl_8h_source.html#l00963">lu_dirent_start()</a>, <a class="el" href="obd__class_8h_source.html#l01424">md_read_page()</a>, <a class="el" href="lustre__idl_8h_source.html#l00997">MDS_DIR_END_OFF</a>, <a class="el" href="obd_8h_source.html#l00819">md_op_data::op_data</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l02373">lmv_read_striped_page()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2bbb22e7c5a64e0bd3faad35d85fa7a"></a><!-- doxytag: member="lmv_obd.c::lmv_get_remote_perm" ref="aa2bbb22e7c5a64e0bd3faad35d85fa7a" args="(struct obd_export *exp, const struct lu_fid *fid, u32 suppgid, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_get_remote_perm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>suppgid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03122">3122</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01577">md_get_remote_perm()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a8fa39ecac1dfe50f1ebdde9b8fb8798d"></a><!-- doxytag: member="lmv_obd.c::lmv_get_root" ref="a8fa39ecac1dfe50f1ebdde9b8fb8798d" args="(struct obd_export *exp, const char *fileset, struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_get_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01501">1501</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01269">md_get_root()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a4f4cbe72defaebbbd48d57c3e562dacf"></a><!-- doxytag: member="lmv_obd.c::lmv_get_uuid" ref="a4f4cbe72defaebbbd48d57c3e562dacf" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__uuid.html">obd_uuid</a>* lmv_get_uuid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00139">139</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l00779">obd_get_uuid()</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a609037f05523b500d549599233b7d83f"></a><!-- doxytag: member="lmv_obd.c::lmv_getattr" ref="a609037f05523b500d549599233b7d83f" args="(struct obd_export *exp, struct md_op_data *op_data, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_getattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01569">1569</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd__class_8h_source.html#l01282">md_getattr()</a>, <a class="el" href="obd_8h_source.html#l00791">MF_GET_MDT_IDX</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a064a9aa683e74e1fa42ad3cd120ddd47"></a><!-- doxytag: member="lmv_obd.c::lmv_getattr_name" ref="a064a9aa683e74e1fa42ad3cd120ddd47" args="(struct obd_export *exp, struct md_op_data *op_data, struct ptlrpc_request **preq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_getattr_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>preq</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01837">1837</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="obd__class_8h_source.html#l01347">md_getattr_name()</a>, <a class="el" href="lustre__idl_8h_source.html#l01702">OBD_MD_FLCROSSREF</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>, <a class="el" href="obd_8h_source.html#l00826">md_op_data::op_valid</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a22af5ada04de1833fc34b44a81debfb3"></a><!-- doxytag: member="lmv_obd.c::lmv_getxattr" ref="a22af5ada04de1833fc34b44a81debfb3" args="(struct obd_export *exp, const struct lu_fid *fid, u64 valid, const char *name, const char *input, int input_size, int output_size, int flags, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_getxattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>valid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>output_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01517">1517</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01496">md_getxattr()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a912145721e1263885704291a2147f9d1"></a><!-- doxytag: member="lmv_obd.c::lmv_hsm_ct_register" ref="a912145721e1263885704291a2147f9d1" args="(struct lmv_obd *lmv, unsigned int cmd, int len, struct lustre_kernelcomm *lk, __user void *uarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_hsm_ct_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__kernelcomm.html">lustre_kernelcomm</a> *&nbsp;</td>
          <td class="paramname"> <em>lk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__user void *&nbsp;</td>
          <td class="paramname"> <em>uarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00845">845</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="obd_8h_source.html#l00418">lmv_obd::cluuid</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00419">lmv_obd::exp</a>, <a class="el" href="lustre__export_8h_source.html#l00427">kkuc_ct_data::kcd_archive</a>, <a class="el" href="lustre__export_8h_source.html#l00425">kkuc_ct_data::kcd_magic</a>, <a class="el" href="lustre__export_8h_source.html#l00426">kkuc_ct_data::kcd_uuid</a>, <a class="el" href="lustre__export_8h_source.html#l00423">KKUC_CT_DATA_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="kernelcomm_8c_source.html#l00118">libcfs_kkuc_group_add()</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00087">lustre_kernelcomm::lk_data</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00088">lustre_kernelcomm::lk_flags</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00078">LK_FLG_STOP</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00086">lustre_kernelcomm::lk_group</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00085">lustre_kernelcomm::lk_uid</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00083">lustre_kernelcomm::lk_wfd</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e2141ccabf84032f49c16470e2d1b11"></a><!-- doxytag: member="lmv_obd.c::lmv_hsm_ct_unregister" ref="a6e2141ccabf84032f49c16470e2d1b11" args="(struct lmv_obd *lmv, unsigned int cmd, int len, struct lustre_kernelcomm *lk, void __user *uarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_hsm_ct_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__kernelcomm.html">lustre_kernelcomm</a> *&nbsp;</td>
          <td class="paramname"> <em>lk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&nbsp;</td>
          <td class="paramname"> <em>uarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00817">817</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="kernelcomm_8c_source.html#l00153">libcfs_kkuc_group_rem()</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00086">lustre_kernelcomm::lk_group</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00085">lustre_kernelcomm::lk_uid</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>.</p>

</div>
</div>
<a class="anchor" id="a4609a6f2df6370ae19bce78b6f42ad8c"></a><!-- doxytag: member="lmv_obd.c::lmv_hsm_req_build" ref="a4609a6f2df6370ae19bce78b6f42ad8c" args="(struct lmv_obd *lmv, struct hsm_user_request *hur_in, const struct lmv_tgt_desc *tgt_mds, struct hsm_user_request *hur_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lmv_hsm_req_build </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a> *&nbsp;</td>
          <td class="paramname"> <em>hur_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_mds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a> *&nbsp;</td>
          <td class="paramname"> <em>hur_out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00792">792</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01167">hsm_request::hr_data_len</a>, <a class="el" href="lustre__user_8h_source.html#l01166">hsm_request::hr_itemcount</a>, <a class="el" href="lustre__user_8h_source.html#l01171">hsm_user_item::hui_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01184">hur_data()</a>, <a class="el" href="lustre__user_8h_source.html#l01176">hsm_user_request::hur_request</a>, <a class="el" href="lustre__user_8h_source.html#l01177">hsm_user_request::hur_user_item</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, and <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9c4b4baef1afc86a2a3ca98bef3640e"></a><!-- doxytag: member="lmv_obd.c::lmv_hsm_req_count" ref="ad9c4b4baef1afc86a2a3ca98bef3640e" args="(struct lmv_obd *lmv, const struct hsm_user_request *hur, const struct lmv_tgt_desc *tgt_mds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_hsm_req_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a> *&nbsp;</td>
          <td class="paramname"> <em>hur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt_mds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00775">775</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01166">hsm_request::hr_itemcount</a>, <a class="el" href="lustre__user_8h_source.html#l01171">hsm_user_item::hui_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01176">hsm_user_request::hur_request</a>, <a class="el" href="lustre__user_8h_source.html#l01177">hsm_user_request::hur_user_item</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, and <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00915">lmv_iocontrol()</a>.</p>

</div>
</div>
<a class="anchor" id="a00db9320628641c4a5265a5f24014c28"></a><!-- doxytag: member="lmv_obd.c::lmv_init" ref="a00db9320628641c4a5265a5f24014c28" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __init lmv_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03365">3365</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00167">class_register_type()</a>, and <a class="el" href="obd_8h_source.html#l00450">LUSTRE_LMV_NAME</a>.</p>

</div>
</div>
<a class="anchor" id="affc5ccbd65650a05ba6a3ecf93f57695"></a><!-- doxytag: member="lmv_obd.c::lmv_init_ea_size" ref="affc5ccbd65650a05ba6a3ecf93f57695" args="(struct obd_export *exp, __u32 easize, __u32 def_easize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_init_ea_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>easize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>def_easize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00270">270</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00423">lmv_obd::connected</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00425">lmv_obd::max_def_easize</a>, <a class="el" href="obd_8h_source.html#l00424">lmv_obd::max_easize</a>, <a class="el" href="obd__class_8h_source.html#l01568">md_init_ea_size()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00424">lmv_add_target()</a>, and <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>.</p>

</div>
</div>
<a class="anchor" id="aae835c2a7bd7abd5f52f7fc2930925e9"></a><!-- doxytag: member="lmv_obd.c::lmv_intent_getattr_async" ref="aae835c2a7bd7abd5f52f7fc2930925e9" args="(struct obd_export *exp, struct md_enqueue_info *minfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_intent_getattr_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__enqueue__info.html">md_enqueue_info</a> *&nbsp;</td>
          <td class="paramname"> <em>minfo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03143">3143</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01588">md_intent_getattr_async()</a>, <a class="el" href="obd_8h_source.html#l00861">md_enqueue_info::mi_data</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a1bc406e83f291f9544100be23621337d"></a><!-- doxytag: member="lmv_obd.c::lmv_iocontrol" ref="a1bc406e83f291f9544100be23621337d" args="(unsigned int cmd, struct obd_export *exp, int len, void *karg, void __user *uarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_iocontrol </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>karg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&nbsp;</td>
          <td class="paramname"> <em>uarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00915">915</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00242">cfs_time_shift_64()</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01167">hsm_request::hr_data_len</a>, <a class="el" href="lustre__user_8h_source.html#l01166">hsm_request::hr_itemcount</a>, <a class="el" href="lustre__user_8h_source.html#l01171">hsm_user_item::hui_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01176">hsm_user_request::hur_request</a>, <a class="el" href="lustre__user_8h_source.html#l01177">hsm_user_request::hur_user_item</a>, <a class="el" href="lustre__user_8h_source.html#l01012">ioc_changelog::icc_mdtindex</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00109">obd_ioctl_data::ioc_inlbuf2</a>, <a class="el" href="lustre__user_8h_source.html#l00260">IOC_OBD_STATFS</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00101">obd_ioctl_data::ioc_pbuf1</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00103">obd_ioctl_data::ioc_pbuf2</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00100">obd_ioctl_data::ioc_plen1</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00102">obd_ioctl_data::ioc_plen2</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00088">lustre_kernelcomm::lk_flags</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00078">LK_FLG_STOP</a>, <a class="el" href="lustre__user_8h_source.html#l00295">LL_IOC_FID2MDTIDX</a>, <a class="el" href="lustre__user_8h_source.html#l00270">LL_IOC_GET_CONNECT_FLAGS</a>, <a class="el" href="lustre__user_8h_source.html#l00284">LL_IOC_HSM_ACTION</a>, <a class="el" href="lustre__user_8h_source.html#l00276">LL_IOC_HSM_CT_START</a>, <a class="el" href="lustre__user_8h_source.html#l00279">LL_IOC_HSM_PROGRESS</a>, <a class="el" href="lustre__user_8h_source.html#l00280">LL_IOC_HSM_REQUEST</a>, <a class="el" href="lustre__user_8h_source.html#l00274">LL_IOC_HSM_STATE_GET</a>, <a class="el" href="lustre__user_8h_source.html#l00275">LL_IOC_HSM_STATE_SET</a>, <a class="el" href="lustre__user_8h_source.html#l00282">LL_IOC_LOV_SWAP_LAYOUTS</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00686">lmv_fid2path()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__fld_8c_source.html#l00056">lmv_fld_lookup()</a>, <a class="el" href="lmv__obd_8c_source.html#l00845">lmv_hsm_ct_register()</a>, <a class="el" href="lmv__obd_8c_source.html#l00817">lmv_hsm_ct_unregister()</a>, <a class="el" href="lmv__obd_8c_source.html#l00792">lmv_hsm_req_build()</a>, <a class="el" href="lmv__obd_8c_source.html#l00775">lmv_hsm_req_count()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd_8h_source.html#l00332">obd2cli_tgt</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_force</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00374">OBD_IOC_CHANGELOG_CLEAR</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00360">OBD_IOC_CHANGELOG_SEND</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00362">OBD_IOC_FID2PATH</a>, <a class="el" href="lustre__ioctl_8h_source.html#l00370">OBD_IOC_QUOTACTL</a>, <a class="el" href="obd__class_8h_source.html#l01132">obd_iocontrol()</a>, <a class="el" href="obd__class_8h_source.html#l01213">obd_quotactl()</a>, <a class="el" href="obd__class_8h_source.html#l01062">obd_statfs()</a>, <a class="el" href="obd_8h_source.html#l00357">OBD_STATFS_CACHE_SECONDS</a>, <a class="el" href="lustre__user_8h_source.html#l00686">if_quotactl::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="obd_8h_source.html#l00819">md_op_data::op_data</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="lustre__user_8h_source.html#l00682">if_quotactl::qc_idx</a>, <a class="el" href="lustre__user_8h_source.html#l00671">QC_MDTIDX</a>, <a class="el" href="lustre__user_8h_source.html#l00673">QC_UUID</a>, <a class="el" href="lustre__user_8h_source.html#l00681">if_quotactl::qc_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l01866">QCTL_COPY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

</div>
</div>
<a class="anchor" id="a65d95805f65731dcf53d86b1a6349280"></a><!-- doxytag: member="lmv_obd.c::lmv_link" ref="a65d95805f65731dcf53d86b1a6349280" args="(struct obd_export *exp, struct md_op_data *op_data, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01937">1937</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-curproc_8c_source.html#l00112">cfs_curproc_cap_pack()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="curproc_8h_source.html#l00085">from_kgid()</a>, <a class="el" href="curproc_8h_source.html#l00080">from_kuid()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01898">lmv_early_cancel()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="lmv__internal_8h_source.html#l00133">lsm_name_to_stripe_info()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="obd__class_8h_source.html#l01375">md_link()</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="obd_8h_source.html#l00787">MF_MDC_CANCEL_FID1</a>, <a class="el" href="obd_8h_source.html#l00788">MF_MDC_CANCEL_FID2</a>, <a class="el" href="obd_8h_source.html#l00818">md_op_data::op_cap</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="obd_8h_source.html#l00817">md_op_data::op_fsgid</a>, <a class="el" href="obd_8h_source.html#l00816">md_op_data::op_fsuid</a>, <a class="el" href="obd_8h_source.html#l00814">md_op_data::op_mea2</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a6cbec485d68de683ee9aa59560c1b9b4"></a><!-- doxytag: member="lmv_obd.c::lmv_locate_mds" ref="a6cbec485d68de683ee9aa59560c1b9b4" args="(struct lmv_obd *lmv, struct md_op_data *op_data, struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a>* lmv_locate_mds </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Locate mds by fid or name. </p>
<p>For striped directory (lsm != NULL), it will locate the stripe by name hash (see <a class="el" href="lmv__internal_8h.html#a8314a1634e7809a525c9b510c62f6f54">lsm_name_to_stripe_info()</a>). Note: if the hash_type is unknown, it will return -EBADFD, and lmv_intent_lookup might need walk through all of stripes to locate the entry.</p>
<p>For normal direcotry, it will locate MDS by FID directly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lmv</em>&nbsp;</td><td>LMV device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op_data</em>&nbsp;</td><td>client MD stack parameters, name, namelen mds_num etc. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>object FID used to locate MDS.</td></tr>
  </table>
  </dd>
</dl>
<p>retval pointer to the <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a> if succeed. ERR_PTR(errno) if failed. </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01700">1700</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00039">lmv_oinfo::lmo_mds</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="lmv__obd_8c_source.html#l01653">lmv_locate_target_for_name()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l02368">MDS_CREATE_VOLATILE</a>, <a class="el" href="obd_8h_source.html#l00831">md_op_data::op_bias</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, and <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01749">lmv_create()</a>, <a class="el" href="lmv__obd_8c_source.html#l01805">lmv_enqueue()</a>, <a class="el" href="lmv__obd_8c_source.html#l01837">lmv_getattr_name()</a>, <a class="el" href="lmv__obd_8c_source.html#l03143">lmv_intent_getattr_async()</a>, <a class="el" href="lmv__intent_8c_source.html#l00354">lmv_intent_lookup()</a>, <a class="el" href="lmv__intent_8c_source.html#l00265">lmv_intent_open()</a>, <a class="el" href="lmv__obd_8c_source.html#l01937">lmv_link()</a>, <a class="el" href="lmv__intent_8c_source.html#l00155">lmv_revalidate_slaves()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a88408ee5a618fea7f219445b92570a10"></a><!-- doxytag: member="lmv_obd.c::lmv_locate_target_for_name" ref="a88408ee5a618fea7f219445b92570a10" args="(struct lmv_obd *lmv, struct lmv_stripe_md *lsm, const char *name, int namelen, struct lu_fid *fid, u32 *mds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlmv__tgt__desc.html">lmv_tgt_desc</a>* lmv_locate_target_for_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&nbsp;</td>
          <td class="paramname"> <em>mds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Choosing the MDT by name or FID in . </p>
<p>For non-striped directory, it will locate MDT by fid. For striped-directory, it will locate MDT by name. And also it will reset op_fid1 with the FID of the choosen stripe. </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01653">1653</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="fail_8c_source.html#l00039">cfs_fail_val</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00039">lmv_oinfo::lmo_mds</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="lmv__internal_8h_source.html#l00133">lsm_name_to_stripe_info()</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00560">OBD_FAIL_LFSCK_BAD_NAME_HASH</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="lmv__obd_8c_source.html#l01989">lmv_rename()</a>, and <a class="el" href="lmv__obd_8c_source.html#l02551">lmv_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ebc911562ec532addf480e9d4cfa519"></a><!-- doxytag: member="lmv_obd.c::lmv_lock_match" ref="a2ebc911562ec532addf480e9d4cfa519" args="(struct obd_export *exp, __u64 flags, const struct lu_fid *fid, enum ldlm_type type, union ldlm_policy_data *policy, enum ldlm_mode mode, struct lustre_handle *lockh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> lmv_lock_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03019">3019</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__internal_8h_source.html#l00093">lmv_find_target_index()</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01554">md_lock_match()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a3190d6d24fe70f402b9f47672045f0d8"></a><!-- doxytag: member="lmv_obd.c::lmv_merge_attr" ref="a3190d6d24fe70f402b9f47672045f0d8" args="(struct obd_export *exp, const struct lmv_stripe_md *lsm, struct cl_attr *attr, ldlm_blocking_callback cb_blocking)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_merge_attr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__attr.html">cl_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a>&nbsp;</td>
          <td class="paramname"> <em>cb_blocking</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03272">3272</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l00153">cl_attr::cat_atime</a>, <a class="el" href="cl__object_8h_source.html#l00161">cl_attr::cat_blocks</a>, <a class="el" href="cl__object_8h_source.html#l00155">cl_attr::cat_ctime</a>, <a class="el" href="cl__object_8h_source.html#l00151">cl_attr::cat_mtime</a>, <a class="el" href="cl__object_8h_source.html#l00172">cl_attr::cat_nlink</a>, <a class="el" href="cl__object_8h_source.html#l00143">cl_attr::cat_size</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00040">lmv_oinfo::lmo_root</a>, <a class="el" href="lmv__intent_8c_source.html#l00155">lmv_revalidate_slaves()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="lustre__compat_8h_source.html#l00094">LTIME_S</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

</div>
</div>
<a class="anchor" id="aa869ce80b25cd9b74ed5f744408b6b9d"></a><!-- doxytag: member="lmv_obd.c::lmv_notify" ref="aa869ce80b25cd9b74ed5f744408b6b9d" args="(struct obd_device *obd, struct obd_device *watched, enum obd_notify_event ev, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_notify </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>watched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="obd_8h.html#a2edf5111b5e48090a5f07f11a420c5cc">obd_notify_event</a>&nbsp;</td>
          <td class="paramname"> <em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00147">147</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="obd_8h_source.html#l00161">client_obd::cl_target_uuid</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00243">obd_export::exp_connect_data</a>, <a class="el" href="fld__request_8c_source.html#l00532">fld_client_flush()</a>, <a class="el" href="lustre__import_8h_source.html#l00316">obd_import::imp_connect_data</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00414">lmv_obd::lmv_fld</a>, <a class="el" href="lmv__obd_8c_source.html#l00085">lmv_set_mdc_active()</a>, <a class="el" href="obd_8h_source.html#l00460">LUSTRE_MDC_NAME</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd__class_8h_source.html#l01162">obd_notify()</a>, <a class="el" href="obd_8h_source.html#l00539">OBD_NOTIFY_ACTIVE</a>, <a class="el" href="obd_8h_source.html#l00543">OBD_NOTIFY_DISCON</a>, <a class="el" href="obd_8h_source.html#l00541">OBD_NOTIFY_INACTIVE</a>, <a class="el" href="obd_8h_source.html#l00545">OBD_NOTIFY_OCD</a>, <a class="el" href="obd_8h_source.html#l00652">obd_device::obd_observer</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

</div>
</div>
<a class="anchor" id="a1d77d1d8603229370a492c77d9b37b37"></a><!-- doxytag: member="lmv_obd.c::lmv_null_inode" ref="a1d77d1d8603229370a492c77d9b37b37" args="(struct obd_export *exp, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_null_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01596">1596</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01293">md_null_inode()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a3a860ca092aac41cd077ebd54513dc61"></a><!-- doxytag: member="lmv_obd.c::lmv_placement_policy" ref="a3a860ca092aac41cd077ebd54513dc61" args="(struct obd_device *obd, struct md_op_data *op_data, u32 *mds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_placement_policy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&nbsp;</td>
          <td class="paramname"> <em>mds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is _inode_ placement policy function (not name). </p>

<p><p>If stripe_offset is provided during setdirstripe (setdirstripe -i xx), xx MDS will be choosen.</p>
</p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01232">1232</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00795">CLI_SET_MEA</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lustre__user_8h_source.html#l00458">lmv_user_md</a>, <a class="el" href="obd_8h_source.html#l00838">md_op_data::op_cli_flags</a>, <a class="el" href="obd_8h_source.html#l00819">md_op_data::op_data</a>, <a class="el" href="obd_8h_source.html#l00845">md_op_data::op_default_stripe_offset</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l01310">lmv_fid_alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="adaf72ea703c580a88031d1ffc03adf36"></a><!-- doxytag: member="lmv_obd.c::lmv_precleanup" ref="adaf72ea703c580a88031d1ffc03adf36" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_precleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02707">2707</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__request_8c_source.html#l00269">fld_client_proc_fini()</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00414">lmv_obd::lmv_fld</a>, <a class="el" href="lprocfs__status_8h_source.html#l00915">lprocfs_free_md_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00959">lprocfs_obd_cleanup()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a89db0aa4067690e5a01f919ec4ab9d12"></a><!-- doxytag: member="lmv_obd.c::lmv_process_config" ref="a89db0aa4067690e5a01f919ec4ab9d12" args="(struct obd_device *obd, size_t len, void *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_process_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01414">1414</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__cfg_8h_source.html#l00091">LCFG_ADD_MDC</a>, <a class="el" href="lustre__cfg_8h_source.html#l00130">lustre_cfg::lcfg_command</a>, <a class="el" href="lmv__obd_8c_source.html#l00424">lmv_add_target()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00182">lustre_cfg_buf()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00146">LUSTRE_CFG_BUFLEN</a>, <a class="el" href="lustre__user_8h_source.html#l00506">obd_str2uuid()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

</div>
</div>
<a class="anchor" id="a93a6be8a582b30476451a0cfee6dd136"></a><!-- doxytag: member="lmv_obd.c::lmv_quotactl" ref="a93a6be8a582b30476451a0cfee6dd136" args="(struct obd_device *unused, struct obd_export *exp, struct obd_quotactl *oqctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_quotactl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>unused</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__quotactl.html">obd_quotactl</a> *&nbsp;</td>
          <td class="paramname"> <em>oqctl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For lmv, only need to send request to master MDT, and the master MDT will process with other slave MDTs. </p>
<p>The only exception is Q_GETOQUOTA for which we directly fetch data from the slave MDTs. </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03224">3224</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="lustre__user_8h_source.html#l00662">obd_dqblk::dqb_curinodes</a>, <a class="el" href="lustre__user_8h_source.html#l00659">obd_dqblk::dqb_curspace</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01213">obd_quotactl()</a>, <a class="el" href="lustre__user_8h_source.html#l00570">Q_GETOQUOTA</a>, <a class="el" href="lustre__idl_8h_source.html#l01856">obd_quotactl::qc_cmd</a>, <a class="el" href="lustre__idl_8h_source.html#l01861">obd_quotactl::qc_dqblk</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a77ddaef3bfdf78719995a9b055348eb9"></a><!-- doxytag: member="lmv_obd.c::lmv_read_page" ref="a77ddaef3bfdf78719995a9b055348eb9" args="(struct obd_export *exp, struct md_op_data *op_data, struct md_callback *cb_op, __u64 offset, struct page **ppage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_read_page </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__callback.html">md_callback</a> *&nbsp;</td>
          <td class="paramname"> <em>cb_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page **&nbsp;</td>
          <td class="paramname"> <em>ppage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02498">2498</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__obd_8c_source.html#l02373">lmv_read_striped_page()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01424">md_read_page()</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="a9306d1671483ded885d429e7e6d1cdaa"></a><!-- doxytag: member="lmv_obd.c::lmv_read_striped_page" ref="a9306d1671483ded885d429e7e6d1cdaa" args="(struct obd_export *exp, struct md_op_data *op_data, struct md_callback *cb_op, __u64 offset, struct page **ppage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_read_striped_page </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__callback.html">md_callback</a> *&nbsp;</td>
          <td class="paramname"> <em>cb_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page **&nbsp;</td>
          <td class="paramname"> <em>ppage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Build dir entry page from a striped directory. </p>
<p>This function gets one entry by  from a striped directory. It will read entries from all of stripes, and choose one closest to the required offset(&amp;offset). A few notes 1. skip . and .. for non-zero stripes, because there can only have one . and .. in a directory. 2. op_data will be shared by all of stripes, instead of allocating new one, so need to restore before reusing. 3. release the entry page if that is not being chosen.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>obd export refer to LMV </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op_data</em>&nbsp;</td><td>hold those MD parameters of read_entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cb_op</em>&nbsp;</td><td>ldlm callback being used in enqueue in mdc_read_entry </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>ldp</em>&nbsp;</td><td>the entry being read </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>ppage</em>&nbsp;</td><td>the page holding the entry. Note: because the entry will be accessed in upper layer, so we need hold the page until the usages of entry is finished, see ll_dir_entry_next.</td></tr>
  </table>
  </dd>
</dl>
<p>retval =0 if get entry successfully &lt;0 cannot get entry </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02373">2373</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l00908">lu_dirent::lde_attrs</a>, <a class="el" href="lustre__idl_8h_source.html#l00898">lu_dirent::lde_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l00900">lu_dirent::lde_hash</a>, <a class="el" href="lustre__idl_8h_source.html#l00913">lu_dirent::lde_name</a>, <a class="el" href="lustre__idl_8h_source.html#l00904">lu_dirent::lde_namelen</a>, <a class="el" href="lustre__idl_8h_source.html#l00902">lu_dirent::lde_reclen</a>, <a class="el" href="lustre__idl_8h_source.html#l00960">LDF_COLLIDE</a>, <a class="el" href="lustre__idl_8h_source.html#l00956">LDF_EMPTY</a>, <a class="el" href="lustre__idl_8h_source.html#l00947">lu_dirpage::ldp_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l00945">lu_dirpage::ldp_hash_start</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00058">le64_to_cpu</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l02239">lmv_get_min_striped_entry()</a>, <a class="el" href="lustre__idl_8h_source.html#l00983">lu_dirent_calc_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l00997">MDS_DIR_END_OFF</a>, <a class="el" href="obd_8h_source.html#l00819">md_op_data::op_data</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00805">md_op_data::op_fid3</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l02498">lmv_read_page()</a>.</p>

</div>
</div>
<a class="anchor" id="a4353f342e8661da339737eb530de97ca"></a><!-- doxytag: member="lmv_obd.c::lmv_rename" ref="a4353f342e8661da339737eb530de97ca" args="(struct obd_export *exp, struct md_op_data *op_data, const char *old, size_t oldlen, const char *new, size_t newlen, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_rename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>oldlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>newlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01989">1989</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-curproc_8c_source.html#l00112">cfs_curproc_cap_pack()</a>, <a class="el" href="obd_8h_source.html#l00799">CLI_MIGRATE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="curproc_8h_source.html#l00085">from_kgid()</a>, <a class="el" href="curproc_8h_source.html#l00080">from_kuid()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01898">lmv_early_cancel()</a>, <a class="el" href="lmv__obd_8c_source.html#l01310">lmv_fid_alloc()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__obd_8c_source.html#l01653">lmv_locate_target_for_name()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="obd__class_8h_source.html#l01386">md_rename()</a>, <a class="el" href="lustre__idl_8h_source.html#l02097">MDS_INODELOCK_FULL</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="obd_8h_source.html#l00787">MF_MDC_CANCEL_FID1</a>, <a class="el" href="obd_8h_source.html#l00788">MF_MDC_CANCEL_FID2</a>, <a class="el" href="obd_8h_source.html#l00789">MF_MDC_CANCEL_FID3</a>, <a class="el" href="obd_8h_source.html#l00790">MF_MDC_CANCEL_FID4</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00818">md_op_data::op_cap</a>, <a class="el" href="obd_8h_source.html#l00838">md_op_data::op_cli_flags</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00805">md_op_data::op_fid3</a>, <a class="el" href="obd_8h_source.html#l00806">md_op_data::op_fid4</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="obd_8h_source.html#l00817">md_op_data::op_fsgid</a>, <a class="el" href="obd_8h_source.html#l00816">md_op_data::op_fsuid</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="obd_8h_source.html#l00814">md_op_data::op_mea2</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a5f0eedaeac41ef96418edde28accae10"></a><!-- doxytag: member="lmv_obd.c::lmv_revalidate_lock" ref="a5f0eedaeac41ef96418edde28accae10" args="(struct obd_export *exp, struct lookup_intent *it, struct lu_fid *fid, __u64 *bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_revalidate_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>bits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03182">3182</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01599">md_revalidate_lock()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a1b3bf908edcdf584cba9261f2050f3c8"></a><!-- doxytag: member="lmv_obd.c::lmv_set_info_async" ref="a1b3bf908edcdf584cba9261f2050f3c8" args="(const struct lu_env *env, struct obd_export *exp, __u32 keylen, void *key, __u32 vallen, void *val, struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_set_info_async </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Asynchronously set by key a value associated with a LMV device. </p>
<p>Dispatch request to lower-layer devices as needed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment for this thread </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>export for the LMV device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>keylen</em>&nbsp;</td><td>length of key identifier </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>identifier of key to store value for </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vallen</em>&nbsp;</td><td>size of value to store </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>val</em>&nbsp;</td><td>pointer to data to be stored </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>set</em>&nbsp;</td><td>optional list of related ptlrpc requests</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>negated errno on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02810">2810</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00175">obd_export::exp_handle</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="obd_8h_source.html#l00752">KEY_DEFAULT_EASIZE</a>, <a class="el" href="obd_8h_source.html#l00744">KEY_FLUSH_CTX</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="obd_8h_source.html#l00754">KEY_READ_ONLY</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="aa41138bbba5fea3e7e2e6e7db587ab45"></a><!-- doxytag: member="lmv_obd.c::lmv_set_lock_data" ref="aa41138bbba5fea3e7e2e6e7db587ab45" args="(struct obd_export *exp, __u64 *lockh, void *data, __u64 *bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_set_lock_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>bits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03005">3005</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01529">md_set_lock_data()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="ad17784cf12bb923322ae1b6ba12e6942"></a><!-- doxytag: member="lmv_obd.c::lmv_set_mdc_active" ref="ad17784cf12bb923322ae1b6ba12e6942" args="(struct lmv_obd *lmv, const struct obd_uuid *uuid, int activate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_set_mdc_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlmv__obd.html">lmv_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>activate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Error codes:. </p>
<p>-EINVAL : UUID can't be found in the LMV's target list -ENOTCONN: The UUID is found, but the target connection is bad (!) -EBADF : The UUID is found, but the OBD of the wrong type (!) </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l00085">85</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00175">obd_export::exp_handle</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="lmv__obd_8c_source.html#l00065">lmv_activate_target()</a>, <a class="el" href="obd_8h_source.html#l00415">lmv_obd::lmv_lock</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="obd_8h_source.html#l00400">lmv_tgt_desc::ltd_active</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00396">lmv_tgt_desc::ltd_uuid</a>, <a class="el" href="obd_8h_source.html#l00460">LUSTRE_MDC_NAME</a>, <a class="el" href="obd_8h_source.html#l00594">obd_device::obd_minor</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="obd_8h_source.html#l00598">obd_device::obd_uuid</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="obd_8h_source.html#l00111">obd_type::typ_name</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l00147">lmv_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="af57f91ac7d21cf3527c1b9eb97d2defe"></a><!-- doxytag: member="lmv_obd.c::lmv_set_open_replay_data" ref="af57f91ac7d21cf3527c1b9eb97d2defe" args="(struct obd_export *exp, struct obd_client_handle *och, struct lookup_intent *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lmv_set_open_replay_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__client__handle.html">obd_client_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>och</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlookup__intent.html">lookup_intent</a> *&nbsp;</td>
          <td class="paramname"> <em>it</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03091">3091</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01510">md_set_open_replay_data()</a>, <a class="el" href="obd_8h_source.html#l00991">obd_client_handle::och_fid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a5253b73fcc04860f8fbe1ddf51a80aef"></a><!-- doxytag: member="lmv_obd.c::lmv_setattr" ref="a5253b73fcc04860f8fbe1ddf51a80aef" args="(struct obd_export *exp, struct md_op_data *op_data, void *ea, size_t ealen, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_setattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>ealen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02164">2164</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01399">md_setattr()</a>, <a class="el" href="obd_8h_source.html#l00787">MF_MDC_CANCEL_FID1</a>, <a class="el" href="obd_8h_source.html#l00823">md_op_data::op_attr</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a295efa072c780376181fc96771899903"></a><!-- doxytag: member="lmv_obd.c::lmv_setup" ref="a295efa072c780376181fc96771899903" args="(struct obd_device *obd, struct lustre_cfg *lcfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *&nbsp;</td>
          <td class="paramname"> <em>lcfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01338">1338</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="fld__request_8c_source.html#l00282">fld_client_init()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l02563">lmv_desc::ld_active_tgt_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02572">lmv_desc::ld_uuid</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="obd_8h_source.html#l00414">lmv_obd::lmv_fld</a>, <a class="el" href="obd_8h_source.html#l00422">lmv_obd::lmv_init_mutex</a>, <a class="el" href="obd_8h_source.html#l00415">lmv_obd::lmv_lock</a>, <a class="el" href="obd_8h_source.html#l00416">lmv_obd::lmv_placement</a>, <a class="el" href="lmv__internal_8h.html#abd2bf8b8a13612db803c68e532c0babd">lmv_proc_target_fops</a>, <a class="el" href="lprocfs__status_8h_source.html#l00910">lprocfs_alloc_md_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00957">lprocfs_obd_setup()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00182">lustre_cfg_buf()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00146">LUSTRE_CFG_BUFLEN</a>, <a class="el" href="lustre__fld_8h_source.html#l00062">LUSTRE_CLI_FLD_HASH_DHT</a>, <a class="el" href="obd_8h_source.html#l00425">lmv_obd::max_def_easize</a>, <a class="el" href="obd_8h_source.html#l00424">lmv_obd::max_easize</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00712">obd_device::obd_proc_entry</a>, <a class="el" href="lustre__user_8h_source.html#l00506">obd_str2uuid()</a>, <a class="el" href="obd_8h_source.html#l00716">obd_device::obd_vars</a>, <a class="el" href="obd_8h_source.html#l00404">PLACEMENT_CHAR_POLICY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, <a class="el" href="obd_8h_source.html#l00427">lmv_obd::tgts_size</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

</div>
</div>
<a class="anchor" id="a912a94b2ced458d6853eddc7432dc9b5"></a><!-- doxytag: member="lmv_obd.c::lmv_setxattr" ref="a912a94b2ced458d6853eddc7432dc9b5" args="(struct obd_export *exp, const struct lu_fid *fid, u64 valid, const char *name, const char *input, int input_size, int output_size, int flags, __u32 suppgid, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_setxattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&nbsp;</td>
          <td class="paramname"> <em>valid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>output_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>suppgid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01542">1542</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__class_8h_source.html#l01482">md_setxattr()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a3ab354bac566b6f197724735b8e99486"></a><!-- doxytag: member="lmv_obd.c::lmv_statfs" ref="a3ab354bac566b6f197724735b8e99486" args="(const struct lu_env *env, struct obd_export *exp, struct obd_statfs *osfs, __u64 max_age, __u32 flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_statfs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__statfs.html">obd_statfs</a> *&nbsp;</td>
          <td class="paramname"> <em>osfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>max_age</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l01446">1446</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00729">class_exp2obd()</a>, <a class="el" href="obd_8h_source.html#l00417">lmv_obd::desc</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l02562">lmv_desc::ld_tgt_count</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd__class_8h_source.html#l01062">obd_statfs()</a>, <a class="el" href="obd__class_8h_source.html#l00058">OBD_STATFS_FOR_MDT0</a>, <a class="el" href="lustre__user_8h_source.html#l00111">obd_statfs::os_bavail</a>, <a class="el" href="lustre__user_8h_source.html#l00109">obd_statfs::os_blocks</a>, <a class="el" href="lustre__user_8h_source.html#l00113">obd_statfs::os_ffree</a>, <a class="el" href="lustre__user_8h_source.html#l00112">obd_statfs::os_files</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd_8h_source.html#l00428">lmv_obd::tgts</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a37f938dadecf8e635ec310b25da1af6e"></a><!-- doxytag: member="lmv_obd.c::lmv_unlink" ref="a37f938dadecf8e635ec310b25da1af6e" args="(struct obd_export *exp, struct md_op_data *op_data, struct ptlrpc_request **request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__op__data.html">md_op_data</a> *&nbsp;</td>
          <td class="paramname"> <em>op_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> **&nbsp;</td>
          <td class="paramname"> <em>request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlink a file/directory. </p>
<p>Unlink a file or directory under the parent dir. The unlink request usually will be sent to the MDT where the child is located, but if the client does not have the child FID then request will be sent to the MDT where the parent is located.</p>
<p>If the parent is a striped directory then it also needs to locate which stripe the name of the child is located, and replace the parent FID (-&gt;op_fid1) with the stripe FID. Note: if the stripe is unknown, it will walk through all of sub-stripes until the child is being unlinked finally.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>export refer to LMV </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op_data</em>&nbsp;</td><td>different parameters transferred beween client MD stacks, name, namelen, FIDs etc. op_fid1 is the parent FID, op_fid2 is the child FID. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>request</em>&nbsp;</td><td>point to the request of unlink.</td></tr>
  </table>
  </dd>
</dl>
<p>retval 0 if succeed negative errno if failed. </p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02551">2551</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="linux-curproc_8c_source.html#l00112">cfs_curproc_cap_pack()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="curproc_8h_source.html#l00085">from_kgid()</a>, <a class="el" href="curproc_8h_source.html#l00080">from_kuid()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00039">lmv_oinfo::lmo_mds</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__obd_8c_source.html#l00524">lmv_check_connect()</a>, <a class="el" href="lmv__obd_8c_source.html#l01898">lmv_early_cancel()</a>, <a class="el" href="lmv__internal_8h_source.html#l00114">lmv_find_target()</a>, <a class="el" href="lmv__internal_8h_source.html#l00074">lmv_get_target()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00173">lmv_is_known_hash_type()</a>, <a class="el" href="lmv__obd_8c_source.html#l01700">lmv_locate_mds()</a>, <a class="el" href="lmv__obd_8c_source.html#l01653">lmv_locate_target_for_name()</a>, <a class="el" href="lmv__internal_8h_source.html#l00152">lmv_need_try_all_stripes()</a>, <a class="el" href="lustre__lmv_8h_source.html#l00047">lmv_stripe_md::lsm_md_hash_type</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd_8h_source.html#l00397">lmv_tgt_desc::ltd_exp</a>, <a class="el" href="obd_8h_source.html#l00398">lmv_tgt_desc::ltd_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="obd__class_8h_source.html#l01439">md_unlink()</a>, <a class="el" href="lustre__idl_8h_source.html#l02097">MDS_INODELOCK_FULL</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="obd_8h_source.html#l00787">MF_MDC_CANCEL_FID1</a>, <a class="el" href="obd_8h_source.html#l00789">MF_MDC_CANCEL_FID3</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00818">md_op_data::op_cap</a>, <a class="el" href="obd_8h_source.html#l00803">md_op_data::op_fid1</a>, <a class="el" href="obd_8h_source.html#l00804">md_op_data::op_fid2</a>, <a class="el" href="obd_8h_source.html#l00828">md_op_data::op_flags</a>, <a class="el" href="obd_8h_source.html#l00817">md_op_data::op_fsgid</a>, <a class="el" href="obd_8h_source.html#l00816">md_op_data::op_fsuid</a>, <a class="el" href="obd_8h_source.html#l00807">md_op_data::op_mds</a>, <a class="el" href="obd_8h_source.html#l00813">md_op_data::op_mea1</a>, <a class="el" href="obd_8h_source.html#l00810">md_op_data::op_name</a>, <a class="el" href="obd_8h_source.html#l00811">md_op_data::op_namelen</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="ad0722531e71fe7341af7b17354466cdf"></a><!-- doxytag: member="lmv_obd.c::lmv_unpack_md_v1" ref="ad0722531e71fe7341af7b17354466cdf" args="(struct obd_export *exp, struct lmv_stripe_md *lsm, const struct lmv_mds_md_v1 *lmm1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_unpack_md_v1 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlmv__mds__md__v1.html">lmv_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>lmm1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02850">2850</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__lmv_8h_source.html#l00038">lmv_oinfo::lmo_fid</a>, <a class="el" href="lustre__lmv_8h_source.html#l00039">lmv_oinfo::lmo_mds</a>, <a class="el" href="obd_8h_source.html#l00702">obd_device::lmv</a>, <a class="el" href="lmv__fld_8c_source.html#l00056">lmv_fld_lookup()</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__user_8h_source.html#l00447">LMV_HASH_TYPE_UNKNOWN</a>, <a class="el" href="lustre__idl_8h_source.html#l02588">lmv_mds_md_v1::lmv_layout_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02592">lmv_mds_md_v1::lmv_pool_name</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, <a class="el" href="lustre__lmv_8h_source.html#l00047">lmv_stripe_md::lsm_md_hash_type</a>, <a class="el" href="lustre__lmv_8h_source.html#l00048">lmv_stripe_md::lsm_md_layout_version</a>, <a class="el" href="lustre__lmv_8h_source.html#l00044">lmv_stripe_md::lsm_md_magic</a>, <a class="el" href="lustre__lmv_8h_source.html#l00046">lmv_stripe_md::lsm_md_master_mdt_index</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00051">lmv_stripe_md::lsm_md_pool_name</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00585">OBD_FAIL_UNKNOWN_LMV_STRIPE</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l02894">lmv_unpackmd()</a>.</p>

</div>
</div>
<a class="anchor" id="a9841ccb2cbc456a8ce1f0339b2e48eba"></a><!-- doxytag: member="lmv_obd.c::lmv_unpackmd" ref="a9841ccb2cbc456a8ce1f0339b2e48eba" args="(struct obd_export *exp, struct lmv_stripe_md **lsmp, const union lmv_mds_md *lmm, size_t lmm_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lmv_unpackmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a> **&nbsp;</td>
          <td class="paramname"> <em>lsmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionlmv__mds__md.html">lmv_mds_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>lmm_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Unpack default dirstripe(lmv_user_md) to <a class="el" href="structlmv__stripe__md.html">lmv_stripe_md</a>, stripecount should be 0 then.</p>
</p>

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l02894">2894</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__lmv_8h_source.html#l00040">lmv_oinfo::lmo_root</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02653">lmv_mds_md::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02596">LMV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l02654">lmv_mds_md::lmv_md_v1</a>, <a class="el" href="lustre__idl_8h_source.html#l02672">lmv_mds_md_stripe_count_get()</a>, <a class="el" href="lmv__internal_8h_source.html#l00125">lmv_stripe_md_size()</a>, <a class="el" href="lmv__obd_8c_source.html#l02850">lmv_unpack_md_v1()</a>, <a class="el" href="lustre__user_8h_source.html#l00343">LMV_USER_MAGIC</a>, <a class="el" href="lustre__lmv_8h_source.html#l00047">lmv_stripe_md::lsm_md_hash_type</a>, <a class="el" href="lustre__lmv_8h_source.html#l00052">lmv_stripe_md::lsm_md_oinfo</a>, <a class="el" href="lustre__lmv_8h_source.html#l00045">lmv_stripe_md::lsm_md_stripe_count</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lmv__obd_8c_source.html#l02972">lmv_free_memmd()</a>.</p>

</div>
</div>
<a class="anchor" id="adc10f40acba3bb9b2640e985276b0a7c"></a><!-- doxytag: member="lmv_obd.c::MODULE_AUTHOR" ref="adc10f40acba3bb9b2640e985276b0a7c" args="(&quot;OpenSFS, Inc. &lt;http://www.lustre.org/&gt;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_AUTHOR </td>
          <td>(</td>
          <td class="paramtype">&quot;&nbsp;</td>
          <td class="paramname"> <em>OpenSFS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Inc.&lt; http://www.lustre.org/&gt;&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af187f592489ccf7710ef621f8a794595"></a><!-- doxytag: member="lmv_obd.c::MODULE_DESCRIPTION" ref="af187f592489ccf7710ef621f8a794595" args="(&quot;Lustre Logical Metadata Volume&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_DESCRIPTION </td>
          <td>(</td>
          <td class="paramtype">&quot;Lustre Logical Metadata Volume&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a62194d5d51d7f806c2e0533716f8e957"></a><!-- doxytag: member="lmv_obd.c::module_exit" ref="a62194d5d51d7f806c2e0533716f8e957" args="(lmv_exit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_exit </td>
          <td>(</td>
          <td class="paramtype">lmv_exit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aef13f04b9c4a04743a1fd657a4b72e48"></a><!-- doxytag: member="lmv_obd.c::module_init" ref="aef13f04b9c4a04743a1fd657a4b72e48" args="(lmv_init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_init </td>
          <td>(</td>
          <td class="paramtype">lmv_init&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad94b36675e7eb067ea3ce6ff9e244a44"></a><!-- doxytag: member="lmv_obd.c::MODULE_LICENSE" ref="ad94b36675e7eb067ea3ce6ff9e244a44" args="(&quot;GPL&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_LICENSE </td>
          <td>(</td>
          <td class="paramtype">&quot;GPL&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae9c321be2136fb8501887ee69dac11a2"></a><!-- doxytag: member="lmv_obd.c::MODULE_VERSION" ref="ae9c321be2136fb8501887ee69dac11a2" args="(LUSTRE_VERSION_STRING)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_VERSION </td>
          <td>(</td>
          <td class="paramtype">LUSTRE_VERSION_STRING&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a4a222531b387bcb682a8a2cf3bc858e3"></a><!-- doxytag: member="lmv_obd.c::lmv_md_ops" ref="a4a222531b387bcb682a8a2cf3bc858e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmd__ops.html">md_ops</a> <a class="el" href="lmv__obd_8c.html#a4a222531b387bcb682a8a2cf3bc858e3">lmv_md_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03332">3332</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2315e48b42bb79af78f27d9b317566d8"></a><!-- doxytag: member="lmv_obd.c::lmv_obd_ops" ref="a2315e48b42bb79af78f27d9b317566d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__ops.html">obd_ops</a> <a class="el" href="lmv__obd_8c.html#a2315e48b42bb79af78f27d9b317566d8">lmv_obd_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .o_owner                = THIS_MODULE,
        .o_setup                = <a class="code" href="lmv__obd_8c.html#a295efa072c780376181fc96771899903">lmv_setup</a>,
        .o_cleanup              = <a class="code" href="lmv__obd_8c.html#a6044af72bfa0163d8aa9859102b53cc9">lmv_cleanup</a>,
        .o_precleanup           = <a class="code" href="lmv__obd_8c.html#adaf72ea703c580a88031d1ffc03adf36">lmv_precleanup</a>,
        .o_process_config       = <a class="code" href="lmv__obd_8c.html#a89db0aa4067690e5a01f919ec4ab9d12">lmv_process_config</a>,
        .o_connect              = <a class="code" href="lmv__obd_8c.html#a3215b4f2832988ae74e314ebf87a9d06" title="This is fake connect function.">lmv_connect</a>,
        .o_disconnect           = <a class="code" href="lmv__obd_8c.html#a8a025411eda85113b175add2a8b31199">lmv_disconnect</a>,
        .o_statfs               = <a class="code" href="lmv__obd_8c.html#a3ab354bac566b6f197724735b8e99486">lmv_statfs</a>,
        .o_get_info             = <a class="code" href="lmv__obd_8c.html#a185b85db495af14c9c1ae17f84ba2afa" title="Get by key a value associated with a LMV device.">lmv_get_info</a>,
        .o_set_info_async       = <a class="code" href="lmv__obd_8c.html#a1b3bf908edcdf584cba9261f2050f3c8" title="Asynchronously set by key a value associated with a LMV device.">lmv_set_info_async</a>,
        .o_notify               = <a class="code" href="lmv__obd_8c.html#aa869ce80b25cd9b74ed5f744408b6b9d">lmv_notify</a>,
        .o_get_uuid             = <a class="code" href="lmv__obd_8c.html#a4f4cbe72defaebbbd48d57c3e562dacf">lmv_get_uuid</a>,
        .o_iocontrol            = <a class="code" href="lmv__obd_8c.html#a1bc406e83f291f9544100be23621337d">lmv_iocontrol</a>,
        .o_quotactl             = <a class="code" href="lmv__obd_8c.html#a93a6be8a582b30476451a0cfee6dd136" title="For lmv, only need to send request to master MDT, and the master MDT will process...">lmv_quotactl</a>
}
</pre></div>
<p>Definition at line <a class="el" href="lmv__obd_8c_source.html#l03315">3315</a> of file <a class="el" href="lmv__obd_8c_source.html">lmv_obd.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
