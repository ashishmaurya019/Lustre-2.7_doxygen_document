<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdt/mdt_hsm_cdt_actions.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdt/mdt_hsm_cdt_actions.c File Reference</h1><code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__export_8h_source.html">lustre_export.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lprocfs__status_8h_source.html">lprocfs_status.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>&quot;</code><br/>

<p><a href="mdt__hsm__cdt__actions_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdata__update__cb.html">data_update_cb</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data passed to <a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback to find requests  <a href="structdata__update__cb.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structagent__action__iterator.html">agent_action_iterator</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MDS</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a139ae6abb4ca41a970056143dd3e4c09">AGENT_ACTIONS_IT_MAGIC</a>&nbsp;&nbsp;&nbsp;0x19660426</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">seq_file iterator for agent_action entry  <a href="#a139ae6abb4ca41a970056143dd3e4c09"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a259742e1a3db858106a64c43fcfa6ef6">dump_llog_agent_req_rec</a> (const char *prefix, const struct <a class="el" href="structllog__agent__req__rec.html">llog_agent_req_rec</a> *larr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#af95cfee931802ac1101ce1461029e546">cdt_llog_process</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, <a class="el" href="obd__class_8h.html#a6753dc16f88d31c1a4fdd28a48dc1cf9">llog_cb_t</a> cb, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a9bbc9be6ac2c422cb313832af653a691">mdt_agent_record_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> compound_id, __u32 archive_id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add an entry in agent llog  <a href="#a9bbc9be6ac2c422cb313832af653a691"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#adb2c218ab9e19bf9ce136987633276e2">mdt_agent_record_update_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *llh, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *hdr, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to update a record  <a href="#adb2c218ab9e19bf9ce136987633276e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a980845ce8e872b6946d082f8af260a71">mdt_agent_record_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *cookies, int cookies_count, enum <a class="el" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> <a class="el" href="lustre__rsync_8c.html#a55591f17a60f597b63f070969c54fd6c">status</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update an entry in agent llog  <a href="#a980845ce8e872b6946d082f8af260a71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a6174cbb45337375a8048b524a9e6d483">mdt_hsm_actions_proc_start</a> (struct seq_file *s, loff_t *pos)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">seq_file method called to start access to /proc file get llog context + llog handle  <a href="#a6174cbb45337375a8048b524a9e6d483"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#adbcb22d522d8d4e0fc646e6c1e0762da">mdt_hsm_actions_proc_next</a> (struct seq_file *s, void *v, loff_t *pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a2890688f20761c0be3e48970727ff58e">hsm_actions_show_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structllog__handle.html">llog_handle</a> *llh, struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *hdr, void *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to fill a seq_file buffer  <a href="#a2890688f20761c0be3e48970727ff58e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a49f0ee30b509985d569ae933cd46fff9">mdt_hsm_actions_proc_show</a> (struct seq_file *s, void *v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a49f0ee30b509985d569ae933cd46fff9" title="mdt_hsm_actions_proc_show() is called at for each seq record process the llog, with...">mdt_hsm_actions_proc_show()</a> is called at for each seq record process the llog, with a cb which fill the file_seq buffer to be faster, one show will fill multiple records  <a href="#a49f0ee30b509985d569ae933cd46fff9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a46efc33dc697539d8136044bfdc00980">mdt_hsm_actions_proc_stop</a> (struct seq_file *s, void *v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">seq_file method called to stop access to /proc file clean + put llog context  <a href="#a46efc33dc697539d8136044bfdc00980"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a0889e1f128c644dd10f0c6a3040bdc68">lprocfs_open_hsm_actions</a> (struct inode *inode, struct file *file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a03dddfe9888b7164a65e88514ecafa19">lprocfs_release_hsm_actions</a> (struct inode *inode, struct file *file)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a03dddfe9888b7164a65e88514ecafa19" title="lprocfs_release_hsm_actions() is called at end of /proc access.">lprocfs_release_hsm_actions()</a> is called at end of /proc access.  <a href="#a03dddfe9888b7164a65e88514ecafa19"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct seq_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#a57eb6d8cf0fa127da5f763859ac1d4ac">mdt_hsm_actions_proc_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__hsm__cdt__actions_8c.html#abff0f16680b2b0d72232473a476bdb5a">mdt_hsm_actions_fops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a139ae6abb4ca41a970056143dd3e4c09"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::AGENT_ACTIONS_IT_MAGIC" ref="a139ae6abb4ca41a970056143dd3e4c09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_ACTIONS_IT_MAGIC&nbsp;&nbsp;&nbsp;0x19660426</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>seq_file iterator for agent_action entry </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00302">302</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00357">hsm_actions_show_cb()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00467">lprocfs_open_hsm_actions()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00414">mdt_hsm_actions_proc_show()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00317">mdt_hsm_actions_proc_start()</a>, and <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00445">mdt_hsm_actions_proc_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MDS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00037">37</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af95cfee931802ac1101ce1461029e546"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::cdt_llog_process" ref="af95cfee931802ac1101ce1461029e546" args="(const struct lu_env *env, struct mdt_device *mdt, llog_cb_t cb, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cdt_llog_process </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="obd__class_8h.html#a6753dc16f88d31c1a4fdd28a48dc1cf9">llog_cb_t</a>&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">87</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03056">LLOG_AGENT_ORIG_CTXT</a>, <a class="el" href="llog__cat_8c_source.html#l00838">llog_cat_process()</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00731">mdt_hsm_pending_restore()</a>.</p>

</div>
</div>
<a class="anchor" id="a259742e1a3db858106a64c43fcfa6ef6"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::dump_llog_agent_req_rec" ref="a259742e1a3db858106a64c43fcfa6ef6" args="(const char *prefix, const struct llog_agent_req_rec *larr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_llog_agent_req_rec </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structllog__agent__req__rec.html">llog_agent_req_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>larr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00047">47</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03262">llog_agent_req_rec::arr_compound_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03256">llog_agent_req_rec::arr_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03263">llog_agent_req_rec::arr_req_create</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01257">hai_dump_data_field()</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="a2890688f20761c0be3e48970727ff58e"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::hsm_actions_show_cb" ref="a2890688f20761c0be3e48970727ff58e" args="(const struct lu_env *env, struct llog_handle *llh, struct llog_rec_hdr *hdr, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int hsm_actions_show_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to fill a seq_file buffer </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00357">357</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00309">agent_action_iterator::aai_cat_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00310">agent_action_iterator::aai_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00304">agent_action_iterator::aai_magic</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00302">AGENT_ACTIONS_IT_MAGIC</a>, <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03262">llog_agent_req_rec::arr_compound_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01257">hai_dump_data_field()</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="lustre__log_8h_source.html#l00266">llog_handle::lgh_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l03316">llog_log_hdr::llh_cat_idx</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00414">mdt_hsm_actions_proc_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a0889e1f128c644dd10f0c6a3040bdc68"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::lprocfs_open_hsm_actions" ref="a0889e1f128c644dd10f0c6a3040bdc68" args="(struct inode *inode, struct file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lprocfs_open_hsm_actions </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00467">467</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00306">agent_action_iterator::aai_env</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00304">agent_action_iterator::aai_magic</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00307">agent_action_iterator::aai_mdt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00302">AGENT_ACTIONS_IT_MAGIC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01024">LCT_LOCAL</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00460">mdt_hsm_actions_proc_ops</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a03dddfe9888b7164a65e88514ecafa19"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::lprocfs_release_hsm_actions" ref="a03dddfe9888b7164a65e88514ecafa19" args="(struct inode *inode, struct file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lprocfs_release_hsm_actions </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="mdt__hsm__cdt__actions_8c.html#a03dddfe9888b7164a65e88514ecafa19" title="lprocfs_release_hsm_actions() is called at end of /proc access.">lprocfs_release_hsm_actions()</a> is called at end of /proc access. </p>
<p>It frees allocated resources and calls cleanup lprocfs methods. </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00512">512</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00306">agent_action_iterator::aai_env</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

</div>
</div>
<a class="anchor" id="a9bbc9be6ac2c422cb313832af653a691"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_agent_record_add" ref="a9bbc9be6ac2c422cb313832af653a691" args="(const struct lu_env *env, struct mdt_device *mdt, __u64 compound_id, __u32 archive_id, __u64 flags, struct hsm_action_item *hai)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_agent_record_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>compound_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>archive_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add an entry in agent llog </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] PDT device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>compound_id</em>&nbsp;</td><td>[IN] global id associated with the record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive_id</em>&nbsp;</td><td>[IN] backend archive number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] record to register </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00124">124</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03262">llog_agent_req_rec::arr_compound_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03256">llog_agent_req_rec::arr_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03263">llog_agent_req_rec::arr_req_create</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="mdt__internal_8h_source.html#l00121">coordinator::cdt_last_cookie</a>, <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03100">HSM_AGENT_REC</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__idl_8h_source.html#l03056">LLOG_AGENT_ORIG_CTXT</a>, <a class="el" href="llog__cat_8c_source.html#l00631">llog_cat_add()</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00355">llog_data_len()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="a980845ce8e872b6946d082f8af260a71"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_agent_record_update" ref="a980845ce8e872b6946d082f8af260a71" args="(const struct lu_env *env, struct mdt_device *mdt, __u64 *cookies, int cookies_count, enum agent_req_status status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_agent_record_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>cookies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cookies_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a>&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update an entry in agent llog </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] MDT device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] entries to update log cookie are returned by register </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>[IN] new status of the request </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">261</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00188">data_update_cb::change_time</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00184">data_update_cb::cookies</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00185">data_update_cb::cookies_count</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00186">data_update_cb::cookies_done</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00183">data_update_cb::mdt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00200">mdt_agent_record_update_cb()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00187">data_update_cb::status</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="adb2c218ab9e19bf9ce136987633276e2"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_agent_record_update_cb" ref="adb2c218ab9e19bf9ce136987633276e2" args="(const struct lu_env *env, struct llog_handle *llh, struct llog_rec_hdr *hdr, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_agent_record_update_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__handle.html">llog_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>llh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__rec__hdr.html">llog_rec_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="group__log.html#ga466f538de595963c4d02460408b4ca01">llog_cat_process()</a> callback, used to update a record </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>llh</em>&nbsp;</td><td>[IN] llog handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>[IN] llog record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN] cb data = <a class="el" href="structdata__update__cb.html" title="data passed to llog_cat_process() callback to find requests">data_update_cb</a> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00200">200</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03249">agent_req_in_final_state()</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03227">ARS_CANCELED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00188">data_update_cb::change_time</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00184">data_update_cb::cookies</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00185">data_update_cb::cookies_count</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00186">data_update_cb::cookies_done</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__log_8h_source.html#l00328">LLOG_PROC_BREAK</a>, <a class="el" href="llog_8c_source.html#l01046">llog_write()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00183">data_update_cb::mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00187">data_update_cb::status</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>.</p>

</div>
</div>
<a class="anchor" id="adbcb22d522d8d4e0fc646e6c1e0762da"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_hsm_actions_proc_next" ref="adbcb22d522d8d4e0fc646e6c1e0762da" args="(struct seq_file *s, void *v, loff_t *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* mdt_hsm_actions_proc_next </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00348">348</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a49f0ee30b509985d569ae933cd46fff9"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_hsm_actions_proc_show" ref="a49f0ee30b509985d569ae933cd46fff9" args="(struct seq_file *s, void *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_hsm_actions_proc_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="mdt__hsm__cdt__actions_8c.html#a49f0ee30b509985d569ae933cd46fff9" title="mdt_hsm_actions_proc_show() is called at for each seq record process the llog, with...">mdt_hsm_actions_proc_show()</a> is called at for each seq record process the llog, with a cb which fill the file_seq buffer to be faster, one show will fill multiple records </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00414">414</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00309">agent_action_iterator::aai_cat_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00308">agent_action_iterator::aai_ctxt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00306">agent_action_iterator::aai_env</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00305">agent_action_iterator::aai_eof</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00310">agent_action_iterator::aai_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00304">agent_action_iterator::aai_magic</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00307">agent_action_iterator::aai_mdt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00302">AGENT_ACTIONS_IT_MAGIC</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00357">hsm_actions_show_cb()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="llog__cat_8c_source.html#l00838">llog_cat_process()</a>, <a class="el" href="lustre__log_8h_source.html#l00328">LLOG_PROC_BREAK</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a6174cbb45337375a8048b524a9e6d483"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_hsm_actions_proc_start" ref="a6174cbb45337375a8048b524a9e6d483" args="(struct seq_file *s, loff_t *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* mdt_hsm_actions_proc_start </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>seq_file method called to start access to /proc file get llog context + llog handle </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00317">317</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00309">agent_action_iterator::aai_cat_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00308">agent_action_iterator::aai_ctxt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00305">agent_action_iterator::aai_eof</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00310">agent_action_iterator::aai_index</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00304">agent_action_iterator::aai_magic</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00307">agent_action_iterator::aai_mdt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00302">AGENT_ACTIONS_IT_MAGIC</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lustre__idl_8h_source.html#l03056">LLOG_AGENT_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00046">LPD64</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a46efc33dc697539d8136044bfdc00980"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_hsm_actions_proc_stop" ref="a46efc33dc697539d8136044bfdc00980" args="(struct seq_file *s, void *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_hsm_actions_proc_stop </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>seq_file method called to stop access to /proc file clean + put llog context </p>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00445">445</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00308">agent_action_iterator::aai_ctxt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00304">agent_action_iterator::aai_magic</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00302">AGENT_ACTIONS_IT_MAGIC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, and <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abff0f16680b2b0d72232473a476bdb5a"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_hsm_actions_fops" ref="abff0f16680b2b0d72232473a476bdb5a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="mdt__internal_8h.html#abff0f16680b2b0d72232473a476bdb5a">mdt_hsm_actions_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .owner          = THIS_MODULE,
        .open           = <a class="code" href="mdt__hsm__cdt__actions_8c.html#a0889e1f128c644dd10f0c6a3040bdc68">lprocfs_open_hsm_actions</a>,
        .read           = seq_read,
        .llseek         = seq_lseek,
        .release        = <a class="code" href="mdt__hsm__cdt__actions_8c.html#a03dddfe9888b7164a65e88514ecafa19" title="lprocfs_release_hsm_actions() is called at end of /proc access.">lprocfs_release_hsm_actions</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00526">526</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

</div>
</div>
<a class="anchor" id="a57eb6d8cf0fa127da5f763859ac1d4ac"></a><!-- doxytag: member="mdt_hsm_cdt_actions.c::mdt_hsm_actions_proc_ops" ref="a57eb6d8cf0fa127da5f763859ac1d4ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct seq_operations <a class="el" href="mdt__hsm__cdt__actions_8c.html#a57eb6d8cf0fa127da5f763859ac1d4ac">mdt_hsm_actions_proc_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .start  = <a class="code" href="mdt__hsm__cdt__actions_8c.html#a6174cbb45337375a8048b524a9e6d483" title="seq_file method called to start access to /proc file get llog context + llog handle...">mdt_hsm_actions_proc_start</a>,
        .next   = <a class="code" href="mdt__hsm__cdt__actions_8c.html#adbcb22d522d8d4e0fc646e6c1e0762da">mdt_hsm_actions_proc_next</a>,
        .show   = <a class="code" href="mdt__hsm__cdt__actions_8c.html#a49f0ee30b509985d569ae933cd46fff9" title="mdt_hsm_actions_proc_show() is called at for each seq record process the llog, with...">mdt_hsm_actions_proc_show</a>,
        .stop   = <a class="code" href="mdt__hsm__cdt__actions_8c.html#a46efc33dc697539d8136044bfdc00980" title="seq_file method called to stop access to /proc file clean + put llog context">mdt_hsm_actions_proc_stop</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00460">460</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00467">lprocfs_open_hsm_actions()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
