<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: ptlrpc_service_part Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ptlrpc_service_part Struct Reference<br/>
<small>
[<a class="el" href="group__net.html">net</a>]</small>
</h1><!-- doxytag: class="ptlrpc_service_part" -->
<p>Definition of PortalRPC service partition data.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a> *scp_service&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a45f53648b1a614576a8044aa875fa4cc">__cfs_cacheline_aligned</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">back reference to owner  <a href="#a45f53648b1a614576a8044aa875fa4cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a616b2db3286d5fe98329a0322b348faf">scp_cpt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#af6581a250bb165eb31291b5daf4a422e">scp_thr_nextid</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">always increasing number  <a href="#af6581a250bb165eb31291b5daf4a422e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a0eb7001f059ddeb079a5b5cc633c837a">scp_nthrs_starting</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># of starting threads  <a href="#a0eb7001f059ddeb079a5b5cc633c837a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#ac4d1c9dcf8c480670ff145c147964a9c">scp_nthrs_stopping</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># of stopping threads, reserved for shrinking threads  <a href="#ac4d1c9dcf8c480670ff145c147964a9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a281b166ae15b1ba09ae338866750ba77">scp_nthrs_running</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># running threads  <a href="#a281b166ae15b1ba09ae338866750ba77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a658b2ed23da83f38e3acbe91191412e0">scp_threads</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">service threads list  <a href="#a658b2ed23da83f38e3acbe91191412e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spinlock_t scp_lock&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#ac032a55e8e53094bebf77b83f52f9095">__cfs_cacheline_aligned</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">serialize the following fields, used for protecting rqbd list and incoming requests waiting for preprocess, threads starting &amp; stopping are also protected by this lock.  <a href="#ac032a55e8e53094bebf77b83f52f9095"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a44b088268ad85c097e75785018da059f">scp_nrqbds_total</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">total # req buffer descs allocated  <a href="#a44b088268ad85c097e75785018da059f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a498a960c1ab556b2cd15ff122069133a">scp_nrqbds_posted</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># posted request buffers for receiving  <a href="#a498a960c1ab556b2cd15ff122069133a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#ad128b103863a3a90a2a0fffeaa9b0198">scp_rqbd_allocating</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">in progress of allocating rqbd  <a href="#ad128b103863a3a90a2a0fffeaa9b0198"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a8283d58f626b885a04d59e22ac5b234a">scp_nreqs_incoming</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># incoming reqs  <a href="#a8283d58f626b885a04d59e22ac5b234a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a4861a69db14903c4e80982c48be76c8b">scp_rqbd_idle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request buffers to be reposted  <a href="#a4861a69db14903c4e80982c48be76c8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#acd3cb2ad8f3ef3e78751f83373c0e688">scp_rqbd_posted</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">req buffers receiving  <a href="#acd3cb2ad8f3ef3e78751f83373c0e688"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a54fb502a4f6c138aaa49eb9afea6e39c">scp_req_incoming</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">incoming reqs  <a href="#a54fb502a4f6c138aaa49eb9afea6e39c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="linux-time_8h.html#af2983229a5c106d92b8a64c1c89e78e0">cfs_duration_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a22eb45de0fb6b349d79bb092fb83c00a">scp_rqbd_timeout</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">timeout before re-posting reqs, in tick  <a href="#a22eb45de0fb6b349d79bb092fb83c00a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aea613ac08a7dc84e671b4a260eed2765">scp_waitq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">all threads sleep on this.  <a href="#aea613ac08a7dc84e671b4a260eed2765"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a73331d554c2adc1cd1b47d6949cee7b4">scp_hist_reqs</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request history  <a href="#a73331d554c2adc1cd1b47d6949cee7b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aa72950e08d334ab8f1964a2640971efd">scp_hist_rqbds</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request buffer history  <a href="#aa72950e08d334ab8f1964a2640971efd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a46f749b9c04d8a939db8e29cbadadb0f">scp_hist_nrqbds</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># request buffers in history  <a href="#a46f749b9c04d8a939db8e29cbadadb0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a9331a053ab8db12d43cfc74d75043f4e">scp_hist_seq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sequence number for request  <a href="#a9331a053ab8db12d43cfc74d75043f4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aac3eedd439a5c744ab1cd7885152c68a">scp_hist_seq_culled</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">highest seq culled from history  <a href="#aac3eedd439a5c744ab1cd7885152c68a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spinlock_t scp_req_lock&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aa728eb6851d386b9eee3fd84ff1d37e5">__cfs_cacheline_aligned</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">serialize the following fields, used for processing requests sent to this portal  <a href="#aa728eb6851d386b9eee3fd84ff1d37e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#afa479ca58224b1f1eb30793a2ebd7e65">scp_nreqs_active</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># reqs in either of the NRS heads below  <a href="#afa479ca58224b1f1eb30793a2ebd7e65"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a5cb3e1be6fad443994888bc086aa5283">scp_nhreqs_active</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># HPreqs being served  <a href="#a5cb3e1be6fad443994888bc086aa5283"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#af8d242d89a56c88d4522319d5ec82b94">scp_hreq_count</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># hp requests handled  <a href="#af8d242d89a56c88d4522319d5ec82b94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__nrs.html">ptlrpc_nrs</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aaf079ff0824776d6cbf221ce0a736d4e">scp_nrs_reg</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRS head for regular requests.  <a href="#aaf079ff0824776d6cbf221ce0a736d4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__nrs.html">ptlrpc_nrs</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a2daee35dee137743332c42d1ba3eaea1">scp_nrs_hp</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRS head for HP requests; this is only valid for services that can handle HP requests.  <a href="#a2daee35dee137743332c42d1ba3eaea1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spinlock_t scp_rep_lock&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aa25cfa93e5fe2aec6d68558d70e03b69">__cfs_cacheline_aligned</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">serialize the following fields, used for processing replies for this portal  <a href="#aa25cfa93e5fe2aec6d68558d70e03b69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a38155a97f15fe794ff8720e2f8bcf249">scp_rep_active</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">all the active replies  <a href="#a38155a97f15fe794ff8720e2f8bcf249"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a1ba1dd17ce94daf0c4b82611d2203b77">scp_rep_idle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of free reply_states.  <a href="#a1ba1dd17ce94daf0c4b82611d2203b77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a2053b8073689ec3cedd16a7095656a13">scp_rep_waitq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">waitq to run, when adding stuff to srv_free_rs_list  <a href="#a2053b8073689ec3cedd16a7095656a13"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a53b120d0b76021b70f62730a7fb490fe">scp_nreps_difficult</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># 'difficult' replies  <a href="#a53b120d0b76021b70f62730a7fb490fe"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spinlock_t scp_at_lock&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#a690c0b60917bb43cf55d824846572969">__cfs_cacheline_aligned</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">AT stuff.  <a href="#a690c0b60917bb43cf55d824846572969"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structadaptive__timeout.html">adaptive_timeout</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#afdd717e7ea139bdf2e2914ac425c8754">scp_at_estimate</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">estimated rpc service time  <a href="#afdd717e7ea139bdf2e2914ac425c8754"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structptlrpc__at__array.html">ptlrpc_at_array</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aba4a06d005f80a1ffb87884f00b68698">scp_at_array</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">reqs waiting for replies  <a href="#aba4a06d005f80a1ffb87884f00b68698"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timer_list&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#ac1e4c68a5aa6d83f2e5441ea05fe9d52">scp_at_timer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">early reply timer  <a href="#ac1e4c68a5aa6d83f2e5441ea05fe9d52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#aa705fe1ad3fe28ba1b44a3ea327e185f">scp_at_checktime</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">debug  <a href="#aa705fe1ad3fe28ba1b44a3ea327e185f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__service__part.html#af1d7d89389261e865e0333f652c77b22">scp_at_check</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check early replies  <a href="#af1d7d89389261e865e0333f652c77b22"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Definition of PortalRPC service partition data. </p>
<p>Although a service only has one instance of it right now, but we will have multiple instances very soon (instance per CPT).</p>
<p>it has four locks: <em>scp_lock</em> serialize operations on rqbd and requests waiting for preprocess <em>scp_req_lock</em> serialize operations active requests sent to this portal <em>scp_at_lock</em> serialize adaptive timeout stuff <em>scp_rep_lock</em> serialize operations on RS list (reply states)</p>
<p>We don't have any use-case to take two or more locks at the same time for now, so there is no lock order issue. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01749">1749</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="aa25cfa93e5fe2aec6d68558d70e03b69"></a><!-- doxytag: member="ptlrpc_service_part::__cfs_cacheline_aligned" ref="aa25cfa93e5fe2aec6d68558d70e03b69" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t scp_rep_lock <a class="el" href="structptlrpc__service__part.html#a45f53648b1a614576a8044aa875fa4cc">ptlrpc_service_part::__cfs_cacheline_aligned</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>serialize the following fields, used for processing replies for this portal </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01846">1846</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="a690c0b60917bb43cf55d824846572969"></a><!-- doxytag: member="ptlrpc_service_part::__cfs_cacheline_aligned" ref="a690c0b60917bb43cf55d824846572969" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t scp_at_lock <a class="el" href="structptlrpc__service__part.html#a45f53648b1a614576a8044aa875fa4cc">ptlrpc_service_part::__cfs_cacheline_aligned</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>AT stuff. </p>
<p>serialize the following fields, used for changes on adaptive timeout </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01829">1829</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa728eb6851d386b9eee3fd84ff1d37e5"></a><!-- doxytag: member="ptlrpc_service_part::__cfs_cacheline_aligned" ref="aa728eb6851d386b9eee3fd84ff1d37e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t scp_req_lock <a class="el" href="structptlrpc__service__part.html#a45f53648b1a614576a8044aa875fa4cc">ptlrpc_service_part::__cfs_cacheline_aligned</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>serialize the following fields, used for processing requests sent to this portal </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01808">1808</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac032a55e8e53094bebf77b83f52f9095"></a><!-- doxytag: member="ptlrpc_service_part::__cfs_cacheline_aligned" ref="ac032a55e8e53094bebf77b83f52f9095" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t scp_lock <a class="el" href="structptlrpc__service__part.html#a45f53648b1a614576a8044aa875fa4cc">ptlrpc_service_part::__cfs_cacheline_aligned</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>serialize the following fields, used for protecting rqbd list and incoming requests waiting for preprocess, threads starting &amp; stopping are also protected by this lock. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01770">1770</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="a45f53648b1a614576a8044aa875fa4cc"></a><!-- doxytag: member="ptlrpc_service_part::__cfs_cacheline_aligned" ref="a45f53648b1a614576a8044aa875fa4cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__service.html">ptlrpc_service</a>* scp_service <a class="el" href="structptlrpc__service__part.html#a45f53648b1a614576a8044aa875fa4cc">ptlrpc_service_part::__cfs_cacheline_aligned</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>back reference to owner </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01751">1751</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba4a06d005f80a1ffb87884f00b68698"></a><!-- doxytag: member="ptlrpc_service_part::scp_at_array" ref="aba4a06d005f80a1ffb87884f00b68698" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__at__array.html">ptlrpc_at_array</a> <a class="el" href="structptlrpc__service__part.html#aba4a06d005f80a1ffb87884f00b68698">ptlrpc_service_part::scp_at_array</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>reqs waiting for replies </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01833">1833</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01182">ptlrpc_at_add_timed()</a>, <a class="el" href="service_8c_source.html#l01416">ptlrpc_at_check_timed()</a>, <a class="el" href="service_8c_source.html#l01159">ptlrpc_at_set_timer()</a>, <a class="el" href="service_8c_source.html#l03123">ptlrpc_service_free()</a>, and <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>.</p>

</div>
</div>
<a class="anchor" id="af1d7d89389261e865e0333f652c77b22"></a><!-- doxytag: member="ptlrpc_service_part::scp_at_check" ref="af1d7d89389261e865e0333f652c77b22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="structptlrpc__service__part.html#af1d7d89389261e865e0333f652c77b22">ptlrpc_service_part::scp_at_check</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check early replies </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01839">1839</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02329">ptlrpc_at_check()</a>, <a class="el" href="service_8c_source.html#l01416">ptlrpc_at_check_timed()</a>, and <a class="el" href="service_8c_source.html#l00482">ptlrpc_at_timer()</a>.</p>

</div>
</div>
<a class="anchor" id="aa705fe1ad3fe28ba1b44a3ea327e185f"></a><!-- doxytag: member="ptlrpc_service_part::scp_at_checktime" ref="aa705fe1ad3fe28ba1b44a3ea327e185f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> <a class="el" href="structptlrpc__service__part.html#aa705fe1ad3fe28ba1b44a3ea327e185f">ptlrpc_service_part::scp_at_checktime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>debug </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01837">1837</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01416">ptlrpc_at_check_timed()</a>, and <a class="el" href="service_8c_source.html#l00482">ptlrpc_at_timer()</a>.</p>

</div>
</div>
<a class="anchor" id="afdd717e7ea139bdf2e2914ac425c8754"></a><!-- doxytag: member="ptlrpc_service_part::scp_at_estimate" ref="afdd717e7ea139bdf2e2914ac425c8754" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structadaptive__timeout.html">adaptive_timeout</a> <a class="el" href="structptlrpc__service__part.html#afdd717e7ea139bdf2e2914ac425c8754">ptlrpc_service_part::scp_at_estimate</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>estimated rpc service time </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01831">1831</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00391">mdt_statfs()</a>, <a class="el" href="ofd__dev_8c_source.html#l02264">prolong_timeout()</a>, <a class="el" href="service_8c_source.html#l01416">ptlrpc_at_check_timed()</a>, <a class="el" href="service_8c_source.html#l01259">ptlrpc_at_send_early_reply()</a>, <a class="el" href="niobuf_8c_source.html#l00477">ptlrpc_at_set_reply()</a>, <a class="el" href="lustre__net_8h_source.html#l02574">ptlrpc_server_get_timeout()</a>, <a class="el" href="service_8c_source.html#l01999">ptlrpc_server_handle_request()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, and <a class="el" href="qmt__handler_8c_source.html#l00580">qmt_dqacq()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1e4c68a5aa6d83f2e5441ea05fe9d52"></a><!-- doxytag: member="ptlrpc_service_part::scp_at_timer" ref="ac1e4c68a5aa6d83f2e5441ea05fe9d52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timer_list <a class="el" href="structptlrpc__service__part.html#ac1e4c68a5aa6d83f2e5441ea05fe9d52">ptlrpc_service_part::scp_at_timer</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>early reply timer </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01835">1835</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01159">ptlrpc_at_set_timer()</a>, <a class="el" href="service_8c_source.html#l02985">ptlrpc_service_del_atimer()</a>, <a class="el" href="service_8c_source.html#l03123">ptlrpc_service_free()</a>, and <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a616b2db3286d5fe98329a0322b348faf"></a><!-- doxytag: member="ptlrpc_service_part::scp_cpt" ref="a616b2db3286d5fe98329a0322b348faf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a616b2db3286d5fe98329a0322b348faf">ptlrpc_service_part::scp_cpt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01753">1753</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00205">nrs_pol2cptid()</a>, <a class="el" href="nrs_8c_source.html#l00764">nrs_policy_register()</a>, <a class="el" href="nrs_8c_source.html#l01099">nrs_policy_unregister_locked()</a>, <a class="el" href="nrs_8c_source.html#l00904">nrs_register_policies_locked()</a>, <a class="el" href="nrs_8c_source.html#l00983">nrs_svcpt_setup_locked()</a>, <a class="el" href="service_8c_source.html#l00073">ptlrpc_alloc_rqbd()</a>, <a class="el" href="service_8c_source.html#l00274">ptlrpc_hr_select()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="nrs_8c_source.html#l01165">ptlrpc_nrs_policy_register()</a>, <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>, <a class="el" href="events_8c_source.html#l00254">ptlrpc_req_add_history()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, and <a class="el" href="service_8c_source.html#l02782">ptlrpc_start_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a46f749b9c04d8a939db8e29cbadadb0f"></a><!-- doxytag: member="ptlrpc_service_part::scp_hist_nrqbds" ref="a46f749b9c04d8a939db8e29cbadadb0f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a46f749b9c04d8a939db8e29cbadadb0f">ptlrpc_service_part::scp_hist_nrqbds</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># request buffers in history </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01798">1798</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00859">ptlrpc_server_drop_request()</a>, and <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>.</p>

</div>
</div>
<a class="anchor" id="a73331d554c2adc1cd1b47d6949cee7b4"></a><!-- doxytag: member="ptlrpc_service_part::scp_hist_reqs" ref="a73331d554c2adc1cd1b47d6949cee7b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#a73331d554c2adc1cd1b47d6949cee7b4">ptlrpc_service_part::scp_hist_reqs</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>request history </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01794">1794</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00254">ptlrpc_req_add_history()</a>, and <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa72950e08d334ab8f1964a2640971efd"></a><!-- doxytag: member="ptlrpc_service_part::scp_hist_rqbds" ref="aa72950e08d334ab8f1964a2640971efd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#aa72950e08d334ab8f1964a2640971efd">ptlrpc_service_part::scp_hist_rqbds</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>request buffer history </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01796">1796</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00859">ptlrpc_server_drop_request()</a>, and <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9331a053ab8db12d43cfc74d75043f4e"></a><!-- doxytag: member="ptlrpc_service_part::scp_hist_seq" ref="a9331a053ab8db12d43cfc74d75043f4e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="structptlrpc__service__part.html#a9331a053ab8db12d43cfc74d75043f4e">ptlrpc_service_part::scp_hist_seq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>sequence number for request </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01800">1800</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="events_8c_source.html#l00254">ptlrpc_req_add_history()</a>.</p>

</div>
</div>
<a class="anchor" id="aac3eedd439a5c744ab1cd7885152c68a"></a><!-- doxytag: member="ptlrpc_service_part::scp_hist_seq_culled" ref="aac3eedd439a5c744ab1cd7885152c68a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="structptlrpc__service__part.html#aac3eedd439a5c744ab1cd7885152c68a">ptlrpc_service_part::scp_hist_seq_culled</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>highest seq culled from history </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01802">1802</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00859">ptlrpc_server_drop_request()</a>.</p>

</div>
</div>
<a class="anchor" id="af8d242d89a56c88d4522319d5ec82b94"></a><!-- doxytag: member="ptlrpc_service_part::scp_hreq_count" ref="af8d242d89a56c88d4522319d5ec82b94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#af8d242d89a56c88d4522319d5ec82b94">ptlrpc_service_part::scp_hreq_count</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># hp requests handled </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01815">1815</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, and <a class="el" href="service_8c_source.html#l01789">ptlrpc_server_request_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cb3e1be6fad443994888bc086aa5283"></a><!-- doxytag: member="ptlrpc_service_part::scp_nhreqs_active" ref="a5cb3e1be6fad443994888bc086aa5283" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a5cb3e1be6fad443994888bc086aa5283">ptlrpc_service_part::scp_nhreqs_active</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># HPreqs being served </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01813">1813</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, <a class="el" href="service_8c_source.html#l01734">ptlrpc_server_allow_normal()</a>, <a class="el" href="service_8c_source.html#l01013">ptlrpc_server_finish_active_request()</a>, and <a class="el" href="service_8c_source.html#l01789">ptlrpc_server_request_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a53b120d0b76021b70f62730a7fb490fe"></a><!-- doxytag: member="ptlrpc_service_part::scp_nreps_difficult" ref="a53b120d0b76021b70f62730a7fb490fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="structptlrpc__service__part.html#a53b120d0b76021b70f62730a7fb490fe">ptlrpc_service_part::scp_nreps_difficult</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># 'difficult' replies </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01854">1854</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02149">ptlrpc_handle_rs()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, <a class="el" href="service_8c_source.html#l02968">ptlrpc_wait_replies()</a>, and <a class="el" href="ldlm__lib_8c_source.html#l02860">target_send_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="afa479ca58224b1f1eb30793a2ebd7e65"></a><!-- doxytag: member="ptlrpc_service_part::scp_nreqs_active" ref="afa479ca58224b1f1eb30793a2ebd7e65" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#afa479ca58224b1f1eb30793a2ebd7e65">ptlrpc_service_part::scp_nreqs_active</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># reqs in either of the NRS heads below </p>
<p># reqs being served </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01811">1811</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01416">ptlrpc_at_check_timed()</a>, <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, <a class="el" href="service_8c_source.html#l01734">ptlrpc_server_allow_normal()</a>, <a class="el" href="service_8c_source.html#l01013">ptlrpc_server_finish_active_request()</a>, <a class="el" href="service_8c_source.html#l01999">ptlrpc_server_handle_request()</a>, <a class="el" href="service_8c_source.html#l01789">ptlrpc_server_request_get()</a>, <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>, and <a class="el" href="service_8c_source.html#l02284">ptlrpc_threads_enough()</a>.</p>

</div>
</div>
<a class="anchor" id="a8283d58f626b885a04d59e22ac5b234a"></a><!-- doxytag: member="ptlrpc_service_part::scp_nreqs_incoming" ref="a8283d58f626b885a04d59e22ac5b234a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a8283d58f626b885a04d59e22ac5b234a">ptlrpc_service_part::scp_nreqs_incoming</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># incoming reqs </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01778">1778</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01416">ptlrpc_at_check_timed()</a>, <a class="el" href="service_8c_source.html#l01835">ptlrpc_server_handle_req_in()</a>, <a class="el" href="service_8c_source.html#l01999">ptlrpc_server_handle_request()</a>, <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>, and <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="a498a960c1ab556b2cd15ff122069133a"></a><!-- doxytag: member="ptlrpc_service_part::scp_nrqbds_posted" ref="a498a960c1ab556b2cd15ff122069133a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a498a960c1ab556b2cd15ff122069133a">ptlrpc_service_part::scp_nrqbds_posted</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># posted request buffers for receiving </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01774">1774</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02252">ptlrpc_check_rqbd_pool()</a>, <a class="el" href="service_8c_source.html#l00120">ptlrpc_grow_req_bufs()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="service_8c_source.html#l00436">ptlrpc_server_post_idle_rqbds()</a>, <a class="el" href="service_8c_source.html#l02998">ptlrpc_service_unlink_rqbd()</a>, and <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="a44b088268ad85c097e75785018da059f"></a><!-- doxytag: member="ptlrpc_service_part::scp_nrqbds_total" ref="a44b088268ad85c097e75785018da059f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a44b088268ad85c097e75785018da059f">ptlrpc_service_part::scp_nrqbds_total</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>total # req buffer descs allocated </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01772">1772</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00073">ptlrpc_alloc_rqbd()</a>, <a class="el" href="service_8c_source.html#l00103">ptlrpc_free_rqbd()</a>, and <a class="el" href="service_8c_source.html#l00120">ptlrpc_grow_req_bufs()</a>.</p>

</div>
</div>
<a class="anchor" id="a2daee35dee137743332c42d1ba3eaea1"></a><!-- doxytag: member="ptlrpc_service_part::scp_nrs_hp" ref="a2daee35dee137743332c42d1ba3eaea1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__nrs.html">ptlrpc_nrs</a>* <a class="el" href="structptlrpc__service__part.html#a2daee35dee137743332c42d1ba3eaea1">ptlrpc_service_part::scp_nrs_hp</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>NRS head for HP requests; this is only valid for services that can handle HP requests. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01821">1821</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>, <a class="el" href="nrs_8c_source.html#l01026">nrs_svcpt_cleanup_locked()</a>, <a class="el" href="ptlrpc__internal_8h_source.html#l00184">nrs_svcpt_has_hp()</a>, <a class="el" href="nrs_8c_source.html#l00983">nrs_svcpt_setup_locked()</a>, and <a class="el" href="nrs_8c_source.html#l00947">nrs_svcpt_setup_locked0()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf079ff0824776d6cbf221ce0a736d4e"></a><!-- doxytag: member="ptlrpc_service_part::scp_nrs_reg" ref="aaf079ff0824776d6cbf221ce0a736d4e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structptlrpc__nrs.html">ptlrpc_nrs</a> <a class="el" href="structptlrpc__service__part.html#aaf079ff0824776d6cbf221ce0a736d4e">ptlrpc_service_part::scp_nrs_reg</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>NRS head for regular requests. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01818">1818</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__internal_8h_source.html#l00199">nrs_svcpt2nrs()</a>, <a class="el" href="nrs_8c_source.html#l01026">nrs_svcpt_cleanup_locked()</a>, and <a class="el" href="nrs_8c_source.html#l00947">nrs_svcpt_setup_locked0()</a>.</p>

</div>
</div>
<a class="anchor" id="a281b166ae15b1ba09ae338866750ba77"></a><!-- doxytag: member="ptlrpc_service_part::scp_nthrs_running" ref="a281b166ae15b1ba09ae338866750ba77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a281b166ae15b1ba09ae338866750ba77">ptlrpc_service_part::scp_nthrs_running</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># running threads </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01761">1761</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="service_8c_source.html#l01686">ptlrpc_server_allow_high()</a>, <a class="el" href="service_8c_source.html#l01734">ptlrpc_server_allow_normal()</a>, <a class="el" href="service_8c_source.html#l02782">ptlrpc_start_thread()</a>, <a class="el" href="service_8c_source.html#l02284">ptlrpc_threads_enough()</a>, and <a class="el" href="service_8c_source.html#l02297">ptlrpc_threads_increasable()</a>.</p>

</div>
</div>
<a class="anchor" id="a0eb7001f059ddeb079a5b5cc633c837a"></a><!-- doxytag: member="ptlrpc_service_part::scp_nthrs_starting" ref="a0eb7001f059ddeb079a5b5cc633c837a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#a0eb7001f059ddeb079a5b5cc633c837a">ptlrpc_service_part::scp_nthrs_starting</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># of starting threads </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01757">1757</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="service_8c_source.html#l02782">ptlrpc_start_thread()</a>, and <a class="el" href="service_8c_source.html#l02297">ptlrpc_threads_increasable()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4d1c9dcf8c480670ff145c147964a9c"></a><!-- doxytag: member="ptlrpc_service_part::scp_nthrs_stopping" ref="ac4d1c9dcf8c480670ff145c147964a9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#ac4d1c9dcf8c480670ff145c147964a9c">ptlrpc_service_part::scp_nthrs_stopping</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># of stopping threads, reserved for shrinking threads </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01759">1759</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="a38155a97f15fe794ff8720e2f8bcf249"></a><!-- doxytag: member="ptlrpc_service_part::scp_rep_active" ref="a38155a97f15fe794ff8720e2f8bcf249" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#a38155a97f15fe794ff8720e2f8bcf249">ptlrpc_service_part::scp_rep_active</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>all the active replies </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01848">1848</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>, and <a class="el" href="ldlm__lib_8c_source.html#l02860">target_send_reply()</a>.</p>

</div>
</div>
<a class="anchor" id="a1ba1dd17ce94daf0c4b82611d2203b77"></a><!-- doxytag: member="ptlrpc_service_part::scp_rep_idle" ref="a1ba1dd17ce94daf0c4b82611d2203b77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#a1ba1dd17ce94daf0c4b82611d2203b77">ptlrpc_service_part::scp_rep_idle</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List of free reply_states. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01850">1850</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="pack__generic_8c_source.html#l00283">lustre_get_emerg_rs()</a>, <a class="el" href="pack__generic_8c_source.html#l00319">lustre_put_emerg_rs()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, and <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>.</p>

</div>
</div>
<a class="anchor" id="a2053b8073689ec3cedd16a7095656a13"></a><!-- doxytag: member="ptlrpc_service_part::scp_rep_waitq" ref="a2053b8073689ec3cedd16a7095656a13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t <a class="el" href="structptlrpc__service__part.html#a2053b8073689ec3cedd16a7095656a13">ptlrpc_service_part::scp_rep_waitq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>waitq to run, when adding stuff to srv_free_rs_list </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01852">1852</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="pack__generic_8c_source.html#l00283">lustre_get_emerg_rs()</a>, <a class="el" href="pack__generic_8c_source.html#l00319">lustre_put_emerg_rs()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, and <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a54fb502a4f6c138aaa49eb9afea6e39c"></a><!-- doxytag: member="ptlrpc_service_part::scp_req_incoming" ref="a54fb502a4f6c138aaa49eb9afea6e39c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#a54fb502a4f6c138aaa49eb9afea6e39c">ptlrpc_service_part::scp_req_incoming</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>incoming reqs </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01784">1784</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l01835">ptlrpc_server_handle_req_in()</a>, <a class="el" href="service_8c_source.html#l02340">ptlrpc_server_request_incoming()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>, and <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ad128b103863a3a90a2a0fffeaa9b0198"></a><!-- doxytag: member="ptlrpc_service_part::scp_rqbd_allocating" ref="ad128b103863a3a90a2a0fffeaa9b0198" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#ad128b103863a3a90a2a0fffeaa9b0198">ptlrpc_service_part::scp_rqbd_allocating</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>in progress of allocating rqbd </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01776">1776</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00120">ptlrpc_grow_req_bufs()</a>.</p>

</div>
</div>
<a class="anchor" id="a4861a69db14903c4e80982c48be76c8b"></a><!-- doxytag: member="ptlrpc_service_part::scp_rqbd_idle" ref="a4861a69db14903c4e80982c48be76c8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#a4861a69db14903c4e80982c48be76c8b">ptlrpc_service_part::scp_rqbd_idle</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>request buffers to be reposted </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01780">1780</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00073">ptlrpc_alloc_rqbd()</a>, <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="service_8c_source.html#l02322">ptlrpc_rqbd_pending()</a>, <a class="el" href="service_8c_source.html#l00859">ptlrpc_server_drop_request()</a>, <a class="el" href="service_8c_source.html#l00436">ptlrpc_server_post_idle_rqbds()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, and <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>.</p>

</div>
</div>
<a class="anchor" id="acd3cb2ad8f3ef3e78751f83373c0e688"></a><!-- doxytag: member="ptlrpc_service_part::scp_rqbd_posted" ref="acd3cb2ad8f3ef3e78751f83373c0e688" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#acd3cb2ad8f3ef3e78751f83373c0e688">ptlrpc_service_part::scp_rqbd_posted</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>req buffers receiving </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01782">1782</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00436">ptlrpc_server_post_idle_rqbds()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, <a class="el" href="service_8c_source.html#l03055">ptlrpc_service_purge_all()</a>, and <a class="el" href="service_8c_source.html#l02998">ptlrpc_service_unlink_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="a22eb45de0fb6b349d79bb092fb83c00a"></a><!-- doxytag: member="ptlrpc_service_part::scp_rqbd_timeout" ref="a22eb45de0fb6b349d79bb092fb83c00a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="linux-time_8h.html#af2983229a5c106d92b8a64c1c89e78e0">cfs_duration_t</a> <a class="el" href="structptlrpc__service__part.html#a22eb45de0fb6b349d79bb092fb83c00a">ptlrpc_service_part::scp_rqbd_timeout</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>timeout before re-posting reqs, in tick </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01786">1786</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02378">ptlrpc_main()</a>, <a class="el" href="service_8c_source.html#l02275">ptlrpc_retry_rqbds()</a>, and <a class="el" href="service_8c_source.html#l02322">ptlrpc_rqbd_pending()</a>.</p>

</div>
</div>
<a class="anchor" id="af6581a250bb165eb31291b5daf4a422e"></a><!-- doxytag: member="ptlrpc_service_part::scp_thr_nextid" ref="af6581a250bb165eb31291b5daf4a422e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__service__part.html#af6581a250bb165eb31291b5daf4a422e">ptlrpc_service_part::scp_thr_nextid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>always increasing number </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01755">1755</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l02782">ptlrpc_start_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a658b2ed23da83f38e3acbe91191412e0"></a><!-- doxytag: member="ptlrpc_service_part::scp_threads" ref="a658b2ed23da83f38e3acbe91191412e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__service__part.html#a658b2ed23da83f38e3acbe91191412e0">ptlrpc_service_part::scp_threads</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>service threads list </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01763">1763</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, <a class="el" href="service_8c_source.html#l02782">ptlrpc_start_thread()</a>, and <a class="el" href="service_8c_source.html#l02683">ptlrpc_svcpt_stop_threads()</a>.</p>

</div>
</div>
<a class="anchor" id="aea613ac08a7dc84e671b4a260eed2765"></a><!-- doxytag: member="ptlrpc_service_part::scp_waitq" ref="aea613ac08a7dc84e671b4a260eed2765" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t <a class="el" href="structptlrpc__service__part.html#aea613ac08a7dc84e671b4a260eed2765">ptlrpc_service_part::scp_waitq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>all threads sleep on this. </p>
<p>This wait-queue is signalled when new incoming request arrives and when difficult reply has to be handled. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l01791">1791</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

<p>Referenced by <a class="el" href="service_8c_source.html#l00482">ptlrpc_at_timer()</a>, <a class="el" href="service_8c_source.html#l02149">ptlrpc_handle_rs()</a>, <a class="el" href="service_8c_source.html#l01835">ptlrpc_server_handle_req_in()</a>, <a class="el" href="service_8c_source.html#l00599">ptlrpc_service_part_init()</a>, <a class="el" href="service_8c_source.html#l02998">ptlrpc_service_unlink_rqbd()</a>, <a class="el" href="service_8c_source.html#l02683">ptlrpc_svcpt_stop_threads()</a>, <a class="el" href="service_8c_source.html#l02968">ptlrpc_wait_replies()</a>, and <a class="el" href="events_8c_source.html#l00291">request_in_callback()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lustre/include/<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:54 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
