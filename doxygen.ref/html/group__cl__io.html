<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: cl_io</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cl_io<br/>
<small>
[<a class="el" href="group__clio.html">clio</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__io__slice.html">cl_io_slice</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">IO state private for a layer.  <a href="structcl__io__slice.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__read__ahead.html">cl_read_ahead</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__io__operations.html">cl_io_operations</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Per-layer io operations.  <a href="structcl__io__operations.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__io__lock__link.html">cl_io_lock_link</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Link between lock and io.  <a href="structcl__io__lock__link.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__lockset.html">cl_lockset</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock-set represents a collection of locks, that io needs at a time.  <a href="structcl__lockset.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__io__rw__common.html">cl_io_rw_common</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl__io.html">cl_io</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">State for io.  <a href="structcl__io.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gad8a155eb56429b6d2ad9515eb4c4c5b5">cill_descr</a>&nbsp;&nbsp;&nbsp;cill_lock.cll_descr</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gac166b29f4371ce1ec6adb1d26633c4fa">CL_IO_SLICE_CLEAN</a>(foo_io, base)</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga54c4de6c969138d0642ef59a1ff5e0b0">cl_commit_cbt</a> )(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structcl__io.html">cl_io</a> *, struct <a class="el" href="structcl__page.html">cl_page</a> *)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378a30c0e746c178fe52f3c6f3939df1b2cb">CIT_READ</a>, 
<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378aa9c9f93ccf31c58b09085a8460ed1475">CIT_WRITE</a>, 
<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378a0a7b38271be1f7d7faac2bfc3f8ce3a6">CIT_SETATTR</a>, 
<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378ae0e5d488dc0faa7eca8a7ab4a48cbc25">CIT_DATA_VERSION</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378af6dd7f3f5e03ad52c7f5a42d5fd03322">CIT_FAULT</a>, 
<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378a5e5f57a7ae1e41cc45aa7ec77eacf4b3">CIT_FSYNC</a>, 
<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378ab21ff138f79ef4d41a40950879bf1e3c">CIT_MISC</a>, 
<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378ad49f27c1cdc5be6e64ea32bcb4f16e8d">CIT_LADVISE</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__cl__io.html#gga7ce44ceebcd945560fa661571e3a4378a0b99cf78607418a7e0d5a1ebf5599baa">CIT_OP_NR</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>IO types. </p>
 <a href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga31cc6886dbe550ea8576111ded9814f3">cl_io_state</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3a533479241f38018af1651a483ca85b91">CIS_ZERO</a>, 
<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3a009e9e287aa930cf2a8aa288afbbe134">CIS_INIT</a>, 
<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3ad8aa8993a7b31bf97b878e8ad84b9154">CIS_IT_STARTED</a>, 
<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3a7aaaa8f4b4ceebebb8004c39f786d2ba">CIS_LOCKED</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3ae890b65a3f8bcb1142724628e71c247a">CIS_IO_GOING</a>, 
<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3a4c41fb95967777c249bd9b835a1e4a8e">CIS_IO_FINISHED</a>, 
<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3a3d421a3505fbc9098add0227c3e978c5">CIS_UNLOCKED</a>, 
<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3a4a452e3aadf68f37073952f26f59ecbe">CIS_IT_ENDED</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__cl__io.html#gga31cc6886dbe550ea8576111ded9814f3aeb38a1f10d1e0e66044bbfe4f40a20c0">CIS_FINI</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>States of <a class="el" href="structcl__io.html" title="State for io.">cl_io</a> state machine. </p>
 <a href="group__cl__io.html#ga31cc6886dbe550ea8576111ded9814f3">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gac7ff31ceda4789c9101711379ffe824b">cl_io_lock_dmd</a> { <a class="el" href="group__cl__io.html#ggac7ff31ceda4789c9101711379ffe824ba4e46f767dce68b1f061c35ec1edc0528">CILR_MANDATORY</a> =  0, 
<a class="el" href="group__cl__io.html#ggac7ff31ceda4789c9101711379ffe824bafc402749f67a87f7c2508998b1caec47">CILR_MAYBE</a>, 
<a class="el" href="group__cl__io.html#ggac7ff31ceda4789c9101711379ffe824bacfd43489ba9d674ad77c4bdd51d3a7bc">CILR_NEVER</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Lock requirements(demand) for IO. </p>
 <a href="group__cl__io.html#gac7ff31ceda4789c9101711379ffe824b">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gabb7d5d07a2e68b82b9b13cac60256a7d">cl_fsync_mode</a> { <a class="el" href="group__cl__io.html#ggabb7d5d07a2e68b82b9b13cac60256a7da2efbba1b7d141493ec27186a908dfd02">CL_FSYNC_NONE</a> =  0, 
<a class="el" href="group__cl__io.html#ggabb7d5d07a2e68b82b9b13cac60256a7da7421020b0252ff0989fd86dc2b3c2620">CL_FSYNC_LOCAL</a> =  1, 
<a class="el" href="group__cl__io.html#ggabb7d5d07a2e68b82b9b13cac60256a7da26eec0d9c8b5fb4114c7841d531cd07e">CL_FSYNC_DISCARD</a> =  2, 
<a class="el" href="group__cl__io.html#ggabb7d5d07a2e68b82b9b13cac60256a7da1289d6fd8294a72b7d758fd5d5c1aa2e">CL_FSYNC_ALL</a> =  3
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga1baea8a3fa79436133fe8e9dd42c7893">cl_read_ahead_release</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__read__ahead.html">cl_read_ahead</a> *ra)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga2a75c8a7a83eb31d6c899da9dc5143b1">cl_io_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a> iot, struct <a class="el" href="structcl__object.html">cl_object</a> *obj)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize <em>io</em>, by calling cl_io_operations::cio_init() top-to-bottom.  <a href="#ga2a75c8a7a83eb31d6c899da9dc5143b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga485aa4a9e93475523519f07aca310bac">cl_io_sub_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a> iot, struct <a class="el" href="structcl__object.html">cl_object</a> *obj)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize sub-io, by calling cl_io_operations::cio_init() top-to-bottom.  <a href="#ga485aa4a9e93475523519f07aca310bac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gacff72463468f75b6af811bf709aefa9d">cl_io_rw_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a> iot, loff_t pos, size_t count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize read or write io.  <a href="#gacff72463468f75b6af811bf709aefa9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga2b13e91188661c45925b56e88b000c6e">cl_io_loop</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main io loop.  <a href="#ga2b13e91188661c45925b56e88b000c6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gacde22a6b2da553556081b6f93e8e0f7f">cl_io_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalize <em>io</em>, by calling <a class="el" href="structcl__io__operations.html#a09ecbd759c7a3569d67a75e9f201d1ba" title="Called once per io, bottom-to-top to release io resources.">cl_io_operations::cio_fini()</a> bottom-to-top.  <a href="#gacde22a6b2da553556081b6f93e8e0f7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gac1a8e0e9d4277fcde8a56794f6f41003">cl_io_iter_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepares next iteration of io.  <a href="#gac1a8e0e9d4277fcde8a56794f6f41003"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gad8b5d08373d6d963c67c2682e41999ac">cl_io_iter_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalizes io iteration.  <a href="#gad8b5d08373d6d963c67c2682e41999ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga2229beaa77461f453fa4e1f1e129cbe6">cl_io_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Takes locks necessary for the current iteration of io.  <a href="#ga2229beaa77461f453fa4e1f1e129cbe6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga0de2f26e31233ef3bf8c7315b412e681">cl_io_unlock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release locks takes by io.  <a href="#ga0de2f26e31233ef3bf8c7315b412e681"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gacf4c2a55f31d42191ff49b8685163008">cl_io_start</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts io by calling <a class="el" href="structcl__io__operations.html#a29bbb031f049b8a1a5e54d575fa88209" title="Start io iteration.">cl_io_operations::cio_start()</a> top-to-bottom.  <a href="#gacf4c2a55f31d42191ff49b8685163008"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gaffebdf9278fa11f9dbecfeb3f5852fb5">cl_io_end</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait until current io iteration is finished by calling <a class="el" href="structcl__io__operations.html#a4d3dfb49a0fbf1f90b3de60841183d0a" title="Called top-to-bottom at the end of io loop.">cl_io_operations::cio_end()</a> bottom-to-top.  <a href="#gaffebdf9278fa11f9dbecfeb3f5852fb5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga80fe084e78e83a4a66fceb0e2c605b6e">cl_io_lock_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, struct <a class="el" href="structcl__io__lock__link.html">cl_io_lock_link</a> *link)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a lock to a lockset.  <a href="#ga80fe084e78e83a4a66fceb0e2c605b6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga3ce86bab1ea06d8d2d7ac15f3a0be3f6">cl_io_lock_alloc_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, struct <a class="el" href="structcl__lock__descr.html">cl_lock_descr</a> *descr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocates new lock link, and uses it to add a lock to a lockset.  <a href="#ga3ce86bab1ea06d8d2d7ac15f3a0be3f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gae609957e435aaa7c3044b45cada6b96c">cl_io_submit_rw</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, enum <a class="el" href="group__cl__page.html#ga419215a2ca4eeab85983de8ca5a16a02">cl_req_type</a> iot, struct <a class="el" href="structcl__2queue.html">cl_2queue</a> *queue)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Submits a list of pages for immediate io.  <a href="#gae609957e435aaa7c3044b45cada6b96c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga575a43e2ec65ba4aa6c926cf5e49fe70">cl_io_submit_sync</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, enum <a class="el" href="group__cl__page.html#ga419215a2ca4eeab85983de8ca5a16a02">cl_req_type</a> iot, struct <a class="el" href="structcl__2queue.html">cl_2queue</a> *queue, long <a class="el" href="o2iblnd__modparams_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Submit a sync_io and wait for the IO to be finished, or error happens.  <a href="#ga575a43e2ec65ba4aa6c926cf5e49fe70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gac830ac176054e906a54a4db48fbf45bb">cl_io_commit_async</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, struct <a class="el" href="structcl__page__list.html">cl_page_list</a> *queue, int from, int to, <a class="el" href="group__cl__io.html#ga54c4de6c969138d0642ef59a1ff5e0b0">cl_commit_cbt</a> cb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Commit a list of contiguous pages into writeback cache.  <a href="#gac830ac176054e906a54a4db48fbf45bb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gad5b4d2971764744ec2f5d30fe56d9781">cl_io_read_ahead</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, pgoff_t <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>, struct <a class="el" href="structcl__read__ahead.html">cl_read_ahead</a> *ra)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by read io, to decide the readahead extent.  <a href="#gad5b4d2971764744ec2f5d30fe56d9781"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga0e67009a999662295be41a4532bf6f37">cl_io_rw_advance</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, size_t nob)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Records that read or write io progressed <em>nob</em> bytes forward.  <a href="#ga0e67009a999662295be41a4532bf6f37"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga9e1b49d71ec98da5a7f4bd1fba415ad5">cl_io_cancel</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structcl__io.html">cl_io</a> *io, struct <a class="el" href="structcl__page__list.html">cl_page_list</a> *queue)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancel an IO which has been submitted by cl_io_submit_rw.  <a href="#ga9e1b49d71ec98da5a7f4bd1fba415ad5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga2ae08af9fbe1af93e2d82049e7ae7e3c">cl_io_is_going</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true iff there is an IO ongoing in the given environment.  <a href="#ga2ae08af9fbe1af93e2d82049e7ae7e3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga81a17e84380b3479ecbe1e4a0a868801">cl_io_is_append</a> (const struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True, iff <em>io</em> is an O_APPEND write(2).  <a href="#ga81a17e84380b3479ecbe1e4a0a868801"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga48f4979293404667c5c1e8eb8e080dc7">cl_io_is_sync_write</a> (const struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gabb552842f09a0899378f5a04410f4dc7">cl_io_is_mkwrite</a> (const struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#gafc95427f78408eaab2a0857e92d1004a">cl_io_is_trunc</a> (const struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True, iff <em>io</em> is a truncate(2).  <a href="#gafc95427f78408eaab2a0857e92d1004a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga4bb065eb52291173dbda9a0721b1ea2c">cl_io_top</a> (struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns top-level io.  <a href="#ga4bb065eb52291173dbda9a0721b1ea2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cl__io.html#ga56de1ca2cd018d724e180da7eabbcad9">cl_io_print</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, void *cookie, <a class="el" href="group__lu.html#gac8ccca21472f6dc3ea91d73983740fdc">lu_printer_t</a> printer, const struct <a class="el" href="structcl__io.html">cl_io</a> *io)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prints human readable representation of <em>io</em> to the <em>f</em>.  <a href="#ga56de1ca2cd018d724e180da7eabbcad9"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gad8a155eb56429b6d2ad9515eb4c4c5b5"></a><!-- doxytag: member="cl_object.h::cill_descr" ref="gad8a155eb56429b6d2ad9515eb4c4c5b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cill_descr&nbsp;&nbsp;&nbsp;cill_lock.cll_descr</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01668">1668</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac166b29f4371ce1ec6adb1d26633c4fa"></a><!-- doxytag: member="cl_object.h::CL_IO_SLICE_CLEAN" ref="gac166b29f4371ce1ec6adb1d26633c4fa" args="(foo_io, base)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CL_IO_SLICE_CLEAN</td>
          <td>(</td>
          <td class="paramtype">foo_io, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">base&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                    \
        typeof(foo_io) __foo_io = (foo_io);                             \
                                                                        \
        <a class="code" href="osd__iam_8h.html#accba6d34cf012c360c3ad61f87373778">CLASSERT</a>(<a class="code" href="group__lustreuser.html#gad4a7496cd704df3829c87864e7dbd703">offsetof</a>(typeof(*__foo_io), base) == 0);               \
        memset(&amp;__foo_io-&gt;base + 1, 0,                                  \
               (sizeof *__foo_io) - sizeof __foo_io-&gt;base);             \
} while (0)
</pre></div>
<p>Definition at line <a class="el" href="cl__object_8h_source.html#l02314">2314</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

<p>Referenced by <a class="el" href="lov__object_8c_source.html#l00942">lov_io_init()</a>, <a class="el" href="osc__io_8c_source.html#l00981">osc_io_init()</a>, and <a class="el" href="vvp__io_8c_source.html#l01448">vvp_io_init()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga54c4de6c969138d0642ef59a1ff5e0b0"></a><!-- doxytag: member="cl_object.h::cl_commit_cbt" ref="ga54c4de6c969138d0642ef59a1ff5e0b0" args=")(const struct lu_env *, struct cl_io *, struct cl_page *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__cl__io.html#ga54c4de6c969138d0642ef59a1ff5e0b0">cl_commit_cbt</a>)(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structcl__io.html">cl_io</a> *, struct <a class="el" href="structcl__page.html">cl_page</a> *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01451">1451</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gabb7d5d07a2e68b82b9b13cac60256a7d"></a><!-- doxytag: member="cl_object.h::cl_fsync_mode" ref="gabb7d5d07a2e68b82b9b13cac60256a7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__cl__io.html#gabb7d5d07a2e68b82b9b13cac60256a7d">cl_fsync_mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggabb7d5d07a2e68b82b9b13cac60256a7da2efbba1b7d141493ec27186a908dfd02"></a><!-- doxytag: member="CL_FSYNC_NONE" ref="ggabb7d5d07a2e68b82b9b13cac60256a7da2efbba1b7d141493ec27186a908dfd02" args="" -->CL_FSYNC_NONE</em>&nbsp;</td><td>
<p>start writeback, do not wait for them to finish </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabb7d5d07a2e68b82b9b13cac60256a7da7421020b0252ff0989fd86dc2b3c2620"></a><!-- doxytag: member="CL_FSYNC_LOCAL" ref="ggabb7d5d07a2e68b82b9b13cac60256a7da7421020b0252ff0989fd86dc2b3c2620" args="" -->CL_FSYNC_LOCAL</em>&nbsp;</td><td>
<p>start writeback and wait for them to finish </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabb7d5d07a2e68b82b9b13cac60256a7da26eec0d9c8b5fb4114c7841d531cd07e"></a><!-- doxytag: member="CL_FSYNC_DISCARD" ref="ggabb7d5d07a2e68b82b9b13cac60256a7da26eec0d9c8b5fb4114c7841d531cd07e" args="" -->CL_FSYNC_DISCARD</em>&nbsp;</td><td>
<p>discard all of dirty pages in a specific file range </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabb7d5d07a2e68b82b9b13cac60256a7da1289d6fd8294a72b7d758fd5d5c1aa2e"></a><!-- doxytag: member="CL_FSYNC_ALL" ref="ggabb7d5d07a2e68b82b9b13cac60256a7da1289d6fd8294a72b7d758fd5d5c1aa2e" args="" -->CL_FSYNC_ALL</em>&nbsp;</td><td>
<p>start writeback and make sure they have reached storage before return. </p>
<p>OST_SYNC RPC must be issued and finished </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01719">1719</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac7ff31ceda4789c9101711379ffe824b"></a><!-- doxytag: member="cl_object.h::cl_io_lock_dmd" ref="gac7ff31ceda4789c9101711379ffe824b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__cl__io.html#gac7ff31ceda4789c9101711379ffe824b">cl_io_lock_dmd</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock requirements(demand) for IO. </p>
<p>It should be cl_io_lock_req, but 'req' is always to be thought as 'request' :-) </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggac7ff31ceda4789c9101711379ffe824ba4e46f767dce68b1f061c35ec1edc0528"></a><!-- doxytag: member="CILR_MANDATORY" ref="ggac7ff31ceda4789c9101711379ffe824ba4e46f767dce68b1f061c35ec1edc0528" args="" -->CILR_MANDATORY</em>&nbsp;</td><td>
<p>Always lock data (e.g., O_APPEND). </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggac7ff31ceda4789c9101711379ffe824bafc402749f67a87f7c2508998b1caec47"></a><!-- doxytag: member="CILR_MAYBE" ref="ggac7ff31ceda4789c9101711379ffe824bafc402749f67a87f7c2508998b1caec47" args="" -->CILR_MAYBE</em>&nbsp;</td><td>
<p>Layers are free to decide between local and global locking. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggac7ff31ceda4789c9101711379ffe824bacfd43489ba9d674ad77c4bdd51d3a7bc"></a><!-- doxytag: member="CILR_NEVER" ref="ggac7ff31ceda4789c9101711379ffe824bacfd43489ba9d674ad77c4bdd51d3a7bc" args="" -->CILR_NEVER</em>&nbsp;</td><td>
<p>Never lock: there is no cache (e.g., liblustre). </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01710">1710</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga31cc6886dbe550ea8576111ded9814f3"></a><!-- doxytag: member="cl_object.h::cl_io_state" ref="ga31cc6886dbe550ea8576111ded9814f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__cl__io.html#ga31cc6886dbe550ea8576111ded9814f3">cl_io_state</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>States of <a class="el" href="structcl__io.html" title="State for io.">cl_io</a> state machine. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3a533479241f38018af1651a483ca85b91"></a><!-- doxytag: member="CIS_ZERO" ref="gga31cc6886dbe550ea8576111ded9814f3a533479241f38018af1651a483ca85b91" args="" -->CIS_ZERO</em>&nbsp;</td><td>
<p>Not initialized. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3a009e9e287aa930cf2a8aa288afbbe134"></a><!-- doxytag: member="CIS_INIT" ref="gga31cc6886dbe550ea8576111ded9814f3a009e9e287aa930cf2a8aa288afbbe134" args="" -->CIS_INIT</em>&nbsp;</td><td>
<p>Initialized. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3ad8aa8993a7b31bf97b878e8ad84b9154"></a><!-- doxytag: member="CIS_IT_STARTED" ref="gga31cc6886dbe550ea8576111ded9814f3ad8aa8993a7b31bf97b878e8ad84b9154" args="" -->CIS_IT_STARTED</em>&nbsp;</td><td>
<p>IO iteration started. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3a7aaaa8f4b4ceebebb8004c39f786d2ba"></a><!-- doxytag: member="CIS_LOCKED" ref="gga31cc6886dbe550ea8576111ded9814f3a7aaaa8f4b4ceebebb8004c39f786d2ba" args="" -->CIS_LOCKED</em>&nbsp;</td><td>
<p>Locks taken. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3ae890b65a3f8bcb1142724628e71c247a"></a><!-- doxytag: member="CIS_IO_GOING" ref="gga31cc6886dbe550ea8576111ded9814f3ae890b65a3f8bcb1142724628e71c247a" args="" -->CIS_IO_GOING</em>&nbsp;</td><td>
<p>Actual IO is in progress. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3a4c41fb95967777c249bd9b835a1e4a8e"></a><!-- doxytag: member="CIS_IO_FINISHED" ref="gga31cc6886dbe550ea8576111ded9814f3a4c41fb95967777c249bd9b835a1e4a8e" args="" -->CIS_IO_FINISHED</em>&nbsp;</td><td>
<p>IO for the current iteration finished. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3a3d421a3505fbc9098add0227c3e978c5"></a><!-- doxytag: member="CIS_UNLOCKED" ref="gga31cc6886dbe550ea8576111ded9814f3a3d421a3505fbc9098add0227c3e978c5" args="" -->CIS_UNLOCKED</em>&nbsp;</td><td>
<p>Locks released. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3a4a452e3aadf68f37073952f26f59ecbe"></a><!-- doxytag: member="CIS_IT_ENDED" ref="gga31cc6886dbe550ea8576111ded9814f3a4a452e3aadf68f37073952f26f59ecbe" args="" -->CIS_IT_ENDED</em>&nbsp;</td><td>
<p>Iteration completed. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga31cc6886dbe550ea8576111ded9814f3aeb38a1f10d1e0e66044bbfe4f40a20c0"></a><!-- doxytag: member="CIS_FINI" ref="gga31cc6886dbe550ea8576111ded9814f3aeb38a1f10d1e0e66044bbfe4f40a20c0" args="" -->CIS_FINI</em>&nbsp;</td><td>
<p><a class="el" href="structcl__io.html" title="State for io.">cl_io</a> finalized. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01409">1409</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7ce44ceebcd945560fa661571e3a4378"></a><!-- doxytag: member="cl_object.h::cl_io_type" ref="ga7ce44ceebcd945560fa661571e3a4378" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>IO types. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378a30c0e746c178fe52f3c6f3939df1b2cb"></a><!-- doxytag: member="CIT_READ" ref="gga7ce44ceebcd945560fa661571e3a4378a30c0e746c178fe52f3c6f3939df1b2cb" args="" -->CIT_READ</em>&nbsp;</td><td>
<p>read system call </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378aa9c9f93ccf31c58b09085a8460ed1475"></a><!-- doxytag: member="CIT_WRITE" ref="gga7ce44ceebcd945560fa661571e3a4378aa9c9f93ccf31c58b09085a8460ed1475" args="" -->CIT_WRITE</em>&nbsp;</td><td>
<p>write system call </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378a0a7b38271be1f7d7faac2bfc3f8ce3a6"></a><!-- doxytag: member="CIT_SETATTR" ref="gga7ce44ceebcd945560fa661571e3a4378a0a7b38271be1f7d7faac2bfc3f8ce3a6" args="" -->CIT_SETATTR</em>&nbsp;</td><td>
<p>truncate, utime system calls </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378ae0e5d488dc0faa7eca8a7ab4a48cbc25"></a><!-- doxytag: member="CIT_DATA_VERSION" ref="gga7ce44ceebcd945560fa661571e3a4378ae0e5d488dc0faa7eca8a7ab4a48cbc25" args="" -->CIT_DATA_VERSION</em>&nbsp;</td><td>
<p>get data version </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378af6dd7f3f5e03ad52c7f5a42d5fd03322"></a><!-- doxytag: member="CIT_FAULT" ref="gga7ce44ceebcd945560fa661571e3a4378af6dd7f3f5e03ad52c7f5a42d5fd03322" args="" -->CIT_FAULT</em>&nbsp;</td><td>
<p>page fault handling </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378a5e5f57a7ae1e41cc45aa7ec77eacf4b3"></a><!-- doxytag: member="CIT_FSYNC" ref="gga7ce44ceebcd945560fa661571e3a4378a5e5f57a7ae1e41cc45aa7ec77eacf4b3" args="" -->CIT_FSYNC</em>&nbsp;</td><td>
<p>fsync system call handling To write out a range of file </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378ab21ff138f79ef4d41a40950879bf1e3c"></a><!-- doxytag: member="CIT_MISC" ref="gga7ce44ceebcd945560fa661571e3a4378ab21ff138f79ef4d41a40950879bf1e3c" args="" -->CIT_MISC</em>&nbsp;</td><td>
<p>Miscellaneous io. </p>
<p>This is used for occasional io activity that doesn't fit into other types. Currently this is used for:</p>
<ul>
<li>cancellation of an extent lock. This io exists as a context to write dirty pages from under the lock being canceled back to the server;</li>
</ul>
<ul>
<li>VM induced page write-out. An io context for writing page out for memory cleansing;</li>
</ul>
<ul>
<li>glimpse. An io context to acquire glimpse lock.</li>
</ul>
<ul>
<li>grouplock. An io context to acquire group lock.</li>
</ul>
<p>CIT_MISC io is used simply as a context in which locks and pages are manipulated. Such io has no internal "process", that is, <a class="el" href="group__cl__io.html#ga2b13e91188661c45925b56e88b000c6e" title="Main io loop.">cl_io_loop()</a> is never called for it. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378ad49f27c1cdc5be6e64ea32bcb4f16e8d"></a><!-- doxytag: member="CIT_LADVISE" ref="gga7ce44ceebcd945560fa661571e3a4378ad49f27c1cdc5be6e64ea32bcb4f16e8d" args="" -->CIT_LADVISE</em>&nbsp;</td><td>
<p>ladvise handling To give advice about access of a file </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga7ce44ceebcd945560fa661571e3a4378a0b99cf78607418a7e0d5a1ebf5599baa"></a><!-- doxytag: member="CIT_OP_NR" ref="gga7ce44ceebcd945560fa661571e3a4378a0b99cf78607418a7e0d5a1ebf5599baa" args="" -->CIT_OP_NR</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01360">1360</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga9e1b49d71ec98da5a7f4bd1fba415ad5"></a><!-- doxytag: member="cl_object.h::cl_io_cancel" ref="ga9e1b49d71ec98da5a7f4bd1fba415ad5" args="(const struct lu_env *env, struct cl_io *io, struct cl_page_list *queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_cancel </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__page__list.html">cl_page_list</a> *&nbsp;</td>
          <td class="paramname"> <em>queue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel an IO which has been submitted by cl_io_submit_rw. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00744">744</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="cl__page_8c_source.html#l01040">cl_page_cancel()</a>, and <a class="el" href="cl__object_8h_source.html#l02346">cl_page_list_for_each</a>.</p>

</div>
</div>
<a class="anchor" id="gac830ac176054e906a54a4db48fbf45bb"></a><!-- doxytag: member="cl_object.h::cl_io_commit_async" ref="gac830ac176054e906a54a4db48fbf45bb" args="(const struct lu_env *env, struct cl_io *io, struct cl_page_list *queue, int from, int to, cl_commit_cbt cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_commit_async </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__page__list.html">cl_page_list</a> *&nbsp;</td>
          <td class="paramname"> <em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cl__io.html#ga54c4de6c969138d0642ef59a1ff5e0b0">cl_commit_cbt</a>&nbsp;</td>
          <td class="paramname"> <em>cb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Commit a list of contiguous pages into writeback cache. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if all pages committed, or errcode if error occurred. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structcl__io__operations.html#a1c88c4ec4901b77c0a32b3951f217f8c" title="Queue async page for write.">cl_io_operations::cio_commit_async()</a> </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00646">646</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="structcl__io__operations.html#a1c88c4ec4901b77c0a32b3951f217f8c">cl_io_operations::cio_commit_async</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__io_8c_source.html#l00058">cl_io_for_each</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="echo__client_8c_source.html#l01286">cl_echo_object_brw()</a>, <a class="el" href="lov__io_8c_source.html#l00774">lov_io_commit_async()</a>, <a class="el" href="vvp__io_8c_source.html#l01202">vvp_io_fault_start()</a>, and <a class="el" href="vvp__io_8c_source.html#l00968">vvp_io_write_commit()</a>.</p>

</div>
</div>
<a class="anchor" id="gaffebdf9278fa11f9dbecfeb3f5852fb5"></a><!-- doxytag: member="cl_object.h::cl_io_end" ref="gaffebdf9278fa11f9dbecfeb3f5852fb5" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_io_end </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait until current io iteration is finished by calling <a class="el" href="structcl__io__operations.html#a4d3dfb49a0fbf1f90b3de60841183d0a" title="Called top-to-bottom at the end of io loop.">cl_io_operations::cio_end()</a> bottom-to-top. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00593">593</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#a4d3dfb49a0fbf1f90b3de60841183d0a">cl_io_operations::cio_end</a>, <a class="el" href="cl__object_8h_source.html#l01421">CIS_IO_FINISHED</a>, <a class="el" href="cl__object_8h_source.html#l01419">CIS_IO_GOING</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__io_8c_source.html#l00060">cl_io_for_each_reverse</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, and <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>, and <a class="el" href="lov__io_8c_source.html#l00550">lov_io_end_wrapper()</a>.</p>

</div>
</div>
<a class="anchor" id="gacde22a6b2da553556081b6f93e8e0f7f"></a><!-- doxytag: member="cl_object.h::cl_io_fini" ref="gacde22a6b2da553556081b6f93e8e0f7f" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_io_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finalize <em>io</em>, by calling <a class="el" href="structcl__io__operations.html#a09ecbd759c7a3569d67a75e9f201d1ba" title="Called once per io, bottom-to-top to release io resources.">cl_io_operations::cio_fini()</a> bottom-to-top. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00103">103</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01820">ci_ignore_layout</a>, <a class="el" href="cl__object_8h_source.html#l01759">ci_layers</a>, <a class="el" href="cl__object_8h_source.html#l01820">ci_need_restart</a>, <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="cl__object_8h_source.html#l01820">ci_verify_layout</a>, <a class="el" href="structcl__io__operations.html#a09ecbd759c7a3569d67a75e9f201d1ba">cl_io_operations::cio_fini</a>, <a class="el" href="cl__object_8h_source.html#l01427">CIS_FINI</a>, <a class="el" href="cl__object_8h_source.html#l01439">cl_io_slice::cis_io</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01448">cl_io_slice::cis_linkage</a>, <a class="el" href="cl__object_8h_source.html#l01368">CIT_DATA_VERSION</a>, <a class="el" href="cl__object_8h_source.html#l01372">CIT_FAULT</a>, <a class="el" href="cl__object_8h_source.html#l01377">CIT_FSYNC</a>, <a class="el" href="cl__object_8h_source.html#l01402">CIT_LADVISE</a>, <a class="el" href="cl__object_8h_source.html#l01397">CIT_MISC</a>, <a class="el" href="cl__object_8h_source.html#l01362">CIT_READ</a>, <a class="el" href="cl__object_8h_source.html#l01366">CIT_SETATTR</a>, <a class="el" href="cl__object_8h_source.html#l01364">CIT_WRITE</a>, <a class="el" href="cl__object_8c_source.html#l01290">cl_env_info()</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00063">cl_io_type_is_valid()</a>, <a class="el" href="cl__internal_8h_source.html#l00107">cl_thread_info::clt_current_io</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>, and <a class="el" href="list_8h_source.html#l00043">list_head::prev</a>.</p>

<p>Referenced by <a class="el" href="echo__client_8c_source.html#l01286">cl_echo_object_brw()</a>, <a class="el" href="lcommon__misc_8c_source.html#l00124">cl_get_grouplock()</a>, <a class="el" href="glimpse_8c_source.html#l00171">cl_glimpse_size0()</a>, <a class="el" href="lcommon__misc_8c_source.html#l00181">cl_put_grouplock()</a>, <a class="el" href="lcommon__cl_8c_source.html#l00075">cl_setattr_ost()</a>, <a class="el" href="file_8c_source.html#l02787">cl_sync_file_range()</a>, <a class="el" href="lloop_8c_source.html#l00187">do_bio_lustrebacked()</a>, <a class="el" href="file_8c_source.html#l01869">ll_data_version()</a>, <a class="el" href="llite__mmap_8c_source.html#l00288">ll_fault0()</a>, <a class="el" href="llite__mmap_8c_source.html#l00101">ll_fault_io_init()</a>, <a class="el" href="file_8c_source.html#l01036">ll_file_io_generic()</a>, <a class="el" href="file_8c_source.html#l02224">ll_ladvise()</a>, <a class="el" href="llite__mmap_8c_source.html#l00177">ll_page_mkwrite0()</a>, <a class="el" href="rw_8c_source.html#l00887">ll_writepage()</a>, <a class="el" href="lov__io_8c_source.html#l00059">lov_io_sub_fini()</a>, <a class="el" href="osc__cache_8c_source.html#l00961">osc_extent_truncate()</a>, <a class="el" href="osc__lock_8c_source.html#l00658">osc_lock_weight()</a>, and <a class="el" href="osc__page_8c_source.html#l00667">osc_lru_shrink()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2a75c8a7a83eb31d6c899da9dc5143b1"></a><!-- doxytag: member="cl_object.h::cl_io_init" ref="ga2a75c8a7a83eb31d6c899da9dc5143b1" args="(const struct lu_env *env, struct cl_io *io, enum cl_io_type iot, struct cl_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a>&nbsp;</td>
          <td class="paramname"> <em>iot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__object.html">cl_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize <em>io</em>, by calling cl_io_operations::cio_init() top-to-bottom. </p>
<p>Caller has to call <a class="el" href="group__cl__io.html#gacde22a6b2da553556081b6f93e8e0f7f" title="Finalize io, by calling cl_io_operations::cio_fini() bottom-to-top.">cl_io_fini()</a> after a call to <a class="el" href="group__cl__io.html#ga2a75c8a7a83eb31d6c899da9dc5143b1" title="Initialize io, by calling cl_io_operations::cio_init() top-to-bottom.">cl_io_init()</a>, no matter what the latter returned.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>obj == cl_object_top(obj) </dd>
<dd>
cl_io_type_is_valid(iot) </dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>cl_io_type_is_valid(io-&gt;ci_type) &amp;&amp; io-&gt;ci_type == iot </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00211">211</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8c_source.html#l01290">cl_env_info()</a>, <a class="el" href="cl__io_8c_source.html#l00155">cl_io_init0()</a>, <a class="el" href="cl__object_8c_source.html#l00145">cl_object_top()</a>, <a class="el" href="cl__internal_8h_source.html#l00107">cl_thread_info::clt_current_io</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="echo__client_8c_source.html#l01286">cl_echo_object_brw()</a>, <a class="el" href="lcommon__misc_8c_source.html#l00124">cl_get_grouplock()</a>, <a class="el" href="glimpse_8c_source.html#l00171">cl_glimpse_size0()</a>, <a class="el" href="cl__io_8c_source.html#l00229">cl_io_rw_init()</a>, <a class="el" href="lcommon__cl_8c_source.html#l00075">cl_setattr_ost()</a>, <a class="el" href="file_8c_source.html#l02787">cl_sync_file_range()</a>, <a class="el" href="lloop_8c_source.html#l00187">do_bio_lustrebacked()</a>, <a class="el" href="file_8c_source.html#l01869">ll_data_version()</a>, <a class="el" href="llite__mmap_8c_source.html#l00101">ll_fault_io_init()</a>, <a class="el" href="file_8c_source.html#l02224">ll_ladvise()</a>, <a class="el" href="rw_8c_source.html#l00887">ll_writepage()</a>, <a class="el" href="osc__cache_8c_source.html#l00961">osc_extent_truncate()</a>, <a class="el" href="osc__lock_8c_source.html#l00658">osc_lock_weight()</a>, and <a class="el" href="osc__page_8c_source.html#l00667">osc_lru_shrink()</a>.</p>

</div>
</div>
<a class="anchor" id="ga81a17e84380b3479ecbe1e4a0a868801"></a><!-- doxytag: member="cl_object.h::cl_io_is_append" ref="ga81a17e84380b3479ecbe1e4a0a868801" args="(const struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cl_io_is_append </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True, iff <em>io</em> is an O_APPEND write(2). </p>

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l02285">2285</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io.html#a60575f788129abb9beff0cb40bc3eb36">ci_wr</a>, <a class="el" href="cl__object_8h_source.html#l01364">CIT_WRITE</a>, and <a class="el" href="structcl__io.html#a8b561db29f0b79fba4d14b66b9882530">u</a>.</p>

<p>Referenced by <a class="el" href="lov__io_8c_source.html#l00480">lov_io_rw_iter_init()</a>, <a class="el" href="lov__io_8c_source.html#l00326">lov_io_slice_init()</a>, <a class="el" href="lov__io_8c_source.html#l00085">lov_io_sub_inherit()</a>, <a class="el" href="osc__io_8c_source.html#l00358">osc_io_write_iter_init()</a>, <a class="el" href="osc__lock_8c_source.html#l01128">osc_lock_set_writer()</a>, and <a class="el" href="vvp__io_8c_source.html#l01048">vvp_io_write_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2ae08af9fbe1af93e2d82049e7ae7e3c"></a><!-- doxytag: member="cl_object.h::cl_io_is_going" ref="ga2ae08af9fbe1af93e2d82049e7ae7e3c" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_is_going </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true iff there is an IO ongoing in the given environment. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00076">76</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8c_source.html#l01290">cl_env_info()</a>, and <a class="el" href="cl__internal_8h_source.html#l00107">cl_thread_info::clt_current_io</a>.</p>

<p>Referenced by <a class="el" href="cl__object_8c_source.html#l01079">cl_env_nested_get()</a>.</p>

</div>
</div>
<a class="anchor" id="gabb552842f09a0899378f5a04410f4dc7"></a><!-- doxytag: member="cl_object.h::cl_io_is_mkwrite" ref="gabb552842f09a0899378f5a04410f4dc7" args="(const struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cl_io_is_mkwrite </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l02295">2295</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

<p>References <a class="el" href="structcl__io.html#a1a7759183426a4d21ab676823e0a8a11">ci_fault</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="cl__object_8h_source.html#l01372">CIT_FAULT</a>, and <a class="el" href="structcl__io.html#a8b561db29f0b79fba4d14b66b9882530">u</a>.</p>

<p>Referenced by <a class="el" href="osc__lock_8c_source.html#l01162">osc_lock_init()</a>, <a class="el" href="osc__lock_8c_source.html#l01128">osc_lock_set_writer()</a>, and <a class="el" href="vvp__io_8c_source.html#l00968">vvp_io_write_commit()</a>.</p>

</div>
</div>
<a class="anchor" id="ga48f4979293404667c5c1e8eb8e080dc7"></a><!-- doxytag: member="cl_object.h::cl_io_is_sync_write" ref="ga48f4979293404667c5c1e8eb8e080dc7" args="(const struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cl_io_is_sync_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l02290">2290</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io.html#a60575f788129abb9beff0cb40bc3eb36">ci_wr</a>, <a class="el" href="cl__object_8h_source.html#l01364">CIT_WRITE</a>, and <a class="el" href="structcl__io.html#a8b561db29f0b79fba4d14b66b9882530">u</a>.</p>

<p>Referenced by <a class="el" href="lov__io_8c_source.html#l00085">lov_io_sub_inherit()</a>, and <a class="el" href="osc__io_8c_source.html#l00265">osc_io_commit_async()</a>.</p>

</div>
</div>
<a class="anchor" id="gafc95427f78408eaab2a0857e92d1004a"></a><!-- doxytag: member="cl_object.h::cl_io_is_trunc" ref="gafc95427f78408eaab2a0857e92d1004a" args="(const struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cl_io_is_trunc </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True, iff <em>io</em> is a truncate(2). </p>

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l02303">2303</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

<p>References <a class="el" href="structcl__io.html#add969c0bdeb6aada0869a2e9c45b406a">ci_setattr</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="cl__object_8h_source.html#l01366">CIT_SETATTR</a>, and <a class="el" href="structcl__io.html#a8b561db29f0b79fba4d14b66b9882530">u</a>.</p>

<p>Referenced by <a class="el" href="lov__io_8c_source.html#l01104">lov_io_init_released()</a>, <a class="el" href="lov__io_8c_source.html#l00326">lov_io_slice_init()</a>, <a class="el" href="lov__io_8c_source.html#l00085">lov_io_sub_inherit()</a>, <a class="el" href="osc__io_8c_source.html#l00582">osc_io_setattr_end()</a>, <a class="el" href="osc__io_8c_source.html#l00482">osc_io_setattr_start()</a>, <a class="el" href="osc__lock_8c_source.html#l00768">osc_lock_to_lockless()</a>, <a class="el" href="vvp__io_8c_source.html#l01448">vvp_io_init()</a>, <a class="el" href="vvp__io_8c_source.html#l00751">vvp_io_setattr_end()</a>, <a class="el" href="vvp__io_8c_source.html#l00655">vvp_io_setattr_lock()</a>, and <a class="el" href="vvp__io_8c_source.html#l00732">vvp_io_setattr_start()</a>.</p>

</div>
</div>
<a class="anchor" id="gad8b5d08373d6d963c67c2682e41999ac"></a><!-- doxytag: member="cl_object.h::cl_io_iter_fini" ref="gad8b5d08373d6d963c67c2682e41999ac" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_io_iter_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finalizes io iteration. </p>
<p>Calls <a class="el" href="structcl__io__operations.html#a2c6f9fa7cecb546bd2b46156d57b10dd" title="Finalize io iteration.">cl_io_operations::cio_iter_fini()</a> bottom-to-top. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00469">469</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#a2c6f9fa7cecb546bd2b46156d57b10dd">cl_io_operations::cio_iter_fini</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01425">CIS_IT_ENDED</a>, <a class="el" href="cl__object_8h_source.html#l01423">CIS_UNLOCKED</a>, <a class="el" href="cl__io_8c_source.html#l00060">cl_io_for_each_reverse</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, and <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>, <a class="el" href="lov__io_8c_source.html#l00565">lov_io_iter_fini_wrapper()</a>, and <a class="el" href="lov__io_8c_source.html#l00429">lov_io_iter_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gac1a8e0e9d4277fcde8a56794f6f41003"></a><!-- doxytag: member="cl_object.h::cl_io_iter_init" ref="gac1a8e0e9d4277fcde8a56794f6f41003" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_iter_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prepares next iteration of io. </p>
<p>Calls <a class="el" href="structcl__io__operations.html#aeedb0fcc4555583225020c012c5b84e1" title="Prepare io iteration at a given layer.">cl_io_operations::cio_iter_init()</a> top-to-bottom. This exists to give layers a chance to modify io parameters, e.g., so that lov can restrict io to a single stripe. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00439">439</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#aeedb0fcc4555583225020c012c5b84e1">cl_io_operations::cio_iter_init</a>, <a class="el" href="cl__object_8h_source.html#l01413">CIS_INIT</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01425">CIS_IT_ENDED</a>, <a class="el" href="cl__object_8h_source.html#l01415">CIS_IT_STARTED</a>, <a class="el" href="cl__io_8c_source.html#l00058">cl_io_for_each</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>, and <a class="el" href="lov__io_8c_source.html#l00429">lov_io_iter_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2229beaa77461f453fa4e1f1e129cbe6"></a><!-- doxytag: member="cl_object.h::cl_io_lock" ref="ga2229beaa77461f453fa4e1f1e129cbe6" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Takes locks necessary for the current iteration of io. </p>
<p>Calls <a class="el" href="structcl__io__operations.html#a4211dc9e2bf48da829c2fffd4633b1cf" title="Collect locks for the current iteration of io.">cl_io_operations::cio_lock()</a> top-to-bottom to collect locks required by layers for the current iteration. Then sort locks (to avoid dead-locks), and acquire them. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00363">363</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01761">ci_lockset</a>, <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#a4211dc9e2bf48da829c2fffd4633b1cf">cl_io_operations::cio_lock</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01415">CIS_IT_STARTED</a>, <a class="el" href="cl__object_8h_source.html#l01417">CIS_LOCKED</a>, <a class="el" href="cl__io_8c_source.html#l00058">cl_io_for_each</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="cl__io_8c_source.html#l00256">cl_io_locks_sort()</a>, <a class="el" href="cl__io_8c_source.html#l00395">cl_io_unlock()</a>, <a class="el" href="cl__io_8c_source.html#l00337">cl_lockset_lock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>, and <a class="el" href="lov__io_8c_source.html#l00538">lov_io_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ga80fe084e78e83a4a66fceb0e2c605b6e"></a><!-- doxytag: member="cl_object.h::cl_io_lock_add" ref="ga80fe084e78e83a4a66fceb0e2c605b6e" args="(const struct lu_env *env, struct cl_io *io, struct cl_io_lock_link *link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_lock_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io__lock__link.html">cl_io_lock_link</a> *&nbsp;</td>
          <td class="paramname"> <em>link</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a lock to a lockset. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00516">516</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01761">ci_lockset</a>, <a class="el" href="cl__object_8h_source.html#l01662">cl_io_lock_link::cill_linkage</a>, <a class="el" href="cl__io_8c_source.html#l00312">cl_lockset_merge()</a>, <a class="el" href="cl__object_8h_source.html#l01701">cl_lockset::cls_todo</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00541">cl_io_lock_alloc_add()</a>, and <a class="el" href="vvp__io_8c_source.html#l00223">vvp_io_one_lock_index()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3ce86bab1ea06d8d2d7ac15f3a0be3f6"></a><!-- doxytag: member="cl_object.h::cl_io_lock_alloc_add" ref="ga3ce86bab1ea06d8d2d7ac15f3a0be3f6" args="(const struct lu_env *env, struct cl_io *io, struct cl_lock_descr *descr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_lock_alloc_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__lock__descr.html">cl_lock_descr</a> *&nbsp;</td>
          <td class="paramname"> <em>descr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates new lock link, and uses it to add a lock to a lockset. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00541">541</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="structcl__io__lock__link.html#aab4fd92e8e398d878829036d409df66f">cl_io_lock_link::cill_fini</a>, <a class="el" href="cl__io_8c_source.html#l00532">cl_free_io_lock_link()</a>, <a class="el" href="cl__io_8c_source.html#l00516">cl_io_lock_add()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="vvp__io_8c_source.html#l00389">vvp_mmap_locks()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2b13e91188661c45925b56e88b000c6e"></a><!-- doxytag: member="cl_object.h::cl_io_loop" ref="ga2b13e91188661c45925b56e88b000c6e" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_loop </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main io loop. </p>
<p>Pumps io through iterations calling</p>
<ul>
<li><a class="el" href="group__cl__io.html#gac1a8e0e9d4277fcde8a56794f6f41003" title="Prepares next iteration of io.">cl_io_iter_init()</a></li>
</ul>
<ul>
<li><a class="el" href="group__cl__io.html#ga2229beaa77461f453fa4e1f1e129cbe6" title="Takes locks necessary for the current iteration of io.">cl_io_lock()</a></li>
</ul>
<ul>
<li><a class="el" href="group__cl__io.html#gacf4c2a55f31d42191ff49b8685163008" title="Starts io by calling cl_io_operations::cio_start() top-to-bottom.">cl_io_start()</a></li>
</ul>
<ul>
<li><a class="el" href="group__cl__io.html#gaffebdf9278fa11f9dbecfeb3f5852fb5" title="Wait until current io iteration is finished by calling cl_io_operations::cio_end()...">cl_io_end()</a></li>
</ul>
<ul>
<li><a class="el" href="group__cl__io.html#ga0de2f26e31233ef3bf8c7315b412e681" title="Release locks takes by io.">cl_io_unlock()</a></li>
</ul>
<ul>
<li><a class="el" href="group__cl__io.html#gad8b5d08373d6d963c67c2682e41999ac" title="Finalizes io iteration.">cl_io_iter_fini()</a></li>
</ul>
<p>repeatedly until there is no more io to do. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00779">779</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01820">ci_continue</a>, <a class="el" href="cl__object_8h_source.html#l01818">ci_nob</a>, <a class="el" href="cl__object_8h_source.html#l01819">ci_result</a>, <a class="el" href="cl__io_8c_source.html#l00593">cl_io_end()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="cl__io_8c_source.html#l00469">cl_io_iter_fini()</a>, <a class="el" href="cl__io_8c_source.html#l00439">cl_io_iter_init()</a>, <a class="el" href="cl__io_8c_source.html#l00363">cl_io_lock()</a>, <a class="el" href="cl__io_8c_source.html#l00490">cl_io_rw_advance()</a>, <a class="el" href="cl__io_8c_source.html#l00565">cl_io_start()</a>, <a class="el" href="cl__io_8c_source.html#l00395">cl_io_unlock()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lcommon__cl_8c_source.html#l00075">cl_setattr_ost()</a>, <a class="el" href="file_8c_source.html#l02787">cl_sync_file_range()</a>, <a class="el" href="file_8c_source.html#l01869">ll_data_version()</a>, <a class="el" href="llite__mmap_8c_source.html#l00288">ll_fault0()</a>, <a class="el" href="file_8c_source.html#l01036">ll_file_io_generic()</a>, <a class="el" href="file_8c_source.html#l02224">ll_ladvise()</a>, and <a class="el" href="llite__mmap_8c_source.html#l00177">ll_page_mkwrite0()</a>.</p>

</div>
</div>
<a class="anchor" id="ga56de1ca2cd018d724e180da7eabbcad9"></a><!-- doxytag: member="cl_object.h::cl_io_print" ref="ga56de1ca2cd018d724e180da7eabbcad9" args="(const struct lu_env *env, void *cookie, lu_printer_t printer, const struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_io_print </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lu.html#gac8ccca21472f6dc3ea91d73983740fdc">lu_printer_t</a>&nbsp;</td>
          <td class="paramname"> <em>printer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints human readable representation of <em>io</em> to the <em>f</em>. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l01164">1164</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad5b4d2971764744ec2f5d30fe56d9781"></a><!-- doxytag: member="cl_object.h::cl_io_read_ahead" ref="gad5b4d2971764744ec2f5d30fe56d9781" args="(const struct lu_env *env, struct cl_io *io, pgoff_t start, struct cl_read_ahead *ra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_read_ahead </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pgoff_t&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__read__ahead.html">cl_read_ahead</a> *&nbsp;</td>
          <td class="paramname"> <em>ra</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by read io, to decide the readahead extent. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structcl__io__operations.html#a4a7f6334b0e726f9c7fc52b8064a2613" title="Decide maximum read ahead extent.">cl_io_operations::cio_read_ahead()</a> </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00617">617</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#a4a7f6334b0e726f9c7fc52b8064a2613">cl_io_operations::cio_read_ahead</a>, <a class="el" href="cl__object_8h_source.html#l01419">CIS_IO_GOING</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01417">CIS_LOCKED</a>, <a class="el" href="cl__object_8h_source.html#l01372">CIT_FAULT</a>, <a class="el" href="cl__object_8h_source.html#l01362">CIT_READ</a>, <a class="el" href="cl__io_8c_source.html#l00058">cl_io_for_each</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="rw_8c_source.html#l00343">ll_read_ahead_pages()</a>, and <a class="el" href="lov__io_8c_source.html#l00631">lov_io_read_ahead()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0e67009a999662295be41a4532bf6f37"></a><!-- doxytag: member="cl_object.h::cl_io_rw_advance" ref="ga0e67009a999662295be41a4532bf6f37" args="(const struct lu_env *env, struct cl_io *io, size_t nob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_io_rw_advance </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>nob</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Records that read or write io progressed <em>nob</em> bytes forward. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00490">490</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01773">ci_rw</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#a32c79a8ffbf81724ef4df5c2fd05e263">cl_io_operations::cio_advance</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01362">CIT_READ</a>, <a class="el" href="cl__object_8h_source.html#l01364">CIT_WRITE</a>, <a class="el" href="cl__io_8c_source.html#l00060">cl_io_for_each_reverse</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="cl__object_8h_source.html#l01733">cl_io_rw_common::crw_count</a>, <a class="el" href="cl__object_8h_source.html#l01732">cl_io_rw_common::crw_pos</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>, and <a class="el" href="structcl__io.html#a8b561db29f0b79fba4d14b66b9882530">u</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>.</p>

</div>
</div>
<a class="anchor" id="gacff72463468f75b6af811bf709aefa9d"></a><!-- doxytag: member="cl_object.h::cl_io_rw_init" ref="gacff72463468f75b6af811bf709aefa9d" args="(const struct lu_env *env, struct cl_io *io, enum cl_io_type iot, loff_t pos, size_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_rw_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a>&nbsp;</td>
          <td class="paramname"> <em>iot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize read or write io. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>iot == CIT_READ || iot == CIT_WRITE </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00229">229</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="cl__object_8h_source.html#l01752">ci_obj</a>, <a class="el" href="cl__object_8h_source.html#l01773">ci_rw</a>, <a class="el" href="structcl__io.html#a60575f788129abb9beff0cb40bc3eb36">ci_wr</a>, <a class="el" href="cl__object_8h_source.html#l01362">CIT_READ</a>, <a class="el" href="cl__object_8h_source.html#l01364">CIT_WRITE</a>, <a class="el" href="cl__io_8c_source.html#l00211">cl_io_init()</a>, <a class="el" href="cl__object_8h_source.html#l00227">cl_object::co_lu</a>, <a class="el" href="cl__object_8h_source.html#l01733">cl_io_rw_common::crw_count</a>, <a class="el" href="cl__object_8h_source.html#l01734">cl_io_rw_common::crw_nonblock</a>, <a class="el" href="cl__object_8h_source.html#l01732">cl_io_rw_common::crw_pos</a>, <a class="el" href="libcfs__debug_8h_source.html#l00150">D_VFSTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lu__object_8h_source.html#l00812">LU_OBJECT_HEADER</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structcl__io.html#a8b561db29f0b79fba4d14b66b9882530">u</a>.</p>

<p>Referenced by <a class="el" href="file_8c_source.html#l01036">ll_file_io_generic()</a>.</p>

</div>
</div>
<a class="anchor" id="gacf4c2a55f31d42191ff49b8685163008"></a><!-- doxytag: member="cl_object.h::cl_io_start" ref="gacf4c2a55f31d42191ff49b8685163008" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_start </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts io by calling <a class="el" href="structcl__io__operations.html#a29bbb031f049b8a1a5e54d575fa88209" title="Start io iteration.">cl_io_operations::cio_start()</a> top-to-bottom. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00565">565</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__operations.html#a29bbb031f049b8a1a5e54d575fa88209">cl_io_operations::cio_start</a>, <a class="el" href="cl__object_8h_source.html#l01419">CIS_IO_GOING</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01417">CIS_LOCKED</a>, <a class="el" href="cl__io_8c_source.html#l00058">cl_io_for_each</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>, and <a class="el" href="lov__io_8c_source.html#l00544">lov_io_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga485aa4a9e93475523519f07aca310bac"></a><!-- doxytag: member="cl_object.h::cl_io_sub_init" ref="ga485aa4a9e93475523519f07aca310bac" args="(const struct lu_env *env, struct cl_io *io, enum cl_io_type iot, struct cl_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_sub_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__cl__io.html#ga7ce44ceebcd945560fa661571e3a4378">cl_io_type</a>&nbsp;</td>
          <td class="paramname"> <em>iot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__object.html">cl_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize sub-io, by calling cl_io_operations::cio_init() top-to-bottom. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>obj != cl_object_top(obj) </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00189">189</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8c_source.html#l01290">cl_env_info()</a>, <a class="el" href="cl__io_8c_source.html#l00155">cl_io_init0()</a>, <a class="el" href="cl__object_8c_source.html#l00145">cl_object_top()</a>, <a class="el" href="cl__internal_8h_source.html#l00107">cl_thread_info::clt_current_io</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="lov__io_8c_source.html#l00154">lov_io_sub_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gae609957e435aaa7c3044b45cada6b96c"></a><!-- doxytag: member="cl_object.h::cl_io_submit_rw" ref="gae609957e435aaa7c3044b45cada6b96c" args="(const struct lu_env *env, struct cl_io *io, enum cl_req_type iot, struct cl_2queue *queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_submit_rw </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__cl__page.html#ga419215a2ca4eeab85983de8ca5a16a02">cl_req_type</a>&nbsp;</td>
          <td class="paramname"> <em>crt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__2queue.html">cl_2queue</a> *&nbsp;</td>
          <td class="paramname"> <em>queue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Submits a list of pages for immediate io. </p>
<p>After the function gets returned, The submitted pages are moved to queue-&gt;c2_qout queue, and queue-&gt;c2_qin contain both the pages don't need to be submitted, and the pages are errant to submit.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if at least one page was submitted, error code otherwise. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structcl__io__operations.html#a2aa87d92a0f183a26ae076afc9b8b74f" title="Submit pages from queue-&gt;c2_qin for IO, and move successfully submitted pages...">cl_io_operations::cio_submit()</a> </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00676">676</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01303">cl_2queue::c2_qout</a>, <a class="el" href="structcl__io__operations.html#a2aa87d92a0f183a26ae076afc9b8b74f">cl_io_operations::cio_submit</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__io_8c_source.html#l00058">cl_io_for_each</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="cl__object_8h_source.html#l01293">cl_page_list::pl_pages</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00702">cl_io_submit_sync()</a>, <a class="el" href="rw_8c_source.html#l01077">ll_io_read_page()</a>, and <a class="el" href="lov__io_8c_source.html#l00705">lov_io_submit()</a>.</p>

</div>
</div>
<a class="anchor" id="ga575a43e2ec65ba4aa6c926cf5e49fe70"></a><!-- doxytag: member="cl_object.h::cl_io_submit_sync" ref="ga575a43e2ec65ba4aa6c926cf5e49fe70" args="(const struct lu_env *env, struct cl_io *io, enum cl_req_type iot, struct cl_2queue *queue, long timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_io_submit_sync </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__cl__page.html#ga419215a2ca4eeab85983de8ca5a16a02">cl_req_type</a>&nbsp;</td>
          <td class="paramname"> <em>iot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__2queue.html">cl_2queue</a> *&nbsp;</td>
          <td class="paramname"> <em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Submit a sync_io and wait for the IO to be finished, or error happens. </p>
<p>If <em>timeout</em> is zero, it means to wait for the IO unconditionally. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00702">702</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01302">cl_2queue::c2_qin</a>, <a class="el" href="cl__object_8h_source.html#l01303">cl_2queue::c2_qout</a>, <a class="el" href="cl__object_8c_source.html#l01290">cl_env_info()</a>, <a class="el" href="cl__io_8c_source.html#l00676">cl_io_submit_rw()</a>, <a class="el" href="cl__io_8c_source.html#l01038">cl_page_list_assume()</a>, <a class="el" href="cl__object_8h_source.html#l02346">cl_page_list_for_each</a>, <a class="el" href="cl__io_8c_source.html#l01190">cl_sync_io_end()</a>, <a class="el" href="cl__io_8c_source.html#l01202">cl_sync_io_init()</a>, <a class="el" href="cl__io_8c_source.html#l01258">cl_sync_io_note()</a>, <a class="el" href="cl__io_8c_source.html#l01221">cl_sync_io_wait()</a>, <a class="el" href="cl__internal_8h_source.html#l00111">cl_thread_info::clt_anchor</a>, <a class="el" href="cl__object_8h_source.html#l00750">cl_page::cp_sync_io</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="cl__object_8h_source.html#l01292">cl_page_list::pl_nr</a>, and <a class="el" href="cl__object_8h_source.html#l01293">cl_page_list::pl_pages</a>.</p>

<p>Referenced by <a class="el" href="echo__client_8c_source.html#l01286">cl_echo_object_brw()</a>, <a class="el" href="rw26_8c_source.html#l00189">ll_direct_rw_pages()</a>, <a class="el" href="rw_8c_source.html#l01176">ll_page_sync_io()</a>, and <a class="el" href="vvp__io_8c_source.html#l00870">vvp_io_commit_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4bb065eb52291173dbda9a0721b1ea2c"></a><!-- doxytag: member="cl_object.h::cl_io_top" ref="ga4bb065eb52291173dbda9a0721b1ea2c" args="(struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcl__io.html">cl_io</a>* cl_io_top </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns top-level io. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__cl__object.html#ga00ef0f7240b9a7d773a49a77c667f03a" title="Returns the top-object for a given o.">cl_object_top()</a> </dd></dl>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l01152">1152</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01757">ci_parent</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="cl__page_8c_source.html#l00652">cl_page_assume()</a>, <a class="el" href="cl__page_8c_source.html#l00709">cl_page_disown()</a>, <a class="el" href="cl__page_8c_source.html#l00555">cl_page_is_owned()</a>, <a class="el" href="cl__page_8c_source.html#l00584">cl_page_own0()</a>, <a class="el" href="cl__page_8c_source.html#l00680">cl_page_unassume()</a>, and <a class="el" href="vvp__io_8c_source.html#l00928">write_commit_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0de2f26e31233ef3bf8c7315b412e681"></a><!-- doxytag: member="cl_object.h::cl_io_unlock" ref="ga0de2f26e31233ef3bf8c7315b412e681" args="(const struct lu_env *env, struct cl_io *io)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_io_unlock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__io.html">cl_io</a> *&nbsp;</td>
          <td class="paramname"> <em>io</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release locks takes by io. </p>

<p>Definition at line <a class="el" href="cl__io_8c_source.html#l00395">395</a> of file <a class="el" href="cl__io_8c_source.html">cl_io.c</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01761">ci_lockset</a>, <a class="el" href="cl__object_8h_source.html#l01750">ci_state</a>, <a class="el" href="cl__object_8h_source.html#l01748">ci_type</a>, <a class="el" href="structcl__io__lock__link.html#aab4fd92e8e398d878829036d409df66f">cl_io_lock_link::cill_fini</a>, <a class="el" href="cl__object_8h_source.html#l01662">cl_io_lock_link::cill_linkage</a>, <a class="el" href="cl__object_8h_source.html#l01663">cl_io_lock_link::cill_lock</a>, <a class="el" href="structcl__io__operations.html#a8f4e4c71f42b1acdc2b935826d2a6e90">cl_io_operations::cio_unlock</a>, <a class="el" href="cl__object_8h_source.html#l01443">cl_io_slice::cis_iop</a>, <a class="el" href="cl__object_8h_source.html#l01423">CIS_UNLOCKED</a>, <a class="el" href="cl__object_8c_source.html#l01290">cl_env_info()</a>, <a class="el" href="cl__io_8c_source.html#l00060">cl_io_for_each_reverse</a>, <a class="el" href="cl__io_8c_source.html#l00085">cl_io_invariant()</a>, <a class="el" href="cl__io_8c_source.html#l00068">cl_io_is_loopable()</a>, <a class="el" href="cl__lock_8c_source.html#l00233">cl_lock_release()</a>, <a class="el" href="cl__internal_8h_source.html#l00051">CNL_TOP</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00282">LINVRNT</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, and <a class="el" href="structcl__io__operations.html#a646d5084e9960fc83c6ac20e37640282">cl_io_operations::op</a>.</p>

<p>Referenced by <a class="el" href="cl__io_8c_source.html#l00363">cl_io_lock()</a>, <a class="el" href="cl__io_8c_source.html#l00779">cl_io_loop()</a>, and <a class="el" href="lov__io_8c_source.html#l00571">lov_io_unlock_wrapper()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1baea8a3fa79436133fe8e9dd42c7893"></a><!-- doxytag: member="cl_object.h::cl_read_ahead_release" ref="ga1baea8a3fa79436133fe8e9dd42c7893" args="(const struct lu_env *env, struct cl_read_ahead *ra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void cl_read_ahead_release </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcl__read__ahead.html">cl_read_ahead</a> *&nbsp;</td>
          <td class="paramname"> <em>ra</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cl__object_8h_source.html#l01468">1468</a> of file <a class="el" href="cl__object_8h_source.html">cl_object.h</a>.</p>

<p>References <a class="el" href="cl__object_8h_source.html#l01465">cl_read_ahead::cra_cbdata</a>, and <a class="el" href="structcl__read__ahead.html#a34949cd100be7cc45879d71c293d0356">cl_read_ahead::cra_release</a>.</p>

<p>Referenced by <a class="el" href="rw_8c_source.html#l00343">ll_read_ahead_pages()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
