<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/lov/lov_pack.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/lov/lov_pack.c File Reference</h1><code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__user_8h_source.html">lustre/lustre_user.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__swab_8h_source.html">lustre_swab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd_8h_source.html">obd.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__support_8h_source.html">obd_support.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="lov__internal_8h_source.html">lov_internal.h</a>&quot;</code><br/>

<p><a href="lov__pack_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LOV</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#ad0be1640ec5e33c3360f7eb67771adb7">lov_dump_lmm_common</a> (int level, void *lmmp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#a53c90494c012bca297f52be66382f78c">lov_dump_lmm_objects</a> (int level, struct lov_ost_data *lod, int stripe_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#abfaf93a8f51c65976f147d2415e47028">lov_dump_lmm_v1</a> (int level, struct <a class="el" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> *lmm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#a7bb95c1fd61685569365c8f4971fe070">lov_dump_lmm_v3</a> (int level, struct <a class="el" href="structlov__mds__md__v3.html">lov_mds_md_v3</a> *lmm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#a71825430554071121045b9c8d964e81c">lov_dump_lmm</a> (int level, void *lmm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#a308f4e7a52e3ea846cc68363a6461e95">lov_lsm_pack</a> (const struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> *lsm, void *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, size_t buf_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack LOV striping metadata for disk storage format (in little endian byte order).  <a href="#a308f4e7a52e3ea846cc68363a6461e95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#a8baf258a1956b3d50d998b35da3852f6">lov_get_stripecnt</a> (struct <a class="el" href="structlov__obd.html">lov_obd</a> *lov, __u32 magic, __u16 stripe_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#ab18351d31982170c51132c572088fd33">lov_verify_lmm</a> (void *lmm, int lmm_bytes, __u16 *stripe_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#af19c5624cb2f18a3ed387e5c859d79ef">lov_lsm_alloc</a> (u16 stripe_count, u32 pattern, u32 magic)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#afcb826ef867a3938969a2a00a5eb2c7d">lov_free_memmd</a> (struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> **lsmp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lov__pack_8c.html#abba5224263ad223d716587162abcc448">lov_unpackmd</a> (struct <a class="el" href="structlov__obd.html">lov_obd</a> *lov, struct lov_mds_md *lmm, size_t lmm_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lov.html#gaa1b5778ab07f2964c15ed3b9445c1be6">lov_getstripe</a> (struct <a class="el" href="structlov__object.html">lov_object</a> *obj, struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> *lsm, struct lov_user_md __user *lump)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="lov_pack.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LOV</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00043">43</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a71825430554071121045b9c8d964e81c"></a><!-- doxytag: member="lov_pack.c::lov_dump_lmm" ref="a71825430554071121045b9c8d964e81c" args="(int level, void *lmm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lov_dump_lmm </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>lmm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00107">107</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lov__pack_8c_source.html#l00057">lov_dump_lmm_common()</a>, <a class="el" href="lov__pack_8c_source.html#l00092">lov_dump_lmm_v1()</a>, <a class="el" href="lov__pack_8c_source.html#l00099">lov_dump_lmm_v3()</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, and <a class="el" href="lustre__idl_8h_source.html#l01502">lov_mds_md</a>.</p>

</div>
</div>
<a class="anchor" id="ad0be1640ec5e33c3360f7eb67771adb7"></a><!-- doxytag: member="lov_pack.c::lov_dump_lmm_common" ref="ad0be1640ec5e33c3360f7eb67771adb7" args="(int level, void *lmmp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lov_dump_lmm_common </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>lmmp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00057">57</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l01565">lmm_oi_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l01502">lov_mds_md</a>, and <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00107">lov_dump_lmm()</a>, <a class="el" href="lov__pack_8c_source.html#l00092">lov_dump_lmm_v1()</a>, <a class="el" href="lov__pack_8c_source.html#l00099">lov_dump_lmm_v3()</a>, <a class="el" href="lov__ea_8c_source.html#l00051">lsm_lmm_verify_common()</a>, <a class="el" href="lov__ea_8c_source.html#l00232">lsm_lmm_verify_v1()</a>, and <a class="el" href="lov__ea_8c_source.html#l00269">lsm_lmm_verify_v3()</a>.</p>

</div>
</div>
<a class="anchor" id="a53c90494c012bca297f52be66382f78c"></a><!-- doxytag: member="lov_pack.c::lov_dump_lmm_objects" ref="a53c90494c012bca297f52be66382f78c" args="(int level, struct lov_ost_data *lod, int stripe_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lov_dump_lmm_objects </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lov_ost_data *&nbsp;</td>
          <td class="paramname"> <em>lod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stripe_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00072">72</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__user_8h_source.html#l00371">LOV_V1_INSANE_STRIPE_COUNT</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, and <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00092">lov_dump_lmm_v1()</a>, and <a class="el" href="lov__pack_8c_source.html#l00099">lov_dump_lmm_v3()</a>.</p>

</div>
</div>
<a class="anchor" id="abfaf93a8f51c65976f147d2415e47028"></a><!-- doxytag: member="lov_pack.c::lov_dump_lmm_v1" ref="abfaf93a8f51c65976f147d2415e47028" args="(int level, struct lov_mds_md_v1 *lmm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lov_dump_lmm_v1 </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlov__mds__md__v1.html">lov_mds_md_v1</a> *&nbsp;</td>
          <td class="paramname"> <em>lmm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00092">92</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="lov__pack_8c_source.html#l00057">lov_dump_lmm_common()</a>, and <a class="el" href="lov__pack_8c_source.html#l00072">lov_dump_lmm_objects()</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00107">lov_dump_lmm()</a>, and <a class="el" href="lov__ea_8c_source.html#l00154">lsm_unpackmd_common()</a>.</p>

</div>
</div>
<a class="anchor" id="a7bb95c1fd61685569365c8f4971fe070"></a><!-- doxytag: member="lov_pack.c::lov_dump_lmm_v3" ref="a7bb95c1fd61685569365c8f4971fe070" args="(int level, struct lov_mds_md_v3 *lmm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lov_dump_lmm_v3 </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlov__mds__md__v3.html">lov_mds_md_v3</a> *&nbsp;</td>
          <td class="paramname"> <em>lmm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00099">99</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l01618">lov_mds_md_v3::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01617">lov_mds_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01615">lov_mds_md_v3::lmm_stripe_count</a>, <a class="el" href="lov__pack_8c_source.html#l00057">lov_dump_lmm_common()</a>, <a class="el" href="lov__pack_8c_source.html#l00072">lov_dump_lmm_objects()</a>, and <a class="el" href="lustre__user_8h_source.html#l00355">LOV_POOLNAMEF</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00107">lov_dump_lmm()</a>.</p>

</div>
</div>
<a class="anchor" id="afcb826ef867a3938969a2a00a5eb2c7d"></a><!-- doxytag: member="lov_pack.c::lov_free_memmd" ref="afcb826ef867a3938969a2a00a5eb2c7d" args="(struct lov_stripe_md **lsmp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lov_free_memmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> **&nbsp;</td>
          <td class="paramname"> <em>lsmp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00269">269</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="structlsm__operations.html#a4fa00f53d544b67cb6a57994578bcdb5">lsm_operations::lsm_free</a>, <a class="el" href="lov__internal_8h_source.html#l00057">lov_stripe_md::lsm_magic</a>, <a class="el" href="lov__internal_8h_source.html#l00096">lsm_op_find()</a>, and <a class="el" href="lov__internal_8h_source.html#l00049">lov_stripe_md::lsm_refc</a>.</p>

<p>Referenced by <a class="el" href="lov__object_8c_source.html#l00441">lov_fini_raid0()</a>, <a class="el" href="lov__object_8c_source.html#l00458">lov_fini_released()</a>, <a class="el" href="lov__object_8c_source.html#l00087">lov_lsm_put()</a>, and <a class="el" href="lov__pack_8c_source.html#l00287">lov_unpackmd()</a>.</p>

</div>
</div>
<a class="anchor" id="a8baf258a1956b3d50d998b35da3852f6"></a><!-- doxytag: member="lov_pack.c::lov_get_stripecnt" ref="a8baf258a1956b3d50d998b35da3852f6" args="(struct lov_obd *lov, __u32 magic, __u16 stripe_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 lov_get_stripecnt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlov__obd.html">lov_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lov</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>stripe_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00184">184</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00372">lov_obd::desc</a>, <a class="el" href="lustre__idl_8h_source.html#l02748">lov_desc::ld_active_tgt_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02749">lov_desc::ld_default_stripe_count</a>, <a class="el" href="lustre__user_8h_source.html#l00359">LOV_MAX_STRIPE_COUNT_OLD</a>, <a class="el" href="lustre__idl_8h_source.html#l01632">lov_mds_md_max_stripe_count()</a>, <a class="el" href="obd_8h_source.html#l00377">lov_obd::lov_ocd</a>, <a class="el" href="lustre__idl_8h_source.html#l01218">OBD_CONNECT_MAX_EASIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01336">obd_connect_data::ocd_connect_flags</a>, and <a class="el" href="lustre__idl_8h_source.html#l01349">obd_connect_data::ocd_max_easize</a>.</p>

<p>Referenced by <a class="el" href="lov__request_8c_source.html#l00178">lov_fini_statfs()</a>.</p>

</div>
</div>
<a class="anchor" id="af19c5624cb2f18a3ed387e5c859d79ef"></a><!-- doxytag: member="lov_pack.c::lov_lsm_alloc" ref="af19c5624cb2f18a3ed387e5c859d79ef" args="(u16 stripe_count, u32 pattern, u32 magic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a>* lov_lsm_alloc </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>stripe_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>magic</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00236">236</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="obd_8h_source.html#l00082">loi_init()</a>, <a class="el" href="obd_8h_source.html#l00067">lov_oinfo::loi_ost_idx</a>, <a class="el" href="lov__ea_8c_source.html#l00082">lsm_alloc_plain()</a>, <a class="el" href="lov__internal_8h_source.html#l00061">lov_stripe_md::lsm_layout_gen</a>, <a class="el" href="lov__internal_8h_source.html#l00050">lov_stripe_md::lsm_lock</a>, <a class="el" href="lov__internal_8h_source.html#l00057">lov_stripe_md::lsm_magic</a>, <a class="el" href="lov__internal_8h_source.html#l00055">lov_stripe_md::lsm_maxbytes</a>, <a class="el" href="lov__internal_8h_source.html#l00063">lov_stripe_md::lsm_oinfo</a>, <a class="el" href="lov__internal_8h_source.html#l00059">lov_stripe_md::lsm_pattern</a>, <a class="el" href="lov__internal_8h_source.html#l00062">lov_stripe_md::lsm_pool_name</a>, <a class="el" href="lov__internal_8h_source.html#l00049">lov_stripe_md::lsm_refc</a>, <a class="el" href="lov__internal_8h_source.html#l00060">lov_stripe_md::lsm_stripe_count</a>, <a class="el" href="lov__internal_8h_source.html#l00046">LUSTRE_EXT3_STRIPE_MAXBYTES</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00287">lov_unpackmd()</a>.</p>

</div>
</div>
<a class="anchor" id="a308f4e7a52e3ea846cc68363a6461e95"></a><!-- doxytag: member="lov_pack.c::lov_lsm_pack" ref="a308f4e7a52e3ea846cc68363a6461e95" args="(const struct lov_stripe_md *lsm, void *buf, size_t buf_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t lov_lsm_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>buf_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack LOV striping metadata for disk storage format (in little endian byte order). </p>
<p>This follows the getxattr() conventions. If <em>buf_size</em> is zero then return the size needed. If <em>buf_size</em> is too small then return -ERANGE. Otherwise return the size of the result. </p>

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00135">135</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00055">cpu_to_le16</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l01498">lov_ost_data_v1::l_ost_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l01510">lov_mds_md_v1::lmm_layout_gen</a>, <a class="el" href="lustre__idl_8h_source.html#l01504">lov_mds_md_v1::lmm_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l01511">lov_mds_md_v1::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01618">lov_mds_md_v3::lmm_objects</a>, <a class="el" href="lustre__idl_8h_source.html#l01506">lov_mds_md_v1::lmm_oi</a>, <a class="el" href="lustre__idl_8h_source.html#l01572">lmm_oi_cpu_to_le()</a>, <a class="el" href="lustre__idl_8h_source.html#l01505">lov_mds_md_v1::lmm_pattern</a>, <a class="el" href="lustre__idl_8h_source.html#l01617">lov_mds_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01509">lov_mds_md_v1::lmm_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01507">lov_mds_md_v1::lmm_stripe_size</a>, <a class="el" href="obd_8h_source.html#l00066">lov_oinfo::loi_oi</a>, <a class="el" href="obd_8h_source.html#l00068">lov_oinfo::loi_ost_gen</a>, <a class="el" href="obd_8h_source.html#l00067">lov_oinfo::loi_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__idl_8h_source.html#l01621">lov_mds_md_size()</a>, <a class="el" href="lov__internal_8h_source.html#l00061">lov_stripe_md::lsm_layout_gen</a>, <a class="el" href="lov__internal_8h_source.html#l00057">lov_stripe_md::lsm_magic</a>, <a class="el" href="lov__internal_8h_source.html#l00056">lov_stripe_md::lsm_oi</a>, <a class="el" href="lov__internal_8h_source.html#l00063">lov_stripe_md::lsm_oinfo</a>, <a class="el" href="lov__internal_8h_source.html#l00059">lov_stripe_md::lsm_pattern</a>, <a class="el" href="lov__internal_8h_source.html#l00062">lov_stripe_md::lsm_pool_name</a>, <a class="el" href="lov__internal_8h_source.html#l00060">lov_stripe_md::lsm_stripe_count</a>, <a class="el" href="lov__internal_8h_source.html#l00058">lov_stripe_md::lsm_stripe_size</a>, <a class="el" href="lustre__idl_8h_source.html#l00823">ostid_cpu_to_le()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00324">lov_getstripe()</a>, and <a class="el" href="lov__object_8c_source.html#l01441">lov_object_layout_get()</a>.</p>

</div>
</div>
<a class="anchor" id="abba5224263ad223d716587162abcc448"></a><!-- doxytag: member="lov_pack.c::lov_unpackmd" ref="abba5224263ad223d716587162abcc448" args="(struct lov_obd *lov, struct lov_mds_md *lmm, size_t lmm_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a>* lov_unpackmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlov__obd.html">lov_obd</a> *&nbsp;</td>
          <td class="paramname"> <em>lov</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lov_mds_md *&nbsp;</td>
          <td class="paramname"> <em>lmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>lmm_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00287">287</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lov__pack_8c_source.html#l00269">lov_free_memmd()</a>, <a class="el" href="lov__pack_8c_source.html#l00236">lov_lsm_alloc()</a>, <a class="el" href="lov__pack_8c_source.html#l00208">lov_verify_lmm()</a>, <a class="el" href="lov__internal_8h_source.html#l00096">lsm_op_find()</a>, <a class="el" href="structlsm__operations.html#a1caf593b6eb90d93c16d36f8ad768edc">lsm_operations::lsm_unpackmd</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="lov__object_8c_source.html#l00843">lov_conf_set()</a>, and <a class="el" href="lov__object_8c_source.html#l00802">lov_object_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab18351d31982170c51132c572088fd33"></a><!-- doxytag: member="lov_pack.c::lov_verify_lmm" ref="ab18351d31982170c51132c572088fd33" args="(void *lmm, int lmm_bytes, __u16 *stripe_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int lov_verify_lmm </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>lmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lmm_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16 *&nbsp;</td>
          <td class="paramname"> <em>stripe_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lov__pack_8c_source.html#l00208">208</a> of file <a class="el" href="lov__pack_8c_source.html">lov_pack.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="structlsm__operations.html#a128fe295e55692c44457ac675e701a3c">lsm_operations::lsm_lmm_verify</a>, <a class="el" href="lov__internal_8h_source.html#l00096">lsm_op_find()</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, and <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>.</p>

<p>Referenced by <a class="el" href="lov__pack_8c_source.html#l00287">lov_unpackmd()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
