<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/quota/qsd_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/quota/qsd_internal.h File Reference</h1><code>#include &quot;<a class="el" href="lquota__internal_8h_source.html">lquota_internal.h</a>&quot;</code><br/>

<p><a href="qsd__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqsd__instance.html">qsd_instance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqsd__fsinfo.html">qsd_fsinfo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqsd__upd__rec.html">qsd_upd_rec</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqsd__thread__info.html">qsd_thread_info</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#aad084629e7e280e1f85a283474e93c3b">QSD_RES_TYPE</a>(qsd)&nbsp;&nbsp;&nbsp;((qsd)-&gt;qsd_is_md ? LQUOTA_RES_MD : LQUOTA_RES_DT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a58f410b3976cd12595022db462ef9d29">QSD_WB_INTERVAL</a>&nbsp;&nbsp;&nbsp;60</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#afaa2e9191f283aed76275c463a151dd7">qsd_req_completion_t</a> )(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, struct <a class="el" href="structquota__body.html">quota_body</a> *, struct <a class="el" href="structquota__body.html">quota_body</a> *, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *, struct <a class="el" href="structlquota__lvb.html">lquota_lvb</a> *, void *, int)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#aed6249c371eb3d8570063d3b5b626b2e">lqe2qqi</a> (struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a4d30fbc0e08f4cff4d2b767d8df8bb94">qqi_getref</a> (struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *qqi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#afdb462f81720c42e5e13ff054e5571f2">qqi_putref</a> (struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *qqi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structqsd__thread__info.html">qsd_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a30d319983e1bc21aea85d5828b19a4d9">qsd_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a36c1c8825f9e85d9f67c6521fa05863b">qsd_type_enabled</a> (struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *qsd, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a4c7aa9c11768b7c9fb9e3a310d5c2760">qsd_set_qunit</a> (struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> qunit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a9fb0638ac282f5a1324ac0861c0dbdd9">qsd_set_edquot</a> (struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe, bool edquot)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a4d838808221b1bea500cbff9298670c9">qsd_wait_timeout</a> (struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *qsd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#ac303eae18fda184e7d57e2b046d39666">qsd_refresh_usage</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#aab2981ba402c8c0f5f8fd3f22b1c1da4">qsd_update_index</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, union <a class="el" href="unionlquota__id.html">lquota_id</a> *, bool, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, void *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#ac1c6a6c09843444bb3fa8edd833620bc">qsd_update_lqe</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *, bool, void *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a5e0394d284977e3a3efdf7227186e143">qsd_write_version</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, bool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a8df4345b655053bab3dfe0508b87dc3b">qsd_id_lock_match</a> (struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether a slave already own a ldlm lock for the quota identifier .  <a href="#a8df4345b655053bab3dfe0508b87dc3b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a913108a6e417e1bae81c384c2e550412">qsd_id_lock_cancel</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a999e74fa116e29755c419cda663b0034">qsd_start_reint_thread</a> (struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a9e742873ea173ae54ff5c9d88c1ffbf9">qsd_stop_reint_thread</a> (struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a75c9a719f491724c60fb3c37eea325b8">qsd_send_dqacq</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structobd__export.html">obd_export</a> *, struct <a class="el" href="structquota__body.html">quota_body</a> *, bool, <a class="el" href="qsd__internal_8h.html#afaa2e9191f283aed76275c463a151dd7">qsd_req_completion_t</a>, struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#ada8a9588adfdaf38b9460fb00d8fb9e0">qsd_intent_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structobd__export.html">obd_export</a> *, struct <a class="el" href="structquota__body.html">quota_body</a> *, bool, int, <a class="el" href="qsd__internal_8h.html#afaa2e9191f283aed76275c463a151dd7">qsd_req_completion_t</a>, struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, struct <a class="el" href="structlquota__lvb.html">lquota_lvb</a> *, void *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#afa9313d2f547e15a65f60235ed3197ce">qsd_fetch_index</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structobd__export.html">obd_export</a> *, struct <a class="el" href="structidx__info.html">idx_info</a> *, unsigned int, struct page **, bool *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a856c2540b1c50a263032fb13bfdcf2eb">qsd_bump_version</a> (struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, bool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a0bb2f233bdbd2590145c437c78b8a80a">qsd_upd_schedule</a> (struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *, union <a class="el" href="unionlquota__id.html">lquota_id</a> *, union <a class="el" href="unionlquota__rec.html">lquota_rec</a> *, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, bool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structqsd__fsinfo.html">qsd_fsinfo</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a1c075a8dc205d35bfe96a9c22f3624c4">qsd_get_fsinfo</a> (char *, bool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a18b6639f0e215a334ae2174c1f1f6c02">qsd_put_fsinfo</a> (struct <a class="el" href="structqsd__fsinfo.html">qsd_fsinfo</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#ae62d5cdc15b13100b2ee40536cfbb6b2">qsd_process_config</a> (struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a30d8e13bfe64c7a10c64ab520682d4fe">qsd_adjust</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adjust quota space (by acquiring or releasing) hold by the quota slave.  <a href="#a30d8e13bfe64c7a10c64ab520682d4fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a41a624a88952e80cb972d3cf6de794b9">qsd_start_upd_thread</a> (struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#ae7edbdbccc737ad99d90da973242c3c8">qsd_stop_upd_thread</a> (struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a806f59718442b89cc8c805116256e3f0">qsd_adjust_schedule</a> (struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *, bool, bool)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__context__key.html">lu_context_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a836b45cfcac7023075f74df21edb216f">qsd_thread_key</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlquota__entry__operations.html">lquota_entry_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a9b0e62f6c4f4d24b892c72da9d8b7ca3">qsd_lqe_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a81e46344310aff78cd2df97e5dd09cff">qsd_glb_einfo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qsd__internal_8h.html#a6c518ee37c173b155e9e41aa5accd65f">qsd_id_einfo</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aad084629e7e280e1f85a283474e93c3b"></a><!-- doxytag: member="qsd_internal.h::QSD_RES_TYPE" ref="aad084629e7e280e1f85a283474e93c3b" args="(qsd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QSD_RES_TYPE</td>
          <td>(</td>
          <td class="paramtype">qsd&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((qsd)-&gt;qsd_is_md ? LQUOTA_RES_MD : LQUOTA_RES_DT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00227">227</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00360">qsd_qtype_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a58f410b3976cd12595022db462ef9d29"></a><!-- doxytag: member="qsd_internal.h::QSD_WB_INTERVAL" ref="a58f410b3976cd12595022db462ef9d29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QSD_WB_INTERVAL&nbsp;&nbsp;&nbsp;60</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00328">328</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>Referenced by <a class="el" href="qsd__writeback_8c_source.html#l00312">qsd_adjust_schedule()</a>, and <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="afaa2e9191f283aed76275c463a151dd7"></a><!-- doxytag: member="qsd_internal.h::qsd_req_completion_t" ref="afaa2e9191f283aed76275c463a151dd7" args=")(const struct lu_env *, struct qsd_qtype_info *, struct quota_body *, struct quota_body *, struct lustre_handle *, struct lquota_lvb *, void *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="qsd__internal_8h.html#afaa2e9191f283aed76275c463a151dd7">qsd_req_completion_t</a>)(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *, struct <a class="el" href="structquota__body.html">quota_body</a> *, struct <a class="el" href="structquota__body.html">quota_body</a> *, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *, struct <a class="el" href="structlquota__lvb.html">lquota_lvb</a> *, void *, int)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00360">360</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aed6249c371eb3d8570063d3b5b626b2e"></a><!-- doxytag: member="qsd_internal.h::lqe2qqi" ref="aed6249c371eb3d8570063d3b5b626b2e" args="(struct lquota_entry *lqe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a>* lqe2qqi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00209">209</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lquota__internal_8h_source.html#l00236">lqe_is_master()</a>, <a class="el" href="lquota__internal_8h_source.html#l00147">lquota_entry::lqe_site</a>, and <a class="el" href="lquota__internal_8h_source.html#l00192">lquota_site::lqs_parent</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00630">qsd_acquire()</a>, <a class="el" href="qsd__handler_8c_source.html#l00530">qsd_acquire_remote()</a>, <a class="el" href="qsd__handler_8c_source.html#l00902">qsd_adjust()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00312">qsd_adjust_schedule()</a>, <a class="el" href="qsd__lock_8c_source.html#l00378">qsd_id_glimpse_ast()</a>, <a class="el" href="qsd__reint_8c_source.html#l00574">qsd_pending_updates()</a>, <a class="el" href="qsd__handler_8c_source.html#l00085">qsd_ready()</a>, and <a class="el" href="qsd__entry_8c_source.html#l00186">qsd_refresh_usage()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d30fbc0e08f4cff4d2b767d8df8bb94"></a><!-- doxytag: member="qsd_internal.h::qqi_getref" ref="a4d30fbc0e08f4cff4d2b767d8df8bb94" args="(struct qsd_qtype_info *qqi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void qqi_getref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname"> <em>qqi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00216">216</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="qsd__internal_8h_source.html#l00127">qsd_qtype_info::qqi_ref</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>.</p>

</div>
</div>
<a class="anchor" id="afdb462f81720c42e5e13ff054e5571f2"></a><!-- doxytag: member="qsd_internal.h::qqi_putref" ref="afdb462f81720c42e5e13ff054e5571f2" args="(struct qsd_qtype_info *qqi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void qqi_putref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname"> <em>qqi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00221">221</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="qsd__internal_8h_source.html#l00127">qsd_qtype_info::qqi_ref</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00068">qsd_glb_ast_data_get()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00236">qsd_glb_glimpse_ast()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a30d8e13bfe64c7a10c64ab520682d4fe"></a><!-- doxytag: member="qsd_internal.h::qsd_adjust" ref="a30d8e13bfe64c7a10c64ab520682d4fe" args="(const struct lu_env *, struct lquota_entry *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_adjust </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adjust quota space (by acquiring or releasing) hold by the quota slave. </p>
<p>This function is called after each quota request completion and during reintegration in order to report usage or re-acquire quota locks. Space adjustment is aborted if there is already a quota request in flight for this ID.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>- the environment passed by the caller </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lqe</em>&nbsp;</td><td>- is the qid entry to be processed</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success, appropriate errors on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qsd__handler_8c_source.html#l00902">902</a> of file <a class="el" href="qsd__handler_8c_source.html">qsd_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l02881">IT_QUOTA_DQACQ</a>, <a class="el" href="qsd__internal_8h_source.html#l00209">lqe2qqi()</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00144">lquota_entry::lqe_id</a>, <a class="el" href="lquota__internal_8h_source.html#l00242">lqe_write_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00250">lqe_write_unlock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l01032">lustre_handle_copy()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01885">quota_body::qb_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01879">quota_body::qb_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l01883">quota_body::qb_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01889">quota_body::qb_glb_lockh</a>, <a class="el" href="lustre__idl_8h_source.html#l01882">quota_body::qb_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01888">quota_body::qb_lockh</a>, <a class="el" href="qsd__internal_8h_source.html#l00134">qsd_qtype_info::qqi_fid</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__writeback_8c_source.html#l00312">qsd_adjust_schedule()</a>, <a class="el" href="qsd__handler_8c_source.html#l00159">qsd_calc_adjust()</a>, <a class="el" href="qsd__internal_8h_source.html#l00059">qsd_instance::qsd_exp</a>, <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>, <a class="el" href="qsd__internal_8h_source.html#l00261">qsd_info()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, <a class="el" href="qsd__handler_8c_source.html#l00085">qsd_ready()</a>, <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>, <a class="el" href="qsd__handler_8c_source.html#l00039">qsd_request_enter()</a>, <a class="el" href="qsd__request_8c_source.html#l00091">qsd_send_dqacq()</a>, <a class="el" href="qsd__internal_8h_source.html#l00252">qsd_thread_info::qti_body</a>, <a class="el" href="qsd__internal_8h_source.html#l00248">qsd_thread_info::qti_lockh</a>, <a class="el" href="lustre__idl_8h_source.html#l01903">QUOTA_DQACQ_FL_REPORT</a>, <a class="el" href="lquota__internal_8h_source.html#l00324">req_has_rep</a>, <a class="el" href="lquota__internal_8h_source.html#l00321">req_is_acq</a>, <a class="el" href="lquota__internal_8h_source.html#l00322">req_is_preacq</a>, <a class="el" href="lquota__internal_8h_source.html#l00323">req_is_rel</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>, <a class="el" href="qsd__handler_8c_source.html#l01119">qsd_op_adjust()</a>, <a class="el" href="qsd__handler_8c_source.html#l01019">qsd_op_end0()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00275">qsd_process_upd()</a>, <a class="el" href="qsd__reint_8c_source.html#l00294">qsd_reconciliation()</a>, and <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a806f59718442b89cc8c805116256e3f0"></a><!-- doxytag: member="qsd_internal.h::qsd_adjust_schedule" ref="a806f59718442b89cc8c805116256e3f0" args="(struct lquota_entry *, bool, bool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qsd_adjust_schedule </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__writeback_8c_source.html#l00312">312</a> of file <a class="el" href="qsd__writeback_8c_source.html">qsd_writeback.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00235">cfs_time_current_64</a>, <a class="el" href="linux-time_8h_source.html#l00242">cfs_time_shift_64()</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="qsd__internal_8h_source.html#l00209">lqe2qqi()</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00155">lquota_entry::lqe_link</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00082">qsd_instance::qsd_adjust_list</a>, <a class="el" href="qsd__internal_8h_source.html#l00085">qsd_instance::qsd_adjust_lock</a>, <a class="el" href="qsd__internal_8h_source.html#l00098">qsd_instance::qsd_lock</a>, <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_stopping</a>, <a class="el" href="qsd__internal_8h_source.html#l00088">qsd_instance::qsd_upd_thread</a>, <a class="el" href="qsd__internal_8h_source.html#l00328">QSD_WB_INTERVAL</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00902">qsd_adjust()</a>, <a class="el" href="qsd__handler_8c_source.html#l01019">qsd_op_end0()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>.</p>

</div>
</div>
<a class="anchor" id="a856c2540b1c50a263032fb13bfdcf2eb"></a><!-- doxytag: member="qsd_internal.h::qsd_bump_version" ref="a856c2540b1c50a263032fb13bfdcf2eb" args="(struct qsd_qtype_info *, __u64, bool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qsd_bump_version </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__writeback_8c_source.html#l00189">189</a> of file <a class="el" href="qsd__writeback_8c_source.html">qsd_writeback.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="lnetctl_8c_source.html#l00969">list</a>, <a class="el" href="qsd__internal_8h_source.html#l00166">qsd_qtype_info::qqi_deferred_glb</a>, <a class="el" href="qsd__internal_8h_source.html#l00168">qsd_qtype_info::qqi_deferred_slv</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_glb_uptodate</a>, <a class="el" href="qsd__internal_8h_source.html#l00153">qsd_qtype_info::qqi_glb_ver</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_slv_uptodate</a>, <a class="el" href="qsd__internal_8h_source.html#l00152">qsd_qtype_info::qqi_slv_ver</a>, <a class="el" href="qsd__writeback_8c_source.html#l00140">qsd_kickoff_deferred()</a>, and <a class="el" href="qsd__internal_8h_source.html#l00098">qsd_instance::qsd_lock</a>.</p>

<p>Referenced by <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, <a class="el" href="qsd__entry_8c_source.html#l00233">qsd_update_index()</a>, and <a class="el" href="qsd__entry_8c_source.html#l00161">qsd_write_version()</a>.</p>

</div>
</div>
<a class="anchor" id="afa9313d2f547e15a65f60235ed3197ce"></a><!-- doxytag: member="qsd_internal.h::qsd_fetch_index" ref="afa9313d2f547e15a65f60235ed3197ce" args="(const struct lu_env *, struct obd_export *, struct idx_info *, unsigned int, struct page **, bool *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_fetch_index </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structidx__info.html">idx_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>int</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page **&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__request_8c_source.html#l00351">351</a> of file <a class="el" href="qsd__request_8c_source.html">qsd_request.c</a>.</p>

<p>References <a class="el" href="structptlrpc__bulk__frag__ops.html#a3338125828618910ae190978e235d52a">ptlrpc_bulk_frag_ops::add_kiov_frag</a>, <a class="el" href="lustre__net_8h_source.html#l01451">ptlrpc_bulk_desc::bd_frag_ops</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l00104">MDS_BULK_PORTAL</a>, <a class="el" href="lustre__idl_8h_source.html#l00113">MDS_READPAGE_PORTAL</a>, <a class="el" href="lustre__idl_8h_source.html#l03031">OBD_IDX_READ</a>, <a class="el" href="client_8c_source.html#l00293">ptlrpc_at_set_req_timeout()</a>, <a class="el" href="lustre__net_8h_source.html#l01337">PTLRPC_BULK_BUF_KIOV</a>, <a class="el" href="client_8c_source.html#l00050">ptlrpc_bulk_kiov_pin_ops</a>, <a class="el" href="lustre__net_8h_source.html#l01339">PTLRPC_BULK_PUT_SINK</a>, <a class="el" href="client_8c_source.html#l00174">ptlrpc_prep_bulk_imp()</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="lustre__net_8h_source.html#l01198">ptlrpc_rep_need_swab()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01155">RMF_IDX_INFO</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="layout_8c_source.html#l01279">RQF_OBD_IDX_READ</a>, and <a class="el" href="sec_8c_source.html#l02286">sptlrpc_cli_unwrap_bulk_read()</a>.</p>

<p>Referenced by <a class="el" href="qsd__reint_8c_source.html#l00181">qsd_reint_index()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c075a8dc205d35bfe96a9c22f3624c4"></a><!-- doxytag: member="qsd_internal.h::qsd_get_fsinfo" ref="a1c075a8dc205d35bfe96a9c22f3624c4" args="(char *, bool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structqsd__fsinfo.html">qsd_fsinfo</a>* qsd_get_fsinfo </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__config_8c_source.html#l00074">74</a> of file <a class="el" href="qsd__config_8c_source.html">qsd_config.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="qsd__internal_8h_source.html#l00198">qsd_fsinfo::qfs_link</a>, <a class="el" href="qsd__internal_8h_source.html#l00188">qsd_fsinfo::qfs_name</a>, <a class="el" href="qsd__internal_8h_source.html#l00201">qsd_fsinfo::qfs_ref</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00557">qsd_init()</a>, and <a class="el" href="qsd__config_8c_source.html#l00128">qsd_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a913108a6e417e1bae81c384c2e550412"></a><!-- doxytag: member="qsd_internal.h::qsd_id_lock_cancel" ref="a913108a6e417e1bae81c384c2e550412" args="(const struct lu_env *, struct lquota_entry *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_id_lock_cancel </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__lock_8c_source.html#l00494">494</a> of file <a class="el" href="qsd__lock_8c_source.html">qsd_lock.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l01098">ldlm_enqueue_info::ei_mode</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__lock_8c_source.html#l00918">ldlm_lock_decref_and_cancel()</a>, <a class="el" href="lquota__internal_8h_source.html#l00158">lquota_entry::lqe_granted</a>, <a class="el" href="lquota__internal_8h_source.html#l00242">lqe_write_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00250">lqe_write_unlock()</a>, <a class="el" href="lustre__idl_8h_source.html#l01032">lustre_handle_copy()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="qsd__lock_8c_source.html#l00462">qsd_id_lock_match()</a>, <a class="el" href="qsd__internal_8h_source.html#l00261">qsd_info()</a>, <a class="el" href="qsd__internal_8h_source.html#l00321">qsd_set_edquot()</a>, <a class="el" href="qsd__internal_8h_source.html#l00292">qsd_set_qunit()</a>, <a class="el" href="qsd__internal_8h_source.html#l00248">qsd_thread_info::qti_lockh</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a8df4345b655053bab3dfe0508b87dc3b"></a><!-- doxytag: member="qsd_internal.h::qsd_id_lock_match" ref="a8df4345b655053bab3dfe0508b87dc3b" args="(struct lustre_handle *, struct lustre_handle *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_id_lock_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>rlockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether a slave already own a ldlm lock for the quota identifier . </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lockh</em>&nbsp;</td><td>- is the local lock handle from lquota entry. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rlockh</em>&nbsp;</td><td>- is the remote lock handle of the matched lock, if any.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>: on successful look up and  contains the lock handle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT,:</em>&nbsp;</td><td>no lock found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qsd__lock_8c_source.html#l00462">462</a> of file <a class="el" href="qsd__lock_8c_source.html">qsd_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="lustre__dlm_8h_source.html#l01098">ldlm_enqueue_info::ei_mode</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00766">ldlm_lock::l_remote_handle</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02586">ldlm_lock_dump_handle()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="lustre__idl_8h_source.html#l01032">lustre_handle_copy()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00530">qsd_acquire_remote()</a>, <a class="el" href="qsd__handler_8c_source.html#l00902">qsd_adjust()</a>, and <a class="el" href="qsd__lock_8c_source.html#l00494">qsd_id_lock_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="a30d319983e1bc21aea85d5828b19a4d9"></a><!-- doxytag: member="qsd_internal.h::qsd_info" ref="a30d319983e1bc21aea85d5828b19a4d9" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structqsd__thread__info.html">qsd_thread_info</a>* qsd_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00261">261</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="lu__object_8c_source.html#l01889">lu_env_refill()</a>, and <a class="el" href="qsd__internal_8h.html#a836b45cfcac7023075f74df21edb216f">qsd_thread_key</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00530">qsd_acquire_remote()</a>, <a class="el" href="qsd__handler_8c_source.html#l00902">qsd_adjust()</a>, <a class="el" href="qsd__lock_8c_source.html#l00494">qsd_id_lock_cancel()</a>, <a class="el" href="qsd__lib_8c_source.html#l00557">qsd_init()</a>, <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, <a class="el" href="qsd__entry_8c_source.html#l00064">qsd_lqe_read()</a>, <a class="el" href="qsd__lib_8c_source.html#l00656">qsd_prepare()</a>, <a class="el" href="qsd__reint_8c_source.html#l00294">qsd_reconciliation()</a>, <a class="el" href="qsd__entry_8c_source.html#l00186">qsd_refresh_usage()</a>, <a class="el" href="qsd__reint_8c_source.html#l00096">qsd_reint_entries()</a>, <a class="el" href="qsd__reint_8c_source.html#l00181">qsd_reint_index()</a>, <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>.</p>

</div>
</div>
<a class="anchor" id="ada8a9588adfdaf38b9460fb00d8fb9e0"></a><!-- doxytag: member="qsd_internal.h::qsd_intent_lock" ref="ada8a9588adfdaf38b9460fb00d8fb9e0" args="(const struct lu_env *, struct obd_export *, struct quota_body *, bool, int, qsd_req_completion_t, struct qsd_qtype_info *, struct lquota_lvb *, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_intent_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquota__body.html">quota_body</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qsd__internal_8h.html#afaa2e9191f283aed76275c463a151dd7">qsd_req_completion_t</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__lvb.html">lquota_lvb</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__request_8c_source.html#l00205">205</a> of file <a class="el" href="qsd__request_8c_source.html">qsd_request.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="qsd__request_8c_source.html#l00043">qsd_async_args::aa_arg</a>, <a class="el" href="qsd__request_8c_source.html#l00046">qsd_async_args::aa_completion</a>, <a class="el" href="qsd__request_8c_source.html#l00041">qsd_async_args::aa_exp</a>, <a class="el" href="qsd__request_8c_source.html#l00045">qsd_async_args::aa_lockh</a>, <a class="el" href="qsd__request_8c_source.html#l00044">qsd_async_args::aa_lvb</a>, <a class="el" href="qsd__request_8c_source.html#l00042">qsd_async_args::aa_qqi</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01103">ldlm_enqueue_info::ei_cbdata</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__fid_8h_source.html#l00574">fid_build_quota_res_name()</a>, <a class="el" href="lustre__fid_8h_source.html#l00541">fid_build_reg_res_name()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l02882">IT_QUOTA_CONN</a>, <a class="el" href="lustre__idl_8h_source.html#l02881">IT_QUOTA_DQACQ</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00082">LDLM_FL_HAS_INTENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00289">LDLM_FL_NO_LRU</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="ldlm__request_8c_source.html#l00829">ldlm_prep_enqueue_req()</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lu__ref_8h_source.html#l00204">lu_ref_add()</a>, <a class="el" href="lustre__idl_8h_source.html#l01032">lustre_handle_copy()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00648">LVB_T_LQUOTA</a>, <a class="el" href="lustre__idl_8h_source.html#l00113">MDS_READPAGE_PORTAL</a>, <a class="el" href="lustre__idl_8h_source.html#l02887">ldlm_intent::opc</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="lustre__net_8h_source.html#l00505">ptlrpc_req_async_args</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>, <a class="el" href="lustre__idl_8h_source.html#l01879">quota_body::qb_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l01882">quota_body::qb_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01888">quota_body::qb_lockh</a>, <a class="el" href="qsd__internal_8h_source.html#l00216">qqi_getref()</a>, <a class="el" href="qsd__internal_8h_source.html#l00179">qsd_qtype_info::qqi_reference</a>, <a class="el" href="qsd__lock_8c_source.html#l00046">qsd_glb_einfo</a>, <a class="el" href="qsd__lock_8c_source.html#l00054">qsd_id_einfo</a>, <a class="el" href="qsd__internal_8h_source.html#l00261">qsd_info()</a>, <a class="el" href="qsd__request_8c_source.html#l00156">qsd_intent_interpret()</a>, <a class="el" href="qsd__internal_8h_source.html#l00247">qsd_thread_info::qti_einfo</a>, <a class="el" href="qsd__internal_8h_source.html#l00248">qsd_thread_info::qti_lockh</a>, <a class="el" href="qsd__internal_8h_source.html#l00246">qsd_thread_info::qti_resid</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01049">RMF_DLM_LVB</a>, <a class="el" href="layout_8c_source.html#l01044">RMF_LDLM_INTENT</a>, <a class="el" href="layout_8c_source.html#l00949">RMF_QUOTA_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_delay</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_resend</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_retry_einprogress</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01331">RQF_LDLM_INTENT_QUOTA</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00530">qsd_acquire_remote()</a>, <a class="el" href="qsd__handler_8c_source.html#l00902">qsd_adjust()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>.</p>

</div>
</div>
<a class="anchor" id="ae62d5cdc15b13100b2ee40536cfbb6b2"></a><!-- doxytag: member="qsd_internal.h::qsd_process_config" ref="ae62d5cdc15b13100b2ee40536cfbb6b2" args="(struct lustre_cfg *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_process_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__config_8c_source.html#l00128">128</a> of file <a class="el" href="qsd__config_8c_source.html">qsd_config.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__config_8c_source.html#l00190">class_match_param()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00287">LCONSOLE_ERROR</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l01919">LQUOTA_FIRST_RES</a>, <a class="el" href="lustre__idl_8h_source.html#l01917">LQUOTA_RES_DT</a>, <a class="el" href="lustre__idl_8h_source.html#l01916">LQUOTA_RES_MD</a>, <a class="el" href="lustre__cfg_8h_source.html#l00210">lustre_cfg_string()</a>, <a class="el" href="lustre__param_8h_source.html#l00122">PARAM_QUOTA</a>, <a class="el" href="qsd__internal_8h_source.html#l00191">qsd_fsinfo::qfs_enabled</a>, <a class="el" href="qsd__internal_8h_source.html#l00195">qsd_fsinfo::qfs_mutex</a>, <a class="el" href="qsd__internal_8h_source.html#l00194">qsd_fsinfo::qfs_qsd_list</a>, <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_acct_failed</a>, <a class="el" href="qsd__config_8c_source.html#l00074">qsd_get_fsinfo()</a>, <a class="el" href="qsd__internal_8h_source.html#l00098">qsd_instance::qsd_lock</a>, <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_prepared</a>, <a class="el" href="qsd__config_8c_source.html#l00047">qsd_put_fsinfo()</a>, <a class="el" href="qsd__reint_8c_source.html#l00624">qsd_start_reint_thread()</a>, <a class="el" href="qsd__internal_8h_source.html#l00046">qsd_instance::qsd_svname</a>, <a class="el" href="qsd__internal_8h_source.html#l00073">qsd_instance::qsd_type_array</a>, <a class="el" href="lustre__quota_8h_source.html#l00074">QUOTA_DATAPOOL_NAME</a>, <a class="el" href="lustre__quota_8h_source.html#l00073">QUOTA_METAPOOL_NAME</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00809">qsd_glb_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a18b6639f0e215a334ae2174c1f1f6c02"></a><!-- doxytag: member="qsd_internal.h::qsd_put_fsinfo" ref="a18b6639f0e215a334ae2174c1f1f6c02" args="(struct qsd_fsinfo *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qsd_put_fsinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__fsinfo.html">qsd_fsinfo</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__config_8c_source.html#l00047">47</a> of file <a class="el" href="qsd__config_8c_source.html">qsd_config.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="qsd__internal_8h_source.html#l00198">qsd_fsinfo::qfs_link</a>, <a class="el" href="qsd__internal_8h_source.html#l00194">qsd_fsinfo::qfs_qsd_list</a>, and <a class="el" href="qsd__internal_8h_source.html#l00201">qsd_fsinfo::qfs_ref</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00474">qsd_fini()</a>, and <a class="el" href="qsd__config_8c_source.html#l00128">qsd_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="ac303eae18fda184e7d57e2b046d39666"></a><!-- doxytag: member="qsd_internal.h::qsd_refresh_usage" ref="ac303eae18fda184e7d57e2b046d39666" args="(const struct lu_env *, struct lquota_entry *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_refresh_usage </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__entry_8c_source.html#l00186">186</a> of file <a class="el" href="qsd__entry_8c_source.html">qsd_entry.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="qsd__internal_8h_source.html#l00209">lqe2qqi()</a>, <a class="el" href="lquota__internal_8h_source.html#l00144">lquota_entry::lqe_id</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lquota__disk_8c_source.html#l00562">lquota_disk_read()</a>, <a class="el" href="lquota__internal_8h_source.html#l00360">LQUOTA_ERROR</a>, <a class="el" href="qsd__internal_8h_source.html#l00147">qsd_qtype_info::qqi_acct_obj</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00261">qsd_info()</a>, <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_is_md</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l01840">toqb</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00630">qsd_acquire()</a>, <a class="el" href="qsd__entry_8c_source.html#l00064">qsd_lqe_read()</a>, <a class="el" href="qsd__handler_8c_source.html#l01119">qsd_op_adjust()</a>, <a class="el" href="qsd__handler_8c_source.html#l00686">qsd_op_begin0()</a>, <a class="el" href="qsd__handler_8c_source.html#l01019">qsd_op_end0()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00275">qsd_process_upd()</a>, <a class="el" href="qsd__reint_8c_source.html#l00294">qsd_reconciliation()</a>, and <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a75c9a719f491724c60fb3c37eea325b8"></a><!-- doxytag: member="qsd_internal.h::qsd_send_dqacq" ref="a75c9a719f491724c60fb3c37eea325b8" args="(const struct lu_env *, struct obd_export *, struct quota_body *, bool, qsd_req_completion_t, struct qsd_qtype_info *, struct lustre_handle *, struct lquota_entry *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_send_dqacq </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquota__body.html">quota_body</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qsd__internal_8h.html#afaa2e9191f283aed76275c463a151dd7">qsd_req_completion_t</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__request_8c_source.html#l00091">91</a> of file <a class="el" href="qsd__request_8c_source.html">qsd_request.c</a>.</p>

<p>References <a class="el" href="qsd__request_8c_source.html#l00043">qsd_async_args::aa_arg</a>, <a class="el" href="qsd__request_8c_source.html#l00046">qsd_async_args::aa_completion</a>, <a class="el" href="qsd__request_8c_source.html#l00041">qsd_async_args::aa_exp</a>, <a class="el" href="qsd__request_8c_source.html#l00045">qsd_async_args::aa_lockh</a>, <a class="el" href="qsd__request_8c_source.html#l00042">qsd_async_args::aa_qqi</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l01032">lustre_handle_copy()</a>, <a class="el" href="packet-lustre_8c_source.html#l00077">LUSTRE_MDS_VERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l00113">MDS_READPAGE_PORTAL</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="lustre__net_8h_source.html#l00505">ptlrpc_req_async_args</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00875">ptlrpc_request_free()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00268">ptlrpcd_add_req()</a>, <a class="el" href="qsd__request_8c_source.html#l00060">qsd_dqacq_interpret()</a>, <a class="el" href="lustre__idl_8h_source.html#l01988">QUOTA_DQACQ</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00949">RMF_QUOTA_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_delay</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_resend</a>, <a class="el" href="lustre__net_8h_source.html#l00968">ptlrpc_request::rq_no_retry_einprogress</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01327">RQF_QUOTA_DQACQ</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00530">qsd_acquire_remote()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00902">qsd_adjust()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fb0638ac282f5a1324ac0861c0dbdd9"></a><!-- doxytag: member="qsd_internal.h::qsd_set_edquot" ref="a9fb0638ac282f5a1324ac0861c0dbdd9" args="(struct lquota_entry *lqe, bool edquot)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void qsd_set_edquot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>edquot</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00321">321</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00235">cfs_time_current_64</a>, and <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_edquot</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00378">qsd_id_glimpse_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00494">qsd_id_lock_cancel()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c7aa9c11768b7c9fb9e3a310d5c2760"></a><!-- doxytag: member="qsd_internal.h::qsd_set_qunit" ref="a4c7aa9c11768b7c9fb9e3a310d5c2760" args="(struct lquota_entry *lqe, __u64 qunit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void qsd_set_qunit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>qunit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00292">292</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_nopreacq</a>, <a class="el" href="lquota__internal_8h_source.html#l00159">lquota_entry::lqe_qunit</a>, and <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00295">qsd_id_blocking_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00378">qsd_id_glimpse_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00494">qsd_id_lock_cancel()</a>, <a class="el" href="qsd__entry_8c_source.html#l00064">qsd_lqe_read()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>.</p>

</div>
</div>
<a class="anchor" id="a999e74fa116e29755c419cda663b0034"></a><!-- doxytag: member="qsd_internal.h::qsd_start_reint_thread" ref="a999e74fa116e29755c419cda663b0034" args="(struct qsd_qtype_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_start_reint_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__reint_8c_source.html#l00624">624</a> of file <a class="el" href="qsd__reint_8c_source.html">qsd_reint.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01693">name</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_glb_uptodate</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00131">qsd_qtype_info::qqi_qtype</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_reint</a>, <a class="el" href="qsd__internal_8h_source.html#l00160">qsd_qtype_info::qqi_reint_thread</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_slv_uptodate</a>, <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_acct_failed</a>, <a class="el" href="qsd__internal_8h_source.html#l00098">qsd_instance::qsd_lock</a>, <a class="el" href="qsd__reint_8c_source.html#l00574">qsd_pending_updates()</a>, <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>, <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_stopping</a>, <a class="el" href="qsd__internal_8h_source.html#l00046">qsd_instance::qsd_svname</a>, <a class="el" href="qsd__internal_8h_source.html#l00275">qsd_type_enabled()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00146">lprocfs_force_reint_seq_write()</a>, <a class="el" href="qsd__lock_8c_source.html#l00176">qsd_glb_blocking_ast()</a>, <a class="el" href="qsd__lib_8c_source.html#l00656">qsd_prepare()</a>, <a class="el" href="qsd__config_8c_source.html#l00128">qsd_process_config()</a>, <a class="el" href="qsd__handler_8c_source.html#l00085">qsd_ready()</a>, and <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a41a624a88952e80cb972d3cf6de794b9"></a><!-- doxytag: member="qsd_internal.h::qsd_start_upd_thread" ref="a41a624a88952e80cb972d3cf6de794b9" args="(struct qsd_instance *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_start_upd_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__writeback_8c_source.html#l00493">493</a> of file <a class="el" href="qsd__writeback_8c_source.html">qsd_writeback.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="qsd__internal_8h_source.html#l00046">qsd_instance::qsd_svname</a>, <a class="el" href="qsd__writeback_8c_source.html#l00410">qsd_upd_thread()</a>, <a class="el" href="qsd__internal_8h_source.html#l00088">qsd_instance::qsd_upd_thread</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00656">qsd_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e742873ea173ae54ff5c9d88c1ffbf9"></a><!-- doxytag: member="qsd_internal.h::qsd_stop_reint_thread" ref="a9e742873ea173ae54ff5c9d88c1ffbf9" args="(struct qsd_qtype_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qsd_stop_reint_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__reint_8c_source.html#l00544">544</a> of file <a class="el" href="qsd__reint_8c_source.html">qsd_reint.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="qsd__internal_8h_source.html#l00160">qsd_qtype_info::qqi_reint_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00474">qsd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7edbdbccc737ad99d90da973242c3c8"></a><!-- doxytag: member="qsd_internal.h::qsd_stop_upd_thread" ref="ae7edbdbccc737ad99d90da973242c3c8" args="(struct qsd_instance *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qsd_stop_upd_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__writeback_8c_source.html#l00563">563</a> of file <a class="el" href="qsd__writeback_8c_source.html">qsd_writeback.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="qsd__writeback_8c_source.html#l00549">qsd_cleanup_adjust()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00515">qsd_cleanup_deferred()</a>, <a class="el" href="qsd__internal_8h_source.html#l00088">qsd_instance::qsd_upd_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00474">qsd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a36c1c8825f9e85d9f67c6521fa05863b"></a><!-- doxytag: member="qsd_internal.h::qsd_type_enabled" ref="a36c1c8825f9e85d9f67c6521fa05863b" args="(struct qsd_instance *qsd, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qsd_type_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>qsd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00275">275</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l01919">LQUOTA_FIRST_RES</a>, <a class="el" href="lustre__idl_8h_source.html#l01917">LQUOTA_RES_DT</a>, <a class="el" href="lustre__idl_8h_source.html#l01916">LQUOTA_RES_MD</a>, <a class="el" href="qsd__internal_8h_source.html#l00191">qsd_fsinfo::qfs_enabled</a>, <a class="el" href="qsd__internal_8h_source.html#l00076">qsd_instance::qsd_fsinfo</a>, and <a class="el" href="qsd__internal_8h_source.html#l00110">qsd_instance::qsd_is_md</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00123">qsd_enabled_seq_show()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00360">qsd_job_pending()</a>, <a class="el" href="qsd__handler_8c_source.html#l01119">qsd_op_adjust()</a>, <a class="el" href="qsd__handler_8c_source.html#l00825">qsd_op_begin()</a>, <a class="el" href="qsd__lib_8c_source.html#l00656">qsd_prepare()</a>, <a class="el" href="qsd__reint_8c_source.html#l00624">qsd_start_reint_thread()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00076">qsd_state_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bb2f233bdbd2590145c437c78b8a80a"></a><!-- doxytag: member="qsd_internal.h::qsd_upd_schedule" ref="a0bb2f233bdbd2590145c437c78b8a80a" args="(struct qsd_qtype_info *, struct lquota_entry *, union lquota_id *, union lquota_rec *, __u64, bool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qsd_upd_schedule </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlquota__id.html">lquota_id</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlquota__rec.html">lquota_rec</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__writeback_8c_source.html#l00217">217</a> of file <a class="el" href="qsd__writeback_8c_source.html">qsd_writeback.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lnetctl_8c_source.html#l00969">list</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="qsd__internal_8h_source.html#l00166">qsd_qtype_info::qqi_deferred_glb</a>, <a class="el" href="qsd__internal_8h_source.html#l00168">qsd_qtype_info::qqi_deferred_slv</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_glb_uptodate</a>, <a class="el" href="qsd__internal_8h_source.html#l00153">qsd_qtype_info::qqi_glb_ver</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00172">qsd_qtype_info::qqi_slv_uptodate</a>, <a class="el" href="qsd__internal_8h_source.html#l00152">qsd_qtype_info::qqi_slv_ver</a>, <a class="el" href="qsd__writeback_8c_source.html#l00100">qsd_add_deferred()</a>, <a class="el" href="qsd__internal_8h_source.html#l00098">qsd_instance::qsd_lock</a>, <a class="el" href="qsd__internal_8h_source.html#l00046">qsd_instance::qsd_svname</a>, <a class="el" href="qsd__writeback_8c_source.html#l00085">qsd_upd_add()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00050">qsd_upd_alloc()</a>, <a class="el" href="qsd__writeback_8c_source.html#l00077">qsd_upd_free()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>.</p>

<p>Referenced by <a class="el" href="qsd__lock_8c_source.html#l00236">qsd_glb_glimpse_ast()</a>, <a class="el" href="qsd__lock_8c_source.html#l00378">qsd_id_glimpse_ast()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>.</p>

</div>
</div>
<a class="anchor" id="aab2981ba402c8c0f5f8fd3f22b1c1da4"></a><!-- doxytag: member="qsd_internal.h::qsd_update_index" ref="aab2981ba402c8c0f5f8fd3f22b1c1da4" args="(const struct lu_env *, struct qsd_qtype_info *, union lquota_id *, bool, __u64, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_update_index </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionlquota__id.html">lquota_id</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__entry_8c_source.html#l00233">233</a> of file <a class="el" href="qsd__entry_8c_source.html">qsd_entry.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02062">dt_trans_start_local()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lquota__disk_8c_source.html#l00589">lquota_disk_declare_write()</a>, <a class="el" href="lquota__disk_8c_source.html#l00633">lquota_disk_write()</a>, <a class="el" href="lquota__internal_8h_source.html#l00302">LQUOTA_SET_VER</a>, <a class="el" href="lustre__idl_8h_source.html#l01939">lquota_glb_rec::qbr_hardlimit</a>, <a class="el" href="lustre__idl_8h_source.html#l01940">lquota_glb_rec::qbr_softlimit</a>, <a class="el" href="lustre__idl_8h_source.html#l01850">lquota_id::qid_uid</a>, <a class="el" href="qsd__internal_8h_source.html#l00149">qsd_qtype_info::qqi_glb_obj</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00148">qsd_qtype_info::qqi_slv_obj</a>, <a class="el" href="qsd__writeback_8c_source.html#l00189">qsd_bump_version()</a>, <a class="el" href="qsd__internal_8h_source.html#l00052">qsd_instance::qsd_dev</a>, <a class="el" href="qsd__internal_8h_source.html#l00046">qsd_instance::qsd_svname</a>, <a class="el" href="lustre__idl_8h_source.html#l01952">lquota_slv_rec::qsr_granted</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__writeback_8c_source.html#l00275">qsd_process_upd()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00073">qsd_reint_qid()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1c6a6c09843444bb3fa8edd833620bc"></a><!-- doxytag: member="qsd_internal.h::qsd_update_lqe" ref="ac1c6a6c09843444bb3fa8edd833620bc" args="(const struct lu_env *, struct lquota_entry *, bool, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_update_lqe </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__entry_8c_source.html#l00309">309</a> of file <a class="el" href="qsd__entry_8c_source.html">qsd_entry.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_enforced</a>, <a class="el" href="lquota__internal_8h_source.html#l00158">lquota_entry::lqe_granted</a>, <a class="el" href="lquota__internal_8h_source.html#l00236">lqe_is_master()</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l01939">lquota_glb_rec::qbr_hardlimit</a>, <a class="el" href="lustre__idl_8h_source.html#l01940">lquota_glb_rec::qbr_softlimit</a>, <a class="el" href="lustre__idl_8h_source.html#l01952">lquota_slv_rec::qsr_granted</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__writeback_8c_source.html#l00275">qsd_process_upd()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00073">qsd_reint_qid()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d838808221b1bea500cbff9298670c9"></a><!-- doxytag: member="qsd_internal.h::qsd_wait_timeout" ref="a4d838808221b1bea500cbff9298670c9" args="(struct qsd_instance *qsd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qsd_wait_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqsd__instance.html">qsd_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>qsd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__internal_8h_source.html#l00332">332</a> of file <a class="el" href="qsd__internal_8h_source.html">qsd_internal.h</a>.</p>

<p>References <a class="el" href="class__obd_8c_source.html#l00097">at_max</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, and <a class="el" href="qsd__internal_8h_source.html#l00108">qsd_instance::qsd_timeout</a>.</p>

<p>Referenced by <a class="el" href="qsd__handler_8c_source.html#l00686">qsd_op_begin0()</a>, and <a class="el" href="qsd__lib_8c_source.html#l00183">qsd_timeout_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e0394d284977e3a3efdf7227186e143"></a><!-- doxytag: member="qsd_internal.h::qsd_write_version" ref="a5e0394d284977e3a3efdf7227186e143" args="(const struct lu_env *, struct qsd_qtype_info *, __u64, bool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qsd_write_version </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqsd__qtype__info.html">qsd_qtype_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__entry_8c_source.html#l00161">161</a> of file <a class="el" href="qsd__entry_8c_source.html">qsd_entry.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lquota__disk_8c_source.html#l00703">lquota_disk_update_ver()</a>, <a class="el" href="qsd__internal_8h_source.html#l00149">qsd_qtype_info::qqi_glb_obj</a>, <a class="el" href="qsd__internal_8h_source.html#l00141">qsd_qtype_info::qqi_qsd</a>, <a class="el" href="qsd__internal_8h_source.html#l00148">qsd_qtype_info::qqi_slv_obj</a>, <a class="el" href="qsd__writeback_8c_source.html#l00189">qsd_bump_version()</a>, <a class="el" href="qsd__internal_8h_source.html#l00052">qsd_instance::qsd_dev</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qsd__reint_8c_source.html#l00181">qsd_reint_index()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a81e46344310aff78cd2df97e5dd09cff"></a><!-- doxytag: member="qsd_internal.h::qsd_glb_einfo" ref="a81e46344310aff78cd2df97e5dd09cff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> <a class="el" href="qsd__lock_8c.html#a81e46344310aff78cd2df97e5dd09cff">qsd_glb_einfo</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__lock_8c_source.html#l00046">46</a> of file <a class="el" href="qsd__lock_8c_source.html">qsd_lock.c</a>.</p>

<p>Referenced by <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, and <a class="el" href="qsd__reint_8c_source.html#l00407">qsd_reint_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c518ee37c173b155e9e41aa5accd65f"></a><!-- doxytag: member="qsd_internal.h::qsd_id_einfo" ref="a6c518ee37c173b155e9e41aa5accd65f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__enqueue__info.html">ldlm_enqueue_info</a> <a class="el" href="qsd__lock_8c.html#a6c518ee37c173b155e9e41aa5accd65f">qsd_id_einfo</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__lock_8c_source.html#l00054">54</a> of file <a class="el" href="qsd__lock_8c_source.html">qsd_lock.c</a>.</p>

<p>Referenced by <a class="el" href="qsd__request_8c_source.html#l00205">qsd_intent_lock()</a>, and <a class="el" href="qsd__handler_8c_source.html#l00302">qsd_req_completion()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b0e62f6c4f4d24b892c72da9d8b7ca3"></a><!-- doxytag: member="qsd_internal.h::qsd_lqe_ops" ref="a9b0e62f6c4f4d24b892c72da9d8b7ca3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlquota__entry__operations.html">lquota_entry_operations</a> <a class="el" href="qsd__internal_8h.html#a9b0e62f6c4f4d24b892c72da9d8b7ca3">qsd_lqe_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qsd__entry_8c_source.html#l00155">155</a> of file <a class="el" href="qsd__entry_8c_source.html">qsd_entry.c</a>.</p>

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00360">qsd_qtype_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a836b45cfcac7023075f74df21edb216f"></a><!-- doxytag: member="qsd_internal.h::qsd_thread_key" ref="a836b45cfcac7023075f74df21edb216f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__context__key.html">lu_context_key</a> <a class="el" href="qsd__internal_8h.html#a836b45cfcac7023075f74df21edb216f">qsd_thread_key</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="qsd__lib_8c_source.html#l00827">qsd_glb_fini()</a>, <a class="el" href="qsd__lib_8c_source.html#l00809">qsd_glb_init()</a>, and <a class="el" href="qsd__internal_8h_source.html#l00261">qsd_info()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
