<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: handles</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>handles</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structportals__handle__ops.html">portals_handle_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structportals__handle.html">portals_handle</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#ga51d8362225fc0e9cab9f67070945b713">class_handle_hash</a> (struct <a class="el" href="structportals__handle.html">portals_handle</a> *, struct <a class="el" href="structportals__handle__ops.html">portals_handle_ops</a> *ops)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#gae730f35cebade5f4aed6c81e3e3cf1c1">class_handle_unhash</a> (struct <a class="el" href="structportals__handle.html">portals_handle</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#ga574f42037e1a70760130c6bcdd0d1a88">class_handle_hash_back</a> (struct <a class="el" href="structportals__handle.html">portals_handle</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#ga2bc637745ca97deb9ede4f4150f657a3">class_handle2object</a> (<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie, const void *owner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#ga32081a3d977d915ee79958dfa44cf08e">class_handle_free_cb</a> (struct rcu_head *rcu)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#ga19b4df0b02dc1f9e7139574b8c1df507">class_handle_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__handles.html#ga0fe2d00befa7668e70f2ea28b769f367">class_handle_cleanup</a> (void)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga2bc637745ca97deb9ede4f4150f657a3"></a><!-- doxytag: member="lustre_handles.h::class_handle2object" ref="ga2bc637745ca97deb9ede4f4150f657a3" args="(__u64 cookie, const void *owner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* class_handle2object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>owner</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00155">155</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lustre__handles_8h_source.html#l00075">portals_handle::h_in</a>, <a class="el" href="lustre__handles_8h_source.html#l00066">portals_handle::h_link</a>, <a class="el" href="lustre__handles_8h_source.html#l00073">portals_handle::h_lock</a>, <a class="el" href="lustre__handles_8h_source.html#l00069">portals_handle::h_ops</a>, <a class="el" href="lustre__handles_8h_source.html#l00068">portals_handle::h_owner</a>, <a class="el" href="lustre__handles_8c.html#a680e90b478a90d787f4c443efe2f9d13">handle_hash</a>, <a class="el" href="lustre__handles_8c_source.html#l00058">HANDLE_HASH_MASK</a>, <a class="el" href="lustre__handles_8c_source.html#l00054">handle_bucket::head</a>, <a class="el" href="structportals__handle__ops.html#a73c0121ecd15bc8441f08ec183c7bd34">portals_handle_ops::hop_addref</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="genops_8c_source.html#l00708">class_conn2export()</a>, and <a class="el" href="mdt__open_8c_source.html#l00084">mdt_handle2mfd()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0fe2d00befa7668e70f2ea28b769f367"></a><!-- doxytag: member="lustre_handles.h::class_handle_cleanup" ref="ga0fe2d00befa7668e70f2ea28b769f367" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void class_handle_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00254">254</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__handles_8c_source.html#l00232">cleanup_all_handles()</a>, <a class="el" href="lustre__handles_8c.html#a680e90b478a90d787f4c443efe2f9d13">handle_hash</a>, <a class="el" href="lustre__handles_8c_source.html#l00057">HANDLE_HASH_SIZE</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>.</p>

<p>Referenced by <a class="el" href="class__obd_8c_source.html#l00610">obdclass_exit()</a>.</p>

</div>
</div>
<a class="anchor" id="ga32081a3d977d915ee79958dfa44cf08e"></a><!-- doxytag: member="lustre_handles.h::class_handle_free_cb" ref="ga32081a3d977d915ee79958dfa44cf08e" args="(struct rcu_head *rcu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void class_handle_free_cb </td>
          <td>(</td>
          <td class="paramtype">struct rcu_head *&nbsp;</td>
          <td class="paramname"> <em>rcu</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00187">187</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lustre__handles_8h_source.html#l00069">portals_handle::h_ops</a>, <a class="el" href="lustre__handles_8h_source.html#l00072">portals_handle::h_rcu</a>, <a class="el" href="lustre__handles_8h_source.html#l00074">portals_handle::h_size</a>, <a class="el" href="structportals__handle__ops.html#a4fe56dbab105b831a5bfb62a57ab28e3">portals_handle_ops::hop_free</a>, and <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>.</p>

</div>
</div>
<a class="anchor" id="ga51d8362225fc0e9cab9f67070945b713"></a><!-- doxytag: member="lustre_handles.h::class_handle_hash" ref="ga51d8362225fc0e9cab9f67070945b713" args="(struct portals_handle *, struct portals_handle_ops *ops)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void class_handle_hash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structportals__handle.html">portals_handle</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structportals__handle__ops.html">portals_handle_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00064">64</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lustre__handles_8h_source.html#l00075">portals_handle::h_in</a>, <a class="el" href="lustre__handles_8h_source.html#l00066">portals_handle::h_link</a>, <a class="el" href="lustre__handles_8h_source.html#l00073">portals_handle::h_lock</a>, <a class="el" href="lustre__handles_8h_source.html#l00069">portals_handle::h_ops</a>, <a class="el" href="lustre__handles_8c_source.html#l00048">handle_base</a>, <a class="el" href="lustre__handles_8c_source.html#l00050">handle_base_lock</a>, <a class="el" href="lustre__handles_8c.html#a680e90b478a90d787f4c443efe2f9d13">handle_hash</a>, <a class="el" href="lustre__handles_8c_source.html#l00058">HANDLE_HASH_MASK</a>, <a class="el" href="lustre__handles_8c_source.html#l00049">HANDLE_INCR</a>, <a class="el" href="lustre__handles_8c_source.html#l00054">handle_bucket::head</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__handles_8c_source.html#l00053">handle_bucket::lock</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="genops_8c_source.html#l00836">class_new_export()</a>, <a class="el" href="genops_8c_source.html#l01049">class_new_import()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00460">ldlm_lock_new()</a>, and <a class="el" href="mdt__open_8c_source.html#l00062">mdt_mfd_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga574f42037e1a70760130c6bcdd0d1a88"></a><!-- doxytag: member="lustre_handles.h::class_handle_hash_back" ref="ga574f42037e1a70760130c6bcdd0d1a88" args="(struct portals_handle *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void class_handle_hash_back </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structportals__handle.html">portals_handle</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00139">139</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lustre__handles_8h_source.html#l00075">portals_handle::h_in</a>, <a class="el" href="lustre__handles_8h_source.html#l00066">portals_handle::h_link</a>, <a class="el" href="lustre__handles_8c.html#a680e90b478a90d787f4c443efe2f9d13">handle_hash</a>, <a class="el" href="lustre__handles_8c_source.html#l00058">HANDLE_HASH_MASK</a>, <a class="el" href="lustre__handles_8c_source.html#l00054">handle_bucket::head</a>, and <a class="el" href="lustre__handles_8c_source.html#l00053">handle_bucket::lock</a>.</p>

</div>
</div>
<a class="anchor" id="ga19b4df0b02dc1f9e7139574b8c1df507"></a><!-- doxytag: member="lustre_handles.h::class_handle_init" ref="ga19b4df0b02dc1f9e7139574b8c1df507" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int class_handle_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>bug 21430: add randomness to the initial base </p>
</p>

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00202">202</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="prng_8c_source.html#l00111">cfs_get_random_bytes()</a>, <a class="el" href="prng_8c_source.html#l00095">cfs_srand()</a>, <a class="el" href="lustre__handles_8c_source.html#l00048">handle_base</a>, <a class="el" href="lustre__handles_8c_source.html#l00050">handle_base_lock</a>, <a class="el" href="lustre__handles_8c.html#a680e90b478a90d787f4c443efe2f9d13">handle_hash</a>, <a class="el" href="lustre__handles_8c_source.html#l00057">HANDLE_HASH_SIZE</a>, <a class="el" href="lustre__handles_8c_source.html#l00054">handle_bucket::head</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__handles_8c_source.html#l00053">handle_bucket::lock</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, and <a class="el" href="fsx_8c_source.html#l00145">seed</a>.</p>

<p>Referenced by <a class="el" href="class__obd_8c_source.html#l00495">obdclass_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gae730f35cebade5f4aed6c81e3e3cf1c1"></a><!-- doxytag: member="lustre_handles.h::class_handle_unhash" ref="gae730f35cebade5f4aed6c81e3e3cf1c1" args="(struct portals_handle *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void class_handle_unhash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structportals__handle.html">portals_handle</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__handles_8c_source.html#l00128">128</a> of file <a class="el" href="lustre__handles_8c_source.html">lustre_handles.c</a>.</p>

<p>References <a class="el" href="lustre__handles_8c_source.html#l00107">class_handle_unhash_nolock()</a>, <a class="el" href="lustre__handles_8h_source.html#l00067">portals_handle::h_cookie</a>, <a class="el" href="lustre__handles_8c.html#a680e90b478a90d787f4c443efe2f9d13">handle_hash</a>, <a class="el" href="lustre__handles_8c_source.html#l00058">HANDLE_HASH_MASK</a>, and <a class="el" href="lustre__handles_8c_source.html#l00053">handle_bucket::lock</a>.</p>

<p>Referenced by <a class="el" href="genops_8c_source.html#l01091">class_destroy_import()</a>, <a class="el" href="genops_8c_source.html#l00836">class_new_export()</a>, <a class="el" href="genops_8c_source.html#l00932">class_unlink_export()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00352">ldlm_lock_destroy_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l05131">mdt_export_cleanup()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
