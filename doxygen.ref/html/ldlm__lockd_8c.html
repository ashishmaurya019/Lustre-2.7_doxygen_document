<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ldlm/ldlm_lockd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ldlm/ldlm_lockd.c File Reference</h1><code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="libcfs_8h_source.html">libcfs/libcfs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="list_8h_source.html">libcfs/list.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="ldlm__internal_8h_source.html">ldlm_internal.h</a>&quot;</code><br/>

<p><a href="ldlm__lockd_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__cb__async__args.html">ldlm_cb_async_args</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__bl__thread__data.html">ldlm_bl_thread_data</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LDLM</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a39158bc9dd6f9dd2be493c2b45c4de6a">ELT_STOPPED</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a3c0fb80c41f0e88eb4fbeaef61ccc5fd">ELT_READY</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#afd1e1105e053ec621caf5043fd339a86">ELT_TERMINATE</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a3115a1fd4692ea881ff962c0d7bf7a83">module_param</a> (<a class="el" href="ldlm__lockd_8c.html#a1ace9b68c5706b7b68e9ffaed5a80b4d">ldlm_num_threads</a>, int, 0444)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a9c22a8e5be87360fbad7b7571cf488f0">MODULE_PARM_DESC</a> (<a class="el" href="ldlm__lockd_8c.html#a1ace9b68c5706b7b68e9ffaed5a80b4d">ldlm_num_threads</a>,&quot;number of DLM <a class="el" href="o2iblnd__modparams_8c.html#a00f09e31c707a86ebc6b0cf74e934633">service</a> threads to <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a3aa0812e9fc4472caf872af3b745c86c">module_param</a> (<a class="el" href="ldlm__lockd_8c.html#a51a223cbb2c5192f3903587b2b2db552">ldlm_cpts</a>, charp, 0444)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#aada401f99a6ea04b27aaf120dbe73a25">MODULE_PARM_DESC</a> (<a class="el" href="ldlm__lockd_8c.html#a51a223cbb2c5192f3903587b2b2db552">ldlm_cpts</a>,&quot;CPU partitions ldlm threads should run on&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a68745a380529b0c2805e15cc63b07368">round_timeout</a> (<a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> <a class="el" href="o2iblnd__modparams_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#af417d63e7d46447ea1cab7793cd01984">ldlm_get_rq_timeout</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2efedea3f32b10e36e3bcf7dc9aa44d2">ldlm_del_waiting_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gad3d835ffc8ea5737e46381b9772cc224">ldlm_refresh_waiting_lock</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, int <a class="el" href="o2iblnd__modparams_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a5e6e5041059d52602954a9b4769341fa">ldlm_handle_bl_callback</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback handler for receiving incoming blocking ASTs.  <a href="#a5e6e5041059d52602954a9b4769341fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#ad15f89a44dd9b7464ac13d9c9fa8f1b1">ldlm_handle_cp_callback</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__request.html">ldlm_request</a> *dlm_req, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback handler for receiving incoming completion ASTs.  <a href="#ad15f89a44dd9b7464ac13d9c9fa8f1b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a35808ef439e87ddea74da001f6ca2c1f">ldlm_handle_gl_callback</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__request.html">ldlm_request</a> *dlm_req, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback handler for receiving incoming glimpse ASTs.  <a href="#a35808ef439e87ddea74da001f6ca2c1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#aa9b000e1718e67796c2a5c6c456450a0">ldlm_callback_reply</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#ade7c9293b43245932e1886644a0e9073">__ldlm_bl_to_thread</a> (struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *blwi, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a5d5c0e66cce503363b3ca7867516d8b2">init_blwi</a> (struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *blwi, struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structlist__head.html">list_head</a> *cancels, int count, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a4f0396e7233f72e51de6973c671458a6">ldlm_bl_to_thread</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structlist__head.html">list_head</a> *cancels, int count, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Queues a list of locks <em>cancels</em> containing <em>count</em> locks for later processing by a blocking thread.  <a href="#a4f0396e7233f72e51de6973c671458a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a05cdf5681d86896cd54b278fdcc0d0ff">ldlm_bl_to_thread_lock</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a086a4e7dffe032bcbf8f1100101de207">ldlm_bl_to_thread_list</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *ld, struct <a class="el" href="structlist__head.html">list_head</a> *cancels, int count, enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a> cancel_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a7557667d088038fc93a6c30b0904cc56">ldlm_bl_thread_wakeup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#aa06e5b145ddd80f8a311b7896633fbac">ldlm_handle_setinfo</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a25f98c14f48d2996883a7ac44dded41d">ldlm_callback_errmsg</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, const char *<a class="el" href="multiop_8c.html#afbbc03d010d4a43d0dcc0ef3c41de5ec">msg</a>, int rc, const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a6a0cb59e13512393ad9ecf942489bae7">ldlm_callback_handler</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a6dda288b5eb4f358b6e70665ebdac40c">ldlm_bl_get_work</a> (struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *blp, struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> **p_blwi, struct <a class="el" href="structobd__export.html">obd_export</a> **p_exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#affa9f443a1ed708c361f3c1e94977369">ldlm_bl_thread_main</a> (void *arg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main blocking requests processing thread.  <a href="#affa9f443a1ed708c361f3c1e94977369"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#abb7467a74565cf59cf2fe1a6abee3a4d">ldlm_bl_thread_start</a> (struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *blp, bool check_busy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#ae8da30c6d06ee8fe4856d9ad00ed3f46">ldlm_bl_thread_need_create</a> (struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *blp, struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *blwi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a1e1fb7c1aea2a5585fb744d548e102fe">ldlm_bl_thread_blwi</a> (struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *blp, struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *blwi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a65c7f84b4025c78639af3299ebc0ccf3">ldlm_bl_thread_exports</a> (struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *blp, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancel stale locks on export.  <a href="#a65c7f84b4025c78639af3299ebc0ccf3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a77da3ee5344bdbe6bb573fbbba124dab">ldlm_setup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a1b6250a48d071444f27c1ca0a0304d35">ldlm_cleanup</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga2582912f032081101820c56da0dbfb76">ldlm_get_ref</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gabab5acbe0d24c0a37be4893ae6e00dcf">ldlm_put_ref</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#ad2cf5442f9c3a782fea532f14ba7d5da">ldlm_export_lock_hash</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, const void *key, unsigned mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a0fdf82590537c3188c43910b92afc805">ldlm_export_lock_key</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a239253b96871af9eeab4b11b26ebc920">ldlm_export_lock_keycpy</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode, void *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a766cca1378db6951a94c56814a13ba62">ldlm_export_lock_keycmp</a> (const void *key, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a3958b330224ca0debf7598aca9a57e32">ldlm_export_lock_object</a> (struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a2ac1fedad04fd9874fbc80746dccf8dc">ldlm_export_lock_get</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a3ae17cff0ec67fe2c04108066dbab291">ldlm_export_lock_put</a> (struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *hs, struct <a class="el" href="structhlist__node.html">hlist_node</a> *hnode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#gaa1ae45d9f2b5213f12d150a3806e03b4">ldlm_init_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LDLM.html#ga20871b8557c0afe94cb45c2d64cbd31f">ldlm_destroy_export</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#aa38ba5ece9587fb13ea1d88c737f0129">ldlm_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#ac9ccefb86d4787c31c1d58689f0b1586">ldlm_exit</a> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a1ace9b68c5706b7b68e9ffaed5a80b4d">ldlm_num_threads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a51a223cbb2c5192f3903587b2b2db552">ldlm_cpts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#af9e182e4349066b3ec8c2163481d4f9d">ldlm_ref_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#afccb48b92bc558f9f5dd7677733c323b">ldlm_refcount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structldlm__state.html">ldlm_state</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a0bb0c5534d09cd24959a8ce3ec5d4970">ldlm_state</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ldlm__lockd_8c.html#a307c852147674ec14bd24c574cf24a0f">ldlm_export_lock_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="ldlm_lockd.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LDLM</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00042">42</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3c0fb80c41f0e88eb4fbeaef61ccc5fd"></a><!-- doxytag: member="ldlm_lockd.c::ELT_READY" ref="a3c0fb80c41f0e88eb4fbeaef61ccc5fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ELT_READY&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00086">86</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a39158bc9dd6f9dd2be493c2b45c4de6a"></a><!-- doxytag: member="ldlm_lockd.c::ELT_STOPPED" ref="a39158bc9dd6f9dd2be493c2b45c4de6a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ELT_STOPPED&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00085">85</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="afd1e1105e053ec621caf5043fd339a86"></a><!-- doxytag: member="ldlm_lockd.c::ELT_TERMINATE" ref="afd1e1105e053ec621caf5043fd339a86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ELT_TERMINATE&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00087">87</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ade7c9293b43245932e1886644a0e9073"></a><!-- doxytag: member="ldlm_lockd.c::__ldlm_bl_to_thread" ref="ade7c9293b43245932e1886644a0e9073" args="(struct ldlm_bl_work_item *blwi, enum ldlm_cancel_flags cancel_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __ldlm_bl_to_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *&nbsp;</td>
          <td class="paramname"> <em>blwi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l01980">1980</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00103">ldlm_bl_pool::blp_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00090">ldlm_bl_pool::blp_lock</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00097">ldlm_bl_pool::blp_prio_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00105">ldlm_bl_pool::blp_waitq</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00120">ldlm_bl_work_item::blwi_comp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00114">ldlm_bl_work_item::blwi_entry</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00117">ldlm_bl_work_item::blwi_lock</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="ldlm__internal_8h_source.html#l00232">ldlm_state::ldlm_bl_pool</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00095">ldlm_is_discard_data</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02042">ldlm_bl_to_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d5c0e66cce503363b3ca7867516d8b2"></a><!-- doxytag: member="ldlm_lockd.c::init_blwi" ref="a5d5c0e66cce503363b3ca7867516d8b2" args="(struct ldlm_bl_work_item *blwi, struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct list_head *cancels, int count, struct ldlm_lock *lock, enum ldlm_cancel_flags cancel_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void init_blwi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *&nbsp;</td>
          <td class="paramname"> <em>blwi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>cancels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02007">2007</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00120">ldlm_bl_work_item::blwi_comp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00119">ldlm_bl_work_item::blwi_count</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00121">ldlm_bl_work_item::blwi_flags</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00118">ldlm_bl_work_item::blwi_head</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00116">ldlm_bl_work_item::blwi_ld</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00117">ldlm_bl_work_item::blwi_lock</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00122">ldlm_bl_work_item::blwi_mem_pressure</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00115">ldlm_bl_work_item::blwi_ns</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="libcfs__prim_8h_source.html#l00068">memory_pressure_get()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02042">ldlm_bl_to_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a6dda288b5eb4f358b6e70665ebdac40c"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_get_work" ref="a6dda288b5eb4f358b6e70665ebdac40c" args="(struct ldlm_bl_pool *blp, struct ldlm_bl_work_item **p_blwi, struct obd_export **p_exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_get_work </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>blp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> **&nbsp;</td>
          <td class="paramname"> <em>p_blwi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> **&nbsp;</td>
          <td class="paramname"> <em>p_exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02554">2554</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00103">ldlm_bl_pool::blp_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00090">ldlm_bl_pool::blp_lock</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00107">ldlm_bl_pool::blp_num_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00097">ldlm_bl_pool::blp_prio_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00114">ldlm_bl_work_item::blwi_entry</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00043">list_head::next</a>, <a class="el" href="genops_8c_source.html#l01757">obd_stale_export_get()</a>, and <a class="el" href="genops_8c_source.html#l01778">obd_stale_export_put()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e1fb7c1aea2a5585fb744d548e102fe"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_thread_blwi" ref="a1e1fb7c1aea2a5585fb744d548e102fe" args="(struct ldlm_bl_pool *blp, struct ldlm_bl_work_item *blwi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_thread_blwi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>blp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *&nbsp;</td>
          <td class="paramname"> <em>blwi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02662">2662</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00120">ldlm_bl_work_item::blwi_comp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00119">ldlm_bl_work_item::blwi_count</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00121">ldlm_bl_work_item::blwi_flags</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00118">ldlm_bl_work_item::blwi_head</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00116">ldlm_bl_work_item::blwi_ld</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00117">ldlm_bl_work_item::blwi_lock</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00122">ldlm_bl_work_item::blwi_mem_pressure</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00115">ldlm_bl_work_item::blwi_ns</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="lustre__dlm_8h_source.html#l00618">LCF_BL_AST</a>, <a class="el" href="ldlm__request_8c_source.html#l01917">ldlm_cli_cancel_list()</a>, <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01181">LDLM_ITER_STOP</a>, <a class="el" href="libcfs__prim_8h_source.html#l00078">memory_pressure_clr()</a>, <a class="el" href="libcfs__prim_8h_source.html#l00073">memory_pressure_set()</a>, <a class="el" href="obd__support_8h_source.html#l00359">OBD_FAIL_LDLM_PAUSE_CANCEL2</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a65c7f84b4025c78639af3299ebc0ccf3"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_thread_exports" ref="a65c7f84b4025c78639af3299ebc0ccf3" args="(struct ldlm_bl_pool *blp, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_thread_exports </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>blp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel stale locks on export. </p>
<p>Cancel blocked locks first. If the given export has blocked locks, the next in the list may have them too, thus cancel not blocked locks only if the current export has no blocked locks. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02708">2708</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__lock_8c_source.html#l02361">ldlm_export_cancel_blocked_locks()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02401">ldlm_export_cancel_locks()</a>, <a class="el" href="obd__support_8h_source.html#l00358">OBD_FAIL_LDLM_BL_EVICT</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="genops_8c_source.html#l01778">obd_stale_export_put()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>.</p>

</div>
</div>
<a class="anchor" id="affa9f443a1ed708c361f3c1e94977369"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_thread_main" ref="affa9f443a1ed708c361f3c1e94977369" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_thread_main </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main blocking requests processing thread. </p>
<p>Callers put locks into its queue by calling ldlm_bl_to_thread. This thread in the end ends up doing actual call to -&gt;l_blocking_ast for queued locks. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02733">2733</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00108">ldlm_bl_pool::blp_busy_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00106">ldlm_bl_pool::blp_comp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00107">ldlm_bl_pool::blp_num_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00105">ldlm_bl_pool::blp_waitq</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02604">ldlm_bl_thread_data::bltd_blp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02605">ldlm_bl_thread_data::bltd_comp</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00339">l_wait_event_exclusive</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02554">ldlm_bl_get_work()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02662">ldlm_bl_thread_blwi()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02708">ldlm_bl_thread_exports()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02645">ldlm_bl_thread_need_create()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02611">ldlm_bl_thread_start()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01181">LDLM_ITER_STOP</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02611">ldlm_bl_thread_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ae8da30c6d06ee8fe4856d9ad00ed3f46"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_thread_need_create" ref="ae8da30c6d06ee8fe4856d9ad00ed3f46" args="(struct ldlm_bl_pool *blp, struct ldlm_bl_work_item *blwi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_thread_need_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>blp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__work__item.html">ldlm_bl_work_item</a> *&nbsp;</td>
          <td class="paramname"> <em>blwi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02645">2645</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00108">ldlm_bl_pool::blp_busy_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00110">ldlm_bl_pool::blp_max_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00107">ldlm_bl_pool::blp_num_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00122">ldlm_bl_work_item::blwi_mem_pressure</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l00115">ldlm_bl_work_item::blwi_ns</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>.</p>

</div>
</div>
<a class="anchor" id="abb7467a74565cf59cf2fe1a6abee3a4d"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_thread_start" ref="abb7467a74565cf59cf2fe1a6abee3a4d" args="(struct ldlm_bl_pool *blp, bool check_busy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_thread_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__bl__pool.html">ldlm_bl_pool</a> *&nbsp;</td>
          <td class="paramname"> <em>blp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>check_busy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02611">2611</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00108">ldlm_bl_pool::blp_busy_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00110">ldlm_bl_pool::blp_max_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00107">ldlm_bl_pool::blp_num_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02604">ldlm_bl_thread_data::bltd_blp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02605">ldlm_bl_thread_data::bltd_comp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02606">ldlm_bl_thread_data::bltd_num</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02733">ldlm_bl_thread_main()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a7557667d088038fc93a6c30b0904cc56"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_thread_wakeup" ref="a7557667d088038fc93a6c30b0904cc56" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_bl_thread_wakeup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02088">2088</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00105">ldlm_bl_pool::blp_waitq</a>, and <a class="el" href="ldlm__internal_8h_source.html#l00232">ldlm_state::ldlm_bl_pool</a>.</p>

</div>
</div>
<a class="anchor" id="a4f0396e7233f72e51de6973c671458a6"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_to_thread" ref="a4f0396e7233f72e51de6973c671458a6" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct ldlm_lock *lock, struct list_head *cancels, int count, enum ldlm_cancel_flags cancel_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_bl_to_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>cancels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queues a list of locks <em>cancels</em> containing <em>count</em> locks for later processing by a blocking thread. </p>
<p>If <em>count</em> is zero, then the lock referenced as <em>lock</em> is queued instead.</p>
<p>The blocking thread would then call -&gt;l_blocking_ast callback in the lock. If list addition fails an error is returned and caller is supposed to call -&gt;l_blocking_ast itself. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02042">2042</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l01980">__ldlm_bl_to_thread()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02007">init_blwi()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02081">ldlm_bl_to_thread_list()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02075">ldlm_bl_to_thread_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a086a4e7dffe032bcbf8f1100101de207"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_to_thread_list" ref="a086a4e7dffe032bcbf8f1100101de207" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct list_head *cancels, int count, enum ldlm_cancel_flags cancel_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_bl_to_thread_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlist__head.html">list_head</a> *&nbsp;</td>
          <td class="paramname"> <em>cancels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__LDLM.html#ga0b718c2d27bc15f43205e50e4da16ec9">ldlm_cancel_flags</a>&nbsp;</td>
          <td class="paramname"> <em>cancel_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02081">2081</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l02042">ldlm_bl_to_thread()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01831">ldlm_cancel_lru()</a>.</p>

</div>
</div>
<a class="anchor" id="a05cdf5681d86896cd54b278fdcc0d0ff"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_bl_to_thread_lock" ref="a05cdf5681d86896cd54b278fdcc0d0ff" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_bl_to_thread_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02075">2075</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02042">ldlm_bl_to_thread()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a25f98c14f48d2996883a7ac44dded41d"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_callback_errmsg" ref="a25f98c14f48d2996883a7ac44dded41d" args="(struct ptlrpc_request *req, const char *msg, int rc, const struct lustre_handle *handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_callback_errmsg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02138">2138</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00139">D_WARNING</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="lnet_2lnet_2nidstrings_8c_source.html#l01236">libcfs_id2str()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_no_reply</a>, and <a class="el" href="lustre__net_8h_source.html#l01108">ptlrpc_request::rq_peer</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a0cb59e13512393ad9ecf942489bae7"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_callback_handler" ref="a6a0cb59e13512393ad9ecf942489bae7" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_callback_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02153">2153</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="fail_8c_source.html#l00040">cfs_fail_err</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="packet-lustre_8c_source.html#l00287">LDLM_BL_CALLBACK</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02075">ldlm_bl_to_thread_lock()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02138">ldlm_callback_errmsg()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01966">ldlm_callback_reply()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="packet-lustre_8c_source.html#l00288">LDLM_CP_CALLBACK</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00366">LDLM_FL_AST_MASK</a>, <a class="el" href="lustre__idl_8h_source.html#l02934">ldlm_flags_from_wire</a>, <a class="el" href="packet-lustre_8c_source.html#l00289">LDLM_GL_CALLBACK</a>, <a class="el" href="lustre__dlm_8h_source.html#l01282">ldlm_handle2lock_long()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01796">ldlm_handle_cp_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02095">ldlm_handle_setinfo()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00281">ldlm_is_bl_done</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00128">ldlm_is_cancel_on_block</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00204">ldlm_is_canceling</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00160">ldlm_is_fail_loc</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00198">ldlm_is_failed</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="ldlm__internal_8h_source.html#l00171">ldlm_lock_remove_from_lru</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00272">ldlm_set_bl_ast</a>, <a class="el" href="lustre__idl_8h_source.html#l02773">LDLM_SET_INFO</a>, <a class="el" href="llog__server_8c_source.html#l00332">llog_origin_handle_close()</a>, <a class="el" href="packet-lustre_8c_source.html#l00326">LLOG_ORIGIN_HANDLE_CLOSE</a>, <a class="el" href="packet-lustre_8c_source.html#l00322">LLOG_ORIGIN_HANDLE_CREATE</a>, <a class="el" href="llog__server_8c_source.html#l00157">llog_origin_handle_next_block()</a>, <a class="el" href="packet-lustre_8c_source.html#l00323">LLOG_ORIGIN_HANDLE_NEXT_BLOCK</a>, <a class="el" href="llog__server_8c_source.html#l00059">llog_origin_handle_open()</a>, <a class="el" href="llog__server_8c_source.html#l00278">llog_origin_handle_read_header()</a>, <a class="el" href="packet-lustre_8c_source.html#l00324">LLOG_ORIGIN_HANDLE_READ_HEADER</a>, <a class="el" href="lustre__idl_8h_source.html#l02909">ldlm_request::lock_desc</a>, <a class="el" href="lustre__idl_8h_source.html#l02907">ldlm_request::lock_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02910">ldlm_request::lock_handle</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00333">OBD_FAIL_LDLM_BL_CALLBACK_NET</a>, <a class="el" href="obd__support_8h_source.html#l00348">OBD_FAIL_LDLM_CANCEL_BL_CB_RACE</a>, <a class="el" href="obd__support_8h_source.html#l00352">OBD_FAIL_LDLM_CP_BL_RACE</a>, <a class="el" href="obd__support_8h_source.html#l00334">OBD_FAIL_LDLM_CP_CALLBACK_NET</a>, <a class="el" href="obd__support_8h_source.html#l00335">OBD_FAIL_LDLM_GL_CALLBACK_NET</a>, <a class="el" href="obd__support_8h_source.html#l00420">OBD_FAIL_OBD_LOGD_NET</a>, <a class="el" href="obd_8h_source.html#l00641">obd_device::obd_namespace</a>, <a class="el" href="obd__support_8h_source.html#l00627">OBD_RACE</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02339">req_capsule_extend()</a>, <a class="el" href="layout_8c_source.html#l01762">req_capsule_init()</a>, <a class="el" href="layout_8c_source.html#l01816">req_capsule_set()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01033">RMF_DLM_REQ</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_no_reply</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="layout_8c_source.html#l01468">RQF_LDLM_BL_CALLBACK</a>, <a class="el" href="layout_8c_source.html#l01460">RQF_LDLM_CALLBACK</a>, <a class="el" href="layout_8c_source.html#l01464">RQF_LDLM_CP_CALLBACK</a>, <a class="el" href="layout_8c_source.html#l01472">RQF_LDLM_GL_CALLBACK</a>, <a class="el" href="layout_8c_source.html#l01572">RQF_LLOG_ORIGIN_HANDLE_CREATE</a>, <a class="el" href="layout_8c_source.html#l01582">RQF_LLOG_ORIGIN_HANDLE_NEXT_BLOCK</a>, <a class="el" href="layout_8c_source.html#l01592">RQF_LLOG_ORIGIN_HANDLE_READ_HEADER</a>, <a class="el" href="lustre__idl_8h_source.html#l03594">SEC_CTX_FINI</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="aa9b000e1718e67796c2a5c6c456450a0"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_callback_reply" ref="aa9b000e1718e67796c2a5c6c456450a0" args="(struct ptlrpc_request *req, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_callback_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l01966">1966</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="pack__generic_8c_source.html#l00401">lustre_pack_reply()</a>, <a class="el" href="niobuf_8c_source.html#l00614">ptlrpc_reply()</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_no_reply</a>, <a class="el" href="lustre__net_8h_source.html#l01003">ptlrpc_request::rq_packed_final</a>, and <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b6250a48d071444f27c1ca0a0304d35"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_cleanup" ref="a1b6250a48d071444f27c1ca0a0304d35" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l03096">3096</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00106">ldlm_bl_pool::blp_comp</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00103">ldlm_bl_pool::blp_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00090">ldlm_bl_pool::blp_lock</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00107">ldlm_bl_pool::blp_num_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00105">ldlm_bl_pool::blp_waitq</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00114">ldlm_bl_work_item::blwi_entry</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00115">ldlm_bl_work_item::blwi_ns</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00085">ELT_STOPPED</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00087">ELT_TERMINATE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__internal_8h_source.html#l00232">ldlm_state::ldlm_bl_pool</a>, <a class="el" href="ldlm__internal_8h_source.html#l00229">ldlm_state::ldlm_cancel_service</a>, <a class="el" href="ldlm__internal_8h_source.html#l00228">ldlm_state::ldlm_cb_service</a>, <a class="el" href="ldlm__resource_8c_source.html#l01389">ldlm_dump_all_namespaces()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00096">LDLM_NAMESPACE_CLIENT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00070">ldlm_namespace_list()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, <a class="el" href="ldlm__pool_8c_source.html#l01586">ldlm_pools_fini()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01414">ldlm_proc_cleanup()</a>, <a class="el" href="ldlm__reclaim_8c_source.html#l00405">ldlm_reclaim_cleanup()</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="service_8c_source.html#l03160">ptlrpc_unregister_service()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02798">ldlm_put_ref()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9ccefb86d4787c31c1d58689f0b1586"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_exit" ref="ac9ccefb86d4787c31c1d58689f0b1586" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l03203">3203</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="ldlm__extent_8c_source.html#l00835">ldlm_interval_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00049">ldlm_interval_tree_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_lock_slab</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00060">ldlm_refcount</a>, and <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_resource_slab</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00138">ptlrpc_exit()</a>, and <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ac1fedad04fd9874fbc80746dccf8dc"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_get" ref="a2ac1fedad04fd9874fbc80746dccf8dc" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_export_lock_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02856">2856</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00714">ldlm_lock::l_exp_hash</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01344">LDLM_LOCK_GET</a>.</p>

</div>
</div>
<a class="anchor" id="ad2cf5442f9c3a782fea532f14ba7d5da"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_hash" ref="ad2cf5442f9c3a782fea532f14ba7d5da" args="(struct cfs_hash *hs, const void *key, unsigned mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned ldlm_export_lock_hash </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02820">2820</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__hash_8h_source.html#l00838">cfs_hash_u64_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="a0fdf82590537c3188c43910b92afc805"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_key" ref="a0fdf82590537c3188c43910b92afc805" args="(struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* ldlm_export_lock_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02826">2826</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00714">ldlm_lock::l_exp_hash</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00766">ldlm_lock::l_remote_handle</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02844">ldlm_export_lock_keycmp()</a>.</p>

</div>
</div>
<a class="anchor" id="a766cca1378db6951a94c56814a13ba62"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_keycmp" ref="a766cca1378db6951a94c56814a13ba62" args="(const void *key, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_export_lock_keycmp </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02844">2844</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l02826">ldlm_export_lock_key()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01026">lustre_handle_equal()</a>.</p>

</div>
</div>
<a class="anchor" id="a239253b96871af9eeab4b11b26ebc920"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_keycpy" ref="a239253b96871af9eeab4b11b26ebc920" args="(struct hlist_node *hnode, void *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_export_lock_keycpy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02835">2835</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00714">ldlm_lock::l_exp_hash</a>, and <a class="el" href="lustre__dlm_8h_source.html#l00766">ldlm_lock::l_remote_handle</a>.</p>

</div>
</div>
<a class="anchor" id="a3958b330224ca0debf7598aca9a57e32"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_object" ref="a3958b330224ca0debf7598aca9a57e32" args="(struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* ldlm_export_lock_object </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02850">2850</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>.</p>

</div>
</div>
<a class="anchor" id="a3ae17cff0ec67fe2c04108066dbab291"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_put" ref="a3ae17cff0ec67fe2c04108066dbab291" args="(struct cfs_hash *hs, struct hlist_node *hnode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_export_lock_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcfs__hash.html">cfs_hash</a> *&nbsp;</td>
          <td class="paramname"> <em>hs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhlist__node.html">hlist_node</a> *&nbsp;</td>
          <td class="paramname"> <em>hnode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02865">2865</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00382">hlist_entry</a>, <a class="el" href="lustre__dlm_8h_source.html#l00714">ldlm_lock::l_exp_hash</a>, and <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>.</p>

</div>
</div>
<a class="anchor" id="af417d63e7d46447ea1cab7793cd01984"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_get_rq_timeout" ref="af417d63e7d46447ea1cab7793cd01984" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int ldlm_get_rq_timeout </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00077">77</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="class__obd_8c_source.html#l00085">ldlm_timeout</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, and <a class="el" href="gnilnd__modparams_8c_source.html#l00052">timeout</a>.</p>

</div>
</div>
<a class="anchor" id="a5e6e5041059d52602954a9b4769341fa"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_handle_bl_callback" ref="a5e6e5041059d52602954a9b4769341fa" args="(struct ldlm_namespace *ns, struct ldlm_lock_desc *ld, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldlm_handle_bl_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback handler for receiving incoming blocking ASTs. </p>
<p>This can only happen on client side. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l01758">1758</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00145">D_DLMTRACE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00822">ldlm_lock::l_ast_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00103">LDLM_CB_BLOCKING</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00128">ldlm_is_cancel_on_block</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00187">ldlm_set_cancel</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00175">ldlm_set_cbpending</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02662">ldlm_bl_thread_blwi()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01928">ldlm_handle_gl_callback()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00827">ldlm_lock_decref_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="ad15f89a44dd9b7464ac13d9c9fa8f1b1"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_handle_cp_callback" ref="ad15f89a44dd9b7464ac13d9c9fa8f1b1" args="(struct ptlrpc_request *req, struct ldlm_namespace *ns, struct ldlm_request *dlm_req, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_handle_cp_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__request.html">ldlm_request</a> *&nbsp;</td>
          <td class="paramname"> <em>dlm_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback handler for receiving incoming completion ASTs. </p>
<p>This only can happen on client side. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l01796">1796</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__dlm_8h_source.html#l00778">ldlm_lock::l_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02899">ldlm_lock_desc::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00819">ldlm_lock::l_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00818">ldlm_lock::l_lvb_len</a>, <a class="el" href="lustre__dlm_8h_source.html#l00772">ldlm_lock::l_policy_data</a>, <a class="el" href="lustre__idl_8h_source.html#l02900">ldlm_lock_desc::l_policy_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02897">ldlm_lock_desc::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="lustre__dlm_8h_source.html#l00791">ldlm_lock::l_waitq</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__lock_8c_source.html#l00103">ldlm_convert_policy_to_local()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01122">LDLM_DEBUG_NOLOCK</a>, <a class="el" href="lustre__dlm_8h_source.html#l01169">LDLM_ERROR</a>, <a class="el" href="ldlm__lock_8c_source.html#l01539">ldlm_fill_lvb()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00062">LDLM_FL_AST_SENT</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00270">LDLM_FL_BL_AST</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00173">LDLM_FL_CBPENDING</a>, <a class="el" href="ldlm__lock_8c_source.html#l01101">ldlm_grant_lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00310">ldlm_is_destroyed</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="ldlm__internal_8h_source.html#l00171">ldlm_lock_remove_from_lru</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="ldlm__resource_8c_source.html#l01366">ldlm_resource_unlink_lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02050">ldlm_run_ast_work()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00199">ldlm_set_failed</a>, <a class="el" href="ldlm__internal_8h_source.html#l00141">LDLM_WORK_CP_AST</a>, <a class="el" href="lustre__idl_8h_source.html#l02909">ldlm_request::lock_desc</a>, <a class="el" href="lustre__idl_8h_source.html#l02907">ldlm_request::lock_flags</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__idl_8h_source.html#l02893">ldlm_resource_desc::lr_name</a>, <a class="el" href="lustre__idl_8h_source.html#l02891">ldlm_resource_desc::lr_type</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00348">OBD_FAIL_LDLM_CANCEL_BL_CB_RACE</a>, <a class="el" href="obd__support_8h_source.html#l00389">OBD_FAIL_OSC_CP_ENQ_RACE</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l01049">RMF_DLM_LVB</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="a35808ef439e87ddea74da001f6ca2c1f"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_handle_gl_callback" ref="a35808ef439e87ddea74da001f6ca2c1f" args="(struct ptlrpc_request *req, struct ldlm_namespace *ns, struct ldlm_request *dlm_req, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ldlm_handle_gl_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__request.html">ldlm_request</a> *&nbsp;</td>
          <td class="paramname"> <em>dlm_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback handler for receiving incoming glimpse ASTs. </p>
<p>This only can happen on client side. After handling the glimpse AST we also consider dropping the lock here if it is unused locally for a long time. </p>

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l01928">1928</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__time_8h_source.html#l00046">cfs_time_add()</a>, <a class="el" href="libcfs__time_8h_source.html#l00056">cfs_time_after()</a>, <a class="el" href="linux-time_8h_source.html#l00152">cfs_time_current()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00747">ldlm_lock::l_glimpse_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00728">ldlm_lock::l_granted_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l00803">ldlm_lock::l_last_used</a>, <a class="el" href="lustre__dlm_8h_source.html#l00784">ldlm_lock::l_readers</a>, <a class="el" href="lustre__dlm_8h_source.html#l00785">ldlm_lock::l_writers</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02075">ldlm_bl_to_thread_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="ldlm__lockd_8c_source.html#l01758">ldlm_handle_bl_callback()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="niobuf_8c_source.html#l00649">ptlrpc_error()</a>, <a class="el" href="niobuf_8c_source.html#l00614">ptlrpc_reply()</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="aa06e5b145ddd80f8a311b7896633fbac"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_handle_setinfo" ref="aa06e5b145ddd80f8a311b7896633fbac" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_handle_setinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02095">2095</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="libcfs__debug_8h_source.html#l00139">D_WARNING</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="obd_8h_source.html#l00746">KEY_HSM_COPYTOOL_SEND</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd__class_8h_source.html#l00519">obd_set_info_async()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l01816">req_capsule_set()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00974">RMF_SETINFO_KEY</a>, <a class="el" href="layout_8c_source.html#l00899">RMF_SETINFO_VAL</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01274">RQF_OBD_SET_INFO</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>.</p>

</div>
</div>
<a class="anchor" id="aa38ba5ece9587fb13ea1d88c737f0129"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_init" ref="aa38ba5ece9587fb13ea1d88c737f0129" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ldlm_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l03154">3154</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__idl_8h_source.html#l02809">LCK_MODE_NUM</a>, <a class="el" href="ldlm__resource_8c_source.html#l00061">ldlm_cli_active_namespace_list</a>, <a class="el" href="ldlm__resource_8c_source.html#l00063">ldlm_cli_inactive_namespace_list</a>, <a class="el" href="ldlm__extent_8c_source.html#l00835">ldlm_interval_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00049">ldlm_interval_tree_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_lock_slab</a>, <a class="el" href="lustre__dlm_8h_source.html#l00096">LDLM_NAMESPACE_CLIENT</a>, <a class="el" href="ldlm__internal_8h_source.html#l00083">ldlm_namespace_lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00095">LDLM_NAMESPACE_SERVER</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00059">ldlm_ref_mutex</a>, <a class="el" href="ldlm__resource_8c_source.html#l00048">ldlm_resource_slab</a>, <a class="el" href="ldlm__resource_8c_source.html#l00055">ldlm_srv_namespace_list</a>, and <a class="el" href="lustre__compat_8h_source.html#l00165">SLAB_DESTROY_BY_RCU</a>.</p>

<p>Referenced by <a class="el" href="ptlrpc__module_8c_source.html#l00052">ptlrpc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a77da3ee5344bdbe6bb573fbbba124dab"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_setup" ref="a77da3ee5344bdbe6bb573fbbba124dab" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ldlm_setup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02924">2924</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="ldlm__lockd_8c_source.html#l00108">ldlm_bl_pool::blp_busy_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00103">ldlm_bl_pool::blp_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00090">ldlm_bl_pool::blp_lock</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00110">ldlm_bl_pool::blp_max_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00109">ldlm_bl_pool::blp_min_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00107">ldlm_bl_pool::blp_num_threads</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00097">ldlm_bl_pool::blp_prio_list</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00105">ldlm_bl_pool::blp_waitq</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-prim_8c_source.html#l00055">cfs_timer_init()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00086">ELT_READY</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00085">ELT_STOPPED</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lu__object_8h_source.html#l01007">LCT_CL_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l00999">LCT_DT_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="ldlm__internal_8h_source.html#l00232">ldlm_state::ldlm_bl_pool</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02611">ldlm_bl_thread_start()</a>, <a class="el" href="lustre__net_8h_source.html#l00265">LDLM_BUFSIZE</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02153">ldlm_callback_handler()</a>, <a class="el" href="lustre__idl_8h_source.html#l00108">LDLM_CANCEL_REPLY_PORTAL</a>, <a class="el" href="lustre__idl_8h_source.html#l00107">LDLM_CANCEL_REQUEST_PORTAL</a>, <a class="el" href="ldlm__internal_8h_source.html#l00229">ldlm_state::ldlm_cancel_service</a>, <a class="el" href="lustre__idl_8h_source.html#l00106">LDLM_CB_REPLY_PORTAL</a>, <a class="el" href="lustre__idl_8h_source.html#l00105">LDLM_CB_REQUEST_PORTAL</a>, <a class="el" href="ldlm__internal_8h_source.html#l00228">ldlm_state::ldlm_cb_service</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03096">ldlm_cleanup()</a>, <a class="el" href="lustre__net_8h_source.html#l00263">LDLM_CLIENT_NBUFS</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00055">ldlm_cpts</a>, <a class="el" href="lustre__net_8h_source.html#l00267">LDLM_MAXREPSIZE</a>, <a class="el" href="lustre__net_8h_source.html#l00266">LDLM_MAXREQSIZE</a>, <a class="el" href="lustre__net_8h_source.html#l00259">LDLM_NTHRS_BASE</a>, <a class="el" href="lustre__net_8h_source.html#l00258">LDLM_NTHRS_INIT</a>, <a class="el" href="lustre__net_8h_source.html#l00260">LDLM_NTHRS_MAX</a>, <a class="el" href="ldlm__lockd_8c_source.html#l00051">ldlm_num_threads</a>, <a class="el" href="ldlm__pool_8c_source.html#l01581">ldlm_pools_init()</a>, <a class="el" href="group__LDLM.html#ga8047d7cda49f6bf14c41a5105c55a378">ldlm_proc_setup()</a>, <a class="el" href="ldlm__reclaim_8c_source.html#l00400">ldlm_reclaim_setup()</a>, <a class="el" href="lustre__net_8h_source.html#l00264">LDLM_SERVER_NBUFS</a>, <a class="el" href="ldlm__resource_8c_source.html#l00067">ldlm_svc_proc_dir</a>, <a class="el" href="lustre__net_8h_source.html#l00257">LDLM_THR_FACTOR</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="lustre__net_8h_source.html#l02233">ptlrpc_service_conf::psc_name</a>, <a class="el" href="service_8c_source.html#l00690">ptlrpc_register_service()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02783">ldlm_get_ref()</a>.</p>

</div>
</div>
<a class="anchor" id="a3aa0812e9fc4472caf872af3b745c86c"></a><!-- doxytag: member="ldlm_lockd.c::module_param" ref="a3aa0812e9fc4472caf872af3b745c86c" args="(ldlm_cpts, charp, 0444)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ldlm__lockd_8c.html#a51a223cbb2c5192f3903587b2b2db552">ldlm_cpts</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">charp&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0444&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3115a1fd4692ea881ff962c0d7bf7a83"></a><!-- doxytag: member="ldlm_lockd.c::module_param" ref="a3115a1fd4692ea881ff962c0d7bf7a83" args="(ldlm_num_threads, int, 0444)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ldlm__lockd_8c.html#a1ace9b68c5706b7b68e9ffaed5a80b4d">ldlm_num_threads</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0444&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aada401f99a6ea04b27aaf120dbe73a25"></a><!-- doxytag: member="ldlm_lockd.c::MODULE_PARM_DESC" ref="aada401f99a6ea04b27aaf120dbe73a25" args="(ldlm_cpts,&quot;CPU partitions ldlm threads should run on&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ldlm__lockd_8c.html#a51a223cbb2c5192f3903587b2b2db552">ldlm_cpts</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;CPU partitions ldlm threads should run on&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9c22a8e5be87360fbad7b7571cf488f0"></a><!-- doxytag: member="ldlm_lockd.c::MODULE_PARM_DESC" ref="a9c22a8e5be87360fbad7b7571cf488f0" args="(ldlm_num_threads,&quot;number of DLM service threads to start&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_PARM_DESC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ldlm__lockd_8c.html#a1ace9b68c5706b7b68e9ffaed5a80b4d">ldlm_num_threads</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;number of DLM <a class="el" href="o2iblnd__modparams_8c.html#a00f09e31c707a86ebc6b0cf74e934633">service</a> threads to <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a68745a380529b0c2805e15cc63b07368"></a><!-- doxytag: member="ldlm_lockd.c::round_timeout" ref="a68745a380529b0c2805e15cc63b07368" args="(cfs_time_t timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a> round_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="linux-time_8h.html#a0e81d053bc8d925f6574c760bbea5ac4">cfs_time_t</a>&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00071">71</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00188">cfs_duration_sec()</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, and <a class="el" href="libcfs__time_8h_source.html#l00051">cfs_time_sub()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a51a223cbb2c5192f3903587b2b2db552"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_cpts" ref="a51a223cbb2c5192f3903587b2b2db552" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="ldlm__lockd_8c.html#a51a223cbb2c5192f3903587b2b2db552">ldlm_cpts</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00055">55</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a307c852147674ec14bd24c574cf24a0f"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_export_lock_ops" ref="a307c852147674ec14bd24c574cf24a0f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a> <a class="el" href="ldlm__lockd_8c.html#a307c852147674ec14bd24c574cf24a0f">ldlm_export_lock_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .hs_hash        = <a class="code" href="ldlm__lockd_8c.html#ad2cf5442f9c3a782fea532f14ba7d5da">ldlm_export_lock_hash</a>,
        .hs_key         = <a class="code" href="ldlm__lockd_8c.html#a0fdf82590537c3188c43910b92afc805">ldlm_export_lock_key</a>,
        .hs_keycmp      = <a class="code" href="ldlm__lockd_8c.html#a766cca1378db6951a94c56814a13ba62">ldlm_export_lock_keycmp</a>,
        .hs_keycpy      = <a class="code" href="ldlm__lockd_8c.html#a239253b96871af9eeab4b11b26ebc920">ldlm_export_lock_keycpy</a>,
        .hs_object      = <a class="code" href="ldlm__lockd_8c.html#a3958b330224ca0debf7598aca9a57e32">ldlm_export_lock_object</a>,
        .hs_get         = <a class="code" href="ldlm__lockd_8c.html#a2ac1fedad04fd9874fbc80746dccf8dc">ldlm_export_lock_get</a>,
        .hs_put         = <a class="code" href="ldlm__lockd_8c.html#a3ae17cff0ec67fe2c04108066dbab291">ldlm_export_lock_put</a>,
        .hs_put_locked  = <a class="code" href="ldlm__lockd_8c.html#a3ae17cff0ec67fe2c04108066dbab291">ldlm_export_lock_put</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l02873">2873</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1ace9b68c5706b7b68e9ffaed5a80b4d"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_num_threads" ref="a1ace9b68c5706b7b68e9ffaed5a80b4d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ldlm__lockd_8c.html#a1ace9b68c5706b7b68e9ffaed5a80b4d">ldlm_num_threads</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00051">51</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02924">ldlm_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="af9e182e4349066b3ec8c2163481d4f9d"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_ref_mutex" ref="af9e182e4349066b3ec8c2163481d4f9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="ldlm__lockd_8c.html#af9e182e4349066b3ec8c2163481d4f9d">ldlm_ref_mutex</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00059">59</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l02783">ldlm_get_ref()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l03154">ldlm_init()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02798">ldlm_put_ref()</a>.</p>

</div>
</div>
<a class="anchor" id="afccb48b92bc558f9f5dd7677733c323b"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_refcount" ref="afccb48b92bc558f9f5dd7677733c323b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ldlm__lockd_8c.html#afccb48b92bc558f9f5dd7677733c323b">ldlm_refcount</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00060">60</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lockd_8c_source.html#l03203">ldlm_exit()</a>, <a class="el" href="ldlm__lockd_8c_source.html#l02783">ldlm_get_ref()</a>, and <a class="el" href="ldlm__lockd_8c_source.html#l02798">ldlm_put_ref()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bb0c5534d09cd24959a8ce3ec5d4970"></a><!-- doxytag: member="ldlm_lockd.c::ldlm_state" ref="a0bb0c5534d09cd24959a8ce3ec5d4970" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__state.html">ldlm_state</a>* <a class="el" href="structldlm__state.html">ldlm_state</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ldlm__lockd_8c_source.html#l00069">69</a> of file <a class="el" href="ldlm__lockd_8c_source.html">ldlm_lockd.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
