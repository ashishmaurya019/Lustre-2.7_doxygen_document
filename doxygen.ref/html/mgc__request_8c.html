<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mgc/mgc_request.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mgc/mgc_request.c File Reference</h1><code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lprocfs__status_8h_source.html">lprocfs_status.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__disk_8h_source.html">lustre_disk.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__log_8h_source.html">lustre_log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__swab_8h_source.html">lustre_swab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="mgc__internal_8h_source.html">mgc_internal.h</a>&quot;</code><br/>

<p><a href="mgc__request_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_MGC</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a4b65a815305c48cc8e8c8d7bf0c689df">D_MGC</a>&nbsp;&nbsp;&nbsp;D_CONFIG</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#adb9e7dbf43e4d833836bee833b2fe565">RQ_RUNNING</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ab1b59e943a8cee49ce5849ddf1ac4db0">RQ_NOW</a>&nbsp;&nbsp;&nbsp;0x2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ad38ac0d12ffc06dabbdc740a974fe9ca">RQ_LATER</a>&nbsp;&nbsp;&nbsp;0x4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#aa7977cc2a05e51adf75d4d02918c359f">RQ_STOP</a>&nbsp;&nbsp;&nbsp;0x8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a7d55670c6fb5d0b4489a977e62b27646">RQ_PRECLEANUP</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a0139918566c61a07224a6298dc5050b1">MGC_TIMEOUT_MIN_SECONDS</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a5ffd9f40d5d8c16b817d8f7feabea159">MGC_TIMEOUT_RAND_CENTISEC</a>&nbsp;&nbsp;&nbsp;0x1ff</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a48dd5f525638faf0275430e507195a5f">MGC_ENQUEUE_LIMIT</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a0977c0597a0fa064b1ef098ebeb46805">MGC_TARGET_REG_LIMIT</a>&nbsp;&nbsp;&nbsp;10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ae22bcb4f69bbacc77bfcebfe433cceca">MGC_SEND_PARAM_LIMIT</a>&nbsp;&nbsp;&nbsp;10</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="mgc__request_8c.html#a8420dba71b9cc240cf981b0bef892004a40608d9ed8d279b411534909b4afc37a">CONFIG_READ_NRPAGES_INIT</a> =  1 &lt;&lt; (20 - PAGE_CACHE_SHIFT), 
<a class="el" href="mgc__request_8c.html#a8420dba71b9cc240cf981b0bef892004abc3ae5c17d7f61e3e599945a4b12f9c4">CONFIG_READ_NRPAGES</a> =  4
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#afde0bc2aaead0184b427abdda5bd1cdc">mgc_name2resid</a> (char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int len, struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *res_id, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a54631e4b3eb05aa3a7e722310729f027">mgc_fsname2resid</a> (char *fsname, struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *res_id, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a2875d1c5a65182d92dbcb78fbb4a91ff">mgc_logname2resid</a> (char *logname, struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *res_id, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a96af91ff7b371f7f1f997e70b9b55fad">DEFINE_SPINLOCK</a> (config_list_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a1bb02da8dbf2bab7c4fc19b715ef056a">config_log_get</a> (struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a8d74c12ba6b91f91e19ce02027f187c8">config_log_put</a> (struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ac895c8245b47b24267c90984f7e5fd62">config_log_find</a> (char *logname, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a6ea25abb1ba21f05084c52cb900beb92">do_config_log_add</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *logname, int type, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg, struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a4c14d81b09877840db844187233df48d">config_recover_log_add</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *fsname, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg, struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a7f7ef15b4ac911afdf47b9a365e5f703">config_params_log_add</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg, struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a100e8d71388e73c0d8a893c44859f990">config_log_add</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, char *logname, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg, struct super_block *sb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add this log to the list of active logs watched by an MGC.  <a href="#a100e8d71388e73c0d8a893c44859f990"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a5dd9ec90bfb817994ac020e2f57e244a">DEFINE_MUTEX</a> (llog_process_lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a28bb172f46411bfc29fcb01ad5228adc">config_log_end</a> (char *logname, struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop watching for updates on this log.  <a href="#a28bb172f46411bfc29fcb01ad5228adc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a8f0b1639b163bf6c39fd844d49812a89">DECLARE_COMPLETION</a> (rq_exit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#afab9aebe12c2f36866f9bc26afab40f2">DECLARE_COMPLETION</a> (rq_start)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ad80365b9ef0003549ef7ff78d376bbfa">do_requeue</a> (struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#aebd7a9168137588094b8910fe75c0a57">mgc_requeue_thread</a> (void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a3e1dfc41fa5cd1c3ac72914254dee46f">mgc_requeue_add</a> (struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a7e79c1bd9bdd7d0f121f6209cf4f02f8">mgc_local_llog_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__device.html">obd_device</a> *disk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a0738b280bf0ce89e72f6430f2f91f1f2">mgc_local_llog_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a8145a568e728d3a3d853e6587604e4f3">mgc_fs_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct super_block *sb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#aa93695e97bc9960e659b3888f5b73572">mgc_fs_cleanup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a3676385111b19e50d7d2b64e27144395">mgc_llog_init</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a316d74c20e5790461fe73c78e456e1fd">mgc_llog_fini</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ad9eaf400f79feb601b8f1e3fe7f544c9">mgc_precleanup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a0caf63552a9ef50883bcd33bdf44463c">mgc_cleanup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ab8db7707aba4da4ff4a52d3513d7ea32">mgc_setup</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *lcfg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a56a5c3828df3a0d65c9f2217ba1744a4">mgc_blocking_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *desc, void *data, int flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a93746dcbf60ecc750a6a5bd5ba2052a2">mgc_set_mgs_param</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmgs__send__param.html">mgs_send_param</a> *msp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a645ed66d11e29f96dc840ea65055a3f7">mgc_enqueue</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a> type, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *flags, void *bl_cb, void *cp_cb, void *gl_cb, void *data, __u32 lvb_len, void *lvb_swabber, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a1736aba3f909e4d6c8f7e0248fc8d2ef">mgc_cancel</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lockh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a5ad6223704a1e52befdf3633375ff074">mgc_notify_active</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *unused)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ac31f975046d34c34a6dc9dfe1cc77eff">mgc_target_register</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp, struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a47f567525e3e4877414b860417a786ae">mgc_set_info_async</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, u32 keylen, void *key, u32 vallen, void *val, struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *set)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ae03a96c09f920c0bdc00baec05f72e53">mgc_get_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, __u32 keylen, void *key, __u32 *vallen, void *val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a038ed6078d397649680b7e04eaab44da">mgc_import_event</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__import.html">obd_import</a> *imp, enum <a class="el" href="group__export.html#ga25e24f2ae3efcc8caa89c9e6c4c47d31">obd_import_event</a> event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ab21bb514415901a3d0fa64ceccbcfb48">mgc_apply_recover_logs</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *mgc, struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> max_version, void *data, int datalen, bool mne_swab)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a7ecd928b79cf0fe1b2710c239354f32a">mgc_process_recover_log</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called if this client was notified for target restarting by the MGS.  <a href="#a7ecd928b79cf0fe1b2710c239354f32a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a7fcb9f52e6a8f8fff1b4c2fd0fcd142e">mgc_llog_local_copy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structllog__ctxt.html">llog_ctxt</a> *rctxt, struct <a class="el" href="structllog__ctxt.html">llog_ctxt</a> *lctxt, char *logname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a1ca103f2a51882c2cd9f8952f5d72aef">mgc_process_cfg_log</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *mgc, struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld, int local_only)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a6ccd2bf92b9cf3b750d156cddae87b5a">mgc_import_in_recovery</a> (struct <a class="el" href="structobd__import.html">obd_import</a> *imp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#aa41264fe823f5ec74ae97e9b28b0d6c3">mgc_process_log</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *mgc, struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *cld)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a configuration log from the MGS and process it.  <a href="#aa41264fe823f5ec74ae97e9b28b0d6c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a736335774255d09928f7362e67e68110">mgc_process_config</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, size_t len, void *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called from lustre_process_log.  <a href="#a736335774255d09928f7362e67e68110"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int __init&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a3a311ff441a9b7edff36b6388d6e8a44">mgc_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void __exit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#abb79fea5781306523f0b3336c3e30d2e">mgc_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#adc10f40acba3bb9b2640e985276b0a7c">MODULE_AUTHOR</a> (&quot;OpenSFS, Inc. &lt;http://www.lustre.org/&gt;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a71231a1a1bd793fb14e55ce2ad932003">MODULE_DESCRIPTION</a> (&quot;Lustre Management Client&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ae9c321be2136fb8501887ee69dac11a2">MODULE_VERSION</a> (LUSTRE_VERSION_STRING)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44">MODULE_LICENSE</a> (&quot;GPL&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a4f1afc51ea9194ab7fbd26ec6b2e7074">module_init</a> (mgc_init)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a472cfd35ef12bc2c172cfe83170e44c1">module_exit</a> (mgc_exit)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a0cd7cf015ceea395a4d98511a562c408">config_llog_list</a> = LIST_HEAD_INIT(<a class="el" href="mgc__request_8c.html#a0cd7cf015ceea395a4d98511a562c408">config_llog_list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#ac325452c1db8d538d71b31d7b58a2a54">rq_state</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#acfa6a35863e313b398e6aee762b0c373">rq_waitq</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a8a723b5ba86fe1d30dabf387524cf603">mgc_count</a> = ATOMIC_INIT(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structobd__ops.html">obd_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mgc__request_8c.html#a50bc44881eeb96adeaa2a4910c3fa86b">mgc_obd_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a4b65a815305c48cc8e8c8d7bf0c689df"></a><!-- doxytag: member="mgc_request.c::D_MGC" ref="a4b65a815305c48cc8e8c8d7bf0c689df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D_MGC&nbsp;&nbsp;&nbsp;D_CONFIG</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00042">42</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00402">config_log_end()</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00514">do_requeue()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l01049">mgc_enqueue()</a>, <a class="el" href="mgc__request_8c_source.html#l01282">mgc_import_event()</a>, <a class="el" href="mgc__request_8c_source.html#l00057">mgc_name2resid()</a>, <a class="el" href="mgc__request_8c_source.html#l01728">mgc_process_cfg_log()</a>, <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>, <a class="el" href="mgc__request_8c_source.html#l01158">mgc_set_info_async()</a>, and <a class="el" href="mgc__request_8c_source.html#l01119">mgc_target_register()</a>.</p>

</div>
</div>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="mgc_request.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_MGC</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00041">41</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
<a class="anchor" id="a48dd5f525638faf0275430e507195a5f"></a><!-- doxytag: member="mgc_request.c::MGC_ENQUEUE_LIMIT" ref="a48dd5f525638faf0275430e507195a5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGC_ENQUEUE_LIMIT</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="obd__support_8h.html#aaf23b24ddaaeff12a2c81e86131b99d7">INITIAL_CONNECT_TIMEOUT</a> + (<a class="code" href="group__export.html#ga8a5d48126ef884f74f2de78ef49ea61a">AT_OFF</a> ? 0 : <a class="code" href="group__export.html#gac018b3cde737ca787e95380e27734ffd">at_min</a>) \
                                + <a class="code" href="obd__support_8h.html#ae138d10c7cd4199e5e96377ff1f8e317">PING_INTERVAL</a>)
</pre></div>
<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01006">1006</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01049">mgc_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ae22bcb4f69bbacc77bfcebfe433cceca"></a><!-- doxytag: member="mgc_request.c::MGC_SEND_PARAM_LIMIT" ref="ae22bcb4f69bbacc77bfcebfe433cceca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGC_SEND_PARAM_LIMIT&nbsp;&nbsp;&nbsp;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01009">1009</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01012">mgc_set_mgs_param()</a>.</p>

</div>
</div>
<a class="anchor" id="a0977c0597a0fa064b1ef098ebeb46805"></a><!-- doxytag: member="mgc_request.c::MGC_TARGET_REG_LIMIT" ref="a0977c0597a0fa064b1ef098ebeb46805" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGC_TARGET_REG_LIMIT&nbsp;&nbsp;&nbsp;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01008">1008</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01119">mgc_target_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a0139918566c61a07224a6298dc5050b1"></a><!-- doxytag: member="mgc_request.c::MGC_TIMEOUT_MIN_SECONDS" ref="a0139918566c61a07224a6298dc5050b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGC_TIMEOUT_MIN_SECONDS&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00543">543</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ffd9f40d5d8c16b817d8f7feabea159"></a><!-- doxytag: member="mgc_request.c::MGC_TIMEOUT_RAND_CENTISEC" ref="a5ffd9f40d5d8c16b817d8f7feabea159" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGC_TIMEOUT_RAND_CENTISEC&nbsp;&nbsp;&nbsp;0x1ff</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00544">544</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="ad38ac0d12ffc06dabbdc740a974fe9ca"></a><!-- doxytag: member="mgc_request.c::RQ_LATER" ref="ad38ac0d12ffc06dabbdc740a974fe9ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RQ_LATER&nbsp;&nbsp;&nbsp;0x4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00506">506</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1b59e943a8cee49ce5849ddf1ac4db0"></a><!-- doxytag: member="mgc_request.c::RQ_NOW" ref="ab1b59e943a8cee49ce5849ddf1ac4db0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RQ_NOW&nbsp;&nbsp;&nbsp;0x2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00505">505</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01107">mgc_notify_active()</a>, <a class="el" href="mgc__request_8c_source.html#l00842">mgc_precleanup()</a>, <a class="el" href="mgc__request_8c_source.html#l00645">mgc_requeue_add()</a>, and <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a7d55670c6fb5d0b4489a977e62b27646"></a><!-- doxytag: member="mgc_request.c::RQ_PRECLEANUP" ref="a7d55670c6fb5d0b4489a977e62b27646" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RQ_PRECLEANUP&nbsp;&nbsp;&nbsp;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00508">508</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00842">mgc_precleanup()</a>, and <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="adb9e7dbf43e4d833836bee833b2fe565"></a><!-- doxytag: member="mgc_request.c::RQ_RUNNING" ref="adb9e7dbf43e4d833836bee833b2fe565" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RQ_RUNNING&nbsp;&nbsp;&nbsp;0x1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00504">504</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00842">mgc_precleanup()</a>, and <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7977cc2a05e51adf75d4d02918c359f"></a><!-- doxytag: member="mgc_request.c::RQ_STOP" ref="aa7977cc2a05e51adf75d4d02918c359f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RQ_STOP&nbsp;&nbsp;&nbsp;0x8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00507">507</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00842">mgc_precleanup()</a>, <a class="el" href="mgc__request_8c_source.html#l00645">mgc_requeue_add()</a>, and <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a8420dba71b9cc240cf981b0bef892004"></a><!-- doxytag: member="mgc_request.c::@125" ref="a8420dba71b9cc240cf981b0bef892004" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a8420dba71b9cc240cf981b0bef892004a40608d9ed8d279b411534909b4afc37a"></a><!-- doxytag: member="CONFIG_READ_NRPAGES_INIT" ref="a8420dba71b9cc240cf981b0bef892004a40608d9ed8d279b411534909b4afc37a" args="" -->CONFIG_READ_NRPAGES_INIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a8420dba71b9cc240cf981b0bef892004abc3ae5c17d7f61e3e599945a4b12f9c4"></a><!-- doxytag: member="CONFIG_READ_NRPAGES" ref="a8420dba71b9cc240cf981b0bef892004abc3ae5c17d7f61e3e599945a4b12f9c4" args="" -->CONFIG_READ_NRPAGES</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01324">1324</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a100e8d71388e73c0d8a893c44859f990"></a><!-- doxytag: member="mgc_request.c::config_log_add" ref="a100e8d71388e73c0d8a893c44859f990" args="(struct obd_device *obd, char *logname, struct config_llog_instance *cfg, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int config_log_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add this log to the list of active logs watched by an MGC. </p>
<p>Active means we're watching for updates. We have one active log per "mount" - client instance or servername. Each instance may be at a different point in the log. </p>

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00310">310</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00200">config_llog_data::cld_params</a>, <a class="el" href="obd__class_8h_source.html#l00201">config_llog_data::cld_recover</a>, <a class="el" href="obd__class_8h_source.html#l00199">config_llog_data::cld_sptlrpc</a>, <a class="el" href="mgc__request_8c_source.html#l00168">config_log_find()</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="mgc__request_8c_source.html#l00291">config_params_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00257">config_recover_log_add()</a>, <a class="el" href="obd__class_8h_source.html#l00183">CONFIG_T_CONFIG</a>, <a class="el" href="obd__class_8h_source.html#l00184">CONFIG_T_SPTLRPC</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__disk_8h_source.html#l00249">LMD_FLG_NOIR</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a28bb172f46411bfc29fcb01ad5228adc"></a><!-- doxytag: member="mgc_request.c::config_log_end" ref="a28bb172f46411bfc29fcb01ad5228adc" args="(char *logname, struct config_llog_instance *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int config_log_end </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop watching for updates on this log. </p>

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00402">402</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00203">config_llog_data::cld_lock</a>, <a class="el" href="obd__class_8h_source.html#l00200">config_llog_data::cld_params</a>, <a class="el" href="obd__class_8h_source.html#l00201">config_llog_data::cld_recover</a>, <a class="el" href="obd__class_8h_source.html#l00199">config_llog_data::cld_sptlrpc</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_stopping</a>, <a class="el" href="mgc__request_8c_source.html#l00168">config_log_find()</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="ac895c8245b47b24267c90984f7e5fd62"></a><!-- doxytag: member="mgc_request.c::config_log_find" ref="ac895c8245b47b24267c90984f7e5fd62" args="(char *logname, struct config_llog_instance *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a>* config_log_find </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00168">168</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="mgc__internal_8h_source.html#l00054">cld_is_sptlrpc()</a>, <a class="el" href="obd__class_8h_source.html#l00197">config_llog_data::cld_list_chain</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_stopping</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00402">config_log_end()</a>, and <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bb02da8dbf2bab7c4fc19b715ef056a"></a><!-- doxytag: member="mgc_request.c::config_log_get" ref="a1bb02da8dbf2bab7c4fc19b715ef056a" args="(struct config_llog_data *cld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int config_log_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00124">124</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, and <a class="el" href="mgc__request_8c_source.html#l00645">mgc_requeue_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d74c12ba6b91f91e19ce02027f187c8"></a><!-- doxytag: member="mgc_request.c::config_log_put" ref="a8d74c12ba6b91f91e19ce02027f187c8" args="(struct config_llog_data *cld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void config_log_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00135">135</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="mgc__internal_8h_source.html#l00054">cld_is_sptlrpc()</a>, <a class="el" href="obd__class_8h_source.html#l00197">config_llog_data::cld_list_chain</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00202">config_llog_data::cld_mgcexp</a>, <a class="el" href="obd__class_8h_source.html#l00200">config_llog_data::cld_params</a>, <a class="el" href="obd__class_8h_source.html#l00201">config_llog_data::cld_recover</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="obd__class_8h_source.html#l00199">config_llog_data::cld_sptlrpc</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="sec__config_8c_source.html#l00802">sptlrpc_conf_log_stop()</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00402">config_log_end()</a>, <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>, <a class="el" href="mgc__request_8c_source.html#l00645">mgc_requeue_add()</a>, and <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f7ef15b4ac911afdf47b9a365e5f703"></a><!-- doxytag: member="mgc_request.c::config_params_log_add" ref="a7f7ef15b4ac911afdf47b9a365e5f703" args="(struct obd_device *obd, struct config_llog_instance *cfg, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a>* config_params_log_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00291">291</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00186">CONFIG_T_PARAMS</a>, <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>, and <a class="el" href="obd__class_8h_source.html#l00190">PARAMS_FILENAME</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c14d81b09877840db844187233df48d"></a><!-- doxytag: member="mgc_request.c::config_recover_log_add" ref="a4c14d81b09877840db844187233df48d" args="(struct obd_device *obd, char *fsname, struct config_llog_instance *cfg, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a>* config_recover_log_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fsname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00257">257</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00185">CONFIG_T_RECOVER</a>, <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00186">IS_OST</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>.</p>

</div>
</div>
<a class="anchor" id="afab9aebe12c2f36866f9bc26afab40f2"></a><!-- doxytag: member="mgc_request.c::DECLARE_COMPLETION" ref="afab9aebe12c2f36866f9bc26afab40f2" args="(rq_start)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DECLARE_COMPLETION </td>
          <td>(</td>
          <td class="paramtype">rq_start&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8f0b1639b163bf6c39fd844d49812a89"></a><!-- doxytag: member="mgc_request.c::DECLARE_COMPLETION" ref="a8f0b1639b163bf6c39fd844d49812a89" args="(rq_exit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DECLARE_COMPLETION </td>
          <td>(</td>
          <td class="paramtype">rq_exit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5dd9ec90bfb817994ac020e2f57e244a"></a><!-- doxytag: member="mgc_request.c::DEFINE_MUTEX" ref="a5dd9ec90bfb817994ac020e2f57e244a" args="(llog_process_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_MUTEX </td>
          <td>(</td>
          <td class="paramtype">llog_process_lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a96af91ff7b371f7f1f997e70b9b55fad"></a><!-- doxytag: member="mgc_request.c::DEFINE_SPINLOCK" ref="a96af91ff7b371f7f1f997e70b9b55fad" args="(config_list_lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DEFINE_SPINLOCK </td>
          <td>(</td>
          <td class="paramtype">config_list_lock&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6ea25abb1ba21f05084c52cb900beb92"></a><!-- doxytag: member="mgc_request.c::do_config_log_add" ref="a6ea25abb1ba21f05084c52cb900beb92" args="(struct obd_device *obd, char *logname, int type, struct config_llog_instance *cfg, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a>* do_config_log_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__instance.html">config_llog_instance</a> *&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00200">200</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00174">config_llog_instance::cfg_callback</a>, <a class="el" href="obd__class_8h_source.html#l00176">config_llog_instance::cfg_flags</a>, <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00175">config_llog_instance::cfg_last_idx</a>, <a class="el" href="obd__class_8h_source.html#l00170">config_llog_instance::cfg_obdname</a>, <a class="el" href="obd__class_8h_source.html#l00172">config_llog_instance::cfg_sb</a>, <a class="el" href="obd__config_8c_source.html#l01451">class_config_llog_handler()</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="mgc__internal_8h_source.html#l00054">cld_is_sptlrpc()</a>, <a class="el" href="obd__class_8h_source.html#l00197">config_llog_data::cld_list_chain</a>, <a class="el" href="obd__class_8h_source.html#l00203">config_llog_data::cld_lock</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00202">config_llog_data::cld_mgcexp</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="obd__class_8h_source.html#l00195">config_llog_data::cld_resid</a>, <a class="el" href="obd__class_8h_source.html#l00204">config_llog_data::cld_type</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00102">mgc_logname2resid()</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00655">obd_device::obd_self_export</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="sec__config_8c_source.html#l00789">sptlrpc_conf_log_start()</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00291">config_params_log_add()</a>, and <a class="el" href="mgc__request_8c_source.html#l00257">config_recover_log_add()</a>.</p>

</div>
</div>
<a class="anchor" id="ad80365b9ef0003549ef7ff78d376bbfa"></a><!-- doxytag: member="mgc_request.c::do_requeue" ref="ad80365b9ef0003549ef7ff78d376bbfa" args="(struct config_llog_data *cld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void do_requeue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00514">514</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00163">client_obd::cl_conn_count</a>, <a class="el" href="obd_8h_source.html#l00160">client_obd::cl_sem</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00202">config_llog_data::cld_mgcexp</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="ab21bb514415901a3d0fa64ceccbcfb48"></a><!-- doxytag: member="mgc_request.c::mgc_apply_recover_logs" ref="ab21bb514415901a3d0fa64ceccbcfb48" args="(struct obd_device *mgc, struct config_llog_data *cld, __u64 max_version, void *data, int datalen, bool mne_swab)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_apply_recover_logs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>max_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>datalen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>mne_swab</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01329">1329</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00172">config_llog_instance::cfg_sb</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="obd_8h_source.html#l00160">client_obd::cl_sem</a>, <a class="el" href="genops_8c_source.html#l00429">class_name2obd()</a>, <a class="el" href="obd__config_8c_source.html#l01142">class_process_config()</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="ldlm__lib_8c_source.html#l00199">client_import_find_conn()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00185">IS_MDT</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__cfg_8h_source.html#l00086">LCFG_PARAM</a>, <a class="el" href="lustre__disk_8h_source.html#l00081">LDD_F_SV_TYPE_OST</a>, <a class="el" href="nidstr_8h_source.html#l00077">libcfs_nid2str()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00046">LPD64</a>, <a class="el" href="lustre__cfg_8h_source.html#l00175">lustre_cfg_bufs_reset()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00168">lustre_cfg_bufs_set_string()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00290">lustre_cfg_free()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00273">lustre_cfg_new()</a>, <a class="el" href="pack__generic_8c_source.html#l01888">lustre_swab_mgs_nidtbl_entry()</a>, <a class="el" href="lustre__idl_8h_source.html#l02979">mgs_nidtbl_entry::mne_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02978">mgs_nidtbl_entry::mne_instance</a>, <a class="el" href="lustre__idl_8h_source.html#l02980">mgs_nidtbl_entry::mne_length</a>, <a class="el" href="lustre__idl_8h_source.html#l02984">mgs_nidtbl_entry::mne_nid_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02983">mgs_nidtbl_entry::mne_nid_size</a>, <a class="el" href="lustre__idl_8h_source.html#l02982">mgs_nidtbl_entry::mne_nid_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02981">mgs_nidtbl_entry::mne_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02977">mgs_nidtbl_entry::mne_version</a>, <a class="el" href="lustre__idl_8h_source.html#l02986">mgs_nidtbl_entry::nids</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="obd__mount_8c_source.html#l00712">server_name2svname()</a>, <a class="el" href="structmgs__nidtbl__entry.html#afeb30a15efab5b5bb10f53cdb051aa38">mgs_nidtbl_entry::u</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01537">mgc_process_recover_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a56a5c3828df3a0d65c9f2217ba1744a4"></a><!-- doxytag: member="mgc_request.c::mgc_blocking_ast" ref="a56a5c3828df3a0d65c9f2217ba1744a4" args="(struct ldlm_lock *lock, struct ldlm_lock_desc *desc, void *data, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_blocking_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00945">945</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd_8h_source.html#l00163">client_obd::cl_conn_count</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_stopping</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="lustre__idl_8h_source.html#l02783">DLDLMRES</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__dlm_8h_source.html#l00759">ldlm_lock::l_conn_export</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="lustre__dlm_8h_source.html#l00103">LDLM_CB_BLOCKING</a>, <a class="el" href="lustre__dlm_8h_source.html#l00104">LDLM_CB_CANCELING</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="ldlm__lock_8c_source.html#l00582">ldlm_lock2handle()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="mgc__request_8c_source.html#l00645">mgc_requeue_add()</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="lustre__idl_8h_source.html#l02784">PLDLMRES</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01049">mgc_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a1736aba3f909e4d6c8f7e0248fc8d2ef"></a><!-- doxytag: member="mgc_request.c::mgc_cancel" ref="a1736aba3f909e4d6c8f7e0248fc8d2ef" args="(struct obd_export *exp, enum ldlm_mode mode, struct lustre_handle *lockh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01097">1097</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a0caf63552a9ef50883bcd33bdf44463c"></a><!-- doxytag: member="mgc_request.c::mgc_cleanup" ref="a0caf63552a9ef50883bcd33bdf44463c" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00873">873</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd__config_8c_source.html#l00966">class_del_profiles()</a>, <a class="el" href="ldlm__lib_8c_source.html#l00504">client_obd_cleanup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lprocfs__status_8h_source.html#l00959">lprocfs_obd_cleanup()</a>, <a class="el" href="obd_8h_source.html#l00592">obd_device::obd_type</a>, <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="obd_8h_source.html#l00112">obd_type::typ_refcnt</a>.</p>

</div>
</div>
<a class="anchor" id="a645ed66d11e29f96dc840ea65055a3f7"></a><!-- doxytag: member="mgc_request.c::mgc_enqueue" ref="a645ed66d11e29f96dc840ea65055a3f7" args="(struct obd_export *exp, enum ldlm_type type, union ldlm_policy_data *policy, enum ldlm_mode mode, __u64 *flags, void *bl_cb, void *cp_cb, void *gl_cb, void *data, __u32 lvb_len, void *lvb_swabber, struct lustre_handle *lockh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_enqueue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga5ced9a6707006817f5e2409b368f36b5">ldlm_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>bl_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cp_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>gl_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>lvb_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>lvb_swabber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01049">1049</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00172">config_llog_instance::cfg_sb</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="mgc__internal_8h_source.html#l00054">cld_is_sptlrpc()</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00195">config_llog_data::cld_resid</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="lustre__dlm_8h_source.html#l01097">ldlm_enqueue_info::ei_type</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="packet-lustre_8c_source.html#l00284">LDLM_ENQUEUE</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="packet-lustre_8c_source.html#l00079">LUSTRE_DLM_VERSION</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>, <a class="el" href="mgc__request_8c_source.html#l01006">MGC_ENQUEUE_LIMIT</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00891">ptlrpc_request_alloc_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01049">RMF_DLM_LVB</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01441">RQF_LDLM_ENQUEUE</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>.</p>

</div>
</div>
<a class="anchor" id="abb79fea5781306523f0b3336c3e30d2e"></a><!-- doxytag: member="mgc_request.c::mgc_exit" ref="abb79fea5781306523f0b3336c3e30d2e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __exit mgc_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l02118">2118</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00246">class_unregister_type()</a>, and <a class="el" href="obd_8h_source.html#l00466">LUSTRE_MGC_NAME</a>.</p>

</div>
</div>
<a class="anchor" id="aa93695e97bc9960e659b3888f5b73572"></a><!-- doxytag: member="mgc_request.c::mgc_fs_cleanup" ref="aa93695e97bc9960e659b3888f5b73572" args="(const struct lu_env *env, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_fs_cleanup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00783">783</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00307">client_obd::cl_mgc_configs_dir</a>, <a class="el" href="obd_8h_source.html#l00306">client_obd::cl_mgc_los</a>, <a class="el" href="obd_8h_source.html#l00305">client_obd::cl_mgc_mutex</a>, <a class="el" href="obd__config_8c_source.html#l00729">class_decref()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="local__storage_8c_source.html#l00936">local_oid_storage_fini()</a>, <a class="el" href="lu__object_8c_source.html#l00193">lu_object_put_nocache()</a>, <a class="el" href="mgc__request_8c_source.html#l00701">mgc_local_llog_fini()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01158">mgc_set_info_async()</a>.</p>

</div>
</div>
<a class="anchor" id="a8145a568e728d3a3d853e6587604e4f3"></a><!-- doxytag: member="mgc_request.c::mgc_fs_setup" ref="a8145a568e728d3a3d853e6587604e4f3" args="(const struct lu_env *env, struct obd_device *obd, struct super_block *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_fs_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct super_block *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00714">714</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00307">client_obd::cl_mgc_configs_dir</a>, <a class="el" href="obd_8h_source.html#l00306">client_obd::cl_mgc_los</a>, <a class="el" href="obd_8h_source.html#l00305">client_obd::cl_mgc_mutex</a>, <a class="el" href="obd__config_8c_source.html#l00717">class_incref()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8c_source.html#l00236">dt_locate_at()</a>, <a class="el" href="dt__object_8h_source.html#l02446">dt_root_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__user_8h_source.html#l00147">lu_fid::f_oid</a>, <a class="el" href="lustre__user_8h_source.html#l00145">lu_fid::f_seq</a>, <a class="el" href="lustre__user_8h_source.html#l00153">lu_fid::f_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00297">FID_SEQ_LOCAL_NAME</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="local__storage_8c_source.html#l00432">local_file_find_or_create()</a>, <a class="el" href="local__storage_8c_source.html#l00936">local_oid_storage_fini()</a>, <a class="el" href="local__storage_8c_source.html#l00803">local_oid_storage_init()</a>, <a class="el" href="dt__object_8h_source.html#l01765">local_oid_storage::los_dev</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="lu__object_8c_source.html#l00193">lu_object_put_nocache()</a>, <a class="el" href="mgc__request_8c_source.html#l00679">mgc_local_llog_init()</a>, <a class="el" href="lustre__disk_8h_source.html#l00058">MOUNT_CONFIGS_DIR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01158">mgc_set_info_async()</a>.</p>

</div>
</div>
<a class="anchor" id="a54631e4b3eb05aa3a7e722310729f027"></a><!-- doxytag: member="mgc_request.c::mgc_fsname2resid" ref="a54631e4b3eb05aa3a7e722310729f027" args="(char *fsname, struct ldlm_res_id *res_id, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mgc_fsname2resid </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fsname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00094">94</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="mgc__request_8c_source.html#l00057">mgc_name2resid()</a>.</p>

<p>Referenced by <a class="el" href="mgs__nids_8c_source.html#l00419">mgs_ir_notify()</a>, and <a class="el" href="mgs__handler_8c_source.html#l00227">mgs_revoke_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ae03a96c09f920c0bdc00baec05f72e53"></a><!-- doxytag: member="mgc_request.c::mgc_get_info" ref="ae03a96c09f920c0bdc00baec05f72e53" args="(const struct lu_env *env, struct obd_export *exp, __u32 keylen, void *key, __u32 *vallen, void *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_get_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01264">1264</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="lustre__import_8h_source.html#l00316">obd_import::imp_connect_data</a>, <a class="el" href="obd_8h_source.html#l00741">KEY_CONN_DATA</a>, and <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>.</p>

</div>
</div>
<a class="anchor" id="a038ed6078d397649680b7e04eaab44da"></a><!-- doxytag: member="mgc_request.c::mgc_import_event" ref="a038ed6078d397649680b7e04eaab44da" args="(struct obd_device *obd, struct obd_import *imp, enum obd_import_event event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_import_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__export.html#ga25e24f2ae3efcc8caa89c9e6c4c47d31">obd_import_event</a>&nbsp;</td>
          <td class="paramname"> <em>event</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01282">1282</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="lustre__import_8h_source.html#l00316">obd_import::imp_connect_data</a>, <a class="el" href="lustre__import_8h_source.html#l00133">IMP_EVENT_ACTIVATE</a>, <a class="el" href="lustre__import_8h_source.html#l00130">IMP_EVENT_ACTIVE</a>, <a class="el" href="lustre__import_8h_source.html#l00132">IMP_EVENT_DEACTIVATE</a>, <a class="el" href="lustre__import_8h_source.html#l00127">IMP_EVENT_DISCON</a>, <a class="el" href="lustre__import_8h_source.html#l00128">IMP_EVENT_INACTIVE</a>, <a class="el" href="lustre__import_8h_source.html#l00129">IMP_EVENT_INVALIDATE</a>, <a class="el" href="lustre__import_8h_source.html#l00131">IMP_EVENT_OCD</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00191">LDLM_FL_LOCAL_ONLY</a>, <a class="el" href="ldlm__resource_8c_source.html#l00892">ldlm_namespace_cleanup()</a>, <a class="el" href="mgc__request_8c_source.html#l01107">mgc_notify_active()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00641">obd_device::obd_namespace</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_no_recov</a>, <a class="el" href="lustre__idl_8h_source.html#l01268">OCD_HAS_FLAG</a>, <a class="el" href="pinger_8c_source.html#l00180">ptlrpc_pinger_ir_down()</a>, <a class="el" href="pinger_8c_source.html#l00173">ptlrpc_pinger_ir_up()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a6ccd2bf92b9cf3b750d156cddae87b5a"></a><!-- doxytag: member="mgc_request.c::mgc_import_in_recovery" ref="a6ccd2bf92b9cf3b750d156cddae87b5a" args="(struct obd_import *imp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool mgc_import_in_recovery </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__import.html">obd_import</a> *&nbsp;</td>
          <td class="paramname"> <em>imp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01837">1837</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="lustre__import_8h_source.html#l00274">obd_import::imp_lock</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="lustre__import_8h_source.html#l00098">LUSTRE_IMP_CLOSED</a>, and <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a3a311ff441a9b7edff36b6388d6e8a44"></a><!-- doxytag: member="mgc_request.c::mgc_init" ref="a3a311ff441a9b7edff36b6388d6e8a44" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __init mgc_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l02112">2112</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00167">class_register_type()</a>, and <a class="el" href="obd_8h_source.html#l00466">LUSTRE_MGC_NAME</a>.</p>

</div>
</div>
<a class="anchor" id="a316d74c20e5790461fe73c78e456e1fd"></a><!-- doxytag: member="mgc_request.c::mgc_llog_fini" ref="a316d74c20e5790461fe73c78e456e1fd" args="(const struct lu_env *env, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_llog_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00827">827</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="llog__obd_8c_source.html#l00108">llog_cleanup()</a>, <a class="el" href="lustre__idl_8h_source.html#l03045">LLOG_CONFIG_REPL_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00842">mgc_precleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a3676385111b19e50d7d2b64e27144395"></a><!-- doxytag: member="mgc_request.c::mgc_llog_init" ref="a3676385111b19e50d7d2b64e27144395" args="(const struct lu_env *env, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_llog_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00804">804</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="llog__client_8c_source.html#l00355">llog_client_ops</a>, <a class="el" href="lustre__idl_8h_source.html#l03045">LLOG_CONFIG_REPL_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="llog__net_8c_source.html#l00053">llog_initiator_connect()</a>, <a class="el" href="llog__obd_8c_source.html#l00146">llog_setup()</a>, <a class="el" href="obd_8h_source.html#l00651">obd_device::obd_olg</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00891">mgc_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a7fcb9f52e6a8f8fff1b4c2fd0fcd142e"></a><!-- doxytag: member="mgc_request.c::mgc_llog_local_copy" ref="a7fcb9f52e6a8f8fff1b4c2fd0fcd142e" args="(const struct lu_env *env, struct obd_device *obd, struct llog_ctxt *rctxt, struct llog_ctxt *lctxt, char *logname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_llog_local_copy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__ctxt.html">llog_ctxt</a> *&nbsp;</td>
          <td class="paramname"> <em>rctxt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllog__ctxt.html">llog_ctxt</a> *&nbsp;</td>
          <td class="paramname"> <em>lctxt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01685">1685</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="llog_8c_source.html#l01187">llog_backup()</a>, <a class="el" href="llog_8c_source.html#l01014">llog_erase()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01728">mgc_process_cfg_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a0738b280bf0ce89e72f6430f2f91f1f2"></a><!-- doxytag: member="mgc_request.c::mgc_local_llog_fini" ref="a0738b280bf0ce89e72f6430f2f91f1f2" args="(const struct lu_env *env, struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_local_llog_fini </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00701">701</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="llog__obd_8c_source.html#l00108">llog_cleanup()</a>, <a class="el" href="lustre__idl_8h_source.html#l03044">LLOG_CONFIG_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00783">mgc_fs_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e79c1bd9bdd7d0f121f6209cf4f02f8"></a><!-- doxytag: member="mgc_request.c::mgc_local_llog_init" ref="a7e79c1bd9bdd7d0f121f6209cf4f02f8" args="(const struct lu_env *env, struct obd_device *obd, struct obd_device *disk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_local_llog_init </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>disk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00679">679</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00307">client_obd::cl_mgc_configs_dir</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l03044">LLOG_CONFIG_ORIG_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="llog__osd_8c_source.html#l01854">llog_osd_ops</a>, <a class="el" href="llog__obd_8c_source.html#l00146">llog_setup()</a>, <a class="el" href="lustre__log_8h_source.html#l00320">llog_ctxt::loc_dir</a>, <a class="el" href="obd_8h_source.html#l00651">obd_device::obd_olg</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00714">mgc_fs_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a2875d1c5a65182d92dbcb78fbb4a91ff"></a><!-- doxytag: member="mgc_request.c::mgc_logname2resid" ref="a2875d1c5a65182d92dbcb78fbb4a91ff" args="(char *logname, struct ldlm_res_id *res_id, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_logname2resid </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>logname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00102">102</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="mgc__request_8c_source.html#l00057">mgc_name2resid()</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>.</p>

</div>
</div>
<a class="anchor" id="afde0bc2aaead0184b427abdda5bd1cdc"></a><!-- doxytag: member="mgc_request.c::mgc_name2resid" ref="afde0bc2aaead0184b427abdda5bd1cdc" args="(char *name, int len, struct ldlm_res_id *res_id, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_name2resid </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00057">57</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00183">CONFIG_T_CONFIG</a>, <a class="el" href="obd__class_8h_source.html#l00186">CONFIG_T_PARAMS</a>, <a class="el" href="obd__class_8h_source.html#l00185">CONFIG_T_RECOVER</a>, <a class="el" href="obd__class_8h_source.html#l00184">CONFIG_T_SPTLRPC</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, and <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00094">mgc_fsname2resid()</a>, and <a class="el" href="mgc__request_8c_source.html#l00102">mgc_logname2resid()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ad6223704a1e52befdf3633375ff074"></a><!-- doxytag: member="mgc_request.c::mgc_notify_active" ref="a5ad6223704a1e52befdf3633375ff074" args="(struct obd_device *unused)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mgc_notify_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>unused</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01107">1107</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="mgc__request_8c_source.html#l00505">RQ_NOW</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01282">mgc_import_event()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9eaf400f79feb601b8f1e3fe7f544c9"></a><!-- doxytag: member="mgc_request.c::mgc_precleanup" ref="ad9eaf400f79feb601b8f1e3fe7f544c9" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_precleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00842">842</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mgc__request_8c_source.html#l00827">mgc_llog_fini()</a>, <a class="el" href="obd__class_8h_source.html#l00647">obd_cleanup_client_import()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="mgc__request_8c_source.html#l00505">RQ_NOW</a>, <a class="el" href="mgc__request_8c_source.html#l00508">RQ_PRECLEANUP</a>, <a class="el" href="mgc__request_8c_source.html#l00504">RQ_RUNNING</a>, and <a class="el" href="mgc__request_8c_source.html#l00507">RQ_STOP</a>.</p>

</div>
</div>
<a class="anchor" id="a1ca103f2a51882c2cd9f8952f5d72aef"></a><!-- doxytag: member="mgc_request.c::mgc_process_cfg_log" ref="a1ca103f2a51882c2cd9f8952f5d72aef" args="(struct obd_device *mgc, struct config_llog_data *cld, int local_only)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_process_cfg_log </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>local_only</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01728">1728</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="llog__obd_8c_source.html#l00072">__llog_ctxt_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00172">config_llog_instance::cfg_sb</a>, <a class="el" href="obd_8h_source.html#l00307">client_obd::cl_mgc_configs_dir</a>, <a class="el" href="obd__config_8c_source.html#l01673">class_config_parse_llog()</a>, <a class="el" href="genops_8c_source.html#l00614">class_notify_sptlrpc_conf()</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="mgc__internal_8h_source.html#l00054">cld_is_sptlrpc()</a>, <a class="el" href="obd__class_8h_source.html#l00203">config_llog_data::cld_lock</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__disk_8h_source.html#l00187">IS_MGS</a>, <a class="el" href="lustre__disk_8h_source.html#l00188">IS_SERVER</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00285">LCONSOLE_ERROR_MSG</a>, <a class="el" href="lu__object_8h_source.html#l01020">LCT_MG_THREAD</a>, <a class="el" href="lustre__idl_8h_source.html#l03044">LLOG_CONFIG_ORIG_CTXT</a>, <a class="el" href="lustre__idl_8h_source.html#l03045">LLOG_CONFIG_REPL_CTXT</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="llog_8c_source.html#l01150">llog_is_empty()</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="mgc__request_8c_source.html#l01685">mgc_llog_local_copy()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__class_8h_source.html#l00190">PARAMS_FILENAME</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="sec__config_8c_source.html#l00737">sptlrpc_conf_log_update_begin()</a>, <a class="el" href="sec__config_8c_source.html#l00763">sptlrpc_conf_log_update_end()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a736335774255d09928f7362e67e68110"></a><!-- doxytag: member="mgc_request.c::mgc_process_config" ref="a736335774255d09928f7362e67e68110" args="(struct obd_device *obd, size_t len, void *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_process_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called from lustre_process_log. </p>
<p>LCFG_LOG_START gets the config log from the MGS, processes it to start any services, and adds it to the list logs to watch (follow). </p>

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01990">1990</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00165">CFG_F_COMPAT146</a>, <a class="el" href="obd__class_8h_source.html#l00176">config_llog_instance::cfg_flags</a>, <a class="el" href="obd__class_8h_source.html#l00175">config_llog_instance::cfg_last_idx</a>, <a class="el" href="obd_8h_source.html#l00162">client_obd::cl_import</a>, <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="obd__class_8h_source.html#l00200">config_llog_data::cld_params</a>, <a class="el" href="obd__class_8h_source.html#l00201">config_llog_data::cld_recover</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="mgc__request_8c_source.html#l00310">config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00402">config_log_end()</a>, <a class="el" href="mgc__request_8c_source.html#l00168">config_log_find()</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__cfg_8h_source.html#l00137">lustre_cfg::lcfg_bufcount</a>, <a class="el" href="lustre__cfg_8h_source.html#l00130">lustre_cfg::lcfg_command</a>, <a class="el" href="lustre__cfg_8h_source.html#l00089">LCFG_LOG_END</a>, <a class="el" href="lustre__cfg_8h_source.html#l00088">LCFG_LOG_START</a>, <a class="el" href="lustre__cfg_8h_source.html#l00084">LCFG_LOV_ADD_OBD</a>, <a class="el" href="lustre__cfg_8h_source.html#l00085">LCFG_LOV_DEL_OBD</a>, <a class="el" href="lustre__cfg_8h_source.html#l00093">LCFG_SPTLRPC_CONF</a>, <a class="el" href="lustre__cfg_8h_source.html#l00182">lustre_cfg_buf()</a>, <a class="el" href="lustre__cfg_8h_source.html#l00146">LUSTRE_CFG_BUFLEN</a>, <a class="el" href="lustre__cfg_8h_source.html#l00210">lustre_cfg_string()</a>, <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>, <a class="el" href="mgc__request_8c_source.html#l01119">mgc_target_register()</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02970">mgs_target_info::mti_svname</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01268">OCD_HAS_FLAG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="sec__config_8c_source.html#l00713">sptlrpc_process_config()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="aa41264fe823f5ec74ae97e9b28b0d6c3"></a><!-- doxytag: member="mgc_request.c::mgc_process_log" ref="aa41264fe823f5ec74ae97e9b28b0d6c3" args="(struct obd_device *mgc, struct config_llog_data *cld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mgc_process_log </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mgc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a configuration log from the MGS and process it. </p>
<p>This function is called for both clients and servers to process the configuration log from the MGS. The MGC enqueues a DLM lock on the log from the MGS, and if the lock gets revoked the MGC will be notified by the lock cancellation callback that the config log has changed, and will enqueue another MGS lock on it, and then continue processing the new additions to the end of the log.</p>
<p>Since the MGC import is not replayable, if the import is being evicted (rcl == -ESHUTDOWN, </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="client_8c.html#a74e44d223c09372b3da86638b5621408" title="Based on the current state of the import, determine if the request can be sent, is...">ptlrpc_import_delay_req()</a>), retry to <a class="el" href="parser_8c.html#ab711deb59ead2a3a9484204fef62b906">process</a> the <a class="el" href="group__log.html">log</a> until recovery is finished or the import is closed.</dd></dl>
<p>Make a local copy of the log before parsing it if appropriate (non-MGS server) so that the server can start even when the MGS is down.</p>
<p>There shouldn't be multiple processes running process_log at once -- sounds like badness. It actually might be fine, as long as they're not trying to update from the same log simultaneously, in which case we should use a per-log semaphore instead of cld_lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mgc</em>&nbsp;</td><td>MGC device by which to fetch the configuration log </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cld</em>&nbsp;</td><td>log processing state (stored in lock callback data)</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno on failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01878">1878</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd__class_8h_source.html#l00171">config_llog_instance::cfg_instance</a>, <a class="el" href="obd__class_8h_source.html#l00175">config_llog_instance::cfg_last_idx</a>, <a class="el" href="linux-time_8h_source.html#l00182">cfs_time_seconds()</a>, <a class="el" href="obd_8h_source.html#l00309">client_obd::cl_mgc_mgsexp</a>, <a class="el" href="obd_8h_source.html#l00308">client_obd::cl_mgc_refcount</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="mgc__internal_8h_source.html#l00059">cld_is_recover()</a>, <a class="el" href="obd__class_8h_source.html#l00203">config_llog_data::cld_lock</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_lostlock</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_stopping</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="mgc__request_8c_source.html#l00124">config_log_get()</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__import_8h_source.html#l00217">obd_import::imp_recovery_waitq</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00295">LCK_CR</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00289">LDLM_FL_NO_LRU</a>, <a class="el" href="ldlm__lock_8c_source.html#l02293">ldlm_lock_set_data()</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="mgc__request_8c_source.html#l01097">mgc_cancel()</a>, <a class="el" href="mgc__request_8c_source.html#l01049">mgc_enqueue()</a>, <a class="el" href="mgc__request_8c_source.html#l01837">mgc_import_in_recovery()</a>, <a class="el" href="mgc__request_8c_source.html#l01728">mgc_process_cfg_log()</a>, <a class="el" href="mgc__request_8c_source.html#l01537">mgc_process_recover_log()</a>, <a class="el" href="obd__support_8h_source.html#l00458">OBD_FAIL_MGC_PAUSE_PROCESS_LOG</a>, <a class="el" href="obd__support_8h_source.html#l00624">OBD_FAIL_TIMEOUT</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, <a class="el" href="import_8c_source.html#l00415">ptlrpc_pinger_force()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00200">do_config_log_add()</a>, <a class="el" href="mgc__request_8c_source.html#l00514">do_requeue()</a>, and <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ecd928b79cf0fe1b2710c239354f32a"></a><!-- doxytag: member="mgc_request.c::mgc_process_recover_log" ref="a7ecd928b79cf0fe1b2710c239354f32a" args="(struct obd_device *obd, struct config_llog_data *cld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_process_recover_log </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function is called if this client was notified for target restarting by the MGS. </p>
<p>A CONFIG_READ RPC is going to send to fetch recovery logs. </p>

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01537">1537</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="structptlrpc__bulk__frag__ops.html#a3338125828618910ae190978e235d52a">ptlrpc_bulk_frag_ops::add_kiov_frag</a>, <a class="el" href="lustre__net_8h_source.html#l01451">ptlrpc_bulk_desc::bd_frag_ops</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00175">config_llog_instance::cfg_last_idx</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="obd__class_8h_source.html#l00196">config_llog_data::cld_cfg</a>, <a class="el" href="mgc__internal_8h_source.html#l00059">cld_is_recover()</a>, <a class="el" href="obd__class_8h_source.html#l00203">config_llog_data::cld_lock</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00202">config_llog_data::cld_mgcexp</a>, <a class="el" href="obd__class_8h_source.html#l00204">config_llog_data::cld_type</a>, <a class="el" href="mgc__request_8c_source.html#l01326">CONFIG_READ_NRPAGES</a>, <a class="el" href="mgc__request_8c_source.html#l01325">CONFIG_READ_NRPAGES_INIT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00046">LPD64</a>, <a class="el" href="packet-lustre_8c_source.html#l00081">LUSTRE_MGS_VERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l02995">mgs_config_body::mcb_bits</a>, <a class="el" href="lustre__idl_8h_source.html#l02991">mgs_config_body::mcb_name</a>, <a class="el" href="lustre__idl_8h_source.html#l02992">mgs_config_body::mcb_offset</a>, <a class="el" href="lustre__idl_8h_source.html#l02993">mgs_config_body::mcb_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02996">mgs_config_body::mcb_units</a>, <a class="el" href="lustre__idl_8h_source.html#l03000">mgs_config_res::mcr_offset</a>, <a class="el" href="lustre__idl_8h_source.html#l03001">mgs_config_res::mcr_size</a>, <a class="el" href="mgc__request_8c_source.html#l01329">mgc_apply_recover_logs()</a>, <a class="el" href="lustre__idl_8h_source.html#l00123">MGS_BULK_PORTAL</a>, <a class="el" href="packet-lustre_8c_source.html#l00315">MGS_CONFIG_READ</a>, <a class="el" href="osc__internal_8h_source.html#l00177">min_t</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="lustre__net_8h_source.html#l01337">PTLRPC_BULK_BUF_KIOV</a>, <a class="el" href="client_8c_source.html#l00050">ptlrpc_bulk_kiov_pin_ops</a>, <a class="el" href="lustre__net_8h_source.html#l01339">PTLRPC_BULK_PUT_SINK</a>, <a class="el" href="client_8c_source.html#l00174">ptlrpc_prep_bulk_imp()</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="lustre__net_8h_source.html#l01198">ptlrpc_rep_need_swab()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00852">ptlrpc_request_alloc()</a>, <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l00882">RMF_MGS_CONFIG_BODY</a>, <a class="el" href="layout_8c_source.html#l00888">RMF_MGS_CONFIG_RES</a>, <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="layout_8c_source.html#l01298">RQF_MGS_CONFIG_READ</a>, <a class="el" href="sec_8c_source.html#l02286">sptlrpc_cli_unwrap_bulk_read()</a>, <a class="el" href="string_8c_source.html#l00058">strlcpy()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01878">mgc_process_log()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e1dfc41fa5cd1c3ac72914254dee46f"></a><!-- doxytag: member="mgc_request.c::mgc_requeue_add" ref="a3e1dfc41fa5cd1c3ac72914254dee46f" args="(struct config_llog_data *cld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mgc_requeue_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structconfig__llog__data.html">config_llog_data</a> *&nbsp;</td>
          <td class="paramname"> <em>cld</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00645">645</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="obd__class_8h_source.html#l00203">config_llog_data::cld_lock</a>, <a class="el" href="obd__class_8h_source.html#l00208">config_llog_data::cld_logname</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_lostlock</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_stopping</a>, <a class="el" href="mgc__request_8c_source.html#l00124">config_log_get()</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="mgc__request_8c_source.html#l00505">RQ_NOW</a>, and <a class="el" href="mgc__request_8c_source.html#l00507">RQ_STOP</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00945">mgc_blocking_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="aebd7a9168137588094b8910fe75c0a57"></a><!-- doxytag: member="mgc_request.c::mgc_requeue_thread" ref="aebd7a9168137588094b8910fe75c0a57" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_requeue_thread </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00546">546</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="prng_8c_source.html#l00078">cfs_rand()</a>, <a class="el" href="obd__class_8h_source.html#l00197">config_llog_data::cld_list_chain</a>, <a class="el" href="obd__class_8h_source.html#l00205">config_llog_data::cld_lostlock</a>, <a class="el" href="obd__class_8h_source.html#l00198">config_llog_data::cld_refcount</a>, <a class="el" href="mgc__request_8c_source.html#l00135">config_log_put()</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="mgc__request_8c_source.html#l00514">do_requeue()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__lib_8h_source.html#l00171">LWI_TIMEOUT</a>, <a class="el" href="mgc__request_8c_source.html#l00543">MGC_TIMEOUT_MIN_SECONDS</a>, <a class="el" href="mgc__request_8c_source.html#l00544">MGC_TIMEOUT_RAND_CENTISEC</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="mgc__request_8c_source.html#l00506">RQ_LATER</a>, <a class="el" href="mgc__request_8c_source.html#l00505">RQ_NOW</a>, <a class="el" href="mgc__request_8c_source.html#l00508">RQ_PRECLEANUP</a>, <a class="el" href="mgc__request_8c_source.html#l00504">RQ_RUNNING</a>, <a class="el" href="mgc__request_8c_source.html#l00507">RQ_STOP</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l00891">mgc_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a47f567525e3e4877414b860417a786ae"></a><!-- doxytag: member="mgc_request.c::mgc_set_info_async" ref="a47f567525e3e4877414b860417a786ae" args="(const struct lu_env *env, struct obd_export *exp, u32 keylen, void *key, u32 vallen, void *val, struct ptlrpc_request_set *set)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_set_info_async </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>vallen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request__set.html">ptlrpc_request_set</a> *&nbsp;</td>
          <td class="paramname"> <em>set</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01158">1158</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="obd_8h_source.html#l00187">client_obd::cl_flvr_mgc</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="obd_8h_source.html#l00699">obd_device::cli</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_deactive</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_invalid</a>, <a class="el" href="lustre__import_8h_source.html#l00205">obd_import::imp_obd</a>, <a class="el" href="lustre__import_8h_source.html#l00277">obd_import::imp_replayable</a>, <a class="el" href="lustre__import_8h_source.html#l00230">obd_import::imp_state</a>, <a class="el" href="obd_8h_source.html#l00740">KEY_CLEAR_FS</a>, <a class="el" href="obd_8h_source.html#l00747">KEY_INIT_RECOV_BACKUP</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="obd_8h_source.html#l00753">KEY_MGSSEC</a>, <a class="el" href="obd_8h_source.html#l00755">KEY_REGISTER_TARGET</a>, <a class="el" href="obd_8h_source.html#l00756">KEY_SET_FS</a>, <a class="el" href="lustre__idl_8h_source.html#l02952">KEY_SET_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00287">LCONSOLE_ERROR</a>, <a class="el" href="lustre__import_8h_source.html#l00106">LUSTRE_IMP_FULL</a>, <a class="el" href="lustre__import_8h_source.html#l00099">LUSTRE_IMP_NEW</a>, <a class="el" href="mgc__request_8c_source.html#l00783">mgc_fs_cleanup()</a>, <a class="el" href="mgc__request_8c_source.html#l00714">mgc_fs_setup()</a>, <a class="el" href="mgc__request_8c_source.html#l01012">mgc_set_mgs_param()</a>, <a class="el" href="mgc__request_8c_source.html#l01119">mgc_target_register()</a>, <a class="el" href="lustre__idl_8h_source.html#l02966">mgs_target_info::mti_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02970">mgs_target_info::mti_svname</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_replayable</a>, <a class="el" href="lustre__import_8h_source.html#l00111">ptlrpc_import_state_name()</a>, <a class="el" href="import_8c_source.html#l00450">ptlrpc_reconnect_import()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__sec_8h_source.html#l00292">sptlrpc_flavor::sf_rpc</a>, <a class="el" href="sec_8c_source.html#l00226">sptlrpc_flavor2name()</a>, <a class="el" href="lustre__sec_8h_source.html#l00250">SPTLRPC_FLVR_INVALID</a>, <a class="el" href="sec__config_8c_source.html#l00099">sptlrpc_parse_flavor()</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

</div>
</div>
<a class="anchor" id="a93746dcbf60ecc750a6a5bd5ba2052a2"></a><!-- doxytag: member="mgc_request.c::mgc_set_mgs_param" ref="a93746dcbf60ecc750a6a5bd5ba2052a2" args="(struct obd_export *exp, struct mgs_send_param *msp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_set_mgs_param </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__send__param.html">mgs_send_param</a> *&nbsp;</td>
          <td class="paramname"> <em>msp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01012">1012</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="packet-lustre_8c_source.html#l00081">LUSTRE_MGS_VERSION</a>, <a class="el" href="mgc__request_8c_source.html#l01009">MGC_SEND_PARAM_LIMIT</a>, <a class="el" href="packet-lustre_8c_source.html#l00314">MGS_SET_INFO</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00891">ptlrpc_request_alloc_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00876">RMF_MGS_SEND_PARAM</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01293">RQF_MGS_SET_INFO</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01158">mgc_set_info_async()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8db7707aba4da4ff4a52d3513d7ea32"></a><!-- doxytag: member="mgc_request.c::mgc_setup" ref="ab8db7707aba4da4ff4a52d3513d7ea32" args="(struct obd_device *obd, struct lustre_cfg *lcfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__cfg.html">lustre_cfg</a> *&nbsp;</td>
          <td class="paramname"> <em>lcfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00891">891</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="ldlm__lib_8c_source.html#l00504">client_obd_cleanup()</a>, <a class="el" href="ldlm__lib_8c_source.html#l00261">client_obd_setup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lprocfs__status_8h_source.html#l00957">lprocfs_obd_setup()</a>, <a class="el" href="mgc__request_8c_source.html#l00804">mgc_llog_init()</a>, <a class="el" href="mgc__request_8c_source.html#l00546">mgc_requeue_thread()</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00716">obd_device::obd_vars</a>, <a class="el" href="ptlrpcd_8c_source.html#l00955">ptlrpcd_addref()</a>, <a class="el" href="ptlrpcd_8c_source.html#l00971">ptlrpcd_decref()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="sec__lproc_8c_source.html#l00145">sptlrpc_lprocfs_cliobd_attach()</a>.</p>

</div>
</div>
<a class="anchor" id="ac31f975046d34c34a6dc9dfe1cc77eff"></a><!-- doxytag: member="mgc_request.c::mgc_target_register" ref="ac31f975046d34c34a6dc9dfe1cc77eff" args="(struct obd_export *exp, struct mgs_target_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mgc_target_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgs__target__info.html">mgs_target_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l01119">1119</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="genops_8c_source.html#l00749">class_exp2cliimp()</a>, <a class="el" href="mgc__request_8c_source.html#l00042">D_MGC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="packet-lustre_8c_source.html#l00081">LUSTRE_MGS_VERSION</a>, <a class="el" href="mgc__request_8c_source.html#l01008">MGC_TARGET_REG_LIMIT</a>, <a class="el" href="packet-lustre_8c_source.html#l00312">MGS_TARGET_REG</a>, <a class="el" href="lustre__idl_8h_source.html#l02964">mgs_target_info::mti_stripe_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02970">mgs_target_info::mti_svname</a>, <a class="el" href="client_8c_source.html#l02829">ptlrpc_queue_wait()</a>, <a class="el" href="client_8c_source.html#l02490">ptlrpc_req_finished()</a>, <a class="el" href="client_8c_source.html#l00891">ptlrpc_request_alloc_pack()</a>, <a class="el" href="pack__generic_8c_source.html#l01551">ptlrpc_request_set_replen()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00870">RMF_MGS_TARGET_INFO</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, and <a class="el" href="layout_8c_source.html#l01288">RQF_MGS_TARGET_REG</a>.</p>

<p>Referenced by <a class="el" href="mgc__request_8c_source.html#l01990">mgc_process_config()</a>, and <a class="el" href="mgc__request_8c_source.html#l01158">mgc_set_info_async()</a>.</p>

</div>
</div>
<a class="anchor" id="adc10f40acba3bb9b2640e985276b0a7c"></a><!-- doxytag: member="mgc_request.c::MODULE_AUTHOR" ref="adc10f40acba3bb9b2640e985276b0a7c" args="(&quot;OpenSFS, Inc. &lt;http://www.lustre.org/&gt;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_AUTHOR </td>
          <td>(</td>
          <td class="paramtype">&quot;&nbsp;</td>
          <td class="paramname"> <em>OpenSFS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Inc.&lt; http://www.lustre.org/&gt;&quot;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a71231a1a1bd793fb14e55ce2ad932003"></a><!-- doxytag: member="mgc_request.c::MODULE_DESCRIPTION" ref="a71231a1a1bd793fb14e55ce2ad932003" args="(&quot;Lustre Management Client&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_DESCRIPTION </td>
          <td>(</td>
          <td class="paramtype">&quot;Lustre Management Client&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a472cfd35ef12bc2c172cfe83170e44c1"></a><!-- doxytag: member="mgc_request.c::module_exit" ref="a472cfd35ef12bc2c172cfe83170e44c1" args="(mgc_exit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_exit </td>
          <td>(</td>
          <td class="paramtype">mgc_exit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f1afc51ea9194ab7fbd26ec6b2e7074"></a><!-- doxytag: member="mgc_request.c::module_init" ref="a4f1afc51ea9194ab7fbd26ec6b2e7074" args="(mgc_init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_init </td>
          <td>(</td>
          <td class="paramtype">mgc_init&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad94b36675e7eb067ea3ce6ff9e244a44"></a><!-- doxytag: member="mgc_request.c::MODULE_LICENSE" ref="ad94b36675e7eb067ea3ce6ff9e244a44" args="(&quot;GPL&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_LICENSE </td>
          <td>(</td>
          <td class="paramtype">&quot;GPL&quot;&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae9c321be2136fb8501887ee69dac11a2"></a><!-- doxytag: member="mgc_request.c::MODULE_VERSION" ref="ae9c321be2136fb8501887ee69dac11a2" args="(LUSTRE_VERSION_STRING)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_VERSION </td>
          <td>(</td>
          <td class="paramtype">LUSTRE_VERSION_STRING&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a0cd7cf015ceea395a4d98511a562c408"></a><!-- doxytag: member="mgc_request.c::config_llog_list" ref="a0cd7cf015ceea395a4d98511a562c408" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="mgc__request_8c.html#a0cd7cf015ceea395a4d98511a562c408">config_llog_list</a> = LIST_HEAD_INIT(<a class="el" href="mgc__request_8c.html#a0cd7cf015ceea395a4d98511a562c408">config_llog_list</a>)<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00120">120</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8a723b5ba86fe1d30dabf387524cf603"></a><!-- doxytag: member="mgc_request.c::mgc_count" ref="a8a723b5ba86fe1d30dabf387524cf603" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="mgc__request_8c.html#a8a723b5ba86fe1d30dabf387524cf603">mgc_count</a> = ATOMIC_INIT(0)<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00841">841</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
<a class="anchor" id="a50bc44881eeb96adeaa2a4910c3fa86b"></a><!-- doxytag: member="mgc_request.c::mgc_obd_ops" ref="a50bc44881eeb96adeaa2a4910c3fa86b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__ops.html">obd_ops</a> <a class="el" href="mgc__request_8c.html#a50bc44881eeb96adeaa2a4910c3fa86b">mgc_obd_ops</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .o_owner        = THIS_MODULE,
        .o_setup        = <a class="code" href="mgc__request_8c.html#ab8db7707aba4da4ff4a52d3513d7ea32">mgc_setup</a>,
        .o_precleanup   = <a class="code" href="mgc__request_8c.html#ad9eaf400f79feb601b8f1e3fe7f544c9">mgc_precleanup</a>,
        .o_cleanup      = <a class="code" href="mgc__request_8c.html#a0caf63552a9ef50883bcd33bdf44463c">mgc_cleanup</a>,
        .o_add_conn     = <a class="code" href="group__net.html#gace2253d15c74ffe28cf60ed3518258b2">client_import_add_conn</a>,
        .o_del_conn     = <a class="code" href="group__net.html#ga770f58b91f82d4b373b35f2b11cdf5d0">client_import_del_conn</a>,
        .o_connect      = <a class="code" href="group__net.html#gab66008e96b57e399aaf8e48a351478f8">client_connect_import</a>,
        .o_disconnect   = <a class="code" href="group__net.html#gab8ecd3b16250a80c377e9c9f7bfebfb8">client_disconnect_export</a>,
        .o_set_info_async = <a class="code" href="mgc__request_8c.html#a47f567525e3e4877414b860417a786ae">mgc_set_info_async</a>,
        .o_get_info       = <a class="code" href="mgc__request_8c.html#ae03a96c09f920c0bdc00baec05f72e53">mgc_get_info</a>,
        .o_import_event = <a class="code" href="mgc__request_8c.html#a038ed6078d397649680b7e04eaab44da">mgc_import_event</a>,
        .o_process_config = <a class="code" href="mgc__request_8c.html#a736335774255d09928f7362e67e68110" title="Called from lustre_process_log.">mgc_process_config</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l02097">2097</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac325452c1db8d538d71b31d7b58a2a54"></a><!-- doxytag: member="mgc_request.c::rq_state" ref="ac325452c1db8d538d71b31d7b58a2a54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="mgc__request_8c.html#ac325452c1db8d538d71b31d7b58a2a54">rq_state</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00509">509</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
<a class="anchor" id="acfa6a35863e313b398e6aee762b0c373"></a><!-- doxytag: member="mgc_request.c::rq_waitq" ref="acfa6a35863e313b398e6aee762b0c373" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t <a class="el" href="mgc__request_8c.html#acfa6a35863e313b398e6aee762b0c373">rq_waitq</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mgc__request_8c_source.html#l00510">510</a> of file <a class="el" href="mgc__request_8c_source.html">mgc_request.c</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
