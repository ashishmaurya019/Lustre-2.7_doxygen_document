<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: cfs_hash Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cfs_hash Struct Reference</h1><!-- doxytag: class="cfs_hash" -->
<p><a class="el" href="structcfs__hash.html" title="cfs_hash is a hash-table implementation for general purpose, it can support: .">cfs_hash</a> is a hash-table implementation for general purpose, it can support: 
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union <a class="el" href="unioncfs__hash__lock.html">cfs_hash_lock</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a8a6786b1f4bad4c8487a445464bf2b64">hs_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">serialize with rehash, or serialize all operations if the hash-table has CFS_HASH_NO_BKTLOCK  <a href="#a8a6786b1f4bad4c8487a445464bf2b64"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a142d72c3de915e025c2c73e902b1deb7">hs_ops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hash operations  <a href="#a142d72c3de915e025c2c73e902b1deb7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__hash__lock__ops.html">cfs_hash_lock_ops</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a35f27e7c4c3c28aa332a7e9727b9b370">hs_lops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hash lock operations  <a href="#a35f27e7c4c3c28aa332a7e9727b9b370"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__hash__hlist__ops.html">cfs_hash_hlist_ops</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a8ecac20b030cab05599bcbc426fa12ff">hs_hops</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hash list operations  <a href="#a8ecac20b030cab05599bcbc426fa12ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__hash__bucket.html">cfs_hash_bucket</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a0037382aac15aa98e7769f3a1e705ec2">hs_buckets</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hash buckets-table  <a href="#a0037382aac15aa98e7769f3a1e705ec2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a6468533a211d7ba8dbe065344b26cb20">hs_count</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">total number of items on this hash-table  <a href="#a6468533a211d7ba8dbe065344b26cb20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#aa124601989b8b1fa7638f2ae3bdb1a4d">hs_flags</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hash flags, see cfs_hash_tag for detail  <a href="#aa124601989b8b1fa7638f2ae3bdb1a4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#ae8f5538ba428a5d1bfcbdedf2670675b">hs_extra_bytes</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># of extra-bytes for bucket, for user saving extended attributes  <a href="#ae8f5538ba428a5d1bfcbdedf2670675b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a066dc687739a76cc3a7325c54dd22be2">hs_iterating</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wants to iterate  <a href="#a066dc687739a76cc3a7325c54dd22be2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#aecc3bc4853e3dc9a05c1101303105ab3">hs_exiting</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hash-table is dying  <a href="#aecc3bc4853e3dc9a05c1101303105ab3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a0708aef0dadfbea4f8eda2255ea586a0">hs_cur_bits</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current hash bits  <a href="#a0708aef0dadfbea4f8eda2255ea586a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a5fc9fa938616d397812796ef3ab93bc3">hs_min_bits</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">min hash bits  <a href="#a5fc9fa938616d397812796ef3ab93bc3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a2c32479538c0b4195ff8b63df9ee652b">hs_max_bits</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">max hash bits  <a href="#a2c32479538c0b4195ff8b63df9ee652b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#afa9cc26fb1cdf53bf93306a646fc4a12">hs_rehash_bits</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bits for rehash  <a href="#afa9cc26fb1cdf53bf93306a646fc4a12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a617308284ebe6349f4506b0a8edd9834">hs_bkt_bits</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bits for each bucket  <a href="#a617308284ebe6349f4506b0a8edd9834"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a20d7e9ee877b7ffe878c78d369e7a5a4">hs_min_theta</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">resize min threshold  <a href="#a20d7e9ee877b7ffe878c78d369e7a5a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a244197b47c9b68b72738849c33a26977">hs_max_theta</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">resize max threshold  <a href="#a244197b47c9b68b72738849c33a26977"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#aa566defe2de2633a747200ff9eb4c58e">hs_rehash_count</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">resize count  <a href="#aa566defe2de2633a747200ff9eb4c58e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a32503470d27f50a830cdaeda3ae6adbc">hs_iterators</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"># of iterators (caller of cfs_hash_for_each_*)  <a href="#a32503470d27f50a830cdaeda3ae6adbc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__workitem.html">cfs_workitem</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a3869f462a16492f575df4d84e4497c4c">hs_rehash_wi</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rehash workitem  <a href="#a3869f462a16492f575df4d84e4497c4c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a1521cb8e379605aaf330a824de2f6a0b">hs_refcount</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">refcount on this hash table  <a href="#a1521cb8e379605aaf330a824de2f6a0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfs__hash__bucket.html">cfs_hash_bucket</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a150c977fb93e52fc252f0095440e8ef7">hs_rehash_buckets</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rehash buckets-table  <a href="#a150c977fb93e52fc252f0095440e8ef7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfs__hash.html#a08d0891326130dcdfbd39d6d85aa3dd3">hs_name</a> [0]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of htable  <a href="#a08d0891326130dcdfbd39d6d85aa3dd3"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><a class="el" href="structcfs__hash.html" title="cfs_hash is a hash-table implementation for general purpose, it can support: .">cfs_hash</a> is a hash-table implementation for general purpose, it can support:</p>
<p>two refcount modes hash-table with &amp; without refcount . four lock modes nolock, one-spinlock, rw-bucket-lock, spin-bucket-lock . general operations lookup, add(add_tail or add_head), delete . rehash grows or shrink . iteration locked iteration and unlocked iteration . bigname support long name hash . debug trace max searching depth</p>
<p>Rehash: When the htable grows or shrinks, a separate task (cfs_hash_rehash_worker) is spawned to handle the rehash in the background, it's possible that other processes can concurrently perform additions, deletions, and lookups without being blocked on rehash completion, because rehash will release the global wrlock for each bucket.</p>
<p>rehash and iteration can't run at the same time because it's too tricky to keep both of them safe and correct. As they are relatively rare operations, so: . if iteration is in progress while we try to launch rehash, then it just giveup, iterator will launch rehash at the end. . if rehash is in progress while we try to iterate the hash table, then we just wait (shouldn't be very long time), anyway, nobody should expect iteration of whole hash-table to be non-blocking.</p>
<p>During rehashing, a (key,object) pair may be in one of two buckets, depending on whether the worker task has yet to transfer the object to its new location in the table. Lookups and deletions need to search both locations; additions must take care to only insert into the new bucket. </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00207">207</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a617308284ebe6349f4506b0a8edd9834"></a><!-- doxytag: member="cfs_hash::hs_bkt_bits" ref="a617308284ebe6349f4506b0a8edd9834" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#a617308284ebe6349f4506b0a8edd9834">cfs_hash::hs_bkt_bits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bits for each bucket </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00238">238</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00479">cfs_hash_bd_from_key()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00557">cfs_hash_bd_index_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00563">cfs_hash_bd_index_set()</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="ldlm__resource_8c_source.html#l00516">ldlm_res_hop_fid_hash()</a>, and <a class="el" href="lu__object_8c_source.html#l00976">lu_obj_hop_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="a0037382aac15aa98e7769f3a1e705ec2"></a><!-- doxytag: member="cfs_hash::hs_buckets" ref="a0037382aac15aa98e7769f3a1e705ec2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__bucket.html">cfs_hash_bucket</a>** <a class="el" href="structcfs__hash.html#a0037382aac15aa98e7769f3a1e705ec2">cfs_hash::hs_buckets</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hash buckets-table </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00218">218</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00491">cfs_hash_bd_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00563">cfs_hash_bd_index_set()</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l01079">cfs_hash_destroy()</a>, <a class="el" href="hash_8c_source.html#l00814">cfs_hash_dual_bd_get()</a>, <a class="el" href="hash_8c_source.html#l02050">cfs_hash_full_bkts()</a>, and <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>.</p>

</div>
</div>
<a class="anchor" id="a6468533a211d7ba8dbe065344b26cb20"></a><!-- doxytag: member="cfs_hash::hs_count" ref="a6468533a211d7ba8dbe065344b26cb20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="structcfs__hash.html#a6468533a211d7ba8dbe065344b26cb20">cfs_hash::hs_count</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>total number of items on this hash-table </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00220">220</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00790">__cfs_hash_theta()</a>, <a class="el" href="hash_8c_source.html#l00529">cfs_hash_bd_add_locked()</a>, <a class="el" href="hash_8c_source.html#l00549">cfs_hash_bd_del_locked()</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l01079">cfs_hash_destroy()</a>, <a class="el" href="hash_8c_source.html#l01393">cfs_hash_for_each_exit()</a>, <a class="el" href="hash_8c_source.html#l01193">cfs_hash_rehash_inline()</a>, <a class="el" href="hash_8c_source.html#l01545">cfs_hash_size_get()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02361">ldlm_export_cancel_blocked_locks()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02401">ldlm_export_cancel_locks()</a>, <a class="el" href="genops_8c_source.html#l01778">obd_stale_export_put()</a>, and <a class="el" href="qmt__pool_8c_source.html#l00145">qpi_state_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a0708aef0dadfbea4f8eda2255ea586a0"></a><!-- doxytag: member="cfs_hash::hs_cur_bits" ref="a0708aef0dadfbea4f8eda2255ea586a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#a0708aef0dadfbea4f8eda2255ea586a0">cfs_hash::hs_cur_bits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>current hash bits </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00230">230</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00790">__cfs_hash_theta()</a>, <a class="el" href="hash_8c_source.html#l00506">cfs_hash_bd_dep_record()</a>, <a class="el" href="hash_8c_source.html#l00479">cfs_hash_bd_from_key()</a>, <a class="el" href="hash_8c_source.html#l00491">cfs_hash_bd_get()</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, <a class="el" href="hash_8c_source.html#l00814">cfs_hash_dual_bd_get()</a>, <a class="el" href="hash_8c_source.html#l02050">cfs_hash_full_bkts()</a>, <a class="el" href="hash_8c_source.html#l02062">cfs_hash_full_nbkt()</a>, <a class="el" href="hash_8c_source.html#l01156">cfs_hash_rehash_bits()</a>, <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>, and <a class="el" href="vvp__dev_8c_source.html#l00586">vvp_pgcache_start()</a>.</p>

</div>
</div>
<a class="anchor" id="aecc3bc4853e3dc9a05c1101303105ab3"></a><!-- doxytag: member="cfs_hash::hs_exiting" ref="aecc3bc4853e3dc9a05c1101303105ab3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#aecc3bc4853e3dc9a05c1101303105ab3">cfs_hash::hs_exiting</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hash-table is dying </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00228">228</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01079">cfs_hash_destroy()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00428">cfs_hash_is_exiting()</a>.</p>

</div>
</div>
<a class="anchor" id="ae8f5538ba428a5d1bfcbdedf2670675b"></a><!-- doxytag: member="cfs_hash::hs_extra_bytes" ref="ae8f5538ba428a5d1bfcbdedf2670675b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 <a class="el" href="structcfs__hash.html#ae8f5538ba428a5d1bfcbdedf2670675b">cfs_hash::hs_extra_bytes</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># of extra-bytes for bucket, for user saving extended attributes </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00224">224</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00571">cfs_hash_bd_extra_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00446">cfs_hash_bkt_size()</a>, and <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>.</p>

</div>
</div>
<a class="anchor" id="aa124601989b8b1fa7638f2ae3bdb1a4d"></a><!-- doxytag: member="cfs_hash::hs_flags" ref="aa124601989b8b1fa7638f2ae3bdb1a4d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 <a class="el" href="structcfs__hash.html#aa124601989b8b1fa7638f2ae3bdb1a4d">cfs_hash::hs_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hash flags, see cfs_hash_tag for detail </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00222">222</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00365">cfs_hash_with_add_tail()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00410">cfs_hash_with_assert_empty()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00380">cfs_hash_with_bigname()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00386">cfs_hash_with_counter()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00416">cfs_hash_with_depth()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00422">cfs_hash_with_nblk_change()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00344">cfs_hash_with_no_bktlock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00371">cfs_hash_with_no_itemref()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00337">cfs_hash_with_no_lock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00392">cfs_hash_with_rehash()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00398">cfs_hash_with_rehash_key()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00351">cfs_hash_with_rw_bktlock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00404">cfs_hash_with_shrink()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00358">cfs_hash_with_spin_bktlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ecac20b030cab05599bcbc426fa12ff"></a><!-- doxytag: member="cfs_hash::hs_hops" ref="a8ecac20b030cab05599bcbc426fa12ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__hlist__ops.html">cfs_hash_hlist_ops</a>* <a class="el" href="structcfs__hash.html#a8ecac20b030cab05599bcbc426fa12ff">cfs_hash::hs_hops</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hash list operations </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00216">216</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00529">cfs_hash_bd_add_locked()</a>, <a class="el" href="hash_8c_source.html#l00549">cfs_hash_bd_del_locked()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00626">cfs_hash_bd_hhead()</a>, <a class="el" href="hash_8c_source.html#l00570">cfs_hash_bd_move_locked()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00446">cfs_hash_bkt_size()</a>, and <a class="el" href="hash_8c_source.html#l00467">cfs_hash_hlist_setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a066dc687739a76cc3a7325c54dd22be2"></a><!-- doxytag: member="cfs_hash::hs_iterating" ref="a066dc687739a76cc3a7325c54dd22be2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#a066dc687739a76cc3a7325c54dd22be2">cfs_hash::hs_iterating</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>wants to iterate </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00226">226</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01367">cfs_hash_for_each_enter()</a>, <a class="el" href="hash_8c_source.html#l01393">cfs_hash_for_each_exit()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00440">cfs_hash_is_iterating()</a>.</p>

</div>
</div>
<a class="anchor" id="a32503470d27f50a830cdaeda3ae6adbc"></a><!-- doxytag: member="cfs_hash::hs_iterators" ref="a32503470d27f50a830cdaeda3ae6adbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structcfs__hash.html#a32503470d27f50a830cdaeda3ae6adbc">cfs_hash::hs_iterators</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p># of iterators (caller of cfs_hash_for_each_*) </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00246">246</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01367">cfs_hash_for_each_enter()</a>, <a class="el" href="hash_8c_source.html#l01393">cfs_hash_for_each_exit()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00440">cfs_hash_is_iterating()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a6786b1f4bad4c8487a445464bf2b64"></a><!-- doxytag: member="cfs_hash::hs_lock" ref="a8a6786b1f4bad4c8487a445464bf2b64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unioncfs__hash__lock.html">cfs_hash_lock</a> <a class="el" href="structcfs__hash.html#a8a6786b1f4bad4c8487a445464bf2b64">cfs_hash::hs_lock</a><code> [write]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>serialize with rehash, or serialize all operations if the hash-table has CFS_HASH_NO_BKTLOCK </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00210">210</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00522">cfs_hash_dec_and_lock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00512">cfs_hash_lock()</a>, <a class="el" href="hash_8c_source.html#l00210">cfs_hash_lock_setup()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00517">cfs_hash_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a35f27e7c4c3c28aa332a7e9727b9b370"></a><!-- doxytag: member="cfs_hash::hs_lops" ref="a35f27e7c4c3c28aa332a7e9727b9b370" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__lock__ops.html">cfs_hash_lock_ops</a>* <a class="el" href="structcfs__hash.html#a35f27e7c4c3c28aa332a7e9727b9b370">cfs_hash::hs_lops</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hash lock operations </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00214">214</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00529">cfs_hash_bd_lock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00535">cfs_hash_bd_unlock()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00512">cfs_hash_lock()</a>, <a class="el" href="hash_8c_source.html#l00210">cfs_hash_lock_setup()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00517">cfs_hash_unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c32479538c0b4195ff8b63df9ee652b"></a><!-- doxytag: member="cfs_hash::hs_max_bits" ref="a2c32479538c0b4195ff8b63df9ee652b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#a2c32479538c0b4195ff8b63df9ee652b">cfs_hash::hs_max_bits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>max hash bits </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00234">234</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, and <a class="el" href="hash_8c_source.html#l01156">cfs_hash_rehash_bits()</a>.</p>

</div>
</div>
<a class="anchor" id="a244197b47c9b68b72738849c33a26977"></a><!-- doxytag: member="cfs_hash::hs_max_theta" ref="a244197b47c9b68b72738849c33a26977" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 <a class="el" href="structcfs__hash.html#a244197b47c9b68b72738849c33a26977">cfs_hash::hs_max_theta</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>resize max threshold </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00242">242</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00797">__cfs_hash_set_theta()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, and <a class="el" href="hash_8c_source.html#l01156">cfs_hash_rehash_bits()</a>.</p>

</div>
</div>
<a class="anchor" id="a5fc9fa938616d397812796ef3ab93bc3"></a><!-- doxytag: member="cfs_hash::hs_min_bits" ref="a5fc9fa938616d397812796ef3ab93bc3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#a5fc9fa938616d397812796ef3ab93bc3">cfs_hash::hs_min_bits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>min hash bits </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00232">232</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, and <a class="el" href="hash_8c_source.html#l01156">cfs_hash_rehash_bits()</a>.</p>

</div>
</div>
<a class="anchor" id="a20d7e9ee877b7ffe878c78d369e7a5a4"></a><!-- doxytag: member="cfs_hash::hs_min_theta" ref="a20d7e9ee877b7ffe878c78d369e7a5a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 <a class="el" href="structcfs__hash.html#a20d7e9ee877b7ffe878c78d369e7a5a4">cfs_hash::hs_min_theta</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>resize min threshold </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00240">240</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="libcfs__hash_8h_source.html#l00797">__cfs_hash_set_theta()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, <a class="el" href="hash_8c_source.html#l01156">cfs_hash_rehash_bits()</a>, and <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>.</p>

</div>
</div>
<a class="anchor" id="a08d0891326130dcdfbd39d6d85aa3dd3"></a><!-- doxytag: member="cfs_hash::hs_name" ref="a08d0891326130dcdfbd39d6d85aa3dd3" args="[0]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="structcfs__hash.html#a08d0891326130dcdfbd39d6d85aa3dd3">cfs_hash::hs_name</a>[0]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>name of htable </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00268">268</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, <a class="el" href="hash_8c_source.html#l01079">cfs_hash_destroy()</a>, <a class="el" href="hash_8c_source.html#l01698">cfs_hash_for_each_empty()</a>, <a class="el" href="hash_8c_source.html#l01799">cfs_hash_rehash_cancel_locked()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00994">ldlm_ns_name()</a>, and <a class="el" href="lquota__entry_8c_source.html#l00313">lqe_locate()</a>.</p>

</div>
</div>
<a class="anchor" id="a142d72c3de915e025c2c73e902b1deb7"></a><!-- doxytag: member="cfs_hash::hs_ops" ref="a142d72c3de915e025c2c73e902b1deb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__ops.html">cfs_hash_ops</a>* <a class="el" href="structcfs__hash.html#a142d72c3de915e025c2c73e902b1deb7">cfs_hash::hs_ops</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hash operations </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00212">212</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00506">cfs_hash_exit()</a>, <a class="el" href="hash_8c_source.html#l01698">cfs_hash_for_each_empty()</a>, <a class="el" href="hash_8c_source.html#l01663">cfs_hash_for_each_nolock()</a>, <a class="el" href="hash_8c_source.html#l01569">cfs_hash_for_each_relax()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00488">cfs_hash_get()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00454">cfs_hash_id()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00460">cfs_hash_key()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00476">cfs_hash_keycmp()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00466">cfs_hash_keycpy()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00482">cfs_hash_object()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00500">cfs_hash_put()</a>, and <a class="el" href="libcfs__hash_8h_source.html#l00494">cfs_hash_put_locked()</a>.</p>

</div>
</div>
<a class="anchor" id="a1521cb8e379605aaf330a824de2f6a0b"></a><!-- doxytag: member="cfs_hash::hs_refcount" ref="a1521cb8e379605aaf330a824de2f6a0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="structcfs__hash.html#a1521cb8e379605aaf330a824de2f6a0b">cfs_hash::hs_refcount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>refcount on this hash table </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00250">250</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l01140">cfs_hash_getref()</a>, and <a class="el" href="hash_8c_source.html#l01148">cfs_hash_putref()</a>.</p>

</div>
</div>
<a class="anchor" id="afa9cc26fb1cdf53bf93306a646fc4a12"></a><!-- doxytag: member="cfs_hash::hs_rehash_bits" ref="afa9cc26fb1cdf53bf93306a646fc4a12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u8 <a class="el" href="structcfs__hash.html#afa9cc26fb1cdf53bf93306a646fc4a12">cfs_hash::hs_rehash_bits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bits for rehash </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00236">236</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00479">cfs_hash_bd_from_key()</a>, <a class="el" href="hash_8c_source.html#l00491">cfs_hash_bd_get()</a>, <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l00814">cfs_hash_dual_bd_get()</a>, <a class="el" href="hash_8c_source.html#l02050">cfs_hash_full_bkts()</a>, <a class="el" href="hash_8c_source.html#l02062">cfs_hash_full_nbkt()</a>, <a class="el" href="libcfs__hash_8h_source.html#l00434">cfs_hash_is_rehashing()</a>, <a class="el" href="hash_8c_source.html#l01835">cfs_hash_rehash()</a>, <a class="el" href="hash_8c_source.html#l01864">cfs_hash_rehash_bd()</a>, <a class="el" href="hash_8c_source.html#l01799">cfs_hash_rehash_cancel_locked()</a>, and <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>.</p>

</div>
</div>
<a class="anchor" id="a150c977fb93e52fc252f0095440e8ef7"></a><!-- doxytag: member="cfs_hash::hs_rehash_buckets" ref="a150c977fb93e52fc252f0095440e8ef7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__hash__bucket.html">cfs_hash_bucket</a>** <a class="el" href="structcfs__hash.html#a150c977fb93e52fc252f0095440e8ef7">cfs_hash::hs_rehash_buckets</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>rehash buckets-table </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00252">252</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l00491">cfs_hash_bd_get()</a>, <a class="el" href="hash_8c_source.html#l01079">cfs_hash_destroy()</a>, <a class="el" href="hash_8c_source.html#l00814">cfs_hash_dual_bd_get()</a>, <a class="el" href="hash_8c_source.html#l02050">cfs_hash_full_bkts()</a>, <a class="el" href="hash_8c_source.html#l02062">cfs_hash_full_nbkt()</a>, <a class="el" href="hash_8c_source.html#l01864">cfs_hash_rehash_bd()</a>, and <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>.</p>

</div>
</div>
<a class="anchor" id="aa566defe2de2633a747200ff9eb4c58e"></a><!-- doxytag: member="cfs_hash::hs_rehash_count" ref="aa566defe2de2633a747200ff9eb4c58e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structcfs__hash.html#aa566defe2de2633a747200ff9eb4c58e">cfs_hash::hs_rehash_count</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>resize count </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00244">244</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l02073">cfs_hash_debug_str()</a>, and <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>.</p>

</div>
</div>
<a class="anchor" id="a3869f462a16492f575df4d84e4497c4c"></a><!-- doxytag: member="cfs_hash::hs_rehash_wi" ref="a3869f462a16492f575df4d84e4497c4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfs__workitem.html">cfs_workitem</a> <a class="el" href="structcfs__hash.html#a3869f462a16492f575df4d84e4497c4c">cfs_hash::hs_rehash_wi</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>rehash workitem </p>

<p>Definition at line <a class="el" href="libcfs__hash_8h_source.html#l00248">248</a> of file <a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a>.</p>

<p>Referenced by <a class="el" href="hash_8c_source.html#l01003">cfs_hash_create()</a>, <a class="el" href="hash_8c_source.html#l01835">cfs_hash_rehash()</a>, <a class="el" href="hash_8c_source.html#l01799">cfs_hash_rehash_cancel_locked()</a>, and <a class="el" href="hash_8c_source.html#l01894">cfs_hash_rehash_worker()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>libcfs/include/libcfs/<a class="el" href="libcfs__hash_8h_source.html">libcfs_hash.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:52 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
