<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/mdt/mdt_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/mdt/mdt_internal.h File Reference</h1><code>#include &lt;<a class="el" href="upcall__cache_8h_source.html">upcall_cache.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__disk_8h_source.html">lustre_disk.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lu__target_8h_source.html">lu_target.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="md__object_8h_source.html">md_object.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fid_8h_source.html">lustre_fid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__fld_8h_source.html">lustre_fld.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__req__layout_8h_source.html">lustre_req_layout.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__sec_8h_source.html">lustre_sec.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idmap_8h_source.html">lustre_idmap.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__eacl_8h_source.html">lustre_eacl.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__quota_8h_source.html">lustre_quota.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__linkea_8h_source.html">lustre_linkea.h</a>&gt;</code><br/>

<p><a href="mdt__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdt__file__data.html">mdt_file_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoordinator.html">coordinator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdt__device.html">mdt_device</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdt__object.html">mdt_object</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdt__reint__record.html">mdt_reint_record</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmdt__thread__info.html">mdt_thread_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcdt__req__progress.html">cdt_req_progress</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcdt__agent__req.html">cdt_agent_req</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhsm__agent.html">hsm_agent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a09681740ce3e8191ca7ef36244f6ec18">CDT_NONBLOCKING_RESTORE</a>&nbsp;&nbsp;&nbsp;(1ULL &lt;&lt; 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a47d2b2147cf20688666bb8e0f70c2417">CDT_NORETRY_ACTION</a>&nbsp;&nbsp;&nbsp;(1ULL &lt;&lt; 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a569ec84a820aab8d36a9a10b406f6882">CDT_POLICY_LAST</a>&nbsp;&nbsp;&nbsp;CDT_NORETRY_ACTION</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acdb8e609a43b34e8edd1ad535fc00160">CDT_POLICY_SHIFT_COUNT</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#adfc493006fb74f789769a2c87f02e995">CDT_POLICY_ALL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa35d309444d8ce31c678bb865fc9f700">CDT_DEFAULT_POLICY</a>&nbsp;&nbsp;&nbsp;CDT_NORETRY_ACTION</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ad8c73fc548da910d7fdabeaa4c035a2a">MDT_FL_CFGLOG</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a4bd4fbcafbf48043a70cb9812c987fcd">MDT_FL_SYNCED</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa71e0d15b23065f30bb250ce55022a4a">MDT_SERVICE_WATCHDOG_FACTOR</a>&nbsp;&nbsp;&nbsp;(2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abc821d3174a1769bb2d7d21203305200">MDT_COS_DEFAULT</a>&nbsp;&nbsp;&nbsp;(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6568453f4c7515ac528872bbffe83141">MDT_EREMOTE_OPEN</a>&nbsp;&nbsp;&nbsp;(EREMOTE + 1024)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8fd3d4eb3d2584d96379fd8e70146682">MDT_IDENTITY_UPCALL_PATH</a>&nbsp;&nbsp;&nbsp;&quot;/usr/sbin/l_getidentity&quot;</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a496f16f5aa7a48e02e6a71582d58bdc9">mdt_reconstruct_t</a> )(struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8">cdt_states</a> { <br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8aa9bfd061bad551c4bf3c0a7ee0df2d43">CDT_STOPPED</a> =  0, 
<a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8a717dbf2eb28174929de035be73f8fe12">CDT_INIT</a>, 
<a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8a31adbd616a66d8f3c1ff0f28b6f2c804">CDT_RUNNING</a>, 
<a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8a4e8ce3e0fc156b560aff2d2843a0e522">CDT_DISABLE</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8a180ddb2f698471c553bad07f5889891c">CDT_STOPPING</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a5aeea5ab146fe4ff8c17cbf3a1539ecc">mdt_object_flags</a> { <a class="el" href="mdt__internal_8h.html#a5aeea5ab146fe4ff8c17cbf3a1539ecca50bdb96ed7652e6e9b522d36f1c228b7">MOF_LOV_CREATED</a> =  1 &lt;&lt; 0
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618ae11d5b6f27f6264c001a131d7608384d">MDT_LH_PARENT</a>, 
<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618a27bd53591b13d96022077939d6174a86">MDT_LH_CHILD</a>, 
<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618a54743deed75920df561c693799e55c77">MDT_LH_OLD</a>, 
<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618a9a2097894436f47df5beb2aedeb23975">MDT_LH_LAYOUT</a> =  MDT_LH_OLD, 
<br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618a43bd5176b202d6994a46d127565d1c78">MDT_LH_NEW</a>, 
<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618aac06f9b36dc94b78c9ca8f5cabe73e25">MDT_LH_RMT</a>, 
<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618ab2545330b5fded5e79d9eb45ff241f24">MDT_LH_LOCAL</a>, 
<a class="el" href="mdt__internal_8h.html#a5bea799269f02f5b3395d6b2c068b618a7c98d649bd40bba7807cf771b26a2bda">MDT_LH_NR</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="mdt__internal_8h.html#a15b3bbe041870ee299f7e042b0305e3ca54be18c5e5cae5d8ed14922e865593d3">MDT_LOCAL_LOCK</a>, 
<a class="el" href="mdt__internal_8h.html#a15b3bbe041870ee299f7e042b0305e3cab44e46f0f0d7bef7d13d33a4fabd5e0b">MDT_CROSS_LOCK</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ad1e5e73679b48e5f25508959285dcd6c">mdt_reint_flag</a> { <a class="el" href="mdt__internal_8h.html#ad1e5e73679b48e5f25508959285dcd6cac3291baf61077bd00f14f8bf514b1fea">MRF_OPEN_TRUNC</a> =  1 &lt;&lt; 0
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abb502651906cdfbdcdd17ca91bb10ec6">mdt_name_flags</a> { <a class="el" href="mdt__internal_8h.html#abb502651906cdfbdcdd17ca91bb10ec6a2226b01da8350d6a8c5d075d7de551d6">MNF_FIX_ANON</a> =  1
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea78c9ba91cca0339d465d2a096fe99124">LPROC_MDT_OPEN</a> =  0, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aeab16bbb4aea528145605c18ea12020291">LPROC_MDT_CLOSE</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea806492b9f44725a26b29155ca17b11d3">LPROC_MDT_MKNOD</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aeac57ea6430a462ea2173cc47cab9fe78c">LPROC_MDT_LINK</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea956ef4922b28789771005b2d18808558">LPROC_MDT_UNLINK</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea32bf861a05ff10ab80e324edabf5e210">LPROC_MDT_MKDIR</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aeacf87e02f9bc715ac7582f0b0d0ea95c2">LPROC_MDT_RMDIR</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea7b3939c43230a63913625d28ed08d709">LPROC_MDT_RENAME</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea2f6f32771525e1b46c9962de73171b8e">LPROC_MDT_GETATTR</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aeac00a65c6676aa28c78e8d05888e157de">LPROC_MDT_SETATTR</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aeab81e1ed8393484f80962dce309d0b5a6">LPROC_MDT_GETXATTR</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea88dfb86a90329bf4133c8da88e13739a">LPROC_MDT_SETXATTR</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aead2cc8018a6b014d15d5e93311a85e581">LPROC_MDT_STATFS</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea2d2474ee0aa189009b4642a3496eef8b">LPROC_MDT_SYNC</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea99967b100cc18aa9b35fddf6a9356d8f">LPROC_MDT_SAMEDIR_RENAME</a>, 
<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aea69ae6ec6aab6c541b2957facc8091f7e">LPROC_MDT_CROSSDIR_RENAME</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="mdt__internal_8h.html#ae62fccd8cea8f216b24ba625d404c4aeaefd84425cab8613da5b1708d5a349d83">LPROC_MDT_LAST</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ad3da0e9c02b5a632a50565b0b174a006">mdt_th_info</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <br class="typebreak"/>
<a class="el" href="structmd__device__operations.html">md_device_operations</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab2aabfbb07a40746a580c37008e7c3c8">mdt_child_ops</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *m)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">restore handle slab cache  <a href="#ab2aabfbb07a40746a580c37008e7c3c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmd__object.html">md_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8ce0a83537a7a7ac62e482fde2ad57de">mdt_object_child</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa88ec9a6de32d40d173b570944c80479">mdt_info_req</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a0b346a8588b106e3a65823fa348f506e">mdt_conn_flags</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a361c3447fd11f287aaf242e34fc7274c">mdt_object_get</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aeff83b3a74cb894165753ad356445fba">mdt_object_put</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a95468447a934677674ed9125c2f7ef25">mdt_object_exists</a> (const struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a57b23a36be302cde86879d15aec5f813">mdt_object_remote</a> (const struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a65251198e11b74392c721e2f43538037">mdt_object_fid</a> (const struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlu__site.html">lu_site</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a243d4dedf4cefe52a73c5d955a48fa2b">mdt_lu_site</a> (const struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structseq__server__site.html">seq_server_site</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a47167976d462dfd24ac59e1c29213712">mdt_seq_site</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a5817c2197f580ba1f0d7dfdd27261102">mdt_export_evict</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abe13e690dbbbac8abbbce602109de5c1">mdt_is_dne_client</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6c323f778770da9f19f83069e1d0940f">mdt_is_striped_client</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a647fa716eeb2bad0062c436a7fa086d9">mdt_get_disposition</a> (struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> op_flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abc91f6ad8fc0ec7541491e8f4ff11c55">mdt_set_disposition</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> op_flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a1b25a49327bb44e717794314a04d9cbb">mdt_clear_disposition</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *rep, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> op_flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#adc3eaeaa3a5057c5f67c31f89a121128">mdt_lock_pdo_init</a> (struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> lock_mode, const struct <a class="el" href="structlu__name.html">lu_name</a> *lname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a057dbab8fe1bb026cb4619cf634b6e30">mdt_lock_reg_init</a> (struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> lm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aad412a994bc4e55603124a3a761536f4">mdt_lock_setup</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a1b24c1ea4d6c0fe92e1f8c9b23b429f7">mdt_check_resent_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#adef534a5ff4b85b621d4dc668c4a1d73">mdt_object_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ibits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ae9934615f2114e5f95171bdea12e04cf">mdt_reint_object_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ibits, bool cos_incompat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa6deff4a461ef2babfa3d8f21b4317e2">mdt_object_lock_try</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ibits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6a1a5e5409f608767f4f4dee46789a97">mdt_reint_object_lock_try</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ibits, bool cos_incompat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a37169bfa7f9b7a745a0b8075035805a8">mdt_object_unlock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh, int decref)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock mdt object.  <a href="#a37169bfa7f9b7a745a0b8075035805a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ae836550d7efec7a80413863897a02f76">mdt_object_new</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a031c909859c56b7dce25d5bf98fa9572">mdt_object_find</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structmdt__device.html">mdt_device</a> *, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8612b4f168534c61cbb45e787059f8c8">mdt_object_find_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2b434fe8a7394fd5cc2e91fa62540b2c">mdt_object_unlock_put</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__object.html">mdt_object</a> *, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *, int decref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3f0d9433130587fdde05657ee8bd2868">mdt_client_compatibility</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acbf7a7fa2fb5b6900518fd9b3337ec85">mdt_remote_object_lock</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ibits, bool nonblock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8e933bfb72bd453a9b003b34fb6b8801">mdt_name_unpack</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct <a class="el" href="structreq__msg__field.html">req_msg_field</a> *field, struct <a class="el" href="structlu__name.html">lu_name</a> *ln, enum <a class="el" href="mdt__internal_8h.html#abb502651906cdfbdcdd17ca91bb10ec6">mdt_name_flags</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a95035cb46803b6000f529fceaabdc9b3">mdt_close_unpack</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a56ba543c1c6a06aaf51de1a9e95034a0">mdt_reint_unpack</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, __u32 <a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa3c3a2780dd8bb80b8214e6ceb52c252">mdt_reint_rec</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a498f298746784b9da4b02f5c28b46ec3">mdt_pack_attr2body</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__body.html">mdt_body</a> *b, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab192cb2c8527a2b4e21db9b76bd77a11">mdt_getxattr</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8167726a3e433b201011c260e99d9d13">mdt_reint_setxattr</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ae6b6dc2598d9874731adb97c86eb3ce1">mdt_lock_handle_init</a> (struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab6ef20f272cabc8315a7f07e4416a37c">mdt_lock_handle_fini</a> (struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a285e428c5988c3f18d915d9d70275939">mdt_reconstruct</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a592adbe9f6110a81d57fd8fb6a18030e">mdt_reconstruct_generic</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac3db3f215fff161c7d1276d6217b1bfc">target_recovery_fini</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8c8ebefb0e9c977840de5620dfd7e655">target_recovery_init</a> (struct <a class="el" href="structlu__target.html">lu_target</a> *lut, <a class="el" href="group__net.html#gaafdde121d699c66fbef23b0a702d1cb0">svc_handler_t</a> handler)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab0e4ff03054b9397273315a46c5dd8a5">mdt_fs_setup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structmdt__device.html">mdt_device</a> *, struct <a class="el" href="structobd__device.html">obd_device</a> *, struct lustre_sb_info *lsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8812ec23f8ad6f9905a189eff9e8bba7">mdt_fs_cleanup</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structmdt__device.html">mdt_device</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac719aa88d3aa3d3649e3d2ec1f647392">mdt_export_stats_init</a> (struct <a class="el" href="structobd__device.html">obd_device</a> *obd, struct <a class="el" href="structobd__export.html">obd_export</a> *exp, void *client_nid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize MDT per-export statistics.  <a href="#ac719aa88d3aa3d3649e3d2ec1f647392"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aebde50bfdeee2650c27a2fd503066bf7">mdt_lock_new_child</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *child_lockh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2e9a73428366d11ee7e5ee7a007e1fa7">mdt_mfd_set_mode</a> (struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a506abc8479913d2fcbf68e54b913c98e">mdt_reint_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a892f5b9d921e00fc8a251aef79024224">mdt_handle2mfd</a> (struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *med, const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *handle, bool is_replay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a96fb16cba972a4017696b683ac3d5076">mdt_get_info</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a100b5c15f7d5b5e9791ffb04300047db">mdt_attr_get_complex</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abae6fa57578da1649aa1476327700059">mdt_big_xattr_get</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a1f2e82b00a1396a71d09c6f73d8d4239">mdt_stripe_get</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#afd41f8b1bef4cb5b2fb82f28acd41e9f">mdt_write_get</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#adf09035bc4105586e896607ce3ab1d24">mdt_write_put</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aff1dac946c86bda1fb55a7b80e5b4553">mdt_write_read</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2662891d8f9509efdb737a0b907811fd">mdt_mfd_new</a> (const struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *med)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aad91e98e3cf3d4feb3e9d5f6b47f4665">mdt_mfd_close</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#afe26bd03b435d83a095c9750807c487b">mdt_mfd_free</a> (struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *mfd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a638de898659fa7ca737fefe8efa00cdf">mdt_close</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa826d89f4788c4be92889ce7a6de2973">mdt_add_dirty_flag</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check HSM flags and add HS_DIRTY flag if relevant.  <a href="#aa826d89f4788c4be92889ce7a6de2973"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a35f1821683f6168ec071e531fbc523b1">mdt_fix_reply</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6b3c82cb520524b4b63723f1d5081ec1">mdt_handle_last_unlink</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__object.html">mdt_object</a> *, const struct <a class="el" href="structmd__attr.html">md_attr</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aaf79e2e47246bdd795207bffb7b842db">mdt_reconstruct_open</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab8e075640227df382e73a221e8c41122">mdt_buf</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, void *area, ssize_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a60654798ad7ed50f1fcdc87ce26452f6">mdt_buf_const</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const void *area, ssize_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa2594d87b82756d41efe2fe5c226cddd">mdt_dump_lmm</a> (int level, const struct lov_mds_md *lmm, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> valid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aaafe08e2d1a45f5a92a0a5c1f5294eef">mdt_dump_lmv</a> (unsigned int level, const union <a class="el" href="unionlmv__mds__md.html">lmv_mds_md</a> *lmv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a5693051af3a282b1e496aae51d16837f">allow_client_chgrp</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structlu__ucred.html">lu_ucred</a> *uc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether allow the client to set supplementary group IDs or not.  <a href="#a5693051af3a282b1e496aae51d16837f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a4cf10913df89d679eace351ec68aab23">mdt_check_ucred</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a22786afd0c8add0ec55c11f99d67fb41">mdt_init_ucred</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__body.html">mdt_body</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a29df986c2d4c43f69ad2076b4b436191">mdt_init_ucred_intent_getattr</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__body.html">mdt_body</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ae48883855292e73ca9f84c7ad99b172a">mdt_init_ucred_reint</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a7cea479ef31507924ab23c0eb4e0f317">mdt_exit_ucred</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aba0ce4958d0fa3402b3a26ff34118d16">mdt_version_get_check</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__object.html">mdt_object</a> *, int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get version from disk and check it, no save in reply.  <a href="#aba0ce4958d0fa3402b3a26ff34118d16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a75586850e9d1961dfc1e2fdceab17520">mdt_version_get_save</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__object.html">mdt_object</a> *, int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get version from disk and save in reply buffer.  <a href="#a75586850e9d1961dfc1e2fdceab17520"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a437fb3d020ddb61c2c180b492d64303c">mdt_version_get_check_save</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__object.html">mdt_object</a> *, int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get version from disk and check if recovery or just save.  <a href="#a437fb3d020ddb61c2c180b492d64303c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aec2373a7c167b8d6a6c150cfb76fe5ef">mdt_thread_info_init</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa879dcf286a75988acf8bac33f42dcb5">mdt_thread_info_fini</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a60e67e7a7d074e6db83eaa77815db518">tsi2mdt_info</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a43a0f5056d05368cb3f3d89442172bcd">mdt_hsm_attr_set</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *obj, const struct <a class="el" href="structmd__hsm.html">md_hsm</a> *mh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update on-disk HSM attributes.  <a href="#a43a0f5056d05368cb3f3d89442172bcd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a73ffd45c980ee324bea1002e238d4e89">mdt_remote_blocking_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *desc, void *data, int flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a88569336fb1cf970703e6f7a50bfe8a5">mdt_links_read</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *mdt_obj, struct <a class="el" href="structlinkea__data.html">linkea_data</a> *ldata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6faf93bafd983471e23df01bffcf72ca">mdt_close_internal</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structmdt__body.html">mdt_body</a> *repbody)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a0ce3a0f26a51938a268e8890fb646c03">mdt_init_idmap</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a98f65e5b57967f8659c8cc358c74e360">mdt_cleanup_idmap</a> (struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acb37abda178d39c1d4b9618162ce5e78">mdt_handle_idmap</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#afc0fda5078eab3eaf0bde9a8117755cb">ptlrpc_user_desc_do_idmap</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *, struct <a class="el" href="structptlrpc__user__desc.html">ptlrpc_user_desc</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a36e62b3daf4d7c031440bed1ae1d853b">mdt_body_reverse_idmap</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__body.html">mdt_body</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a7f4bfd97b654cb9f6ed0db86032ae48c">mdt_remote_perm_reverse_idmap</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *, struct <a class="el" href="structmdt__remote__perm.html">mdt_remote_perm</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ad171b5a23278bc5fc0f88ba7bbba8608">mdt_fix_attr_ucred</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, __u32)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a87a26f9a2e872479fedd2bad5e2a4d40">mdt_obj</a> (struct <a class="el" href="structlu__object.html">lu_object</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a34ecb36575beffe159b83e18707a2baa">mdt_obj2dt</a> (struct <a class="el" href="structmdt__object.html">mdt_object</a> *mo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmd__identity.html">md_identity</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a771bb82e3c47a5162ec53653b2ce6350">mdt_identity_get</a> (struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *, __u32)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a476670fa7450e27f33c8e3a2a3a87f6f">mdt_identity_put</a> (struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *, struct <a class="el" href="structmd__identity.html">md_identity</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6d95ec6198e52fdd0aadc8073f926ac6">mdt_flush_identity</a> (struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac195a5c0a97c7b7825d69a38a10ffedd">mdt_identity_get_perm</a> (struct <a class="el" href="structmd__identity.html">md_identity</a> *, __u32, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3c30ab63b2648c623544c5e250d954db">mdt_pack_remote_perm</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *, struct <a class="el" href="structmdt__object.html">mdt_object</a> *, void *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3f116e637fd5c35d46878265cc5a464c">mdt_req_from_lrd</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *trd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abaa01318221c7e8909a7eb09677fee88">mdt_hsm_state_get</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the current HSM flags, archive id and undergoing HSM requests for the fid provided in RPC body.  <a href="#abaa01318221c7e8909a7eb09677fee88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a7c5813c8ac14de83cb3be92368223e23">mdt_hsm_state_set</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change HSM state and archive number of a file.  <a href="#a7c5813c8ac14de83cb3be92368223e23"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a60d2d4b01f96b6bc65db4e5b0a32ec85">mdt_hsm_action</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve undergoing HSM requests for the fid provided in RPC body.  <a href="#a60d2d4b01f96b6bc65db4e5b0a32ec85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a4c8b54b66bd9aa8b7b4f3999ee5e333d">mdt_hsm_progress</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extract information coming from a copytool and asks <a class="el" href="structcoordinator.html">coordinator</a> to update a request status depending on the update content.  <a href="#a4c8b54b66bd9aa8b7b4f3999ee5e333d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a936691a61af675c0aaa1a1bbcfddf51f">mdt_hsm_ct_register</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a4d6f5918c0214d00ae62b7cb5943320b">mdt_hsm_ct_unregister</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a47b649f2238bf0991480cefcd5f232ea">mdt_hsm_request</a> (struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *tsi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process the HSM actions described in a struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a>.  <a href="#a47b649f2238bf0991480cefcd5f232ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a259742e1a3db858106a64c43fcfa6ef6">dump_llog_agent_req_rec</a> (const char *prefix, const struct <a class="el" href="structllog__agent__req__rec.html">llog_agent_req_rec</a> *larr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#af95cfee931802ac1101ce1461029e546">cdt_llog_process</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, <a class="el" href="obd__class_8h.html#a6753dc16f88d31c1a4fdd28a48dc1cf9">llog_cb_t</a> cb, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a9bbc9be6ac2c422cb313832af653a691">mdt_agent_record_add</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> compound_id, __u32 archive_id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add an entry in agent llog  <a href="#a9bbc9be6ac2c422cb313832af653a691"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a980845ce8e872b6946d082f8af260a71">mdt_agent_record_update</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *cookies, int cookies_count, enum <a class="el" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a> <a class="el" href="lustre__rsync_8c.html#a55591f17a60f597b63f070969c54fd6c">status</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update an entry in agent llog  <a href="#a980845ce8e872b6946d082f8af260a71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a20bcec359b4b9d1c529f6b2b3388c30f">mdt_hsm_agent_register</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, int nr_archives, __u32 *archive_num)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a copy tool  <a href="#a20bcec359b4b9d1c529f6b2b3388c30f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aeedcafd0c9362f67d68b4a6ccf0450e9">mdt_hsm_agent_register_mask</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, __u32 archive_mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a copy tool  <a href="#aeedcafd0c9362f67d68b4a6ccf0450e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a809a32bc4503b86a8e45b9393de5c241">mdt_hsm_agent_unregister</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unregister a copy tool  <a href="#a809a32bc4503b86a8e45b9393de5c241"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2590cfa39d2821765fd81a8e2cddd35f">mdt_hsm_agent_update_statistics</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, int succ_rq, int fail_rq, int new_rq, const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update agent statistics  <a href="#a2590cfa39d2821765fd81a8e2cddd35f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a9d13dc794fa8f8885ee9c3b098675dd1">mdt_hsm_find_best_agent</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, __u32 archive, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find the best agent  <a href="#a9d13dc794fa8f8885ee9c3b098675dd1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab0c3f5ec4cb4656ab69af45c1484b6ee">mdt_hsm_agent_send</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal, bool purge)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send a compound request to the agent  <a href="#ab0c3f5ec4cb4656ab69af45c1484b6ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#adc10087711d7d674734d277d9e3decc4">mdt_hsm_coordinator_update</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *pgs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update status of a request  <a href="#adc10087711d7d674734d277d9e3decc4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a158d3c18482571fa7d97a2fb4fa8dd9f">mdt_hsm_add_actions</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *compound_id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a list of requests  <a href="#a158d3c18482571fa7d97a2fb4fa8dd9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8754bc2c9de3b102e98e535662c3905c">mdt_hsm_get_actions</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get registered action on a FID list  <a href="#a8754bc2c9de3b102e98e535662c3905c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a7183fd9b07713d8f78871fcb96fd715f">mdt_hsm_get_running</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get running action on a FID list or from cookie  <a href="#a7183fd9b07713d8f78871fcb96fd715f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a07bbd4dccfe6bf02dffa18e7d81bef3d">mdt_hsm_restore_is_running</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if a restore is running on a FID this is redundant with mdt_hsm_coordinator_get_running() but as it can be called frequently when getting attr we make an optimized/simpler version only for a FID  <a href="#a07bbd4dccfe6bf02dffa18e7d81bef3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a5655b6d25f3107eba3d873ec4a262c34">dump_requests</a> (char *prefix, struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">dump requests list  <a href="#a5655b6d25f3107eba3d873ec4a262c34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2ddaf229180ed7953231af312d40daf8">mdt_cdt_alloc_request</a> (<a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> compound_id, __u32 archive_id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate/init an agent request and its sub-structures.  <a href="#a2ddaf229180ed7953231af312d40daf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a99444194d1d6dae1e3e80f19c94afb51">mdt_cdt_free_request</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free an agent request and its sub-structures.  <a href="#a99444194d1d6dae1e3e80f19c94afb51"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a21f22a4c2e3cd213cfde79382288ebb4">mdt_cdt_add_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *new_car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add a request to the list  <a href="#a21f22a4c2e3cd213cfde79382288ebb4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a64d2403d975452ea1fc0015fd3bd1ada">mdt_cdt_find_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">find request in the list by cookie or by fid  <a href="#a64d2403d975452ea1fc0015fd3bd1ada"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aaec633eaea4ebd17a01eb05630a96526">mdt_cdt_get_work_done</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *done_sz)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">scan the interval tree associated to a request to compute the amount of work done  <a href="#aaec633eaea4ebd17a01eb05630a96526"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3d33ca187324fa66270836b52f402018">mdt_cdt_get_request</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">inc refcount of a request  <a href="#a3d33ca187324fa66270836b52f402018"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2579740f003e375e1ad619bd2bb90709">mdt_cdt_put_request</a> (struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *car)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">dec refcount of a request free if no more refcount  <a href="#a2579740f003e375e1ad619bd2bb90709"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ad88558ab3ed050728b858802aa00f826">mdt_cdt_update_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, const struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *pgs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update a request in the list on success, add a ref to the request returned  <a href="#ad88558ab3ed050728b858802aa00f826"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a55c303cdfbd0965d0228593f6a61ae35">mdt_cdt_remove_request</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> cookie)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove request from the list  <a href="#a55c303cdfbd0965d0228593f6a61ae35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab83b175e5842c0a11100f2512cefc949">mdt_hsm_dump_hal</a> (int level, const char *prefix, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac5a880beb355228713092f559ba46a1c">mdt_hsm_restore_hdl_find</a> (struct <a class="el" href="structcoordinator.html">coordinator</a> *cdt, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">lookup a restore handle by FID caller needs to hold cdt_restore_lock  <a href="#ac5a880beb355228713092f559ba46a1c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6c3974f6068537ee2ca1cefd4748640f">mdt_hsm_cdt_init</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize <a class="el" href="structcoordinator.html">coordinator</a> struct  <a href="#a6c3974f6068537ee2ca1cefd4748640f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acc0c8f1f89e01ca149ac5783131dca4e">mdt_hsm_cdt_start</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">start a <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#acc0c8f1f89e01ca149ac5783131dca4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a4555384b448ec81ce060dc5dfe25fda0">mdt_hsm_cdt_stop</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">stop a <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#a4555384b448ec81ce060dc5dfe25fda0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8dcc4f77765f8600a7a2edcd585d7049">mdt_hsm_cdt_fini</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">free a <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#a8dcc4f77765f8600a7a2edcd585d7049"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a994ee79f8b760d995220674956f00cec">mdt_hsm_cdt_wakeup</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wake up <a class="el" href="structcoordinator.html">coordinator</a> thread  <a href="#a994ee79f8b760d995220674956f00cec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aec2d2c33e1ecb9ab4970fe91d9dc4215">mdt_hsm_cdt_control_seq_write</a> (struct file *file, const char __user *buffer, size_t count, loff_t *off)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a397201e1ec41b4e0954b9d8320b2e282">mdt_hsm_cdt_control_seq_show</a> (struct seq_file *m, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a36226dcf6a48586f22c5895db40332e9">hsm_cdt_procfs_init</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">create /proc entries for <a class="el" href="structcoordinator.html">coordinator</a>  <a href="#a36226dcf6a48586f22c5895db40332e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a094eda24c77cb4ca7f6bb74cbb815f40">hsm_cdt_procfs_fini</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove /proc entries for <a class="el" href="structcoordinator.html">coordinator</a>  <a href="#a094eda24c77cb4ca7f6bb74cbb815f40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac8fd334b515e93b39e6053686b76a8b4">hsm_cdt_get_proc_vars</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get vector of hsm cdt /proc vars  <a href="#ac8fd334b515e93b39e6053686b76a8b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a6f4b191a27ceae23833d720870e40a2d">mdt_hsm_get_md_hsm</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct <a class="el" href="structmd__hsm.html">md_hsm</a> *hsm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get obj and HSM attributes on a fid  <a href="#a6f4b191a27ceae23833d720870e40a2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac23fca3bab32403469666065055076a9">mdt_hsm_add_hal</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *hal, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register all requests from an hal in the memory list  <a href="#ac23fca3bab32403469666065055076a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a79b7325228a5903643769041fc64bf56">mdt_hsm_is_action_compat</a> (const struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *hai, const int hal_an, const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> rq_flags, const struct <a class="el" href="structmd__hsm.html">md_hsm</a> *hsm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if a request is compatible with file status  <a href="#a79b7325228a5903643769041fc64bf56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3b8427c08750b3ff8dac7dd04a04a683">mdt_hsm_update_request_state</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *pgs, const int update_record)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update status of a request  <a href="#a3b8427c08750b3ff8dac7dd04a04a683"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aa529d020d35339fa678a54b6e483b6c9">mdt_close_swap_layouts</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__object.html">mdt_object</a> *o, struct <a class="el" href="structmd__attr.html">md_attr</a> *ma)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acb593eaa34b4d815780b96dd8f385865">mdt_fail_write</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *dd, int id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab0d37b92558774f0841bb636a6ee4433">mdt_req2med</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a0a20bff9003b7a6c16d4931b48025703">mdt_exp2dev</a> (struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac49d8cec9a4aa5c6220e9b126cb6182f">mdt_check_resent</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, <a class="el" href="mdt__internal_8h.html#a496f16f5aa7a48e02e6a71582d58bdc9">mdt_reconstruct_t</a> reconstruct, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__ucred.html">lu_ucred</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a756df180ff195deb2a9cb4e497d78bd1">mdt_ucred</a> (const struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__ucred.html">lu_ucred</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac419ee17745634343feedaf732be998c">mdt_ucred_check</a> (const struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a3c9818490a2de2cb4430689367faaab3">is_identity_get_disabled</a> (struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *cache)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a0f14f148a9871f9053ce49edbfe6788d">mdt_blocking_ast</a> (struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *, struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *, void *, int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Blocking AST for mdt locks.  <a href="#a0f14f148a9871f9053ce49edbfe6788d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac6b87e93da24a02c8344fb9d3227bf34">mdt_fid_lock</a> (struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *ns, struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *policy, const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *res_id, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> flags, const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *client_cookie)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ab9334aad57d2907a495f817604321bd3">mdt_fid_unlock</a> (struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *lh, enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a62bfd67ae09cc0f32a9542b7d68d050e">mdt_slc_is_enabled</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__md.html#gaeff7094cae9099800057edce10196e98">mdl_mode_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a19a9ead42191b6aea592312d0dbf5093">mdt_dlm_mode2mdl_mode</a> (enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac7b9e461e4b7807730957836d1f2902c">mdt_mdl_mode2dlm_mode</a> (<a class="el" href="group__md.html#gaeff7094cae9099800057edce10196e98">mdl_mode_t</a> <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a711a42ad22c5f0de0d0f8f17db4be3a2">mdt_enable_cos</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *, int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable/disable COS (Commit On Sharing).  <a href="#a711a42ad22c5f0de0d0f8f17db4be3a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a40f46151227a3ee81a7ce9866473bcdc">mdt_cos_is_enabled</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check COS (Commit On Sharing) status.  <a href="#a40f46151227a3ee81a7ce9866473bcdc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a86a6d9f04932e50cfaa7e23773cfcb71">mdt_counter_incr</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int opcode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acfd226054a17127ce7870a4e2647c89c">mdt_stats_counter_init</a> (struct <a class="el" href="structlprocfs__stats.html">lprocfs_stats</a> *stats)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#acf356f5e8302d9109ea75d1b11b85168">mdt_procfs_init</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a45e0f956453aa8b2577bc6a076a7624f">mdt_procfs_fini</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a67b6f2dd9b20301144c52f54821b017c">lprocfs_mdt_open_files_seq_open</a> (struct inode *inode, struct file *file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a13b2ed8c228bd66a606ab15dd0c60de2">mdt_rename_counter_tally</a> (struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *info, struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structmdt__object.html">mdt_object</a> *src, struct <a class="el" href="structmdt__object.html">mdt_object</a> *tgt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a2d72305535279222efbb87f5483ad240">mdt2obd_dev</a> (const struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a1fd47bb7bf1cf0f84a8c5397f0e32663">mdt_obd_name</a> (struct <a class="el" href="structmdt__device.html">mdt_device</a> *mdt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a9c891fe2f7363bdb8cd16b441772f48b">mds_mod_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ac2e73825d6961ce33ae98d0c503d622e">mds_mod_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a54a2dc448ff4c9a001320cb14c3af14a">mdt_req_get_jobid</a> (struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__context__key.html">lu_context_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a1ee0b71d491a3551bdc252f70d503e4b">mdt_thread_key</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a00d67c8b3c100ebd34463e63e4d15cff">mdt_hsm_car_kmem</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a9586a76ec8e763abdcaca0585df25515">mdt_hsm_cdt_kmem</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structupcall__cache__ops.html">upcall_cache_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#aec11c5f96a68937fcc4b2871eb6ae9bd">mdt_identity_upcall_cache_ops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#abff0f16680b2b0d72232473a476bdb5a">mdt_hsm_actions_fops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ae27f872199c9effc47a6630d21ff2509">mdt_hsm_agent_fops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct file_operations&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a8a5e8807a037144bdea0c3e7b101e039">mdt_hsm_active_requests_fops</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__md.html#gaeff7094cae9099800057edce10196e98">mdl_mode_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a1b4a26c6568b23d58b864ca552e9dad8">mdt_mdl_lock_modes</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#ad5495cc0fb2320b79d27fb0eb2f8c675">mdt_dlm_lock_modes</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__valblock__ops.html">ldlm_valblock_ops</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a341e91e700909b48256c4265197088fb">mdt_lvbo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__device__operations.html">lu_device_operations</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mdt__internal_8h.html#a5b9c1a5297b0749fe033e3ad82b414c5">mdt_lu_ops</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aa35d309444d8ce31c678bb865fc9f700"></a><!-- doxytag: member="mdt_internal.h::CDT_DEFAULT_POLICY" ref="aa35d309444d8ce31c678bb865fc9f700" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_DEFAULT_POLICY&nbsp;&nbsp;&nbsp;CDT_NORETRY_ACTION</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00096">96</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00795">mdt_hsm_cdt_init()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a09681740ce3e8191ca7ef36244f6ec18"></a><!-- doxytag: member="mdt_internal.h::CDT_NONBLOCKING_RESTORE" ref="a09681740ce3e8191ca7ef36244f6ec18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_NONBLOCKING_RESTORE&nbsp;&nbsp;&nbsp;(1ULL &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00086">86</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="a47d2b2147cf20688666bb8e0f70c2417"></a><!-- doxytag: member="mdt_internal.h::CDT_NORETRY_ACTION" ref="a47d2b2147cf20688666bb8e0f70c2417" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_NORETRY_ACTION&nbsp;&nbsp;&nbsp;(1ULL &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00087">87</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>.</p>

</div>
</div>
<a class="anchor" id="adfc493006fb74f789769a2c87f02e995"></a><!-- doxytag: member="mdt_internal.h::CDT_POLICY_ALL" ref="adfc493006fb74f789769a2c87f02e995" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_POLICY_ALL</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="mdt__internal_8h.html#a09681740ce3e8191ca7ef36244f6ec18">CDT_NONBLOCKING_RESTORE</a> | \
                                        <a class="code" href="mdt__internal_8h.html#a47d2b2147cf20688666bb8e0f70c2417">CDT_NORETRY_ACTION</a>)
</pre></div>
<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00090">90</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a569ec84a820aab8d36a9a10b406f6882"></a><!-- doxytag: member="mdt_internal.h::CDT_POLICY_LAST" ref="a569ec84a820aab8d36a9a10b406f6882" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_POLICY_LAST&nbsp;&nbsp;&nbsp;CDT_NORETRY_ACTION</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00088">88</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="acdb8e609a43b34e8edd1ad535fc00160"></a><!-- doxytag: member="mdt_internal.h::CDT_POLICY_SHIFT_COUNT" ref="acdb8e609a43b34e8edd1ad535fc00160" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDT_POLICY_SHIFT_COUNT&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00089">89</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01725">hsm_policy_bit2str()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="abc821d3174a1769bb2d7d21203305200"></a><!-- doxytag: member="mdt_internal.h::MDT_COS_DEFAULT" ref="abc821d3174a1769bb2d7d21203305200" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_COS_DEFAULT&nbsp;&nbsp;&nbsp;(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00228">228</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a6568453f4c7515ac528872bbffe83141"></a><!-- doxytag: member="mdt_internal.h::MDT_EREMOTE_OPEN" ref="a6568453f4c7515ac528872bbffe83141" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_EREMOTE_OPEN&nbsp;&nbsp;&nbsp;(EREMOTE + 1024)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00289">289</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03431">mdt_intent_reint()</a>, <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8c73fc548da910d7fdabeaa4c035a2a"></a><!-- doxytag: member="mdt_internal.h::MDT_FL_CFGLOG" ref="ad8c73fc548da910d7fdabeaa4c035a2a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_FL_CFGLOG&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00154">154</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04915">mdt_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bd4fbcafbf48043a70cb9812c987fcd"></a><!-- doxytag: member="mdt_internal.h::MDT_FL_SYNCED" ref="a4bd4fbcafbf48043a70cb9812c987fcd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_FL_SYNCED&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00155">155</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05252">mdt_obd_connect()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fd3d4eb3d2584d96379fd8e70146682"></a><!-- doxytag: member="mdt_internal.h::MDT_IDENTITY_UPCALL_PATH" ref="a8fd3d4eb3d2584d96379fd8e70146682" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_IDENTITY_UPCALL_PATH&nbsp;&nbsp;&nbsp;&quot;/usr/sbin/l_getidentity&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00772">772</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="aa71e0d15b23065f30bb250ce55022a4a"></a><!-- doxytag: member="mdt_internal.h::MDT_SERVICE_WATCHDOG_FACTOR" ref="aa71e0d15b23065f30bb250ce55022a4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MDT_SERVICE_WATCHDOG_FACTOR&nbsp;&nbsp;&nbsp;(2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00227">227</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__mds_8c_source.html#l00141">mds_start_ptlrpc_service()</a>, and <a class="el" href="mdt__handler_8c_source.html#l00391">mdt_statfs()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a496f16f5aa7a48e02e6a71582d58bdc9"></a><!-- doxytag: member="mdt_internal.h::mdt_reconstruct_t" ref="a496f16f5aa7a48e02e6a71582d58bdc9" args=")(struct mdt_thread_info *mti, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="mdt__internal_8h.html#a496f16f5aa7a48e02e6a71582d58bdc9">mdt_reconstruct_t</a>)(struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *mti, struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *lhc)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00919">919</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618"></a><!-- doxytag: member="mdt_internal.h::@118" ref="a5bea799269f02f5b3395d6b2c068b618" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618ae11d5b6f27f6264c001a131d7608384d"></a><!-- doxytag: member="MDT_LH_PARENT" ref="a5bea799269f02f5b3395d6b2c068b618ae11d5b6f27f6264c001a131d7608384d" args="" -->MDT_LH_PARENT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618a27bd53591b13d96022077939d6174a86"></a><!-- doxytag: member="MDT_LH_CHILD" ref="a5bea799269f02f5b3395d6b2c068b618a27bd53591b13d96022077939d6174a86" args="" -->MDT_LH_CHILD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618a54743deed75920df561c693799e55c77"></a><!-- doxytag: member="MDT_LH_OLD" ref="a5bea799269f02f5b3395d6b2c068b618a54743deed75920df561c693799e55c77" args="" -->MDT_LH_OLD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618a9a2097894436f47df5beb2aedeb23975"></a><!-- doxytag: member="MDT_LH_LAYOUT" ref="a5bea799269f02f5b3395d6b2c068b618a9a2097894436f47df5beb2aedeb23975" args="" -->MDT_LH_LAYOUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618a43bd5176b202d6994a46d127565d1c78"></a><!-- doxytag: member="MDT_LH_NEW" ref="a5bea799269f02f5b3395d6b2c068b618a43bd5176b202d6994a46d127565d1c78" args="" -->MDT_LH_NEW</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618aac06f9b36dc94b78c9ca8f5cabe73e25"></a><!-- doxytag: member="MDT_LH_RMT" ref="a5bea799269f02f5b3395d6b2c068b618aac06f9b36dc94b78c9ca8f5cabe73e25" args="" -->MDT_LH_RMT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618ab2545330b5fded5e79d9eb45ff241f24"></a><!-- doxytag: member="MDT_LH_LOCAL" ref="a5bea799269f02f5b3395d6b2c068b618ab2545330b5fded5e79d9eb45ff241f24" args="" -->MDT_LH_LOCAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5bea799269f02f5b3395d6b2c068b618a7c98d649bd40bba7807cf771b26a2bda"></a><!-- doxytag: member="MDT_LH_NR" ref="a5bea799269f02f5b3395d6b2c068b618a7c98d649bd40bba7807cf771b26a2bda" args="" -->MDT_LH_NR</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00268">268</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a15b3bbe041870ee299f7e042b0305e3c"></a><!-- doxytag: member="mdt_internal.h::@119" ref="a15b3bbe041870ee299f7e042b0305e3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a15b3bbe041870ee299f7e042b0305e3ca54be18c5e5cae5d8ed14922e865593d3"></a><!-- doxytag: member="MDT_LOCAL_LOCK" ref="a15b3bbe041870ee299f7e042b0305e3ca54be18c5e5cae5d8ed14922e865593d3" args="" -->MDT_LOCAL_LOCK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a15b3bbe041870ee299f7e042b0305e3cab44e46f0f0d7bef7d13d33a4fabd5e0b"></a><!-- doxytag: member="MDT_CROSS_LOCK" ref="a15b3bbe041870ee299f7e042b0305e3cab44e46f0f0d7bef7d13d33a4fabd5e0b" args="" -->MDT_CROSS_LOCK</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00279">279</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4ae"></a><!-- doxytag: member="mdt_internal.h::@120" ref="ae62fccd8cea8f216b24ba625d404c4ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea78c9ba91cca0339d465d2a096fe99124"></a><!-- doxytag: member="LPROC_MDT_OPEN" ref="ae62fccd8cea8f216b24ba625d404c4aea78c9ba91cca0339d465d2a096fe99124" args="" -->LPROC_MDT_OPEN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aeab16bbb4aea528145605c18ea12020291"></a><!-- doxytag: member="LPROC_MDT_CLOSE" ref="ae62fccd8cea8f216b24ba625d404c4aeab16bbb4aea528145605c18ea12020291" args="" -->LPROC_MDT_CLOSE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea806492b9f44725a26b29155ca17b11d3"></a><!-- doxytag: member="LPROC_MDT_MKNOD" ref="ae62fccd8cea8f216b24ba625d404c4aea806492b9f44725a26b29155ca17b11d3" args="" -->LPROC_MDT_MKNOD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aeac57ea6430a462ea2173cc47cab9fe78c"></a><!-- doxytag: member="LPROC_MDT_LINK" ref="ae62fccd8cea8f216b24ba625d404c4aeac57ea6430a462ea2173cc47cab9fe78c" args="" -->LPROC_MDT_LINK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea956ef4922b28789771005b2d18808558"></a><!-- doxytag: member="LPROC_MDT_UNLINK" ref="ae62fccd8cea8f216b24ba625d404c4aea956ef4922b28789771005b2d18808558" args="" -->LPROC_MDT_UNLINK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea32bf861a05ff10ab80e324edabf5e210"></a><!-- doxytag: member="LPROC_MDT_MKDIR" ref="ae62fccd8cea8f216b24ba625d404c4aea32bf861a05ff10ab80e324edabf5e210" args="" -->LPROC_MDT_MKDIR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aeacf87e02f9bc715ac7582f0b0d0ea95c2"></a><!-- doxytag: member="LPROC_MDT_RMDIR" ref="ae62fccd8cea8f216b24ba625d404c4aeacf87e02f9bc715ac7582f0b0d0ea95c2" args="" -->LPROC_MDT_RMDIR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea7b3939c43230a63913625d28ed08d709"></a><!-- doxytag: member="LPROC_MDT_RENAME" ref="ae62fccd8cea8f216b24ba625d404c4aea7b3939c43230a63913625d28ed08d709" args="" -->LPROC_MDT_RENAME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea2f6f32771525e1b46c9962de73171b8e"></a><!-- doxytag: member="LPROC_MDT_GETATTR" ref="ae62fccd8cea8f216b24ba625d404c4aea2f6f32771525e1b46c9962de73171b8e" args="" -->LPROC_MDT_GETATTR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aeac00a65c6676aa28c78e8d05888e157de"></a><!-- doxytag: member="LPROC_MDT_SETATTR" ref="ae62fccd8cea8f216b24ba625d404c4aeac00a65c6676aa28c78e8d05888e157de" args="" -->LPROC_MDT_SETATTR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aeab81e1ed8393484f80962dce309d0b5a6"></a><!-- doxytag: member="LPROC_MDT_GETXATTR" ref="ae62fccd8cea8f216b24ba625d404c4aeab81e1ed8393484f80962dce309d0b5a6" args="" -->LPROC_MDT_GETXATTR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea88dfb86a90329bf4133c8da88e13739a"></a><!-- doxytag: member="LPROC_MDT_SETXATTR" ref="ae62fccd8cea8f216b24ba625d404c4aea88dfb86a90329bf4133c8da88e13739a" args="" -->LPROC_MDT_SETXATTR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aead2cc8018a6b014d15d5e93311a85e581"></a><!-- doxytag: member="LPROC_MDT_STATFS" ref="ae62fccd8cea8f216b24ba625d404c4aead2cc8018a6b014d15d5e93311a85e581" args="" -->LPROC_MDT_STATFS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea2d2474ee0aa189009b4642a3496eef8b"></a><!-- doxytag: member="LPROC_MDT_SYNC" ref="ae62fccd8cea8f216b24ba625d404c4aea2d2474ee0aa189009b4642a3496eef8b" args="" -->LPROC_MDT_SYNC</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea99967b100cc18aa9b35fddf6a9356d8f"></a><!-- doxytag: member="LPROC_MDT_SAMEDIR_RENAME" ref="ae62fccd8cea8f216b24ba625d404c4aea99967b100cc18aa9b35fddf6a9356d8f" args="" -->LPROC_MDT_SAMEDIR_RENAME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aea69ae6ec6aab6c541b2957facc8091f7e"></a><!-- doxytag: member="LPROC_MDT_CROSSDIR_RENAME" ref="ae62fccd8cea8f216b24ba625d404c4aea69ae6ec6aab6c541b2957facc8091f7e" args="" -->LPROC_MDT_CROSSDIR_RENAME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae62fccd8cea8f216b24ba625d404c4aeaefd84425cab8613da5b1708d5a349d83"></a><!-- doxytag: member="LPROC_MDT_LAST" ref="ae62fccd8cea8f216b24ba625d404c4aeaefd84425cab8613da5b1708d5a349d83" args="" -->LPROC_MDT_LAST</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l01009">1009</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a596daf8acb5cd4e00e66b9adec6470b8"></a><!-- doxytag: member="mdt_internal.h::cdt_states" ref="a596daf8acb5cd4e00e66b9adec6470b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mdt__internal_8h.html#a596daf8acb5cd4e00e66b9adec6470b8">cdt_states</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a596daf8acb5cd4e00e66b9adec6470b8aa9bfd061bad551c4bf3c0a7ee0df2d43"></a><!-- doxytag: member="CDT_STOPPED" ref="a596daf8acb5cd4e00e66b9adec6470b8aa9bfd061bad551c4bf3c0a7ee0df2d43" args="" -->CDT_STOPPED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a596daf8acb5cd4e00e66b9adec6470b8a717dbf2eb28174929de035be73f8fe12"></a><!-- doxytag: member="CDT_INIT" ref="a596daf8acb5cd4e00e66b9adec6470b8a717dbf2eb28174929de035be73f8fe12" args="" -->CDT_INIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a596daf8acb5cd4e00e66b9adec6470b8a31adbd616a66d8f3c1ff0f28b6f2c804"></a><!-- doxytag: member="CDT_RUNNING" ref="a596daf8acb5cd4e00e66b9adec6470b8a31adbd616a66d8f3c1ff0f28b6f2c804" args="" -->CDT_RUNNING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a596daf8acb5cd4e00e66b9adec6470b8a4e8ce3e0fc156b560aff2d2843a0e522"></a><!-- doxytag: member="CDT_DISABLE" ref="a596daf8acb5cd4e00e66b9adec6470b8a4e8ce3e0fc156b560aff2d2843a0e522" args="" -->CDT_DISABLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a596daf8acb5cd4e00e66b9adec6470b8a180ddb2f698471c553bad07f5889891c"></a><!-- doxytag: member="CDT_STOPPING" ref="a596daf8acb5cd4e00e66b9adec6470b8a180ddb2f698471c553bad07f5889891c" args="" -->CDT_STOPPING</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00098">98</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb502651906cdfbdcdd17ca91bb10ec6"></a><!-- doxytag: member="mdt_internal.h::mdt_name_flags" ref="abb502651906cdfbdcdd17ca91bb10ec6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mdt__internal_8h.html#abb502651906cdfbdcdd17ca91bb10ec6">mdt_name_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="abb502651906cdfbdcdd17ca91bb10ec6a2226b01da8350d6a8c5d075d7de551d6"></a><!-- doxytag: member="MNF_FIX_ANON" ref="abb502651906cdfbdcdd17ca91bb10ec6a2226b01da8350d6a8c5d075d7de551d6" args="" -->MNF_FIX_ANON</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00631">631</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5aeea5ab146fe4ff8c17cbf3a1539ecc"></a><!-- doxytag: member="mdt_internal.h::mdt_object_flags" ref="a5aeea5ab146fe4ff8c17cbf3a1539ecc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mdt__internal_8h.html#a5aeea5ab146fe4ff8c17cbf3a1539ecc">mdt_object_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a5aeea5ab146fe4ff8c17cbf3a1539ecca50bdb96ed7652e6e9b522d36f1c228b7"></a><!-- doxytag: member="MOF_LOV_CREATED" ref="a5aeea5ab146fe4ff8c17cbf3a1539ecca50bdb96ed7652e6e9b522d36f1c228b7" args="" -->MOF_LOV_CREATED</em>&nbsp;</td><td>
<p>lov object has been created. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00230">230</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad1e5e73679b48e5f25508959285dcd6c"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_flag" ref="ad1e5e73679b48e5f25508959285dcd6c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mdt__internal_8h.html#ad1e5e73679b48e5f25508959285dcd6c">mdt_reint_flag</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ad1e5e73679b48e5f25508959285dcd6cac3291baf61077bd00f14f8bf514b1fea"></a><!-- doxytag: member="MRF_OPEN_TRUNC" ref="ad1e5e73679b48e5f25508959285dcd6cac3291baf61077bd00f14f8bf514b1fea" args="" -->MRF_OPEN_TRUNC</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00303">303</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5693051af3a282b1e496aae51d16837f"></a><!-- doxytag: member="mdt_internal.h::allow_client_chgrp" ref="a5693051af3a282b1e496aae51d16837f" args="(struct mdt_thread_info *info, struct lu_ucred *uc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool allow_client_chgrp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__ucred.html">lu_ucred</a> *&nbsp;</td>
          <td class="paramname"> <em>uc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether allow the client to set supplementary group IDs or not. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>info</em>&nbsp;</td><td>pointer to the thread context </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uc</em>&nbsp;</td><td>pointer to the RPC user descriptor</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>if allow to set supplementary group IDs </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>for other cases </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00334">334</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02238">CFS_SETGRP_PERM</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="mdt__internal_8h_source.html#l00951">is_identity_get_disabled()</a>, <a class="el" href="mdt__internal_8h_source.html#l00194">mdt_device::mdt_identity_cache</a>, <a class="el" href="mdt__identity_8c_source.html#l00248">mdt_identity_get_perm()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="md__object_8h_source.html#l00597">lu_ucred::uc_identity</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="af95cfee931802ac1101ce1461029e546"></a><!-- doxytag: member="mdt_internal.h::cdt_llog_process" ref="af95cfee931802ac1101ce1461029e546" args="(const struct lu_env *env, struct mdt_device *mdt, llog_cb_t cb, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cdt_llog_process </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="obd__class_8h.html#a6753dc16f88d31c1a4fdd28a48dc1cf9">llog_cb_t</a>&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">87</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03056">LLOG_AGENT_ORIG_CTXT</a>, <a class="el" href="llog__cat_8c_source.html#l00838">llog_cat_process()</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00731">mdt_hsm_pending_restore()</a>.</p>

</div>
</div>
<a class="anchor" id="a259742e1a3db858106a64c43fcfa6ef6"></a><!-- doxytag: member="mdt_internal.h::dump_llog_agent_req_rec" ref="a259742e1a3db858106a64c43fcfa6ef6" args="(const char *prefix, const struct llog_agent_req_rec *larr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_llog_agent_req_rec </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structllog__agent__req__rec.html">llog_agent_req_rec</a> *&nbsp;</td>
          <td class="paramname"> <em>larr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00047">47</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03262">llog_agent_req_rec::arr_compound_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03256">llog_agent_req_rec::arr_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03263">llog_agent_req_rec::arr_req_create</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01257">hai_dump_data_field()</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l03115">llog_rec_hdr::lrh_index</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="a5655b6d25f3107eba3d873ec4a262c34"></a><!-- doxytag: member="mdt_internal.h::dump_requests" ref="a5655b6d25f3107eba3d873ec4a262c34" args="(char *prefix, struct coordinator *cdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_requests </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>dump requests list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00048">48</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00463">cdt_agent_req::car_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00460">cdt_agent_req::car_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00461">cdt_agent_req::car_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>, <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8fd334b515e93b39e6053686b76a8b4"></a><!-- doxytag: member="mdt_internal.h::hsm_cdt_get_proc_vars" ref="ac8fd334b515e93b39e6053686b76a8b4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlprocfs__vars.html">lprocfs_vars</a>* hsm_cdt_get_proc_vars </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get vector of hsm cdt /proc vars </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>var</em>&nbsp;</td><td>vector </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00414">414</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__coordinator_8c_source.html#l00051">lprocfs_mdt_hsm_vars</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04765">mdt_process_config()</a>.</p>

</div>
</div>
<a class="anchor" id="a094eda24c77cb4ca7f6bb74cbb815f40"></a><!-- doxytag: member="mdt_internal.h::hsm_cdt_procfs_fini" ref="a094eda24c77cb4ca7f6bb74cbb815f40" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hsm_cdt_procfs_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove /proc entries for <a class="el" href="structcoordinator.html">coordinator</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00400">400</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00116">coordinator::cdt_proc_dir</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l01010">mdt_procfs_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a36226dcf6a48586f22c5895db40332e9"></a><!-- doxytag: member="mdt_internal.h::hsm_cdt_procfs_init" ref="a36226dcf6a48586f22c5895db40332e9" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hsm_cdt_procfs_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>create /proc entries for <a class="el" href="structcoordinator.html">coordinator</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00375">375</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00116">coordinator::cdt_proc_dir</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00051">lprocfs_mdt_hsm_vars</a>, <a class="el" href="lprocfs__status_8h_source.html#l00949">lprocfs_register()</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l00966">mdt_procfs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c9818490a2de2cb4430689367faaab3"></a><!-- doxytag: member="mdt_internal.h::is_identity_get_disabled" ref="a3c9818490a2de2cb4430689367faaab3" args="(struct upcall_cache *cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int is_identity_get_disabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00951">951</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="upcall__cache_8h_source.html#l00127">upcall_cache::uc_upcall</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00334">allow_client_chgrp()</a>, <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00135">mdt_handle_idmap()</a>, <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00466">old_init_ucred_common()</a>.</p>

</div>
</div>
<a class="anchor" id="a67b6f2dd9b20301144c52f54821b017c"></a><!-- doxytag: member="mdt_internal.h::lprocfs_mdt_open_files_seq_open" ref="a67b6f2dd9b20301144c52f54821b017c" args="(struct inode *inode, struct file *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lprocfs_mdt_open_files_seq_open </td>
          <td>(</td>
          <td class="paramtype">struct inode *&nbsp;</td>
          <td class="paramname"> <em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lproc_8c_source.html#l00914">914</a> of file <a class="el" href="mdt__lproc_8c_source.html">mdt_lproc.c</a>.</p>

<p>References <a class="el" href="mdt__lproc_8c_source.html#l00903">lprocfs_mdt_open_files_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2e73825d6961ce33ae98d0c503d622e"></a><!-- doxytag: member="mdt_internal.h::mds_mod_exit" ref="ac2e73825d6961ce33ae98d0c503d622e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mds_mod_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__mds_8c_source.html#l00580">580</a> of file <a class="el" href="mdt__mds_8c_source.html">mdt_mds.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00246">class_unregister_type()</a>, and <a class="el" href="obd_8h_source.html#l00458">LUSTRE_MDS_NAME</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l06151">mdt_exit()</a>, and <a class="el" href="mdt__handler_8c_source.html#l06122">mdt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9c891fe2f7363bdb8cd16b441772f48b"></a><!-- doxytag: member="mdt_internal.h::mds_mod_init" ref="a9c891fe2f7363bdb8cd16b441772f48b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mds_mod_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__mds_8c_source.html#l00567">567</a> of file <a class="el" href="mdt__mds_8c_source.html">mdt_mds.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00167">class_register_type()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00283">LCONSOLE_INFO</a>, <a class="el" href="obd_8h_source.html#l00458">LUSTRE_MDS_NAME</a>, <a class="el" href="mdt__mds_8c_source.html#l00077">mds_num_threads</a>, and <a class="el" href="mdt__mds_8c_source.html#l00073">mdt_num_threads</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l06122">mdt_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d72305535279222efbb87f5483ad240"></a><!-- doxytag: member="mdt_internal.h::mdt2obd_dev" ref="a2d72305535279222efbb87f5483ad240" args="(const struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structobd__device.html">obd_device</a>* mdt2obd_dev </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l01041">1041</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, and <a class="el" href="mdt__internal_8h_source.html#l00159">mdt_device::mdt_lu_dev</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00375">hsm_cdt_procfs_init()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00161">lproc_mdt_attach_rename_seqstat()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00124">mdt_agent_record_add()</a>, <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00317">mdt_hsm_actions_proc_start()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mdt__handler_8c_source.html#l02131">mdt_llog_ctxt_clone()</a>, <a class="el" href="mdt__handler_8c_source.html#l02153">mdt_llog_ctxt_unclone()</a>, <a class="el" href="mdt__lproc_8c_source.html#l01010">mdt_procfs_fini()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00966">mdt_procfs_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l03948">mdt_stack_fini()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00466">old_init_ucred_common()</a>.</p>

</div>
</div>
<a class="anchor" id="aa826d89f4788c4be92889ce7a6de2973"></a><!-- doxytag: member="mdt_internal.h::mdt_add_dirty_flag" ref="aa826d89f4788c4be92889ce7a6de2973" args="(struct mdt_thread_info *info, struct mdt_object *mo, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_add_dirty_flag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check HSM flags and add HS_DIRTY flag if relevant. </p>
<p>A file could be set dirty only if it has a copy in the backend (HS_EXISTS) and is not RELEASED. </p>

<p>Definition at line <a class="el" href="mdt__reint_8c_source.html#l00678">678</a> of file <a class="el" href="mdt__reint_8c_source.html">mdt_reint.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__internal_8h_source.html#l00270">MDT_LH_CHILD</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05106">mdt_ctxt_add_dirty_flag()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a9bbc9be6ac2c422cb313832af653a691"></a><!-- doxytag: member="mdt_internal.h::mdt_agent_record_add" ref="a9bbc9be6ac2c422cb313832af653a691" args="(const struct lu_env *env, struct mdt_device *mdt, __u64 compound_id, __u32 archive_id, __u64 flags, struct hsm_action_item *hai)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_agent_record_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>compound_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>archive_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add an entry in agent llog </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] PDT device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>compound_id</em>&nbsp;</td><td>[IN] global id associated with the record </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive_id</em>&nbsp;</td><td>[IN] backend archive number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] record to register </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00124">124</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03260">llog_agent_req_rec::arr_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03262">llog_agent_req_rec::arr_compound_id</a>, <a class="el" href="lustre__idl_8h_source.html#l03261">llog_agent_req_rec::arr_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l03265">llog_agent_req_rec::arr_hai</a>, <a class="el" href="lustre__idl_8h_source.html#l03256">llog_agent_req_rec::arr_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l03264">llog_agent_req_rec::arr_req_change</a>, <a class="el" href="lustre__idl_8h_source.html#l03263">llog_agent_req_rec::arr_req_create</a>, <a class="el" href="lustre__idl_8h_source.html#l03257">llog_agent_req_rec::arr_status</a>, <a class="el" href="lustre__idl_8h_source.html#l03224">ARS_WAITING</a>, <a class="el" href="mdt__internal_8h_source.html#l00121">coordinator::cdt_last_cookie</a>, <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03100">HSM_AGENT_REC</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__idl_8h_source.html#l03056">LLOG_AGENT_ORIG_CTXT</a>, <a class="el" href="llog__cat_8c_source.html#l00631">llog_cat_add()</a>, <a class="el" href="lustre__log_8h_source.html#l00375">llog_ctxt_put()</a>, <a class="el" href="lustre__log_8h_source.html#l00355">llog_data_len()</a>, <a class="el" href="lustre__log_8h_source.html#l00431">llog_get_context()</a>, <a class="el" href="lustre__log_8h_source.html#l00316">llog_ctxt::loc_handle</a>, <a class="el" href="lustre__idl_8h_source.html#l03114">llog_rec_hdr::lrh_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03116">llog_rec_hdr::lrh_type</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="a980845ce8e872b6946d082f8af260a71"></a><!-- doxytag: member="mdt_internal.h::mdt_agent_record_update" ref="a980845ce8e872b6946d082f8af260a71" args="(const struct lu_env *env, struct mdt_device *mdt, __u64 *cookies, int cookies_count, enum agent_req_status status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_agent_record_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>cookies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cookies_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#gac36f21688fb1f296388242abb174a86e">agent_req_status</a>&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update an entry in agent llog </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>[IN] environment </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] MDT device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] entries to update log cookie are returned by register </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>[IN] new status of the request </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">261</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00188">data_update_cb::change_time</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00184">data_update_cb::cookies</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00185">data_update_cb::cookies_count</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00186">data_update_cb::cookies_done</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00183">data_update_cb::mdt</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00200">mdt_agent_record_update_cb()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00187">data_update_cb::status</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="a100b5c15f7d5b5e9791ffb04300047db"></a><!-- doxytag: member="mdt_internal.h::mdt_attr_get_complex" ref="a100b5c15f7d5b5e9791ffb04300047db" args="(struct mdt_thread_info *info, struct mdt_object *o, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_attr_get_complex </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00819">819</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="md__attrs_8c_source.html#l00097">lustre_buf2hsm()</a>, <a class="el" href="md__object_8h_source.html#l00124">md_attr::ma_acl</a>, <a class="el" href="md__object_8h_source.html#l00076">MA_ACL_DEF</a>, <a class="el" href="md__object_8h_source.html#l00127">md_attr::ma_acl_size</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00075">MA_LMV</a>, <a class="el" href="md__object_8h_source.html#l00080">MA_LMV_DEF</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00120">md_attr::ma_pfid</a>, <a class="el" href="md__object_8h_source.html#l00079">MA_PFID</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00772">mdt_attr_get_pfid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l00697">mdt_stripe_get()</a>, <a class="el" href="md__object_8h_source.html#l00338">mo_attr_get()</a>, <a class="el" href="md__object_8h_source.html#l00287">md_object::mo_lu</a>, <a class="el" href="md__object_8h_source.html#l00370">mo_xattr_get()</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00429">mdt_thread_info::mti_xattr_buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__idl_8h_source.html#l01589">XATTR_NAME_ACL_DEFAULT</a>, <a class="el" href="lustre__idl_8h_source.html#l01597">XATTR_NAME_DEFAULT_LMV</a>, <a class="el" href="lustre__idl_8h_source.html#l01602">XATTR_NAME_HSM</a>, <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00249">hsm_action_permission()</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__open_8c_source.html#l00112">mdt_create_data()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="abae6fa57578da1649aa1476327700059"></a><!-- doxytag: member="mdt_internal.h::mdt_big_xattr_get" ref="abae6fa57578da1649aa1476327700059" args="(struct mdt_thread_info *info, struct mdt_object *o, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_big_xattr_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00658">658</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="md__object_8h_source.html#l00370">mo_xattr_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00424">mdt_thread_info::mti_big_lmm</a>, <a class="el" href="mdt__internal_8h_source.html#l00427">mdt_thread_info::mti_big_lmm_used</a>, <a class="el" href="mdt__internal_8h_source.html#l00425">mdt_thread_info::mti_big_lmmsize</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="lustre__sec_8h_source.html#l00941">size_roundup_power2()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00772">mdt_attr_get_pfid()</a>, <a class="el" href="mdt__reint_8c_source.html#l00336">mdt_init_slaves()</a>, and <a class="el" href="mdt__handler_8c_source.html#l00697">mdt_stripe_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f14f148a9871f9053ce49edbfe6788d"></a><!-- doxytag: member="mdt_internal.h::mdt_blocking_ast" ref="a0f14f148a9871f9053ce49edbfe6788d" args="(struct ldlm_lock *, struct ldlm_lock_desc *, void *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_blocking_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blocking AST for mdt locks. </p>
<p>Starts transaction commit if in case of COS lock conflict or deffers such a commit to the mdt_save_lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lock</em>&nbsp;</td><td>the lock which blocks a request or cancelling lock </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>desc</em>&nbsp;</td><td>unused </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>unused </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flag</em>&nbsp;</td><td>indicates whether this cancelling or blocking callback </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ldlm__local__ast.html#ga9962ac0cc2bd7e279cf0b977d822feb3" title="A helper to build a blocking AST function.">ldlm_blocking_ast_nocheck</a> </dd></dl>

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02308">2308</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__dlm_8h_source.html#l00741">ldlm_lock::l_blocking_ast</a>, <a class="el" href="lustre__dlm_8h_source.html#l00875">ldlm_lock::l_blocking_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00833">ldlm_lock::l_client_cookie</a>, <a class="el" href="lustre__dlm_8h_source.html#l00724">ldlm_lock::l_req_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02805">LCK_COS</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lu__object_8h_source.html#l01024">LCT_LOCAL</a>, <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00104">LDLM_CB_CANCELING</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00137">ldlm_is_cos_incompat</a>, <a class="el" href="lustre__dlm_8h_source.html#l01006">ldlm_lock_to_ns()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__handler_8c_source.html#l06104">mdt_cos_is_enabled()</a>, <a class="el" href="mdt__handler_8c.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev()</a>, <a class="el" href="mdt__handler_8c_source.html#l02250">mdt_device_commit_async()</a>, <a class="el" href="mdt__handler_8c_source.html#l02275">mdt_set_lock_sync()</a>, <a class="el" href="mdt__internal_8h_source.html#l00982">mdt_slc_is_enabled()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00371">ldlm_namespace::ns_obd</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__internal_8h_source.html#l00959">mdt_fid_lock()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>.</p>

</div>
</div>
<a class="anchor" id="a36e62b3daf4d7c031440bed1ae1d853b"></a><!-- doxytag: member="mdt_internal.h::mdt_body_reverse_idmap" ref="a36e62b3daf4d7c031440bed1ae1d853b" args="(struct mdt_thread_info *, struct mdt_body *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_body_reverse_idmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__idmap_8c_source.html#l00275">275</a> of file <a class="el" href="mdt__idmap_8c_source.html">mdt_idmap.c</a>.</p>

<p>References <a class="el" href="lustre__idmap_8h_source.html#l00064">CFS_IDMAP_NOTFOUND</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="idmap_8c_source.html#l00409">lustre_idmap_lookup_gid()</a>, <a class="el" href="idmap_8c_source.html#l00376">lustre_idmap_lookup_uid()</a>, <a class="el" href="lustre__idl_8h_source.html#l02207">mdt_body::mbo_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l02205">mdt_body::mbo_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02206">mdt_body::mbo_uid</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00909">mdt_req2med()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="lustre__export_8h_source.html#l00098">mdt_export_data::med_idmap</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="lustre__user_8h_source.html#l00610">NOBODY_GID</a>, <a class="el" href="lustre__user_8h_source.html#l00609">NOBODY_UID</a>, <a class="el" href="lustre__idl_8h_source.html#l01666">OBD_MD_FLGID</a>, <a class="el" href="lustre__idl_8h_source.html#l01663">OBD_MD_FLMODE</a>, and <a class="el" href="lustre__idl_8h_source.html#l01665">OBD_MD_FLUID</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00501">mdt_pack_attr2body()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8e075640227df382e73a221e8c41122"></a><!-- doxytag: member="mdt_internal.h::mdt_buf" ref="ab8e075640227df382e73a221e8c41122" args="(const struct lu_env *env, void *area, ssize_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__buf.html">lu_buf</a>* mdt_buf </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00048">48</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, and <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>.</p>

</div>
</div>
<a class="anchor" id="a60654798ad7ed50f1fcdc87ce26452f6"></a><!-- doxytag: member="mdt_internal.h::mdt_buf_const" ref="a60654798ad7ed50f1fcdc87ce26452f6" args="(const struct lu_env *env, const void *area, ssize_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__buf.html">lu_buf</a>* mdt_buf_const </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00060">60</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, and <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>.</p>

</div>
</div>
<a class="anchor" id="a21f22a4c2e3cd213cfde79382288ebb4"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_add_request" ref="a21f22a4c2e3cd213cfde79382288ebb4" args="(struct coordinator *cdt, struct cdt_agent_req *new_car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_cdt_add_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>new_car</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add a request to the list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">336</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00237">mdt_hsm_agent_update_statistics()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ddaf229180ed7953231af312d40daf8"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_alloc_request" ref="a2ddaf229180ed7953231af312d40daf8" args="(__u64 compound_id, __u32 archive_id, __u64 flags, struct obd_uuid *uuid, struct hsm_action_item *hai)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* mdt_cdt_alloc_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>compound_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>archive_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate/init an agent request and its sub-structures. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>compound_id</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive_id</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[OUT] success valid structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[OUT] </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00238">238</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00463">cdt_agent_req::car_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00460">cdt_agent_req::car_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00461">cdt_agent_req::car_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>, <a class="el" href="mdt__internal_8h_source.html#l00465">cdt_agent_req::car_req_start</a>, <a class="el" href="mdt__internal_8h_source.html#l00466">cdt_agent_req::car_req_update</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00220">mdt_cdt_init_request_tree()</a>, <a class="el" href="mdt__handler_8c_source.html#l00111">mdt_hsm_car_kmem</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00845">OBD_SLAB_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>.</p>

</div>
</div>
<a class="anchor" id="a64d2403d975452ea1fc0015fd3bd1ada"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_find_request" ref="a64d2403d975452ea1fc0015fd3bd1ada" args="(struct coordinator *cdt, const __u64 cookie, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* mdt_cdt_find_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find request in the list by cookie or by fid </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] request cookie </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] fid </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer or NULL if not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">369</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>, and <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00482">mdt_hsm_get_running()</a>.</p>

</div>
</div>
<a class="anchor" id="a99444194d1d6dae1e3e80f19c94afb51"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_free_request" ref="a99444194d1d6dae1e3e80f19c94afb51" args="(struct cdt_agent_req *car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_free_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free an agent request and its sub-structures. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] Request to be freed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">273</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00117">mdt_cdt_free_request_tree()</a>, <a class="el" href="mdt__handler_8c_source.html#l00111">mdt_hsm_car_kmem</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d33ca187324fa66270836b52f402018"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_get_request" ref="a3d33ca187324fa66270836b52f402018" args="(struct cdt_agent_req *car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_get_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>inc refcount of a request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00284">284</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="aaec633eaea4ebd17a01eb05630a96526"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_get_work_done" ref="aaec633eaea4ebd17a01eb05630a96526" args="(struct cdt_agent_req *car, __u64 *done_sz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_get_work_done </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>done_sz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>scan the interval tree associated to a request to compute the amount of work done </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>done_sz</em>&nbsp;</td><td>[OUT] will be set to the size of work done </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00098">98</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00074">req_interval_data::crp</a>, <a class="el" href="mdt__internal_8h_source.html#l00447">cdt_req_progress::crp_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00448">cdt_req_progress::crp_root</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00075">req_interval_data::done_sz</a>, <a class="el" href="interval__tree_8c_source.html#l00189">interval_iterate()</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00081">req_interval_cb()</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00512">mdt_hsm_active_requests_proc_show()</a>, and <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>.</p>

</div>
</div>
<a class="anchor" id="a2579740f003e375e1ad619bd2bb90709"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_put_request" ref="a2579740f003e375e1ad619bd2bb90709" args="(struct cdt_agent_req *car)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cdt_put_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a> *&nbsp;</td>
          <td class="paramname"> <em>car</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>dec refcount of a request free if no more refcount </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>car</em>&nbsp;</td><td>[IN] request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">294</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00459">cdt_agent_req::car_refcount</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">mdt_cdt_add_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">mdt_cdt_remove_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00482">mdt_hsm_get_running()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="a55c303cdfbd0965d0228593f6a61ae35"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_remove_request" ref="a55c303cdfbd0965d0228593f6a61ae35" args="(struct coordinator *cdt, __u64 cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_cdt_remove_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>remove request from the list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cookie</em>&nbsp;</td><td>[IN] request cookie </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">389</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00309">cdt_find_request_nolock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="ad88558ab3ed050728b858802aa00f826"></a><!-- doxytag: member="mdt_internal.h::mdt_cdt_update_request" ref="ad88558ab3ed050728b858802aa00f826" args="(struct coordinator *cdt, const struct hsm_progress_kernel *pgs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__agent__req.html">cdt_agent_req</a>* mdt_cdt_update_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *&nbsp;</td>
          <td class="paramname"> <em>pgs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update a request in the list on success, add a ref to the request returned </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgs</em>&nbsp;</td><td>[IN] progression (cookie + extent + err) </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>pointer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">424</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00468">cdt_agent_req::car_progress</a>, <a class="el" href="mdt__internal_8h_source.html#l00466">cdt_agent_req::car_req_update</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00154">hsm_update_work()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00237">mdt_hsm_agent_update_statistics()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="ac49d8cec9a4aa5c6220e9b126cb6182f"></a><!-- doxytag: member="mdt_internal.h::mdt_check_resent" ref="ac49d8cec9a4aa5c6220e9b126cb6182f" args="(struct mdt_thread_info *info, mdt_reconstruct_t reconstruct, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_check_resent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdt__internal_8h.html#a496f16f5aa7a48e02e6a71582d58bdc9">mdt_reconstruct_t</a>&nbsp;</td>
          <td class="paramname"> <em>reconstruct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00921">921</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="mdt__internal_8h_source.html#l00431">mdt_thread_info::mti_reply_data</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="tgt__handler_8c_source.html#l02310">req_can_reconstruct()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b24c1ea4d6c0fe92e1f8c9b23b429f7"></a><!-- doxytag: member="mdt_internal.h::mdt_check_resent_lock" ref="a1b24c1ea4d6c0fe92e1f8c9b23b429f7" args="(struct mdt_thread_info *info, struct mdt_object *mo, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_check_resent_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02396">2396</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lustre__fid_8h_source.html#l00551">fid_res_name_eq()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01122">LDLM_DEBUG_NOLOCK</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00255">mdt_lock_handle::mlh_reg_lh</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a4cf10913df89d679eace351ec68aab23"></a><!-- doxytag: member="mdt_internal.h::mdt_check_ucred" ref="a4cf10913df89d679eace351ec68aab23" args="(struct mdt_thread_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_check_ucred </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00362">362</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l02237">CFS_SETGID_PERM</a>, <a class="el" href="lustre__idl_8h_source.html#l02236">CFS_SETUID_PERM</a>, <a class="el" href="libcfs__debug_8h_source.html#l00156">D_SEC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__internal_8h_source.html#l00951">is_identity_get_disabled()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="nidstr_8h_source.html#l00077">libcfs_nid2str()</a>, <a class="el" href="curproc_8h_source.html#l00070">make_kuid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00194">mdt_device::mdt_identity_cache</a>, <a class="el" href="mdt__identity_8c_source.html#l00204">mdt_identity_get()</a>, <a class="el" href="mdt__identity_8c_source.html#l00248">mdt_identity_get_perm()</a>, <a class="el" href="mdt__identity_8c_source.html#l00220">mdt_identity_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="upcall__cache_8h_source.html#l00080">md_identity::mi_gid</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="mdt__idmap_8c_source.html#l00218">ptlrpc_user_desc_do_idmap()</a>, <a class="el" href="lustre__sec_8h_source.html#l00893">ptlrpc_user_desc::pud_fsgid</a>, <a class="el" href="lustre__sec_8h_source.html#l00892">ptlrpc_user_desc::pud_fsuid</a>, <a class="el" href="lustre__sec_8h_source.html#l00891">ptlrpc_user_desc::pud_gid</a>, <a class="el" href="lustre__sec_8h_source.html#l00890">ptlrpc_user_desc::pud_uid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_auth_gss</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_auth_usr_mdt</a>, <a class="el" href="lustre__net_8h_source.html#l01108">ptlrpc_request::rq_peer</a>, <a class="el" href="md__object_8h_source.html#l00584">lu_ucred::uc_valid</a>, <a class="el" href="md__object_8h_source.html#l00580">UCRED_NEW</a>, <a class="el" href="md__object_8h_source.html#l00579">UCRED_OLD</a>, <a class="el" href="curproc_8h_source.html#l00095">uid_valid()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00354">mdt_get_root()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, and <a class="el" href="mdt__handler_8c_source.html#l00391">mdt_statfs()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2aabfbb07a40746a580c37008e7c3c8"></a><!-- doxytag: member="mdt_internal.h::mdt_child_ops" ref="ab2aabfbb07a40746a580c37008e7c3c8" args="(struct mdt_device *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmd__device__operations.html">md_device_operations</a>* mdt_child_ops </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>restore handle slab cache </p>

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00494">494</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="md__object_8h_source.html#l00283">md_device::md_ops</a>, and <a class="el" href="mdt__internal_8h_source.html#l00167">mdt_device::mdt_child</a>.</p>

</div>
</div>
<a class="anchor" id="a98f65e5b57967f8659c8cc358c74e360"></a><!-- doxytag: member="mdt_internal.h::mdt_cleanup_idmap" ref="a98f65e5b57967f8659c8cc358c74e360" args="(struct mdt_export_data *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_cleanup_idmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__idmap_8c_source.html#l00116">116</a> of file <a class="el" href="mdt__idmap_8c_source.html">mdt_idmap.c</a>.</p>

<p>References <a class="el" href="idmap_8c_source.html#l00459">lustre_idmap_fini()</a>, <a class="el" href="lustre__export_8h_source.html#l00098">mdt_export_data::med_idmap</a>, and <a class="el" href="lustre__export_8h_source.html#l00097">mdt_export_data::med_idmap_mutex</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05397">mdt_destroy_export()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b25a49327bb44e717794314a04d9cbb"></a><!-- doxytag: member="mdt_internal.h::mdt_clear_disposition" ref="a1b25a49327bb44e717794314a04d9cbb" args="(struct mdt_thread_info *info, struct ldlm_reply *rep, __u64 op_flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_clear_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>op_flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00141">141</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02929">ldlm_reply::lock_policy_res1</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00368">mdt_thread_info::mti_opdata</a>, and <a class="el" href="lu__target_8h_source.html#l00266">tgt_opdata_clear()</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f0d9433130587fdde05657ee8bd2868"></a><!-- doxytag: member="mdt_internal.h::mdt_client_compatibility" ref="a3f0d9433130587fdde05657ee8bd2868" args="(struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_client_compatibility </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00600">600</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00377">exp_connect_layout()</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="mdt__handler_8c_source.html#l00593">mdt_body_has_lov()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, and <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l03296">mdt_intent_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a638de898659fa7ca737fefe8efa00cdf"></a><!-- doxytag: member="mdt_internal.h::mdt_close" ref="a638de898659fa7ca737fefe8efa00cdf" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l02047">2047</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__internal_8h_source.html#l01011">LPROC_MDT_CLOSE</a>, <a class="el" href="pack__generic_8c_source.html#l01098">lustre_msg_get_status()</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="lustre__idl_8h_source.html#l02214">mdt_body::mbo_aclsize</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="mdt__internal_8h_source.html#l00921">mdt_check_resent()</a>, <a class="el" href="mdt__handler_8c_source.html#l00600">mdt_client_compatibility()</a>, <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__lib_8c_source.html#l01053">mdt_close_unpack()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__open_8c_source.html#l00197">mdt_empty_transno()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00689">mdt_fix_reply()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00210">mdt_reconstruct_generic()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00622">OBD_FAIL_CHECK_RESET</a>, <a class="el" href="obd__support_8h_source.html#l00218">OBD_FAIL_MDS_CLOSE_NET_REP</a>, <a class="el" href="obd__support_8h_source.html#l00181">OBD_FAIL_MDS_CLOSE_PACK</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01868">req_capsule_server_pack()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01081">RMF_LOGCOOKIES</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="layout_8c_source.html#l01058">RMF_MDT_MD</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, and <a class="el" href="lu__target_8h_source.html#l00224">tgt_session_info::tsi_reply_fail_id</a>.</p>

</div>
</div>
<a class="anchor" id="a6faf93bafd983471e23df01bffcf72ca"></a><!-- doxytag: member="mdt_internal.h::mdt_close_internal" ref="a6faf93bafd983471e23df01bffcf72ca" args="(struct mdt_thread_info *info, struct ptlrpc_request *req, struct mdt_body *repbody)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"> <em>repbody</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>not serious error since bug 3633 </p>
</p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l02009">2009</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__handles_8c_source.html#l00128">class_handle_unhash()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__open_8c_source.html#l00084">mdt_handle2mfd()</a>, <a class="el" href="mdt__lib_8c_source.html#l00811">mdt_handle_last_unlink()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__open_8c_source.html#l01934">mdt_mfd_closed()</a>, <a class="el" href="mdt__internal_8h_source.html#l00517">mdt_object_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="lustre__export_8h_source.html#l00096">mdt_export_data::med_open_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00416">mdt_thread_info::mti_close_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, and <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="aa529d020d35339fa678a54b6e483b6c9"></a><!-- doxytag: member="mdt_internal.h::mdt_close_swap_layouts" ref="aa529d020d35339fa678a54b6e483b6c9" args="(struct mdt_thread_info *info, struct mdt_object *o, struct md_attr *ma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close_swap_layouts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01797">1797</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03988">close_data::cd_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03987">close_data::cd_handle</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l00156">fid_is_zero()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00186">ldlm_is_cancel</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="ldlm__lock_8c_source.html#l02147">ldlm_reprocess_all()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="lustre__idl_8h_source.html#l00814">lu_fid_cmp()</a>, <a class="el" href="lu__object_8h_source.html#l00860">lu_object_attr()</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="mdt__internal_8h_source.html#l00273">MDT_LH_NEW</a>, <a class="el" href="mdt__internal_8h_source.html#l00271">MDT_LH_OLD</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="md__object_8h_source.html#l00328">mo_permission()</a>, <a class="el" href="md__object_8h_source.html#l00405">mo_swap_layouts()</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00245">mdt_object::mot_open_sem</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="lustre__idl_8h_source.html#l01179">OBD_CONNECT_RDONLY</a>, <a class="el" href="lustre__idl_8h_source.html#l01715">OBD_MD_CLOSE_INTENT_EXECED</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00964">RMF_CLOSE_DATA</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="osd__iam_8h_source.html#l01014">swap</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>.</p>

</div>
</div>
<a class="anchor" id="a95035cb46803b6000f529fceaabdc9b3"></a><!-- doxytag: member="mdt_internal.h::mdt_close_unpack" ref="a95035cb46803b6000f529fceaabdc9b3" args="(struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_close_unpack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l01053">1053</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__lib_8c_source.html#l00966">mdt_close_handle_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l00612">mdt_init_ucred_reint()</a>, <a class="el" href="mdt__lib_8c_source.html#l01035">mdt_intent_close_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l00909">mdt_setattr_unpack_rec()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b346a8588b106e3a65823fa348f506e"></a><!-- doxytag: member="mdt_internal.h::mdt_conn_flags" ref="a0b346a8588b106e3a65823fa348f506e" args="(struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> mdt_conn_flags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00511">511</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>.</p>

</div>
</div>
<a class="anchor" id="a40f46151227a3ee81a7ce9866473bcdc"></a><!-- doxytag: member="mdt_internal.h::mdt_cos_is_enabled" ref="a40f46151227a3ee81a7ce9866473bcdc" args="(struct mdt_device *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_cos_is_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check COS (Commit On Sharing) status. </p>
<p>Return COS flag status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>mdt device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l06104">6104</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, and <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_cos</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00556">mdt_cos_seq_show()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a86a6d9f04932e50cfaa7e23773cfcb71"></a><!-- doxytag: member="mdt_internal.h::mdt_counter_incr" ref="a86a6d9f04932e50cfaa7e23773cfcb71" args="(struct ptlrpc_request *req, int opcode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_counter_incr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>opcode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lproc_8c_source.html#l00929">929</a> of file <a class="el" href="mdt__lproc_8c_source.html">mdt_lproc.c</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00215">obd_export::exp_nid_stats</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lprocfs__status_8h_source.html#l00869">lprocfs_counter_incr()</a>, <a class="el" href="lprocfs__status_8h_source.html#l01059">lprocfs_job_stats_log()</a>, <a class="el" href="pack__generic_8c_source.html#l01251">lustre_msg_get_jobid()</a>, <a class="el" href="lustre__export_8h_source.html#l00138">nid_stat::nid_stats</a>, <a class="el" href="lustre__idl_8h_source.html#l01225">OBD_CONNECT_JOBSTATS</a>, <a class="el" href="obd_8h_source.html#l00710">obd_device::obd_md_stats</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, and <a class="el" href="structobd__device.html#aebe227afed9945c803b5bda6794bb729">obd_device::u</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00826">mdt_reint_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00172">mdt_rename_counter_tally()</a>, <a class="el" href="mdt__handler_8c_source.html#l00391">mdt_statfs()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ea821301f1291dc05ae1478e7055a6b"></a><!-- doxytag: member="mdt_internal.h::mdt_dev" ref="a3ea821301f1291dc05ae1478e7055a6b" args="(struct lu_device *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmdt__device.html">mdt_device</a>* mdt_dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00750">750</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00159">mdt_device::mdt_lu_dev</a>.</p>

<p>Referenced by <a class="el" href="mdt__internal_8h_source.html#l00914">mdt_exp2dev()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00760">mdt_obj2dt()</a>.</p>

</div>
</div>
<a class="anchor" id="a19a9ead42191b6aea592312d0dbf5093"></a><!-- doxytag: member="mdt_internal.h::mdt_dlm_mode2mdl_mode" ref="a19a9ead42191b6aea592312d0dbf5093" args="(enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__md.html#gaeff7094cae9099800057edce10196e98">mdl_mode_t</a> mdt_dlm_mode2mdl_mode </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00990">990</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="mdt__handler_8c_source.html#l00077">mdt_mdl_lock_modes</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00196">mdt_lock_pdo_mode()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2594d87b82756d41efe2fe5c226cddd"></a><!-- doxytag: member="mdt_internal.h::mdt_dump_lmm" ref="aa2594d87b82756d41efe2fe5c226cddd" args="(int level, const struct lov_mds_md *lmm, __u64 valid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_dump_lmm </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct lov_mds_md *&nbsp;</td>
          <td class="paramname"> <em>lmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>valid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00630">630</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00255">cfs_cdebug_show()</a>, <a class="el" href="fid__handler_8c_source.html#l00043">DEBUG_SUBSYSTEM</a>, <a class="el" href="lustre__user_8h_source.html#l00223">DOSTID</a>, <a class="el" href="lustre__idl_8h_source.html#l01499">lov_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustre__idl_8h_source.html#l01497">lov_ost_data_v1::l_ost_oi</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="byteorder_8h_source.html#l00054">le16_to_cpu</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lustre__user_8h_source.html#l00369">LOV_MAX_STRIPE_COUNT</a>, <a class="el" href="lustre__user_8h_source.html#l00352">LOV_PATTERN_F_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, <a class="el" href="lustre__idl_8h_source.html#l01684">OBD_MD_FLDIREA</a>, <a class="el" href="lustre__idl_8h_source.html#l00834">ostid_le_to_cpu()</a>, and <a class="el" href="lustre__user_8h_source.html#l00224">POSTID</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="aaafe08e2d1a45f5a92a0a5c1f5294eef"></a><!-- doxytag: member="mdt_internal.h::mdt_dump_lmv" ref="aaafe08e2d1a45f5a92a0a5c1f5294eef" args="(unsigned int level, const union lmv_mds_md *lmv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_dump_lmv </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionlmv__mds__md.html">lmv_mds_md</a> *&nbsp;</td>
          <td class="paramname"> <em>lmv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00663">663</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00255">cfs_cdebug_show()</a>, <a class="el" href="fid__handler_8c_source.html#l00043">DEBUG_SUBSYSTEM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="lustre__idl_8h_source.html#l02577">lmv_mds_md_v1::lmv_magic</a>, <a class="el" href="lustre__idl_8h_source.html#l02600">LMV_MAGIC_STRIPE</a>, <a class="el" href="lustre__idl_8h_source.html#l02579">lmv_mds_md_v1::lmv_master_mdt_index</a>, <a class="el" href="lustre__idl_8h_source.html#l02654">lmv_mds_md::lmv_md_v1</a>, <a class="el" href="lustre__idl_8h_source.html#l02578">lmv_mds_md_v1::lmv_stripe_count</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a711a42ad22c5f0de0d0f8f17db4be3a2"></a><!-- doxytag: member="mdt_internal.h::mdt_enable_cos" ref="a711a42ad22c5f0de0d0f8f17db4be3a2" args="(struct mdt_device *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_enable_cos </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable/disable COS (Commit On Sharing). </p>
<p>Set/Clear the COS flag in mdt <a class="el" href="structoptions.html">options</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>mdt device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>0 disables COS, other values enable COS </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l06081">6081</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="lu__object_8h_source.html#l01024">LCT_LOCAL</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l01941">mdt_device_sync()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_cos</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l00566">mdt_cos_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cea479ef31507924ab23c0eb4e0f317"></a><!-- doxytag: member="mdt_internal.h::mdt_exit_ucred" ref="a7cea479ef31507924ab23c0eb4e0f317" args="(struct mdt_thread_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_exit_ucred </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00065">65</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdt__internal_8h_source.html#l00194">mdt_device::mdt_identity_cache</a>, <a class="el" href="mdt__identity_8c_source.html#l00220">mdt_identity_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="md__object_8h_source.html#l00596">lu_ucred::uc_ginfo</a>, <a class="el" href="md__object_8h_source.html#l00597">lu_ucred::uc_identity</a>, <a class="el" href="md__object_8h_source.html#l00593">lu_ucred::uc_suppgids</a>, <a class="el" href="md__object_8h_source.html#l00584">lu_ucred::uc_valid</a>, and <a class="el" href="md__object_8h_source.html#l00578">UCRED_INIT</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00577">__mdt_init_ucred()</a>, <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00081">mdt_hsm_is_admin()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__lib_8c_source.html#l00612">mdt_init_ucred_reint()</a>, <a class="el" href="mdt__handler_8c_source.html#l03296">mdt_intent_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>, and <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a20bff9003b7a6c16d4931b48025703"></a><!-- doxytag: member="mdt_internal.h::mdt_exp2dev" ref="a0a20bff9003b7a6c16d4931b48025703" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmdt__device.html">mdt_device</a>* mdt_exp2dev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00914">914</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="mdt__internal_8h_source.html#l00750">mdt_dev()</a>, and <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>.</p>

<p>Referenced by <a class="el" href="mdt__idmap_8c_source.html#l00135">mdt_handle_idmap()</a>, <a class="el" href="mdt__handler_8c_source.html#l02192">mdt_quota_dqacq()</a>, <a class="el" href="mdt__handler_8c_source.html#l02016">mdt_quotactl()</a>, <a class="el" href="mdt__handler_8c_source.html#l01879">mdt_reint_opcode()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a5817c2197f580ba1f0d7dfdd27261102"></a><!-- doxytag: member="mdt_internal.h::mdt_export_evict" ref="a5817c2197f580ba1f0d7dfdd27261102" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_export_evict </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00558">558</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l01395">class_fail_export()</a>.</p>

<p>Referenced by <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, and <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>.</p>

</div>
</div>
<a class="anchor" id="ac719aa88d3aa3d3649e3d2ec1f647392"></a><!-- doxytag: member="mdt_internal.h::mdt_export_stats_init" ref="ac719aa88d3aa3d3649e3d2ec1f647392" args="(struct obd_device *obd, struct obd_export *exp, void *client_nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_export_stats_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>localdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize MDT per-export statistics. </p>
<p>This function sets up procfs entries for various MDT export counters. These counters are for per-client statistics tracked on the server.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>obd</em>&nbsp;</td><td>OBD device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>exp</em>&nbsp;</td><td>OBD export </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>localdata</em>&nbsp;</td><td>NID of client</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if successful </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>value on error </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__fs_8c_source.html#l00066">66</a> of file <a class="el" href="mdt__fs_8c_source.html">mdt_fs.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00215">obd_export::exp_nid_stats</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdt__internal_8h_source.html#l01026">LPROC_MDT_LAST</a>, <a class="el" href="lprocfs__status_8h_source.html#l00889">lprocfs_alloc_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00893">lprocfs_free_stats()</a>, <a class="el" href="obd__class_8h_source.html#l00430">lprocfs_nid_ldlm_stats_init()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00895">lprocfs_register_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00171">LPROCFS_STATS_FLAG_NOPERCPU</a>, <a class="el" href="mdt__fs_8c_source.html#l00045">mdt_open_files_seq_fops</a>, <a class="el" href="mdt__lproc_8c_source.html#l00944">mdt_stats_counter_init()</a>, <a class="el" href="lustre__export_8h_source.html#l00137">nid_stat::nid_proc</a>, <a class="el" href="lustre__export_8h_source.html#l00138">nid_stat::nid_stats</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="obd_8h_source.html#l00603">obd_device::obd_uses_nid_stats</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l05252">mdt_obd_connect()</a>, and <a class="el" href="mdt__handler_8c_source.html#l05333">mdt_obd_reconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="acb593eaa34b4d815780b96dd8f385865"></a><!-- doxytag: member="mdt_internal.h::mdt_fail_write" ref="acb593eaa34b4d815780b96dd8f385865" args="(const struct lu_env *env, struct dt_device *dd, int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_fail_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00896">896</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01724">dt_device::dd_ops</a>, <a class="el" href="structdt__device__operations.html#a03deb463a9aebe843829c31bbab1c34d">dt_device_operations::dt_ro</a>, <a class="el" href="obd_8h_source.html#l00459">LUSTRE_MDT_NAME</a>, <a class="el" href="obd__support_8h_source.html#l00621">OBD_FAIL_CHECK_ORSET</a>, and <a class="el" href="obd__support_8h_source.html#l00628">OBD_FAIL_ONCE</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6b87e93da24a02c8344fb9d3227bf34"></a><!-- doxytag: member="mdt_internal.h::mdt_fid_lock" ref="ac6b87e93da24a02c8344fb9d3227bf34" args="(struct ldlm_namespace *ns, struct lustre_handle *lh, enum ldlm_mode mode, union ldlm_policy_data *policy, const struct ldlm_res_id *res_id, __u64 flags, const __u64 *client_cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_fid_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__namespace.html">ldlm_namespace</a> *&nbsp;</td>
          <td class="paramname"> <em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> *&nbsp;</td>
          <td class="paramname"> <em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structldlm__res__id.html">ldlm_res_id</a> *&nbsp;</td>
          <td class="paramname"> <em>res_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>client_cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00959">959</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__dlm_8h_source.html#l00074">ELDLM_OK</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="lustre__dlm_8h_source.html#l00646">LVB_T_NONE</a>, and <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01215">mdt_pdir_hash_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9334aad57d2907a495f817604321bd3"></a><!-- doxytag: member="mdt_internal.h::mdt_fid_unlock" ref="ab9334aad57d2907a495f817604321bd3" args="(struct lustre_handle *lh, enum ldlm_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_fid_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00977">977</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="ldlm__lock_8c_source.html#l00903">ldlm_lock_decref()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ad171b5a23278bc5fc0f88ba7bbba8608"></a><!-- doxytag: member="mdt_internal.h::mdt_fix_attr_ucred" ref="ad171b5a23278bc5fc0f88ba7bbba8608" args="(struct mdt_thread_info *, __u32)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_fix_attr_ucred </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__idmap_8c_source.html#l00317">317</a> of file <a class="el" href="mdt__idmap_8c_source.html">mdt_idmap.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__idmap_8h_source.html#l00064">CFS_IDMAP_NOTFOUND</a>, <a class="el" href="libcfs__debug_8h_source.html#l00156">D_SEC</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="idmap_8c_source.html#l00409">lustre_idmap_lookup_gid()</a>, <a class="el" href="idmap_8c_source.html#l00376">lustre_idmap_lookup_uid()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00909">mdt_req2med()</a>, <a class="el" href="mdt__handler_8c_source.html#l06068">mdt_ucred_check()</a>, <a class="el" href="lustre__export_8h_source.html#l00098">mdt_export_data::med_idmap</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="packet-lustre_8c_source.html#l00249">REINT_SETATTR</a>, <a class="el" href="md__object_8h_source.html#l00592">lu_ucred::uc_fsgid</a>, and <a class="el" href="md__object_8h_source.html#l00591">lu_ucred::uc_fsuid</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a35f1821683f6168ec071e531fbc523b1"></a><!-- doxytag: member="mdt_internal.h::mdt_fix_reply" ref="a35f1821683f6168ec071e531fbc523b1" args="(struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_fix_reply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00689">689</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00123">md_attr::ma_lmv</a>, <a class="el" href="md__object_8h_source.html#l00075">MA_LMV</a>, <a class="el" href="md__object_8h_source.html#l00126">md_attr::ma_lmv_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02214">mdt_body::mbo_aclsize</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__internal_8h_source.html#l00190">mdt_device::mdt_max_mdsize</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00427">mdt_thread_info::mti_big_lmm_used</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::no_create</a>, <a class="el" href="lustre__idl_8h_source.html#l01684">OBD_MD_FLDIREA</a>, <a class="el" href="lustre__idl_8h_source.html#l01672">OBD_MD_FLEASIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01699">OBD_MD_FLMDSCAPA</a>, <a class="el" href="lustre__idl_8h_source.html#l01700">OBD_MD_FLOSSCAPA</a>, <a class="el" href="lustre__idl_8h_source.html#l01673">OBD_MD_LINKNAME</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00067">req_capsule::rc_req</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02382">req_capsule_has_field()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l02448">req_capsule_server_grow()</a>, <a class="el" href="layout_8c_source.html#l02416">req_capsule_shrink()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01075">RMF_ACL</a>, <a class="el" href="layout_8c_source.html#l01086">RMF_CAPA1</a>, <a class="el" href="layout_8c_source.html#l01091">RMF_CAPA2</a>, <a class="el" href="layout_8c_source.html#l01081">RMF_LOGCOOKIES</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="layout_8c_source.html#l01058">RMF_MDT_MD</a>, and <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l03296">mdt_intent_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d95ec6198e52fdd0aadc8073f926ac6"></a><!-- doxytag: member="mdt_internal.h::mdt_flush_identity" ref="a6d95ec6198e52fdd0aadc8073f926ac6" args="(struct upcall_cache *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_flush_identity </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__identity_8c_source.html#l00236">236</a> of file <a class="el" href="mdt__identity_8c_source.html">mdt_identity.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="upcall__cache_8h_source.html#l00141">upcall_cache_flush_idle()</a>, and <a class="el" href="upcall__cache_8c_source.html#l00387">upcall_cache_flush_one()</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l00337">lprocfs_identity_flush_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a8812ec23f8ad6f9905a189eff9e8bba7"></a><!-- doxytag: member="mdt_internal.h::mdt_fs_cleanup" ref="a8812ec23f8ad6f9905a189eff9e8bba7" args="(const struct lu_env *, struct mdt_device *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_fs_cleanup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00120">120</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00073">dt_txn_callback_del()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00168">mdt_device::mdt_bottom</a>, and <a class="el" href="mdt__internal_8h_source.html#l00186">mdt_device::mdt_txn_cb</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0e4ff03054b9397273315a46c5dd8a5"></a><!-- doxytag: member="mdt_internal.h::mdt_fs_setup" ref="ab0e4ff03054b9397273315a46c5dd8a5" args="(const struct lu_env *, struct mdt_device *, struct obd_device *, struct lustre_sb_info *lsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_fs_setup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct lustre_sb_info *&nbsp;</td>
          <td class="paramname"> <em>lsi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00097">97</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00067">dt_txn_callback_add()</a>, <a class="el" href="dt__object_8h_source.html#l01874">dt_txn_callback::dtc_cookie</a>, <a class="el" href="dt__object_8h_source.html#l01876">dt_txn_callback::dtc_linkage</a>, <a class="el" href="dt__object_8h_source.html#l01875">dt_txn_callback::dtc_tag</a>, <a class="el" href="structdt__txn__callback.html#ac794bcdc1945fadee56a4afd2199487a">dt_txn_callback::dtc_txn_commit</a>, <a class="el" href="structdt__txn__callback.html#aec86ca83a3f203ea417bb87cb01c4e2d">dt_txn_callback::dtc_txn_start</a>, <a class="el" href="structdt__txn__callback.html#afc5e0d5ffab80118a6a9d976ef50e3ad">dt_txn_callback::dtc_txn_stop</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="mdt__internal_8h_source.html#l00168">mdt_device::mdt_bottom</a>, <a class="el" href="mdt__internal_8h_source.html#l00186">mdt_device::mdt_txn_cb</a>, <a class="el" href="mdt__recovery_8c_source.html#l00082">mdt_txn_stop_cb()</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00212">OBD_FAIL_MDS_FS_SETUP</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a647fa716eeb2bad0062c436a7fa086d9"></a><!-- doxytag: member="mdt_internal.h::mdt_get_disposition" ref="a647fa716eeb2bad0062c436a7fa086d9" args="(struct ldlm_reply *rep, __u64 op_flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> mdt_get_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>op_flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00134">134</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02929">ldlm_reply::lock_policy_res1</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03296">mdt_intent_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l03431">mdt_intent_reint()</a>, and <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a96fb16cba972a4017696b683ac3d5076"></a><!-- doxytag: member="mdt_internal.h::mdt_get_info" ref="a96fb16cba972a4017696b683ac3d5076" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_get_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l05728">5728</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00136">D_IOCTL</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="obd_8h_source.html#l00738">KEY_FID2PATH</a>, <a class="el" href="obd__support_8h_source.html#l00860">KEY_IS</a>, <a class="el" href="mdt__handler_8c_source.html#l05696">mdt_rpc_fid2path()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01868">req_capsule_server_pack()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00903">RMF_GETINFO_KEY</a>, <a class="el" href="layout_8c_source.html#l00912">RMF_GETINFO_VAL</a>, <a class="el" href="layout_8c_source.html#l00907">RMF_GETINFO_VALLEN</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>, and <a class="el" href="lu__target_8h_source.html#l00204">tgt_session_info::tsi_tgt</a>.</p>

</div>
</div>
<a class="anchor" id="ab192cb2c8527a2b4e21db9b76bd77a11"></a><!-- doxytag: member="mdt_internal.h::mdt_getxattr" ref="ab192cb2c8527a2b4e21db9b76bd77a11" args="(struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_getxattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__xattr_8c_source.html#l00227">227</a> of file <a class="el" href="mdt__xattr_8c_source.html">mdt_xattr.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l02239">CFS_RMTACL_PERM</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l01020">LPROC_MDT_GETXATTR</a>, <a class="el" href="lu__object_8h_source.html#l00847">lu_object_assert_exists()</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, <a class="el" href="md__object_8h_source.html#l00102">MAY_RGETFACL</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00161">mdt_getxattr_all()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00121">mdt_getxattr_one()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00056">mdt_getxattr_pack_reply()</a>, <a class="el" href="mdt__identity_8c_source.html#l00248">mdt_identity_get_perm()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__lib_8c_source.html#l00596">mdt_init_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00909">mdt_req2med()</a>, <a class="el" href="md__object_8h_source.html#l00328">mo_permission()</a>, <a class="el" href="md__object_8h_source.html#l00397">mo_xattr_list()</a>, <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00355">mdt_thread_info::mti_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="lustre__idl_8h_source.html#l01712">OBD_MD_FLRMTRGETFACL</a>, <a class="el" href="lustre__idl_8h_source.html#l01694">OBD_MD_FLXATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01726">OBD_MD_FLXATTRALL</a>, <a class="el" href="lustre__idl_8h_source.html#l01695">OBD_MD_FLXATTRLS</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01068">RMF_EADATA</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="layout_8c_source.html#l00978">RMF_NAME</a>, <a class="el" href="lustre__net_8h_source.html#l01108">ptlrpc_request::rq_peer</a>, <a class="el" href="md__object_8h_source.html#l00597">lu_ucred::uc_identity</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03259">mdt_intent_getxattr()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04329">mdt_tgt_getxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a892f5b9d921e00fc8a251aef79024224"></a><!-- doxytag: member="mdt_internal.h::mdt_handle2mfd" ref="a892f5b9d921e00fc8a251aef79024224" args="(struct mdt_export_data *med, const struct lustre_handle *handle, bool is_replay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a>* mdt_handle2mfd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>med</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_replay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00084">84</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__handles_8c_source.html#l00155">class_handle2object()</a>, <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__export_8h_source.html#l00095">mdt_export_data::med_open_head</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00081">mdt_file_data::mfd_old_handle</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, and <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="acb37abda178d39c1d4b9618162ce5e78"></a><!-- doxytag: member="mdt_internal.h::mdt_handle_idmap" ref="acb37abda178d39c1d4b9618162ce5e78" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_handle_idmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__idmap_8c_source.html#l00135">135</a> of file <a class="el" href="mdt__idmap_8c_source.html">mdt_idmap.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00156">D_SEC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="mdt__internal_8h_source.html#l00951">is_identity_get_disabled()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="idmap_8c_source.html#l00309">lustre_idmap_add()</a>, <a class="el" href="idmap_8c_source.html#l00355">lustre_idmap_del()</a>, <a class="el" href="pack__generic_8c_source.html#l00989">lustre_msg_get_opc()</a>, <a class="el" href="curproc_8h_source.html#l00070">make_kuid()</a>, <a class="el" href="packet-lustre_8c_source.html#l00206">MDS_CONNECT</a>, <a class="el" href="mdt__internal_8h_source.html#l00914">mdt_exp2dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l00194">mdt_device::mdt_identity_cache</a>, <a class="el" href="mdt__identity_8c_source.html#l00204">mdt_identity_get()</a>, <a class="el" href="mdt__identity_8c_source.html#l00220">mdt_identity_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00909">mdt_req2med()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00126">mdt_revoke_export_locks()</a>, <a class="el" href="lustre__export_8h_source.html#l00098">mdt_export_data::med_idmap</a>, <a class="el" href="upcall__cache_8h_source.html#l00080">md_identity::mi_gid</a>, <a class="el" href="upcall__cache_8h_source.html#l00079">md_identity::mi_uid</a>, <a class="el" href="lustre__sec_8h_source.html#l00891">ptlrpc_user_desc::pud_gid</a>, <a class="el" href="lustre__sec_8h_source.html#l00890">ptlrpc_user_desc::pud_uid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="lustre__idl_8h_source.html#l03594">SEC_CTX_FINI</a>, <a class="el" href="lustre__idl_8h_source.html#l03592">SEC_CTX_INIT</a>, <a class="el" href="lustre__idl_8h_source.html#l03593">SEC_CTX_INIT_CONT</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="curproc_8h_source.html#l00095">uid_valid()</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__idmap_8c_source.html#l00075">mdt_init_idmap()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02170">mdt_sec_ctx_handle()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b3c82cb520524b4b63723f1d5081ec1"></a><!-- doxytag: member="mdt_internal.h::mdt_handle_last_unlink" ref="a6b3c82cb520524b4b63723f1d5081ec1" args="(struct mdt_thread_info *, struct mdt_object *, const struct md_attr *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_handle_last_unlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00811">811</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02213">mdt_body::mbo_eadatasize</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l00501">mdt_pack_attr2body()</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a60d2d4b01f96b6bc65db4e5b0a32ec85"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_action" ref="a60d2d4b01f96b6bc65db4e5b0a32ec85" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve undergoing HSM requests for the fid provided in RPC body. </p>
<p>Current requests are read from <a class="el" href="structcoordinator.html">coordinator</a> states.</p>
<p>This is MDS_HSM_ACTION RPC handler. </p>

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00371">371</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01289">hsm_action_list::hal_fsname</a>, <a class="el" href="lustre__user_8h_source.html#l01318">hal_size()</a>, <a class="el" href="lustre__user_8h_source.html#l01280">HAL_VERSION</a>, <a class="el" href="lustre__user_8h_source.html#l01283">hsm_action_list::hal_version</a>, <a class="el" href="lustre__user_8h_source.html#l01123">hsm_current_action::hca_action</a>, <a class="el" href="lustre__user_8h_source.html#l01124">hsm_current_action::hca_location</a>, <a class="el" href="lustre__user_8h_source.html#l01121">hsm_current_action::hca_state</a>, <a class="el" href="lustre__user_8h_source.html#l01071">HPS_RUNNING</a>, <a class="el" href="lustre__user_8h_source.html#l01070">HPS_WAITING</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01131">HUA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01135">HUA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01130">HUA_NONE</a>, <a class="el" href="lustre__user_8h_source.html#l01134">HUA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01132">HUA_RESTORE</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00045">MDT_HSM_ALLOC</a>, <a class="el" href="mdt__hsm_8c_source.html#l00053">MDT_HSM_FREE</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">mdt_hsm_get_actions()</a>, <a class="el" href="mdt__lib_8c_source.html#l00596">mdt_init_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="lustre__user_8h_source.html#l00532">obd_uuid2fsname()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01174">RMF_MDS_HSM_CURRENT_ACTION</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, <a class="el" href="lu__target_8h_source.html#l00206">tgt_session_info::tsi_mdt_body</a>, and <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>.</p>

</div>
</div>
<a class="anchor" id="a158d3c18482571fa7d97a2fb4fa8dd9f"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_add_actions" ref="a158d3c18482571fa7d97a2fb4fa8dd9f" args="(struct mdt_thread_info *info, struct hsm_action_list *hal, __u64 *compound_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_add_actions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> *&nbsp;</td>
          <td class="paramname"> <em>compound_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>register a list of requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN] list of requests </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>compound_id</em>&nbsp;</td><td>[OUT] id of the compound request </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure in case of restore, caller must hold layout lock </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">298</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="mdt__internal_8h_source.html#l00119">coordinator::cdt_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00134">coordinator::cdt_default_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00086">CDT_NONBLOCKING_RESTORE</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="mdt__internal_8h_source.html#l00488">cdt_restore_handle::crh_extent</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02823">ldlm_extent::end</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00221">hal_is_sane()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00171">hsm_action_is_needed()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00249">hsm_action_permission()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="md__object_8h_source.html#l00618">md_capable()</a>, <a class="el" href="lustre__idl_8h_source.html#l02081">MDS_INODELOCK_LAYOUT</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00124">mdt_agent_record_add()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00774">mdt_hsm_cdt_wakeup()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01648">mdt_hsm_is_action_compat()</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="md__object_8h_source.html#l00111">md_hsm::mh_arch_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00845">OBD_SLAB_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l02822">ldlm_extent::start</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>.</p>

</div>
</div>
<a class="anchor" id="ac23fca3bab32403469666065055076a9"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_add_hal" ref="ac23fca3bab32403469666065055076a9" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal, struct obd_uuid *uuid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_add_hal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>register all requests from an hal in the memory list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN] request </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[OUT] in case of CANCEL, the uuid of the agent which is running the CT </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01011">1011</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03227">ARS_CANCELED</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00462">cdt_agent_req::car_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">mdt_cdt_add_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00238">mdt_cdt_alloc_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="md__object_8h_source.html#l00111">md_hsm::mh_arch_id</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a20bcec359b4b9d1c529f6b2b3388c30f"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_agent_register" ref="a20bcec359b4b9d1c529f6b2b3388c30f" args="(struct mdt_thread_info *info, const struct obd_uuid *uuid, int nr_archives, __u32 *archive_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_agent_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nr_archives</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32 *&nbsp;</td>
          <td class="paramname"> <em>archive_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>register a copy tool </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] MDT context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[IN] client UUID to be registered </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>[IN] number of archives agent serves </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive_id</em>&nbsp;</td><td>[IN] vector of archive number served by the copytool </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00078">78</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__internal_8h_source.html#l00477">hsm_agent::ha_archive_cnt</a>, <a class="el" href="mdt__internal_8h_source.html#l00476">hsm_agent::ha_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00482">hsm_agent::ha_failure</a>, <a class="el" href="mdt__internal_8h_source.html#l00474">hsm_agent::ha_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00479">hsm_agent::ha_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00480">hsm_agent::ha_success</a>, <a class="el" href="mdt__internal_8h_source.html#l00475">hsm_agent::ha_uuid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00057">mdt_hsm_agent_lookup()</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00153">mdt_hsm_agent_register_mask()</a>.</p>

</div>
</div>
<a class="anchor" id="aeedcafd0c9362f67d68b4a6ccf0450e9"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_agent_register_mask" ref="aeedcafd0c9362f67d68b4a6ccf0450e9" args="(struct mdt_thread_info *info, const struct obd_uuid *uuid, __u32 archive_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_agent_register_mask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>archive_mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>register a copy tool </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] MDT context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[IN] uuid to be registered </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive_mask</em>&nbsp;</td><td>[IN] bitmask of archive number served by the copytool </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00153">153</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00078">mdt_hsm_agent_register()</a>, <a class="el" href="obd__support_8h_source.html#l00708">OBD_ALLOC</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm_8c_source.html#l00146">mdt_hsm_ct_register()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0c3f5ec4cb4656ab69af45c1484b6ee"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_agent_send" ref="ab0c3f5ec4cb4656ab69af45c1484b6ee" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal, bool purge)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_agent_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>purge</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a compound request to the agent </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN] request (can be a kuc payload) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>purge</em>&nbsp;</td><td>[IN] purge mode (no record) </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure This function supposes:</p>
<ul>
<li>all actions are for the same archive number</li>
<li>in case of cancel, all cancel are for the same agent This implies that request split has to be done before when building the hal </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">322</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="lustre__idl_8h_source.html#l03226">ARS_FAILED</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="pack__generic_8c_source.html#l01574">do_set_info_async()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_disconnected</a>, <a class="el" href="lustre__export_8h_source.html#l00214">obd_export::exp_imp_reverse</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01318">hal_size()</a>, <a class="el" href="lustre__user_8h_source.html#l01213">HMT_ACTION_LIST</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="obd_8h_source.html#l00746">KEY_HSM_COPYTOOL_SEND</a>, <a class="el" href="genops_8c_source.html#l01914">kuc_alloc()</a>, <a class="el" href="genops_8c_source.html#l01933">kuc_free()</a>, <a class="el" href="genops_8c_source.html#l01893">kuc_len()</a>, <a class="el" href="genops_8c_source.html#l01903">kuc_ptr()</a>, <a class="el" href="uapi__kernelcomm_8h_source.html#l00061">KUC_TRANSPORT_HSM</a>, <a class="el" href="lustre__idl_8h_source.html#l02773">LDLM_SET_INFO</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="packet-lustre_8c_source.html#l00076">LUSTRE_OBD_VERSION</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">mdt_cdt_remove_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00191">mdt_hsm_agent_unregister()</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00277">mdt_hsm_find_best_agent()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01648">mdt_hsm_is_action_compat()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00623">mdt_hsm_restore_hdl_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>.</p>

</div>
</div>
<a class="anchor" id="a809a32bc4503b86a8e45b9393de5c241"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_agent_unregister" ref="a809a32bc4503b86a8e45b9393de5c241" args="(struct mdt_thread_info *info, const struct obd_uuid *uuid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_agent_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>unregister a copy tool </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] MDT context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[IN] uuid to be unregistered </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00191">191</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__internal_8h_source.html#l00477">hsm_agent::ha_archive_cnt</a>, <a class="el" href="mdt__internal_8h_source.html#l00476">hsm_agent::ha_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00474">hsm_agent::ha_list</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00057">mdt_hsm_agent_lookup()</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="obd__support_8h_source.html#l00776">OBD_FREE</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, and <a class="el" href="mdt__hsm_8c_source.html#l00169">mdt_hsm_ct_unregister()</a>.</p>

</div>
</div>
<a class="anchor" id="a2590cfa39d2821765fd81a8e2cddd35f"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_agent_update_statistics" ref="a2590cfa39d2821765fd81a8e2cddd35f" args="(struct coordinator *cdt, int succ_rq, int fail_rq, int new_rq, const struct obd_uuid *uuid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_agent_update_statistics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>succ_rq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fail_rq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>new_rq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update agent statistics </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] MDT device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>succ_rq</em>&nbsp;</td><td>[IN] number of success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fail_rq</em>&nbsp;</td><td>[IN] number of failure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>new_rq</em>&nbsp;</td><td>[IN] number of new requests </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[IN] agent uuid if all counters == 0, clear counters </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00237">237</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__internal_8h_source.html#l00482">hsm_agent::ha_failure</a>, <a class="el" href="mdt__internal_8h_source.html#l00474">hsm_agent::ha_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00479">hsm_agent::ha_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00480">hsm_agent::ha_success</a>, <a class="el" href="mdt__internal_8h_source.html#l00475">hsm_agent::ha_uuid</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00336">mdt_cdt_add_request()</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a43a0f5056d05368cb3f3d89442172bcd"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_attr_set" ref="a43a0f5056d05368cb3f3d89442172bcd" args="(struct mdt_thread_info *info, struct mdt_object *obj, const struct md_hsm *mh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_attr_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>mh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update on-disk HSM attributes. </p>

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00058">58</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="md__attrs_8c_source.html#l00129">lustre_hsm2buf()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="md__object_8h_source.html#l00387">mo_xattr_set()</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00429">mdt_thread_info::mti_xattr_buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__idl_8h_source.html#l01602">XATTR_NAME_HSM</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, and <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a397201e1ec41b4e0954b9d8320b2e282"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_control_seq_show" ref="a397201e1ec41b4e0954b9d8320b2e282" args="(struct seq_file *m, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_control_seq_show </td>
          <td>(</td>
          <td class="paramtype">struct seq_file *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01968">1968</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00101">CDT_DISABLE</a>, <a class="el" href="mdt__internal_8h_source.html#l00099">CDT_INIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00100">CDT_RUNNING</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="aec2d2c33e1ecb9ab4970fe91d9dc4215"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_control_seq_write" ref="aec2d2c33e1ecb9ab4970fe91d9dc4215" args="(struct file *file, const char __user *buffer, size_t count, loff_t *off)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t mdt_hsm_cdt_control_seq_write </td>
          <td>(</td>
          <td class="paramtype">struct file *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char __user *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&nbsp;</td>
          <td class="paramname"> <em>off</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01900">1900</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00101">CDT_DISABLE</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01894">CDT_DISABLE_CMD</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01892">CDT_ENABLE_CMD</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01896">CDT_HELP_CMD</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01897">CDT_MAX_CMD_LEN</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01895">CDT_PURGE_CMD</a>, <a class="el" href="mdt__internal_8h_source.html#l00100">CDT_RUNNING</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01893">CDT_STOP_CMD</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00774">mdt_hsm_cdt_wakeup()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mmap__cat_8c_source.html#l00045">usage</a>.</p>

</div>
</div>
<a class="anchor" id="a8dcc4f77765f8600a7a2edcd585d7049"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_fini" ref="a8dcc4f77765f8600a7a2edcd585d7049" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>free a <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00852">852</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8c_source.html#l01786">lu_context_exit()</a>, <a class="el" href="lu__object_8c_source.html#l01755">lu_context_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c3974f6068537ee2ca1cefd4748640f"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_init" ref="a6c3974f6068537ee2ca1cefd4748640f" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize <a class="el" href="structcoordinator.html">coordinator</a> struct </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00795">795</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00133">coordinator::cdt_active_req_timeout</a>, <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="mdt__internal_8h_source.html#l00134">coordinator::cdt_default_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00096">CDT_DEFAULT_POLICY</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00131">coordinator::cdt_grace_delay</a>, <a class="el" href="mdt__internal_8h_source.html#l00123">coordinator::cdt_llog_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00130">coordinator::cdt_loop_period</a>, <a class="el" href="mdt__internal_8h_source.html#l00137">coordinator::cdt_max_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00115">coordinator::cdt_session</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00745">hsm_init_ucred()</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="lu__object_8h_source.html#l01028">LCT_SERVER_SESSION</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8h_source.html#l01277">lu_env::le_ses</a>, <a class="el" href="lu__object_8c_source.html#l01776">lu_context_enter()</a>, <a class="el" href="lu__object_8c_source.html#l01729">lu_context_init()</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="acc0c8f1f89e01ca149ac5783131dca4e"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_start" ref="acc0c8f1f89e01ca149ac5783131dca4e" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>start a <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00871">871</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00119">coordinator::cdt_compound_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00096">CDT_DEFAULT_POLICY</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00149">coordinator::cdt_group_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00099">CDT_INIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00121">coordinator::cdt_last_cookie</a>, <a class="el" href="mdt__internal_8h_source.html#l00150">coordinator::cdt_other_request_mask</a>, <a class="el" href="mdt__internal_8h_source.html#l00117">coordinator::cdt_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00088">CDT_POLICY_LAST</a>, <a class="el" href="mdt__internal_8h_source.html#l00089">CDT_POLICY_SHIFT_COUNT</a>, <a class="el" href="mdt__internal_8h_source.html#l00139">coordinator::cdt_request_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00100">CDT_RUNNING</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="mdt__internal_8h_source.html#l00148">coordinator::cdt_user_request_mask</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="osd__iam_8h_source.html#l00054">CLASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00048">dump_requests()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00731">mdt_hsm_pending_restore()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_coordinator</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a4555384b448ec81ce060dc5dfe25fda0"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_stop" ref="a4555384b448ec81ce060dc5dfe25fda0" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>stop a <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00941">941</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00458">cdt_agent_req::car_request_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="mdt__internal_8h_source.html#l00113">coordinator::cdt_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00126">coordinator::cdt_request_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00141">coordinator::cdt_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00102">CDT_STOPPING</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00489">cdt_restore_handle::crh_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00474">hsm_agent::ha_list</a>, <a class="el" href="lu__object_8h_source.html#l01273">lu_env::le_ctx</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__handler_8c_source.html#l00108">mdt_hsm_cdt_kmem</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="structmdt__device.html#a94cdf8cdcfc80fa823c06a2224c26a32">mdt_device::mdt_opts</a>, <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>, <a class="el" href="mdt__internal_8h_source.html#l00176">mdt_device::mo_coordinator</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00857">OBD_SLAB_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a994ee79f8b760d995220674956f00cec"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_wakeup" ref="a994ee79f8b760d995220674956f00cec" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_cdt_wakeup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>wake up <a class="el" href="structcoordinator.html">coordinator</a> thread </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mdt</em>&nbsp;</td><td>[IN] device </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00774">774</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="mdt__internal_8h_source.html#l00112">coordinator::cdt_thread</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01498">SVC_EVENT</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, and <a class="el" href="lustre__net_8h_source.html#l01515">ptlrpc_thread::t_flags</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>.</p>

</div>
</div>
<a class="anchor" id="adc10087711d7d674734d277d9e3decc4"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_coordinator_update" ref="adc10087711d7d674734d277d9e3decc4" args="(struct mdt_thread_info *mti, struct hsm_progress_kernel *pgs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_coordinator_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *&nbsp;</td>
          <td class="paramname"> <em>pgs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update status of a request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgs</em>&nbsp;</td><td>[IN] progress of the copy tool </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00521">521</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm_8c_source.html#l00108">mdt_hsm_progress()</a>.</p>

</div>
</div>
<a class="anchor" id="a936691a61af675c0aaa1a1bbcfddf51f"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_ct_register" ref="a936691a61af675c0aaa1a1bbcfddf51f" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_ct_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00146">146</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00153">mdt_hsm_agent_register_mask()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00081">mdt_hsm_is_admin()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01185">RMF_MDS_HSM_ARCHIVE</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, and <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>.</p>

</div>
</div>
<a class="anchor" id="a4d6f5918c0214d00ae62b7cb5943320b"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_ct_unregister" ref="a4d6f5918c0214d00ae62b7cb5943320b" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_ct_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00169">169</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00191">mdt_hsm_agent_unregister()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00081">mdt_hsm_is_admin()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, <a class="el" href="lu__target_8h_source.html#l00202">tgt_session_info::tsi_exp</a>, and <a class="el" href="lu__target_8h_source.html#l00206">tgt_session_info::tsi_mdt_body</a>.</p>

</div>
</div>
<a class="anchor" id="ab83b175e5842c0a11100f2512cefc949"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_dump_hal" ref="ab83b175e5842c0a11100f2512cefc949" args="(int level, const char *prefix, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_hsm_dump_hal </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00098">98</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01244">hsm_action_item::hai_cookie</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01257">hai_dump_data_field()</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01245">hsm_action_item::hai_gid</a>, <a class="el" href="lustre__user_8h_source.html#l01239">hsm_action_item::hai_len</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01285">hsm_action_list::hal_compound_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01283">hsm_action_list::hal_version</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

</div>
</div>
<a class="anchor" id="a9d13dc794fa8f8885ee9c3b098675dd1"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_find_best_agent" ref="a9d13dc794fa8f8885ee9c3b098675dd1" args="(struct coordinator *cdt, __u32 archive, struct obd_uuid *uuid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_find_best_agent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find the best agent </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>archive</em>&nbsp;</td><td>[IN] archive number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uuid</em>&nbsp;</td><td>[OUT] agent who can serve archive </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00277">277</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00125">coordinator::cdt_agent_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00143">coordinator::cdt_agents</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00477">hsm_agent::ha_archive_cnt</a>, <a class="el" href="mdt__internal_8h_source.html#l00476">hsm_agent::ha_archive_id</a>, <a class="el" href="mdt__internal_8h_source.html#l00474">hsm_agent::ha_list</a>, <a class="el" href="mdt__internal_8h_source.html#l00479">hsm_agent::ha_requests</a>, <a class="el" href="mdt__internal_8h_source.html#l00475">hsm_agent::ha_uuid</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a8754bc2c9de3b102e98e535662c3905c"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_get_actions" ref="a8754bc2c9de3b102e98e535662c3905c" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_get_actions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get registered action on a FID list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN/OUT] requests </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00549">549</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00130">hsm_find_compatible()</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00098">mdt_cdt_get_work_done()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f4b191a27ceae23833d720870e40a2d"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_get_md_hsm" ref="a6f4b191a27ceae23833d720870e40a2d" args="(struct mdt_thread_info *mti, const struct lu_fid *fid, struct md_hsm *hsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_hsm_get_md_hsm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>hsm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get obj and HSM attributes on a fid </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] object fid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hsm</em>&nbsp;</td><td>[OUT] HSM meta data </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td>or error (-ENOENT if not found) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00060">60</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a7183fd9b07713d8f78871fcb96fd715f"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_get_running" ref="a7183fd9b07713d8f78871fcb96fd715f" args="(struct mdt_thread_info *mti, struct hsm_action_list *hal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_get_running </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__action__list.html">hsm_action_list</a> *&nbsp;</td>
          <td class="paramname"> <em>hal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get running action on a FID list or from cookie </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal</em>&nbsp;</td><td>[IN/OUT] requests </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00482">482</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00369">mdt_cdt_find_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a79b7325228a5903643769041fc64bf56"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_is_action_compat" ref="a79b7325228a5903643769041fc64bf56" args="(const struct hsm_action_item *hai, const int hal_an, const __u64 rq_flags, const struct md_hsm *hsm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdt_hsm_is_action_compat </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structhsm__action__item.html">hsm_action_item</a> *&nbsp;</td>
          <td class="paramname"> <em>hai</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>hal_an</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>rq_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structmd__hsm.html">md_hsm</a> *&nbsp;</td>
          <td class="paramname"> <em>hsm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check if a request is compatible with file status </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hai</em>&nbsp;</td><td>[IN] request description </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hal_an</em>&nbsp;</td><td>[IN] request archive number (not used) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rq_flags</em>&nbsp;</td><td>[IN] request flags </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hsm</em>&nbsp;</td><td>[IN] file HSM metadata </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01648">1648</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01243">hsm_action_item::hai_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01048">HS_ARCHIVED</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01051">HS_LOST</a>, <a class="el" href="lustre__user_8h_source.html#l01050">HS_NOARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01087">hsm_extent::offset</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c8b54b66bd9aa8b7b4f3999ee5e333d"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_progress" ref="a4c8b54b66bd9aa8b7b4f3999ee5e333d" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_progress </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extract information coming from a copytool and asks <a class="el" href="structcoordinator.html">coordinator</a> to update a request status depending on the update content. </p>
<p>Copytools could use this to report failure in their process.</p>
<p>This is HSM_PROGRESS RPC handler. </p>

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00108">108</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__user_8h_source.html#l01349">HP_FLAG_RETRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03738">hsm_progress_kernel::hpk_extent</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01088">hsm_extent::length</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="errno_8c_source.html#l00360">lustre_errno_ntoh()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00521">mdt_hsm_coordinator_update()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00081">mdt_hsm_is_admin()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01169">RMF_MDS_HSM_PROGRESS</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, <a class="el" href="lu__target_8h_source.html#l00206">tgt_session_info::tsi_mdt_body</a>, and <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>.</p>

</div>
</div>
<a class="anchor" id="a47b649f2238bf0991480cefcd5f232ea"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_request" ref="a47b649f2238bf0991480cefcd5f232ea" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process the HSM actions described in a struct <a class="el" href="structhsm__user__request.html">hsm_user_request</a>. </p>
<p>The action described in hur will be send to <a class="el" href="structcoordinator.html">coordinator</a> to be saved and processed later or either handled directly if hur.hur_action is HUA_RELEASE.</p>
<p>This is MDS_HSM_REQUEST RPC handler. </p>

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00471">471</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01303">hai_first()</a>, <a class="el" href="lustre__user_8h_source.html#l01311">hai_next()</a>, <a class="el" href="lustre__user_8h_source.html#l01287">hsm_action_list::hal_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01284">hsm_action_list::hal_count</a>, <a class="el" href="lustre__user_8h_source.html#l01286">hsm_action_list::hal_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01289">hsm_action_list::hal_fsname</a>, <a class="el" href="lustre__user_8h_source.html#l01318">hal_size()</a>, <a class="el" href="lustre__user_8h_source.html#l01280">HAL_VERSION</a>, <a class="el" href="lustre__user_8h_source.html#l01283">hsm_action_list::hal_version</a>, <a class="el" href="lustre__user_8h_source.html#l01163">hsm_request::hr_action</a>, <a class="el" href="lustre__user_8h_source.html#l01164">hsm_request::hr_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01167">hsm_request::hr_data_len</a>, <a class="el" href="lustre__user_8h_source.html#l01165">hsm_request::hr_flags</a>, <a class="el" href="lustre__user_8h_source.html#l01166">hsm_request::hr_itemcount</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01222">HSMA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01218">HSMA_NONE</a>, <a class="el" href="lustre__user_8h_source.html#l01221">HSMA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01131">HUA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01135">HUA_CANCEL</a>, <a class="el" href="lustre__user_8h_source.html#l01133">HUA_RELEASE</a>, <a class="el" href="lustre__user_8h_source.html#l01134">HUA_REMOVE</a>, <a class="el" href="lustre__user_8h_source.html#l01132">HUA_RESTORE</a>, <a class="el" href="lustre__user_8h_source.html#l01172">hsm_user_item::hui_extent</a>, <a class="el" href="lustre__user_8h_source.html#l01171">hsm_user_item::hui_fid</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00045">MDT_HSM_ALLOC</a>, <a class="el" href="mdt__hsm_8c_source.html#l00053">MDT_HSM_FREE</a>, <a class="el" href="mdt__lib_8c_source.html#l00596">mdt_init_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l02959">MTI_NAME_MAXLEN</a>, <a class="el" href="lustre__user_8h_source.html#l00532">obd_uuid2fsname()</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l00865">RMF_GENERIC_DATA</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00301">RMF_MDS_HSM_REQUEST</a>, <a class="el" href="layout_8c_source.html#l01179">RMF_MDS_HSM_USER_ITEM</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, <a class="el" href="lu__target_8h_source.html#l00206">tgt_session_info::tsi_mdt_body</a>, and <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>.</p>

</div>
</div>
<a class="anchor" id="ac5a880beb355228713092f559ba46a1c"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_restore_hdl_find" ref="ac5a880beb355228713092f559ba46a1c" args="(struct coordinator *cdt, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a>* mdt_hsm_restore_hdl_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoordinator.html">coordinator</a> *&nbsp;</td>
          <td class="paramname"> <em>cdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>lookup a restore handle by FID caller needs to hold cdt_restore_lock </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cdt</em>&nbsp;</td><td>[IN] <a class="el" href="structcoordinator.html">coordinator</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] FID </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structcdt__restore__handle.html">cdt_restore_handle</a></em>&nbsp;</td><td>found </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l00623">623</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>.</p>

</div>
</div>
<a class="anchor" id="a07bbd4dccfe6bf02dffa18e7d81bef3d"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_restore_is_running" ref="a07bbd4dccfe6bf02dffa18e7d81bef3d" args="(struct mdt_thread_info *mti, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mdt_hsm_restore_is_running </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check if a restore is running on a FID this is redundant with mdt_hsm_coordinator_get_running() but as it can be called frequently when getting attr we make an optimized/simpler version only for a FID </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>[IN] file FID </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00519">519</a> of file <a class="el" href="mdt__hsm__cdt__client_8c_source.html">mdt_hsm_cdt_client.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00145">coordinator::cdt_restore_hdl</a>, <a class="el" href="mdt__internal_8h_source.html#l00128">coordinator::cdt_restore_lock</a>, <a class="el" href="mdt__internal_8h_source.html#l00487">cdt_restore_handle::crh_fid</a>, <a class="el" href="mdt__internal_8h_source.html#l00486">cdt_restore_handle::crh_list</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="abaa01318221c7e8909a7eb09677fee88"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_state_get" ref="abaa01318221c7e8909a7eb09677fee88" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_state_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the current HSM flags, archive id and undergoing HSM requests for the fid provided in RPC body. </p>
<p>Current requests are read from <a class="el" href="structcoordinator.html">coordinator</a> states.</p>
<p>This is MDS_HSM_STATE_GET RPC handler. </p>

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00197">197</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01100">hsm_user_state::hus_archive_id</a>, <a class="el" href="lustre__user_8h_source.html#l01099">hsm_user_state::hus_states</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00596">mdt_init_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00270">MDT_LH_CHILD</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="md__object_8h_source.html#l00111">md_hsm::mh_arch_id</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00355">mdt_thread_info::mti_object</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01159">RMF_HSM_USER_STATE</a>, <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>, and <a class="el" href="lu__target_8h_source.html#l00193">tgt_session_info::tsi_pill</a>.</p>

</div>
</div>
<a class="anchor" id="a7c5813c8ac14de83cb3be92368223e23"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_state_set" ref="a7c5813c8ac14de83cb3be92368223e23" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_state_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change HSM state and archive number of a file. </p>
<p>Archive number is changed iif the value is not 0. The new flagset that will be computed should result in a coherent state. This function checks that flags are compatible.</p>
<p>This is MDS_HSM_STATE_SET RPC handler. </p>

<p>Definition at line <a class="el" href="mdt__hsm_8c_source.html#l00254">254</a> of file <a class="el" href="mdt__hsm_8c_source.html">mdt_hsm.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01048">HS_ARCHIVED</a>, <a class="el" href="lustre__user_8h_source.html#l01046">HS_DIRTY</a>, <a class="el" href="lustre__user_8h_source.html#l01045">HS_EXISTS</a>, <a class="el" href="lustre__user_8h_source.html#l01051">HS_LOST</a>, <a class="el" href="lustre__user_8h_source.html#l01047">HS_RELEASED</a>, <a class="el" href="lustre__user_8h_source.html#l01064">HSM_FLAGS_MASK</a>, <a class="el" href="lustre__user_8h_source.html#l01055">HSM_USER_MASK</a>, <a class="el" href="lustre__idl_8h_source.html#l01739">hsm_state_set::hss_archive_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01734">HSS_ARCHIVE_ID</a>, <a class="el" href="lustre__idl_8h_source.html#l01733">HSS_CLEARMASK</a>, <a class="el" href="lustre__idl_8h_source.html#l01741">hsm_state_set::hss_clearmask</a>, <a class="el" href="lustre__idl_8h_source.html#l01732">HSS_SETMASK</a>, <a class="el" href="lustre__idl_8h_source.html#l01740">hsm_state_set::hss_setmask</a>, <a class="el" href="lustre__idl_8h_source.html#l01738">hsm_state_set::hss_valid</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="lustre__idl_8h_source.html#l00214">LL_HSM_MAX_ARCHIVE</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="md__object_8h_source.html#l00121">md_attr::ma_hsm</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="md__object_8h_source.html#l00618">md_capable()</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__lib_8c_source.html#l00596">mdt_init_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00270">MDT_LH_CHILD</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="md__object_8h_source.html#l00111">md_hsm::mh_arch_id</a>, <a class="el" href="md__object_8h_source.html#l00110">md_hsm::mh_flags</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00355">mdt_thread_info::mti_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l01164">RMF_HSM_STATE_SET</a>, and <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b8427c08750b3ff8dac7dd04a04a683"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_update_request_state" ref="a3b8427c08750b3ff8dac7dd04a04a683" args="(struct mdt_thread_info *mti, struct hsm_progress_kernel *pgs, const int update_record)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_hsm_update_request_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhsm__progress__kernel.html">hsm_progress_kernel</a> *&nbsp;</td>
          <td class="paramname"> <em>pgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>update_record</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update status of a request </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mti</em>&nbsp;</td><td>[IN] context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pgs</em>&nbsp;</td><td>[IN] progress of the copy tool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>update_record</em>&nbsp;</td><td>[IN] update llog record </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ve</em>&nbsp;</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__coordinator_8c_source.html#l01382">1382</a> of file <a class="el" href="mdt__coordinator_8c_source.html">mdt_coordinator.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03231">agent_req_status2name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00464">cdt_agent_req::car_canceled</a>, <a class="el" href="mdt__internal_8h_source.html#l00467">cdt_agent_req::car_hai</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="mdt__internal_8h_source.html#l00118">coordinator::cdt_state</a>, <a class="el" href="mdt__internal_8h_source.html#l00098">CDT_STOPPED</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__user_8h_source.html#l01240">hsm_action_item::hai_action</a>, <a class="el" href="lustre__user_8h_source.html#l01242">hsm_action_item::hai_dfid</a>, <a class="el" href="lustre__user_8h_source.html#l01241">hsm_action_item::hai_fid</a>, <a class="el" href="lustre__user_8h_source.html#l01348">HP_FLAG_COMPLETED</a>, <a class="el" href="lustre__idl_8h_source.html#l03737">hsm_progress_kernel::hpk_cookie</a>, <a class="el" href="lustre__idl_8h_source.html#l03740">hsm_progress_kernel::hpk_errval</a>, <a class="el" href="lustre__idl_8h_source.html#l03736">hsm_progress_kernel::hpk_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l03739">hsm_progress_kernel::hpk_flags</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="lustre__user_8h_source.html#l01225">hsm_copytool_action2name()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00745">hsm_init_ucred()</a>, <a class="el" href="lustre__user_8h_source.html#l01219">HSMA_ARCHIVE</a>, <a class="el" href="lustre__user_8h_source.html#l01220">HSMA_RESTORE</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lustre__idl_8h_source.html#l00801">lu_fid_eq()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00294">mdt_cdt_put_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00389">mdt_cdt_remove_request()</a>, <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00424">mdt_cdt_update_request()</a>, <a class="el" href="mdt__internal_8h_source.html#l00218">mdt_device::mdt_coordinator</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00774">mdt_hsm_cdt_wakeup()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="lustre__rsync_8c_source.html#l00187">status</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, and <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00521">mdt_hsm_coordinator_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a771bb82e3c47a5162ec53653b2ce6350"></a><!-- doxytag: member="mdt_internal.h::mdt_identity_get" ref="a771bb82e3c47a5162ec53653b2ce6350" args="(struct upcall_cache *, __u32)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmd__identity.html">md_identity</a>* mdt_identity_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__identity_8c_source.html#l00204">204</a> of file <a class="el" href="mdt__identity_8c_source.html">mdt_identity.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="upcall__cache_8h_source.html#l00095">upcall_cache_entry::identity</a>, <a class="el" href="structupcall__cache__entry.html#a1adc6cfefefc1387e16ac6de9541b118">upcall_cache_entry::u</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="upcall__cache_8c_source.html#l00150">upcall_cache_get_entry()</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00135">mdt_handle_idmap()</a>, <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00466">old_init_ucred_common()</a>.</p>

</div>
</div>
<a class="anchor" id="ac195a5c0a97c7b7825d69a38a10ffedd"></a><!-- doxytag: member="mdt_internal.h::mdt_identity_get_perm" ref="ac195a5c0a97c7b7825d69a38a10ffedd" args="(struct md_identity *, __u32, lnet_nid_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 mdt_identity_get_perm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmd__identity.html">md_identity</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__identity_8c_source.html#l00248">248</a> of file <a class="el" href="mdt__identity_8c_source.html">mdt_identity.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02238">CFS_SETGRP_PERM</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00072">LNET_NID_ANY</a>, <a class="el" href="upcall__cache_8h_source.html#l00082">md_identity::mi_nperms</a>, <a class="el" href="upcall__cache_8h_source.html#l00083">md_identity::mi_perms</a>, <a class="el" href="upcall__cache_8h_source.html#l00073">md_perm::mp_nid</a>, and <a class="el" href="upcall__cache_8h_source.html#l00074">md_perm::mp_perm</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00334">allow_client_chgrp()</a>, <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>.</p>

</div>
</div>
<a class="anchor" id="a476670fa7450e27f33c8e3a2a3a87f6f"></a><!-- doxytag: member="mdt_internal.h::mdt_identity_put" ref="a476670fa7450e27f33c8e3a2a3a87f6f" args="(struct upcall_cache *, struct md_identity *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_identity_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structupcall__cache.html">upcall_cache</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__identity.html">md_identity</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__identity_8c_source.html#l00220">220</a> of file <a class="el" href="mdt__identity_8c_source.html">mdt_identity.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="upcall__cache_8h_source.html#l00078">md_identity::mi_uc_entry</a>, and <a class="el" href="upcall__cache_8c_source.html#l00274">upcall_cache_put_entry()</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00135">mdt_handle_idmap()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>.</p>

</div>
</div>
<a class="anchor" id="aa88ec9a6de32d40d173b570944c80479"></a><!-- doxytag: member="mdt_internal.h::mdt_info_req" ref="aa88ec9a6de32d40d173b570944c80479" args="(struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a>* mdt_info_req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00506">506</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, and <a class="el" href="lustre__req__layout_8h_source.html#l00067">req_capsule::rc_req</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00577">__mdt_init_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00334">allow_client_chgrp()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00275">mdt_body_reverse_idmap()</a>, <a class="el" href="mdt__internal_8h_source.html#l00921">mdt_check_resent()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, <a class="el" href="mdt__handler_8c_source.html#l00600">mdt_client_compatibility()</a>, <a class="el" href="mdt__open_8c_source.html#l00197">mdt_empty_transno()</a>, <a class="el" href="mdt__reint_8c_source.html#l00135">mdt_enoent_version_save()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00317">mdt_fix_attr_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l01299">mdt_fix_lov_magic()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00161">mdt_getxattr_all()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00056">mdt_getxattr_pack_reply()</a>, <a class="el" href="mdt__lib_8c_source.html#l00612">mdt_init_ucred_reint()</a>, <a class="el" href="mdt__handler_8c_source.html#l03215">mdt_intent_fixup_resent()</a>, <a class="el" href="mdt__handler_8c_source.html#l03259">mdt_intent_getxattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l03121">mdt_intent_lock_replace()</a>, <a class="el" href="mdt__handler_8c_source.html#l03554">mdt_intent_opc()</a>, <a class="el" href="mdt__handler_8c_source.html#l03431">mdt_intent_reint()</a>, <a class="el" href="mdt__reint_8c_source.html#l00196">mdt_lookup_version_check()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, <a class="el" href="mdt__lib_8c_source.html#l01320">mdt_open_unpack()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00210">mdt_reconstruct_generic()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00826">mdt_reint_create()</a>, <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l02235">mdt_reint_rec()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l02139">mdt_reint_rename_or_migrate()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__reint_8c_source.html#l00250">mdt_remote_permission()</a>, <a class="el" href="mdt__lib_8c_source.html#l01234">mdt_rename_unpack()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00316">mdt_rmtlsetfacl()</a>, <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02735">mdt_save_remote_lock()</a>, <a class="el" href="mdt__lib_8c_source.html#l01181">mdt_unlink_unpack()</a>, <a class="el" href="mdt__reint_8c_source.html#l00162">mdt_version_get_check()</a>, <a class="el" href="mdt__reint_8c_source.html#l00176">mdt_version_get_check_save()</a>, <a class="el" href="mdt__reint_8c_source.html#l00149">mdt_version_get_save()</a>, <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00466">old_init_ucred_common()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00131">ucred_set_jobid()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ce3a0f26a51938a268e8890fb646c03"></a><!-- doxytag: member="mdt_internal.h::mdt_init_idmap" ref="a0ce3a0f26a51938a268e8890fb646c03" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_init_idmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__idmap_8c_source.html#l00075">75</a> of file <a class="el" href="mdt__idmap_8c_source.html">mdt_idmap.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00156">D_SEC</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="nidstr_8h_source.html#l00077">libcfs_nid2str()</a>, <a class="el" href="idmap_8c_source.html#l00441">lustre_idmap_init()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00135">mdt_handle_idmap()</a>, <a class="el" href="mdt__internal_8h_source.html#l00909">mdt_req2med()</a>, <a class="el" href="lustre__export_8h_source.html#l00098">mdt_export_data::med_idmap</a>, <a class="el" href="lustre__export_8h_source.html#l00097">mdt_export_data::med_idmap_mutex</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01108">ptlrpc_request::rq_peer</a>, <a class="el" href="tgt__handler_8c_source.html#l00051">tgt_name()</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, and <a class="el" href="lu__target_8h_source.html#l00204">tgt_session_info::tsi_tgt</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02986">mdt_tgt_connect()</a>.</p>

</div>
</div>
<a class="anchor" id="a22786afd0c8add0ec55c11f99d67fb41"></a><!-- doxytag: member="mdt_internal.h::mdt_init_ucred" ref="a22786afd0c8add0ec55c11f99d67fb41" args="(struct mdt_thread_info *, struct mdt_body *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_init_ucred </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00596">596</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="mdt__lib_8c_source.html#l00577">__mdt_init_ucred()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00081">mdt_hsm_is_admin()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, and <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a29df986c2d4c43f69ad2076b4b436191"></a><!-- doxytag: member="mdt_internal.h::mdt_init_ucred_intent_getattr" ref="a29df986c2d4c43f69ad2076b4b436191" args="(struct mdt_thread_info *, struct mdt_body *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_init_ucred_intent_getattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00606">606</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="mdt__lib_8c_source.html#l00577">__mdt_init_ucred()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, and <a class="el" href="mdt__handler_8c_source.html#l03296">mdt_intent_getattr()</a>.</p>

</div>
</div>
<a class="anchor" id="ae48883855292e73ca9f84c7ad99b172a"></a><!-- doxytag: member="mdt_internal.h::mdt_init_ucred_reint" ref="ae48883855292e73ca9f84c7ad99b172a" args="(struct mdt_thread_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_init_ucred_reint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00612">612</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00552">old_init_ucred_reint()</a>, <a class="el" href="mdt__lib_8c_source.html#l00062">REC_INIT</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_auth_gss</a>, <a class="el" href="lustre__net_8h_source.html#l01059">ptlrpc_request::rq_auth_usr_mdt</a>, <a class="el" href="md__object_8h_source.html#l00584">lu_ucred::uc_valid</a>, <a class="el" href="md__object_8h_source.html#l00580">UCRED_NEW</a>, and <a class="el" href="md__object_8h_source.html#l00579">UCRED_OLD</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l01053">mdt_close_unpack()</a>, <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>, and <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="abe13e690dbbbac8abbbce602109de5c1"></a><!-- doxytag: member="mdt_internal.h::mdt_is_dne_client" ref="abe13e690dbbbac8abbbce602109de5c1" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool mdt_is_dne_client </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00565">565</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01233">OBD_CONNECT_LVB_TYPE</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00250">mdt_remote_permission()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c323f778770da9f19f83069e1d0940f"></a><!-- doxytag: member="mdt_internal.h::mdt_is_striped_client" ref="a6c323f778770da9f19f83069e1d0940f" args="(struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool mdt_is_striped_client </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00570">570</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, and <a class="el" href="lustre__idl_8h_source.html#l01246">OBD_CONNECT_DIR_STRIPE</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00250">mdt_remote_permission()</a>.</p>

</div>
</div>
<a class="anchor" id="a88569336fb1cf970703e6f7a50bfe8a5"></a><!-- doxytag: member="mdt_internal.h::mdt_links_read" ref="a88569336fb1cf970703e6f7a50bfe8a5" args="(struct mdt_thread_info *info, struct mdt_object *mdt_obj, struct linkea_data *ldata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_links_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlinkea__data.html">linkea_data</a> *&nbsp;</td>
          <td class="paramname"> <em>ldata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l05420">5420</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lustre__linkea_8h_source.html#l00036">linkea_data::ld_buf</a>, <a class="el" href="linkea_8c_source.html#l00047">linkea_init()</a>, <a class="el" href="lu__object_8c_source.html#l02369">lu_buf_check_and_alloc()</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="md__object_8h_source.html#l00370">mo_xattr_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, and <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, and <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6ef20f272cabc8315a7f07e4416a37c"></a><!-- doxytag: member="mdt_internal.h::mdt_lock_handle_fini" ref="ab6ef20f272cabc8315a7f07e4416a37c" args="(struct mdt_lock_handle *lh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_lock_handle_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02899">2899</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="mdt__internal_8h_source.html#l00259">mdt_lock_handle::mlh_pdo_lh</a>, and <a class="el" href="mdt__internal_8h_source.html#l00255">mdt_lock_handle::mlh_reg_lh</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6b6dc2598d9874731adb97c86eb3ce1"></a><!-- doxytag: member="mdt_internal.h::mdt_lock_handle_init" ref="ae6b6dc2598d9874731adb97c86eb3ce1" args="(struct mdt_lock_handle *lh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_lock_handle_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02888">2888</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l01017">lustre_handle::cookie</a>, <a class="el" href="packet-lustre_8c_source.html#l00290">LCK_MINMODE</a>, <a class="el" href="md__object_8h_source.html#l00096">MDT_NUL_LOCK</a>, <a class="el" href="mdt__internal_8h_source.html#l00259">mdt_lock_handle::mlh_pdo_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00260">mdt_lock_handle::mlh_pdo_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00255">mdt_lock_handle::mlh_reg_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00256">mdt_lock_handle::mlh_reg_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00264">mdt_lock_handle::mlh_rreg_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00265">mdt_lock_handle::mlh_rreg_mode</a>, and <a class="el" href="mdt__internal_8h_source.html#l00252">mdt_lock_handle::mlh_type</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02910">mdt_thread_info_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aebde50bfdeee2650c27a2fd503066bf7"></a><!-- doxytag: member="mdt_internal.h::mdt_lock_new_child" ref="aebde50bfdeee2650c27a2fd503066bf7" args="(struct mdt_thread_info *info, struct mdt_object *o, struct mdt_lock_handle *child_lockh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_lock_new_child </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>child_lockh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adc3eaeaa3a5057c5f67c31f89a121128"></a><!-- doxytag: member="mdt_internal.h::mdt_lock_pdo_init" ref="adc3eaeaa3a5057c5f67c31f89a121128" args="(struct mdt_lock_handle *lh, enum ldlm_mode lock_mode, const struct lu_name *lname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_lock_pdo_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>lock_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>lname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00171">171</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="packet-lustre_8c_source.html#l00290">LCK_MINMODE</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8h_source.html#l01320">lu_name_is_valid()</a>, <a class="el" href="md__object_8h_source.html#l00098">MDT_PDO_LOCK</a>, <a class="el" href="mdt__internal_8h_source.html#l00261">mdt_lock_handle::mlh_pdo_hash</a>, <a class="el" href="mdt__internal_8h_source.html#l00260">mdt_lock_handle::mlh_pdo_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00256">mdt_lock_handle::mlh_reg_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00265">mdt_lock_handle::mlh_rreg_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00252">mdt_lock_handle::mlh_type</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a057dbab8fe1bb026cb4619cf634b6e30"></a><!-- doxytag: member="mdt_internal.h::mdt_lock_reg_init" ref="a057dbab8fe1bb026cb4619cf634b6e30" args="(struct mdt_lock_handle *lh, enum ldlm_mode lm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_lock_reg_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>lm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00163">163</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="md__object_8h_source.html#l00097">MDT_REG_LOCK</a>, <a class="el" href="mdt__internal_8h_source.html#l00261">mdt_lock_handle::mlh_pdo_hash</a>, <a class="el" href="mdt__internal_8h_source.html#l00256">mdt_lock_handle::mlh_reg_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00265">mdt_lock_handle::mlh_rreg_mode</a>, and <a class="el" href="mdt__internal_8h_source.html#l00252">mdt_lock_handle::mlh_type</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00654">hsm_restore_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l03259">mdt_intent_getxattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l05801">mdt_ioc_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00295">mdt_unlock_slaves()</a>.</p>

</div>
</div>
<a class="anchor" id="aad412a994bc4e55603124a3a761536f4"></a><!-- doxytag: member="mdt_internal.h::mdt_lock_setup" ref="aad412a994bc4e55603124a3a761536f4" args="(struct mdt_thread_info *info, struct mdt_object *mo, struct mdt_lock_handle *lh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_lock_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a243d4dedf4cefe52a73c5d955a48fa2b"></a><!-- doxytag: member="mdt_internal.h::mdt_lu_site" ref="a243d4dedf4cefe52a73c5d955a48fa2b" args="(const struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__site.html">lu_site</a>* mdt_lu_site </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00548">548</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00283">lu_device::ld_site</a>, and <a class="el" href="mdt__internal_8h_source.html#l00159">mdt_device::mdt_lu_dev</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00425">mdt_site_stats_seq_show()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04029">mdt_stack_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ac7b9e461e4b7807730957836d1f2902c"></a><!-- doxytag: member="mdt_internal.h::mdt_mdl_mode2dlm_mode" ref="ac7b9e461e4b7807730957836d1f2902c" args="(mdl_mode_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> mdt_mdl_mode2dlm_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__md.html#gaeff7094cae9099800057edce10196e98">mdl_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00996">996</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, and <a class="el" href="mdt__handler_8c_source.html#l00088">mdt_dlm_lock_modes</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00196">mdt_lock_pdo_mode()</a>.</p>

</div>
</div>
<a class="anchor" id="aad91e98e3cf3d4feb3e9d5f6b47f4665"></a><!-- doxytag: member="mdt_internal.h::mdt_mfd_close" ref="aad91e98e3cf3d4feb3e9d5f6b47f4665" args="(struct mdt_thread_info *info, struct mdt_file_data *mfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_mfd_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01939">1939</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00158">D_HSM</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l02308">FMODE_READ</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="lu__object_8h_source.html#l00444">LA_ATIME</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00118">md_attr::ma_attr_flags</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02372">MDS_CLOSE_LAYOUT_SWAP</a>, <a class="el" href="lustre__idl_8h_source.html#l02367">MDS_DATA_MODIFIED</a>, <a class="el" href="lustre__idl_8h_source.html#l02313">MDS_FMODE_EXEC</a>, <a class="el" href="lustre__idl_8h_source.html#l02370">MDS_HSM_RELEASE</a>, <a class="el" href="lustre__idl_8h_source.html#l02345">MDS_OPEN_LEASE</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__open_8c_source.html#l00106">mdt_mfd_free()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__open_8c_source.html#l00187">mdt_write_allow()</a>, <a class="el" href="mdt__open_8c_source.html#l00165">mdt_write_put()</a>, <a class="el" href="mdt__open_8c_source.html#l01933">MFD_CLOSED</a>, <a class="el" href="mdt__internal_8h_source.html#l00075">mdt_file_data::mfd_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, <a class="el" href="md__object_8h_source.html#l00362">mo_attr_set()</a>, <a class="el" href="md__object_8h_source.html#l00424">mo_close()</a>, <a class="el" href="mdsrate_8c_source.html#l00114">mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00246">mdt_object::mot_lease_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00247">mdt_object::mot_open_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l05131">mdt_export_cleanup()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="afe26bd03b435d83a095c9750807c487b"></a><!-- doxytag: member="mdt_internal.h::mdt_mfd_free" ref="afe26bd03b435d83a095c9750807c487b" args="(struct mdt_file_data *mfd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_mfd_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00106">106</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, and <a class="el" href="obd__support_8h_source.html#l00794">OBD_FREE_RCU</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>.</p>

</div>
</div>
<a class="anchor" id="a2662891d8f9509efdb737a0b907811fd"></a><!-- doxytag: member="mdt_internal.h::mdt_mfd_new" ref="a2662891d8f9509efdb737a0b907811fd" args="(const struct mdt_export_data *med)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a>* mdt_mfd_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a> *&nbsp;</td>
          <td class="paramname"> <em>med</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00062">62</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="lustre__handles_8c_source.html#l00064">class_handle_hash()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__handles_8h_source.html#l00066">portals_handle::h_link</a>, <a class="el" href="lustre__handles_8h_source.html#l00068">portals_handle::h_owner</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="mdt__internal_8h_source.html#l00073">mdt_file_data::mfd_handle</a>, <a class="el" href="mdt__internal_8h_source.html#l00077">mdt_file_data::mfd_list</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e9a73428366d11ee7e5ee7a007e1fa7"></a><!-- doxytag: member="mdt_internal.h::mdt_mfd_set_mode" ref="a2e9a73428366d11ee7e5ee7a007e1fa7" args="(struct mdt_file_data *mfd, __u64 mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_mfd_set_mode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__file__data.html">mdt_file_data</a> *&nbsp;</td>
          <td class="paramname"> <em>mfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00294">294</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00049">LPO64</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00075">mdt_file_data::mfd_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00083">mdt_file_data::mfd_object</a>, and <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e933bfb72bd453a9b003b34fb6b8801"></a><!-- doxytag: member="mdt_internal.h::mdt_name_unpack" ref="a8e933bfb72bd453a9b003b34fb6b8801" args="(struct req_capsule *pill, const struct req_msg_field *field, struct lu_name *ln, enum mdt_name_flags flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_name_unpack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structreq__msg__field.html">req_msg_field</a> *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__name.html">lu_name</a> *&nbsp;</td>
          <td class="paramname"> <em>ln</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="mdt__internal_8h.html#abb502651906cdfbdcdd17ca91bb10ec6">mdt_name_flags</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l00882">882</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="lu__object_8h_source.html#l01298">lu_name::ln_namelen</a>, <a class="el" href="lu__object_8h_source.html#l01320">lu_name_is_valid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00632">MNF_FIX_ANON</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00058">RCL_CLIENT</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, and <a class="el" href="layout_8c_source.html#l02263">req_capsule_get_size()</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l01073">mdt_create_unpack()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__lib_8c_source.html#l01142">mdt_link_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l01320">mdt_open_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l01234">mdt_rename_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l01391">mdt_setxattr_unpack()</a>, and <a class="el" href="mdt__lib_8c_source.html#l01181">mdt_unlink_unpack()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fd47bb7bf1cf0f84a8c5397f0e32663"></a><!-- doxytag: member="mdt_internal.h::mdt_obd_name" ref="a1fd47bb7bf1cf0f84a8c5397f0e32663" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* mdt_obd_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l01048">1048</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="mdt__internal_8h_source.html#l00159">mdt_device::mdt_lu_dev</a>, and <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00087">cdt_llog_process()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00375">hsm_cdt_procfs_init()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00358">lprocfs_identity_info_seq_write()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00261">mdt_agent_record_update()</a>, <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00200">mdt_agent_record_update_cb()</a>, <a class="el" href="mdt__handler_8c_source.html#l05018">mdt_connect_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l03994">mdt_connect_to_next()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00425">mdt_coordinator()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00158">mdt_coordinator_cb()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l02250">mdt_device_commit_async()</a>, <a class="el" href="mdt__open_8c_source.html#l00197">mdt_empty_transno()</a>, <a class="el" href="mdt__handler_8c_source.html#l06081">mdt_enable_cos()</a>, <a class="el" href="mdt__handler_8c_source.html#l05641">mdt_fid2path()</a>, <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01900">mdt_hsm_cdt_control_seq_write()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01764">mdt_hsm_policy_seq_write()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00291">mdt_identity_upcall_seq_write()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mdt__handler_8c_source.html#l03365">mdt_intent_layout()</a>, <a class="el" href="mdt__handler_8c_source.html#l05849">mdt_iocontrol()</a>, <a class="el" href="mdt__reint_8c_source.html#l01308">mdt_is_subdir()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00632">mdt_nosquash_nids_seq_write()</a>, <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01952">mdt_object_sync()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01540">mdt_orphan_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05951">mdt_postrecov()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00966">mdt_procfs_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l03710">mdt_register_lwp_callback()</a>, <a class="el" href="mdt__handler_8c_source.html#l03746">mdt_register_seq_exp()</a>, <a class="el" href="mdt__reint_8c_source.html#l00826">mdt_reint_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l02139">mdt_reint_rename_or_migrate()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00172">mdt_rename_counter_tally()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00598">mdt_root_squash_seq_write()</a>, <a class="el" href="mdt__handler_8c_source.html#l03824">mdt_seq_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l03787">mdt_seq_init_cli()</a>, <a class="el" href="mdt__handler_8c_source.html#l03948">mdt_stack_fini()</a>, and <a class="el" href="mdt__handler_8c_source.html#l03914">mdt_stack_pre_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a87a26f9a2e872479fedd2bad5e2a4d40"></a><!-- doxytag: member="mdt_internal.h::mdt_obj" ref="a87a26f9a2e872479fedd2bad5e2a4d40" args="(struct lu_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_obj </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__object.html">lu_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00755">755</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l04885">mdt_object_free()</a>, <a class="el" href="mdt__handler_8c_source.html#l02206">mdt_object_new()</a>, <a class="el" href="mdt__handler_8c_source.html#l04905">mdt_object_print()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__handler_8c_source.html#l01736">mdt_readpage()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>.</p>

</div>
</div>
<a class="anchor" id="a34ecb36575beffe159b83e18707a2baa"></a><!-- doxytag: member="mdt_internal.h::mdt_obj2dt" ref="a34ecb36575beffe159b83e18707a2baa" args="(struct mdt_object *mo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structdt__object.html">dt_object</a>* mdt_obj2dt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00760">760</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="lu__object_8h_source.html#l00275">lu_device::ld_type</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="lu__object_8h_source.html#l00468">lu_object::lo_header</a>, <a class="el" href="dt__object_8h_source.html#l01779">lu2dt()</a>, <a class="el" href="lu__object_8c_source.html#l01329">lu_object_locate()</a>, <a class="el" href="mdt__internal_8h_source.html#l00168">mdt_device::mdt_bottom</a>, <a class="el" href="mdt__internal_8h_source.html#l00750">mdt_dev()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l05801">mdt_ioc_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, and <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ce0a83537a7a7ac62e482fde2ad57de"></a><!-- doxytag: member="mdt_internal.h::mdt_object_child" ref="a8ce0a83537a7a7ac62e482fde2ad57de" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmd__object.html">md_object</a>* mdt_object_child </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00500">500</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="md__object_8h_source.html#l00303">lu2md()</a>, <a class="el" href="lu__object_8h_source.html#l00762">lu_object_next()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__handler_8c_source.html#l00625">mdt_attr_get_eabuf_size()</a>, <a class="el" href="mdt__handler_8c_source.html#l00772">mdt_attr_get_pfid()</a>, <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l00658">mdt_big_xattr_get()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l00112">mdt_create_data()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00056">mdt_getxattr_pack_reply()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00058">mdt_hsm_attr_set()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__reint_8c_source.html#l00336">mdt_init_slaves()</a>, <a class="el" href="mdt__reint_8c_source.html#l01308">mdt_is_subdir()</a>, <a class="el" href="mdt__handler_8c_source.html#l05420">mdt_links_read()</a>, <a class="el" href="mdt__handler_8c_source.html#l00196">mdt_lock_pdo_mode()</a>, <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>, <a class="el" href="mdt__handler_8c_source.html#l00271">mdt_lookup_fileset()</a>, <a class="el" href="mdt__reint_8c_source.html#l00196">mdt_lookup_version_check()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l01952">mdt_object_sync()</a>, <a class="el" href="mdt__open_8c_source.html#l01540">mdt_orphan_open()</a>, <a class="el" href="mdt__identity_8c_source.html#l00276">mdt_pack_remote_perm()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__handler_8c_source.html#l01331">mdt_raw_lookup()</a>, <a class="el" href="mdt__handler_8c_source.html#l01736">mdt_readpage()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__handler_8c_source.html#l02431">mdt_remote_object_lock()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00172">mdt_rename_counter_tally()</a>, <a class="el" href="mdt__handler_8c_source.html#l00697">mdt_stripe_get()</a>, <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00295">mdt_unlock_slaves()</a>.</p>

</div>
</div>
<a class="anchor" id="a95468447a934677674ed9125c2f7ef25"></a><!-- doxytag: member="mdt_internal.h::mdt_object_exists" ref="a95468447a934677674ed9125c2f7ef25" args="(const struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_object_exists </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00533">533</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00840">lu_object_exists</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__handler_8c_source.html#l02824">mdt_body_unpack()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05641">mdt_fid2path()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__handler_8c_source.html#l03365">mdt_intent_layout()</a>, <a class="el" href="mdt__handler_8c_source.html#l05801">mdt_ioc_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l01308">mdt_is_subdir()</a>, <a class="el" href="mdt__handler_8c_source.html#l05420">mdt_links_read()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l01952">mdt_object_sync()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>.</p>

</div>
</div>
<a class="anchor" id="a65251198e11b74392c721e2f43538037"></a><!-- doxytag: member="mdt_internal.h::mdt_object_fid" ref="a65251198e11b74392c721e2f43538037" args="(const struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structlu__fid.html">lu_fid</a>* mdt_object_fid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00543">543</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__lproc_8c_source.html#l00882">lprocfs_mdt_print_open_files()</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__handler_8c_source.html#l00772">mdt_attr_get_pfid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__lib_8c_source.html#l00811">mdt_handle_last_unlink()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, <a class="el" href="mdt__open_8c_source.html#l00294">mdt_mfd_set_mode()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l01952">mdt_object_sync()</a>, <a class="el" href="mdt__handler_8c_source.html#l05599">mdt_path()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__reint_8c_source.html#l01215">mdt_pdir_hash_lock()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00172">mdt_rename_counter_tally()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a031c909859c56b7dce25d5bf98fa9572"></a><!-- doxytag: member="mdt_internal.h::mdt_object_find" ref="a031c909859c56b7dce25d5bf98fa9572" args="(const struct lu_env *, struct mdt_device *, const struct lu_fid *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_object_find </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02224">2224</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8c_source.html#l00643">lu_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00159">mdt_device::mdt_lu_dev</a>, <a class="el" href="mdt__internal_8h_source.html#l00755">mdt_obj()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l02824">mdt_body_unpack()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05641">mdt_fid2path()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__handler_8c_source.html#l03365">mdt_intent_layout()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>, <a class="el" href="mdt__handler_8c_source.html#l00271">mdt_lookup_fileset()</a>, <a class="el" href="mdt__reint_8c_source.html#l00196">mdt_lookup_version_check()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01776">mdt_object_find_check()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01540">mdt_orphan_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__reint_8c_source.html#l01250">mdt_rename_lock()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>.</p>

</div>
</div>
<a class="anchor" id="a8612b4f168534c61cbb45e787059f8c8"></a><!-- doxytag: member="mdt_internal.h::mdt_object_find_lock" ref="a8612b4f168534c61cbb45e787059f8c8" args="(struct mdt_thread_info *, const struct lu_fid *, struct mdt_lock_handle *, __u64)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_object_find_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02783">2783</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, and <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l00654">hsm_restore_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__handler_8c_source.html#l05801">mdt_ioc_version_get()</a>, and <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a361c3447fd11f287aaf242e34fc7274c"></a><!-- doxytag: member="mdt_internal.h::mdt_object_get" ref="a361c3447fd11f287aaf242e34fc7274c" args="(const struct lu_env *env, struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_object_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00517">517</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="adef534a5ff4b85b621d4dc668c4a1d73"></a><!-- doxytag: member="mdt_internal.h::mdt_object_lock" ref="adef534a5ff4b85b621d4dc668c4a1d73" args="(struct mdt_thread_info *info, struct mdt_object *mo, struct mdt_lock_handle *lh, __u64 ibits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_object_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ibits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02619">2619</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l03259">mdt_intent_getxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6deff4a461ef2babfa3d8f21b4317e2"></a><!-- doxytag: member="mdt_internal.h::mdt_object_lock_try" ref="aa6deff4a461ef2babfa3d8f21b4317e2" args="(struct mdt_thread_info *info, struct mdt_object *mo, struct mdt_lock_handle *lh, __u64 ibits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_object_lock_try </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ibits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02634">2634</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, and <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="ae836550d7efec7a80413863897a02f76"></a><!-- doxytag: member="mdt_internal.h::mdt_object_new" ref="ae836550d7efec7a80413863897a02f76" args="(const struct lu_env *env, struct mdt_device *, const struct lu_fid *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__object.html">mdt_object</a>* mdt_object_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02206">2206</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00171">LOC_F_NEW</a>, <a class="el" href="lu__object_8h_source.html#l00187">lu_object_conf::loc_flags</a>, <a class="el" href="lu__object_8c_source.html#l00643">lu_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00159">mdt_device::mdt_lu_dev</a>, <a class="el" href="mdt__internal_8h_source.html#l00755">mdt_obj()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l01540">mdt_orphan_open()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aeff83b3a74cb894165753ad356445fba"></a><!-- doxytag: member="mdt_internal.h::mdt_object_put" ref="aeff83b3a74cb894165753ad356445fba" args="(const struct lu_env *env, struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mdt_object_put </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00525">525</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00654">hsm_restore_cb()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l02824">mdt_body_unpack()</a>, <a class="el" href="mdt__open_8c_source.html#l02009">mdt_close_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05641">mdt_fid2path()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01011">mdt_hsm_add_hal()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00060">mdt_hsm_get_md_hsm()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__handler_8c_source.html#l03365">mdt_intent_layout()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>, <a class="el" href="mdt__handler_8c_source.html#l00271">mdt_lookup_fileset()</a>, <a class="el" href="mdt__reint_8c_source.html#l00196">mdt_lookup_version_check()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, <a class="el" href="mdt__reint_8c_source.html#l01776">mdt_object_find_check()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l01540">mdt_orphan_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__reint_8c_source.html#l01250">mdt_rename_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02949">mdt_thread_info_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a57b23a36be302cde86879d15aec5f813"></a><!-- doxytag: member="mdt_internal.h::mdt_object_remote" ref="a57b23a36be302cde86879d15aec5f813" args="(const struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int mdt_object_remote </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00538">538</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00845">lu_object_remote</a>, and <a class="el" href="mdt__internal_8h_source.html#l00237">mdt_object::mot_obj</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l05641">mdt_fid2path()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l03365">mdt_intent_layout()</a>, <a class="el" href="mdt__handler_8c_source.html#l05801">mdt_ioc_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l05464">mdt_path_current()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__handler_8c_source.html#l02431">mdt_remote_object_lock()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>.</p>

</div>
</div>
<a class="anchor" id="a37169bfa7f9b7a745a0b8075035805a8"></a><!-- doxytag: member="mdt_internal.h::mdt_object_unlock" ref="a37169bfa7f9b7a745a0b8075035805a8" args="(struct mdt_thread_info *info, struct mdt_object *mo, struct mdt_lock_handle *lh, int decref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_object_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>decref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock mdt object. </p>
<p>Immeditely release the regular lock and the PDO lock or save the lock in request and keep them referenced until client ACK or transaction commit.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>thread info object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>mdt object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lh</em>&nbsp;</td><td>mdt lock handle referencing regular and PDO locks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>decref</em>&nbsp;</td><td>force immediate lock releasing </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02771">2771</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02735">mdt_save_remote_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00259">mdt_lock_handle::mlh_pdo_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00260">mdt_lock_handle::mlh_pdo_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00255">mdt_lock_handle::mlh_reg_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00256">mdt_lock_handle::mlh_reg_mode</a>, <a class="el" href="mdt__internal_8h_source.html#l00264">mdt_lock_handle::mlh_rreg_lh</a>, and <a class="el" href="mdt__internal_8h_source.html#l00265">mdt_lock_handle::mlh_rreg_mode</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__reint_8c_source.html#l00678">mdt_add_dirty_flag()</a>, <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__open_8c_source.html#l01797">mdt_close_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, <a class="el" href="mdt__open_8c_source.html#l01613">mdt_hsm_release()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__handler_8c_source.html#l02463">mdt_object_local_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00295">mdt_unlock_slaves()</a>.</p>

</div>
</div>
<a class="anchor" id="a2b434fe8a7394fd5cc2e91fa62540b2c"></a><!-- doxytag: member="mdt_internal.h::mdt_object_unlock_put" ref="a2b434fe8a7394fd5cc2e91fa62540b2c" args="(struct mdt_thread_info *, struct mdt_object *, struct mdt_lock_handle *, int decref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_object_unlock_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>decref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02803">2803</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__handler_8c_source.html#l02771">mdt_object_unlock()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01099">hsm_swap_layouts()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>, <a class="el" href="mdt__handler_8c_source.html#l05801">mdt_ioc_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l01349">mdt_unlock_list()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00295">mdt_unlock_slaves()</a>.</p>

</div>
</div>
<a class="anchor" id="a498f298746784b9da4b02f5c28b46ec3"></a><!-- doxytag: member="mdt_internal.h::mdt_pack_attr2body" ref="a498f298746784b9da4b02f5c28b46ec3" args="(struct mdt_thread_info *info, struct mdt_body *b, const struct lu_attr *attr, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_pack_attr2body </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__body.html">mdt_body</a> *&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00501">501</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="libcfs__debug_8h_source.html#l00150">D_VFSTRACE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lu__object_8h_source.html#l00413">lu_attr::la_atime</a>, <a class="el" href="lu__object_8h_source.html#l00444">LA_ATIME</a>, <a class="el" href="lu__object_8h_source.html#l00417">lu_attr::la_blocks</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00453">LA_FLAGS</a>, <a class="el" href="lu__object_8h_source.html#l00423">lu_attr::la_gid</a>, <a class="el" href="lu__object_8h_source.html#l00450">LA_GID</a>, <a class="el" href="lu__object_8h_source.html#l00448">LA_MODE</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="lu__object_8h_source.html#l00411">lu_attr::la_mtime</a>, <a class="el" href="lu__object_8h_source.html#l00445">LA_MTIME</a>, <a class="el" href="lu__object_8h_source.html#l00427">lu_attr::la_nlink</a>, <a class="el" href="lu__object_8h_source.html#l00454">LA_NLINK</a>, <a class="el" href="lu__object_8h_source.html#l00433">lu_attr::la_rdev</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="lu__object_8h_source.html#l00452">LA_TYPE</a>, <a class="el" href="lu__object_8h_source.html#l00421">lu_attr::la_uid</a>, <a class="el" href="lu__object_8h_source.html#l00449">LA_UID</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__user_8h_source.html#l00352">LOV_PATTERN_F_RELEASED</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02195">mdt_body::mbo_atime</a>, <a class="el" href="lustre__idl_8h_source.html#l02197">mdt_body::mbo_blocks</a>, <a class="el" href="lustre__idl_8h_source.html#l02196">mdt_body::mbo_ctime</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02208">mdt_body::mbo_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l02207">mdt_body::mbo_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l02205">mdt_body::mbo_mode</a>, <a class="el" href="lustre__idl_8h_source.html#l02194">mdt_body::mbo_mtime</a>, <a class="el" href="lustre__idl_8h_source.html#l02210">mdt_body::mbo_nlink</a>, <a class="el" href="lustre__idl_8h_source.html#l02209">mdt_body::mbo_rdev</a>, <a class="el" href="lustre__idl_8h_source.html#l02193">mdt_body::mbo_size</a>, <a class="el" href="lustre__idl_8h_source.html#l02206">mdt_body::mbo_uid</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__idmap_8c_source.html#l00275">mdt_body_reverse_idmap()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00047">NODEMAP_FS_TO_CLIENT</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00043">NODEMAP_GID</a>, <a class="el" href="nodemap__handler_8c_source.html#l00519">nodemap_map_id()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00042">NODEMAP_UID</a>, <a class="el" href="lustre__idl_8h_source.html#l01657">OBD_MD_FLATIME</a>, <a class="el" href="lustre__idl_8h_source.html#l01661">OBD_MD_FLBLOCKS</a>, <a class="el" href="lustre__idl_8h_source.html#l01659">OBD_MD_FLCTIME</a>, <a class="el" href="lustre__idl_8h_source.html#l01667">OBD_MD_FLFLAGS</a>, <a class="el" href="lustre__idl_8h_source.html#l01666">OBD_MD_FLGID</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="lustre__idl_8h_source.html#l01663">OBD_MD_FLMODE</a>, <a class="el" href="lustre__idl_8h_source.html#l01658">OBD_MD_FLMTIME</a>, <a class="el" href="lustre__idl_8h_source.html#l01668">OBD_MD_FLNLINK</a>, <a class="el" href="lustre__idl_8h_source.html#l01671">OBD_MD_FLRDEV</a>, <a class="el" href="lustre__idl_8h_source.html#l01660">OBD_MD_FLSIZE</a>, <a class="el" href="lustre__idl_8h_source.html#l01664">OBD_MD_FLTYPE</a>, <a class="el" href="lustre__idl_8h_source.html#l01665">OBD_MD_FLUID</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, <a class="el" href="mdt__lib_8c_source.html#l00811">mdt_handle_last_unlink()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>, and <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c30ab63b2648c623544c5e250d954db"></a><!-- doxytag: member="mdt_internal.h::mdt_pack_remote_perm" ref="a3c30ab63b2648c623544c5e250d954db" args="(struct mdt_thread_info *, struct mdt_object *, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_pack_remote_perm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__identity_8c_source.html#l00276">276</a> of file <a class="el" href="mdt__identity_8c_source.html">mdt_identity.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__handler_8c_source.html#l06068">mdt_ucred_check()</a>, <a class="el" href="md__object_8h_source.html#l00328">mo_permission()</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__idl_8h_source.html#l02252">mdt_remote_perm::rp_access_perm</a>, <a class="el" href="lustre__idl_8h_source.html#l02250">mdt_remote_perm::rp_fsgid</a>, <a class="el" href="lustre__idl_8h_source.html#l02248">mdt_remote_perm::rp_fsuid</a>, <a class="el" href="lustre__idl_8h_source.html#l02247">mdt_remote_perm::rp_gid</a>, <a class="el" href="lustre__idl_8h_source.html#l02246">mdt_remote_perm::rp_uid</a>, <a class="el" href="md__object_8h_source.html#l00588">lu_ucred::uc_o_fsgid</a>, <a class="el" href="md__object_8h_source.html#l00587">lu_ucred::uc_o_fsuid</a>, <a class="el" href="md__object_8h_source.html#l00586">lu_ucred::uc_o_gid</a>, and <a class="el" href="md__object_8h_source.html#l00585">lu_ucred::uc_o_uid</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, and <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a45e0f956453aa8b2577bc6a076a7624f"></a><!-- doxytag: member="mdt_internal.h::mdt_procfs_fini" ref="a45e0f956453aa8b2577bc6a076a7624f" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_procfs_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lproc_8c_source.html#l01010">1010</a> of file <a class="el" href="mdt__lproc_8c_source.html">mdt_lproc.c</a>.</p>

<p>References <a class="el" href="mdt__coordinator_8c_source.html#l00400">hsm_cdt_procfs_fini()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00915">lprocfs_free_md_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00913">lprocfs_free_obd_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00921">lprocfs_free_per_client_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l01063">lprocfs_job_stats_fini()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00959">lprocfs_obd_cleanup()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00954">lprocfs_remove_proc_entry()</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, and <a class="el" href="obd_8h_source.html#l00713">obd_device::obd_proc_exports_entry</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="acf356f5e8302d9109ea75d1b11b85168"></a><!-- doxytag: member="mdt_internal.h::mdt_procfs_init" ref="acf356f5e8302d9109ea75d1b11b85168" args="(struct mdt_device *mdt, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_procfs_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lproc_8c_source.html#l00966">966</a> of file <a class="el" href="mdt__lproc_8c_source.html">mdt_lproc.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00375">hsm_cdt_procfs_init()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="mdt__lproc_8c_source.html#l00161">lproc_mdt_attach_rename_seqstat()</a>, <a class="el" href="mdt__internal_8h_source.html#l01026">LPROC_MDT_LAST</a>, <a class="el" href="lprocfs__status_8h_source.html#l00938">lprocfs_add_simple()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00910">lprocfs_alloc_md_stats()</a>, <a class="el" href="lprocfs__status_8h_source.html#l01066">lprocfs_job_stats_init()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00957">lprocfs_obd_setup()</a>, <a class="el" href="mdt__internal_8h_source.html#l01041">mdt2obd_dev()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00944">mdt_stats_counter_init()</a>, <a class="el" href="obd_8h_source.html#l00710">obd_device::obd_md_stats</a>, <a class="el" href="obd_8h_source.html#l00712">obd_device::obd_proc_entry</a>, <a class="el" href="obd_8h_source.html#l00713">obd_device::obd_proc_exports_entry</a>, <a class="el" href="obd_8h_source.html#l00716">obd_device::obd_vars</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a285e428c5988c3f18d915d9d70275939"></a><!-- doxytag: member="mdt_internal.h::mdt_reconstruct" ref="a285e428c5988c3f18d915d9d70275939" args="(struct mdt_thread_info *, struct mdt_lock_handle *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_reconstruct </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00338">338</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__recovery_8c_source.html#l00328">reconstructors</a>, and <a class="el" href="mdt__internal_8h_source.html#l00292">mdt_reint_record::rr_opcode</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a592adbe9f6110a81d57fd8fb6a18030e"></a><!-- doxytag: member="mdt_internal.h::mdt_reconstruct_generic" ref="a592adbe9f6110a81d57fd8fb6a18030e" args="(struct mdt_thread_info *mti, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_reconstruct_generic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00210">210</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00180">mdt_req_from_lrd()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00431">mdt_thread_info::mti_reply_data</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf79e2e47246bdd795207bffb7b842db"></a><!-- doxytag: member="mdt_internal.h::mdt_reconstruct_open" ref="aaf79e2e47246bdd795207bffb7b842db" args="(struct mdt_thread_info *, struct mdt_lock_handle *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_reconstruct_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00623">623</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02065">DISP_OPEN_CREATE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs__debug_8h_source.html#l00284">LCONSOLE_WARN</a>, <a class="el" href="lustre__idl_8h_source.html#l02929">ldlm_reply::lock_policy_res1</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="pack__generic_8c_source.html#l01080">lustre_msg_get_transno()</a>, <a class="el" href="pack__generic_8c_source.html#l01439">lustre_msg_set_status()</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__internal_8h_source.html#l00558">mdt_export_evict()</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l00134">mdt_get_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00565">mdt_is_dne_client()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00180">mdt_req_from_lrd()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00431">mdt_thread_info::mti_reply_data</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="genops_8c_source.html#l01433">obd_export_nid2str()</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00068">req_capsule::rc_fmt</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>, <a class="el" href="layout_8c_source.html#l01039">RMF_DLM_REP</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>, <a class="el" href="layout_8c_source.html#l01502">RQF_LDLM_INTENT_OPEN</a>, <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00295">mdt_reint_record::rr_fid2</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

</div>
</div>
<a class="anchor" id="ae9934615f2114e5f95171bdea12e04cf"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_object_lock" ref="ae9934615f2114e5f95171bdea12e04cf" args="(struct mdt_thread_info *info, struct mdt_object *o, struct mdt_lock_handle *lh, __u64 ibits, bool cos_incompat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_object_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ibits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>cos_incompat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02625">2625</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00256">mdt_lock_handle::mlh_reg_mode</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01799">mdt_object_lock_save()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a1a5e5409f608767f4f4dee46789a97"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_object_lock_try" ref="a6a1a5e5409f608767f4f4dee46789a97" args="(struct mdt_thread_info *info, struct mdt_object *o, struct mdt_lock_handle *lh, __u64 ibits, bool cos_incompat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_object_lock_try </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ibits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>cos_incompat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02647">2647</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00256">mdt_lock_handle::mlh_reg_mode</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l01362">mdt_lock_objects_in_linkea()</a>.</p>

</div>
</div>
<a class="anchor" id="a506abc8479913d2fcbf68e54b913c98e"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_open" ref="a506abc8479913d2fcbf68e54b913c98e" args="(struct mdt_thread_info *info, struct mdt_lock_handle *lhc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lhc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>check version of child </p>
</p>

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l01180">1180</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00146">D_ERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lustre__idl_8h_source.html#l02061">DISP_IT_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02062">DISP_LOOKUP_EXECD</a>, <a class="el" href="lustre__idl_8h_source.html#l02063">DISP_LOOKUP_NEG</a>, <a class="el" href="lustre__idl_8h_source.html#l02064">DISP_LOOKUP_POS</a>, <a class="el" href="lustre__idl_8h_source.html#l02065">DISP_OPEN_CREATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02070">DISP_OPEN_LOCK</a>, <a class="el" href="lu__object_8h_source.html#l01325">DNAME</a>, <a class="el" href="dt__object_8c_source.html#l00575">dt_directory_features</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="osd__iam_8h_source.html#l00057">ergo</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00245">obd_export::exp_libclient</a>, <a class="el" href="lustre__fid_8h_source.html#l00331">fid_is_md_operative()</a>, <a class="el" href="lustre__idl_8h_source.html#l00793">fid_is_sane()</a>, <a class="el" href="lustre__idl_8h_source.html#l00772">fid_le_to_cpu()</a>, <a class="el" href="lustre__idl_8h_source.html#l00260">fid_zero()</a>, <a class="el" href="lustre__idl_8h_source.html#l02309">FMODE_WRITE</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00419">lu_attr::la_mode</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00045">LASSERTF</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="packet-lustre_8c_source.html#l00293">LCK_PR</a>, <a class="el" href="packet-lustre_8c_source.html#l00292">LCK_PW</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__idl_8h_source.html#l02608">LMV_HASH_FLAG_MIGRATION</a>, <a class="el" href="lustre__idl_8h_source.html#l02582">lmv_mds_md_v1::lmv_hash_type</a>, <a class="el" href="lustre__idl_8h_source.html#l02593">lmv_mds_md_v1::lmv_stripe_fids</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00049">LPO64</a>, <a class="el" href="mdt__internal_8h_source.html#l01010">LPROC_MDT_OPEN</a>, <a class="el" href="lu__object_8h_source.html#l01320">lu_name_is_valid()</a>, <a class="el" href="pack__generic_8c_source.html#l00829">lustre_msg_get_flags()</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00078">MA_HSM</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="lustre__idl_8h_source.html#l02189">mdt_body::mbo_fid1</a>, <a class="el" href="lustre__idl_8h_source.html#l02192">mdt_body::mbo_valid</a>, <a class="el" href="md__object_8h_source.html#l00485">mdo_create()</a>, <a class="el" href="md__object_8h_source.html#l00466">mdo_lookup()</a>, <a class="el" href="md__object_8h_source.html#l00550">mdo_unlink()</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02328">MDS_OPEN_BY_FID</a>, <a class="el" href="lustre__idl_8h_source.html#l02321">MDS_OPEN_CREAT</a>, <a class="el" href="lustre__idl_8h_source.html#l02338">MDS_OPEN_HAS_EA</a>, <a class="el" href="lustre__idl_8h_source.html#l02339">MDS_OPEN_HAS_OBJS</a>, <a class="el" href="lustre__idl_8h_source.html#l02331">MDS_OPEN_JOIN_FILE</a>, <a class="el" href="lustre__idl_8h_source.html#l02337">MDS_OPEN_LOCK</a>, <a class="el" href="lustre__idl_8h_source.html#l02343">MDS_OPEN_VOLATILE</a>, <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__handler_8c_source.html#l02396">mdt_check_resent_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l00141">mdt_clear_disposition()</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__open_8c_source.html#l01128">mdt_cross_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00990">mdt_dlm_mode2mdl_mode()</a>, <a class="el" href="mdt__internal_8h_source.html#l00289">MDT_EREMOTE_OPEN</a>, <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__internal_8h_source.html#l00269">MDT_LH_PARENT</a>, <a class="el" href="mdt__handler_8c_source.html#l02888">mdt_lock_handle_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l00171">mdt_lock_pdo_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00760">mdt_obj2dt()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00533">mdt_object_exists()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__handler_8c_source.html#l02224">mdt_object_find()</a>, <a class="el" href="mdt__handler_8c_source.html#l02619">mdt_object_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02206">mdt_object_new()</a>, <a class="el" href="mdt__open_8c_source.html#l00777">mdt_object_open_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00951">mdt_object_open_unlock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__open_8c_source.html#l00307">mdt_prep_ma_buf_from_rep()</a>, <a class="el" href="mdt__handler_8c_source.html#l00152">mdt_set_disposition()</a>, <a class="el" href="mdt__reint_8c_source.html#l00162">mdt_version_get_check()</a>, <a class="el" href="mdt__reint_8c_source.html#l00149">mdt_version_get_save()</a>, <a class="el" href="mdt__internal_8h_source.html#l00260">mdt_lock_handle::mlh_pdo_mode</a>, <a class="el" href="md__object_8h_source.html#l00370">mo_xattr_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l01153">MSG_RESENT</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00361">mdt_thread_info::mti_cross_ref</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="mdt__internal_8h_source.html#l00396">mdt_thread_info::mti_tmp_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00429">mdt_thread_info::mti_xattr_buf</a>, <a class="el" href="lustre__idl_8h_source.html#l01179">OBD_CONNECT_RDONLY</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00179">OBD_FAIL_MDS_OPEN_PACK</a>, <a class="el" href="obd__support_8h_source.html#l00200">OBD_FAIL_MDS_PAUSE_OPEN</a>, <a class="el" href="obd__support_8h_source.html#l00628">OBD_FAIL_ONCE</a>, <a class="el" href="obd__support_8h_source.html#l00626">OBD_FAIL_TIMEOUT_ORSET</a>, <a class="el" href="lustre__idl_8h_source.html#l01656">OBD_MD_FLID</a>, <a class="el" href="lustre__idl_8h_source.html#l01689">OBD_MD_MDS</a>, <a class="el" href="class__obd_8c_source.html#l00083">obd_timeout</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lu__object_8h_source.html#l01326">PNAME</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00068">req_capsule::rc_fmt</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>, <a class="el" href="layout_8c_source.html#l01039">RMF_DLM_REP</a>, <a class="el" href="layout_8c_source.html#l00938">RMF_MDT_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="layout_8c_source.html#l01502">RQF_LDLM_INTENT_OPEN</a>, <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00295">mdt_reint_record::rr_fid2</a>, <a class="el" href="mdt__internal_8h_source.html#l00296">mdt_reint_record::rr_name</a>, <a class="el" href="md__object_8h_source.html#l00143">md_op_spec::sp_cr_flags</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_cr_lookup</a>, <a class="el" href="md__object_8h_source.html#l00152">md_op_spec::sp_cr_mode</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00155">md_op_spec::sp_feat</a>, <a class="el" href="lu__target_8h_source.html#l00245">tgt_vbr_obj_set()</a>, <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, and <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3c3a2780dd8bb80b8214e6ceb52c252"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_rec" ref="aa3c3a2780dd8bb80b8214e6ceb52c252" args="(struct mdt_thread_info *, struct mdt_lock_handle *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_rec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__reint_8c_source.html#l02235">2235</a> of file <a class="el" href="mdt__reint_8c_source.html">mdt_reint.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lprocfs__status_8h_source.html#l00869">lprocfs_counter_incr()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__reint_8c_source.html#l02193">mdt_reinter::mr_extra_opc</a>, <a class="el" href="structmdt__reinter.html#af228ff3394946fc0718a9a7c160ef1e2">mdt_reinter::mr_handler</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="lprocfs__status_8h_source.html#l00336">PTLRPC_LAST_CNTR</a>, <a class="el" href="lustre__net_8h_source.html#l02583">ptlrpc_req2svc()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mdt__internal_8h_source.html#l00292">mdt_reint_record::rr_opcode</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a8167726a3e433b201011c260e99d9d13"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_setxattr" ref="a8167726a3e433b201011c260e99d9d13" args="(struct mdt_thread_info *info, struct mdt_lock_handle *lh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_setxattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__lock__handle.html">mdt_lock_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__xattr_8c_source.html#l00363">363</a> of file <a class="el" href="mdt__xattr_8c_source.html">mdt_xattr.c</a>.</p>

<p>References <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>, <a class="el" href="parallel__grouplock_8c_source.html#l00078">buf</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="curproc_8h_source.html#l00118">CFS_CAP_SYS_ADMIN</a>, <a class="el" href="lustre__idl_8h_source.html#l02239">CFS_RMTACL_PERM</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="libcfs__debug_8h_source.html#l00135">D_INFO</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lu__object_8h_source.html#l00446">LA_CTIME</a>, <a class="el" href="lu__object_8h_source.html#l00415">lu_attr::la_ctime</a>, <a class="el" href="lu__object_8h_source.html#l00425">lu_attr::la_flags</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lustre__import_8h_source.html#l00074">LATF_SKIP</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="packet-lustre_8c_source.html#l00291">LCK_EX</a>, <a class="el" href="lu__object_8h_source.html#l01297">lu_name::ln_name</a>, <a class="el" href="mdt__internal_8h_source.html#l01021">LPROC_MDT_SETXATTR</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00047">LPX64</a>, <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, <a class="el" href="lu__object_8h_source.html#l00910">LU_XATTR_CREATE</a>, <a class="el" href="lu__object_8h_source.html#l00909">LU_XATTR_REPLACE</a>, <a class="el" href="lustre__acl_8h_source.html#l00055">LUSTRE_POSIX_ACL_MAX_SIZE</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00118">md_attr::ma_attr_flags</a>, <a class="el" href="md__object_8h_source.html#l00618">md_capable()</a>, <a class="el" href="lustre__idl_8h_source.html#l02076">MDS_INODELOCK_LOOKUP</a>, <a class="el" href="lustre__idl_8h_source.html#l02092">MDS_INODELOCK_PERM</a>, <a class="el" href="lustre__idl_8h_source.html#l02079">MDS_INODELOCK_UPDATE</a>, <a class="el" href="lustre__idl_8h_source.html#l02093">MDS_INODELOCK_XATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l02361">MDS_PERM_BYPASS</a>, <a class="el" href="mdt__internal_8h_source.html#l00168">mdt_device::mdt_bottom</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__internal_8h_source.html#l00896">mdt_fail_write()</a>, <a class="el" href="mdt__identity_8c_source.html#l00248">mdt_identity_get_perm()</a>, <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__lib_8c_source.html#l00612">mdt_init_ucred_reint()</a>, <a class="el" href="mdt__internal_8h_source.html#l00269">MDT_LH_PARENT</a>, <a class="el" href="mdt__handler_8c_source.html#l00163">mdt_lock_reg_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00760">mdt_obj2dt()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__handler_8c_source.html#l02783">mdt_object_find_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l02803">mdt_object_unlock_put()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00316">mdt_rmtlsetfacl()</a>, <a class="el" href="mdt__handler_8c_source.html#l06063">mdt_ucred()</a>, <a class="el" href="mdt__reint_8c_source.html#l00176">mdt_version_get_check_save()</a>, <a class="el" href="md__object_8h_source.html#l00362">mo_attr_set()</a>, <a class="el" href="md__object_8h_source.html#l00379">mo_xattr_del()</a>, <a class="el" href="md__object_8h_source.html#l00387">mo_xattr_set()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00359">mdt_thread_info::mti_dlm_req</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00048">NODEMAP_CLIENT_TO_FS</a>, <a class="el" href="nodemap__handler_8c_source.html#l00580">nodemap_map_acl()</a>, <a class="el" href="lustre__idl_8h_source.html#l01187">OBD_CONNECT_XATTR</a>, <a class="el" href="obd__support_8h_source.html#l00619">OBD_FAIL_CHECK</a>, <a class="el" href="obd__support_8h_source.html#l00210">OBD_FAIL_MDS_SETXATTR</a>, <a class="el" href="obd__support_8h_source.html#l00211">OBD_FAIL_MDS_SETXATTR_WRITE</a>, <a class="el" href="lustre__idl_8h_source.html#l01659">OBD_MD_FLCTIME</a>, <a class="el" href="lustre__idl_8h_source.html#l01709">OBD_MD_FLRMTLSETFACL</a>, <a class="el" href="lustre__idl_8h_source.html#l01711">OBD_MD_FLRMTRSETFACL</a>, <a class="el" href="lustre__idl_8h_source.html#l01694">OBD_MD_FLXATTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01696">OBD_MD_FLXATTRRM</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01108">ptlrpc_request::rq_peer</a>, <a class="el" href="mdt__internal_8h_source.html#l00298">mdt_reint_record::rr_eadata</a>, <a class="el" href="mdt__internal_8h_source.html#l00299">mdt_reint_record::rr_eadatalen</a>, <a class="el" href="mdt__internal_8h_source.html#l00294">mdt_reint_record::rr_fid1</a>, <a class="el" href="mdt__internal_8h_source.html#l00296">mdt_reint_record::rr_name</a>, <a class="el" href="lu__target_8h_source.html#l00245">tgt_vbr_obj_set()</a>, <a class="el" href="md__object_8h_source.html#l00597">lu_ucred::uc_identity</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__idl_8h_source.html#l01588">XATTR_NAME_ACL_ACCESS</a>, <a class="el" href="lustre__idl_8h_source.html#l01589">XATTR_NAME_ACL_DEFAULT</a>, <a class="el" href="lustre__idl_8h_source.html#l01599">XATTR_NAME_FID</a>, <a class="el" href="lustre__idl_8h_source.html#l01602">XATTR_NAME_HSM</a>, <a class="el" href="lustre__idl_8h_source.html#l01606">XATTR_NAME_LFSCK_NAMESPACE</a>, <a class="el" href="lustre__idl_8h_source.html#l01598">XATTR_NAME_LINK</a>, <a class="el" href="lustre__idl_8h_source.html#l01595">XATTR_NAME_LMA</a>, <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>, <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>, <a class="el" href="lustre__idl_8h_source.html#l01601">XATTR_NAME_SOM</a>, <a class="el" href="lustre__idl_8h_source.html#l01600">XATTR_NAME_VERSION</a>, <a class="el" href="lustre__idl_8h_source.html#l01591">XATTR_TRUSTED_PREFIX</a>, and <a class="el" href="lustre__idl_8h_source.html#l01590">XATTR_USER_PREFIX</a>.</p>

</div>
</div>
<a class="anchor" id="a56ba543c1c6a06aaf51de1a9e95034a0"></a><!-- doxytag: member="mdt_internal.h::mdt_reint_unpack" ref="a56ba543c1c6a06aaf51de1a9e95034a0" args="(struct mdt_thread_info *info, __u32 op)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_reint_unpack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>op</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lib_8c_source.html#l01464">1464</a> of file <a class="el" href="mdt__lib_8c_source.html">mdt_lib.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__lib_8c_source.html#l01452">mdt_reint_unpackers</a>, <a class="el" href="mdt__internal_8h_source.html#l00380">mdt_thread_info::mti_rr</a>, <a class="el" href="packet-lustre_8c_source.html#l00258">REINT_MAX</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="mdt__internal_8h_source.html#l00292">mdt_reint_record::rr_opcode</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01806">mdt_reint_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="a73ffd45c980ee324bea1002e238d4e89"></a><!-- doxytag: member="mdt_internal.h::mdt_remote_blocking_ast" ref="a73ffd45c980ee324bea1002e238d4e89" args="(struct ldlm_lock *lock, struct ldlm_lock_desc *desc, void *data, int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_remote_blocking_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock__desc.html">ldlm_lock_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02366">2366</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00130">D_INODE</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="libcfs__private_8h_source.html#l00281">LBUG</a>, <a class="el" href="lustre__dlm_8h_source.html#l00616">LCF_ASYNC</a>, <a class="el" href="lustre__dlm_8h_source.html#l00103">LDLM_CB_BLOCKING</a>, <a class="el" href="lustre__dlm_8h_source.html#l00104">LDLM_CB_CANCELING</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01168">LDLM_DEBUG</a>, <a class="el" href="lustre__dlm__flags_8h_source.html#l00259">ldlm_is_atomic_cb</a>, <a class="el" href="ldlm__lock_8c_source.html#l00582">ldlm_lock2handle()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="tgt__main_8c_source.html#l00086">tgt_discard_slc_lock()</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00378">mdt_lock_slaves()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02431">mdt_remote_object_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="acbf7a7fa2fb5b6900518fd9b3337ec85"></a><!-- doxytag: member="mdt_internal.h::mdt_remote_object_lock" ref="acbf7a7fa2fb5b6900518fd9b3337ec85" args="(struct mdt_thread_info *mti, struct mdt_object *o, const struct lu_fid *fid, struct lustre_handle *lh, enum ldlm_mode mode, __u64 ibits, bool nonblock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_remote_object_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> *&nbsp;</td>
          <td class="paramname"> <em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ibits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>nonblock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02431">2431</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02841">ldlm_inodebits::bits</a>, <a class="el" href="lustre__dlm_8h_source.html#l01099">ldlm_enqueue_info::ei_cb_bl</a>, <a class="el" href="lustre__dlm_8h_source.html#l01101">ldlm_enqueue_info::ei_cb_cp</a>, <a class="el" href="lustre__dlm_8h_source.html#l01105">ldlm_enqueue_info::ei_enq_slave</a>, <a class="el" href="lustre__dlm_8h_source.html#l01098">ldlm_enqueue_info::ei_mode</a>, <a class="el" href="lustre__dlm_8h_source.html#l01105">ldlm_enqueue_info::ei_nonblock</a>, <a class="el" href="lustre__dlm_8h_source.html#l01097">ldlm_enqueue_info::ei_type</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__fid_8h_source.html#l00541">fid_build_reg_res_name()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00635">ldlm_policy_data::l_inodebits</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="packet-lustre_8c_source.html#l00301">LDLM_IBITS</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00538">mdt_object_remote()</a>, <a class="el" href="mdt__handler_8c_source.html#l02366">mdt_remote_blocking_ast()</a>, <a class="el" href="md__object_8h_source.html#l00447">mo_object_lock()</a>, <a class="el" href="mdt__internal_8h_source.html#l00430">mdt_thread_info::mti_einfo</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00398">mdt_thread_info::mti_policy</a>, <a class="el" href="mdt__internal_8h_source.html#l00399">mdt_thread_info::mti_res_id</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02563">mdt_object_lock_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01250">mdt_rename_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f4bfd97b654cb9f6ed0db86032ae48c"></a><!-- doxytag: member="mdt_internal.h::mdt_remote_perm_reverse_idmap" ref="a7f4bfd97b654cb9f6ed0db86032ae48c" args="(struct ptlrpc_request *, struct mdt_remote_perm *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_remote_perm_reverse_idmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__remote__perm.html">mdt_remote_perm</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a13b2ed8c228bd66a606ab15dd0c60de2"></a><!-- doxytag: member="mdt_internal.h::mdt_rename_counter_tally" ref="a13b2ed8c228bd66a606ab15dd0c60de2" args="(struct mdt_thread_info *info, struct mdt_device *mdt, struct ptlrpc_request *req, struct mdt_object *src, struct mdt_object *tgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_rename_counter_tally </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>tgt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lproc_8c_source.html#l00172">172</a> of file <a class="el" href="mdt__lproc_8c_source.html">mdt_lproc.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="lprocfs__status_8h_source.html#l00100">rename_stats::hist</a>, <a class="el" href="lu__object_8h_source.html#l00409">lu_attr::la_size</a>, <a class="el" href="mdt__internal_8h_source.html#l01025">LPROC_MDT_CROSSDIR_RENAME</a>, <a class="el" href="mdt__internal_8h_source.html#l01024">LPROC_MDT_SAMEDIR_RENAME</a>, <a class="el" href="lprocfs__status_8h_source.html#l01034">lprocfs_oh_tally_log2()</a>, <a class="el" href="md__object_8h_source.html#l00119">md_attr::ma_attr</a>, <a class="el" href="md__object_8h_source.html#l00072">MA_INODE</a>, <a class="el" href="md__object_8h_source.html#l00117">md_attr::ma_need</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdt__lproc_8c_source.html#l00929">mdt_counter_incr()</a>, <a class="el" href="mdt__internal_8h_source.html#l01048">mdt_obd_name()</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="mdt__internal_8h_source.html#l00543">mdt_object_fid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00210">mdt_device::mdt_rename_stats</a>, <a class="el" href="md__object_8h_source.html#l00338">mo_attr_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="lprocfs__status_8h_source.html#l00094">RENAME_CROSSDIR_SRC_SIZE</a>, <a class="el" href="lprocfs__status_8h_source.html#l00095">RENAME_CROSSDIR_TGT_SIZE</a>, and <a class="el" href="lprocfs__status_8h_source.html#l00093">RENAME_SAMEDIR_SIZE</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0d37b92558774f0841bb636a6ee4433"></a><!-- doxytag: member="mdt_internal.h::mdt_req2med" ref="ab0d37b92558774f0841bb636a6ee4433" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmdt__export__data.html">mdt_export_data</a>* mdt_req2med </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00909">909</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>.</p>

<p>Referenced by <a class="el" href="mdt__idmap_8c_source.html#l00275">mdt_body_reverse_idmap()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00317">mdt_fix_attr_ucred()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00227">mdt_getxattr()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00161">mdt_getxattr_all()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00135">mdt_handle_idmap()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00075">mdt_init_idmap()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00316">mdt_rmtlsetfacl()</a>, and <a class="el" href="mdt__idmap_8c_source.html#l00218">ptlrpc_user_desc_do_idmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f116e637fd5c35d46878265cc5a464c"></a><!-- doxytag: member="mdt_internal.h::mdt_req_from_lrd" ref="a3f116e637fd5c35d46878265cc5a464c" args="(struct ptlrpc_request *req, struct tg_reply_data *trd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> mdt_req_from_lrd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtg__reply__data.html">tg_reply_data</a> *&nbsp;</td>
          <td class="paramname"> <em>trd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__recovery_8c_source.html#l00180">180</a> of file <a class="el" href="mdt__recovery_8c_source.html">mdt_recovery.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00148">D_HA</a>, <a class="el" href="libcfs__debug_8h_source.html#l00149">D_RPCTRACE</a>, <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00046">LPD64</a>, <a class="el" href="lustre__disk_8h_source.html#l00384">lsd_reply_data::lrd_data</a>, <a class="el" href="lustre__disk_8h_source.html#l00385">lsd_reply_data::lrd_result</a>, <a class="el" href="lustre__disk_8h_source.html#l00382">lsd_reply_data::lrd_transno</a>, <a class="el" href="pack__generic_8c_source.html#l01439">lustre_msg_set_status()</a>, <a class="el" href="pack__generic_8c_source.html#l01424">lustre_msg_set_transno()</a>, <a class="el" href="pack__generic_8c_source.html#l01406">lustre_msg_set_versions()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00130">mdt_steal_ack_locks()</a>, <a class="el" href="lustre__net_8h_source.html#l01032">ptlrpc_request::rq_repmsg</a>, <a class="el" href="lustre__net_8h_source.html#l00957">ptlrpc_request::rq_status</a>, <a class="el" href="lustre__net_8h_source.html#l01034">ptlrpc_request::rq_transno</a>, <a class="el" href="lu__target_8h_source.html#l00179">tg_reply_data::trd_pre_versions</a>, and <a class="el" href="lu__target_8h_source.html#l00177">tg_reply_data::trd_reply</a>.</p>

<p>Referenced by <a class="el" href="mdt__recovery_8c_source.html#l00239">mdt_reconstruct_create()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00210">mdt_reconstruct_generic()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, and <a class="el" href="mdt__recovery_8c_source.html#l00286">mdt_reconstruct_setattr()</a>.</p>

</div>
</div>
<a class="anchor" id="a54a2dc448ff4c9a001320cb14c3af14a"></a><!-- doxytag: member="mdt_internal.h::mdt_req_get_jobid" ref="a54a2dc448ff4c9a001320cb14c3af14a" args="(struct ptlrpc_request *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* mdt_req_get_jobid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l01056">1056</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="pack__generic_8c_source.html#l01251">lustre_msg_get_jobid()</a>, <a class="el" href="lustre__idl_8h_source.html#l01225">OBD_CONNECT_JOBSTATS</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, and <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00131">ucred_set_jobid()</a>.</p>

</div>
</div>
<a class="anchor" id="a47167976d462dfd24ac59e1c29213712"></a><!-- doxytag: member="mdt_internal.h::mdt_seq_site" ref="a47167976d462dfd24ac59e1c29213712" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structseq__server__site.html">seq_server_site</a>* mdt_seq_site </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00553">553</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00160">mdt_device::mdt_seq_site</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l03668">mdt_deregister_seq_exp()</a>, <a class="el" href="mdt__handler_8c_source.html#l03874">mdt_fld_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l03889">mdt_fld_init()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mdt__handler_8c_source.html#l03710">mdt_register_lwp_callback()</a>, <a class="el" href="mdt__handler_8c_source.html#l03746">mdt_register_seq_exp()</a>, <a class="el" href="mdt__reint_8c_source.html#l01250">mdt_rename_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l03697">mdt_seq_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l03686">mdt_seq_fini_cli()</a>, <a class="el" href="mdt__handler_8c_source.html#l03824">mdt_seq_init()</a>, and <a class="el" href="mdt__handler_8c_source.html#l03787">mdt_seq_init_cli()</a>.</p>

</div>
</div>
<a class="anchor" id="abc91f6ad8fc0ec7541491e8f4ff11c55"></a><!-- doxytag: member="mdt_internal.h::mdt_set_disposition" ref="abc91f6ad8fc0ec7541491e8f4ff11c55" args="(struct mdt_thread_info *info, struct ldlm_reply *rep, __u64 op_flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_set_disposition </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__reply.html">ldlm_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>rep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>op_flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00152">152</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l02929">ldlm_reply::lock_policy_res1</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00368">mdt_thread_info::mti_opdata</a>, and <a class="el" href="lu__target_8h_source.html#l00256">tgt_opdata_set()</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00500">mdt_finish_open()</a>, <a class="el" href="mdt__handler_8c_source.html#l01366">mdt_getattr_name_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l03296">mdt_intent_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l03431">mdt_intent_reint()</a>, <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>, <a class="el" href="mdt__open_8c_source.html#l00733">mdt_open_by_fid()</a>, <a class="el" href="mdt__open_8c_source.html#l01018">mdt_open_by_fid_lock()</a>, <a class="el" href="mdt__handler_8c_source.html#l01331">mdt_raw_lookup()</a>, <a class="el" href="mdt__open_8c_source.html#l00623">mdt_reconstruct_open()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a62bfd67ae09cc0f32a9542b7d68d050e"></a><!-- doxytag: member="mdt_internal.h::mdt_slc_is_enabled" ref="a62bfd67ae09cc0f32a9542b7d68d050e" args="(struct mdt_device *mdt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool mdt_slc_is_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__device.html">mdt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>mdt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00982">982</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="obd_8h_source.html#l00143">BLOCKING_SYNC_ON_CANCEL</a>, <a class="el" href="lu__target_8h_source.html#l00135">lu_target::lut_sync_lock_cancel</a>, and <a class="el" href="mdt__internal_8h_source.html#l00171">mdt_device::mdt_lut</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02308">mdt_blocking_ast()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02675">mdt_save_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="acfd226054a17127ce7870a4e2647c89c"></a><!-- doxytag: member="mdt_internal.h::mdt_stats_counter_init" ref="acfd226054a17127ce7870a4e2647c89c" args="(struct lprocfs_stats *stats)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_stats_counter_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlprocfs__stats.html">lprocfs_stats</a> *&nbsp;</td>
          <td class="paramname"> <em>stats</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lproc_8c_source.html#l00944">944</a> of file <a class="el" href="mdt__lproc_8c_source.html">mdt_lproc.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l01011">LPROC_MDT_CLOSE</a>, <a class="el" href="mdt__internal_8h_source.html#l01025">LPROC_MDT_CROSSDIR_RENAME</a>, <a class="el" href="mdt__internal_8h_source.html#l01018">LPROC_MDT_GETATTR</a>, <a class="el" href="mdt__internal_8h_source.html#l01020">LPROC_MDT_GETXATTR</a>, <a class="el" href="mdt__internal_8h_source.html#l01013">LPROC_MDT_LINK</a>, <a class="el" href="mdt__internal_8h_source.html#l01015">LPROC_MDT_MKDIR</a>, <a class="el" href="mdt__internal_8h_source.html#l01012">LPROC_MDT_MKNOD</a>, <a class="el" href="mdt__internal_8h_source.html#l01010">LPROC_MDT_OPEN</a>, <a class="el" href="mdt__internal_8h_source.html#l01017">LPROC_MDT_RENAME</a>, <a class="el" href="mdt__internal_8h_source.html#l01016">LPROC_MDT_RMDIR</a>, <a class="el" href="mdt__internal_8h_source.html#l01024">LPROC_MDT_SAMEDIR_RENAME</a>, <a class="el" href="mdt__internal_8h_source.html#l01019">LPROC_MDT_SETATTR</a>, <a class="el" href="mdt__internal_8h_source.html#l01021">LPROC_MDT_SETXATTR</a>, <a class="el" href="mdt__internal_8h_source.html#l01022">LPROC_MDT_STATFS</a>, <a class="el" href="mdt__internal_8h_source.html#l01023">LPROC_MDT_SYNC</a>, <a class="el" href="mdt__internal_8h_source.html#l01014">LPROC_MDT_UNLINK</a>, and <a class="el" href="lprocfs__status_8h_source.html#l00878">lprocfs_counter_init()</a>.</p>

<p>Referenced by <a class="el" href="mdt__fs_8c_source.html#l00066">mdt_export_stats_init()</a>, and <a class="el" href="mdt__lproc_8c_source.html#l00966">mdt_procfs_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f2e82b00a1396a71d09c6f73d8d4239"></a><!-- doxytag: member="mdt_internal.h::mdt_stripe_get" ref="a1f2e82b00a1396a71d09c6f73d8d4239" args="(struct mdt_thread_info *info, struct mdt_object *o, struct md_attr *ma, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_stripe_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmd__attr.html">md_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00697">697</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00304">exp_connect_flags()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="byteorder_8h_source.html#l00056">le32_to_cpu</a>, <a class="el" href="lustre__user_8h_source.html#l00351">LOV_PATTERN_F_HOLE</a>, <a class="el" href="md__object_8h_source.html#l00122">md_attr::ma_lmm</a>, <a class="el" href="md__object_8h_source.html#l00125">md_attr::ma_lmm_size</a>, <a class="el" href="md__object_8h_source.html#l00075">MA_LMV</a>, <a class="el" href="md__object_8h_source.html#l00123">md_attr::ma_lmv</a>, <a class="el" href="md__object_8h_source.html#l00080">MA_LMV_DEF</a>, <a class="el" href="md__object_8h_source.html#l00126">md_attr::ma_lmv_size</a>, <a class="el" href="md__object_8h_source.html#l00073">MA_LOV</a>, <a class="el" href="md__object_8h_source.html#l00116">md_attr::ma_valid</a>, <a class="el" href="mdt__handler_8c_source.html#l00658">mdt_big_xattr_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00190">mdt_device::mdt_max_mdsize</a>, <a class="el" href="mdt__internal_8h_source.html#l00500">mdt_object_child()</a>, <a class="el" href="md__object_8h_source.html#l00370">mo_xattr_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00424">mdt_thread_info::mti_big_lmm</a>, <a class="el" href="mdt__internal_8h_source.html#l00427">mdt_thread_info::mti_big_lmm_used</a>, <a class="el" href="mdt__internal_8h_source.html#l00418">mdt_thread_info::mti_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="lustre__idl_8h_source.html#l01242">OBD_CONNECT_LFSCK</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__idl_8h_source.html#l01597">XATTR_NAME_DEFAULT_LMV</a>, <a class="el" href="lustre__idl_8h_source.html#l01596">XATTR_NAME_LMV</a>, and <a class="el" href="lustre__idl_8h_source.html#l01594">XATTR_NAME_LOV</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l00819">mdt_attr_get_complex()</a>, <a class="el" href="mdt__handler_8c_source.html#l00905">mdt_getattr_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3da0e9c02b5a632a50565b0b174a006"></a><!-- doxytag: member="mdt_internal.h::mdt_th_info" ref="ad3da0e9c02b5a632a50565b0b174a006" args="(const struct lu_env *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a>* mdt_th_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00436">436</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8c_source.html#l01574">lu_context_key_get()</a>, <a class="el" href="lu__object_8c_source.html#l01889">lu_env_refill()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00893">mdt_thread_key</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l01736">mdt_readpage()</a>, and <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>.</p>

</div>
</div>
<a class="anchor" id="aa879dcf286a75988acf8bac33f42dcb5"></a><!-- doxytag: member="mdt_internal.h::mdt_thread_info_fini" ref="aa879dcf286a75988acf8bac33f42dcb5" args="(struct mdt_thread_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_thread_info_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02949">2949</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8c_source.html#l02339">lu_buf_free()</a>, <a class="el" href="mdt__handler_8c_source.html#l02899">mdt_lock_handle_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00525">mdt_object_put()</a>, <a class="el" href="mdt__internal_8h_source.html#l00419">mdt_thread_info::mti_big_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00355">mdt_thread_info::mti_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, and <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, <a class="el" href="mdt__handler_8c_source.html#l05728">mdt_get_info()</a>, <a class="el" href="mdt__handler_8c_source.html#l00354">mdt_get_root()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00146">mdt_hsm_ct_register()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00169">mdt_hsm_ct_unregister()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00108">mdt_hsm_progress()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l03615">mdt_intent_policy()</a>, <a class="el" href="mdt__handler_8c_source.html#l01905">mdt_reint()</a>, <a class="el" href="mdt__handler_8c_source.html#l00391">mdt_statfs()</a>, <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04329">mdt_tgt_getxattr()</a>.</p>

</div>
</div>
<a class="anchor" id="aec2373a7c167b8d6a6c150cfb76fe5ef"></a><!-- doxytag: member="mdt_internal.h::mdt_thread_info_init" ref="aec2373a7c167b8d6a6c150cfb76fe5ef" args="(struct ptlrpc_request *req, struct mdt_thread_info *mti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_thread_info_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>mti</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02910">2910</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="lustre__export_8h_source.html#l00209">obd_export::exp_obd</a>, <a class="el" href="lu__object_8c_source.html#l02333">LU_BUF_NULL</a>, <a class="el" href="pack__generic_8c_source.html#l01080">lustre_msg_get_transno()</a>, <a class="el" href="mdt__handler_8c.html#a3ea821301f1291dc05ae1478e7055a6b">mdt_dev()</a>, <a class="el" href="mdt__handler_8c_source.html#l02888">mdt_lock_handle_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00347">mdt_thread_info::mti_attr</a>, <a class="el" href="mdt__internal_8h_source.html#l00419">mdt_thread_info::mti_big_buf</a>, <a class="el" href="mdt__internal_8h_source.html#l00427">mdt_thread_info::mti_big_lmm_used</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00361">mdt_thread_info::mti_cross_ref</a>, <a class="el" href="mdt__internal_8h_source.html#l00359">mdt_thread_info::mti_dlm_req</a>, <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>, <a class="el" href="mdt__internal_8h_source.html#l00324">mdt_thread_info::mti_exp</a>, <a class="el" href="mdt__internal_8h_source.html#l00361">mdt_thread_info::mti_has_trans</a>, <a class="el" href="mdt__internal_8h_source.html#l00328">mdt_thread_info::mti_lh</a>, <a class="el" href="mdt__internal_8h_source.html#l00330">mdt_thread_info::mti_mdt</a>, <a class="el" href="mdt__internal_8h_source.html#l00355">mdt_thread_info::mti_object</a>, <a class="el" href="mdt__internal_8h_source.html#l00368">mdt_thread_info::mti_opdata</a>, <a class="el" href="mdt__internal_8h_source.html#l00320">mdt_thread_info::mti_pill</a>, <a class="el" href="mdt__internal_8h_source.html#l00386">mdt_thread_info::mti_spec</a>, <a class="el" href="mdt__internal_8h_source.html#l00334">mdt_thread_info::mti_transno</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::no_create</a>, <a class="el" href="obd_8h_source.html#l00595">obd_device::obd_lu_dev</a>, <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="lustre__net_8h_source.html#l01030">ptlrpc_request::rq_reqmsg</a>, <a class="el" href="structmd__op__spec.html#ad74c1d49e024fdbc5a44e764a5a82c05">md_op_spec::sp_ea</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_migrate_close</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_permitted</a>, <a class="el" href="md__object_8h_source.html#l00146">md_op_spec::sp_rm_entry</a>, and <a class="el" href="structmd__op__spec.html#a13d810e55e3284f5244598d00fe84ca3">md_op_spec::u</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l02968">tsi2mdt_info()</a>.</p>

</div>
</div>
<a class="anchor" id="a756df180ff195deb2a9cb4e497d78bd1"></a><!-- doxytag: member="mdt_internal.h::mdt_ucred" ref="a756df180ff195deb2a9cb4e497d78bd1" args="(const struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__ucred.html">lu_ucred</a>* mdt_ucred </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l06063">6063</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lu__ucred_8c_source.html#l00065">lu_ucred()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00577">__mdt_init_ucred()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00249">hsm_action_permission()</a>, <a class="el" href="mdt__idmap_8c_source.html#l00275">mdt_body_reverse_idmap()</a>, <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l01073">mdt_create_unpack()</a>, <a class="el" href="mdt__handler_8c_source.html#l05106">mdt_ctxt_add_dirty_flag()</a>, <a class="el" href="mdt__lib_8c_source.html#l00065">mdt_exit_ucred()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00161">mdt_getxattr_all()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00795">mdt_hsm_cdt_init()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00081">mdt_hsm_is_admin()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l01382">mdt_hsm_update_request_state()</a>, <a class="el" href="mdt__lib_8c_source.html#l00612">mdt_init_ucred_reint()</a>, <a class="el" href="mdt__lib_8c_source.html#l01142">mdt_link_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l01320">mdt_open_unpack()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>, <a class="el" href="mdt__reint_8c_source.html#l00223">mdt_remote_permission_check()</a>, <a class="el" href="mdt__lib_8c_source.html#l01234">mdt_rename_unpack()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00316">mdt_rmtlsetfacl()</a>, <a class="el" href="mdt__lib_8c_source.html#l00099">mdt_root_squash()</a>, <a class="el" href="mdt__lib_8c_source.html#l00909">mdt_setattr_unpack_rec()</a>, <a class="el" href="mdt__lib_8c_source.html#l01391">mdt_setxattr_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l01181">mdt_unlink_unpack()</a>, <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00518">old_init_ucred()</a>, <a class="el" href="mdt__lib_8c_source.html#l00466">old_init_ucred_common()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00552">old_init_ucred_reint()</a>.</p>

</div>
</div>
<a class="anchor" id="ac419ee17745634343feedaf732be998c"></a><!-- doxytag: member="mdt_internal.h::mdt_ucred_check" ref="ac419ee17745634343feedaf732be998c" args="(const struct mdt_thread_info *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__ucred.html">lu_ucred</a>* mdt_ucred_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l06068">6068</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="lu__ucred_8c_source.html#l00077">lu_ucred_check()</a>, and <a class="el" href="mdt__internal_8h_source.html#l00331">mdt_thread_info::mti_env</a>.</p>

<p>Referenced by <a class="el" href="mdt__idmap_8c_source.html#l00317">mdt_fix_attr_ucred()</a>, and <a class="el" href="mdt__identity_8c_source.html#l00276">mdt_pack_remote_perm()</a>.</p>

</div>
</div>
<a class="anchor" id="aba0ce4958d0fa3402b3a26ff34118d16"></a><!-- doxytag: member="mdt_internal.h::mdt_version_get_check" ref="aba0ce4958d0fa3402b3a26ff34118d16" args="(struct mdt_thread_info *, struct mdt_object *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_version_get_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get version from disk and check it, no save in reply. </p>

<p>Definition at line <a class="el" href="mdt__reint_8c_source.html#l00162">162</a> of file <a class="el" href="mdt__reint_8c_source.html">mdt_reint.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l00083">mdt_version_check()</a>, <a class="el" href="mdt__internal_8h_source.html#l00382">mdt_thread_info::mti_ver</a>, and <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l01776">mdt_object_find_check()</a>, and <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>.</p>

</div>
</div>
<a class="anchor" id="a437fb3d020ddb61c2c180b492d64303c"></a><!-- doxytag: member="mdt_internal.h::mdt_version_get_check_save" ref="a437fb3d020ddb61c2c180b492d64303c" args="(struct mdt_thread_info *, struct mdt_object *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_version_get_check_save </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get version from disk and check if recovery or just save. </p>

<p>Definition at line <a class="el" href="mdt__reint_8c_source.html#l00176">176</a> of file <a class="el" href="mdt__reint_8c_source.html">mdt_reint.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l00083">mdt_version_check()</a>, <a class="el" href="mdt__reint_8c_source.html#l00116">mdt_version_save()</a>, <a class="el" href="mdt__internal_8h_source.html#l00382">mdt_thread_info::mti_ver</a>, and <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00596">mdt_attr_set()</a>, <a class="el" href="mdt__reint_8c_source.html#l00436">mdt_md_create()</a>, <a class="el" href="mdt__reint_8c_source.html#l01098">mdt_reint_link()</a>, <a class="el" href="mdt__reint_8c_source.html#l01503">mdt_reint_migrate_internal()</a>, <a class="el" href="mdt__xattr_8c_source.html#l00363">mdt_reint_setxattr()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a75586850e9d1961dfc1e2fdceab17520"></a><!-- doxytag: member="mdt_internal.h::mdt_version_get_save" ref="a75586850e9d1961dfc1e2fdceab17520" args="(struct mdt_thread_info *, struct mdt_object *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_version_get_save </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>mto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get version from disk and save in reply buffer. </p>
<p>Versions are saved in reply only during normal operations not replays. </p>

<p>Definition at line <a class="el" href="mdt__reint_8c_source.html#l00149">149</a> of file <a class="el" href="mdt__reint_8c_source.html">mdt_reint.c</a>.</p>

<p>References <a class="el" href="mdt__internal_8h_source.html#l00506">mdt_info_req()</a>, <a class="el" href="mdt__reint_8c_source.html#l00065">mdt_obj_version_get()</a>, <a class="el" href="mdt__reint_8c_source.html#l00116">mdt_version_save()</a>, <a class="el" href="mdt__internal_8h_source.html#l00382">mdt_thread_info::mti_ver</a>, and <a class="el" href="lu__target_8h_source.html#l00345">req_is_replay()</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l01799">mdt_object_lock_save()</a>, <a class="el" href="mdt__open_8c_source.html#l01180">mdt_reint_open()</a>, <a class="el" href="mdt__reint_8c_source.html#l01833">mdt_reint_rename_internal()</a>, and <a class="el" href="mdt__reint_8c_source.html#l00871">mdt_reint_unlink()</a>.</p>

</div>
</div>
<a class="anchor" id="afd41f8b1bef4cb5b2fb82f28acd41e9f"></a><!-- doxytag: member="mdt_internal.h::mdt_write_get" ref="afd41f8b1bef4cb5b2fb82f28acd41e9f" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_write_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00151">151</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="adf09035bc4105586e896607ce3ab1d24"></a><!-- doxytag: member="mdt_internal.h::mdt_write_put" ref="adf09035bc4105586e896607ce3ab1d24" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdt_write_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00165">165</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, and <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l01939">mdt_mfd_close()</a>, and <a class="el" href="mdt__open_8c_source.html#l00331">mdt_mfd_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aff1dac946c86bda1fb55a7b80e5b4553"></a><!-- doxytag: member="mdt_internal.h::mdt_write_read" ref="aff1dac946c86bda1fb55a7b80e5b4553" args="(struct mdt_object *o)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mdt_write_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmdt__object.html">mdt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>o</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__open_8c_source.html#l00141">141</a> of file <a class="el" href="mdt__open_8c_source.html">mdt_open.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="mdt__internal_8h_source.html#l00239">mdt_object::mot_write_count</a>, <a class="el" href="mdt__internal_8h_source.html#l00240">mdt_object::mot_write_lock</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="mdt__reint_8c_source.html#l00715">mdt_reint_setattr()</a>.</p>

</div>
</div>
<a class="anchor" id="afc0fda5078eab3eaf0bde9a8117755cb"></a><!-- doxytag: member="mdt_internal.h::ptlrpc_user_desc_do_idmap" ref="afc0fda5078eab3eaf0bde9a8117755cb" args="(struct ptlrpc_request *, struct ptlrpc_user_desc *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptlrpc_user_desc_do_idmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__user__desc.html">ptlrpc_user_desc</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__idmap_8c_source.html#l00218">218</a> of file <a class="el" href="mdt__idmap_8c_source.html">mdt_idmap.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="lustre__idmap_8h_source.html#l00064">CFS_IDMAP_NOTFOUND</a>, <a class="el" href="libcfs__debug_8h_source.html#l00156">D_SEC</a>, <a class="el" href="lustre__export_8h_source.html#l00342">exp_connect_rmtclient()</a>, <a class="el" href="idmap_8c_source.html#l00409">lustre_idmap_lookup_gid()</a>, <a class="el" href="idmap_8c_source.html#l00376">lustre_idmap_lookup_uid()</a>, <a class="el" href="mdt__internal_8h_source.html#l00909">mdt_req2med()</a>, <a class="el" href="lustre__export_8h_source.html#l00098">mdt_export_data::med_idmap</a>, <a class="el" href="lustre__sec_8h_source.html#l00893">ptlrpc_user_desc::pud_fsgid</a>, <a class="el" href="lustre__sec_8h_source.html#l00892">ptlrpc_user_desc::pud_fsuid</a>, <a class="el" href="lustre__sec_8h_source.html#l00891">ptlrpc_user_desc::pud_gid</a>, <a class="el" href="lustre__sec_8h_source.html#l00890">ptlrpc_user_desc::pud_uid</a>, and <a class="el" href="lustre__net_8h_source.html#l01102">ptlrpc_request::rq_export</a>.</p>

<p>Referenced by <a class="el" href="mdt__lib_8c_source.html#l00362">mdt_check_ucred()</a>, and <a class="el" href="mdt__lib_8c_source.html#l00143">new_init_ucred()</a>.</p>

</div>
</div>
<a class="anchor" id="ac3db3f215fff161c7d1276d6217b1bfc"></a><!-- doxytag: member="mdt_internal.h::target_recovery_fini" ref="ac3db3f215fff161c7d1276d6217b1bfc" args="(struct obd_device *obd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void target_recovery_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobd__device.html">obd_device</a> *&nbsp;</td>
          <td class="paramname"> <em>obd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04447">mdt_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, and <a class="el" href="ofd__dev_8c_source.html#l02983">ofd_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c8ebefb0e9c977840de5620dfd7e655"></a><!-- doxytag: member="mdt_internal.h::target_recovery_init" ref="a8c8ebefb0e9c977840de5620dfd7e655" args="(struct lu_target *lut, svc_handler_t handler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void target_recovery_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__target.html">lu_target</a> *&nbsp;</td>
          <td class="paramname"> <em>lut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net.html#gaafdde121d699c66fbef23b0a702d1cb0">svc_handler_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04915">mdt_prepare()</a>, and <a class="el" href="ofd__dev_8c_source.html#l00576">ofd_prepare()</a>.</p>

</div>
</div>
<a class="anchor" id="a60e67e7a7d074e6db83eaa77815db518"></a><!-- doxytag: member="mdt_internal.h::tsi2mdt_info" ref="a60e67e7a7d074e6db83eaa77815db518" args="(struct tgt_session_info *tsi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmdt__thread__info.html">mdt_thread_info</a>* tsi2mdt_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtgt__session__info.html">tgt_session_info</a> *&nbsp;</td>
          <td class="paramname"> <em>tsi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l02968">2968</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00709">lu_object_get()</a>, <a class="el" href="mdt__internal_8h_source.html#l00755">mdt_obj()</a>, <a class="el" href="mdt__internal_8h_source.html#l00436">mdt_th_info()</a>, <a class="el" href="mdt__handler_8c_source.html#l02910">mdt_thread_info_init()</a>, <a class="el" href="mdt__internal_8h_source.html#l00351">mdt_thread_info::mti_body</a>, <a class="el" href="mdt__internal_8h_source.html#l00359">mdt_thread_info::mti_dlm_req</a>, <a class="el" href="mdt__internal_8h_source.html#l00355">mdt_thread_info::mti_object</a>, <a class="el" href="lu__target_8h_source.html#l00334">tgt_ses_req()</a>, <a class="el" href="lu__target_8h_source.html#l00208">tgt_session_info::tsi_corpus</a>, <a class="el" href="lu__target_8h_source.html#l00198">tgt_session_info::tsi_dlm_req</a>, <a class="el" href="lu__target_8h_source.html#l00203">tgt_session_info::tsi_env</a>, and <a class="el" href="lu__target_8h_source.html#l00206">tgt_session_info::tsi_mdt_body</a>.</p>

<p>Referenced by <a class="el" href="mdt__open_8c_source.html#l02047">mdt_close()</a>, <a class="el" href="mdt__handler_8c_source.html#l05728">mdt_get_info()</a>, <a class="el" href="mdt__handler_8c_source.html#l00354">mdt_get_root()</a>, <a class="el" href="mdt__handler_8c_source.html#l01136">mdt_getattr()</a>, <a class="el" href="mdt__handler_8c_source.html#l01634">mdt_getattr_name()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00371">mdt_hsm_action()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00146">mdt_hsm_ct_register()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00169">mdt_hsm_ct_unregister()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00108">mdt_hsm_progress()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00471">mdt_hsm_request()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00197">mdt_hsm_state_get()</a>, <a class="el" href="mdt__hsm_8c_source.html#l00254">mdt_hsm_state_set()</a>, <a class="el" href="mdt__handler_8c_source.html#l03615">mdt_intent_policy()</a>, <a class="el" href="mdt__handler_8c_source.html#l01905">mdt_reint()</a>, <a class="el" href="mdt__handler_8c_source.html#l00391">mdt_statfs()</a>, <a class="el" href="mdt__handler_8c_source.html#l01240">mdt_swap_layouts()</a>, <a class="el" href="mdt__handler_8c_source.html#l01970">mdt_sync()</a>, <a class="el" href="mdt__handler_8c_source.html#l02986">mdt_tgt_connect()</a>, and <a class="el" href="mdt__handler_8c_source.html#l04329">mdt_tgt_getxattr()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ad5495cc0fb2320b79d27fb0eb2f8c675"></a><!-- doxytag: member="mdt_internal.h::mdt_dlm_lock_modes" ref="ad5495cc0fb2320b79d27fb0eb2f8c675" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lustreidl.html#ga78e7c1d7ad283002413a597e75aa7441">ldlm_mode</a> <a class="el" href="mdt__internal_8h.html#ad5495cc0fb2320b79d27fb0eb2f8c675">mdt_dlm_lock_modes</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00088">88</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__internal_8h_source.html#l00996">mdt_mdl_mode2dlm_mode()</a>.</p>

</div>
</div>
<a class="anchor" id="abff0f16680b2b0d72232473a476bdb5a"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_actions_fops" ref="abff0f16680b2b0d72232473a476bdb5a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="mdt__internal_8h.html#abff0f16680b2b0d72232473a476bdb5a">mdt_hsm_actions_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__actions_8c_source.html#l00526">526</a> of file <a class="el" href="mdt__hsm__cdt__actions_8c_source.html">mdt_hsm_cdt_actions.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8a5e8807a037144bdea0c3e7b101e039"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_active_requests_fops" ref="a8a5e8807a037144bdea0c3e7b101e039" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="mdt__internal_8h.html#a8a5e8807a037144bdea0c3e7b101e039">mdt_hsm_active_requests_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00589">589</a> of file <a class="el" href="mdt__hsm__cdt__requests_8c_source.html">mdt_hsm_cdt_requests.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae27f872199c9effc47a6630d21ff2509"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_agent_fops" ref="ae27f872199c9effc47a6630d21ff2509" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations <a class="el" href="mdt__internal_8h.html#ae27f872199c9effc47a6630d21ff2509">mdt_hsm_agent_fops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00654">654</a> of file <a class="el" href="mdt__hsm__cdt__agent_8c_source.html">mdt_hsm_cdt_agent.c</a>.</p>

</div>
</div>
<a class="anchor" id="a00d67c8b3c100ebd34463e63e4d15cff"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_car_kmem" ref="a00d67c8b3c100ebd34463e63e4d15cff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="mdt__internal_8h.html#a00d67c8b3c100ebd34463e63e4d15cff">mdt_hsm_car_kmem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00111">111</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00238">mdt_cdt_alloc_request()</a>, and <a class="el" href="mdt__hsm__cdt__requests_8c_source.html#l00273">mdt_cdt_free_request()</a>.</p>

</div>
</div>
<a class="anchor" id="a9586a76ec8e763abdcaca0585df25515"></a><!-- doxytag: member="mdt_internal.h::mdt_hsm_cdt_kmem" ref="a9586a76ec8e763abdcaca0585df25515" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* <a class="el" href="mdt__internal_8h.html#a9586a76ec8e763abdcaca0585df25515">mdt_hsm_cdt_kmem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00108">108</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01161">hsm_cdt_request_completed()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00654">hsm_restore_cb()</a>, <a class="el" href="mdt__hsm__cdt__client_8c_source.html#l00298">mdt_hsm_add_actions()</a>, <a class="el" href="mdt__hsm__cdt__agent_8c_source.html#l00322">mdt_hsm_agent_send()</a>, and <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="aec11c5f96a68937fcc4b2871eb6ae9bd"></a><!-- doxytag: member="mdt_internal.h::mdt_identity_upcall_cache_ops" ref="aec11c5f96a68937fcc4b2871eb6ae9bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structupcall__cache__ops.html">upcall_cache_ops</a> <a class="el" href="mdt__internal_8h.html#aec11c5f96a68937fcc4b2871eb6ae9bd">mdt_identity_upcall_cache_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__identity_8c_source.html#l00229">229</a> of file <a class="el" href="mdt__identity_8c_source.html">mdt_identity.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b9c1a5297b0749fe033e3ad82b414c5"></a><!-- doxytag: member="mdt_internal.h::mdt_lu_ops" ref="a5b9c1a5297b0749fe033e3ad82b414c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__device__operations.html">lu_device_operations</a> <a class="el" href="mdt__internal_8h.html#a5b9c1a5297b0749fe033e3ad82b414c5">mdt_lu_ops</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l04967">4967</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a341e91e700909b48256c4265197088fb"></a><!-- doxytag: member="mdt_internal.h::mdt_lvbo" ref="a341e91e700909b48256c4265197088fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__valblock__ops.html">ldlm_valblock_ops</a> <a class="el" href="mdt__lvb_8c.html#a341e91e700909b48256c4265197088fb">mdt_lvbo</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__lvb_8c_source.html#l00199">199</a> of file <a class="el" href="mdt__lvb_8c_source.html">mdt_lvb.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b4a26c6568b23d58b864ca552e9dad8"></a><!-- doxytag: member="mdt_internal.h::mdt_mdl_lock_modes" ref="a1b4a26c6568b23d58b864ca552e9dad8" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__md.html#gaeff7094cae9099800057edce10196e98">mdl_mode_t</a> <a class="el" href="mdt__internal_8h.html#a1b4a26c6568b23d58b864ca552e9dad8">mdt_mdl_lock_modes</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__handler_8c_source.html#l00077">77</a> of file <a class="el" href="mdt__handler_8c_source.html">mdt_handler.c</a>.</p>

<p>Referenced by <a class="el" href="mdt__internal_8h_source.html#l00990">mdt_dlm_mode2mdl_mode()</a>.</p>

</div>
</div>
<a class="anchor" id="a1ee0b71d491a3551bdc252f70d503e4b"></a><!-- doxytag: member="mdt_internal.h::mdt_thread_key" ref="a1ee0b71d491a3551bdc252f70d503e4b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__context__key.html">lu_context_key</a> <a class="el" href="mdt__recovery_8c.html#a1ee0b71d491a3551bdc252f70d503e4b">mdt_thread_key</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mdt__internal_8h_source.html#l00893">893</a> of file <a class="el" href="mdt__internal_8h_source.html">mdt_internal.h</a>.</p>

<p>Referenced by <a class="el" href="mdt__coordinator_8c_source.html#l01544">hsm_cancel_all_actions()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00048">mdt_buf()</a>, <a class="el" href="mdt__recovery_8c_source.html#l00060">mdt_buf_const()</a>, <a class="el" href="mdt__handler_8c_source.html#l05131">mdt_export_cleanup()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00795">mdt_hsm_cdt_init()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00871">mdt_hsm_cdt_start()</a>, <a class="el" href="mdt__coordinator_8c_source.html#l00941">mdt_hsm_cdt_stop()</a>, <a class="el" href="mdt__handler_8c_source.html#l04511">mdt_init0()</a>, <a class="el" href="mdt__handler_8c_source.html#l05849">mdt_iocontrol()</a>, <a class="el" href="mdt__lvb_8c_source.html#l00095">mdt_lvbo_fill()</a>, <a class="el" href="mdt__handler_8c_source.html#l03948">mdt_stack_fini()</a>, <a class="el" href="mdt__handler_8c_source.html#l03914">mdt_stack_pre_fini()</a>, <a class="el" href="mdt__internal_8h_source.html#l00436">mdt_th_info()</a>, and <a class="el" href="mdt__recovery_8c_source.html#l00082">mdt_txn_stop_cb()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:49 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
