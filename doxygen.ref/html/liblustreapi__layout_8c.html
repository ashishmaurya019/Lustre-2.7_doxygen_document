<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/utils/liblustreapi_layout.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/utils/liblustreapi_layout.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;limits.h&gt;</code><br/>
<code>#include &lt;sys/xattr.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustreapi_8h_source.html">lustre/lustreapi.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__idl_8h_source.html">lustre/lustre_idl.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="lustreapi__internal_8h_source.html">lustreapi_internal.h</a>&quot;</code><br/>

<p><a href="liblustreapi__layout_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllapi__layout.html">llapi_layout</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An Opaque data type abstracting the layout of a Lustre file.  <a href="structllapi__layout.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a1b00cace5d15fb21b230d300c5b6d4ce">llapi_layout_swab_lov_user_md</a> (struct lov_user_md *lum, int object_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Byte-swap the fields of struct lov_user_md.  <a href="#a1b00cace5d15fb21b230d300c5b6d4ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aa38b1fb4e5f2552d664cf732c6d7c613">__llapi_layout_alloc</a> (unsigned int num_stripes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate storage for a <a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> with <em>num_stripes</em> stripes.  <a href="#aa38b1fb4e5f2552d664cf732c6d7c613"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a408f54461a37ef9bf34deb0323944e3f">llapi_layout_from_lum</a> (const struct lov_user_md *lum, size_t object_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy the data from a lov_user_md to a newly allocated <a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a>.  <a href="#a408f54461a37ef9bf34deb0323944e3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct lov_user_md *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a920b1b7ccb9fb1023f43f3ba81434c40">llapi_layout_to_lum</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy the data from a <a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> to a newly allocated lov_user_md.  <a href="#a920b1b7ccb9fb1023f43f3ba81434c40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aa362d9396249d836e181fa02b3547ba5">get_parent_dir</a> (const char *<a class="el" href="mdsrate_8c.html#ae8592c5c8f37a4598973aaa27f45dc4c">path</a>, char *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent directory of a path.  <a href="#aa362d9396249d836e181fa02b3547ba5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a799e667acae4088253b2b39be7fe5993">inherit_layout_attributes</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *src, struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *dest)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Substitute unspecified attribute values in <em>dest</em> with values from <em>src</em>.  <a href="#a799e667acae4088253b2b39be7fe5993"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#ab4f680a86c99cd8e4362a0f74e4443e3">is_fully_specified</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test if all attributes of <em>layout</em> are specified.  <a href="#ab4f680a86c99cd8e4362a0f74e4443e3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aba5c8af99f41ba57d1c517c303bb769a">llapi_layout_alloc</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate and initialize a new layout.  <a href="#aba5c8af99f41ba57d1c517c303bb769a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a564b163e5fdfa9d42c38134e7482182f">llapi_layout_lum_truncated</a> (struct lov_user_md *lum, size_t lum_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if the given <em>lum_size</em> is large enough to hold the required fields in <em>lum</em>.  <a href="#a564b163e5fdfa9d42c38134e7482182f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a6d6beb09b83d9a079c0a867744ea845f">llapi_layout_objects_in_lum</a> (struct lov_user_md *lum, size_t lum_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the number of elements in the lmm_objects array of <em>lum</em> with size <em>lum_size</em>.  <a href="#a6d6beb09b83d9a079c0a867744ea845f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a8fc88feb998310828a1f8ad67a6aa430">llapi_layout_get_by_fd</a> (int fd, uint32_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the striping layout for the file referenced by file descriptor <em>fd</em>.  <a href="#a8fc88feb998310828a1f8ad67a6aa430"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aa56d1e145a8def4ccb658ab315657435">llapi_layout_expected</a> (const char *<a class="el" href="mdsrate_8c.html#ae8592c5c8f37a4598973aaa27f45dc4c">path</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the expected striping layout for a file at <em>path</em>.  <a href="#aa56d1e145a8def4ccb658ab315657435"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aa00003862c5ee12a78121e11da3fe964">llapi_layout_get_by_path</a> (const char *<a class="el" href="mdsrate_8c.html#ae8592c5c8f37a4598973aaa27f45dc4c">path</a>, uint32_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the striping layout for the file at <em>path</em>.  <a href="#aa00003862c5ee12a78121e11da3fe964"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a11cf3c5d7987eef6aaf567456670a0cc">llapi_layout_get_by_fid</a> (const char *<a class="el" href="llapi__layout__test_8c.html#a9c2c5ad6f1317be02a520eac9db8efdc">lustre_dir</a>, const <a class="el" href="structlu__fid.html">lustre_fid</a> *fid, uint32_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the layout for the file with FID <em>fidstr</em> in filesystem <em>lustre_dir</em>.  <a href="#a11cf3c5d7987eef6aaf567456670a0cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a42ee14c2438c3b50e945e5b47d3ff989">llapi_layout_free</a> (struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">* Free memory allocated for <em>layout</em>.  <a href="#a42ee14c2438c3b50e945e5b47d3ff989"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aa03b33325afb2811533d7984e98137c1">llapi_layout_stripe_count_get</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t *count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the stripe count of <em>layout</em>.  <a href="#aa03b33325afb2811533d7984e98137c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a779fe048d6e1a172e29101ca49a3e806">llapi_layout_stripe_count_is_valid</a> (int64_t stripe_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a5882b9955673c60af4453cedeeff9201">llapi_layout_stripe_size_is_valid</a> (uint64_t stripe_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a7b7d6c5553f8dd784e906b8ec94df78f">llapi_layout_stripe_index_is_valid</a> (int64_t stripe_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#ad192c34803cb2c76a92b94689dab0258">llapi_layout_stripe_count_set</a> (struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the stripe count of <em>layout</em>.  <a href="#ad192c34803cb2c76a92b94689dab0258"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#aecd8037cb0e2a12cae7281646dd2c8db">llapi_layout_stripe_size_get</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t *<a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the stripe size of <em>layout</em>.  <a href="#aecd8037cb0e2a12cae7281646dd2c8db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a8a42791ae487195b0091c4aa606c162e">llapi_layout_stripe_size_set</a> (struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the stripe size of <em>layout</em>.  <a href="#a8a42791ae487195b0091c4aa606c162e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#ad70aefb2ec78885de9b03e418427e4f7">llapi_layout_pattern_get</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t *pattern)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the RAID pattern of <em>layout</em>.  <a href="#ad70aefb2ec78885de9b03e418427e4f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a1b915aee2bc008ace0604b2b417a53d5">llapi_layout_pattern_set</a> (struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t pattern)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the RAID pattern of <em>layout</em>.  <a href="#a1b915aee2bc008ace0604b2b417a53d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a8fbf0a097fe03634b1555bf4b9c3c2fd">llapi_layout_ost_index_set</a> (struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, int stripe_number, uint64_t ost_index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the OST index of stripe number <em>stripe_number</em> to <em>ost_index</em>.  <a href="#a8fbf0a097fe03634b1555bf4b9c3c2fd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a56b6b1959ef5cab4fa70dfd198123baf">llapi_layout_ost_index_get</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, uint64_t stripe_number, uint64_t *index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the OST index associated with stripe <em>stripe_number</em>.  <a href="#a56b6b1959ef5cab4fa70dfd198123baf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a340c8461873eaa55d372d8dc677c717c">llapi_layout_pool_name_get</a> (const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, char *dest, size_t n)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the pool name of layout <em>layout</em>.  <a href="#a340c8461873eaa55d372d8dc677c717c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#af8bb31b9b015bff5eb98d0a94d3cf8ae">llapi_layout_pool_name_set</a> (struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout, const char *pool_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the name of the pool of layout <em>layout</em>.  <a href="#af8bb31b9b015bff5eb98d0a94d3cf8ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a50989a966bed6a19b6983fe375e7f4cc">llapi_layout_file_open</a> (const char *<a class="el" href="mdsrate_8c.html#ae8592c5c8f37a4598973aaa27f45dc4c">path</a>, int open_flags, mode_t <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open and possibly create a file with a given <em>layout</em>.  <a href="#a50989a966bed6a19b6983fe375e7f4cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblustreapi__layout_8c.html#a2d07ab38aca5eea2da076e3fe545c018">llapi_layout_file_create</a> (const char *<a class="el" href="mdsrate_8c.html#ae8592c5c8f37a4598973aaa27f45dc4c">path</a>, int open_flags, int <a class="el" href="mdsrate_8c.html#a000e34997df38c2005a83d63e67d9282">mode</a>, const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *layout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a file with a given <em>layout</em>.  <a href="#a2d07ab38aca5eea2da076e3fe545c018"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa38b1fb4e5f2552d664cf732c6d7c613"></a><!-- doxytag: member="liblustreapi_layout.c::__llapi_layout_alloc" ref="aa38b1fb4e5f2552d664cf732c6d7c613" args="(unsigned int num_stripes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* __llapi_layout_alloc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>num_stripes</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate storage for a <a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> with <em>num_stripes</em> stripes. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>num_stripes</em>&nbsp;</td><td>number of stripes in new layout</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td>pointer if allocation succeeds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if allocation fails </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00098">98</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="liblustreapi__layout_8c_source.html#l00058">llapi_layout::llot_objects</a>, <a class="el" href="lustre__user_8h_source.html#l00369">LOV_MAX_STRIPE_COUNT</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00304">llapi_layout_alloc()</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00123">llapi_layout_from_lum()</a>.</p>

</div>
</div>
<a class="anchor" id="aa362d9396249d836e181fa02b3547ba5"></a><!-- doxytag: member="liblustreapi_layout.c::get_parent_dir" ref="aa362d9396249d836e181fa02b3547ba5" args="(const char *path, char *buf, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void get_parent_dir </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the parent directory of a path. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>path to get parent of </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer in which to store parent path </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>size in bytes of buffer <em>buf</em> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00250">250</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>.</p>

</div>
</div>
<a class="anchor" id="a799e667acae4088253b2b39be7fe5993"></a><!-- doxytag: member="liblustreapi_layout.c::inherit_layout_attributes" ref="a799e667acae4088253b2b39be7fe5993" args="(const struct llapi_layout *src, struct llapi_layout *dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void inherit_layout_attributes </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>dest</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Substitute unspecified attribute values in <em>dest</em> with values from <em>src</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>src</em>&nbsp;</td><td>layout to inherit values from </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dest</em>&nbsp;</td><td>layout to receive inherited values </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00270">270</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00050">llapi_layout::llot_pattern</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00051">llapi_layout::llot_stripe_size</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4f680a86c99cd8e4362a0f74e4443e3"></a><!-- doxytag: member="liblustreapi_layout.c::is_fully_specified" ref="ab4f680a86c99cd8e4362a0f74e4443e3" args="(const struct llapi_layout *layout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_fully_specified </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test if all attributes of <em>layout</em> are specified. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>the layout to check</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>all attributes are specified </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>at least one attribute is unspecified </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00291">291</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00050">llapi_layout::llot_pattern</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00051">llapi_layout::llot_stripe_size</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>.</p>

</div>
</div>
<a class="anchor" id="aba5c8af99f41ba57d1c517c303bb769a"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_alloc" ref="aba5c8af99f41ba57d1c517c303bb769a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* llapi_layout_alloc </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate and initialize a new layout. </p>
<p>Allocate a new layout.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td><a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if memory allocation fails </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00304">304</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="liblustreapi__layout_8c_source.html#l00098">__llapi_layout_alloc()</a>, <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00055">llapi_layout::llot_objects_are_valid</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00050">llapi_layout::llot_pattern</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00057">llapi_layout::llot_pool_name</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00053">llapi_layout::llot_stripe_offset</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00051">llapi_layout::llot_stripe_size</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00420">test10()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00462">test11()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00505">test12()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00617">test14()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00677">test16()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00749">test17()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00792">test18()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00834">test19()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00910">test21()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00389">test9()</a>.</p>

</div>
</div>
<a class="anchor" id="aa56d1e145a8def4ccb658ab315657435"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_expected" ref="aa56d1e145a8def4ccb658ab315657435" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* llapi_layout_expected </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the expected striping layout for a file at <em>path</em>. </p>
<p>Substitute expected inherited attribute values for unspecified attributes. Unspecified attributes may belong to directories and never-written-to files, and indicate that default values will be assigned when files are created or first written to. A default value is inherited from the parent directory if the attribute is specified there, otherwise it is inherited from the filesystem root. Unspecified attributes normally have the value LLAPI_LAYOUT_DEFAULT.</p>
<p>The complete <em>path</em> need not refer to an existing file or directory, but some leading portion of it must reside within a lustre filesystem. A use case for this interface would be to obtain the literal striping values that would be assigned to a new file in a given directory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>path for which to get the expected layout</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td><a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if an error occurs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00482">482</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="liblustreapi__layout_8c_source.html#l00250">get_parent_dir()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00270">inherit_layout_attributes()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00291">is_fully_specified()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00304">llapi_layout_alloc()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00625">llapi_layout_free()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00567">llapi_layout_get_by_path()</a>, and <a class="el" href="liblustreapi_8c_source.html#l00955">llapi_search_mounts()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00567">llapi_layout_get_by_path()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d07ab38aca5eea2da076e3fe545c018"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_file_create" ref="a2d07ab38aca5eea2da076e3fe545c018" args="(const char *path, int open_flags, int mode, const struct llapi_layout *layout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_file_create </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>open_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a file with a given <em>layout</em>. </p>
<p>Create a new file at <em>path</em> with the specified <em>layout</em> and <em>mode</em>.</p>
<p>Force O_CREAT and O_EXCL flags on so caller is assured that file was created with the given <em>layout</em> on successful function return.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>name of the file to open </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>open_flags</em>&nbsp;</td><td>open() flags </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>permissions to create new file with </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to create new file with</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>non-negative</em>&nbsp;</td><td>file descriptor on successful open </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l01002">1002</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="liblustreapi__layout_8c_source.html#l00938">llapi_layout_file_open()</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00617">test14()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00677">test16()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00749">test17()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00792">test18()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00910">test21()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00936">test22()</a>.</p>

</div>
</div>
<a class="anchor" id="a50989a966bed6a19b6983fe375e7f4cc"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_file_open" ref="a50989a966bed6a19b6983fe375e7f4cc" args="(const char *path, int open_flags, mode_t mode, const struct llapi_layout *layout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_file_open </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>open_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open and possibly create a file with a given <em>layout</em>. </p>
<p>Open an existing file at <em>path</em>, or create it with the specified <em>layout</em> and <em>mode</em>.</p>
<p>If <em>layout</em> is NULL this function acts as a simple wrapper for open(). By convention, ENOTTY is returned in errno if <em>path</em> refers to a non-Lustre file.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>name of the file to open </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>open_flags</em>&nbsp;</td><td>open() flags </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>permissions to create new file with </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to create new file with</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>non-negative</em>&nbsp;</td><td>file descriptor on successful open </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00938">938</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00189">llapi_layout_to_lum()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, <a class="el" href="lustre__user_8h_source.html#l00415">lov_user_md_size()</a>, <a class="el" href="lustre__user_8h_source.html#l00326">O_LOV_DELAY_CREATE</a>, and <a class="el" href="lustre__user_8h_source.html#l00374">XATTR_LUSTRE_LOV</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l01002">llapi_layout_file_create()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>.</p>

</div>
</div>
<a class="anchor" id="a42ee14c2438c3b50e945e5b47d3ff989"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_free" ref="a42ee14c2438c3b50e945e5b47d3ff989" args="(struct llapi_layout *layout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void llapi_layout_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>* Free memory allocated for <em>layout</em>. </p>
<p>Free memory allocated for <em>layout</em>.</p>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00625">625</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00165">test1()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00420">test10()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00462">test11()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00505">test12()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00617">test14()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00677">test16()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00749">test17()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00792">test18()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00834">test19()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00177">test2()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00910">test21()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00994">test24()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01035">test25()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01074">test26()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01122">test27()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01172">test28()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00199">test3()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00225">test4()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00349">test8()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00389">test9()</a>.</p>

</div>
</div>
<a class="anchor" id="a408f54461a37ef9bf34deb0323944e3f"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_from_lum" ref="a408f54461a37ef9bf34deb0323944e3f" args="(const struct lov_user_md *lum, size_t object_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* llapi_layout_from_lum </td>
          <td>(</td>
          <td class="paramtype">const struct lov_user_md *&nbsp;</td>
          <td class="paramname"> <em>lum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>object_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copy the data from a lov_user_md to a newly allocated <a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a>. </p>
<p>The caller is responsible for freeing the returned pointer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lum</em>&nbsp;</td><td>LOV user metadata structure to copy data from</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td><a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if memory allocation fails </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00123">123</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="liblustreapi__layout_8c_source.html#l00098">__llapi_layout_alloc()</a>, <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="lustreapi_8h_source.html#l00488">LLAPI_LAYOUT_RAID0</a>, <a class="el" href="lustreapi_8h_source.html#l00481">LLAPI_LAYOUT_WIDE</a>, <a class="el" href="lustre__user_8h_source.html#l00396">lov_user_md_v1::lmm_objects</a>, <a class="el" href="lustre__user_8h_source.html#l00412">lov_user_md_v3::lmm_objects</a>, <a class="el" href="lustre__user_8h_source.html#l00411">lov_user_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__user_8h_source.html#l00345">LOV_PATTERN_RAID0</a>, and <a class="el" href="lustre__user_8h_source.html#l00336">LOV_USER_MAGIC_V1</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fc88feb998310828a1f8ad67a6aa430"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_get_by_fd" ref="a8fc88feb998310828a1f8ad67a6aa430" args="(int fd, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* llapi_layout_get_by_fd </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the striping layout for the file referenced by file descriptor <em>fd</em>. </p>
<p>Return a pointer to a newly-allocated opaque data type containing the layout for the file referenced by open file descriptor <em>fd</em>.</p>
<p>If the filesystem does not support the "lustre." xattr namespace, the file must be on a non-Lustre filesystem, so set errno to ENOTTY per convention. If the file has no "lustre.lov" data, the file will inherit default values, so return a default layout.</p>
<p>If the kernel gives us back less than the expected amount of data, we fail with errno set to EINTR.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fd</em>&nbsp;</td><td>open file descriptor </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>open file descriptor</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td><a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if an error occurs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00398">398</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00038">__swab16</a>, <a class="el" href="byteorder_8h_source.html#l00039">__swab32</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00304">llapi_layout_alloc()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00123">llapi_layout_from_lum()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00334">llapi_layout_lum_truncated()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00359">llapi_layout_objects_in_lum()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00069">llapi_layout_swab_lov_user_md()</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, and <a class="el" href="lustre__user_8h_source.html#l00374">XATTR_LUSTRE_LOV</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00597">llapi_layout_get_by_fid()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00567">llapi_layout_get_by_path()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00177">test2()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00296">test6()</a>.</p>

</div>
</div>
<a class="anchor" id="a11cf3c5d7987eef6aaf567456670a0cc"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_get_by_fid" ref="a11cf3c5d7987eef6aaf567456670a0cc" args="(const char *lustre_dir, const lustre_fid *fid, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* llapi_layout_get_by_fid </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>lustre_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structlu__fid.html">lustre_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the layout for the file with FID <em>fidstr</em> in filesystem <em>lustre_dir</em>. </p>
<p>Return a pointer to a newly-allocated opaque data type containing the layout for the file associated with Lustre file identifier string <em>fidstr</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lustre_dir</em>&nbsp;</td><td>path within Lustre filesystem containing <em>fid</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>Lustre identifier of file to get layout for</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td><a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if an error occurs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00597">597</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>, <a class="el" href="liblustreapi_8c_source.html#l00095">llapi_msg_get_level()</a>, <a class="el" href="lustreapi_8h_source.html#l00059">LLAPI_MSG_OFF</a>, <a class="el" href="liblustreapi_8c_source.html#l00084">llapi_msg_set_level()</a>, and <a class="el" href="liblustreapi_8c_source.html#l04554">llapi_open_by_fid()</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00199">test3()</a>.</p>

</div>
</div>
<a class="anchor" id="aa00003862c5ee12a78121e11da3fe964"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_get_by_path" ref="aa00003862c5ee12a78121e11da3fe964" args="(const char *path, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structllapi__layout.html">llapi_layout</a>* llapi_layout_get_by_path </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the striping layout for the file at <em>path</em>. </p>
<p>Return a pointer to a newly-allocated opaque data structure containing the layout for the file at <em>path</em>.</p>
<p>If <em>flags</em> contains LAYOUT_GET_EXPECTED, substitute expected inherited attribute values for unspecified attributes. See <a class="el" href="liblustreapi__layout_8c.html#aa56d1e145a8def4ccb658ab315657435" title="Get the expected striping layout for a file at path.">llapi_layout_expected()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>path for which to get the layout </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>flags to control how layout is retrieved</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td><a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if an error occurs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00567">567</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00423">LAYOUT_GET_EXPECTED</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00482">llapi_layout_expected()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00165">test1()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00677">test16()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00749">test17()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00792">test18()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00969">test23()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00994">test24()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01035">test25()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01074">test26()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01122">test27()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01172">test28()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00225">test4()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00279">test5()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00305">test7()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00349">test8()</a>.</p>

</div>
</div>
<a class="anchor" id="a564b163e5fdfa9d42c38134e7482182f"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_lum_truncated" ref="a564b163e5fdfa9d42c38134e7482182f" args="(struct lov_user_md *lum, size_t lum_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool llapi_layout_lum_truncated </td>
          <td>(</td>
          <td class="paramtype">struct lov_user_md *&nbsp;</td>
          <td class="paramname"> <em>lum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>lum_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if the given <em>lum_size</em> is large enough to hold the required fields in <em>lum</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lum</em>&nbsp;</td><td>the struct lov_user_md to check </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lum_size</em>&nbsp;</td><td>the number of bytes in <em>lum</em> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>the <em>lum_size</em> is too small </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>the <em>lum_size</em> is large enough </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00334">334</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00039">__swab32</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, and <a class="el" href="lustre__user_8h_source.html#l00415">lov_user_md_size()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d6beb09b83d9a079c0a867744ea845f"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_objects_in_lum" ref="a6d6beb09b83d9a079c0a867744ea845f" args="(struct lov_user_md *lum, size_t lum_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int llapi_layout_objects_in_lum </td>
          <td>(</td>
          <td class="paramtype">struct lov_user_md *&nbsp;</td>
          <td class="paramname"> <em>lum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>lum_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute the number of elements in the lmm_objects array of <em>lum</em> with size <em>lum_size</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lum</em>&nbsp;</td><td>the struct lov_user_md to check </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lum_size</em>&nbsp;</td><td>the number of bytes in <em>lum</em> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>number</em>&nbsp;</td><td>of elements in array lum-&gt;lmm_objects </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00359">359</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00039">__swab32</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, <a class="el" href="lustre__idl_8h_source.html#l01471">LOV_MAGIC_V3</a>, and <a class="el" href="lustre__user_8h_source.html#l00415">lov_user_md_size()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>.</p>

</div>
</div>
<a class="anchor" id="a56b6b1959ef5cab4fa70dfd198123baf"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_ost_index_get" ref="a56b6b1959ef5cab4fa70dfd198123baf" args="(const struct llapi_layout *layout, uint64_t stripe_number, uint64_t *index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_ost_index_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>stripe_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the OST index associated with stripe <em>stripe_number</em>. </p>
<p>Store the index of the OST where stripe number <em>stripe_number</em> is stored in <em>index</em>.</p>
<p>Stripes are indexed starting from zero.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to get index from </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stripe_number</em>&nbsp;</td><td>stripe number to get index for </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>index</em>&nbsp;</td><td>integer to store index in</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00844">844</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00380">lov_user_ost_data_v1::l_ost_idx</a>, <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00058">llapi_layout::llot_objects</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00055">llapi_layout::llot_objects_are_valid</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00134">__test1_helper()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00225">test4()</a>.</p>

</div>
</div>
<a class="anchor" id="a8fbf0a097fe03634b1555bf4b9c3c2fd"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_ost_index_set" ref="a8fbf0a097fe03634b1555bf4b9c3c2fd" args="(struct llapi_layout *layout, int stripe_number, uint64_t ost_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_ost_index_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stripe_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>ost_index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the OST index of stripe number <em>stripe_number</em> to <em>ost_index</em>. </p>
<p>Set the OST index associated with stripe number <em>stripe_number</em> to <em>ost_index</em>.</p>
<p>The index may only be set for stripe number 0 for now.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to set OST index in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stripe_number</em>&nbsp;</td><td>stripe number to set index for </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ost_index</em>&nbsp;</td><td>the index to set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid or an unsupported stripe number was specified </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00813">813</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00673">llapi_layout_stripe_index_is_valid()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00053">llapi_layout::llot_stripe_offset</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>.</p>

</div>
</div>
<a class="anchor" id="ad70aefb2ec78885de9b03e418427e4f7"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_pattern_get" ref="ad70aefb2ec78885de9b03e418427e4f7" args="(const struct llapi_layout *layout, uint64_t *pattern)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_pattern_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>pattern</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the RAID pattern of <em>layout</em>. </p>
<p>Store the stripe pattern of <em>layout</em> in <em>pattern</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to get pattern from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pattern</em>&nbsp;</td><td>integer to store pattern in</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00758">758</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00050">llapi_layout::llot_pattern</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00994">test24()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01035">test25()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01074">test26()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01122">test27()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00349">test8()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b915aee2bc008ace0604b2b417a53d5"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_pattern_set" ref="a1b915aee2bc008ace0604b2b417a53d5" args="(struct llapi_layout *layout, uint64_t pattern)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_pattern_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>pattern</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the RAID pattern of <em>layout</em>. </p>
<p>Set the stripe pattern of <em>layout</em> to <em>pattern</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to set pattern in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pattern</em>&nbsp;</td><td>value to be set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid or RAID pattern is unsupported </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00782">782</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="lustreapi_8h_source.html#l00488">LLAPI_LAYOUT_RAID0</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00050">llapi_layout::llot_pattern</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00389">test9()</a>.</p>

</div>
</div>
<a class="anchor" id="a340c8461873eaa55d372d8dc677c717c"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_pool_name_get" ref="a340c8461873eaa55d372d8dc677c717c" args="(const struct llapi_layout *layout, char *dest, size_t n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_pool_name_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the pool name of layout <em>layout</em>. </p>
<p>Store up to <em>pool_name_len</em> characters of the name of the pool of OSTs associated with <em>layout</em> into the buffer pointed to by <em>pool_name</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to get pool name from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>dest</em>&nbsp;</td><td>buffer to store pool name in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>n</em>&nbsp;</td><td>size in bytes of buffer <em>dest</em> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00873">873</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00057">llapi_layout::llot_pool_name</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00134">__test1_helper()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00505">test12()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00792">test18()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00834">test19()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00225">test4()</a>.</p>

</div>
</div>
<a class="anchor" id="af8bb31b9b015bff5eb98d0a94d3cf8ae"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_pool_name_set" ref="af8bb31b9b015bff5eb98d0a94d3cf8ae" args="(struct llapi_layout *layout, const char *pool_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_pool_name_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>pool_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the name of the pool of layout <em>layout</em>. </p>
<p>Set the name of the pool of OSTs from which file objects will be allocated to <em>pool_name</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to set pool name in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pool_name</em>&nbsp;</td><td>pool name to set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid or pool name is too long </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00896">896</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00057">llapi_layout::llot_pool_name</a>, and <a class="el" href="lustre__user_8h_source.html#l00354">LOV_MAXPOOLNAME</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00505">test12()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00792">test18()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00834">test19()</a>.</p>

</div>
</div>
<a class="anchor" id="aa03b33325afb2811533d7984e98137c1"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_count_get" ref="aa03b33325afb2811533d7984e98137c1" args="(const struct llapi_layout *layout, uint64_t *count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_stripe_count_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the stripe count of <em>layout</em>. </p>
<p>Flags to modify how layouts are retrieved.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to get stripe count from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>count</em>&nbsp;</td><td>integer to store stripe count in</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00639">639</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00134">__test1_helper()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00420">test10()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00677">test16()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00749">test17()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00994">test24()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01035">test25()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01074">test26()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01122">test27()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01172">test28()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00225">test4()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00349">test8()</a>.</p>

</div>
</div>
<a class="anchor" id="a779fe048d6e1a172e29101ca49a3e806"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_count_is_valid" ref="a779fe048d6e1a172e29101ca49a3e806" args="(int64_t stripe_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool llapi_layout_stripe_count_is_valid </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>stripe_count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00657">657</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi_8h_source.html#l00481">LLAPI_LAYOUT_WIDE</a>, and <a class="el" href="lustreapi__internal_8h_source.html#l00108">llapi_stripe_count_is_valid()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00689">llapi_layout_stripe_count_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ad192c34803cb2c76a92b94689dab0258"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_count_set" ref="ad192c34803cb2c76a92b94689dab0258" args="(struct llapi_layout *layout, uint64_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_stripe_count_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the stripe count of <em>layout</em>. </p>
<p>Set the stripe count of <em>layout</em> to <em>count</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to set stripe count in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>count</em>&nbsp;</td><td>value to be set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00689">689</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00657">llapi_layout_stripe_count_is_valid()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00420">test10()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00546">test13()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00634">test15()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00749">test17()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b7d6c5553f8dd784e906b8ec94df78f"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_index_is_valid" ref="a7b7d6c5553f8dd784e906b8ec94df78f" args="(int64_t stripe_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool llapi_layout_stripe_index_is_valid </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>stripe_index</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00673">673</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, and <a class="el" href="lustreapi__internal_8h_source.html#l00113">llapi_stripe_index_is_valid()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00813">llapi_layout_ost_index_set()</a>.</p>

</div>
</div>
<a class="anchor" id="aecd8037cb0e2a12cae7281646dd2c8db"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_size_get" ref="aecd8037cb0e2a12cae7281646dd2c8db" args="(const struct llapi_layout *layout, uint64_t *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_stripe_size_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the stripe size of <em>layout</em>. </p>
<p>Store the stripe size of <em>layout</em> in <em>size</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to get stripe size from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>integer to store stripe size in</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00712">712</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00051">llapi_layout::llot_stripe_size</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00134">__test1_helper()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00462">test11()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00677">test16()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00994">test24()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01035">test25()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01074">test26()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l01122">test27()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00225">test4()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00349">test8()</a>.</p>

</div>
</div>
<a class="anchor" id="a5882b9955673c60af4453cedeeff9201"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_size_is_valid" ref="a5882b9955673c60af4453cedeeff9201" args="(uint64_t stripe_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool llapi_layout_stripe_size_is_valid </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>stripe_size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00665">665</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi__internal_8h_source.html#l00098">llapi_stripe_size_is_aligned()</a>, and <a class="el" href="lustreapi__internal_8h_source.html#l00103">llapi_stripe_size_is_too_big()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00735">llapi_layout_stripe_size_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a42791ae487195b0091c4aa606c162e"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_stripe_size_set" ref="a8a42791ae487195b0091c4aa606c162e" args="(struct llapi_layout *layout, uint64_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int llapi_layout_stripe_size_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the stripe size of <em>layout</em>. </p>
<p>Set the stripe size of <em>layout</em> to <em>stripe_size</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>layout to set stripe size in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>value to be set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if arguments are invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00735">735</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi__internal_8h_source.html#l00094">LLAPI_LAYOUT_MAGIC</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00665">llapi_layout_stripe_size_is_valid()</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00049">llapi_layout::llot_magic</a>, and <a class="el" href="liblustreapi__layout_8c_source.html#l00051">llapi_layout::llot_stripe_size</a>.</p>

<p>Referenced by <a class="el" href="llapi__layout__test_8c_source.html#l00083">test0()</a>, <a class="el" href="llapi__layout__test_8c_source.html#l00462">test11()</a>, and <a class="el" href="llapi__layout__test_8c_source.html#l00853">test20()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b00cace5d15fb21b230d300c5b6d4ce"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_swab_lov_user_md" ref="a1b00cace5d15fb21b230d300c5b6d4ce" args="(struct lov_user_md *lum, int object_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void llapi_layout_swab_lov_user_md </td>
          <td>(</td>
          <td class="paramtype">struct lov_user_md *&nbsp;</td>
          <td class="paramname"> <em>lum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>object_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Byte-swap the fields of struct lov_user_md. </p>
<p>XXX Rather than duplicating swabbing code here, we should eventually refactor the needed functions in <a class="el" href="pack__generic_8c.html">lustre/ptlrpc/pack_generic.c</a> into a library that can be shared between kernel and user code. </p>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00069">69</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00041">__swab16s</a>, <a class="el" href="byteorder_8h_source.html#l00045">__swab32s</a>, <a class="el" href="lustre__user_8h_source.html#l00412">lov_user_md_v3::lmm_objects</a>, <a class="el" href="packet-lustre_8c_source.html#l00085">LOV_MAGIC_V1</a>, and <a class="el" href="lustre__user_8h_source.html#l00376">lov_user_ost_data</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00398">llapi_layout_get_by_fd()</a>.</p>

</div>
</div>
<a class="anchor" id="a920b1b7ccb9fb1023f43f3ba81434c40"></a><!-- doxytag: member="liblustreapi_layout.c::llapi_layout_to_lum" ref="a920b1b7ccb9fb1023f43f3ba81434c40" args="(const struct llapi_layout *layout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct lov_user_md* llapi_layout_to_lum </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllapi__layout.html">llapi_layout</a> *&nbsp;</td>
          <td class="paramname"> <em>layout</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copy the data from a <a class="el" href="structllapi__layout.html" title="An Opaque data type abstracting the layout of a Lustre file.">llapi_layout</a> to a newly allocated lov_user_md. </p>
<p>The caller is responsible for freeing the returned pointer.</p>
<p>The current version of this API doesn't support specifying the OST index of arbitrary stripes, only stripe 0 via lmm_stripe_offset. There is therefore no need to copy the lmm_objects array.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>layout</em>&nbsp;</td><td>the layout to copy from</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid</em>&nbsp;</td><td>lov_user_md pointer on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td>if memory allocation fails </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="liblustreapi__layout_8c_source.html#l00189">189</a> of file <a class="el" href="liblustreapi__layout_8c_source.html">liblustreapi_layout.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00475">LLAPI_LAYOUT_DEFAULT</a>, <a class="el" href="lustreapi_8h_source.html#l00488">LLAPI_LAYOUT_RAID0</a>, <a class="el" href="lustreapi_8h_source.html#l00481">LLAPI_LAYOUT_WIDE</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00050">llapi_layout::llot_pattern</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00057">llapi_layout::llot_pool_name</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00052">llapi_layout::llot_stripe_count</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00053">llapi_layout::llot_stripe_offset</a>, <a class="el" href="liblustreapi__layout_8c_source.html#l00051">llapi_layout::llot_stripe_size</a>, <a class="el" href="lustre__user_8h_source.html#l00411">lov_user_md_v3::lmm_pool_name</a>, <a class="el" href="lustre__user_8h_source.html#l00336">LOV_USER_MAGIC_V1</a>, <a class="el" href="lustre__user_8h_source.html#l00339">LOV_USER_MAGIC_V3</a>, <a class="el" href="lustre__user_8h_source.html#l00383">lov_user_md</a>, and <a class="el" href="lustre__user_8h_source.html#l00415">lov_user_md_size()</a>.</p>

<p>Referenced by <a class="el" href="liblustreapi__layout_8c_source.html#l00938">llapi_layout_file_open()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:51 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
