<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/ptlrpc/nodemap_internal.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/ptlrpc/nodemap_internal.h File Reference</h1><code>#include &lt;<a class="el" href="lustre__nodemap_8h_source.html">lustre_nodemap.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="interval__tree_8h_source.html">interval_tree.h</a>&gt;</code><br/>

<p><a href="nodemap__internal_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__nid__range.html">lu_nid_range</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__idmap.html">lu_idmap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnodemap__config.html">nodemap_config</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnodemap__key.html">nodemap_key</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a61514ad101da71334a225913e73f611d">DEFAULT_NODEMAP</a>&nbsp;&nbsp;&nbsp;&quot;default&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a60d93c7fc50bef450ca5515b486226c3">NODEMAP_NOBODY_UID</a>&nbsp;&nbsp;&nbsp;99</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ac678d1ca6b494e872ed138f54120862f">NODEMAP_NOBODY_GID</a>&nbsp;&nbsp;&nbsp;99</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a23183619386271868bccdba1e8507aea">NM_TYPE_MASK</a>&nbsp;&nbsp;&nbsp;0x0FFFFFFF</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a46173bd53e1b3c1fce99663e54d28629">NM_TYPE_SHIFT</a>&nbsp;&nbsp;&nbsp;28</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a790da5f66a66146a7e2d3b630be8b4ee">nm_rbtree_postorder_for_each_entry_safe</a>(pos, n,root, field)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809">nodemap_idx_type</a> { <br/>
&nbsp;&nbsp;<a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809a3b73cf8a237f0936672d12a0e7bb7b82">NODEMAP_EMPTY_IDX</a> =  0, 
<a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809a13dd43b5cba93a1b74b2254606310f83">NODEMAP_CLUSTER_IDX</a> =  1, 
<a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809add3ce0a761417e689fad23a5996177e1">NODEMAP_RANGE_IDX</a> =  2, 
<a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809ab09715218f6a7f54aa744004a612c577">NODEMAP_UIDMAP_IDX</a> =  3, 
<br/>
&nbsp;&nbsp;<a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809ae752d757925dc73e2b3184cfa97cf109">NODEMAP_GIDMAP_IDX</a> =  4, 
<a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809ac6aca018a4573abaf6708d5c07cea97f">NODEMAP_GLOBAL_IDX</a> =  15
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809">nodemap_idx_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a70506baa90277d56a27a9eb59f5a0a9a">nm_idx_get_type</a> (unsigned int id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static __u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a6c413c0bdedf2a7ac78f3b91350d3e06">nm_idx_set_type</a> (unsigned int id, enum <a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809">nodemap_idx_type</a> t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a592eea2f257774a4964f285f004b0e7f">nodemap_config_alloc</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a622e3c23152da6922439e7962f6a3249">nodemap_config_dealloc</a> (struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ad67ea0971f109c21978997ac088f34ce">nodemap_config_set_active</a> (struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a903beb8163477e63bcb0985e5b10da1a">nodemap_create</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *config, bool is_default)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Nodemap constructor.  <a href="#a903beb8163477e63bcb0985e5b10da1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a600304141fbb270f7c8d0ca9767a7e84">nodemap_putref</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy nodemap if last reference is put.  <a href="#a600304141fbb270f7c8d0ca9767a7e84"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a794d82190df968f31520c2686ae22e09">nodemap_lookup</a> (const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Nodemap lookup.  <a href="#a794d82190df968f31520c2686ae22e09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a80907730335b603bf97f730562e843ec">nodemap_procfs_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the nodemap procfs directory.  <a href="#a80907730335b603bf97f730562e843ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ad2edd678f596847b8f6c69c7ee21e532">nodemap_procfs_exit</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanup nodemap proc entry data structures.  <a href="#ad2edd678f596847b8f6c69c7ee21e532"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a50cb590050c8a2adf36f2823403fc4c5">lprocfs_nodemap_register</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, bool is_default_nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register the proc directory for a nodemap.  <a href="#a50cb590050c8a2adf36f2823403fc4c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a9b6284d1c26fa05c2e8cfee938150e43">lprocfs_nodemap_remove</a> (struct <a class="el" href="structnodemap__pde.html">nodemap_pde</a> *<a class="el" href="structnodemap__pde.html">nodemap_pde</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a nodemap's procfs entry and related data.  <a href="#a9b6284d1c26fa05c2e8cfee938150e43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ae48258b1ac2b1288919ecfbb3c766ffd">nodemap_range_find</a> (<a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> start_nid, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> end_nid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a855673db9f6f0e80342081ee228a6594">range_create</a> (struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *nm_range_tree, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> start_nid, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> end_nid, struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, unsigned int range_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a1f484c98f821f743301016701fbfc4c1">range_destroy</a> (struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a9d32589fc2f2d457bac96764d56d5167">range_insert</a> (struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *nm_range_tree, struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a16b3fb5b59a551b77f51dba3321c8411">range_delete</a> (struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *nm_range_tree, struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ababdd0f7590fce9a33e7f06afae41b3f">range_search</a> (struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *nm_range_tree, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a4ba4d0a01c4061d75d532f6daefe3f30">range_find</a> (struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *nm_range_tree, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> start_nid, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> end_nid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a45019c0cfa1690588de216d7e255be01">range_parse_nidstring</a> (char *range_string, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *start_nid, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *end_nid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#acd357c807c92be2fa2cc6ac215a85c14">range_init_tree</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__idmap.html">lu_idmap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#aa15eb2f5b03965e86b0a2fb3cd3843bd">idmap_create</a> (__u32 client_id, __u32 fs_id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate the <a class="el" href="structlu__idmap.html">lu_idmap</a> structure.  <a href="#aa15eb2f5b03965e86b0a2fb3cd3843bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a993274d6df04cff69173db85f53f6de3">idmap_insert</a> (enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a> id_type, struct <a class="el" href="structlu__idmap.html">lu_idmap</a> *idmap, struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert idmap into the proper trees.  <a href="#a993274d6df04cff69173db85f53f6de3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ab6bddc014895b8a8649b1e7fe681dcd9">idmap_delete</a> (enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a> id_type, struct <a class="el" href="structlu__idmap.html">lu_idmap</a> *idmap, struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete idmap from the correct nodemap tree.  <a href="#ab6bddc014895b8a8649b1e7fe681dcd9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a208cacdb1871b3b6af08a4f11d26abb7">idmap_delete_tree</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__idmap.html">lu_idmap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#aeeb0cfb55fc272f70bc78e3585b98340">idmap_search</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, enum <a class="el" href="lustre__nodemap_8h.html#a15f74b6f9beee07e49fe3c27e947d4d5">nodemap_tree_type</a>, enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a> id_type, __u32 id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Search for an existing id in the nodemap trees.  <a href="#aeeb0cfb55fc272f70bc78e3585b98340"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a52cfcfc393756afc12cc4af1a6572c3b">nm_member_add</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a member export to a nodemap.  <a href="#a52cfcfc393756afc12cc4af1a6572c3b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#aec6ee99a88f7857b23418346bdf665f7">nm_member_del</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, struct <a class="el" href="structobd__export.html">obd_export</a> *exp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a member from a member list.  <a href="#aec6ee99a88f7857b23418346bdf665f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a60b5dd176496cc0bdfa7772ac148980e">nm_member_delete_list</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a member list from a nodemap.  <a href="#a60b5dd176496cc0bdfa7772ac148980e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#adb093ebc228625ee24cc21dae68f03ea">nodemap_classify_nid</a> (<a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Classify the nid into the proper nodemap.  <a href="#adb093ebc228625ee24cc21dae68f03ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a524bd29fc818699f6ed7b87630be51ef">nm_member_reclassify_nodemap</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reclassify the members of a nodemap after range changes or activation.  <a href="#a524bd29fc818699f6ed7b87630be51ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#aaa869e91d400e39161d1ed6d3437543e">nm_member_revoke_locks</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Revoke the locks for member exports.  <a href="#aaa869e91d400e39161d1ed6d3437543e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a2a84da7e27c778a7a189f79960626c92">nm_member_revoke_all</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Revoke locks for all nodemaps.  <a href="#a2a84da7e27c778a7a189f79960626c92"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ac1401c6fed16ed26411b3c62b6037288">nodemap_add_idmap_helper</a> (struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a> id_type, const __u32 map[2])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">add an idmap to the proper nodemap trees  <a href="#ac1401c6fed16ed26411b3c62b6037288"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a8181190eec35f780904bf3b5ced3bf91">nodemap_add_range_helper</a> (struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *config, struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, const <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid[2], unsigned int range_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct rb_node *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a33331d37302ca760a501356ed5bf000c">nm_rb_next_postorder</a> (const struct rb_node *node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct rb_node *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a487612f510b7065bc860990fb312b4d9">nm_rb_first_postorder</a> (const struct rb_root *root)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#ab7bcdecf161472e06819e0dc63df7386">nodemap_idx_nodemap_add</a> (const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a5b43af222fd7a1ce13acb5e60ed9c24b">nodemap_idx_nodemap_update</a> (const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#add21df1a07d159ffe4f1be2a7d60c932">nodemap_idx_nodemap_del</a> (const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a0cdd9ca432fa5968ba35f232eeeebd32">nodemap_idx_idmap_add</a> (const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a> id_type, const __u32 map[2])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a87acb847dc6412ec3dd8af5e2cfbbe93">nodemap_idx_idmap_del</a> (const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *nodemap, enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a> id_type, const __u32 map[2])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a7b3e91720bf263274f7b910e3b656a65">nodemap_idx_range_add</a> (const struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *range, const <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid[2])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a02355c276c20ec45f3964fed80765a11">nodemap_idx_range_del</a> (const struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#af2121a19e43887ca2e6f823158760489">nodemap_idx_nodemap_activate</a> (bool value)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct proc_dir_entry *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#aef1a5af170ef5a454edc1f4e62460489">proc_lustre_nodemap_root</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a300128a8ec1b35307f6ddd737b09e227">nodemap_active</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct mutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a9ceb1c86d8eba61e36ec42a9ae9f492c">active_config_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nodemap__internal_8h.html#a3a725ac0883b4d8827637c0069fc8049">active_config</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a61514ad101da71334a225913e73f611d"></a><!-- doxytag: member="nodemap_internal.h::DEFAULT_NODEMAP" ref="a61514ad101da71334a225913e73f611d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_NODEMAP&nbsp;&nbsp;&nbsp;&quot;default&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00036">36</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a790da5f66a66146a7e2d3b630be8b4ee"></a><!-- doxytag: member="nodemap_internal.h::nm_rbtree_postorder_for_each_entry_safe" ref="a790da5f66a66146a7e2d3b630be8b4ee" args="(pos, n,root, field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define nm_rbtree_postorder_for_each_entry_safe</td>
          <td>(</td>
          <td class="paramtype">pos, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">n, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">root, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">field&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">for</span> (pos = <a class="code" href="nodemap__internal_8h.html#a487612f510b7065bc860990fb312b4d9">nm_rb_first_postorder</a>(root) ?                        \
                rb_entry(<a class="code" href="nodemap__internal_8h.html#a487612f510b7065bc860990fb312b4d9">nm_rb_first_postorder</a>(root), typeof(*pos),     \
                field) : NULL,                                          \
                n = (pos &amp;&amp; <a class="code" href="nodemap__internal_8h.html#a33331d37302ca760a501356ed5bf000c">nm_rb_next_postorder</a>(&amp;pos-&gt;field)) ?        \
                rb_entry(<a class="code" href="nodemap__internal_8h.html#a33331d37302ca760a501356ed5bf000c">nm_rb_next_postorder</a>(&amp;pos-&gt;field),             \
                typeof(*pos), field) : NULL;                            \
                pos != NULL;                                            \
                pos = n,                                                \
                n = (pos &amp;&amp; <a class="code" href="nodemap__internal_8h.html#a33331d37302ca760a501356ed5bf000c">nm_rb_next_postorder</a>(&amp;pos-&gt;field)) ?        \
                rb_entry(<a class="code" href="nodemap__internal_8h.html#a33331d37302ca760a501356ed5bf000c">nm_rb_next_postorder</a>(&amp;pos-&gt;field),             \
                typeof(*pos), field) : NULL)
</pre></div>
<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00198">198</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>Referenced by <a class="el" href="nodemap__idmap_8c_source.html#l00251">idmap_delete_tree()</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00356">nodemap_idx_nodemap_del()</a>.</p>

</div>
</div>
<a class="anchor" id="a23183619386271868bccdba1e8507aea"></a><!-- doxytag: member="nodemap_internal.h::NM_TYPE_MASK" ref="a23183619386271868bccdba1e8507aea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NM_TYPE_MASK&nbsp;&nbsp;&nbsp;0x0FFFFFFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00122">122</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>Referenced by <a class="el" href="nodemap__internal_8h_source.html#l00130">nm_idx_set_type()</a>.</p>

</div>
</div>
<a class="anchor" id="a46173bd53e1b3c1fce99663e54d28629"></a><!-- doxytag: member="nodemap_internal.h::NM_TYPE_SHIFT" ref="a46173bd53e1b3c1fce99663e54d28629" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NM_TYPE_SHIFT&nbsp;&nbsp;&nbsp;28</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00123">123</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>Referenced by <a class="el" href="nodemap__internal_8h_source.html#l00125">nm_idx_get_type()</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00130">nm_idx_set_type()</a>.</p>

</div>
</div>
<a class="anchor" id="ac678d1ca6b494e872ed138f54120862f"></a><!-- doxytag: member="nodemap_internal.h::NODEMAP_NOBODY_GID" ref="ac678d1ca6b494e872ed138f54120862f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODEMAP_NOBODY_GID&nbsp;&nbsp;&nbsp;99</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00041">41</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00772">nodemap_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a60d93c7fc50bef450ca5515b486226c3"></a><!-- doxytag: member="nodemap_internal.h::NODEMAP_NOBODY_UID" ref="a60d93c7fc50bef450ca5515b486226c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODEMAP_NOBODY_UID&nbsp;&nbsp;&nbsp;99</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00040">40</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00772">nodemap_create()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a0758e11d6f303e32b162281008230809"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_type" ref="a0758e11d6f303e32b162281008230809" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809">nodemap_idx_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0758e11d6f303e32b162281008230809a3b73cf8a237f0936672d12a0e7bb7b82"></a><!-- doxytag: member="NODEMAP_EMPTY_IDX" ref="a0758e11d6f303e32b162281008230809a3b73cf8a237f0936672d12a0e7bb7b82" args="" -->NODEMAP_EMPTY_IDX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0758e11d6f303e32b162281008230809a13dd43b5cba93a1b74b2254606310f83"></a><!-- doxytag: member="NODEMAP_CLUSTER_IDX" ref="a0758e11d6f303e32b162281008230809a13dd43b5cba93a1b74b2254606310f83" args="" -->NODEMAP_CLUSTER_IDX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0758e11d6f303e32b162281008230809add3ce0a761417e689fad23a5996177e1"></a><!-- doxytag: member="NODEMAP_RANGE_IDX" ref="a0758e11d6f303e32b162281008230809add3ce0a761417e689fad23a5996177e1" args="" -->NODEMAP_RANGE_IDX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0758e11d6f303e32b162281008230809ab09715218f6a7f54aa744004a612c577"></a><!-- doxytag: member="NODEMAP_UIDMAP_IDX" ref="a0758e11d6f303e32b162281008230809ab09715218f6a7f54aa744004a612c577" args="" -->NODEMAP_UIDMAP_IDX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0758e11d6f303e32b162281008230809ae752d757925dc73e2b3184cfa97cf109"></a><!-- doxytag: member="NODEMAP_GIDMAP_IDX" ref="a0758e11d6f303e32b162281008230809ae752d757925dc73e2b3184cfa97cf109" args="" -->NODEMAP_GIDMAP_IDX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0758e11d6f303e32b162281008230809ac6aca018a4573abaf6708d5c07cea97f"></a><!-- doxytag: member="NODEMAP_GLOBAL_IDX" ref="a0758e11d6f303e32b162281008230809ac6aca018a4573abaf6708d5c07cea97f" args="" -->NODEMAP_GLOBAL_IDX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00113">113</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa15eb2f5b03965e86b0a2fb3cd3843bd"></a><!-- doxytag: member="nodemap_internal.h::idmap_create" ref="aa15eb2f5b03965e86b0a2fb3cd3843bd" args="(__u32 client_id, __u32 fs_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__idmap.html">lu_idmap</a>* idmap_create </td>
          <td>(</td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>fs_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate the <a class="el" href="structlu__idmap.html">lu_idmap</a> structure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client_id</em>&nbsp;</td><td>client uid or gid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fs_id</em>&nbsp;</td><td>filesystem uid or gid</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>alloated</em>&nbsp;</td><td><a class="el" href="structlu__idmap.html">lu_idmap</a> structure on success, NULL otherwise </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__idmap_8c_source.html#l00039">39</a> of file <a class="el" href="nodemap__idmap_8c_source.html">nodemap_idmap.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="nodemap__internal_8h_source.html#l00066">lu_idmap::id_client</a>, <a class="el" href="nodemap__internal_8h_source.html#l00070">lu_idmap::id_client_to_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00068">lu_idmap::id_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00072">lu_idmap::id_fs_to_client</a>, and <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00396">nodemap_add_idmap_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="ab6bddc014895b8a8649b1e7fe681dcd9"></a><!-- doxytag: member="nodemap_internal.h::idmap_delete" ref="ab6bddc014895b8a8649b1e7fe681dcd9" args="(enum nodemap_id_type id_type, struct lu_idmap *idmap, struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void idmap_delete </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a>&nbsp;</td>
          <td class="paramname"> <em>id_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__idmap.html">lu_idmap</a> *&nbsp;</td>
          <td class="paramname"> <em>idmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete idmap from the correct nodemap tree. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node_type</em>&nbsp;</td><td>0 for UID 1 for GID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idmap</em>&nbsp;</td><td>idmap to delete </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>assoicated idmap </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__idmap_8c_source.html#l00164">164</a> of file <a class="el" href="nodemap__idmap_8c_source.html">nodemap_idmap.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00070">lu_idmap::id_client_to_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00072">lu_idmap::id_fs_to_client</a>, <a class="el" href="nodemap__idmap_8c_source.html#l00057">idmap_destroy()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00087">lu_nodemap::nm_client_to_fs_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00083">lu_nodemap::nm_client_to_fs_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00085">lu_nodemap::nm_fs_to_client_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00081">lu_nodemap::nm_fs_to_client_uidmap</a>, and <a class="el" href="lustre__nodemap_8h_source.html#l00042">NODEMAP_UID</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a208cacdb1871b3b6af08a4f11d26abb7"></a><!-- doxytag: member="nodemap_internal.h::idmap_delete_tree" ref="a208cacdb1871b3b6af08a4f11d26abb7" args="(struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void idmap_delete_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__idmap_8c_source.html#l00251">251</a> of file <a class="el" href="nodemap__idmap_8c_source.html">nodemap_idmap.c</a>.</p>

<p>References <a class="el" href="nodemap__idmap_8c_source.html#l00057">idmap_destroy()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00087">lu_nodemap::nm_client_to_fs_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00081">lu_nodemap::nm_fs_to_client_uidmap</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00198">nm_rbtree_postorder_for_each_entry_safe</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00062">nodemap_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a993274d6df04cff69173db85f53f6de3"></a><!-- doxytag: member="nodemap_internal.h::idmap_insert" ref="a993274d6df04cff69173db85f53f6de3" args="(enum nodemap_id_type id_type, struct lu_idmap *idmap, struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void idmap_insert </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a>&nbsp;</td>
          <td class="paramname"> <em>id_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__idmap.html">lu_idmap</a> *&nbsp;</td>
          <td class="paramname"> <em>idmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert idmap into the proper trees. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node_type</em>&nbsp;</td><td>0 for UID 1 for GID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>idmap</em>&nbsp;</td><td><a class="el" href="structlu__idmap.html">lu_idmap</a> structure to insert </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap to associate with the map</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success</td></tr>
  </table>
  </dd>
</dl>
<p>if the mapping exists, this function will delete it and replace it with the new idmap structure </p>

<p>Definition at line <a class="el" href="nodemap__idmap_8c_source.html#l00078">78</a> of file <a class="el" href="nodemap__idmap_8c_source.html">nodemap_idmap.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00066">lu_idmap::id_client</a>, <a class="el" href="nodemap__internal_8h_source.html#l00070">lu_idmap::id_client_to_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00068">lu_idmap::id_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00072">lu_idmap::id_fs_to_client</a>, <a class="el" href="nodemap__idmap_8c_source.html#l00057">idmap_destroy()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00087">lu_nodemap::nm_client_to_fs_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00083">lu_nodemap::nm_client_to_fs_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00085">lu_nodemap::nm_fs_to_client_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00081">lu_nodemap::nm_fs_to_client_uidmap</a>, and <a class="el" href="lustre__nodemap_8h_source.html#l00042">NODEMAP_UID</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00396">nodemap_add_idmap_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="aeeb0cfb55fc272f70bc78e3585b98340"></a><!-- doxytag: member="nodemap_internal.h::idmap_search" ref="aeeb0cfb55fc272f70bc78e3585b98340" args="(struct lu_nodemap *nodemap, enum nodemap_tree_type, enum nodemap_id_type id_type, __u32 id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__idmap.html">lu_idmap</a>* idmap_search </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a15f74b6f9beee07e49fe3c27e947d4d5">nodemap_tree_type</a>&nbsp;</td>
          <td class="paramname"> <em>tree_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a>&nbsp;</td>
          <td class="paramname"> <em>id_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const __u32&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search for an existing id in the nodemap trees. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap trees to search </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tree_type</em>&nbsp;</td><td>0 for filesystem to client maps 1 for client to filesystem maps </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id_type</em>&nbsp;</td><td>0 for UID 1 for GID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>numeric id for which to search</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structlu__idmap.html">lu_idmap</a></em>&nbsp;</td><td>structure with the map on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__idmap_8c_source.html#l00196">196</a> of file <a class="el" href="nodemap__idmap_8c_source.html">nodemap_idmap.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00066">lu_idmap::id_client</a>, <a class="el" href="nodemap__internal_8h_source.html#l00070">lu_idmap::id_client_to_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00068">lu_idmap::id_fs</a>, <a class="el" href="nodemap__internal_8h_source.html#l00072">lu_idmap::id_fs_to_client</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00087">lu_nodemap::nm_client_to_fs_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00083">lu_nodemap::nm_client_to_fs_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00085">lu_nodemap::nm_fs_to_client_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00081">lu_nodemap::nm_fs_to_client_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00048">NODEMAP_CLIENT_TO_FS</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00047">NODEMAP_FS_TO_CLIENT</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00043">NODEMAP_GID</a>, and <a class="el" href="lustre__nodemap_8h_source.html#l00042">NODEMAP_UID</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00519">nodemap_map_id()</a>.</p>

</div>
</div>
<a class="anchor" id="a50cb590050c8a2adf36f2823403fc4c5"></a><!-- doxytag: member="nodemap_internal.h::lprocfs_nodemap_register" ref="a50cb590050c8a2adf36f2823403fc4c5" args="(struct lu_nodemap *nodemap, bool is_default_nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lprocfs_nodemap_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_default</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register the proc directory for a nodemap. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap to make the proc dir for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>is_default,:</em>&nbsp;</td><td>1 if default nodemap </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__lproc_8c_source.html#l01165">1165</a> of file <a class="el" href="nodemap__lproc_8c_source.html">nodemap_lproc.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00945">lprocfs_add_vars()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00064">lu_nodemap::nm_name</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00093">lu_nodemap::nm_pde_data</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00054">nodemap_pde::npe_list_member</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00052">nodemap_pde::npe_name</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00053">nodemap_pde::npe_proc_entry</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00045">proc_lustre_nodemap_root</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01002">nodemap_add()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01190">nodemap_config_set_active()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b6284d1c26fa05c2e8cfee938150e43"></a><!-- doxytag: member="nodemap_internal.h::lprocfs_nodemap_remove" ref="a9b6284d1c26fa05c2e8cfee938150e43" args="(struct nodemap_pde *nodemap_pde)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lprocfs_nodemap_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__pde.html">nodemap_pde</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap_pde</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a nodemap's procfs entry and related data. </p>

<p>Definition at line <a class="el" href="nodemap__lproc_8c_source.html#l01151">1151</a> of file <a class="el" href="nodemap__lproc_8c_source.html">nodemap_lproc.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00054">nodemap_pde::npe_list_member</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00053">nodemap_pde::npe_proc_entry</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01033">nodemap_del()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00062">nodemap_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a70506baa90277d56a27a9eb59f5a0a9a"></a><!-- doxytag: member="nodemap_internal.h::nm_idx_get_type" ref="a70506baa90277d56a27a9eb59f5a0a9a" args="(unsigned int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809">nodemap_idx_type</a> nm_idx_get_type </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00125">125</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00123">NM_TYPE_SHIFT</a>.</p>

<p>Referenced by <a class="el" href="nodemap__storage_8c_source.html#l00487">nodemap_process_keyrec()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c413c0bdedf2a7ac78f3b91350d3e06"></a><!-- doxytag: member="nodemap_internal.h::nm_idx_set_type" ref="a6c413c0bdedf2a7ac78f3b91350d3e06" args="(unsigned int id, enum nodemap_idx_type t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static __u32 nm_idx_set_type </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="nodemap__internal_8h.html#a0758e11d6f303e32b162281008230809">nodemap_idx_type</a>&nbsp;</td>
          <td class="paramname"> <em>t</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__internal_8h_source.html#l00130">130</a> of file <a class="el" href="nodemap__internal_8h_source.html">nodemap_internal.h</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00122">NM_TYPE_MASK</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00123">NM_TYPE_SHIFT</a>.</p>

<p>Referenced by <a class="el" href="nodemap__storage_8c_source.html#l00073">nodemap_cluster_key_init()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00128">nodemap_global_key_init()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00093">nodemap_idmap_key_init()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00487">nodemap_process_keyrec()</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00113">nodemap_range_key_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a52cfcfc393756afc12cc4af1a6572c3b"></a><!-- doxytag: member="nodemap_internal.h::nm_member_add" ref="a52cfcfc393756afc12cc4af1a6572c3b" args="(struct lu_nodemap *nodemap, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_member_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a member export to a nodemap. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap to add to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exp</em>&nbsp;</td><td><a class="el" href="structobd__export.html" title="Export structure.">obd_export</a> to add </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>-EEXIST</em>&nbsp;</td><td>export is already part of a different nodemap </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>export is NULL </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__member_8c_source.html#l00079">79</a> of file <a class="el" href="nodemap__member_8c_source.html">nodemap_member.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00090">lu_nodemap::nm_member_list</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00089">lu_nodemap::nm_member_list_lock</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00064">lu_nodemap::nm_name</a>, and <a class="el" href="lustre__user_8h_source.html#l00492">obd_uuid::uuid</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00351">nodemap_add_member()</a>.</p>

</div>
</div>
<a class="anchor" id="aec6ee99a88f7857b23418346bdf665f7"></a><!-- doxytag: member="nodemap_internal.h::nm_member_del" ref="aec6ee99a88f7857b23418346bdf665f7" args="(struct lu_nodemap *nodemap, struct obd_export *exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_member_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td>
          <td class="paramname"> <em>exp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete a member from a member list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap containing list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exp</em>&nbsp;</td><td>export member to delete </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__member_8c_source.html#l00041">41</a> of file <a class="el" href="nodemap__member_8c_source.html">nodemap_member.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, and <a class="el" href="lustre__nodemap_8h_source.html#l00089">lu_nodemap::nm_member_list_lock</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00376">nodemap_del_member()</a>.</p>

</div>
</div>
<a class="anchor" id="a60b5dd176496cc0bdfa7772ac148980e"></a><!-- doxytag: member="nodemap_internal.h::nm_member_delete_list" ref="a60b5dd176496cc0bdfa7772ac148980e" args="(struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_member_delete_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete a member list from a nodemap. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap to remove the list from </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__member_8c_source.html#l00056">56</a> of file <a class="el" href="nodemap__member_8c_source.html">nodemap_member.c</a>.</p>

<p>References <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="lustre__export_8h_source.html#l00294">exp_target_data</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00090">lu_nodemap::nm_member_list</a>, and <a class="el" href="lustre__nodemap_8h_source.html#l00089">lu_nodemap::nm_member_list_lock</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00062">nodemap_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a524bd29fc818699f6ed7b87630be51ef"></a><!-- doxytag: member="nodemap_internal.h::nm_member_reclassify_nodemap" ref="a524bd29fc818699f6ed7b87630be51ef" args="(struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_member_reclassify_nodemap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reclassify the members of a nodemap after range changes or activation. </p>
<p>This function reclassifies the members of a nodemap based on the member export's NID and the nodemap's new NID ranges. Exports that are no longer classified as being part of this nodemap are moved to the nodemap whose NID ranges contain the export's NID, and their locks are revoked.</p>
<p>Callers should hold the active_config_lock and active_config nmc_range_tree_lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap with members to reclassify </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__member_8c_source.html#l00141">141</a> of file <a class="el" href="nodemap__member_8c_source.html">nodemap_member.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l00521">ptlrpc_connection::c_peer</a>, <a class="el" href="lustre__export_8h_source.html#l00217">obd_export::exp_connection</a>, <a class="el" href="lustre__export_8h_source.html#l00294">exp_target_data</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00304">lnet_process_id_t::nid</a>, <a class="el" href="nodemap__member_8c_source.html#l00118">nm_member_exp_revoke()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00090">lu_nodemap::nm_member_list</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00089">lu_nodemap::nm_member_list_lock</a>, <a class="el" href="nodemap__handler_8c_source.html#l00247">nodemap_classify_nid()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00101">nodemap_putref()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00644">nodemap_add_range_helper()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00062">nodemap_destroy()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a84da7e27c778a7a189f79960626c92"></a><!-- doxytag: member="nodemap_internal.h::nm_member_revoke_all" ref="a2a84da7e27c778a7a189f79960626c92" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_member_revoke_all </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Revoke locks for all nodemaps. </p>

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l01286">1286</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h.html#a9ceb1c86d8eba61e36ec42a9ae9f492c">active_config_lock</a>, <a class="el" href="hash_8c_source.html#l01519">cfs_hash_for_each_safe()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="nodemap__lproc_8c.html#a16b50f3e067967583e9d2bc2eeb7ff68">LIST_HEAD()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01179">nm_hash_list_cb()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00096">lu_nodemap::nm_list</a>, <a class="el" href="nodemap__member_8c_source.html#l00190">nm_member_revoke_locks()</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00100">nodemap_config::nmc_nodemap_hash</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01088">nodemap_activate()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01190">nodemap_config_set_active()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa869e91d400e39161d1ed6d3437543e"></a><!-- doxytag: member="nodemap_internal.h::nm_member_revoke_locks" ref="aaa869e91d400e39161d1ed6d3437543e" args="(struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_member_revoke_locks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Revoke the locks for member exports. </p>
<p>Changing the idmap is akin to deleting the security context. If the locks are not canceled, the client could cache permissions that are no longer correct with the map.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap that has been altered </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__member_8c_source.html#l00190">190</a> of file <a class="el" href="nodemap__member_8c_source.html">nodemap_member.c</a>.</p>

<p>References <a class="el" href="lustre__export_8h_source.html#l00294">exp_target_data</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="nodemap__member_8c_source.html#l00118">nm_member_exp_revoke()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00090">lu_nodemap::nm_member_list</a>, and <a class="el" href="lustre__nodemap_8h_source.html#l00089">lu_nodemap::nm_member_list_lock</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01286">nm_member_revoke_all()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00396">nodemap_add_idmap_helper()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00644">nodemap_add_range_helper()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00864">nodemap_set_allow_root()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00960">nodemap_set_squash_gid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00927">nodemap_set_squash_uid()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00894">nodemap_set_trust_client_ids()</a>.</p>

</div>
</div>
<a class="anchor" id="a487612f510b7065bc860990fb312b4d9"></a><!-- doxytag: member="nodemap_internal.h::nm_rb_first_postorder" ref="a487612f510b7065bc860990fb312b4d9" args="(const struct rb_root *root)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rb_node* nm_rb_first_postorder </td>
          <td>(</td>
          <td class="paramtype">const struct rb_root *&nbsp;</td>
          <td class="paramname"> <em>root</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__rbtree_8c_source.html#l00068">68</a> of file <a class="el" href="nodemap__rbtree_8c_source.html">nodemap_rbtree.c</a>.</p>

<p>References <a class="el" href="nodemap__rbtree_8c_source.html#l00043">nm_rb_left_deepest_node()</a>.</p>

</div>
</div>
<a class="anchor" id="a33331d37302ca760a501356ed5bf000c"></a><!-- doxytag: member="nodemap_internal.h::nm_rb_next_postorder" ref="a33331d37302ca760a501356ed5bf000c" args="(const struct rb_node *node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rb_node* nm_rb_next_postorder </td>
          <td>(</td>
          <td class="paramtype">const struct rb_node *&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__rbtree_8c_source.html#l00055">55</a> of file <a class="el" href="nodemap__rbtree_8c_source.html">nodemap_rbtree.c</a>.</p>

<p>References <a class="el" href="nodemap__rbtree_8c_source.html#l00043">nm_rb_left_deepest_node()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1401c6fed16ed26411b3c62b6037288"></a><!-- doxytag: member="nodemap_internal.h::nodemap_add_idmap_helper" ref="ac1401c6fed16ed26411b3c62b6037288" args="(struct lu_nodemap *nodemap, enum nodemap_id_type id_type, const __u32 map[2])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_add_idmap_helper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a>&nbsp;</td>
          <td class="paramname"> <em>id_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const __u32&nbsp;</td>
          <td class="paramname"> <em>map</em>[2]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>add an idmap to the proper nodemap trees </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>name of nodemap </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id_type</em>&nbsp;</td><td>NODEMAP_UID or NODEMAP_GID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>map</em>&nbsp;</td><td>array[2] __u32 containing the map values map[0] is client id map[1] is the filesystem id</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00396">396</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="nodemap__idmap_8c_source.html#l00039">idmap_create()</a>, <a class="el" href="nodemap__idmap_8c_source.html#l00078">idmap_insert()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00079">lu_nodemap::nm_idmap_lock</a>, and <a class="el" href="nodemap__member_8c_source.html#l00190">nm_member_revoke_locks()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00416">nodemap_add_idmap()</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00487">nodemap_process_keyrec()</a>.</p>

</div>
</div>
<a class="anchor" id="a8181190eec35f780904bf3b5ced3bf91"></a><!-- doxytag: member="nodemap_internal.h::nodemap_add_range_helper" ref="a8181190eec35f780904bf3b5ced3bf91" args="(struct nodemap_config *config, struct lu_nodemap *nodemap, const lnet_nid_t nid[2], unsigned int range_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_add_range_helper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>nid</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>range_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00644">644</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00076">list_add()</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="nodemap__member_8c_source.html#l00141">nm_member_reclassify_nodemap()</a>, <a class="el" href="nodemap__member_8c_source.html#l00190">nm_member_revoke_locks()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00064">lu_nodemap::nm_name</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00077">lu_nodemap::nm_ranges</a>, <a class="el" href="nodemap__internal_8h_source.html#l00088">nodemap_config::nmc_default_nodemap</a>, <a class="el" href="nodemap__internal_8h_source.html#l00094">nodemap_config::nmc_range_tree</a>, <a class="el" href="nodemap__internal_8h_source.html#l00093">nodemap_config::nmc_range_tree_lock</a>, <a class="el" href="nodemap__storage_8c_source.html#l00405">nodemap_idx_range_add()</a>, <a class="el" href="nodemap__internal_8h.html#a855673db9f6f0e80342081ee228a6594">range_create()</a>, <a class="el" href="nodemap__range_8c_source.html#l00134">range_destroy()</a>, <a class="el" href="nodemap__range_8c_source.html#l00152">range_insert()</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00059">lu_nid_range::rn_list</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00684">nodemap_add_range()</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00487">nodemap_process_keyrec()</a>.</p>

</div>
</div>
<a class="anchor" id="adb093ebc228625ee24cc21dae68f03ea"></a><!-- doxytag: member="nodemap_internal.h::nodemap_classify_nid" ref="adb093ebc228625ee24cc21dae68f03ea" args="(lnet_nid_t nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a>* nodemap_classify_nid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>nid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Classify the nid into the proper nodemap. </p>
<p>Caller must hold active config and nm_range_tree_lock, and call nodemap_putref when done with nodemap.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nid</em>&nbsp;</td><td>nid to classify </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>nodemap containing the nid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>default_nodemap</em>&nbsp;</td><td>default nodemap </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00247">247</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00088">nodemap_config::nmc_default_nodemap</a>, <a class="el" href="nodemap__internal_8h_source.html#l00094">nodemap_config::nmc_range_tree</a>, <a class="el" href="nodemap__handler_8c_source.html#l00092">nodemap_getref()</a>, <a class="el" href="nodemap__range_8c_source.html#l00190">range_search()</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00057">lu_nid_range::rn_nodemap</a>.</p>

<p>Referenced by <a class="el" href="nodemap__member_8c_source.html#l00141">nm_member_reclassify_nodemap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00351">nodemap_add_member()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01339">nodemap_test_id()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01311">nodemap_test_nid()</a>.</p>

</div>
</div>
<a class="anchor" id="a592eea2f257774a4964f285f004b0e7f"></a><!-- doxytag: member="nodemap_internal.h::nodemap_config_alloc" ref="a592eea2f257774a4964f285f004b0e7f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structnodemap__config.html">nodemap_config</a>* nodemap_config_alloc </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l01153">1153</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h_source.html#l00093">nodemap_config::nmc_range_tree_lock</a>, <a class="el" href="nodemap__handler_8c_source.html#l00174">nodemap_init_hash()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="nodemap__storage_8c_source.html#l00621">nodemap_load_entries()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a622e3c23152da6922439e7962f6a3249"></a><!-- doxytag: member="nodemap_internal.h::nodemap_config_dealloc" ref="a622e3c23152da6922439e7962f6a3249" args="(struct nodemap_config *config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nodemap_config_dealloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l01173">1173</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="nodemap__handler_8c_source.html#l01126">nodemap_config_cleanup()</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01190">nodemap_config_set_active()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00621">nodemap_load_entries()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01244">nodemap_mod_exit()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad67ea0971f109c21978997ac088f34ce"></a><!-- doxytag: member="nodemap_internal.h::nodemap_config_set_active" ref="ad67ea0971f109c21978997ac088f34ce" args="(struct nodemap_config *config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nodemap_config_set_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l01190">1190</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="nodemap__internal_8h.html#a9ceb1c86d8eba61e36ec42a9ae9f492c">active_config_lock</a>, <a class="el" href="hash_8c_source.html#l01519">cfs_hash_for_each_safe()</a>, <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="nodemap__lproc_8c.html#a16b50f3e067967583e9d2bc2eeb7ff68">LIST_HEAD()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l01165">lprocfs_nodemap_register()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01179">nm_hash_list_cb()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00096">lu_nodemap::nm_list</a>, <a class="el" href="nodemap__handler_8c_source.html#l01286">nm_member_revoke_all()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00064">lu_nodemap::nm_name</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00093">lu_nodemap::nm_pde_data</a>, <a class="el" href="nodemap__internal_8h_source.html#l00088">nodemap_config::nmc_default_nodemap</a>, <a class="el" href="nodemap__internal_8h_source.html#l00100">nodemap_config::nmc_nodemap_hash</a>, <a class="el" href="nodemap__internal_8h_source.html#l00085">nodemap_config::nmc_nodemap_is_active</a>, <a class="el" href="nodemap__handler_8c_source.html#l00048">nodemap_active</a>, <a class="el" href="nodemap__handler_8c_source.html#l01173">nodemap_config_dealloc()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00101">nodemap_putref()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__storage_8c_source.html#l00621">nodemap_load_entries()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a903beb8163477e63bcb0985e5b10da1a"></a><!-- doxytag: member="nodemap_internal.h::nodemap_create" ref="a903beb8163477e63bcb0985e5b10da1a" args="(const char *name, struct nodemap_config *config, bool is_default)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a>* nodemap_create </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnodemap__config.html">nodemap_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>is_default</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Nodemap constructor. </p>
<p>Creates an <a class="el" href="structlu__nodemap.html" title="The nodemap id 0 will be the default nodemap.">lu_nodemap</a> structure and assigns sane default member values. If this is the default nodemap, the defaults are the most restictive in xterms of mapping behavior. Otherwise the default flags should be inherited from the default nodemap. The adds nodemap to nodemap_hash.</p>
<p>Requires that the caller take the active_config_lock</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>name of nodemap </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>is_default</em>&nbsp;</td><td>true if default nodemap </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>invalid nodemap name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EEXIST</em>&nbsp;</td><td>nodemap already exists </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOMEM</em>&nbsp;</td><td>cannot allocate memory for nodemap </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00772">772</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="hash_8c_source.html#l01259">cfs_hash_add_unique()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00277">CWARN</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="list_8h_source.html#l00048">INIT_LIST_HEAD</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00034">LUSTRE_NODEMAP_DEFAULT_ID</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00087">lu_nodemap::nm_client_to_fs_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00083">lu_nodemap::nm_client_to_fs_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00085">lu_nodemap::nm_fs_to_client_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00081">lu_nodemap::nm_fs_to_client_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00092">lu_nodemap::nm_hash</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00069">lu_nodemap::nm_id</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00079">lu_nodemap::nm_idmap_lock</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00096">lu_nodemap::nm_list</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00090">lu_nodemap::nm_member_list</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00089">lu_nodemap::nm_member_list_lock</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00064">lu_nodemap::nm_name</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00077">lu_nodemap::nm_ranges</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00071">lu_nodemap::nm_refcount</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00075">lu_nodemap::nm_squash_gid</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00073">lu_nodemap::nm_squash_uid</a>, <a class="el" href="nodemap__internal_8h_source.html#l00088">nodemap_config::nmc_default_nodemap</a>, <a class="el" href="nodemap__internal_8h_source.html#l00100">nodemap_config::nmc_nodemap_hash</a>, <a class="el" href="nodemap__internal_8h_source.html#l00082">nodemap_config::nmc_nodemap_highest_id</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00066">lu_nodemap::nmf_allow_root_access</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00066">lu_nodemap::nmf_trust_client_ids</a>, <a class="el" href="nodemap__handler_8c_source.html#l00200">nodemap_name_is_valid()</a>, <a class="el" href="nodemap__internal_8h_source.html#l00041">NODEMAP_NOBODY_GID</a>, <a class="el" href="nodemap__internal_8h_source.html#l00040">NODEMAP_NOBODY_UID</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, and <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01002">nodemap_add()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00621">nodemap_load_entries()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00487">nodemap_process_keyrec()</a>.</p>

</div>
</div>
<a class="anchor" id="a0cdd9ca432fa5968ba35f232eeeebd32"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_idmap_add" ref="a0cdd9ca432fa5968ba35f232eeeebd32" args="(const struct lu_nodemap *nodemap, enum nodemap_id_type id_type, const __u32 map[2])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_idmap_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a>&nbsp;</td>
          <td class="paramname"> <em>id_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const __u32&nbsp;</td>
          <td class="paramname"> <em>map</em>[2]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00416">nodemap_add_idmap()</a>.</p>

</div>
</div>
<a class="anchor" id="a87acb847dc6412ec3dd8af5e2cfbbe93"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_idmap_del" ref="a87acb847dc6412ec3dd8af5e2cfbbe93" args="(const struct lu_nodemap *nodemap, enum nodemap_id_type id_type, const __u32 map[2])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_idmap_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="lustre__nodemap_8h.html#a81845468d8a3390881570642981a38a4">nodemap_id_type</a>&nbsp;</td>
          <td class="paramname"> <em>id_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const __u32&nbsp;</td>
          <td class="paramname"> <em>map</em>[2]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>.</p>

</div>
</div>
<a class="anchor" id="af2121a19e43887ca2e6f823158760489"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_nodemap_activate" ref="af2121a19e43887ca2e6f823158760489" args="(bool value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_nodemap_activate </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__storage_8c_source.html#l00469">469</a> of file <a class="el" href="nodemap__storage_8c_source.html">nodemap_storage.c</a>.</p>

<p>References <a class="el" href="nodemap__storage_8c_source.html#l00323">NM_UPDATE</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00454">nodemap_idx_global_add_update()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01088">nodemap_activate()</a>.</p>

</div>
</div>
<a class="anchor" id="ab7bcdecf161472e06819e0dc63df7386"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_nodemap_add" ref="ab7bcdecf161472e06819e0dc63df7386" args="(const struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_nodemap_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__storage_8c_source.html#l00346">346</a> of file <a class="el" href="nodemap__storage_8c_source.html">nodemap_storage.c</a>.</p>

<p>References <a class="el" href="nodemap__storage_8c_source.html#l00322">NM_ADD</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00326">nodemap_idx_nodemap_add_update()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01002">nodemap_add()</a>.</p>

</div>
</div>
<a class="anchor" id="add21df1a07d159ffe4f1be2a7d60c932"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_nodemap_del" ref="add21df1a07d159ffe4f1be2a7d60c932" args="(const struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_nodemap_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__storage_8c_source.html#l00356">356</a> of file <a class="el" href="nodemap__storage_8c_source.html">nodemap_storage.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="nodemap__internal_8h_source.html#l00066">lu_idmap::id_client</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00087">lu_nodemap::nm_client_to_fs_gidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00081">lu_nodemap::nm_fs_to_client_uidmap</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00069">lu_nodemap::nm_id</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00077">lu_nodemap::nm_ranges</a>, <a class="el" href="nodemap__internal_8h_source.html#l00198">nm_rbtree_postorder_for_each_entry_safe</a>, <a class="el" href="nodemap__storage_8c_source.html#l00073">nodemap_cluster_key_init()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00043">NODEMAP_GID</a>, <a class="el" href="nodemap__storage_8c_source.html#l00093">nodemap_idmap_key_init()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00294">nodemap_idx_action()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00242">nodemap_idx_delete()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00113">nodemap_range_key_init()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00042">NODEMAP_UID</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00055">lu_nid_range::rn_id</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01033">nodemap_del()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b43af222fd7a1ce13acb5e60ed9c24b"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_nodemap_update" ref="a5b43af222fd7a1ce13acb5e60ed9c24b" args="(const struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_nodemap_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__storage_8c_source.html#l00351">351</a> of file <a class="el" href="nodemap__storage_8c_source.html">nodemap_storage.c</a>.</p>

<p>References <a class="el" href="nodemap__storage_8c_source.html#l00323">NM_UPDATE</a>, and <a class="el" href="nodemap__storage_8c_source.html#l00326">nodemap_idx_nodemap_add_update()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00864">nodemap_set_allow_root()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00960">nodemap_set_squash_gid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00927">nodemap_set_squash_uid()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00894">nodemap_set_trust_client_ids()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b3e91720bf263274f7b910e3b656a65"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_range_add" ref="a7b3e91720bf263274f7b910e3b656a65" args="(const struct lu_nid_range *range, const lnet_nid_t nid[2])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_range_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>nid</em>[2]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__storage_8c_source.html#l00405">405</a> of file <a class="el" href="nodemap__storage_8c_source.html">nodemap_storage.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00069">lu_nodemap::nm_id</a>, <a class="el" href="nodemap__storage_8c_source.html#l00294">nodemap_idx_action()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00148">nodemap_idx_insert()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00113">nodemap_range_key_init()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00121">nodemap_range_rec_init()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="nodemap__internal_8h_source.html#l00055">lu_nid_range::rn_id</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00057">lu_nid_range::rn_nodemap</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00644">nodemap_add_range_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a02355c276c20ec45f3964fed80765a11"></a><!-- doxytag: member="nodemap_internal.h::nodemap_idx_range_del" ref="a02355c276c20ec45f3964fed80765a11" args="(const struct lu_nid_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_idx_range_del </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__storage_8c_source.html#l00418">418</a> of file <a class="el" href="nodemap__storage_8c_source.html">nodemap_storage.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00069">lu_nodemap::nm_id</a>, <a class="el" href="nodemap__storage_8c_source.html#l00294">nodemap_idx_action()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00242">nodemap_idx_delete()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00113">nodemap_range_key_init()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="nodemap__internal_8h_source.html#l00055">lu_nid_range::rn_id</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00057">lu_nid_range::rn_nodemap</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01033">nodemap_del()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>.</p>

</div>
</div>
<a class="anchor" id="a794d82190df968f31520c2686ae22e09"></a><!-- doxytag: member="nodemap_internal.h::nodemap_lookup" ref="a794d82190df968f31520c2686ae22e09" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a>* nodemap_lookup </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Nodemap lookup. </p>
<p>Look nodemap up in the active_config nodemap hash. Caller should hold the active_config_lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>name of nodemap </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodemap</em>&nbsp;</td><td>pointer set to found nodemap </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>name is not valid </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-ENOENT</em>&nbsp;</td><td>nodemap not found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00225">225</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="hash_8c_source.html#l01346">cfs_hash_lookup()</a>, <a class="el" href="nodemap__internal_8h_source.html#l00100">nodemap_config::nmc_nodemap_hash</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00200">nodemap_name_is_valid()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00416">nodemap_add_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00684">nodemap_add_range()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00397">nodemap_admin_seq_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00183">nodemap_exports_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00291">nodemap_id_seq_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00055">nodemap_idmap_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00123">nodemap_ranges_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00864">nodemap_set_allow_root()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00960">nodemap_set_squash_gid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00927">nodemap_set_squash_uid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00894">nodemap_set_trust_client_ids()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00344">nodemap_squash_gid_seq_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00318">nodemap_squash_uid_seq_show()</a>, and <a class="el" href="nodemap__lproc_8c_source.html#l00370">nodemap_trusted_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2edd678f596847b8f6c69c7ee21e532"></a><!-- doxytag: member="nodemap_internal.h::nodemap_procfs_exit" ref="ad2edd678f596847b8f6c69c7ee21e532" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nodemap_procfs_exit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cleanup nodemap proc entry data structures. </p>

<p>Definition at line <a class="el" href="nodemap__lproc_8c_source.html#l01135">1135</a> of file <a class="el" href="nodemap__lproc_8c_source.html">nodemap_lproc.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lprocfs__status_8h_source.html#l00952">lprocfs_remove()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00054">nodemap_pde::npe_list_member</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00045">proc_lustre_nodemap_root</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01244">nodemap_mod_exit()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a80907730335b603bf97f730562e843ec"></a><!-- doxytag: member="nodemap_internal.h::nodemap_procfs_init" ref="a80907730335b603bf97f730562e843ec" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nodemap_procfs_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the nodemap procfs directory. </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nodemap__lproc_8c_source.html#l01115">1115</a> of file <a class="el" href="nodemap__lproc_8c_source.html">nodemap_lproc.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="lprocfs__status_8h_source.html#l00949">lprocfs_register()</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00032">LUSTRE_NODEMAP_NAME</a>, <a class="el" href="nodemap__handler_8c_source.html#l00045">proc_lustre_nodemap_root</a>, and <a class="el" href="lprocfs__status_8h_source.html#l00864">proc_lustre_root</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a600304141fbb270f7c8d0ca9767a7e84"></a><!-- doxytag: member="nodemap_internal.h::nodemap_putref" ref="a600304141fbb270f7c8d0ca9767a7e84" args="(struct lu_nodemap *nodemap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nodemap_putref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy nodemap if last reference is put. </p>
<p>Should be called outside active_config_lock </p>

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00101">101</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__nodemap_8h_source.html#l00071">lu_nodemap::nm_refcount</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00062">nodemap_destroy()</a>.</p>

<p>Referenced by <a class="el" href="nodemap__member_8c_source.html#l00141">nm_member_reclassify_nodemap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01002">nodemap_add()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00416">nodemap_add_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00351">nodemap_add_member()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00684">nodemap_add_range()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00397">nodemap_admin_seq_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01126">nodemap_config_cleanup()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01190">nodemap_config_set_active()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01033">nodemap_del()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00183">nodemap_exports_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00148">nodemap_hs_put_locked()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00291">nodemap_id_seq_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00055">nodemap_idmap_show()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00621">nodemap_load_entries()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01253">nodemap_mod_init()</a>, <a class="el" href="nodemap__storage_8c_source.html#l00487">nodemap_process_keyrec()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00123">nodemap_ranges_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00864">nodemap_set_allow_root()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00960">nodemap_set_squash_gid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00927">nodemap_set_squash_uid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00894">nodemap_set_trust_client_ids()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00344">nodemap_squash_gid_seq_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00318">nodemap_squash_uid_seq_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01339">nodemap_test_id()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01311">nodemap_test_nid()</a>, and <a class="el" href="nodemap__lproc_8c_source.html#l00370">nodemap_trusted_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="ae48258b1ac2b1288919ecfbb3c766ffd"></a><!-- doxytag: member="nodemap_internal.h::nodemap_range_find" ref="ae48258b1ac2b1288919ecfbb3c766ffd" args="(lnet_nid_t start_nid, lnet_nid_t end_nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a>* nodemap_range_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>start_nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>end_nid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a855673db9f6f0e80342081ee228a6594"></a><!-- doxytag: member="nodemap_internal.h::range_create" ref="a855673db9f6f0e80342081ee228a6594" args="(struct nodemap_range_tree *nm_range_tree, lnet_nid_t start_nid, lnet_nid_t end_nid, struct lu_nodemap *nodemap, unsigned int range_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a>* range_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *&nbsp;</td>
          <td class="paramname"> <em>nm_range_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>start_nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>end_nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__nodemap.html">lu_nodemap</a> *&nbsp;</td>
          <td class="paramname"> <em>nodemap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>range_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00644">nodemap_add_range_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a16b3fb5b59a551b77f51dba3321c8411"></a><!-- doxytag: member="nodemap_internal.h::range_delete" ref="a16b3fb5b59a551b77f51dba3321c8411" args="(struct nodemap_range_tree *nm_range_tree, struct lu_nid_range *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void range_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *&nbsp;</td>
          <td class="paramname"> <em>nm_range_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__range_8c_source.html#l00174">174</a> of file <a class="el" href="nodemap__range_8c_source.html">nodemap_range.c</a>.</p>

<p>References <a class="el" href="interval__tree_8c_source.html#l00523">interval_erase()</a>, <a class="el" href="interval__tree_8h_source.html#l00065">interval_is_intree()</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="nodemap__internal_8h_source.html#l00076">nodemap_range_tree::nmrt_range_interval_root</a>, <a class="el" href="nodemap__range_8c_source.html#l00134">range_destroy()</a>, <a class="el" href="nodemap__internal_8h_source.html#l00059">lu_nid_range::rn_list</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00061">lu_nid_range::rn_node</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01126">nodemap_config_cleanup()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01033">nodemap_del()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f484c98f821f743301016701fbfc4c1"></a><!-- doxytag: member="nodemap_internal.h::range_destroy" ref="a1f484c98f821f743301016701fbfc4c1" args="(struct lu_nid_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void range_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td>
          <td class="paramname"> <em>range</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__range_8c_source.html#l00134">134</a> of file <a class="el" href="nodemap__range_8c_source.html">nodemap_range.c</a>.</p>

<p>References <a class="el" href="interval__tree_8h_source.html#l00065">interval_is_intree()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="nodemap__internal_8h_source.html#l00059">lu_nid_range::rn_list</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00061">lu_nid_range::rn_node</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00644">nodemap_add_range_helper()</a>, and <a class="el" href="nodemap__range_8c_source.html#l00174">range_delete()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ba4d0a01c4061d75d532f6daefe3f30"></a><!-- doxytag: member="nodemap_internal.h::range_find" ref="a4ba4d0a01c4061d75d532f6daefe3f30" args="(struct nodemap_range_tree *nm_range_tree, lnet_nid_t start_nid, lnet_nid_t end_nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a>* range_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *&nbsp;</td>
          <td class="paramname"> <em>nm_range_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>start_nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>end_nid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__range_8c_source.html#l00112">112</a> of file <a class="el" href="nodemap__range_8c_source.html">nodemap_range.c</a>.</p>

<p>References <a class="el" href="interval__tree_8c_source.html#l00227">interval_find()</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00076">nodemap_range_tree::nmrt_range_interval_root</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>.</p>

</div>
</div>
<a class="anchor" id="acd357c807c92be2fa2cc6ac215a85c14"></a><!-- doxytag: member="nodemap_internal.h::range_init_tree" ref="acd357c807c92be2fa2cc6ac215a85c14" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void range_init_tree </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d32589fc2f2d457bac96764d56d5167"></a><!-- doxytag: member="nodemap_internal.h::range_insert" ref="a9d32589fc2f2d457bac96764d56d5167" args="(struct nodemap_range_tree *nm_range_tree, struct lu_nid_range *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int range_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *&nbsp;</td>
          <td class="paramname"> <em>nm_range_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__range_8c_source.html#l00152">152</a> of file <a class="el" href="nodemap__range_8c_source.html">nodemap_range.c</a>.</p>

<p>References <a class="el" href="structinterval__node.html#a9fdbb3d38027b4bcc418350cad4f72d7">interval_node::in_extent</a>, <a class="el" href="interval__tree_8c_source.html#l00383">interval_insert()</a>, <a class="el" href="interval__tree_8c_source.html#l00691">interval_is_overlapped()</a>, <a class="el" href="nodemap__internal_8h_source.html#l00076">nodemap_range_tree::nmrt_range_interval_root</a>, and <a class="el" href="nodemap__internal_8h_source.html#l00061">lu_nid_range::rn_node</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00644">nodemap_add_range_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a45019c0cfa1690588de216d7e255be01"></a><!-- doxytag: member="nodemap_internal.h::range_parse_nidstring" ref="a45019c0cfa1690588de216d7e255be01" args="(char *range_string, lnet_nid_t *start_nid, lnet_nid_t *end_nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int range_parse_nidstring </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>range_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *&nbsp;</td>
          <td class="paramname"> <em>start_nid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *&nbsp;</td>
          <td class="paramname"> <em>end_nid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ababdd0f7590fce9a33e7f06afae41b3f"></a><!-- doxytag: member="nodemap_internal.h::range_search" ref="ababdd0f7590fce9a33e7f06afae41b3f" args="(struct nodemap_range_tree *nm_range_tree, lnet_nid_t nid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__nid__range.html">lu_nid_range</a>* range_search </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnodemap__range__tree.html">nodemap_range_tree</a> *&nbsp;</td>
          <td class="paramname"> <em>nm_range_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a>&nbsp;</td>
          <td class="paramname"> <em>nid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__range_8c_source.html#l00190">190</a> of file <a class="el" href="nodemap__range_8c_source.html">nodemap_range.c</a>.</p>

<p>References <a class="el" href="interval__tree_8c_source.html#l00625">interval_search()</a>, <a class="el" href="nodemap__internal_8h_source.html#l00076">nodemap_range_tree::nmrt_range_interval_root</a>, <a class="el" href="nodemap__range_8c_source.html#l00052">range_cb()</a>, and <a class="el" href="utils_2wirehdr_8c_source.html#l00047">ret</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l00247">nodemap_classify_nid()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a3a725ac0883b4d8827637c0069fc8049"></a><!-- doxytag: member="nodemap_internal.h::active_config" ref="a3a725ac0883b4d8827637c0069fc8049" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structnodemap__config.html">nodemap_config</a>* <a class="el" href="nodemap__internal_8h.html#a3a725ac0883b4d8827637c0069fc8049">active_config</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00055">55</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>Referenced by <a class="el" href="nodemap__lproc_8c_source.html#l00123">nodemap_ranges_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ceb1c86d8eba61e36ec42a9ae9f492c"></a><!-- doxytag: member="nodemap_internal.h::active_config_lock" ref="a9ceb1c86d8eba61e36ec42a9ae9f492c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct mutex <a class="el" href="nodemap__internal_8h.html#a9ceb1c86d8eba61e36ec42a9ae9f492c">active_config_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01286">nm_member_revoke_all()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01088">nodemap_activate()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01002">nodemap_add()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00416">nodemap_add_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00351">nodemap_add_member()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00684">nodemap_add_range()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00397">nodemap_admin_seq_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01190">nodemap_config_set_active()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01033">nodemap_del()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00455">nodemap_del_idmap()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00716">nodemap_del_range()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00062">nodemap_destroy()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00183">nodemap_exports_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00291">nodemap_id_seq_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00055">nodemap_idmap_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00123">nodemap_ranges_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00864">nodemap_set_allow_root()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00960">nodemap_set_squash_gid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00927">nodemap_set_squash_uid()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00894">nodemap_set_trust_client_ids()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00344">nodemap_squash_gid_seq_show()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00318">nodemap_squash_uid_seq_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01339">nodemap_test_id()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01311">nodemap_test_nid()</a>, and <a class="el" href="nodemap__lproc_8c_source.html#l00370">nodemap_trusted_seq_show()</a>.</p>

</div>
</div>
<a class="anchor" id="a300128a8ec1b35307f6ddd737b09e227"></a><!-- doxytag: member="nodemap_internal.h::nodemap_active" ref="a300128a8ec1b35307f6ddd737b09e227" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="nodemap__internal_8h.html#a300128a8ec1b35307f6ddd737b09e227">nodemap_active</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00048">48</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>Referenced by <a class="el" href="nodemap__handler_8c_source.html#l01088">nodemap_activate()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l00240">nodemap_active_seq_show()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00987">nodemap_can_setquota()</a>, <a class="el" href="nodemap__handler_8c_source.html#l01190">nodemap_config_set_active()</a>, <a class="el" href="nodemap__handler_8c_source.html#l00580">nodemap_map_acl()</a>, and <a class="el" href="nodemap__handler_8c_source.html#l00519">nodemap_map_id()</a>.</p>

</div>
</div>
<a class="anchor" id="aef1a5af170ef5a454edc1f4e62460489"></a><!-- doxytag: member="nodemap_internal.h::proc_lustre_nodemap_root" ref="aef1a5af170ef5a454edc1f4e62460489" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct proc_dir_entry* <a class="el" href="nodemap__internal_8h.html#aef1a5af170ef5a454edc1f4e62460489">proc_lustre_nodemap_root</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nodemap__handler_8c_source.html#l00045">45</a> of file <a class="el" href="nodemap__handler_8c_source.html">nodemap_handler.c</a>.</p>

<p>Referenced by <a class="el" href="nodemap__lproc_8c_source.html#l01165">lprocfs_nodemap_register()</a>, <a class="el" href="nodemap__lproc_8c_source.html#l01135">nodemap_procfs_exit()</a>, and <a class="el" href="nodemap__lproc_8c_source.html#l01115">nodemap_procfs_init()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
