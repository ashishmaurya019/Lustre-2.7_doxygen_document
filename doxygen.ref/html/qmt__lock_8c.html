<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/quota/qmt_lock.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/quota/qmt_lock.c File Reference</h1><code>#include &lt;linux/kthread.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="lustre__swab_8h_source.html">lustre_swab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="obd__class_8h_source.html">obd_class.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="qmt__internal_8h_source.html">qmt_internal.h</a>&quot;</code><br/>

<p><a href="qmt__lock_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#abda60744d497fcfe370cfd6b2d65c7ed">DEBUG_SUBSYSTEM</a>&nbsp;&nbsp;&nbsp;S_LQUOTA</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#aaa7ce559caa10412ed3c052c9a25607c">qmt_glimpse_cb_t</a> )(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structqmt__device.html">qmt_device</a> *, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *, union <a class="el" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> *, void *)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#a73fe227fe82bdf6ae5681e1d64d6bf78">qmt_intent_policy</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> **lockp, int flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#a4db4cece081609bcab8bf55bc7c3af7f">qmt_lvbo_init</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#a9abdc22b39029b75cd4cd9e8e4338324">qmt_lvbo_update</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, int increase_only)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#a8da2bd83c6201d987995c93dd73eb3ce">qmt_lvbo_size</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#ab7dcf0ba4ac36af5b4391e5f598a43f8">qmt_lvbo_fill</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *lock, void *lvb, int lvblen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#aae7cba1b84c0f68dab8537f76c28e962">qmt_lvbo_free</a> (struct <a class="el" href="structlu__device.html">lu_device</a> *ld, struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#a5301a8ed709fd238f1947cb8273e0c28">qmt_glimpse_lock</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *res, union <a class="el" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> *desc, <a class="el" href="qmt__lock_8c.html#aaa7ce559caa10412ed3c052c9a25607c">qmt_glimpse_cb_t</a> cb, void *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#a83494d3ffcc4ed57d07bbb1b95be0f1f">qmt_glb_lock_notify</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> ver)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#acbd81bc42643eb85be81cc46d5e754b4">qmt_id_lock_cb</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>, union <a class="el" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> *desc, void *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#ae8d7e8eb0b6d2d0ba20339470687635b">qmt_id_lock_glimpse</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *<a class="el" href="llog__test_8c.html#aaa83f069991aa91e0383af81ef30f13f">uuid</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#ad5913388319e9f454618953aa1623c22">qmt_id_lock_notify</a> (struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt, struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *lqe)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#ad3b433e1705608ed7d662c2eba49e8be">qmt_reba_thread</a> (void *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#aa1b1f30e2e282ddf1a01eeb7fdf6b70e">qmt_start_reba_thread</a> (struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qmt__lock_8c.html#aba646633e246622808df1392d5b237a4">qmt_stop_reba_thread</a> (struct <a class="el" href="structqmt__device.html">qmt_device</a> *qmt)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abda60744d497fcfe370cfd6b2d65c7ed"></a><!-- doxytag: member="qmt_lock.c::DEBUG_SUBSYSTEM" ref="abda60744d497fcfe370cfd6b2d65c7ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_SUBSYSTEM&nbsp;&nbsp;&nbsp;S_LQUOTA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00031">31</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="aaa7ce559caa10412ed3c052c9a25607c"></a><!-- doxytag: member="qmt_lock.c::qmt_glimpse_cb_t" ref="aaa7ce559caa10412ed3c052c9a25607c" args=")(const struct lu_env *, struct qmt_device *, struct obd_uuid *, union ldlm_gl_desc *, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="qmt__lock_8c.html#aaa7ce559caa10412ed3c052c9a25607c">qmt_glimpse_cb_t</a>)(const struct <a class="el" href="structlu__env.html">lu_env</a> *, struct <a class="el" href="structqmt__device.html">qmt_device</a> *, struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *, union <a class="el" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> *, void *)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00443">443</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a83494d3ffcc4ed57d07bbb1b95be0f1f"></a><!-- doxytag: member="qmt_lock.c::qmt_glb_lock_notify" ref="a83494d3ffcc4ed57d07bbb1b95be0f1f" args="(const struct lu_env *env, struct lquota_entry *lqe, __u64 ver)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qmt_glb_lock_notify </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>ver</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00539">539</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__fid_8h_source.html#l00541">fid_build_reg_res_name()</a>, <a class="el" href="lustre__idl_8h_source.html#l01961">ldlm_gl_lquota_desc::gl_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01963">ldlm_gl_lquota_desc::gl_hardlimit</a>, <a class="el" href="lustre__idl_8h_source.html#l01960">ldlm_gl_lquota_desc::gl_id</a>, <a class="el" href="lustre__idl_8h_source.html#l01964">ldlm_gl_lquota_desc::gl_softlimit</a>, <a class="el" href="lustre__idl_8h_source.html#l01965">ldlm_gl_lquota_desc::gl_time</a>, <a class="el" href="lustre__idl_8h_source.html#l01962">ldlm_gl_lquota_desc::gl_ver</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="qmt__internal_8h_source.html#l00165">lqe2qpi()</a>, <a class="el" href="lquota__internal_8h_source.html#l00144">lquota_entry::lqe_id</a>, <a class="el" href="lquota__internal_8h_source.html#l00147">lquota_entry::lqe_site</a>, <a class="el" href="lquota__internal_8h_source.html#l00181">lquota_site::lqs_qtype</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l02865">ldlm_gl_desc::lquota_desc</a>, <a class="el" href="lquota__lib_8c_source.html#l00240">lquota_generate_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__internal_8h_source.html#l00057">qmt_device::qmt_ns</a>, <a class="el" href="qmt__internal_8h_source.html#l00108">qmt_pool_info::qpi_key</a>, <a class="el" href="qmt__internal_8h_source.html#l00115">qmt_pool_info::qpi_qmt</a>, <a class="el" href="qmt__internal_8h_source.html#l00195">qmt_thread_info::qti_fid</a>, <a class="el" href="qmt__internal_8h_source.html#l00197">qmt_thread_info::qti_gl_desc</a>, <a class="el" href="qmt__internal_8h_source.html#l00196">qmt_thread_info::qti_resid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>.</p>

<p>Referenced by <a class="el" href="qmt__handler_8c_source.html#l00094">qmt_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a5301a8ed709fd238f1947cb8273e0c28"></a><!-- doxytag: member="qmt_lock.c::qmt_glimpse_lock" ref="a5301a8ed709fd238f1947cb8273e0c28" args="(const struct lu_env *env, struct qmt_device *qmt, struct ldlm_resource *res, union ldlm_gl_desc *desc, qmt_glimpse_cb_t cb, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_glimpse_lock </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qmt__lock_8c.html#aaa7ce559caa10412ed3c052c9a25607c">qmt_glimpse_cb_t</a>&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00459">459</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="it__test_8c_source.html#l00081">cb()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="lustre__dlm_8h_source.html#l00583">ldlm_glimpse_work::gl_desc</a>, <a class="el" href="lustre__dlm_8h_source.html#l00582">ldlm_glimpse_work::gl_flags</a>, <a class="el" href="lustre__dlm_8h_source.html#l00581">ldlm_glimpse_work::gl_list</a>, <a class="el" href="lustre__dlm_8h_source.html#l00580">ldlm_glimpse_work::gl_lock</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01344">LDLM_LOCK_GET</a>, <a class="el" href="lustre__dlm_8h_source.html#l01338">LDLM_LOCK_RELEASE</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00242">list_entry</a>, <a class="el" href="list_8h_source.html#l00253">list_for_each</a>, <a class="el" href="list_8h_source.html#l00266">list_for_each_safe</a>, <a class="el" href="list_8h_source.html#l00046">LIST_HEAD_INIT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01537">lock_res()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00941">ldlm_resource::lr_granted</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00513">obd_uuid2str()</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__dlm_8h_source.html#l01550">unlock_res()</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00539">qmt_glb_lock_notify()</a>, and <a class="el" href="qmt__lock_8c_source.html#l00598">qmt_id_lock_glimpse()</a>.</p>

</div>
</div>
<a class="anchor" id="acbd81bc42643eb85be81cc46d5e754b4"></a><!-- doxytag: member="qmt_lock.c::qmt_id_lock_cb" ref="acbd81bc42643eb85be81cc46d5e754b4" args="(const struct lu_env *env, struct qmt_device *qmt, struct obd_uuid *uuid, union ldlm_gl_desc *desc, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_id_lock_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionldlm__gl__desc.html">ldlm_gl_desc</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00579">579</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00495">obd_uuid_equals()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00598">qmt_id_lock_glimpse()</a>.</p>

</div>
</div>
<a class="anchor" id="ae8d7e8eb0b6d2d0ba20339470687635b"></a><!-- doxytag: member="qmt_lock.c::qmt_id_lock_glimpse" ref="ae8d7e8eb0b6d2d0ba20339470687635b" args="(const struct lu_env *env, struct qmt_device *qmt, struct lquota_entry *lqe, struct obd_uuid *uuid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void qmt_id_lock_glimpse </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobd__uuid.html">obd_uuid</a> *&nbsp;</td>
          <td class="paramname"> <em>uuid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00598">598</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="linux-time_8h_source.html#l00235">cfs_time_current_64</a>, <a class="el" href="linux-time_8h_source.html#l00157">cfs_time_current_sec()</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__fid_8h_source.html#l00574">fid_build_quota_res_name()</a>, <a class="el" href="lustre__idl_8h_source.html#l01961">ldlm_gl_lquota_desc::gl_flags</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="ldlm__resource_8c_source.html#l01179">ldlm_resource_get()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01295">ldlm_resource_putref()</a>, <a class="el" href="qmt__internal_8h_source.html#l00165">lqe2qpi()</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_edquot</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_enforced</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_gl</a>, <a class="el" href="lquota__internal_8h_source.html#l00144">lquota_entry::lqe_id</a>, <a class="el" href="lquota__internal_8h_source.html#l00159">lquota_entry::lqe_qunit</a>, <a class="el" href="lquota__internal_8h_source.html#l00147">lquota_entry::lqe_site</a>, <a class="el" href="lquota__internal_8h_source.html#l00242">lqe_write_lock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00250">lqe_write_unlock()</a>, <a class="el" href="lquota__internal_8h_source.html#l00181">lquota_site::lqs_qtype</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lustre__idl_8h_source.html#l02865">ldlm_gl_desc::lquota_desc</a>, <a class="el" href="lustre__idl_8h_source.html#l01972">LQUOTA_FL_EDQUOT</a>, <a class="el" href="lquota__lib_8c_source.html#l00240">lquota_generate_fid()</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="qmt__entry_8c_source.html#l00410">qmt_adjust_edquot()</a>, <a class="el" href="qmt__lock_8c_source.html#l00459">qmt_glimpse_lock()</a>, <a class="el" href="qmt__lock_8c_source.html#l00579">qmt_id_lock_cb()</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__internal_8h_source.html#l00057">qmt_device::qmt_ns</a>, <a class="el" href="qmt__internal_8h_source.html#l00108">qmt_pool_info::qpi_key</a>, <a class="el" href="qmt__internal_8h_source.html#l00141">qmt_pool_info::qpi_least_qunit</a>, <a class="el" href="qmt__internal_8h_source.html#l00195">qmt_thread_info::qti_fid</a>, <a class="el" href="qmt__internal_8h_source.html#l00197">qmt_thread_info::qti_gl_desc</a>, <a class="el" href="qmt__internal_8h_source.html#l00196">qmt_thread_info::qti_resid</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00358">RETURN_EXIT</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00710">qmt_reba_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="ad5913388319e9f454618953aa1623c22"></a><!-- doxytag: member="qmt_lock.c::qmt_id_lock_notify" ref="ad5913388319e9f454618953aa1623c22" args="(struct qmt_device *qmt, struct lquota_entry *lqe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qmt_id_lock_notify </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlquota__entry.html">lquota_entry</a> *&nbsp;</td>
          <td class="paramname"> <em>lqe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00680">680</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="list_8h_source.html#l00090">list_add_tail()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00155">lquota_entry::lqe_link</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="qmt__internal_8h_source.html#l00080">qmt_device::qmt_reba_list</a>, <a class="el" href="qmt__internal_8h_source.html#l00083">qmt_device::qmt_reba_lock</a>, <a class="el" href="qmt__internal_8h_source.html#l00077">qmt_device::qmt_reba_thread</a>, <a class="el" href="qmt__internal_8h_source.html#l00085">qmt_device::qmt_stopping</a>, and <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>.</p>

<p>Referenced by <a class="el" href="qmt__entry_8c_source.html#l00410">qmt_adjust_edquot()</a>, and <a class="el" href="qmt__entry_8c_source.html#l00573">qmt_adjust_qunit()</a>.</p>

</div>
</div>
<a class="anchor" id="a73fe227fe82bdf6ae5681e1d64d6bf78"></a><!-- doxytag: member="qmt_lock.c::qmt_intent_policy" ref="a73fe227fe82bdf6ae5681e1d64d6bf78" args="(const struct lu_env *env, struct lu_device *ld, struct ptlrpc_request *req, struct ldlm_lock **lockp, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_intent_policy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> **&nbsp;</td>
          <td class="paramname"> <em>lockp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00043">43</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__target_8h_source.html#l00498">err_serious()</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__idl_8h_source.html#l02882">IT_QUOTA_CONN</a>, <a class="el" href="lustre__idl_8h_source.html#l02881">IT_QUOTA_DQACQ</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01273">ldlm_handle2lock()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01327">LDLM_LOCK_PUT</a>, <a class="el" href="lustre__dlm_8h_source.html#l01064">ldlm_lvbo_fill()</a>, <a class="el" href="lustre__dlm_8h_source.html#l01054">ldlm_lvbo_size()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00979">ldlm_resource::lr_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="qmt__internal_8h_source.html#l00220">lu2qmt_dev()</a>, <a class="el" href="lustre__idl_8h_source.html#l01021">lustre_handle_is_used()</a>, <a class="el" href="lustre__idl_8h_source.html#l02106">LUSTRE_RES_ID_QUOTA_SEQ_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="lustre__idl_8h_source.html#l02887">ldlm_intent::opc</a>, <a class="el" href="lustre__idl_8h_source.html#l01885">quota_body::qb_count</a>, <a class="el" href="lustre__idl_8h_source.html#l01879">quota_body::qb_fid</a>, <a class="el" href="lustre__idl_8h_source.html#l01883">quota_body::qb_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01889">quota_body::qb_glb_lockh</a>, <a class="el" href="lustre__idl_8h_source.html#l01887">quota_body::qb_slv_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l01886">quota_body::qb_usage</a>, <a class="el" href="qmt__handler_8c_source.html#l00342">qmt_dqacq0()</a>, <a class="el" href="qmt__pool_8c_source.html#l00648">qmt_pool_new_conn()</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="lustre__req__layout_8h_source.html#l00059">RCL_SERVER</a>, <a class="el" href="layout_8c_source.html#l02117">req_capsule_client_get()</a>, <a class="el" href="layout_8c_source.html#l02339">req_capsule_extend()</a>, <a class="el" href="layout_8c_source.html#l02158">req_capsule_server_get()</a>, <a class="el" href="layout_8c_source.html#l01868">req_capsule_server_pack()</a>, <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>, <a class="el" href="layout_8c_source.html#l02416">req_capsule_shrink()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01049">RMF_DLM_LVB</a>, <a class="el" href="layout_8c_source.html#l01044">RMF_LDLM_INTENT</a>, <a class="el" href="layout_8c_source.html#l00949">RMF_QUOTA_BODY</a>, <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>, <a class="el" href="layout_8c_source.html#l01331">RQF_LDLM_INTENT_QUOTA</a>, and <a class="el" href="llog__test_8c_source.html#l00057">uuid</a>.</p>

</div>
</div>
<a class="anchor" id="ab7dcf0ba4ac36af5b4391e5f598a43f8"></a><!-- doxytag: member="qmt_lock.c::qmt_lvbo_fill" ref="ab7dcf0ba4ac36af5b4391e5f598a43f8" args="(struct lu_device *ld, struct ldlm_lock *lock, void *lvb, int lvblen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_lvbo_fill </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>lvb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lvblen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00346">346</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="dt__object_8c_source.html#l00553">dt_version_get()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00304">FID_SEQ_QUOTA_GLB</a>, <a class="el" href="lustre__dlm_8h_source.html#l00694">ldlm_lock::l_resource</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01024">LCT_LOCAL</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="lquota__internal_8h_source.html#l00166">lquota_entry::lqe_edquot</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00159">lquota_entry::lqe_qunit</a>, <a class="el" href="lustre__idl_8h_source.html#l01972">LQUOTA_FL_EDQUOT</a>, <a class="el" href="lustre__dlm_8h_source.html#l00979">ldlm_resource::lr_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="lustre__idl_8h_source.html#l02106">LUSTRE_RES_ID_QUOTA_SEQ_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02103">LUSTRE_RES_ID_SEQ_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l01976">lquota_lvb::lvb_flags</a>, <a class="el" href="lustre__idl_8h_source.html#l01979">lquota_lvb::lvb_id_qunit</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="aae7cba1b84c0f68dab8537f76c28e962"></a><!-- doxytag: member="qmt_lock.c::qmt_lvbo_free" ref="aae7cba1b84c0f68dab8537f76c28e962" args="(struct lu_device *ld, struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_lvbo_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00403">403</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l01024">LCT_LOCAL</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00979">ldlm_resource::lr_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00976">ldlm_resource::lr_lvb_len</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="lustre__idl_8h_source.html#l02106">LUSTRE_RES_ID_QUOTA_SEQ_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a4db4cece081609bcab8bf55bc7c3af7f"></a><!-- doxytag: member="qmt_lock.c::qmt_lvbo_init" ref="a4db4cece081609bcab8bf55bc7c3af7f" args="(struct lu_device *ld, struct ldlm_resource *res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_lvbo_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00152">152</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00259">CDEBUG</a>, <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00155">D_QUOTA</a>, <a class="el" href="lustre__user_8h_source.html#l00548">DFID</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="dt__object_8h_source.html#l01926">dt_locate()</a>, <a class="el" href="dt__object_8h_source.html#l01790">dt_object_exists()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__fid_8h_source.html#l00585">fid_extract_from_quota_res()</a>, <a class="el" href="lustre__idl_8h_source.html#l00304">FID_SEQ_QUOTA_GLB</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="packet-lustre_8c_source.html#l00298">LDLM_PLAIN</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lquota__lib_8c_source.html#l00256">lquota_extract_fid()</a>, <a class="el" href="lustre__dlm_8h_source.html#l00979">ldlm_resource::lr_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00976">ldlm_resource::lr_lvb_len</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="lustre__dlm_8h_source.html#l00970">ldlm_resource::lr_type</a>, <a class="el" href="qmt__internal_8h_source.html#l00220">lu2qmt_dev()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="lu__object_8c_source.html#l00097">lu_object_put()</a>, <a class="el" href="lustre__idl_8h_source.html#l02106">LUSTRE_RES_ID_QUOTA_SEQ_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02103">LUSTRE_RES_ID_SEQ_OFF</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__user_8h_source.html#l00549">PFID</a>, <a class="el" href="qmt__internal_8h_source.html#l00054">qmt_device::qmt_child</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__pool_8c_source.html#l00710">qmt_pool_lqe_lookup()</a>, <a class="el" href="qmt__internal_8h_source.html#l00195">qmt_thread_info::qti_fid</a>, <a class="el" href="qmt__internal_8h_source.html#l00193">qmt_thread_info::qti_id</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a8da2bd83c6201d987995c93dd73eb3ce"></a><!-- doxytag: member="qmt_lock.c::qmt_lvbo_size" ref="a8da2bd83c6201d987995c93dd73eb3ce" args="(struct lu_device *ld, struct ldlm_lock *lock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_lvbo_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00338">338</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9abdc22b39029b75cd4cd9e8e4338324"></a><!-- doxytag: member="qmt_lock.c::qmt_lvbo_update" ref="a9abdc22b39029b75cd4cd9e8e4338324" args="(struct lu_device *ld, struct ldlm_resource *res, struct ptlrpc_request *req, int increase_only)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_lvbo_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlu__device.html">lu_device</a> *&nbsp;</td>
          <td class="paramname"> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>increase_only</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00236">236</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="genops_8c_source.html#l00803">class_export_get()</a>, <a class="el" href="genops_8c_source.html#l00812">class_export_put()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="flock_8c_source.html#l00090">EXIT</a>, <a class="el" href="lustre__export_8h_source.html#l00193">obd_export::exp_client_uuid</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="lustre__dlm_8h_source.html#l00754">ldlm_lock::l_export</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="group__LDLM.html#gad7430abbe52b72b069536f6f99336d94">ldlm_request_lock()</a>, <a class="el" href="libcfs_2include_2libcfs_2types_8h_source.html#l00045">LPU64</a>, <a class="el" href="lquota__internal_8h_source.html#l00222">lqe_getref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lquota__internal_8h_source.html#l00359">LQUOTA_DEBUG</a>, <a class="el" href="lquota__internal_8h_source.html#l00360">LQUOTA_ERROR</a>, <a class="el" href="lustre__dlm_8h_source.html#l00979">ldlm_resource::lr_lvb_data</a>, <a class="el" href="lustre__dlm_8h_source.html#l00951">ldlm_resource::lr_name</a>, <a class="el" href="qmt__internal_8h_source.html#l00220">lu2qmt_dev()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="lustre__idl_8h_source.html#l02106">LUSTRE_RES_ID_QUOTA_SEQ_OFF</a>, <a class="el" href="pack__generic_8c_source.html#l01823">lustre_swab_lquota_lvb()</a>, <a class="el" href="lustre__idl_8h_source.html#l01977">lquota_lvb::lvb_id_may_rel</a>, <a class="el" href="lustre__idl_8h_source.html#l01978">lquota_lvb::lvb_id_rel</a>, <a class="el" href="lustre__idl_8h_source.html#l02780">ldlm_res_id::name</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__idl_8h_source.html#l01885">quota_body::qb_count</a>, <a class="el" href="qmt__handler_8c_source.html#l00342">qmt_dqacq0()</a>, <a class="el" href="qmt__internal_8h_source.html#l00206">qmt_info()</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="qmt__internal_8h_source.html#l00198">qmt_thread_info::qti_body</a>, <a class="el" href="lustre__idl_8h_source.html#l01902">QUOTA_DQACQ_FL_REL</a>, <a class="el" href="layout_8c_source.html#l02171">req_capsule_server_swab_get()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="layout_8c_source.html#l01049">RMF_DLM_LVB</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

</div>
</div>
<a class="anchor" id="ad3b433e1705608ed7d662c2eba49e8be"></a><!-- doxytag: member="qmt_lock.c::qmt_reba_thread" ref="ad3b433e1705608ed7d662c2eba49e8be" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int qmt_reba_thread </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00710">710</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="lu__object_8h_source.html#l00995">LCT_MD_THREAD</a>, <a class="el" href="list_8h_source.html#l00125">list_del_init()</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="lquota__internal_8h_source.html#l00155">lquota_entry::lqe_link</a>, <a class="el" href="lquota__internal_8h_source.html#l00228">lqe_putref()</a>, <a class="el" href="lu__object_8c_source.html#l01881">lu_env_fini()</a>, <a class="el" href="lu__object_8c_source.html#l01869">lu_env_init()</a>, <a class="el" href="obd__support_8h_source.html#l00710">OBD_ALLOC_PTR</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="qmt__lock_8c_source.html#l00598">qmt_id_lock_glimpse()</a>, <a class="el" href="qmt__internal_8h_source.html#l00080">qmt_device::qmt_reba_list</a>, <a class="el" href="qmt__internal_8h_source.html#l00083">qmt_device::qmt_reba_lock</a>, <a class="el" href="qmt__internal_8h_source.html#l00077">qmt_device::qmt_reba_thread</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01497">SVC_RUNNING</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qmt__lock_8c_source.html#l00766">qmt_start_reba_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="aa1b1f30e2e282ddf1a01eeb7fdf6b70e"></a><!-- doxytag: member="qmt_lock.c::qmt_start_reba_thread" ref="aa1b1f30e2e282ddf1a01eeb7fdf6b70e" args="(struct qmt_device *qmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qmt_start_reba_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00766">766</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="qmt__lock_8c_source.html#l00710">qmt_reba_thread()</a>, <a class="el" href="qmt__internal_8h_source.html#l00077">qmt_device::qmt_reba_thread</a>, <a class="el" href="qmt__internal_8h_source.html#l00048">qmt_device::qmt_svname</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__net_8h_source.html#l01494">SVC_STOPPED</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01557">thread_is_running()</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qmt__dev_8c_source.html#l00199">qmt_device_init0()</a>.</p>

</div>
</div>
<a class="anchor" id="aba646633e246622808df1392d5b237a4"></a><!-- doxytag: member="qmt_lock.c::qmt_stop_reba_thread" ref="aba646633e246622808df1392d5b237a4" args="(struct qmt_device *qmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qmt_stop_reba_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqmt__device.html">qmt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>qmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qmt__lock_8c_source.html#l00792">792</a> of file <a class="el" href="qmt__lock_8c_source.html">qmt_lock.c</a>.</p>

<p>References <a class="el" href="lustre__lib_8h_source.html#l00329">l_wait_event</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="qmt__internal_8h_source.html#l00080">qmt_device::qmt_reba_list</a>, <a class="el" href="qmt__internal_8h_source.html#l00077">qmt_device::qmt_reba_thread</a>, <a class="el" href="lustre__net_8h_source.html#l01495">SVC_STOPPING</a>, <a class="el" href="lustre__net_8h_source.html#l01532">ptlrpc_thread::t_ctl_waitq</a>, <a class="el" href="obd_8c_source.html#l00114">thread</a>, <a class="el" href="lustre__net_8h_source.html#l01542">thread_is_stopped()</a>, and <a class="el" href="lustre__net_8h_source.html#l01577">thread_set_flags()</a>.</p>

<p>Referenced by <a class="el" href="qmt__dev_8c_source.html#l00089">qmt_device_fini()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:50 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
