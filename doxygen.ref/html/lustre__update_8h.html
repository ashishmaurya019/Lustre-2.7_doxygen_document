<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lustre/include/lustre_update.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lustre/include/lustre_update.h File Reference</h1><code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dt__object_8h_source.html">dt_object.h</a>&gt;</code><br/>

<p><a href="lustre__update_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structthandle__update__records.html">thandle_update_records</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attached in the <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> to record the updates for distribute distribution.  <a href="structthandle__update__records.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtop__thandle.html">top_thandle</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsub__thandle__cookie.html">sub_thandle_cookie</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsub__thandle.html">sub_thandle</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtx__arg.html">tx_arg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structthandle__exec__args.html">thandle_exec_args</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a9f4464749118f260170a765e27df1a1e">OUT_UPDATE_INIT_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aa5040b3f1548002a5901609e90da6811">OUT_UPDATE_REPLY_SIZE</a>&nbsp;&nbsp;&nbsp;4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ade077da9b2fb5339a7fbdf12753858fe">OUT_BULK_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a3744b0a8694eb01290fc803285f33593">TOP_THANDLE_MAGIC</a>&nbsp;&nbsp;&nbsp;0x20140917</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a9a9f4aaa61e276f7c2cc6d108b8331f3">update_record_pack</a>(<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, th,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ad3a0fa81bdce2f874823b6815ed2b85a">update_record_size</a>(env, <a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, th,...)</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af28c3f8d6263730d6aa85705b1363fae">tx_exec_func_t</a> )(const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structtx__arg.html">tx_arg</a> *ta)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ab1178c4f1e649ee44d63f24ce145c1e1">update_params_size</a> (const struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int param_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structobject__update__param.html">object_update_param</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a31a578b3fb7d88f8ccf86225440b3bd2">update_params_get_param</a> (const struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int index, unsigned int param_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a80428c09a2406a6e7368a5d1e41339af">update_params_get_param_buf</a> (const struct <a class="el" href="structupdate__params.html">update_params</a> *params, __u16 index, unsigned int param_count, __u16 *<a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af47faf7c6c34f6ec15cb8f989cb91992">update_op_size</a> (unsigned int param_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structupdate__op.html">update_op</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a87394f6e5041a5b45b126e468d7b838d">update_op_next_op</a> (const struct <a class="el" href="structupdate__op.html">update_op</a> *uop)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a74f4843dd8006467b2e5386f038b2805">update_ops_size</a> (const struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int update_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ab95b7122b03937df0e071bb72d47fd0a">update_records_get_params</a> (const struct <a class="el" href="structupdate__records.html">update_records</a> *record)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#adb632809bd21fc667f777e79c2cb7548">update_records_size</a> (const struct <a class="el" href="structupdate__records.html">update_records</a> *record)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a1255fb1ec405f9b11f0768aa7e6068c3">llog_update_record_size</a> (const struct <a class="el" href="structllog__update__record.html">llog_update_record</a> *<a class="el" href="llog__test_8c.html#a691936eb94060f108728643f5af5a196">lur</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structupdate__op.html">update_op</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a0d5ea619cc4563262c93308d5550d9b1">update_ops_get_op</a> (const struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int index, unsigned int update_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a936a923f7761c0ab23d721a1af54dc85">object_update_param_get</a> (const struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t index, size_t *<a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a8c9bf0e3980c97f03ea3bea5df53f9ce">object_update_request_size</a> (const struct <a class="el" href="structobject__update__request.html">object_update_request</a> *our)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aa5700db4dcd764b32b2e3e8733744224">object_update_result_insert</a> (struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, void *data, size_t data_len, size_t index, int rc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af4371a8eb8e622c75dfd5309fe78c3e1">object_update_result_data_get</a> (const struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *reply, struct <a class="el" href="structlu__buf.html">lu_buf</a> *lbuf, size_t index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a49330ccd3b38e05bba32244c40f6df18">out_update_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, enum <a class="el" href="group__lustreidl.html#ga2d1a90f202540bfbcbd72a8c0f94b586">update_type</a> <a class="el" href="iam__ut_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, unsigned int params_count, __u16 *param_sizes, const void **param_bufs, __u32 reply_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Packs one update into the update_buffer.  <a href="#a49330ccd3b38e05bba32244c40f6df18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af85ed32dfabf37c6bfcdaeb679ef10aa">out_create_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack various updates into the update_buffer.  <a href="#af85ed32dfabf37c6bfcdaeb679ef10aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a95b16b48d588b8298eff58231ebb4d2f">out_object_destroy_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a2855f37a75f475a50fa645c38c33d541">out_index_delete_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ae85794a082f4d01bccf7ed689d31459c">out_index_insert_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aebe71b21857b34855ec80765f8e782e9">out_xattr_set_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, __u32 flag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aa100698759a51baa0bdac3393a4eccc0">out_xattr_del_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aefae6c5addeae02827c9e9af6eda382a">out_attr_set_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ad9a8cdd27df9405ab67600d30906624f">out_ref_add_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a6c59a8746d98159befdd1fc568957471">out_ref_del_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a2e2b3cfd4ea325c6867ab3e5406f333f">out_write_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a43effa973e65212db343f270f7c2949b">out_attr_get_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a841c3b9ebbda9e21ad4c36445e01cbca">out_index_lookup_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack various readonly updates into the update_buffer.  <a href="#a841c3b9ebbda9e21ad4c36445e01cbca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a77107989bdb23f932ffb8412b1a0a945">out_xattr_get_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const int <a class="el" href="multiop_8c.html#a199ab88d4ca8eab30e1cb7d35edacca5">bufsize</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ad342e4e31b2855e4d827b76be75f7048">out_read_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structobject__update.html">object_update</a> *update, size_t *max_update_length, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, size_t <a class="el" href="parallel__grouplock_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, loff_t pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af41e2b72019c67f5f929c6a944d0801e">update_op_str</a> (__u16 opcode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a781f9ae7819e282238729641f99ddcf1">thandle_get_sub_by_dt</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structdt__device.html">dt_device</a> *sub_dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>.  <a href="#a781f9ae7819e282238729641f99ddcf1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ab7c757e321b4d78db5f5f7fc28d27df0">thandle_get_sub</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, const struct <a class="el" href="structdt__object.html">dt_object</a> *sub_obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ac6f54ce638b398bc7fbb71605afbc6ad">top_trans_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *master_dev)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create the top transaction.  <a href="#ac6f54ce638b398bc7fbb71605afbc6ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a8c42630ece7c32f323382e2b12371a69">top_trans_start</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *master_dev, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">start the top transaction.  <a href="#a8c42630ece7c32f323382e2b12371a69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a165db60fce8230df959247137d37567d">top_trans_stop</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structdt__device.html">dt_device</a> *master_dev, struct <a class="el" href="structthandle.html">thandle</a> *th)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the top transaction.  <a href="#a165db60fce8230df959247137d37567d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af9ad3167e880c03421c54495b1c62b59">top_multiple_thandle_destroy</a> (struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *tmt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Top multiple <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> destroy.  <a href="#af9ad3167e880c03421c54495b1c62b59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a140e292e62e5bbffa28aa42aa52833f4">top_multiple_thandle_get</a> (struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *tmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ab203aee06c45fe66d3ddd8c952b92ed1">top_multiple_thandle_put</a> (struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *tmt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsub__thandle.html">sub_thandle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#abd4c2336b30be2ea7483ef3044cacb50">lookup_sub_thandle</a> (struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *tmt, struct <a class="el" href="structdt__device.html">dt_device</a> *dt_dev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aa345e2b1216b85fb0cfdb183553dc682">sub_thandle_trans_create</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structtop__thandle.html">top_thandle</a> *top_th, struct <a class="el" href="structsub__thandle.html">sub_thandle</a> *st)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>.  <a href="#aa345e2b1216b85fb0cfdb183553dc682"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a326d1ece7c3e09d476144648cd9c92d3">update_records_create_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, const struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate create update size.  <a href="#a326d1ece7c3e09d476144648cd9c92d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a4bf05d79caeadc1273a5a62b66232154">update_records_attr_set_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate attr set update size.  <a href="#a4bf05d79caeadc1273a5a62b66232154"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ad64a0bb9fb472f09125a383580d779ed">update_records_ref_add_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate ref add update size.  <a href="#ad64a0bb9fb472f09125a383580d779ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a63d3ba51338da1e9d0ab76f3838d2330">update_records_ref_del_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate ref del update size.  <a href="#a63d3ba51338da1e9d0ab76f3838d2330"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a8bb4f27514127c7fddfed05269fddd6e">update_records_object_destroy_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate object destroy update size.  <a href="#a8bb4f27514127c7fddfed05269fddd6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ab0351ffc2e1e9c70f887fbfa8181ab0e">update_records_index_insert_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate index insert update size.  <a href="#ab0351ffc2e1e9c70f887fbfa8181ab0e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a178056dec37f7d672b8c2989b2b3c24d">update_records_index_delete_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate index delete update size.  <a href="#a178056dec37f7d672b8c2989b2b3c24d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ac4e8a1f313a91e3776612c227750ac27">update_records_xattr_set_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, __u32 flag)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate xattr set size.  <a href="#ac4e8a1f313a91e3776612c227750ac27"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a6c4c7df106878116b11868e232551086">update_records_xattr_del_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate xattr delete update size.  <a href="#a6c4c7df106878116b11868e232551086"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a9a613a028497e370001345de3c47ee5b">update_records_write_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> pos)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate write update size.  <a href="#a9a613a028497e370001345de3c47ee5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a22158bbaf3c1c6e48822b0046db9532e">update_records_punch_size</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> end)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate size of punch update.  <a href="#a22158bbaf3c1c6e48822b0046db9532e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a536f2912b198af6ae7b47e81fb5123cb">update_records_create_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr, const struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *hint, struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *dof)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack create update.  <a href="#a536f2912b198af6ae7b47e81fb5123cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aa11aad46fa862adb0b2d1a6790c20c36">update_records_attr_set_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__attr.html">lu_attr</a> *attr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack attr set update.  <a href="#aa11aad46fa862adb0b2d1a6790c20c36"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#aa5c1ba7c90bb603fa32b3ce2cc3c80f9">update_records_ref_add_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack ref add update.  <a href="#aa5c1ba7c90bb603fa32b3ce2cc3c80f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a5d679792a3b5e49d0170a1ce55df8ce4">update_records_ref_del_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack ref del update.  <a href="#a5d679792a3b5e49d0170a1ce55df8ce4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af464d53afef74f1b3918d3571fa2581e">update_records_object_destroy_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack object destroy update.  <a href="#af464d53afef74f1b3918d3571fa2581e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a2ba66c5a47966557f3ac9310ff1774dd">update_records_index_insert_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct dt_rec *rec, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack index insert update.  <a href="#a2ba66c5a47966557f3ac9310ff1774dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ad37f503135c466368b42b72fc0061fe1">update_records_index_delete_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack index delete update.  <a href="#ad37f503135c466368b42b72fc0061fe1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ab5cbaa54ac4deb3eb969c29688a56f28">update_records_xattr_set_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, __u32 flag)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack xattr set update.  <a href="#ab5cbaa54ac4deb3eb969c29688a56f28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a79c727b585d2b96accddc19a646fecb5">update_records_xattr_del_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const char *<a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack xattr delete update.  <a href="#a79c727b585d2b96accddc19a646fecb5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ac13bcde2bee8f3032877e62eaef1841f">update_records_write_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, const struct <a class="el" href="structlu__buf.html">lu_buf</a> *<a class="el" href="lnet_2utils_2debug_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> pos)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack write update.  <a href="#ac13bcde2bee8f3032877e62eaef1841f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a0c8abdcf750282a719ba9c11582a210e">update_records_punch_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> <a class="el" href="rename__many_8c.html#ac452537b6646180ccdf7beba12c1b331">start</a>, <a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a> end)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack punch.  <a href="#a0c8abdcf750282a719ba9c11582a210e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#af2bca6df33e94f5dba3cc73e8020bd66">update_records_noop_pack</a> (const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structupdate__ops.html">update_ops</a> *ops, unsigned int *op_count, size_t *max_ops_size, struct <a class="el" href="structupdate__params.html">update_params</a> *params, unsigned int *param_count, size_t *max_param_size, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pack noop update.  <a href="#af2bca6df33e94f5dba3cc73e8020bd66"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a1015e587064445a57adea2dc3f93c47e">tur_update_records_extend</a> (struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *tur, size_t new_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extend update records.  <a href="#a1015e587064445a57adea2dc3f93c47e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#a23a3a01eea42de3cf2cc943246e9b157">tur_update_params_extend</a> (struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *tur, size_t new_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extend update params.  <a href="#a23a3a01eea42de3cf2cc943246e9b157"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lustre__update_8h.html#ad210f707a77f4c3b34e784df2fa88f02">tur_update_extend</a> (struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *tur, size_t new_op_size, size_t new_param_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extend update records.  <a href="#ad210f707a77f4c3b34e784df2fa88f02"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ade077da9b2fb5339a7fbdf12753858fe"></a><!-- doxytag: member="lustre_update.h::OUT_BULK_BUFFER_SIZE" ref="ade077da9b2fb5339a7fbdf12753858fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_BULK_BUFFER_SIZE&nbsp;&nbsp;&nbsp;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00038">38</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>Referenced by <a class="el" href="osp__md__object_8c_source.html#l01126">osp_md_read()</a>, and <a class="el" href="out__handler_8c_source.html#l00601">out_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f4464749118f260170a765e27df1a1e"></a><!-- doxytag: member="lustre_update.h::OUT_UPDATE_INIT_BUFFER_SIZE" ref="a9f4464749118f260170a765e27df1a1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_UPDATE_INIT_BUFFER_SIZE&nbsp;&nbsp;&nbsp;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00036">36</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>Referenced by <a class="el" href="osp__trans_8c_source.html#l00125">osp_object_update_request_create()</a>, and <a class="el" href="osp__trans_8c_source.html#l00187">osp_update_request_create()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5040b3f1548002a5901609e90da6811"></a><!-- doxytag: member="lustre_update.h::OUT_UPDATE_REPLY_SIZE" ref="aa5040b3f1548002a5901609e90da6811" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_UPDATE_REPLY_SIZE&nbsp;&nbsp;&nbsp;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00037">37</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l00542">osp_attr_get()</a>, <a class="el" href="osp__md__object_8c_source.html#l00480">osp_md_index_lookup()</a>, <a class="el" href="osp__md__object_8c_source.html#l01126">osp_md_read()</a>, <a class="el" href="osp__trans_8c_source.html#l00314">osp_prep_update_req()</a>, <a class="el" href="osp__trans_8c_source.html#l00605">osp_update_interpret()</a>, and <a class="el" href="osp__object_8c_source.html#l00916">osp_xattr_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a3744b0a8694eb01290fc803285f33593"></a><!-- doxytag: member="lustre_update.h::TOP_THANDLE_MAGIC" ref="a3744b0a8694eb01290fc803285f33593" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOP_THANDLE_MAGIC&nbsp;&nbsp;&nbsp;0x20140917</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00282">282</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l01242">top_multiple_thandle_destroy()</a>, <a class="el" href="update__trans_8c_source.html#l00069">top_multiple_thandle_dump()</a>, and <a class="el" href="update__trans_8c_source.html#l01112">top_trans_create_tmt()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a9f4aaa61e276f7c2cc6d108b8331f3"></a><!-- doxytag: member="lustre_update.h::update_record_pack" ref="a9a9f4aaa61e276f7c2cc6d108b8331f3" args="(name, th,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define update_record_pack</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00640">640</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>Referenced by <a class="el" href="lod__dev_8c_source.html#l01258">lod_add_noop_records()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00678">lod_sub_object_attr_set()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00166">lod_sub_object_create()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00524">lod_sub_object_delete()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00381">lod_sub_object_destroy()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00455">lod_sub_object_index_insert()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00913">lod_sub_object_punch()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00240">lod_sub_object_ref_add()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00310">lod_sub_object_ref_del()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00835">lod_sub_object_write()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00755">lod_sub_object_xattr_del()</a>, and <a class="el" href="lod__sub__object_8c_source.html#l00602">lod_sub_object_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3a0fa81bdce2f874823b6815ed2b85a"></a><!-- doxytag: member="lustre_update.h::update_record_size" ref="ad3a0fa81bdce2f874823b6815ed2b85a" args="(env, name, th,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define update_record_size</td>
          <td>(</td>
          <td class="paramtype">env, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">th, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                                      \
        <span class="keyword">struct </span><a class="code" href="structtop__thandle.html">top_thandle</a> *top_th;                                     \
        <span class="keyword">struct </span><a class="code" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *tmt;                               \
                                                                        \
        top_th = container_of(th, <span class="keyword">struct</span> <a class="code" href="structtop__thandle.html">top_thandle</a>, tt_super);        \
                                                                        \
        <a class="code" href="utils_2wirehdr_8c.html#a40eabc293a68a6404ce1de507c99c4b5">LASSERT</a>(top_th-&gt;<a class="code" href="structtop__thandle.html#a73e468d9194cb797fbc813463e450e7a">tt_multiple_thandle</a> != NULL);                   \
        tmt = top_th-&gt;<a class="code" href="structtop__thandle.html#a73e468d9194cb797fbc813463e450e7a">tt_multiple_thandle</a>;                              \
        tmt-&gt;<a class="code" href="structtop__multiple__thandle.html#aca68808b278ef692576ec3eb324cc110">tmt_record_size</a> +=                                         \
                update_records_##<a class="code" href="mdt__coordinator_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>##_size(env, __VA_ARGS__);         \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00680">680</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>Referenced by <a class="el" href="lod__sub__object_8c_source.html#l00641">lod_sub_object_declare_attr_set()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00129">lod_sub_object_declare_create()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00491">lod_sub_object_declare_delete()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00346">lod_sub_object_declare_destroy()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00419">lod_sub_object_declare_insert()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00873">lod_sub_object_declare_punch()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00206">lod_sub_object_declare_ref_add()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00276">lod_sub_object_declare_ref_del()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00795">lod_sub_object_declare_write()</a>, <a class="el" href="lod__sub__object_8c_source.html#l00717">lod_sub_object_declare_xattr_del()</a>, and <a class="el" href="lod__sub__object_8c_source.html#l00561">lod_sub_object_declare_xattr_set()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="af28c3f8d6263730d6aa85705b1363fae"></a><!-- doxytag: member="lustre_update.h::tx_exec_func_t" ref="af28c3f8d6263730d6aa85705b1363fae" args=")(const struct lu_env *env, struct thandle *th, struct tx_arg *ta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="lustre__update_8h.html#af28c3f8d6263730d6aa85705b1363fae">tx_exec_func_t</a>)(const struct <a class="el" href="structlu__env.html">lu_env</a> *env, struct <a class="el" href="structthandle.html">thandle</a> *th, struct <a class="el" href="structtx__arg.html">tx_arg</a> *ta)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00338">338</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1255fb1ec405f9b11f0768aa7e6068c3"></a><!-- doxytag: member="lustre_update.h::llog_update_record_size" ref="a1255fb1ec405f9b11f0768aa7e6068c3" args="(const struct llog_update_record *lur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t llog_update_record_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structllog__update__record.html">llog_update_record</a> *&nbsp;</td>
          <td class="paramname"> <em>lur</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00154">154</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="lustre__idl_8h_source.html#l04041">llog_update_record::lur_hdr</a>, <a class="el" href="lustre__idl_8h_source.html#l04042">llog_update_record::lur_update_rec</a>, and <a class="el" href="lustre__update_8h_source.html#l00134">update_records_size()</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l00307">dtrq_append_updates()</a>, <a class="el" href="update__recovery_8c_source.html#l00141">dtrq_create()</a>, <a class="el" href="update__recovery_8c_source.html#l00373">insert_update_records_to_replay_list()</a>, <a class="el" href="lod__dev_8c_source.html#l00296">lod_process_recovery_updates()</a>, <a class="el" href="update__trans_8c_source.html#l00343">prepare_writing_updates()</a>, <a class="el" href="update__trans_8c_source.html#l00167">sub_updates_write()</a>, and <a class="el" href="update__records_8c_source.html#l01054">tur_update_extend()</a>.</p>

</div>
</div>
<a class="anchor" id="abd4c2336b30be2ea7483ef3044cacb50"></a><!-- doxytag: member="lustre_update.h::lookup_sub_thandle" ref="abd4c2336b30be2ea7483ef3044cacb50" args="(struct top_multiple_thandle *tmt, struct dt_device *dt_dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsub__thandle.html">sub_thandle</a>* lookup_sub_thandle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>tmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>dt_dev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00423">423</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="lustre__update_8h_source.html#l00322">sub_thandle::st_dt</a>, <a class="el" href="lustre__update_8h_source.html#l00329">sub_thandle::st_sub_list</a>, and <a class="el" href="lustre__update_8h_source.html#l00287">top_multiple_thandle::tmt_sub_thandle_list</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, <a class="el" href="update__trans_8c_source.html#l01164">thandle_get_sub_by_dt()</a>, <a class="el" href="update__trans_8c_source.html#l00935">top_trans_stop()</a>, and <a class="el" href="update__recovery_8c_source.html#l01137">update_recovery_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="a936a923f7761c0ab23d721a1af54dc85"></a><!-- doxytag: member="lustre_update.h::object_update_param_get" ref="a936a923f7761c0ab23d721a1af54dc85" args="(const struct object_update *update, size_t index, size_t *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* object_update_param_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00179">179</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03819">object_update_param_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l03833">object_update::ou_params</a>, <a class="el" href="lustre__idl_8h_source.html#l03827">object_update::ou_params_count</a>, <a class="el" href="lustre__idl_8h_source.html#l03815">object_update_param::oup_buf</a>, and <a class="el" href="lustre__idl_8h_source.html#l03812">object_update_param::oup_len</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00151">out_attr_set()</a>, <a class="el" href="out__lib_8c_source.html#l00249">out_attr_set_pack()</a>, <a class="el" href="out__handler_8c_source.html#l00096">out_create()</a>, <a class="el" href="out__lib_8c_source.html#l00188">out_create_pack()</a>, <a class="el" href="out__handler_8c_source.html#l00508">out_index_delete()</a>, <a class="el" href="out__handler_8c_source.html#l00451">out_index_insert()</a>, <a class="el" href="out__handler_8c_source.html#l00290">out_index_lookup()</a>, <a class="el" href="out__handler_8c_source.html#l00601">out_read()</a>, <a class="el" href="out__handler_8c_source.html#l00560">out_write()</a>, <a class="el" href="out__handler_8c_source.html#l00392">out_xattr_del()</a>, <a class="el" href="out__handler_8c_source.html#l00235">out_xattr_get()</a>, and <a class="el" href="out__handler_8c_source.html#l00344">out_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c9bf0e3980c97f03ea3bea5df53f9ce"></a><!-- doxytag: member="lustre_update.h::object_update_request_size" ref="a8c9bf0e3980c97f03ea3bea5df53f9ce" args="(const struct object_update_request *our)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long object_update_request_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structobject__update__request.html">object_update_request</a> *&nbsp;</td>
          <td class="paramname"> <em>our</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00203">203</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03882">object_update_size()</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="lustre__idl_8h_source.html#l03842">object_update_request::ourq_count</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

<p>Referenced by <a class="el" href="osp__trans_8c_source.html#l00840">osp_insert_async_request()</a>, <a class="el" href="osp__trans_8c_source.html#l00262">osp_prep_inline_update_req()</a>, and <a class="el" href="osp__trans_8c_source.html#l00314">osp_prep_update_req()</a>.</p>

</div>
</div>
<a class="anchor" id="af4371a8eb8e622c75dfd5309fe78c3e1"></a><!-- doxytag: member="lustre_update.h::object_update_result_data_get" ref="af4371a8eb8e622c75dfd5309fe78c3e1" args="(const struct object_update_reply *reply, struct lu_buf *lbuf, size_t index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int object_update_result_data_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>lbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00243">243</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03929">object_update_result_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l03914">object_update_result::our_data</a>, <a class="el" href="lustre__idl_8h_source.html#l03912">object_update_result::our_datalen</a>, <a class="el" href="lustre__idl_8h_source.html#l03911">object_update_result::our_rc</a>, <a class="el" href="lustre__net_8h_source.html#l02407">ptlrpc_status_ntoh()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

<p>Referenced by <a class="el" href="osp__object_8c_source.html#l00400">osp_get_attr_from_reply()</a>, <a class="el" href="osp__md__object_8c_source.html#l00480">osp_md_index_lookup()</a>, <a class="el" href="osp__md__object_8c_source.html#l01126">osp_md_read()</a>, <a class="el" href="osp__object_8c_source.html#l00916">osp_xattr_get()</a>, and <a class="el" href="osp__object_8c_source.html#l00770">osp_xattr_get_interpterer()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5700db4dcd764b32b2e3e8733744224"></a><!-- doxytag: member="lustre_update.h::object_update_result_insert" ref="aa5700db4dcd764b32b2e3e8733744224" args="(struct object_update_reply *reply, void *data, size_t data_len, size_t index, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void object_update_result_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structobject__update__reply.html">object_update_reply</a> *&nbsp;</td>
          <td class="paramname"> <em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00219">219</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l03929">object_update_result_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l03912">object_update_result::our_datalen</a>, <a class="el" href="lustre__idl_8h_source.html#l03911">object_update_result::our_rc</a>, <a class="el" href="lustre__idl_8h_source.html#l03925">object_update_reply::ourp_lens</a>, and <a class="el" href="lustre__net_8h_source.html#l02395">ptlrpc_status_hton()</a>.</p>

<p>Referenced by <a class="el" href="out__handler_8c_source.html#l00187">out_attr_get()</a>, <a class="el" href="out__handler_8c_source.html#l00290">out_index_lookup()</a>, <a class="el" href="out__handler_8c_source.html#l00042">out_reconstruct()</a>, <a class="el" href="out__lib_8c_source.html#l00626">out_tx_attr_set_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00530">out_tx_create_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01175">out_tx_destroy_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01114">out_tx_index_delete_exec()</a>, <a class="el" href="out__lib_8c_source.html#l01050">out_tx_index_insert_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00909">out_tx_ref_add_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00957">out_tx_ref_del_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00675">out_tx_write_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00830">out_tx_xattr_del_exec()</a>, <a class="el" href="out__lib_8c_source.html#l00730">out_tx_xattr_set_exec()</a>, and <a class="el" href="out__handler_8c_source.html#l00235">out_xattr_get()</a>.</p>

</div>
</div>
<a class="anchor" id="a43effa973e65212db343f270f7c2949b"></a><!-- doxytag: member="lustre_update.h::out_attr_get_pack" ref="a43effa973e65212db343f270f7c2949b" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_attr_get_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00387">387</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03790">OUT_ATTR_GET</a>, and <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="aefae6c5addeae02827c9e9af6eda382a"></a><!-- doxytag: member="lustre_update.h::out_attr_set_pack" ref="aefae6c5addeae02827c9e9af6eda382a" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const struct lu_attr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_attr_set_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00249">249</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lustre__obdo_8h_source.html#l00048">lustre_set_wire_obdo()</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="linux-obdo_8c_source.html#l00052">obdo_from_la()</a>, <a class="el" href="lustre__update_8h_source.html#l00179">object_update_param_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l03789">OUT_ATTR_SET</a>, <a class="el" href="out__lib_8c_source.html#l00091">out_update_header_pack()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

</div>
</div>
<a class="anchor" id="af85ed32dfabf37c6bfcdaeb679ef10aa"></a><!-- doxytag: member="lustre_update.h::out_create_pack" ref="af85ed32dfabf37c6bfcdaeb679ef10aa" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const struct lu_attr *attr, struct dt_allocation_hint *hint, struct dt_object_format *dof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_create_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack various updates into the update_buffer. </p>
<p>The following functions pack different updates into the update_buffer So parameters of these API is basically same as its correspondent OSD/OSP API, for detail description of these parameters see osd_handler.c or <a class="el" href="osp__md__object_8c.html">osp_md_object.c</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ubuf</em>&nbsp;</td><td>update buffer </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>fid of this object for the update</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if insertion succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if insertion fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00188">188</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l00370">dt_allocation_hint::dah_parent</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__obdo_8h_source.html#l00048">lustre_set_wire_obdo()</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="linux-obdo_8c_source.html#l00052">obdo_from_la()</a>, <a class="el" href="lustre__update_8h_source.html#l00179">object_update_param_get()</a>, <a class="el" href="lustre__idl_8h_source.html#l03785">OUT_CREATE</a>, <a class="el" href="out__lib_8c_source.html#l00091">out_update_header_pack()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

</div>
</div>
<a class="anchor" id="a2855f37a75f475a50fa645c38c33d541"></a><!-- doxytag: member="lustre_update.h::out_index_delete_pack" ref="a2855f37a75f475a50fa645c38c33d541" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_index_delete_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00321">321</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03795">OUT_INDEX_DELETE</a>, <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

</div>
</div>
<a class="anchor" id="ae85794a082f4d01bccf7ed689d31459c"></a><!-- doxytag: member="lustre_update.h::out_index_insert_pack" ref="ae85794a082f4d01bccf7ed689d31459c" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const struct dt_rec *rec, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_index_insert_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00299">299</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="lustre__idl_8h_source.html#l03794">OUT_INDEX_INSERT</a>, <a class="el" href="out__lib_8c_source.html#l00299">out_index_insert_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, and <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>.</p>

<p>Referenced by <a class="el" href="out__lib_8c_source.html#l00299">out_index_insert_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a841c3b9ebbda9e21ad4c36445e01cbca"></a><!-- doxytag: member="lustre_update.h::out_index_lookup_pack" ref="a841c3b9ebbda9e21ad4c36445e01cbca" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, struct dt_rec *rec, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_index_lookup_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack various readonly updates into the update_buffer. </p>
<p>The following update funcs are only used by read-only ops, lookup, getattr etc, so it does not need transaction here. Currently they are only used by OSP.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>fid of this object for the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ubuf</em>&nbsp;</td><td>update buffer</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>=</em>&nbsp;</td><td>0 pack succeed. &lt; 0 pack failed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00373">373</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03793">OUT_INDEX_LOOKUP</a>, <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

</div>
</div>
<a class="anchor" id="a95b16b48d588b8298eff58231ebb4d2f"></a><!-- doxytag: member="lustre_update.h::out_object_destroy_pack" ref="a95b16b48d588b8298eff58231ebb4d2f" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_object_destroy_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00334">334</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03786">OUT_DESTROY</a>, and <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="ad342e4e31b2855e4d827b76be75f7048"></a><!-- doxytag: member="lustre_update.h::out_read_pack" ref="ad342e4e31b2855e4d827b76be75f7048" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_length, const struct lu_fid *fid, size_t size, loff_t pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_read_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00409">409</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lustre__idl_8h_source.html#l03799">OUT_READ</a>, and <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9a8cdd27df9405ab67600d30906624f"></a><!-- doxytag: member="lustre_update.h::out_ref_add_pack" ref="ad9a8cdd27df9405ab67600d30906624f" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_ref_add_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00241">241</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03787">OUT_REF_ADD</a>, and <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c59a8746d98159befdd1fc568957471"></a><!-- doxytag: member="lustre_update.h::out_ref_del_pack" ref="a6c59a8746d98159befdd1fc568957471" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_ref_del_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00233">233</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03788">OUT_REF_DEL</a>, and <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a49330ccd3b38e05bba32244c40f6df18"></a><!-- doxytag: member="lustre_update.h::out_update_pack" ref="a49330ccd3b38e05bba32244c40f6df18" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, enum update_type op, const struct lu_fid *fid, unsigned int params_count, __u16 *param_sizes, const void **param_bufs, __u32 reply_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_update_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__lustreidl.html#ga2d1a90f202540bfbcbd72a8c0f94b586">update_type</a>&nbsp;</td>
          <td class="paramname"> <em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16 *&nbsp;</td>
          <td class="paramname"> <em>param_sizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&nbsp;</td>
          <td class="paramname"> <em>param_bufs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>reply_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Packs one update into the update_buffer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>update</em>&nbsp;</td><td>update to be packed </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>max_update_size</em>&nbsp;</td><td>*maximum size of <em>update</em> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op</em>&nbsp;</td><td>update operation (enum update_type) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>object FID for this update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>param_count</em>&nbsp;</td><td>number of parameters for this update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>param_sizes</em>&nbsp;</td><td>array of parameters length of this update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>param_bufs</em>&nbsp;</td><td>parameter buffers</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>=</em>&nbsp;</td><td>0 if updates packing succeeds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if updates packing fails </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00146">146</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__idl_8h_source.html#l03819">object_update_param_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l03833">object_update::ou_params</a>, <a class="el" href="lustre__idl_8h_source.html#l03815">object_update_param::oup_buf</a>, <a class="el" href="out__lib_8c_source.html#l00091">out_update_header_pack()</a>, and <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>.</p>

<p>Referenced by <a class="el" href="osp__trans_8c_source.html#l00840">osp_insert_async_request()</a>, <a class="el" href="out__lib_8c_source.html#l00387">out_attr_get_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00321">out_index_delete_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00299">out_index_insert_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00373">out_index_lookup_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00334">out_object_destroy_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00409">out_read_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00241">out_ref_add_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00233">out_ref_del_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00343">out_write_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00288">out_xattr_del_pack()</a>, <a class="el" href="out__lib_8c_source.html#l00395">out_xattr_get_pack()</a>, and <a class="el" href="out__lib_8c_source.html#l00275">out_xattr_set_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e2b3cfd4ea325c6867ab3e5406f333f"></a><!-- doxytag: member="lustre_update.h::out_write_pack" ref="a2e2b3cfd4ea325c6867ab3e5406f333f" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const struct lu_buf *buf, __u64 pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_write_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00343">343</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, <a class="el" href="lustre__idl_8h_source.html#l03796">OUT_WRITE</a>, and <a class="el" href="out__lib_8c_source.html#l00343">out_write_pack()</a>.</p>

<p>Referenced by <a class="el" href="out__lib_8c_source.html#l00343">out_write_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="aa100698759a51baa0bdac3393a4eccc0"></a><!-- doxytag: member="lustre_update.h::out_xattr_del_pack" ref="aa100698759a51baa0bdac3393a4eccc0" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_xattr_del_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00288">288</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, <a class="el" href="lustre__idl_8h_source.html#l03797">OUT_XATTR_DEL</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

</div>
</div>
<a class="anchor" id="a77107989bdb23f932ffb8412b1a0a945"></a><!-- doxytag: member="lustre_update.h::out_xattr_get_pack" ref="a77107989bdb23f932ffb8412b1a0a945" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const char *name, const int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_xattr_get_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>bufsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00395">395</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, <a class="el" href="lustre__idl_8h_source.html#l03792">OUT_XATTR_GET</a>, and <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>.</p>

</div>
</div>
<a class="anchor" id="aebe71b21857b34855ec80765f8e782e9"></a><!-- doxytag: member="lustre_update.h::out_xattr_set_pack" ref="aebe71b21857b34855ec80765f8e782e9" args="(const struct lu_env *env, struct object_update *update, size_t *max_update_size, const struct lu_fid *fid, const struct lu_buf *buf, const char *name, __u32 flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int out_xattr_set_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structobject__update.html">object_update</a> *&nbsp;</td>
          <td class="paramname"> <em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_update_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00275">275</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>References <a class="el" href="lustreapi_8h_source.html#l00049">ARRAY_SIZE</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="out__lib_8c_source.html#l00146">out_update_pack()</a>, <a class="el" href="lustre__idl_8h_source.html#l03791">OUT_XATTR_SET</a>, and <a class="el" href="out__lib_8c_source.html#l00275">out_xattr_set_pack()</a>.</p>

<p>Referenced by <a class="el" href="out__lib_8c_source.html#l00275">out_xattr_set_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="aa345e2b1216b85fb0cfdb183553dc682"></a><!-- doxytag: member="lustre_update.h::sub_thandle_trans_create" ref="aa345e2b1216b85fb0cfdb183553dc682" args="(const struct lu_env *env, struct top_thandle *top_th, struct sub_thandle *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sub_thandle_trans_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtop__thandle.html">top_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>top_th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsub__thandle.html">sub_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>st</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>. </p>
<p>Create transaction handle for <a class="el" href="structsub__thandle.html">sub_thandle</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>st</em>&nbsp;</td><td><a class="el" href="structsub__thandle.html">sub_thandle</a></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if creation succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if creation fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00567">567</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01137">update_recovery_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="ab7c757e321b4d78db5f5f7fc28d27df0"></a><!-- doxytag: member="lustre_update.h::thandle_get_sub" ref="ab7c757e321b4d78db5f5f7fc28d27df0" args="(const struct lu_env *env, struct thandle *th, const struct dt_object *sub_obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structthandle.html">thandle</a>* thandle_get_sub </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdt__object.html">dt_object</a> *&nbsp;</td>
          <td class="paramname"> <em>sub_obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00454">454</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lu__object_8h_source.html#l00472">lu_object::lo_dev</a>, <a class="el" href="dt__object_8h_source.html#l01743">lu2dt_dev()</a>, and <a class="el" href="update__trans_8c_source.html#l01164">thandle_get_sub_by_dt()</a>.</p>

<p>Referenced by <a class="el" href="lod__sub__object_8c_source.html#l00057">lod_sub_get_thandle()</a>, <a class="el" href="mdd__dir_8c_source.html#l00736">mdd_changelog_store()</a>, and <a class="el" href="mdd__dir_8c_source.html#l00686">mdd_declare_changelog_store()</a>.</p>

</div>
</div>
<a class="anchor" id="a781f9ae7819e282238729641f99ddcf1"></a><!-- doxytag: member="lustre_update.h::thandle_get_sub_by_dt" ref="a781f9ae7819e282238729641f99ddcf1" args="(const struct lu_env *env, struct thandle *th, struct dt_device *sub_dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structthandle.html">thandle</a>* thandle_get_sub_by_dt </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>sub_dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>. </p>
<p>Get sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> from the top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> according to the sub <a class="el" href="structdt__device.html">dt_device</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td><a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> on the top layer. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>sub_dt</em>&nbsp;</td><td>sub <a class="el" href="structdt__device.html">dt_device</a> used to get sub transaction</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a></em>&nbsp;</td><td>of sub transaction if succeed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>PTR_ERR(errno)</em>&nbsp;</td><td>if failed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l01164">1164</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="update__trans_8c_source.html#l01134">create_sub_thandle_with_thandle()</a>, <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="update__trans_8c_source.html#l00423">lookup_sub_thandle()</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__update_8h_source.html#l00329">sub_thandle::st_sub_list</a>, <a class="el" href="lustre__update_8h_source.html#l00321">sub_thandle::st_sub_th</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_wait_submit</a>, <a class="el" href="lustre__update_8h_source.html#l00284">top_multiple_thandle::tmt_master_sub_dt</a>, <a class="el" href="update__trans_8c_source.html#l01112">top_trans_create_tmt()</a>, <a class="el" href="lustre__update_8h_source.html#l00308">top_thandle::tt_master_sub_thandle</a>, and <a class="el" href="lustre__update_8h_source.html#l00310">top_thandle::tt_multiple_thandle</a>.</p>

<p>Referenced by <a class="el" href="mdd__dir_8c_source.html#l01188">mdd_declare_links_add()</a>, <a class="el" href="mdd__dir_8c_source.html#l01149">mdd_links_write()</a>, <a class="el" href="osp__trans_8c_source.html#l01227">osp_get_storage_thandle()</a>, <a class="el" href="osp__sync_8c_source.html#l00357">osp_sync_add_rec()</a>, <a class="el" href="osp__sync_8c_source.html#l00294">osp_sync_declare_add()</a>, and <a class="el" href="lustre__update_8h_source.html#l00454">thandle_get_sub()</a>.</p>

</div>
</div>
<a class="anchor" id="af9ad3167e880c03421c54495b1c62b59"></a><!-- doxytag: member="lustre_update.h::top_multiple_thandle_destroy" ref="af9ad3167e880c03421c54495b1c62b59" args="(struct top_multiple_thandle *tmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void top_multiple_thandle_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>tmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Top multiple <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> destroy. </p>
<p>Destroy multiple <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> and all its sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tmt</em>&nbsp;</td><td><a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> to be destroyed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l01242">1242</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00116">list_del()</a>, <a class="el" href="list_8h_source.html#l00484">list_for_each_entry_safe</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="lustre__update_8h_source.html#l00323">sub_thandle::st_cookie_list</a>, <a class="el" href="lustre__update_8h_source.html#l00329">sub_thandle::st_sub_list</a>, <a class="el" href="lustre__update_8h_source.html#l00315">sub_thandle_cookie::stc_list</a>, <a class="el" href="lustre__update_8h_source.html#l00297">top_multiple_thandle::tmt_magic</a>, <a class="el" href="lustre__update_8h_source.html#l00287">top_multiple_thandle::tmt_sub_thandle_list</a>, and <a class="el" href="lustre__update_8h_source.html#l00282">TOP_THANDLE_MAGIC</a>.</p>

<p>Referenced by <a class="el" href="lustre__update_8h_source.html#l00473">top_multiple_thandle_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a140e292e62e5bbffa28aa42aa52833f4"></a><!-- doxytag: member="lustre_update.h::top_multiple_thandle_get" ref="a140e292e62e5bbffa28aa42aa52833f4" args="(struct top_multiple_thandle *tmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void top_multiple_thandle_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>tmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00468">468</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__update_8h_source.html#l00285">top_multiple_thandle::tmt_refcount</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l00667">distribute_txn_assign_batchid()</a>, <a class="el" href="update__trans_8c_source.html#l00694">distribute_txn_insert_by_batchid()</a>, and <a class="el" href="update__trans_8c_source.html#l00502">sub_thandle_register_commit_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="ab203aee06c45fe66d3ddd8c952b92ed1"></a><!-- doxytag: member="lustre_update.h::top_multiple_thandle_put" ref="ab203aee06c45fe66d3ddd8c952b92ed1" args="(struct top_multiple_thandle *tmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void top_multiple_thandle_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtop__multiple__thandle.html">top_multiple_thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>tmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00473">473</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__update_8h_source.html#l00285">top_multiple_thandle::tmt_refcount</a>, and <a class="el" href="update__trans_8c_source.html#l01242">top_multiple_thandle_destroy()</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l01544">distribute_txn_commit_thread()</a>, <a class="el" href="update__trans_8c_source.html#l00453">sub_trans_commit_cb_internal()</a>, and <a class="el" href="update__trans_8c_source.html#l00935">top_trans_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6f54ce638b398bc7fbb71605afbc6ad"></a><!-- doxytag: member="lustre_update.h::top_trans_create" ref="ac6f54ce638b398bc7fbb71605afbc6ad" args="(const struct lu_env *env, struct dt_device *master_dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structthandle.html">thandle</a>* top_trans_create </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>master_dev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create the top transaction. </p>
<p>Create the top transaction on the master device. It will create a top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> and a sub <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> on the master device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>master_dev</em>&nbsp;</td><td>master_dev the top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> will be created</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pointer</em>&nbsp;</td><td>to the created <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ERR_PTR(errno)</em>&nbsp;</td><td>if creation failed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00598">598</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02047">dt_trans_create()</a>, <a class="el" href="obd__support_8h_source.html#l00705">OBD_ALLOC_GFP</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="dt__object_8h_source.html#l01841">thandle::th_tags</a>, <a class="el" href="dt__object_8h_source.html#l01836">thandle::th_top</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_wait_submit</a>, <a class="el" href="lustre__update_8h_source.html#l00308">top_thandle::tt_master_sub_thandle</a>, and <a class="el" href="lustre__update_8h_source.html#l00306">top_thandle::tt_super</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, and <a class="el" href="lod__dev_8c_source.html#l01208">lod_trans_create()</a>.</p>

</div>
</div>
<a class="anchor" id="a8c42630ece7c32f323382e2b12371a69"></a><!-- doxytag: member="lustre_update.h::top_trans_start" ref="a8c42630ece7c32f323382e2b12371a69" args="(const struct lu_env *env, struct dt_device *master_dev, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int top_trans_start </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>master_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>start the top transaction. </p>
<p>Start all of its sub transactions, then start master sub transaction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>master_dev</em>&nbsp;</td><td>master_dev the top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> will be start </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if transaction start succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if start fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00784">784</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l02054">dt_trans_start()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="update__trans_8c_source.html#l00750">prepare_multiple_node_trans()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__update_8h_source.html#l00332">sub_thandle::st_started</a>, <a class="el" href="lustre__update_8h_source.html#l00321">sub_thandle::st_sub_th</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_local</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="dt__object_8h_source.html#l01841">thandle::th_tags</a>, <a class="el" href="lustre__update_8h_source.html#l00287">top_multiple_thandle::tmt_sub_thandle_list</a>, <a class="el" href="lustre__update_8h_source.html#l00308">top_thandle::tt_master_sub_thandle</a>, <a class="el" href="lustre__update_8h_source.html#l00310">top_thandle::tt_multiple_thandle</a>, and <a class="el" href="lustre__update_8h_source.html#l00306">top_thandle::tt_super</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, and <a class="el" href="lod__dev_8c_source.html#l01230">lod_trans_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a165db60fce8230df959247137d37567d"></a><!-- doxytag: member="lustre_update.h::top_trans_stop" ref="a165db60fce8230df959247137d37567d" args="(const struct lu_env *env, struct dt_device *master_dev, struct thandle *th)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int top_trans_stop </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__device.html">dt_device</a> *&nbsp;</td>
          <td class="paramname"> <em>master_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structthandle.html">thandle</a> *&nbsp;</td>
          <td class="paramname"> <em>th</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop the top transaction. </p>
<p>Stop the transaction on the master device first, then stop transactions on other sub devices.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>master_dev</em>&nbsp;</td><td>master_dev the top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> will be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>th</em>&nbsp;</td><td>top <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if stop transaction succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if stop transaction fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__trans_8c_source.html#l00935">935</a> of file <a class="el" href="update__trans_8c_source.html">update_trans.c</a>.</p>

<p>References <a class="el" href="libcfs__debug_8h_source.html#l00278">CERROR</a>, <a class="el" href="dt__object_8h_source.html#l01723">dt_device::dd_lu_dev</a>, <a class="el" href="dt__object_8h_source.html#l02070">dt_trans_stop()</a>, <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="small__write_8c_source.html#l00044">GOTO</a>, <a class="el" href="utils_2wirehdr_8c_source.html#l00044">LASSERT</a>, <a class="el" href="lu__object_8h_source.html#l00287">lu_device::ld_obd</a>, <a class="el" href="libcfs__private_8h_source.html#l00309">likely</a>, <a class="el" href="list_8h_source.html#l00161">list_empty()</a>, <a class="el" href="list_8h_source.html#l00459">list_for_each_entry</a>, <a class="el" href="update__trans_8c_source.html#l00423">lookup_sub_thandle()</a>, <a class="el" href="llog__test_8c_source.html#l00947">lur</a>, <a class="el" href="lustre__idl_8h_source.html#l04042">llog_update_record::lur_update_rec</a>, <a class="el" href="obd__support_8h_source.html#l00830">OBD_FREE_PTR</a>, <a class="el" href="obd_8h_source.html#l00599">obd_device::obd_name</a>, <a class="el" href="update__trans_8c_source.html#l00343">prepare_writing_updates()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__update_8h_source.html#l00322">sub_thandle::st_dt</a>, <a class="el" href="lustre__update_8h_source.html#l00332">sub_thandle::st_started</a>, <a class="el" href="lustre__update_8h_source.html#l00321">sub_thandle::st_sub_th</a>, <a class="el" href="update__trans_8c_source.html#l00453">sub_trans_commit_cb_internal()</a>, <a class="el" href="update__trans_8c_source.html#l00167">sub_updates_write()</a>, <a class="el" href="tgt__internal_8h_source.html#l00095">tgt_th_info()</a>, <a class="el" href="dt__object_8h_source.html#l01828">thandle::th_dev</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_local</a>, <a class="el" href="dt__object_8h_source.html#l01845">thandle::th_result</a>, <a class="el" href="dt__object_8h_source.html#l01848">thandle::th_sync</a>, <a class="el" href="dt__object_8h_source.html#l01841">thandle::th_tags</a>, <a class="el" href="lustre__update_8h_source.html#l00290">top_multiple_thandle::tmt_commit_list</a>, <a class="el" href="lustre__update_8h_source.html#l00284">top_multiple_thandle::tmt_master_sub_dt</a>, <a class="el" href="lustre__update_8h_source.html#l00296">top_multiple_thandle::tmt_result</a>, <a class="el" href="lustre__update_8h_source.html#l00287">top_multiple_thandle::tmt_sub_thandle_list</a>, <a class="el" href="lustre__update_8h_source.html#l00292">top_multiple_thandle::tmt_update_records</a>, <a class="el" href="update__trans_8c_source.html#l00844">top_check_write_updates()</a>, <a class="el" href="lustre__update_8h_source.html#l00473">top_multiple_thandle_put()</a>, <a class="el" href="update__trans_8c_source.html#l00912">top_trans_wait_result()</a>, <a class="el" href="lustre__update_8h_source.html#l00308">top_thandle::tt_master_sub_thandle</a>, <a class="el" href="lustre__update_8h_source.html#l00310">top_thandle::tt_multiple_thandle</a>, <a class="el" href="lustre__update_8h_source.html#l00306">top_thandle::tt_super</a>, <a class="el" href="tgt__internal_8h_source.html#l00066">tgt_thread_info::tti_transno</a>, <a class="el" href="lustre__update_8h_source.html#l00277">thandle_update_records::tur_update_params</a>, <a class="el" href="lustre__update_8h_source.html#l00273">thandle_update_records::tur_update_records</a>, <a class="el" href="libcfs__private_8h_source.html#l00310">unlikely</a>, <a class="el" href="lustre__idl_8h_source.html#l04023">update_records::ur_master_transno</a>, and <a class="el" href="lustre__idl_8h_source.html#l04030">update_records::ur_param_count</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l01285">distribute_txn_replay_handle()</a>, and <a class="el" href="lod__dev_8c_source.html#l01288">lod_trans_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ad210f707a77f4c3b34e784df2fa88f02"></a><!-- doxytag: member="lustre_update.h::tur_update_extend" ref="ad210f707a77f4c3b34e784df2fa88f02" args="(struct thandle_update_records *tur, size_t new_op_size, size_t new_param_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tur_update_extend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>tur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>new_op_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>new_param_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extend update records. </p>
<p>Extend update records in <a class="el" href="structthandle.html" title="This is the general purpose transaction handle.">thandle</a> to make sure it is able to hold the update with certain <a class="el" href="structupdate__op.html">update_op</a> and params size.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tur</em>&nbsp;</td><td><a class="el" href="structthandle__update__records.html" title="Attached in the thandle to record the updates for distribute distribution.">thandle_update_records</a> to be extend </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>new_op_size</em>&nbsp;</td><td><a class="el" href="structupdate__op.html">update_op</a> size of the update record </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>new_param_size</em>&nbsp;</td><td>params size of the update record</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the <a class="el" href="structupdate__records.html">update_records</a> is being extended. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if the <a class="el" href="structupdate__records.html">update_records</a> is not being extended. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l01054">1054</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="flock_8c_source.html#l00061">ENTRY</a>, <a class="el" href="lustre__update_8h_source.html#l00154">llog_update_record_size()</a>, <a class="el" href="libcfs__debug_8h_source.html#l00352">RETURN</a>, <a class="el" href="lustre__update_8h_source.html#l00278">thandle_update_records::tur_update_param_count</a>, <a class="el" href="lustre__update_8h_source.html#l00277">thandle_update_records::tur_update_params</a>, <a class="el" href="lustre__update_8h_source.html#l00279">thandle_update_records::tur_update_params_buf_size</a>, <a class="el" href="update__records_8c_source.html#l01126">tur_update_params_extend()</a>, <a class="el" href="lustre__update_8h_source.html#l00273">thandle_update_records::tur_update_records</a>, <a class="el" href="lustre__update_8h_source.html#l00274">thandle_update_records::tur_update_records_buf_size</a>, <a class="el" href="update__records_8c_source.html#l01017">tur_update_records_extend()</a>, <a class="el" href="update__records_8c_source.html#l00052">UPDATE_PARAMS_BUFFER_SIZE</a>, <a class="el" href="lustre__update_8h_source.html#l00045">update_params_size()</a>, and <a class="el" href="update__records_8c_source.html#l00051">UPDATE_RECORDS_BUFFER_SIZE</a>.</p>

</div>
</div>
<a class="anchor" id="a23a3a01eea42de3cf2cc943246e9b157"></a><!-- doxytag: member="lustre_update.h::tur_update_params_extend" ref="a23a3a01eea42de3cf2cc943246e9b157" args="(struct thandle_update_records *tur, size_t new_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tur_update_params_extend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>tur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>new_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extend update params. </p>
<p>Extend <a class="el" href="structupdate__params.html">update_params</a> to the new size in <a class="el" href="structthandle__update__records.html" title="Attached in the thandle to record the updates for distribute distribution.">thandle_update_records</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tur</em>&nbsp;</td><td><a class="el" href="structthandle__update__records.html" title="Attached in the thandle to record the updates for distribute distribution.">thandle_update_records</a> where <a class="el" href="structupdate__params.html">update_params</a> will be extended. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if extension succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if extension fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l01126">1126</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, <a class="el" href="lustre__update_8h_source.html#l00277">thandle_update_records::tur_update_params</a>, and <a class="el" href="lustre__update_8h_source.html#l00279">thandle_update_records::tur_update_params_buf_size</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l01054">tur_update_extend()</a>.</p>

</div>
</div>
<a class="anchor" id="a1015e587064445a57adea2dc3f93c47e"></a><!-- doxytag: member="lustre_update.h::tur_update_records_extend" ref="a1015e587064445a57adea2dc3f93c47e" args="(struct thandle_update_records *tur, size_t new_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tur_update_records_extend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthandle__update__records.html">thandle_update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>tur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>new_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extend update records. </p>
<p>Extend <a class="el" href="structupdate__records.html">update_records</a> to the new size in <a class="el" href="structthandle__update__records.html" title="Attached in the thandle to record the updates for distribute distribution.">thandle_update_records</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tur</em>&nbsp;</td><td><a class="el" href="structthandle__update__records.html" title="Attached in the thandle to record the updates for distribute distribution.">thandle_update_records</a> where <a class="el" href="structupdate__records.html">update_records</a> will be extended. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if extension succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if extension fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l01017">1017</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="obd__support_8h_source.html#l00747">OBD_ALLOC_LARGE</a>, <a class="el" href="obd__support_8h_source.html#l00783">OBD_FREE_LARGE</a>, <a class="el" href="lustre__update_8h_source.html#l00273">thandle_update_records::tur_update_records</a>, and <a class="el" href="lustre__update_8h_source.html#l00274">thandle_update_records::tur_update_records_buf_size</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l00343">prepare_writing_updates()</a>, and <a class="el" href="update__records_8c_source.html#l01054">tur_update_extend()</a>.</p>

</div>
</div>
<a class="anchor" id="a87394f6e5041a5b45b126e468d7b838d"></a><!-- doxytag: member="lustre_update.h::update_op_next_op" ref="a87394f6e5041a5b45b126e468d7b838d" args="(const struct update_op *uop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structupdate__op.html">update_op</a>* update_op_next_op </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__op.html">update_op</a> *&nbsp;</td>
          <td class="paramname"> <em>uop</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00105">105</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03997">update_op::uop_param_count</a>, and <a class="el" href="lustre__update_8h_source.html#l00099">update_op_size()</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l00167">sub_updates_write()</a>, <a class="el" href="lustre__update_8h_source.html#l00162">update_ops_get_op()</a>, <a class="el" href="lustre__update_8h_source.html#l00111">update_ops_size()</a>, <a class="el" href="update__records_8c_source.html#l00063">update_records_dump()</a>, and <a class="el" href="update__recovery_8c_source.html#l01137">update_recovery_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="af47faf7c6c34f6ec15cb8f989cb91992"></a><!-- doxytag: member="lustre_update.h::update_op_size" ref="af47faf7c6c34f6ec15cb8f989cb91992" args="(unsigned int param_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t update_op_size </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>param_count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00099">99</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>.</p>

<p>Referenced by <a class="el" href="lustre__update_8h_source.html#l00105">update_op_next_op()</a>, <a class="el" href="lustre__update_8h_source.html#l00111">update_ops_size()</a>, <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>, and <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="af41e2b72019c67f5f929c6a944d0801e"></a><!-- doxytag: member="lustre_update.h::update_op_str" ref="af41e2b72019c67f5f929c6a944d0801e" args="(__u16 opcode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* update_op_str </td>
          <td>(</td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>opcode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="out__lib_8c_source.html#l00043">43</a> of file <a class="el" href="out__lib_8c_source.html">out_lib.c</a>.</p>

<p>Referenced by <a class="el" href="osp__trans_8c_source.html#l00222">object_update_request_dump()</a>, <a class="el" href="update__records_8c_source.html#l00063">update_records_dump()</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d5ea619cc4563262c93308d5550d9b1"></a><!-- doxytag: member="lustre_update.h::update_ops_get_op" ref="a0d5ea619cc4563262c93308d5550d9b1" args="(const struct update_ops *ops, unsigned int index, unsigned int update_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structupdate__op.html">update_op</a>* update_ops_get_op </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>update_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00162">162</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l04002">update_ops::uops_op</a>, and <a class="el" href="lustre__update_8h_source.html#l00105">update_op_next_op()</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a74f4843dd8006467b2e5386f038b2805"></a><!-- doxytag: member="lustre_update.h::update_ops_size" ref="a74f4843dd8006467b2e5386f038b2805" args="(const struct update_ops *ops, unsigned int update_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t update_ops_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>update_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00111">111</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l04002">update_ops::uops_op</a>, <a class="el" href="lustre__update_8h_source.html#l00105">update_op_next_op()</a>, and <a class="el" href="lustre__update_8h_source.html#l00099">update_op_size()</a>.</p>

<p>Referenced by <a class="el" href="lustre__update_8h_source.html#l00126">update_records_get_params()</a>, and <a class="el" href="lustre__update_8h_source.html#l00134">update_records_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a31a578b3fb7d88f8ccf86225440b3bd2"></a><!-- doxytag: member="lustre_update.h::update_params_get_param" ref="a31a578b3fb7d88f8ccf86225440b3bd2" args="(const struct update_params *params, unsigned int index, unsigned int param_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structobject__update__param.html">object_update_param</a>* update_params_get_param </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>param_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00064">64</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03819">object_update_param_size()</a>, and <a class="el" href="lustre__idl_8h_source.html#l04006">update_params::up_params</a>.</p>

<p>Referenced by <a class="el" href="lustre__update_8h_source.html#l00082">update_params_get_param_buf()</a>, <a class="el" href="update__records_8c_source.html#l00063">update_records_dump()</a>, and <a class="el" href="update__records_8c_source.html#l00128">update_records_param_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a80428c09a2406a6e7368a5d1e41339af"></a><!-- doxytag: member="lustre_update.h::update_params_get_param_buf" ref="a80428c09a2406a6e7368a5d1e41339af" args="(const struct update_params *params, __u16 index, unsigned int param_count, __u16 *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* update_params_get_param_buf </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u16 *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00082">82</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03815">object_update_param::oup_buf</a>, <a class="el" href="lustre__idl_8h_source.html#l03812">object_update_param::oup_len</a>, and <a class="el" href="lustre__update_8h_source.html#l00064">update_params_get_param()</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l00825">update_recovery_attr_set()</a>, <a class="el" href="update__recovery_8c_source.html#l00737">update_recovery_create()</a>, <a class="el" href="update__recovery_8c_source.html#l00962">update_recovery_index_delete()</a>, <a class="el" href="update__recovery_8c_source.html#l00908">update_recovery_index_insert()</a>, <a class="el" href="update__recovery_8c_source.html#l00991">update_recovery_write()</a>, <a class="el" href="update__recovery_8c_source.html#l01028">update_recovery_xattr_del()</a>, and <a class="el" href="update__recovery_8c_source.html#l00861">update_recovery_xattr_set()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1178c4f1e649ee44d63f24ce145c1e1"></a><!-- doxytag: member="lustre_update.h::update_params_size" ref="ab1178c4f1e649ee44d63f24ce145c1e1" args="(const struct update_params *params, unsigned int param_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t update_params_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>param_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00045">45</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03819">object_update_param_size()</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="lustre__idl_8h_source.html#l04006">update_params::up_params</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l00343">prepare_writing_updates()</a>, <a class="el" href="update__records_8c_source.html#l01054">tur_update_extend()</a>, <a class="el" href="update__records_8c_source.html#l00128">update_records_param_pack()</a>, and <a class="el" href="lustre__update_8h_source.html#l00134">update_records_size()</a>.</p>

</div>
</div>
<a class="anchor" id="aa11aad46fa862adb0b2d1a6790c20c36"></a><!-- doxytag: member="lustre_update.h::update_records_attr_set_pack" ref="aa11aad46fa862adb0b2d1a6790c20c36" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const struct lu_attr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_attr_set_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack attr set update. </p>
<p>Pack attr_set update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to set attr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of attr set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00410">410</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lustre__obdo_8h_source.html#l00048">lustre_set_wire_obdo()</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="linux-obdo_8c_source.html#l00052">obdo_from_la()</a>, <a class="el" href="lustre__idl_8h_source.html#l03789">OUT_ATTR_SET</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, <a class="el" href="tgt__internal_8h_source.html#l00271">update_env_info()</a>, <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>, and <a class="el" href="tgt__internal_8h_source.html#l00262">update_thread_info::uti_obdo</a>.</p>

</div>
</div>
<a class="anchor" id="a4bf05d79caeadc1273a5a62b66232154"></a><!-- doxytag: member="lustre_update.h::update_records_attr_set_size" ref="a4bf05d79caeadc1273a5a62b66232154" args="(const struct lu_env *env, const struct lu_fid *fid, const struct lu_attr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_attr_set_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate attr set update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to set attr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of attr set</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of attr set update. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00382">382</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a536f2912b198af6ae7b47e81fb5123cb"></a><!-- doxytag: member="lustre_update.h::update_records_create_pack" ref="a536f2912b198af6ae7b47e81fb5123cb" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const struct lu_attr *attr, const struct dt_allocation_hint *hint, struct dt_object_format *dof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_create_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack create update. </p>
<p>Pack create update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of the object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hint</em>&nbsp;</td><td>creation hint </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>creation format information</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00327">327</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l00370">dt_allocation_hint::dah_parent</a>, <a class="el" href="dt__object_8h_source.html#l01750">dt_object::do_lu</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="lu__object_8h_source.html#l00439">lu_attr::la_valid</a>, <a class="el" href="lu__object_8h_source.html#l00770">lu_object_fid()</a>, <a class="el" href="lustre__obdo_8h_source.html#l00048">lustre_set_wire_obdo()</a>, <a class="el" href="lustre__idl_8h_source.html#l03383">obdo::o_valid</a>, <a class="el" href="linux-obdo_8c_source.html#l00052">obdo_from_la()</a>, <a class="el" href="lustre__idl_8h_source.html#l03785">OUT_CREATE</a>, <a class="el" href="tgt__internal_8h_source.html#l00271">update_env_info()</a>, <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>, and <a class="el" href="tgt__internal_8h_source.html#l00262">update_thread_info::uti_obdo</a>.</p>

</div>
</div>
<a class="anchor" id="a326d1ece7c3e09d476144648cd9c92d3"></a><!-- doxytag: member="lustre_update.h::update_records_create_size" ref="a326d1ece7c3e09d476144648cd9c92d3" args="(const struct lu_env *env, const struct lu_fid *fid, const struct lu_attr *attr, const struct dt_allocation_hint *hint, struct dt_object_format *dof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_create_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__attr.html">lu_attr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdt__allocation__hint.html">dt_allocation_hint</a> *&nbsp;</td>
          <td class="paramname"> <em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdt__object__format.html">dt_object_format</a> *&nbsp;</td>
          <td class="paramname"> <em>dof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate create update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>attr</em>&nbsp;</td><td>attribute of the object to be created </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hint</em>&nbsp;</td><td>creation hint </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dof</em>&nbsp;</td><td>creation format information</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of create update. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00284">284</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="dt__object_8h_source.html#l00370">dt_allocation_hint::dah_parent</a>, and <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="ab95b7122b03937df0e071bb72d47fd0a"></a><!-- doxytag: member="lustre_update.h::update_records_get_params" ref="ab95b7122b03937df0e071bb72d47fd0a" args="(const struct update_records *record)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structupdate__params.html">update_params</a>* update_records_get_params </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__records.html">update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>record</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00126">126</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="lustre__update_8h_source.html#l00111">update_ops_size()</a>, <a class="el" href="lustre__idl_8h_source.html#l04031">update_records::ur_ops</a>, and <a class="el" href="lustre__idl_8h_source.html#l04029">update_records::ur_update_count</a>.</p>

<p>Referenced by <a class="el" href="update__trans_8c_source.html#l00343">prepare_writing_updates()</a>, <a class="el" href="update__trans_8c_source.html#l00167">sub_updates_write()</a>, <a class="el" href="update__records_8c_source.html#l00063">update_records_dump()</a>, <a class="el" href="lustre__update_8h_source.html#l00134">update_records_size()</a>, and <a class="el" href="update__recovery_8c_source.html#l01137">update_recovery_exec()</a>.</p>

</div>
</div>
<a class="anchor" id="ad37f503135c466368b42b72fc0061fe1"></a><!-- doxytag: member="lustre_update.h::update_records_index_delete_pack" ref="ad37f503135c466368b42b72fc0061fe1" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_index_delete_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack index delete update. </p>
<p>Pack index delete update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|ount]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of deletion</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00716">716</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03795">OUT_INDEX_DELETE</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a178056dec37f7d672b8c2989b2b3c24d"></a><!-- doxytag: member="lustre_update.h::update_records_index_delete_size" ref="a178056dec37f7d672b8c2989b2b3c24d" args="(const struct lu_env *env, const struct lu_fid *fid, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_index_delete_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate index delete update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of deletion</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>the</em>&nbsp;</td><td>size of index delete update </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00688">688</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ba66c5a47966557f3ac9310ff1774dd"></a><!-- doxytag: member="lustre_update.h::update_records_index_insert_pack" ref="a2ba66c5a47966557f3ac9310ff1774dd" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const struct dt_rec *rec, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_index_insert_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack index insert update. </p>
<p>Pack index insert update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>op_count</em>&nbsp;</td><td>pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>param_count</em>&nbsp;</td><td>pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to insert index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record of insertion </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of insertion</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00649">649</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lustre__idl_8h_source.html#l00765">fid_cpu_to_le()</a>, <a class="el" href="lustre__idl_8h_source.html#l03794">OUT_INDEX_INSERT</a>, <a class="el" href="dt__object_8h_source.html#l02684">dt_insert_rec::rec_fid</a>, <a class="el" href="dt__object_8h_source.html#l02689">dt_insert_rec::rec_type</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="ab0351ffc2e1e9c70f887fbfa8181ab0e"></a><!-- doxytag: member="lustre_update.h::update_records_index_insert_size" ref="ab0351ffc2e1e9c70f887fbfa8181ab0e" args="(const struct lu_env *env, const struct lu_fid *fid, const struct dt_rec *rec, const struct dt_key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_index_insert_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct dt_rec *&nbsp;</td>
          <td class="paramname"> <em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="dt__object_8c.html#aa088e3c821ba20ee0bd6bad2f8ece91c">dt_key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate index insert update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to insert index </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rec</em>&nbsp;</td><td>record of insertion </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>key of insertion</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>the</em>&nbsp;</td><td>size of index insert update. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00618">618</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="update__records_8c_source.html#l00618">update_records_index_insert_size()</a>, and <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l00618">update_records_index_insert_size()</a>.</p>

</div>
</div>
<a class="anchor" id="af2bca6df33e94f5dba3cc73e8020bd66"></a><!-- doxytag: member="lustre_update.h::update_records_noop_pack" ref="af2bca6df33e94f5dba3cc73e8020bd66" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_noop_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack noop update. </p>
<p>Pack no op update into update records. Note: no op means the update does not need do anything, which is only used in test case to verify large size record.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to add reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00499">499</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03800">OUT_NOOP</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="af464d53afef74f1b3918d3571fa2581e"></a><!-- doxytag: member="lustre_update.h::update_records_object_destroy_pack" ref="af464d53afef74f1b3918d3571fa2581e" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_object_destroy_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack object destroy update. </p>
<p>Pack object destroy update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00593">593</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03786">OUT_DESTROY</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a8bb4f27514127c7fddfed05269fddd6e"></a><!-- doxytag: member="lustre_update.h::update_records_object_destroy_size" ref="a8bb4f27514127c7fddfed05269fddd6e" args="(const struct lu_env *env, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_object_destroy_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate object destroy update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of object destroy update. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00569">569</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c8abdcf750282a719ba9c11582a210e"></a><!-- doxytag: member="lustre_update.h::update_records_punch_pack" ref="a0c8abdcf750282a719ba9c11582a210e" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, __u64 start, __u64 end)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_punch_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack punch. </p>
<p>Pack punch update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to write into </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>start offset of punch </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>end</em>&nbsp;</td><td>end offet of punch</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00958">958</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="lustre__idl_8h_source.html#l03798">OUT_PUNCH</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a22158bbaf3c1c6e48822b0046db9532e"></a><!-- doxytag: member="lustre_update.h::update_records_punch_size" ref="a22158bbaf3c1c6e48822b0046db9532e" args="(const struct lu_env *env, const struct lu_fid *fid, __u64 start, __u64 end)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_punch_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate size of punch update. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to write into </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>start offset of punch </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>end</em>&nbsp;</td><td>end offet of punch</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of update punch. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00929">929</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5c1ba7c90bb603fa32b3ce2cc3c80f9"></a><!-- doxytag: member="lustre_update.h::update_records_ref_add_pack" ref="aa5c1ba7c90bb603fa32b3ce2cc3c80f9" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_ref_add_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack ref add update. </p>
<p>Pack ref add update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to add reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00465">465</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03787">OUT_REF_ADD</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="ad64a0bb9fb472f09125a383580d779ed"></a><!-- doxytag: member="lustre_update.h::update_records_ref_add_size" ref="ad64a0bb9fb472f09125a383580d779ed" args="(const struct lu_env *env, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_ref_add_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate ref add update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to add reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of ref_add udpate. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00441">441</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d679792a3b5e49d0170a1ce55df8ce4"></a><!-- doxytag: member="lustre_update.h::update_records_ref_del_pack" ref="a5d679792a3b5e49d0170a1ce55df8ce4" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_ref_del_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack ref del update. </p>
<p>Pack ref del update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>param_count</em>&nbsp;</td><td>pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00546">546</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03788">OUT_REF_DEL</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a63d3ba51338da1e9d0ab76f3838d2330"></a><!-- doxytag: member="lustre_update.h::update_records_ref_del_size" ref="a63d3ba51338da1e9d0ab76f3838d2330" args="(const struct lu_env *env, const struct lu_fid *fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_ref_del_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate ref del update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete reference</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of ref_del update. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00522">522</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="adb632809bd21fc667f777e79c2cb7548"></a><!-- doxytag: member="lustre_update.h::update_records_size" ref="adb632809bd21fc667f777e79c2cb7548" args="(const struct update_records *record)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t update_records_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structupdate__records.html">update_records</a> *&nbsp;</td>
          <td class="paramname"> <em>record</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lustre__update_8h_source.html#l00134">134</a> of file <a class="el" href="lustre__update_8h_source.html">lustre_update.h</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l01295">cfs_size_round()</a>, <a class="el" href="lustre__user_8h_source.html#l01032">offsetof</a>, <a class="el" href="lustre__update_8h_source.html#l00111">update_ops_size()</a>, <a class="el" href="lustre__update_8h_source.html#l00045">update_params_size()</a>, <a class="el" href="lustre__update_8h_source.html#l00126">update_records_get_params()</a>, <a class="el" href="lustre__idl_8h_source.html#l04031">update_records::ur_ops</a>, <a class="el" href="lustre__idl_8h_source.html#l04030">update_records::ur_param_count</a>, and <a class="el" href="lustre__idl_8h_source.html#l04029">update_records::ur_update_count</a>.</p>

<p>Referenced by <a class="el" href="update__recovery_8c_source.html#l00307">dtrq_append_updates()</a>, <a class="el" href="lustre__update_8h_source.html#l00154">llog_update_record_size()</a>, and <a class="el" href="llog__swab_8c_source.html#l00146">lustre_swab_llog_rec()</a>.</p>

</div>
</div>
<a class="anchor" id="ac13bcde2bee8f3032877e62eaef1841f"></a><!-- doxytag: member="lustre_update.h::update_records_write_pack" ref="ac13bcde2bee8f3032877e62eaef1841f" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const struct lu_buf *buf, __u64 pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_write_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack write update. </p>
<p>Pack write update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to write into </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer to write which includes an embedded size field </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>offet in the object to start writing at</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00896">896</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00059">cpu_to_le64</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03796">OUT_WRITE</a>, <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>, and <a class="el" href="update__records_8c_source.html#l00896">update_records_write_pack()</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l00896">update_records_write_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a613a028497e370001345de3c47ee5b"></a><!-- doxytag: member="lustre_update.h::update_records_write_size" ref="a9a613a028497e370001345de3c47ee5b" args="(const struct lu_env *env, const struct lu_fid *fid, const struct lu_buf *buf, __u64 pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_write_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uapi__kernelcomm_8h.html#adc2adfee3162ec44eb82da5f869a806c">__u64</a>&nbsp;</td>
          <td class="paramname"> <em>pos</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate write update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to write into </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer to write which includes an embedded size field </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pos</em>&nbsp;</td><td>offet in the object to start writing at</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of write udpate. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00866">866</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>, and <a class="el" href="update__records_8c_source.html#l00866">update_records_write_size()</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l00866">update_records_write_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a79c727b585d2b96accddc19a646fecb5"></a><!-- doxytag: member="lustre_update.h::update_records_xattr_del_pack" ref="a79c727b585d2b96accddc19a646fecb5" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_xattr_del_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack xattr delete update. </p>
<p>Pack xattr delete update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00837">837</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l03797">OUT_XATTR_DEL</a>, <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="a6c4c7df106878116b11868e232551086"></a><!-- doxytag: member="lustre_update.h::update_records_xattr_del_size" ref="a6c4c7df106878116b11868e232551086" args="(const struct lu_env *env, const struct lu_fid *fid, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_xattr_del_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate xattr delete update size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to delete xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of xattr delet updatee. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00809">809</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="cascading__rw_8c_source.html#l00061">size</a>, and <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>.</p>

</div>
</div>
<a class="anchor" id="ab5cbaa54ac4deb3eb969c29688a56f28"></a><!-- doxytag: member="lustre_update.h::update_records_xattr_set_pack" ref="ab5cbaa54ac4deb3eb969c29688a56f28" args="(const struct lu_env *env, struct update_ops *ops, unsigned int *op_count, size_t *max_ops_size, struct update_params *params, unsigned int *param_count, size_t *max_param_size, const struct lu_fid *fid, const struct lu_buf *buf, const char *name, __u32 flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_records_xattr_set_pack </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__ops.html">update_ops</a> *&nbsp;</td>
          <td class="paramname"> <em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>op_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_ops_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structupdate__params.html">update_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>param_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>max_param_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pack xattr set update. </p>
<p>Pack xattr set update into update records.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ops</em>&nbsp;</td><td>ur_ops in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>op_count pointer to the count of ops </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_op_size maximum size of the update </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>ur_params in update records </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>param_count pointer to the count of params </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in|out]</em>&nbsp;</td><td>max_param_size maximum size of the parameter </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to set xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>xattr to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flag</em>&nbsp;</td><td>flag for setting xattr</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if packing succeeds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negative</em>&nbsp;</td><td>errno if packing fails. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00777">777</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="byteorder_8h_source.html#l00057">cpu_to_le32</a>, <a class="el" href="lu__object_8h_source.html#l01335">lu_buf::lb_buf</a>, <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="lustre__idl_8h_source.html#l03791">OUT_XATTR_SET</a>, <a class="el" href="update__records_8c_source.html#l00184">update_records_update_pack()</a>, and <a class="el" href="update__records_8c_source.html#l00777">update_records_xattr_set_pack()</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l00777">update_records_xattr_set_pack()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4e8a1f313a91e3776612c227750ac27"></a><!-- doxytag: member="lustre_update.h::update_records_xattr_set_size" ref="ac4e8a1f313a91e3776612c227750ac27" args="(const struct lu_env *env, const struct lu_fid *fid, const struct lu_buf *buf, const char *name, __u32 flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t update_records_xattr_set_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlu__env.html">lu_env</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__buf.html">lu_buf</a> *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate xattr set size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>execution environment </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>FID of the object to set xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>xattr to be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>name of the xattr </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flag</em>&nbsp;</td><td>flag for setting xattr</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>of xattr set update. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update__records_8c_source.html#l00746">746</a> of file <a class="el" href="update__records_8c_source.html">update_records.c</a>.</p>

<p>References <a class="el" href="lu__object_8h_source.html#l01336">lu_buf::lb_len</a>, <a class="el" href="update__records_8c_source.html#l00257">update_records_update_size()</a>, and <a class="el" href="update__records_8c_source.html#l00746">update_records_xattr_set_size()</a>.</p>

<p>Referenced by <a class="el" href="update__records_8c_source.html#l00746">update_records_xattr_set_size()</a>.</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:54:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
