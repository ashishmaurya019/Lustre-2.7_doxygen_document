<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lnet_md_t Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lnet_md_t Struct Reference<br/>
<small>
[<a class="el" href="group__lnet__md.html">Memory descriptors</a>]</small>
</h1><!-- doxytag: class="lnet_md_t" -->
<p>Defines the visible parts of a memory descriptor.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for lnet_md_t:</div>
<div class="dynsection">
<div class="center"><img src="structlnet__md__t__coll__graph.png" border="0" usemap="#lnet__md__t_coll__map" alt="Collaboration graph"/></div>
<map name="lnet__md__t_coll__map" id="lnet__md__t_coll__map">
<area shape="rect" id="node2" href="structlnet__handle__any__t.html" title="Objects maintained by the LNet are accessed through handles." alt="" coords="5,5,149,91"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html#a11130deb533aae021364cdec65dd1935">start</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specify the memory region associated with the memory descriptor.  <a href="#a11130deb533aae021364cdec65dd1935"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a693d7e99378bc53774ee5d96c980fe7b"></a><!-- doxytag: member="lnet_md_t::length" ref="a693d7e99378bc53774ee5d96c980fe7b" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>length</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html#a60130fbc7253f41b3b6cd8da947ff023">threshold</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specifies the maximum number of operations that can be performed on the memory descriptor.  <a href="#a60130fbc7253f41b3b6cd8da947ff023"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html#a53e1bf666dcf165f82875c88870a09db">max_size</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specifies the largest incoming request that the memory descriptor should respond to.  <a href="#a53e1bf666dcf165f82875c88870a09db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13">options</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specifies the behavior of the memory descriptor.  <a href="#af37df46d5729b86dd662a2bcecb2fe13"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html#a57f16fe0f86a1e86553eb0a1eee4bd58">user_ptr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A user-specified value that is associated with the memory descriptor.  <a href="#a57f16fe0f86a1e86553eb0a1eee4bd58"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_eq_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlnet__md__t.html#a568b34498bd37af0973c749f5e856a3b">eq_handle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A handle for the event queue used to log the operations performed on the memory region.  <a href="#a568b34498bd37af0973c749f5e856a3b"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Defines the visible parts of a memory descriptor. </p>
<p>Values of this type are used to initialize memory descriptors. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00347">347</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a568b34498bd37af0973c749f5e856a3b"></a><!-- doxytag: member="lnet_md_t::eq_handle" ref="a568b34498bd37af0973c749f5e856a3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlnet__handle__any__t.html">lnet_handle_eq_t</a> <a class="el" href="structlnet__md__t.html#a568b34498bd37af0973c749f5e856a3b">lnet_md_t::eq_handle</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A handle for the event queue used to log the operations performed on the memory region. </p>
<p>If this argument is a NULL handle (i.e. nullified by LNetInvalidateHandle()), operations performed on this memory descriptor are not logged. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00440">440</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-md_8c_source.html#l00263">LNetMDAttach()</a>, <a class="el" href="lib-md_8c_source.html#l00343">LNetMDBind()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, and <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="a53e1bf666dcf165f82875c88870a09db"></a><!-- doxytag: member="lnet_md_t::max_size" ref="a53e1bf666dcf165f82875c88870a09db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structlnet__md__t.html#a53e1bf666dcf165f82875c88870a09db">lnet_md_t::max_size</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies the largest incoming request that the memory descriptor should respond to. </p>
<p>When the unused portion of a MD (length - local offset) falls below this value, the MD becomes inactive and does not respond to further operations. This value is only used if the LNET_MD_MAX_SIZE option is set. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00389">389</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="af37df46d5729b86dd662a2bcecb2fe13"></a><!-- doxytag: member="lnet_md_t::options" ref="af37df46d5729b86dd662a2bcecb2fe13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="structlnet__md__t.html#af37df46d5729b86dd662a2bcecb2fe13">lnet_md_t::options</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies the behavior of the memory descriptor. </p>
<p>A bitwise OR of the following values can be used:</p>
<ul>
<li>LNET_MD_OP_PUT: The LNet PUT operation is allowed on this MD.</li>
<li>LNET_MD_OP_GET: The LNet GET operation is allowed on this MD.</li>
<li>LNET_MD_MANAGE_REMOTE: The offset used in accessing the memory region is provided by the incoming request. By default, the offset is maintained locally. When maintained locally, the offset is incremented by the length of the request so that the next operation (PUT or GET) will access the next part of the memory region. Note that only one offset variable exists per memory descriptor. If both PUT and GET operations are performed on a memory descriptor, the offset is updated each time.</li>
<li>LNET_MD_TRUNCATE: The length provided in the incoming request can be reduced to match the memory available in the region (determined by subtracting the offset from the length of the memory region). By default, if the length in the incoming operation is greater than the amount of memory available, the operation is rejected.</li>
<li>LNET_MD_ACK_DISABLE: An acknowledgment should not be sent for incoming PUT operations, even if requested. By default, acknowledgments are sent for PUT operations that request an acknowledgment. Acknowledgments are never sent for GET operations. The data sent in the REPLY serves as an implicit acknowledgment.</li>
<li>LNET_MD_KIOV: The start and length fields specify an array of <a class="el" href="structlnet__kiov__t.html" title="A page-based fragment of a MD.">lnet_kiov_t</a>.</li>
<li>LNET_MD_IOVEC: The start and length fields specify an array of struct iovec.</li>
<li>LNET_MD_MAX_SIZE: The max_size field is valid.</li>
</ul>
<p>Note:</p>
<ul>
<li>LNET_MD_KIOV or LNET_MD_IOVEC allows for a scatter/gather capability for memory descriptors. They can't be both set.</li>
<li>When LNET_MD_MAX_SIZE is set, the total length of the memory region (i.e. sum of all fragment lengths) must not be less than <em>max_size</em>. </li>
</ul>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00426">426</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="lib-md_8c_source.html#l00263">LNetMDAttach()</a>, <a class="el" href="lib-md_8c_source.html#l00343">LNetMDBind()</a>, <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, and <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="a11130deb533aae021364cdec65dd1935"></a><!-- doxytag: member="lnet_md_t::start" ref="a11130deb533aae021364cdec65dd1935" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structlnet__md__t.html#a11130deb533aae021364cdec65dd1935">lnet_md_t::start</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specify the memory region associated with the memory descriptor. </p>
<p>If the options field has:</p>
<ul>
<li>LNET_MD_KIOV bit set: The start field points to the starting address of an array of <a class="el" href="structlnet__kiov__t.html" title="A page-based fragment of a MD.">lnet_kiov_t</a> and the length field specifies the number of entries in the array. The length can't be bigger than LNET_MAX_IOV. The <a class="el" href="structlnet__kiov__t.html" title="A page-based fragment of a MD.">lnet_kiov_t</a> is used to describe page-based fragments that are not necessarily mapped in virtal memory.</li>
<li>LNET_MD_IOVEC bit set: The start field points to the starting address of an array of struct kvec and the length field specifies the number of entries in the array. The length can't be bigger than LNET_MAX_IOV. The struct kvec is used to describe fragments that have virtual addresses.</li>
<li>Otherwise: The memory region is contiguous. The start field specifies the starting address for the memory region and the length field specifies its length.</li>
</ul>
<p>When the memory region is fragmented, all fragments but the first one must start on page boundary, and all but the last must end on page boundary. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00369">369</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, and <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="a60130fbc7253f41b3b6cd8da947ff023"></a><!-- doxytag: member="lnet_md_t::threshold" ref="a60130fbc7253f41b3b6cd8da947ff023" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structlnet__md__t.html#a60130fbc7253f41b3b6cd8da947ff023">lnet_md_t::threshold</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies the maximum number of operations that can be performed on the memory descriptor. </p>
<p>An operation is any action that could possibly generate an event. In the usual case, the threshold value is decremented for each operation on the MD. When the threshold drops to zero, the MD becomes inactive and does not respond to operations. A threshold value of LNET_MD_THRESH_INF indicates that there is no bound on the number of operations that may be applied to a MD. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00381">381</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, and <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>.</p>

</div>
</div>
<a class="anchor" id="a57f16fe0f86a1e86553eb0a1eee4bd58"></a><!-- doxytag: member="lnet_md_t::user_ptr" ref="a57f16fe0f86a1e86553eb0a1eee4bd58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structlnet__md__t.html#a57f16fe0f86a1e86553eb0a1eee4bd58">lnet_md_t::user_ptr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A user-specified value that is associated with the memory descriptor. </p>
<p>The value does not need to be a pointer, but must fit in the space used by a pointer. This value is recorded in events associated with operations on this MD. </p>

<p>Definition at line <a class="el" href="lnet_2include_2lnet_2types_8h_source.html#l00433">433</a> of file <a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a>.</p>

<p>Referenced by <a class="el" href="niobuf_8c_source.html#l00660">ptl_send_rpc()</a>, <a class="el" href="niobuf_8c_source.html#l00301">ptlrpc_register_bulk()</a>, <a class="el" href="niobuf_8c_source.html#l00900">ptlrpc_register_rqbd()</a>, and <a class="el" href="events_8c_source.html#l00051">request_out_callback()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lnet/include/lnet/<a class="el" href="lnet_2include_2lnet_2types_8h_source.html">types.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:59:48 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
