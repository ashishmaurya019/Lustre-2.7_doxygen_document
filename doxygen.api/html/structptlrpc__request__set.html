<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: ptlrpc_request_set Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ptlrpc_request_set Struct Reference<br/>
<small>
[<a class="el" href="group__net.html">net</a>]</small>
</h1><!-- doxytag: class="ptlrpc_request_set" -->
<p>Definition of request set structure.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ptlrpc_request_set:</div>
<div class="dynsection">
<div class="center"><img src="structptlrpc__request__set__coll__graph.png" border="0" usemap="#ptlrpc__request__set_coll__map" alt="Collaboration graph"/></div>
<map name="ptlrpc__request__set_coll__map" id="ptlrpc__request__set_coll__map">
<area shape="rect" id="node2" href="structlist__head.html" title="{list_head\n|+ next\l+ prev\l|}" alt="" coords="44,6,127,109"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73960081156ac475736e02422e846086"></a><!-- doxytag: member="ptlrpc_request_set::set_refcount" ref="a73960081156ac475736e02422e846086" args="" -->
atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>set_refcount</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a501b0460a038a221bce0b239f3a4b687"></a><!-- doxytag: member="ptlrpc_request_set::set_new_count" ref="a501b0460a038a221bce0b239f3a4b687" args="" -->
atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#a501b0460a038a221bce0b239f3a4b687">set_new_count</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of in queue requests <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa9a59c6f0eadcb23aaa39af7d6275056"></a><!-- doxytag: member="ptlrpc_request_set::set_remaining" ref="aa9a59c6f0eadcb23aaa39af7d6275056" args="" -->
atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#aa9a59c6f0eadcb23aaa39af7d6275056">set_remaining</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of uncompleted requests <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa37e9803cad75f212925a762a9f6d7b"></a><!-- doxytag: member="ptlrpc_request_set::set_waitq" ref="afa37e9803cad75f212925a762a9f6d7b" args="" -->
wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#afa37e9803cad75f212925a762a9f6d7b">set_waitq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wait queue to wait on for request events <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acad371d823d2edf6c28dadf663322507"></a><!-- doxytag: member="ptlrpc_request_set::set_wakeup_ptr" ref="acad371d823d2edf6c28dadf663322507" args="" -->
wait_queue_head_t *&nbsp;</td><td class="memItemRight" valign="bottom"><b>set_wakeup_ptr</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc09a978b08c91b15b329a8b2772ccb5"></a><!-- doxytag: member="ptlrpc_request_set::set_requests" ref="adc09a978b08c91b15b329a8b2772ccb5" args="" -->
struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#adc09a978b08c91b15b329a8b2772ccb5">set_requests</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of requests in the set. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#afd915cdca4eee2fd8b0abdbecd520ce3">set_cblist</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of completion callbacks to be called when the set is completed This is only used if <em>set_interpret</em> is NULL.  <a href="#afd915cdca4eee2fd8b0abdbecd520ce3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">set_interpreter_func&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#a3fc57c89c29f05a8fe2dccc5fa321baa">set_interpret</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Completion callback, if only one.  <a href="#a3fc57c89c29f05a8fe2dccc5fa321baa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#a6731b8dc93db539e727857043de0a9ad">set_arg</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">opaq argument passed to completion <em>set_interpret</em> callback.  <a href="#a6731b8dc93db539e727857043de0a9ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9098450b33bfdac5eb59f297f3b0c70"></a><!-- doxytag: member="ptlrpc_request_set::set_new_req_lock" ref="ae9098450b33bfdac5eb59f297f3b0c70" args="" -->
spinlock_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#ae9098450b33bfdac5eb59f297f3b0c70">set_new_req_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock for <em>set_new_requests</em> manipulations locked so that any old caller can communicate requests to the set holder who can then fold them into the lock-free set. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#aede9d95a4944a6b4d28063de1aa3565b">set_new_requests</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of new yet unsent requests.  <a href="#aede9d95a4944a6b4d28063de1aa3565b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2af0674d17e2c26a5fbcea014b6c70ca"></a><!-- doxytag: member="ptlrpc_request_set::set_rc" ref="a2af0674d17e2c26a5fbcea014b6c70ca" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#a2af0674d17e2c26a5fbcea014b6c70ca">set_rc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rq_status of requests that have been freed already <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#a0394ca46e94e23c6caaab0423d547dab">set_max_inflight</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Additional fields used by the flow control extension.  <a href="#a0394ca46e94e23c6caaab0423d547dab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9be81c226e91f43d9a2b64328b0831a0"></a><!-- doxytag: member="ptlrpc_request_set::set_producer" ref="a9be81c226e91f43d9a2b64328b0831a0" args="" -->
set_producer_func&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#a9be81c226e91f43d9a2b64328b0831a0">set_producer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback function used to generate RPCs. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac83e6e9755853d8b56bbfbff4f529a83"></a><!-- doxytag: member="ptlrpc_request_set::set_producer_arg" ref="ac83e6e9755853d8b56bbfbff4f529a83" args="" -->
void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptlrpc__request__set.html#ac83e6e9755853d8b56bbfbff4f529a83">set_producer_arg</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">opaq argument passed to the producer callback <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8da82f20c89d4732c3e56e20b20fb48"></a><!-- doxytag: member="ptlrpc_request_set::set_allow_intr" ref="ab8da82f20c89d4732c3e56e20b20fb48" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>set_allow_intr</b>:1</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Definition of request set structure. </p>
<p>Request set is a list of requests (not necessary to the same target) that once populated with RPCs could be sent in parallel. There are two kinds of request sets. General purpose and with dedicated serving thread. Example of the latter is ptlrpcd set. For general purpose sets once request set started sending it is impossible to add new requests to such set. Provides a way to call "completion callbacks" when all requests in the set returned. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l00572">572</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a6731b8dc93db539e727857043de0a9ad"></a><!-- doxytag: member="ptlrpc_request_set::set_arg" ref="a6731b8dc93db539e727857043de0a9ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structptlrpc__request__set.html#a6731b8dc93db539e727857043de0a9ad">ptlrpc_request_set::set_arg</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>opaq argument passed to completion <em>set_interpret</em> callback. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l00592">592</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="afd915cdca4eee2fd8b0abdbecd520ce3"></a><!-- doxytag: member="ptlrpc_request_set::set_cblist" ref="afd915cdca4eee2fd8b0abdbecd520ce3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__request__set.html#afd915cdca4eee2fd8b0abdbecd520ce3">ptlrpc_request_set::set_cblist</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List of completion callbacks to be called when the set is completed This is only used if <em>set_interpret</em> is NULL. </p>
<p>Links struct <a class="el" href="structptlrpc__set__cbdata.html" title="Description of a single ptrlrpc_set callback.">ptlrpc_set_cbdata</a>. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l00588">588</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3fc57c89c29f05a8fe2dccc5fa321baa"></a><!-- doxytag: member="ptlrpc_request_set::set_interpret" ref="a3fc57c89c29f05a8fe2dccc5fa321baa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set_interpreter_func <a class="el" href="structptlrpc__request__set.html#a3fc57c89c29f05a8fe2dccc5fa321baa">ptlrpc_request_set::set_interpret</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Completion callback, if only one. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l00590">590</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0394ca46e94e23c6caaab0423d547dab"></a><!-- doxytag: member="ptlrpc_request_set::set_max_inflight" ref="a0394ca46e94e23c6caaab0423d547dab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structptlrpc__request__set.html#a0394ca46e94e23c6caaab0423d547dab">ptlrpc_request_set::set_max_inflight</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Additional fields used by the flow control extension. </p>
<p>Maximum number of RPCs in flight </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l00606">606</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<a class="anchor" id="aede9d95a4944a6b4d28063de1aa3565b"></a><!-- doxytag: member="ptlrpc_request_set::set_new_requests" ref="aede9d95a4944a6b4d28063de1aa3565b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structptlrpc__request__set.html#aede9d95a4944a6b4d28063de1aa3565b">ptlrpc_request_set::set_new_requests</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List of new yet unsent requests. </p>
<p>Only used with ptlrpcd now. </p>

<p>Definition at line <a class="el" href="lustre__net_8h_source.html#l00600">600</a> of file <a class="el" href="lustre__net_8h_source.html">lustre_net.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lustre/include/<a class="el" href="lustre__net_8h_source.html">lustre_net.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 21:06:55 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
