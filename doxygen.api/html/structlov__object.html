<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lov_object Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lov_object Struct Reference<br/>
<small>
[<a class="el" href="group__lov.html">lov</a>]</small>
</h1><!-- doxytag: class="lov_object" -->
<p>lov-specific file state.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for lov_object:</div>
<div class="dynsection">
<div class="center"><img src="structlov__object__coll__graph.png" border="0" usemap="#lov__object_coll__map" alt="Collaboration graph"/></div>
<map name="lov__object_coll__map" id="lov__object_coll__map">
<area shape="rect" id="node128" href="structlovsub__object.html" title="{lovsub_object\n|+ lso_header\l+ lso_cl\l+ lso_super\l+ lso_index\l|}" alt="" coords="1067,1947,1181,2085"/><area shape="rect" id="node2" href="structcl__object.html" title="Sub&#45;class of lu_object with methods common for objects on the client stacks." alt="" coords="915,1209,1029,1329"/><area shape="rect" id="node4" href="structcl__object__operations.html" title="Operations implemented for each cl object layer." alt="" coords="872,635,1035,928"/><area shape="rect" id="node6" href="structlu__object.html" title="Layer in the layered object." alt="" coords="1756,704,1860,859"/><area shape="rect" id="node103" href="structlu__device__operations.html" title="Operations common for data and meta&#45;data devices." alt="" coords="1663,1201,1857,1338"/><area shape="rect" id="node8" href="structlist__head.html" title="{list_head\n|+ next\l+ prev\l|}" alt="" coords="2845,14,2928,117"/><area shape="rect" id="node15" href="structlu__object__header.html" title="&quot;Compound&quot; object, consisting of multiple layers." alt="" coords="1181,217,1320,423"/><area shape="rect" id="node25" href="structlu__device.html" title="Device: a layer in the server side abstraction stacking." alt="" coords="1837,1483,1963,1690"/><area shape="rect" id="node28" href="structobd__device.html" title="{obd_device\n|+ obd_type\l+ obd_magic\l+ obd_minor\l+ obd_lu_dev\l+ obd_uuid\l+ obd_name\l+ obd_attached\l+ obd_set_up\l+ obd_recovering\l+ obd_abort_recovery\l+ obd_version_recov\l+ obd_replayable\l+ obd_no_transno\l+ obd_no_recov\l+ obd_stopping\l+ obd_starting\l+ obd_force\l+ obd_fail\l+ obd_no_conn\l+ obd_inactive\l+ obd_no_ir\l+ obd_process_conf\l+ obd_uses_nid_stats\l+ obd_recovery_expired\l+ obd_uuid_hash\l+ obd_nid_hash\l+ obd_nid_stats_hash\l+ obd_gen_hash\l+ obd_nid_stats\l+ obd_exports\l+ obd_unlinked_exports\l+ obd_delayed_exports\l+ obd_lwp_list\l+ obd_refcount\l+ obd_num_exports\l+ obd_nid_lock\l+ obd_namespace\l+ obd_ldlm_client\l+ obd_dev_lock\l+ obd_osfs_lock\l+ obd_osfs\l+ obd_osfs_age\l+ obd_last_committed\l+ obd_dev_mutex\l+ obd_lvfs_ctxt\l+ obd_olg\l+ obd_observer\l+ obd_observer_link_sem\l+ obd_upcall\l+ obd_self_export\l+ obd_lwp_export\l+ obd_exports_timed\l+ obd_eviction_timer\l+ obd_max_recoverable_clients\l+ obd_connected_clients\l+ obd_stale_clients\l+ obd_recovery_task_lock\l+ obd_next_recovery_transno\l+ obd_replayed_requests\l+ obd_requests_queued_for_recovery\l+ obd_next_transno_waitq\l+ obd_recovery_timer\l+ obd_recovery_start\l+ obd_recovery_end\l+ obd_recovery_time_hard\l+ obd_recovery_timeout\l+ obd_recovery_ir_factor\l+ obd_replayed_locks\l+ obd_req_replay_clients\l+ obd_lock_replay_clients\l+ obd_recovery_data\l+ obd_req_replay_queue\l+ obd_lock_replay_queue\l+ obd_final_req_queue\l+ cli\l+ echo_client\l+ lov\l+ lmv\l+ u\l+ obd_stats\l+ obd_cntr_base\l+ obd_md_cntr_base\l+ obd_md_stats\l+ obd_proc_entry\l+ obd_proc_exports_entry\l+ obd_svc_procroot\l+ obd_svc_stats\l+ obd_vars\l+ obd_evict_inprogress\l+ obd_evict_inprogress_waitq\l+ obd_evict_list\l+ obd_pool_lock\l+ obd_pool_slv\l+ obd_pool_limit\l+ obd_conn_inprogress\l+ obd_reference\l|}" alt="" coords="2616,3246,2891,4978"/><area shape="rect" id="node30" href="structecho__client__obd.html" title="{echo_client_obd\n|+ ec_exp\l+ ec_lock\l+ ec_objects\l+ ec_locks\l+ ec_unique\l|}" alt="" coords="2967,6835,3097,6989"/><area shape="rect" id="node33" href="structobd__export.html" title="Export structure." alt="" coords="2763,5061,3005,6152"/><area shape="rect" id="node39" href="structcfs__workitem.html" title="{cfs_workitem\n|+ wi_list\l+ wi_action\l+ wi_data\l+ wi_running\l+ wi_scheduled\l|}" alt="" coords="3331,456,3456,611"/><area shape="rect" id="node49" href="structobd__type.html" title="{obd_type\n|+ typ_chain\l+ typ_dt_ops\l+ typ_md_ops\l+ typ_procroot\l+ typ_procsym\l+ typ_sym_filter\l+ typ_name\l+ typ_refcnt\l+ typ_lu\l+ obd_type_lock\l|}" alt="" coords="1644,2815,1777,3057"/><area shape="rect" id="node52" href="structlu__device__type.html" title="Type of device." alt="" coords="1768,2333,1893,2523"/><area shape="rect" id="node70" href="structclient__obd.html" title="{client_obd\n|+ cl_sem\l+ cl_target_uuid\l+ cl_import\l+ cl_conn_count\l+ cl_default_mds_easize\l+ cl_max_mds_easize\l+ cl_sp_me\l+ cl_sp_to\l+ cl_flvr_mgc\l+ cl_dirty_pages\l+ cl_dirty_max_pages\l+ cl_dirty_transit\l+ cl_avail_grant\l+ cl_lost_grant\l+ cl_dirty_grant\l+ cl_reserved_grant\l+ cl_cache_waiters\l+ cl_next_shrink_grant\l+ cl_grant_shrink_list\l+ cl_grant_shrink_interval\l+ cl_chunkbits\l+ cl_grant_extent_tax\l+ cl_max_extent_pages\l+ cl_loi_list_lock\l+ cl_loi_ready_list\l+ cl_loi_hp_ready_list\l+ cl_loi_write_list\l+ cl_loi_read_list\l+ cl_r_in_flight\l+ cl_w_in_flight\l+ cl_pending_w_pages\l+ cl_pending_r_pages\l+ cl_max_pages_per_rpc\l+ cl_max_rpcs_in_flight\l+ cl_read_rpc_hist\l+ cl_write_rpc_hist\l+ cl_read_page_hist\l+ cl_write_page_hist\l+ cl_read_offset_hist\l+ cl_write_offset_hist\l+ cl_cache\l+ cl_lru_osc\l+ cl_lru_left\l+ cl_lru_busy\l+ cl_lru_in_list\l+ cl_lru_shrinkers\l+ cl_lru_last_used\l+ cl_lru_reclaim\l+ cl_lru_list\l+ cl_lru_list_lock\l+ cl_unstable_count\l+ cl_shrink_list\l+ cl_destroy_in_flight\l+ cl_destroy_waitq\l+ cl_rpc_lock\l+ cl_mod_rpcs_lock\l+ cl_max_mod_rpcs_in_flight\l+ cl_mod_rpcs_in_flight\l+ cl_close_rpcs_in_flight\l+ cl_mod_rpcs_waitq\l+ cl_mod_tag_bitmap\l+ cl_mod_rpcs_hist\l+ cl_mgc_mutex\l+ cl_mgc_los\l+ cl_mgc_configs_dir\l+ cl_mgc_refcount\l+ cl_mgc_mgsexp\l+ cl_checksum\l+ cl_supp_cksum_types\l+ cl_cksum_type\l+ cl_ar\l+ cl_seq\l+ cl_resends\l+ cl_writeback_work\l+ cl_lru_work\l+ cl_quota_hash\l|}" alt="" coords="1341,6219,1555,7605"/><area shape="rect" id="node83" href="structldlm__namespace.html" title="LDLM Namespace." alt="" coords="3675,5313,3859,5901"/><area shape="rect" id="node89" href="structlov__obd.html" title="{lov_obd\n|+ desc\l+ lov_tgts\l+ lov_packed\l+ lov_lock\l+ lov_ocd\l+ targets_proc_entry\l+ lov_refcount\l+ lov_death_row\l+ lov_tgt_size\l+ lov_connects\l+ lov_pool_count\l+ lov_pools_hash_body\l+ lov_pool_list\l+ lov_pool_proc_entry\l+ lov_sp_me\l+ lov_cache\l+ lov_notify_lock\l|}" alt="" coords="3189,2755,3363,3117"/><area shape="rect" id="node107" href="structlu__site.html" title="lu_site is a &quot;compartment&quot; within which objects are unique, and LRU discipline..." alt="" coords="3825,6783,3967,7041"/><area shape="rect" id="node11" href="structlu__object__operations.html" title="Operations specific for particular lu_object." alt="" coords="1723,225,1893,415"/><area shape="rect" id="node13" href="structlu__ref__link.html" title="{lu_ref_link\n||}" alt="" coords="1917,277,2003,363"/><area shape="rect" id="node132" href="structcl__object__header.html" title="Extended header for client object." alt="" coords="1092,952,1247,1107"/><area shape="rect" id="node18" href="structhlist__node.html" title="{hlist_node\n|+ next\l+ pprev\l|}" alt="" coords="1101,14,1192,117"/><area shape="rect" id="node21" href="structlu__fid.html" title="File IDentifier." alt="" coords="920,5,992,125"/><area shape="rect" id="node140" href="structost__id.html" title="OST object IDentifier." alt="" coords="769,243,847,397"/><area shape="rect" id="node23" href="structlu__ref.html" title="{lu_ref\n||}" alt="" coords="1459,23,1517,108"/><area shape="rect" id="node56" href="structlu__device__type__operations.html" title="Operations on a device type." alt="" coords="1703,1913,1905,2119"/><area shape="rect" id="node109" href="structlu__target.html" title="{lu_target\n|+ lut_obd\l+ lut_bottom\l+ lut_tdtd\l+ lut_tdtd_commit_thread\l+ lut_slice\l+ lut_reply_fail_id\l+ lut_request_fail_id\l+ lut_sptlrpc_lock\l+ lut_sptlrpc_rset\l+ lut_flags_lock\l+ lut_sec_level\l+ lut_syncjournal\l+ lut_sync_lock_cancel\l+ lut_no_reconstruct\l+ lut_last_rcvd\l+ lut_txn_cb\l+ lut_lsd\l+ lut_last_transno\l+ lut_translock\l+ lut_client_bitmap_lock\l+ lut_client_bitmap\l+ lut_num_clients\l+ lut_client_generation\l+ lut_reply_data\l+ lut_reply_bitmap\l+ lut_sync_count\l|}" alt="" coords="3243,5347,3445,5866"/><area shape="rect" id="node98" href="structlmv__obd.html" title="{lmv_obd\n|+ refcount\l+ lmv_fld\l+ lmv_lock\l+ lmv_placement\l+ desc\l+ cluuid\l+ exp\l+ targets_proc_entry\l+ lmv_init_mutex\l+ connected\l+ max_easize\l+ max_def_easize\l+ tgts_size\l+ tgts\l+ conn_data\l|}" alt="" coords="3121,6748,3287,7076"/><area shape="rect" id="node116" href="structseq__server__site.html" title="{seq_server_site\n|+ ss_lu\l+ ss_node_id\l+ ss_server_fld\l+ ss_client_fld\l+ ss_server_seq\l+ ss_control_seq\l+ ss_control_exp\l+ ss_client_seq\l|}" alt="" coords="3721,7673,3857,7879"/><area shape="rect" id="node35" href="structcfs__hash.html" title="cfs_hash is a hash&#45;table implementation for general purpose, it can support: ." alt="" coords="3293,2195,3456,2661"/><area shape="rect" id="node37" href="unioncfs__hash__lock.html" title="{cfs_hash_lock\n|+ rw\l+ spin\l|}" alt="" coords="3201,1965,3313,2067"/><area shape="rect" id="node45" href="structobd__uuid.html" title="{obd_uuid\n|+ uuid\l|}" alt="" coords="3387,2893,3467,2979"/><area shape="rect" id="node59" href="structlprocfs__stats.html" title="{lprocfs_stats\n|+ ls_num\l+ ls_biggest_alloc_num\l+ ls_flags\l+ ls_lock\l+ ls_cnt_header\l+ ls_percpu\l|}" alt="" coords="3685,2850,3861,3022"/><area shape="rect" id="node61" href="structobd__notify__upcall.html" title="{obd_notify_upcall\n|+ onu_upcall\l+ onu_owner\l|}" alt="" coords="1801,2885,1937,2987"/><area shape="rect" id="node64" href="structptlrpc__client.html" title="Client definition for PortalRPC." alt="" coords="1961,2876,2116,2996"/><area shape="rect" id="node66" href="structobd__llog__group.html" title="{obd_llog_group\n|+ olg_ctxts\l+ olg_waitq\l+ olg_lock\l+ olg_cat_processing\l|}" alt="" coords="2140,2867,2303,3005"/><area shape="rect" id="node68" href="structlprocfs__vars.html" title="{lprocfs_vars\n|+ name\l+ fops\l+ data\l+ proc_mode\l|}" alt="" coords="2327,2867,2436,3005"/><area shape="rect" id="node74" href="structosc__async__rc.html" title="{osc_async_rc\n|+ ar_rc\l+ ar_force_sync\l+ ar_min_xid\l|}" alt="" coords="213,260,341,380"/><area shape="rect" id="node143" href="structlov__oinfo.html" title="{lov_oinfo\n|+ loi_oi\l+ loi_ost_idx\l+ loi_ost_gen\l+ loi_kms_valid\l+ loi_kms\l+ loi_lvb\l+ loi_ar\l|}" alt="" coords="629,687,749,876"/><area shape="rect" id="node78" href="structobd__statfs.html" title="{obd_statfs\n|+ os_type\l+ os_blocks\l+ os_bfree\l+ os_bavail\l+ os_files\l+ os_ffree\l+ os_fsid\l+ os_bsize\l+ os_namelen\l+ os_maxbytes\l+ os_state\l+ os_fprecreated\l+ os_spare2\l+ os_spare3\l+ os_spare4\l+ os_spare5\l+ os_spare6\l+ os_spare7\l+ os_spare8\l+ os_spare9\l|}" alt="" coords="2460,2729,2599,3143"/><area shape="rect" id="node93" href="structtarget__recovery__data.html" title="{target_recovery_data\n|+ trd_recovery_handler\l+ trd_processing_task\l+ trd_starting\l+ trd_finishing\l|}" alt="" coords="2623,2867,2801,3005"/><area shape="rect" id="node95" href="structlvfs__run__ctxt.html" title="{lvfs_run_ctxt\n|+ pwdmnt\l+ pwd\l+ fs\l+ umask\l+ dt\l+ magic\l|}" alt="" coords="2825,2850,2935,3022"/><area shape="rect" id="node120" href="unionlov__object_1_1lov__layout__state.html" title="{lov_object::lov_layout_state\n|+ raid0\l+ empty\l+ released\l|}" alt="" coords="669,2876,883,2996"/><area shape="rect" id="node122" href="structlov__object_1_1lov__layout__state_1_1lov__layout__state__released.html" title="{lov_object::lov_layout_state::lov_layout_state_released\n||}" alt="" coords="456,2385,859,2471"/><area shape="rect" id="node124" href="structlov__object_1_1lov__layout__state_1_1lov__layout__raid0.html" title="{lov_object::lov_layout_state::lov_layout_raid0\n|+ lo_nr\l+ lo_attr_valid\l+ lo_sub\l+ lo_sub_lock\l+ lo_attr\l|}" alt="" coords="933,2351,1264,2505"/><area shape="rect" id="node126" href="structcl__attr.html" title="&quot;Data attributes&quot; of cl_object." alt="" coords="933,1904,1043,2128"/><area shape="rect" id="node136" href="structlov__object_1_1lov__layout__state_1_1lov__layout__state__empty.html" title="{lov_object::lov_layout_state::lov_layout_state_empty\n||}" alt="" coords="43,2385,432,2471"/><area shape="rect" id="node138" href="structlov__stripe__md.html" title="{lov_stripe_md\n|+ lsm_refc\l+ lsm_lock\l+ lsm_lock_owner\l+ lsm_maxbytes\l+ lsm_oi\l+ lsm_magic\l+ lsm_stripe_size\l+ lsm_pattern\l+ lsm_stripe_count\l+ lsm_layout_gen\l+ lsm_pool_name\l+ lsm_oinfo\l|}" alt="" coords="732,1131,881,1407"/><area shape="rect" id="node146" href="structost__lvb.html" title="{ost_lvb\n|+ lvb_size\l+ lvb_mtime\l+ lvb_atime\l+ lvb_ctime\l+ lvb_blocks\l+ lvb_mtime_ns\l+ lvb_atime_ns\l+ lvb_ctime_ns\l+ lvb_padding\l|}" alt="" coords="617,208,745,432"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionlov__object_1_1lov__layout__state.html">lov_layout_state</a></td></tr>
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af6b1712509f232166f9c7eb5c333dcff"></a><!-- doxytag: member="lov_object::lo_cl" ref="af6b1712509f232166f9c7eb5c333dcff" args="" -->
struct <a class="el" href="structcl__object.html">cl_object</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>lo_cl</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct rw_semaphore&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#aab2ef978c79c508d47197c8078abf098">lo_type_guard</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Serializes object operations with transitions between layout types.  <a href="#aab2ef978c79c508d47197c8078abf098"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__lov.html#ga28761ebc7af42a0c032a063f295c5ffb">lov_layout_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#ab8b1070ca6fafc078bf5aa26c105382b">lo_type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type of an object.  <a href="#ab8b1070ca6fafc078bf5aa26c105382b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#a727ffe65ad9258f29f0b9849013dea55">lo_layout_invalid</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if layout is invalid.  <a href="#a727ffe65ad9258f29f0b9849013dea55"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#ad226b54b1209770b9ed33a6c6a36f62c">lo_active_ios</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">How many IOs are on going on this object.  <a href="#ad226b54b1209770b9ed33a6c6a36f62c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a134c9f082f0e90422d7a2a84e3289ecd"></a><!-- doxytag: member="lov_object::lo_waitq" ref="a134c9f082f0e90422d7a2a84e3289ecd" args="" -->
wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#a134c9f082f0e90422d7a2a84e3289ecd">lo_waitq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Waitq - wait for no one else is using lo_lsm. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#a3c923cc1d7a5577213df50f1940c2be9">lo_lsm</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Layout metadata.  <a href="#a3c923cc1d7a5577213df50f1940c2be9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae90dc837681e3c81f1daa77fc8d2dce4"></a><!-- doxytag: member="lov_object::u" ref="ae90dc837681e3c81f1daa77fc8d2dce4" args="" -->
union <a class="el" href="unionlov__object_1_1lov__layout__state.html">lov_object::lov_layout_state</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>u</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3814521c58719ed71173f785659532ac"></a><!-- doxytag: member="lov_object::lo_owner" ref="a3814521c58719ed71173f785659532ac" args="" -->
struct task_struct *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlov__object.html#a3814521c58719ed71173f785659532ac">lo_owner</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thread that acquired <a class="el" href="structlov__object.html#aab2ef978c79c508d47197c8078abf098" title="Serializes object operations with transitions between layout types.">lov_object::lo_type_guard</a> in an exclusive mode. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>lov-specific file state. </p>
<p>lov object has particular layout type, determining how top-object is built on top of sub-objects. Layout type can change dynamically. When this happens, <a class="el" href="structlov__object.html#aab2ef978c79c508d47197c8078abf098" title="Serializes object operations with transitions between layout types.">lov_object::lo_type_guard</a> semaphore is taken in exclusive mode, all state pertaining to the old layout type is destroyed, and new state is constructed. All object methods take said semaphore in the shared mode, providing serialization against transition between layout types.</p>
<p>To avoid multiple `if' or `switch' statements, selecting behavior for the current layout type, object methods perform double-dispatch, invoking function corresponding to the current layout type. </p>

<p>Definition at line <a class="el" href="lov__cl__internal_8h_source.html#l00187">187</a> of file <a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="ad226b54b1209770b9ed33a6c6a36f62c"></a><!-- doxytag: member="lov_object::lo_active_ios" ref="ad226b54b1209770b9ed33a6c6a36f62c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="structlov__object.html#ad226b54b1209770b9ed33a6c6a36f62c">lov_object::lo_active_ios</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>How many IOs are on going on this object. </p>
<p>Layout can be changed only if there is no active IO. </p>

<p>Definition at line <a class="el" href="lov__cl__internal_8h_source.html#l00211">211</a> of file <a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a727ffe65ad9258f29f0b9849013dea55"></a><!-- doxytag: member="lov_object::lo_layout_invalid" ref="a727ffe65ad9258f29f0b9849013dea55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="structlov__object.html#a727ffe65ad9258f29f0b9849013dea55">lov_object::lo_layout_invalid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if layout is invalid. </p>
<p>This bit is cleared when layout lock is lost. </p>

<p>Definition at line <a class="el" href="lov__cl__internal_8h_source.html#l00206">206</a> of file <a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3c923cc1d7a5577213df50f1940c2be9"></a><!-- doxytag: member="lov_object::lo_lsm" ref="a3c923cc1d7a5577213df50f1940c2be9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlov__stripe__md.html">lov_stripe_md</a>* <a class="el" href="structlov__object.html#a3c923cc1d7a5577213df50f1940c2be9">lov_object::lo_lsm</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Layout metadata. </p>
<p>NULL if empty layout. </p>

<p>Definition at line <a class="el" href="lov__cl__internal_8h_source.html#l00219">219</a> of file <a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab8b1070ca6fafc078bf5aa26c105382b"></a><!-- doxytag: member="lov_object::lo_type" ref="ab8b1070ca6fafc078bf5aa26c105382b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lov.html#ga28761ebc7af42a0c032a063f295c5ffb">lov_layout_type</a> <a class="el" href="structlov__object.html#ab8b1070ca6fafc078bf5aa26c105382b">lov_object::lo_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type of an object. </p>
<p>Protected by <a class="el" href="structlov__object.html#aab2ef978c79c508d47197c8078abf098" title="Serializes object operations with transitions between layout types.">lov_object::lo_type_guard</a>. </p>

<p>Definition at line <a class="el" href="lov__cl__internal_8h_source.html#l00201">201</a> of file <a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>.</p>

</div>
</div>
<a class="anchor" id="aab2ef978c79c508d47197c8078abf098"></a><!-- doxytag: member="lov_object::lo_type_guard" ref="aab2ef978c79c508d47197c8078abf098" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rw_semaphore <a class="el" href="structlov__object.html#aab2ef978c79c508d47197c8078abf098">lov_object::lo_type_guard</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Serializes object operations with transitions between layout types. </p>
<p>This semaphore is taken in shared mode by all object methods, and is taken in exclusive mode when object type is changed.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structlov__object.html#ab8b1070ca6fafc078bf5aa26c105382b" title="Type of an object.">lov_object::lo_type</a> </dd></dl>

<p>Definition at line <a class="el" href="lov__cl__internal_8h_source.html#l00197">197</a> of file <a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lustre/lov/<a class="el" href="lov__cl__internal_8h_source.html">lov_cl_internal.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 21:00:47 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
