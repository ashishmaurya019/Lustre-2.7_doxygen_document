<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: req_layout</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>req_layout</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structreq__capsule.html">req_capsule</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4112ac6313dd70c0a851c7aceb076546"></a><!-- doxytag: member="req_layout::REQ_MAX_FIELD_NR" ref="ga4112ac6313dd70c0a851c7aceb076546" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>REQ_MAX_FIELD_NR</b>&nbsp;&nbsp;&nbsp;9</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>req_location</b> { <b>RCL_CLIENT</b>, 
<b>RCL_SERVER</b>, 
<b>RCL_NR</b>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga3360e9bd9a1f426afa811cb688d78080">req_capsule_init</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *req, enum req_location location)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a pill.  <a href="#ga3360e9bd9a1f426afa811cb688d78080"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7cee5425b8bcb60eb51917f719831d61"></a><!-- doxytag: member="req_layout::req_capsule_fini" ref="ga7cee5425b8bcb60eb51917f719831d61" args="(struct req_capsule *pill)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>req_capsule_fini</b> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacf7641ae043180a084fac16a18c8fb29"></a><!-- doxytag: member="req_layout::req_capsule_set" ref="gacf7641ae043180a084fac16a18c8fb29" args="(struct req_capsule *pill, const struct req_format *fmt)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gacf7641ae043180a084fac16a18c8fb29">req_capsule_set</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_format *fmt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the format (<em>fmt</em>) of a <em>pill</em>; format changes are not allowed here (see <a class="el" href="group__req__layout.html#gad16c26c15f59593e2e005e4afbeb8034" title="Changes the format of an RPC.">req_capsule_extend()</a>). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaff7c69cd6b273ed538ddec69245fcd40"></a><!-- doxytag: member="req_layout::req_capsule_client_dump" ref="gaff7c69cd6b273ed538ddec69245fcd40" args="(struct req_capsule *pill)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gaff7c69cd6b273ed538ddec69245fcd40">req_capsule_client_dump</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump a request. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2cc77798c6d37f274c8862d213b09e80"></a><!-- doxytag: member="req_layout::req_capsule_server_dump" ref="ga2cc77798c6d37f274c8862d213b09e80" args="(struct req_capsule *pill)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga2cc77798c6d37f274c8862d213b09e80">req_capsule_server_dump</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump a reply. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga3c7ada58d5e54cbf2af6df8c5894e8f5">req_capsule_init_area</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the expected sizes of each RMF in a <em>pill</em> (<em>rc_area</em>) to -1.  <a href="#ga3c7ada58d5e54cbf2af6df8c5894e8f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gab0f7a8e2a51867454ce8f87bb48b0f77">req_capsule_filled_sizes</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fills in any parts of the <em>rc_area</em> of a <em>pill</em> that haven't been filled in yet.  <a href="#gab0f7a8e2a51867454ce8f87bb48b0f77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga2d6e601381473d8117410c7c9cd176c9">req_capsule_server_pack</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Capsule equivalent of lustre_pack_request() and lustre_pack_reply().  <a href="#ga2d6e601381473d8117410c7c9cd176c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0ecb097da2dfa5ac12ec0ef1f33d3e88"></a><!-- doxytag: member="req_layout::req_capsule_client_get" ref="ga0ecb097da2dfa5ac12ec0ef1f33d3e88" args="(struct req_capsule *pill, const struct req_msg_field *field)" -->
void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga0ecb097da2dfa5ac12ec0ef1f33d3e88">req_capsule_client_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trivial wrapper around __req_capsule_get(), that returns the PTLRPC request buffer corresponding to the given RMF (<em>field</em>) of a <em>pill</em>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gac914443e1274834268e66d85141b8f61">req_capsule_client_swab_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, void *swabber)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Same as <a class="el" href="group__req__layout.html#ga0ecb097da2dfa5ac12ec0ef1f33d3e88" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC request buffer...">req_capsule_client_get()</a>, but with a <em>swabber</em> argument.  <a href="#gac914443e1274834268e66d85141b8f61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga3fc75d391659404f616707d6fb07996c">req_capsule_client_sized_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, __u32 len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Utility that combines <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> and <a class="el" href="group__req__layout.html#ga0ecb097da2dfa5ac12ec0ef1f33d3e88" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC request buffer...">req_capsule_client_get()</a>.  <a href="#ga3fc75d391659404f616707d6fb07996c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0d1ad53a1914c35470f3916e4bb4b8fe"></a><!-- doxytag: member="req_layout::req_capsule_server_get" ref="ga0d1ad53a1914c35470f3916e4bb4b8fe" args="(struct req_capsule *pill, const struct req_msg_field *field)" -->
void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga0d1ad53a1914c35470f3916e4bb4b8fe">req_capsule_server_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trivial wrapper around __req_capsule_get(), that returns the PTLRPC reply buffer corresponding to the given RMF (<em>field</em>) of a <em>pill</em>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gaebc460299194b773def6ad6960826860">req_capsule_server_sized_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, __u32 len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Utility that combines <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> and <a class="el" href="group__req__layout.html#ga0d1ad53a1914c35470f3916e4bb4b8fe" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC reply buffer...">req_capsule_server_get()</a>.  <a href="#gaebc460299194b773def6ad6960826860"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga2a563cb9386620862b510aedf886c6ee">req_capsule_server_swab_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, void *swabber)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Same as <a class="el" href="group__req__layout.html#ga0d1ad53a1914c35470f3916e4bb4b8fe" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC reply buffer...">req_capsule_server_get()</a>, but with a <em>swabber</em> argument.  <a href="#ga2a563cb9386620862b510aedf886c6ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaca9cfa032bef186e28e13544aee11dd6"></a><!-- doxytag: member="req_layout::req_capsule_server_sized_swab_get" ref="gaca9cfa032bef186e28e13544aee11dd6" args="(struct req_capsule *pill, const struct req_msg_field *field, __u32 len, void *swabber)" -->
void *&nbsp;</td><td class="memItemRight" valign="bottom"><b>req_capsule_server_sized_swab_get</b> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, __u32 len, void *swabber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gad977fc16317ef24241367c0bda2e3ff3">req_capsule_other_get</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the buffer of a <em>pill</em> corresponding to the given <em>field</em> from the request (if the caller is executing on the server-side) or reply (if the caller is executing on the client-side).  <a href="#gad977fc16317ef24241367c0bda2e3ff3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d">req_capsule_set_size</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, enum req_location loc, __u32 size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the size of the PTLRPC request/reply (<em>loc</em>) buffer for the given <em>field</em> of the given <em>pill</em>.  <a href="#ga6d0a3a11367bcd9fe40dc723243e7b0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga102a4e6bb0a627ead289f4684971fc28">req_capsule_get_size</a> (const struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the actual PTLRPC buffer length of a request or reply (<em>loc</em>) for the given <em>pill's</em> given <em>field</em>.  <a href="#ga102a4e6bb0a627ead289f4684971fc28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga806251548c1c42c81a5123248f79e58d">req_capsule_msg_size</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wrapper around lustre_msg_size() that returns the PTLRPC size needed for the given <em>pill's</em> request or reply (<em>loc</em>) given the field size recorded in the <em>pill's</em> rc_area.  <a href="#ga806251548c1c42c81a5123248f79e58d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga5112a769734db7bbabf4d68df437395a">req_capsule_fmt_size</a> (__u32 magic, const struct req_format *fmt, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">While <a class="el" href="group__req__layout.html#ga806251548c1c42c81a5123248f79e58d" title="Wrapper around lustre_msg_size() that returns the PTLRPC size needed for the given...">req_capsule_msg_size()</a> computes the size of a PTLRPC request or reply (<em>loc</em>) given a <em>pill's</em> <em>rc_area</em>, this function computes the size of a PTLRPC request or reply given only an RQF (<em>fmt</em>).  <a href="#ga5112a769734db7bbabf4d68df437395a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gad16c26c15f59593e2e005e4afbeb8034">req_capsule_extend</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_format *fmt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Changes the format of an RPC.  <a href="#gad16c26c15f59593e2e005e4afbeb8034"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga35302dbfc2517d692579948a9742d3ba"></a><!-- doxytag: member="req_layout::req_capsule_has_field" ref="ga35302dbfc2517d692579948a9742d3ba" args="(const struct req_capsule *pill, const struct req_msg_field *field, enum req_location loc)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#ga35302dbfc2517d692579948a9742d3ba">req_capsule_has_field</a> (const struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns a non-zero value if the given <em>field</em> is present in the format (<em>rc_fmt</em>) of <em>pill's</em> PTLRPC request or reply (<em>loc</em>), else it returns 0. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad281812fde0bdb0aaaed8a022e0008f2"></a><!-- doxytag: member="req_layout::req_capsule_field_present" ref="gad281812fde0bdb0aaaed8a022e0008f2" args="(const struct req_capsule *pill, const struct req_msg_field *field, enum req_location loc)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gad281812fde0bdb0aaaed8a022e0008f2">req_capsule_field_present</a> (const struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a non-zero value if the given <em>field</em> is present in the given <em>pill's</em> PTLRPC request or reply (<em>loc</em>), else it returns 0. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gaf42efe506903884592711902e9276e99">req_capsule_shrink</a> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, __u32 newlen, enum req_location loc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function shrinks the size of the _buffer_ of the <em>pill's</em> PTLRPC request or reply (<em>loc</em>).  <a href="#gaf42efe506903884592711902e9276e99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaacb466a54c06482fdcd07ff1f02f1020"></a><!-- doxytag: member="req_layout::req_capsule_server_grow" ref="gaacb466a54c06482fdcd07ff1f02f1020" args="(struct req_capsule *pill, const struct req_msg_field *field, __u32 newlen)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>req_capsule_server_grow</b> (struct <a class="el" href="structreq__capsule.html">req_capsule</a> *pill, const struct req_msg_field *field, __u32 newlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabc68a94db4df2ddba1ccf49d92273e59"></a><!-- doxytag: member="req_layout::req_layout_init" ref="gabc68a94db4df2ddba1ccf49d92273e59" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__req__layout.html#gabc68a94db4df2ddba1ccf49d92273e59">req_layout_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the capsule abstraction by computing and setting the <em>rf_idx</em> field of RQFs and the <em>rmf_offset</em> field of RMFs. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab174618426c48c3a979ebae327bf9af7"></a><!-- doxytag: member="req_layout::req_layout_fini" ref="gab174618426c48c3a979ebae327bf9af7" args="(void)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>req_layout_fini</b> (void)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae33f72a0dfe8a5c19d03bebb3ad7d167"></a><!-- doxytag: member="req_layout::RQF_OBD_PING" ref="gae33f72a0dfe8a5c19d03bebb3ad7d167" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OBD_PING</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5a87266704e432bc673b40193340bdde"></a><!-- doxytag: member="req_layout::RQF_OBD_SET_INFO" ref="ga5a87266704e432bc673b40193340bdde" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OBD_SET_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga63b5a82fef41ac6219787377314c7ebe"></a><!-- doxytag: member="req_layout::RQF_SEC_CTX" ref="ga63b5a82fef41ac6219787377314c7ebe" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_SEC_CTX</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacd73b490a5200c2545514643315a5e93"></a><!-- doxytag: member="req_layout::RQF_OBD_IDX_READ" ref="gacd73b490a5200c2545514643315a5e93" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OBD_IDX_READ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1dc2493cf1203ea0f9f3e0ccd8bb39e0"></a><!-- doxytag: member="req_layout::RQF_MGS_TARGET_REG" ref="ga1dc2493cf1203ea0f9f3e0ccd8bb39e0" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MGS_TARGET_REG</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5c689c386de6c06b152a669e4ee6e64a"></a><!-- doxytag: member="req_layout::RQF_MGS_SET_INFO" ref="ga5c689c386de6c06b152a669e4ee6e64a" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MGS_SET_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga92f7669eefd74fc651c12362cc526629"></a><!-- doxytag: member="req_layout::RQF_MGS_CONFIG_READ" ref="ga92f7669eefd74fc651c12362cc526629" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MGS_CONFIG_READ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadfcc78670f6bba4fcc65270a3fc7c8c3"></a><!-- doxytag: member="req_layout::RQF_SEQ_QUERY" ref="gadfcc78670f6bba4fcc65270a3fc7c8c3" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_SEQ_QUERY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1535361f373dadc64659cb86d7fb2783"></a><!-- doxytag: member="req_layout::RQF_FLD_QUERY" ref="ga1535361f373dadc64659cb86d7fb2783" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_FLD_QUERY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4c60db8015a9124e2e923de759dab3d8"></a><!-- doxytag: member="req_layout::RQF_FLD_READ" ref="ga4c60db8015a9124e2e923de759dab3d8" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_FLD_READ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad6f4eff7c4098c72b5b3c3415922be27"></a><!-- doxytag: member="req_layout::RQF_MDS_CONNECT" ref="gad6f4eff7c4098c72b5b3c3415922be27" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_CONNECT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga50b986d37053f4e305cd1303982f4135"></a><!-- doxytag: member="req_layout::RQF_MDS_DISCONNECT" ref="ga50b986d37053f4e305cd1303982f4135" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_DISCONNECT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4b196a3d26582c41dc9249d98111c121"></a><!-- doxytag: member="req_layout::RQF_MDS_STATFS" ref="ga4b196a3d26582c41dc9249d98111c121" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_STATFS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3f703dac4b53db2a3b6b53b0ab14f2e5"></a><!-- doxytag: member="req_layout::RQF_MDS_GET_ROOT" ref="ga3f703dac4b53db2a3b6b53b0ab14f2e5" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_GET_ROOT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9fc773b831b0fa1823b59692dab0cd33"></a><!-- doxytag: member="req_layout::RQF_MDS_SYNC" ref="ga9fc773b831b0fa1823b59692dab0cd33" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_SYNC</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2162e1a88c223064db0fb60ce20531d5"></a><!-- doxytag: member="req_layout::RQF_MDS_GETXATTR" ref="ga2162e1a88c223064db0fb60ce20531d5" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_GETXATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1f63a97848ed959b3ee7615dd6c628c1"></a><!-- doxytag: member="req_layout::RQF_MDS_GETATTR" ref="ga1f63a97848ed959b3ee7615dd6c628c1" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_GETATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaee9c327a2023940b8a1650af2d17cc54"></a><!-- doxytag: member="req_layout::RQF_OUT_UPDATE" ref="gaee9c327a2023940b8a1650af2d17cc54" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OUT_UPDATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0c89762c536740e7cc9fd32e3eaf5c70"></a><!-- doxytag: member="req_layout::RQF_MDS_GETATTR_NAME" ref="ga0c89762c536740e7cc9fd32e3eaf5c70" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_GETATTR_NAME</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga044f2da781ba8716461caab923c7a9be"></a><!-- doxytag: member="req_layout::RQF_MDS_CLOSE" ref="ga044f2da781ba8716461caab923c7a9be" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_CLOSE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8982c64a56064a33f01357d1af7fc1ad"></a><!-- doxytag: member="req_layout::RQF_MDS_INTENT_CLOSE" ref="ga8982c64a56064a33f01357d1af7fc1ad" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_INTENT_CLOSE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabdc9902ee3daf4b53f6af34cf5dfd182"></a><!-- doxytag: member="req_layout::RQF_MDS_GET_INFO" ref="gabdc9902ee3daf4b53f6af34cf5dfd182" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_GET_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga528eb0c3102f807481ae00b768c25302"></a><!-- doxytag: member="req_layout::RQF_MDS_READPAGE" ref="ga528eb0c3102f807481ae00b768c25302" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_READPAGE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7657beac668c846c7a873e630f1b4106"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT" ref="ga7657beac668c846c7a873e630f1b4106" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab47911ea543e6b612ec99db1fcd9627a"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_CREATE" ref="gab47911ea543e6b612ec99db1fcd9627a" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_CREATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9aa7af8d313d58a812a5b753320bffbd"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_CREATE_RMT_ACL" ref="ga9aa7af8d313d58a812a5b753320bffbd" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_CREATE_RMT_ACL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaca5b1a51c936a4e764e80a8424eadde6"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_CREATE_SLAVE" ref="gaca5b1a51c936a4e764e80a8424eadde6" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_CREATE_SLAVE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga52c0ddf58d4da7458a869a6785447042"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_CREATE_SYM" ref="ga52c0ddf58d4da7458a869a6785447042" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_CREATE_SYM</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8adf5a75a88590c18ee2402d5c444cb8"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_OPEN" ref="ga8adf5a75a88590c18ee2402d5c444cb8" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_OPEN</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga212d76775f9207249b214bec64011c00"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_UNLINK" ref="ga212d76775f9207249b214bec64011c00" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_UNLINK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac992bab79798b34d78c16892293f210e"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_LINK" ref="gac992bab79798b34d78c16892293f210e" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_LINK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4ec224fa01bf30cb946d38baede80e50"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_RENAME" ref="ga4ec224fa01bf30cb946d38baede80e50" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_RENAME</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf352655f97ea92a785ce488cb0285c3b"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_SETATTR" ref="gaf352655f97ea92a785ce488cb0285c3b" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_SETATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2ac15a5230dbcb52fa805430ded24dd8"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_SETXATTR" ref="ga2ac15a5230dbcb52fa805430ded24dd8" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_SETXATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad14c408d408d19a9d8c64bcfbac5a7bb"></a><!-- doxytag: member="req_layout::RQF_MDS_QUOTACTL" ref="gad14c408d408d19a9d8c64bcfbac5a7bb" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_QUOTACTL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga171653825b725211b9466ad257b8581b"></a><!-- doxytag: member="req_layout::RQF_QUOTA_DQACQ" ref="ga171653825b725211b9466ad257b8581b" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_QUOTA_DQACQ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad95e676cbb965645f08d88d180d19731"></a><!-- doxytag: member="req_layout::RQF_MDS_SWAP_LAYOUTS" ref="gad95e676cbb965645f08d88d180d19731" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_SWAP_LAYOUTS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga23db0d1c432679b1a789ebb9efbeab3e"></a><!-- doxytag: member="req_layout::RQF_MDS_REINT_MIGRATE" ref="ga23db0d1c432679b1a789ebb9efbeab3e" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_REINT_MIGRATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab38e73845ec42241498417b9cdacccdf"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_STATE_GET" ref="gab38e73845ec42241498417b9cdacccdf" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_STATE_GET</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad1d48543eb94560f9bbcac7cbd55c2ec"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_STATE_SET" ref="gad1d48543eb94560f9bbcac7cbd55c2ec" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_STATE_SET</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab5ee3f4550ad032180335c95222823a5"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_ACTION" ref="gab5ee3f4550ad032180335c95222823a5" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_ACTION</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0011eb087090347ab95a8a4926f748a0"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_PROGRESS" ref="ga0011eb087090347ab95a8a4926f748a0" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_PROGRESS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaddee58864634602cad14da75f848b7be"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_CT_REGISTER" ref="gaddee58864634602cad14da75f848b7be" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_CT_REGISTER</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa369c2744a14ff1cd808648494723adc"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_CT_UNREGISTER" ref="gaa369c2744a14ff1cd808648494723adc" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_CT_UNREGISTER</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1a40cfdbdcb5f8ebacf2c8fb87466f18"></a><!-- doxytag: member="req_layout::RQF_MDS_HSM_REQUEST" ref="ga1a40cfdbdcb5f8ebacf2c8fb87466f18" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_MDS_HSM_REQUEST</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3e12e038ae271e7ac512b10f1939ff28"></a><!-- doxytag: member="req_layout::RQF_OST_CONNECT" ref="ga3e12e038ae271e7ac512b10f1939ff28" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_CONNECT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga85f7cf7b25476a8e10e9730b06a86a82"></a><!-- doxytag: member="req_layout::RQF_OST_DISCONNECT" ref="ga85f7cf7b25476a8e10e9730b06a86a82" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_DISCONNECT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaac2dcc43d3085a02f5e6a2ffc0b8cc6c"></a><!-- doxytag: member="req_layout::RQF_OST_QUOTACTL" ref="gaac2dcc43d3085a02f5e6a2ffc0b8cc6c" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_QUOTACTL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5a1b0c33671dd6488c186ff334b54823"></a><!-- doxytag: member="req_layout::RQF_OST_GETATTR" ref="ga5a1b0c33671dd6488c186ff334b54823" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_GETATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga10572156994047bd41f112bebd7d7e4f"></a><!-- doxytag: member="req_layout::RQF_OST_SETATTR" ref="ga10572156994047bd41f112bebd7d7e4f" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_SETATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga74b5fe2cafbbf5a872cc51042e5bcf07"></a><!-- doxytag: member="req_layout::RQF_OST_CREATE" ref="ga74b5fe2cafbbf5a872cc51042e5bcf07" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_CREATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4dd5a1ae491ee3aaa5bc4dcc62a68853"></a><!-- doxytag: member="req_layout::RQF_OST_PUNCH" ref="ga4dd5a1ae491ee3aaa5bc4dcc62a68853" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_PUNCH</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga169d2a91692757532621776443371575"></a><!-- doxytag: member="req_layout::RQF_OST_SYNC" ref="ga169d2a91692757532621776443371575" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_SYNC</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaac485486c597c1d929f9f168f088a1f2"></a><!-- doxytag: member="req_layout::RQF_OST_DESTROY" ref="gaac485486c597c1d929f9f168f088a1f2" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_DESTROY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0b1a0df05cc81439ef2c221e2bafc2ea"></a><!-- doxytag: member="req_layout::RQF_OST_BRW_READ" ref="ga0b1a0df05cc81439ef2c221e2bafc2ea" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_BRW_READ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaae8a07ae896452677ebe59a6ebe81490"></a><!-- doxytag: member="req_layout::RQF_OST_BRW_WRITE" ref="gaae8a07ae896452677ebe59a6ebe81490" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_BRW_WRITE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga34d09bfa8a1d98a070985f9d68ca2892"></a><!-- doxytag: member="req_layout::RQF_OST_STATFS" ref="ga34d09bfa8a1d98a070985f9d68ca2892" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_STATFS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1cc08b9ca32b15a1f0f019ecaf1b9d23"></a><!-- doxytag: member="req_layout::RQF_OST_SET_GRANT_INFO" ref="ga1cc08b9ca32b15a1f0f019ecaf1b9d23" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_SET_GRANT_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafd2ac1d5534d7f3e116362a70d569d89"></a><!-- doxytag: member="req_layout::RQF_OST_GET_INFO" ref="gafd2ac1d5534d7f3e116362a70d569d89" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_GET_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0dd30163857ec1ea5e432ceea45c3307"></a><!-- doxytag: member="req_layout::RQF_OST_GET_INFO_LAST_ID" ref="ga0dd30163857ec1ea5e432ceea45c3307" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_GET_INFO_LAST_ID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga70af2fb77947e035e4d44ec721f3b35d"></a><!-- doxytag: member="req_layout::RQF_OST_GET_INFO_LAST_FID" ref="ga70af2fb77947e035e4d44ec721f3b35d" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_GET_INFO_LAST_FID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga539d8928576b84360735f89663e61618"></a><!-- doxytag: member="req_layout::RQF_OST_SET_INFO_LAST_FID" ref="ga539d8928576b84360735f89663e61618" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_SET_INFO_LAST_FID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae47080233a9b8a684dae749f1e0c0583"></a><!-- doxytag: member="req_layout::RQF_OST_GET_INFO_FIEMAP" ref="gae47080233a9b8a684dae749f1e0c0583" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_GET_INFO_FIEMAP</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5ab1de79d5fc2fbf53f9cad8dca514c3"></a><!-- doxytag: member="req_layout::RQF_OST_LADVISE" ref="ga5ab1de79d5fc2fbf53f9cad8dca514c3" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_OST_LADVISE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaca70251ad110bb8d1b0c87cf47f07099"></a><!-- doxytag: member="req_layout::RQF_LDLM_ENQUEUE" ref="gaca70251ad110bb8d1b0c87cf47f07099" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_ENQUEUE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1d1e24888c9bbb455e1354a8a7c85be0"></a><!-- doxytag: member="req_layout::RQF_LDLM_ENQUEUE_LVB" ref="ga1d1e24888c9bbb455e1354a8a7c85be0" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_ENQUEUE_LVB</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9308d945ee2b5e7d5295897fe43b6485"></a><!-- doxytag: member="req_layout::RQF_LDLM_CONVERT" ref="ga9308d945ee2b5e7d5295897fe43b6485" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_CONVERT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8ec79914394c533b63df5c52da731099"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT" ref="ga8ec79914394c533b63df5c52da731099" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0ea54de55b477fc450bd46ffa7f4fe88"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_BASIC" ref="ga0ea54de55b477fc450bd46ffa7f4fe88" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_BASIC</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga10fd940ac9c5a7a57e80864df1fffe1f"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_LAYOUT" ref="ga10fd940ac9c5a7a57e80864df1fffe1f" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_LAYOUT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga208c563f5a82f71fd15f7dcef228ba21"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_GETATTR" ref="ga208c563f5a82f71fd15f7dcef228ba21" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_GETATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac91f45f26e8317e1e8500f05f7d6ca40"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_OPEN" ref="gac91f45f26e8317e1e8500f05f7d6ca40" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_OPEN</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4260b21dbb255911c26e069ccbd176a4"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_CREATE" ref="ga4260b21dbb255911c26e069ccbd176a4" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_CREATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5e3cdcd0ac571bef10b1a2a15616971d"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_UNLINK" ref="ga5e3cdcd0ac571bef10b1a2a15616971d" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_UNLINK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4a38ec15c2b45b12efeeec57fd874187"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_GETXATTR" ref="ga4a38ec15c2b45b12efeeec57fd874187" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_GETXATTR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3b522edc5287c2a4652f4655bd17ecd5"></a><!-- doxytag: member="req_layout::RQF_LDLM_INTENT_QUOTA" ref="ga3b522edc5287c2a4652f4655bd17ecd5" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_INTENT_QUOTA</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga882f032578cf8d56f6d00d54412f5a12"></a><!-- doxytag: member="req_layout::RQF_LDLM_CANCEL" ref="ga882f032578cf8d56f6d00d54412f5a12" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_CANCEL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacfd1c49f0e4006be0f16f2a1bef373c5"></a><!-- doxytag: member="req_layout::RQF_LDLM_CALLBACK" ref="gacfd1c49f0e4006be0f16f2a1bef373c5" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_CALLBACK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4c10bbbbae05798adc29c93574e5062a"></a><!-- doxytag: member="req_layout::RQF_LDLM_CP_CALLBACK" ref="ga4c10bbbbae05798adc29c93574e5062a" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_CP_CALLBACK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadb02913e2ee9770d1fb759a978a1b56a"></a><!-- doxytag: member="req_layout::RQF_LDLM_BL_CALLBACK" ref="gadb02913e2ee9770d1fb759a978a1b56a" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_BL_CALLBACK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae141fed8e88604e47bab590ea0634cb6"></a><!-- doxytag: member="req_layout::RQF_LDLM_GL_CALLBACK" ref="gae141fed8e88604e47bab590ea0634cb6" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_GL_CALLBACK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga16cbb1b9671b5985cd4b2b5da3119a1a"></a><!-- doxytag: member="req_layout::RQF_LDLM_GL_DESC_CALLBACK" ref="ga16cbb1b9671b5985cd4b2b5da3119a1a" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LDLM_GL_DESC_CALLBACK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4c30ac0fdf004c6ce61b5751107c6375"></a><!-- doxytag: member="req_layout::RQF_LOG_CANCEL" ref="ga4c30ac0fdf004c6ce61b5751107c6375" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LOG_CANCEL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae0491494e865558584fb01ce4d470f91"></a><!-- doxytag: member="req_layout::RQF_LLOG_ORIGIN_HANDLE_CREATE" ref="gae0491494e865558584fb01ce4d470f91" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LLOG_ORIGIN_HANDLE_CREATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9580902b23ac27349d2b60e1cc611849"></a><!-- doxytag: member="req_layout::RQF_LLOG_ORIGIN_HANDLE_DESTROY" ref="ga9580902b23ac27349d2b60e1cc611849" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LLOG_ORIGIN_HANDLE_DESTROY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6fea400d45a3b221fd8989112f59ea41"></a><!-- doxytag: member="req_layout::RQF_LLOG_ORIGIN_HANDLE_NEXT_BLOCK" ref="ga6fea400d45a3b221fd8989112f59ea41" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LLOG_ORIGIN_HANDLE_NEXT_BLOCK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5c71cd42e6e9a034df20bd4ffcdb233c"></a><!-- doxytag: member="req_layout::RQF_LLOG_ORIGIN_HANDLE_PREV_BLOCK" ref="ga5c71cd42e6e9a034df20bd4ffcdb233c" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LLOG_ORIGIN_HANDLE_PREV_BLOCK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae12f1c7c494f3d240a6db1dbb7a09ac1"></a><!-- doxytag: member="req_layout::RQF_LLOG_ORIGIN_HANDLE_READ_HEADER" ref="gae12f1c7c494f3d240a6db1dbb7a09ac1" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LLOG_ORIGIN_HANDLE_READ_HEADER</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga80a727094ed326625ea1b569b36ef164"></a><!-- doxytag: member="req_layout::RQF_LLOG_ORIGIN_CONNECT" ref="ga80a727094ed326625ea1b569b36ef164" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LLOG_ORIGIN_CONNECT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga19dbc9f7aee4efb2d2c8c045ebddfda1"></a><!-- doxytag: member="req_layout::RQF_CONNECT" ref="ga19dbc9f7aee4efb2d2c8c045ebddfda1" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_CONNECT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9aed0d453b85d7b86b6c730cc45108a1"></a><!-- doxytag: member="req_layout::RQF_LFSCK_NOTIFY" ref="ga9aed0d453b85d7b86b6c730cc45108a1" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LFSCK_NOTIFY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9595b2d8f4eb1eedd247b6587bc0fc72"></a><!-- doxytag: member="req_layout::RQF_LFSCK_QUERY" ref="ga9595b2d8f4eb1eedd247b6587bc0fc72" args="" -->
struct req_format&nbsp;</td><td class="memItemRight" valign="bottom"><b>RQF_LFSCK_QUERY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac9833e4cef8662d832d0bde024fb05ad"></a><!-- doxytag: member="req_layout::RMF_GENERIC_DATA" ref="gac9833e4cef8662d832d0bde024fb05ad" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_GENERIC_DATA</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga69dbf19d8cd8469b58641821a34e8c81"></a><!-- doxytag: member="req_layout::RMF_PTLRPC_BODY" ref="ga69dbf19d8cd8469b58641821a34e8c81" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_PTLRPC_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1c9ae136d2e4b00329d63bcb718c9d93"></a><!-- doxytag: member="req_layout::RMF_MDT_BODY" ref="ga1c9ae136d2e4b00329d63bcb718c9d93" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDT_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf5b39dd569540eeb50f6491946026eab"></a><!-- doxytag: member="req_layout::RMF_MDT_EPOCH" ref="gaf5b39dd569540eeb50f6491946026eab" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDT_EPOCH</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5f09f8b46e4044f8a1e7d3a3078a9c99"></a><!-- doxytag: member="req_layout::RMF_OBD_STATFS" ref="ga5f09f8b46e4044f8a1e7d3a3078a9c99" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OBD_STATFS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga59a91b2f2fa3a11f9676b693bb8cafca"></a><!-- doxytag: member="req_layout::RMF_NAME" ref="ga59a91b2f2fa3a11f9676b693bb8cafca" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_NAME</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga72d39428b7fdb31e64ed7a1ffc7fa463"></a><!-- doxytag: member="req_layout::RMF_SYMTGT" ref="ga72d39428b7fdb31e64ed7a1ffc7fa463" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_SYMTGT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadaa655bd0936e36dea97052fdfaafe91"></a><!-- doxytag: member="req_layout::RMF_TGTUUID" ref="gadaa655bd0936e36dea97052fdfaafe91" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_TGTUUID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga777e64ca5b6e11f4ca75b99fc4ecadf4"></a><!-- doxytag: member="req_layout::RMF_CLUUID" ref="ga777e64ca5b6e11f4ca75b99fc4ecadf4" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_CLUUID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga13757565e338a67f1abf3f4ba1a357ea"></a><!-- doxytag: member="req_layout::RMF_SETINFO_VAL" ref="ga13757565e338a67f1abf3f4ba1a357ea" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_SETINFO_VAL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5a1cec6661bbaef33e8f8e0534af66c6"></a><!-- doxytag: member="req_layout::RMF_SETINFO_KEY" ref="ga5a1cec6661bbaef33e8f8e0534af66c6" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_SETINFO_KEY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf4501e4548d79700e05eed7ca488773f"></a><!-- doxytag: member="req_layout::RMF_GETINFO_VAL" ref="gaf4501e4548d79700e05eed7ca488773f" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_GETINFO_VAL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5bb6edea1d44a08e52b5dc361cb1af94"></a><!-- doxytag: member="req_layout::RMF_GETINFO_VALLEN" ref="ga5bb6edea1d44a08e52b5dc361cb1af94" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_GETINFO_VALLEN</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga23d6b27a039ff27472dd15d20258a4b5"></a><!-- doxytag: member="req_layout::RMF_GETINFO_KEY" ref="ga23d6b27a039ff27472dd15d20258a4b5" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_GETINFO_KEY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6adccef56f4c7da65cd9706dfcd88776"></a><!-- doxytag: member="req_layout::RMF_IDX_INFO" ref="ga6adccef56f4c7da65cd9706dfcd88776" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_IDX_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7d71573453f9d62cca6ae3098203676e"></a><!-- doxytag: member="req_layout::RMF_CLOSE_DATA" ref="ga7d71573453f9d62cca6ae3098203676e" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_CLOSE_DATA</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaba55c9fbe449ea036c81e9437226a220"></a><!-- doxytag: member="req_layout::RMF_CONN" ref="gaba55c9fbe449ea036c81e9437226a220" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_CONN</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga28f3a6607ad9b0bf92ffe8640bacd232"></a><!-- doxytag: member="req_layout::RMF_CONNECT_DATA" ref="ga28f3a6607ad9b0bf92ffe8640bacd232" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_CONNECT_DATA</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab1c6426fa667c8dd68331801aad0806b"></a><!-- doxytag: member="req_layout::RMF_DLM_REQ" ref="gab1c6426fa667c8dd68331801aad0806b" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_DLM_REQ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf40421db2366491bccd08772b11a5207"></a><!-- doxytag: member="req_layout::RMF_DLM_REP" ref="gaf40421db2366491bccd08772b11a5207" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_DLM_REP</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga56e0b6e5796ef17e49941b918803bd9b"></a><!-- doxytag: member="req_layout::RMF_DLM_LVB" ref="ga56e0b6e5796ef17e49941b918803bd9b" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_DLM_LVB</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacbe79f8c947b224cc6efb2128ecdf8ec"></a><!-- doxytag: member="req_layout::RMF_DLM_GL_DESC" ref="gacbe79f8c947b224cc6efb2128ecdf8ec" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_DLM_GL_DESC</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga168057bd3f15db31e3de7bda3478d66f"></a><!-- doxytag: member="req_layout::RMF_LDLM_INTENT" ref="ga168057bd3f15db31e3de7bda3478d66f" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LDLM_INTENT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga14d9b9da60abd470b1b0426b52e4e496"></a><!-- doxytag: member="req_layout::RMF_LAYOUT_INTENT" ref="ga14d9b9da60abd470b1b0426b52e4e496" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LAYOUT_INTENT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gade2ec2e43c06a356c115057f027b5736"></a><!-- doxytag: member="req_layout::RMF_MDT_MD" ref="gade2ec2e43c06a356c115057f027b5736" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDT_MD</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga114d0ddc3d12340d47be095d89bbcec4"></a><!-- doxytag: member="req_layout::RMF_REC_REINT" ref="ga114d0ddc3d12340d47be095d89bbcec4" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_REC_REINT</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac100183fd493f696da33eac97ab5818a"></a><!-- doxytag: member="req_layout::RMF_EADATA" ref="gac100183fd493f696da33eac97ab5818a" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_EADATA</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6427d95dd8a76ee5da487fba372478eb"></a><!-- doxytag: member="req_layout::RMF_EAVALS" ref="ga6427d95dd8a76ee5da487fba372478eb" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_EAVALS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2131594f890a9c1e688c5661fb92f032"></a><!-- doxytag: member="req_layout::RMF_EAVALS_LENS" ref="ga2131594f890a9c1e688c5661fb92f032" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_EAVALS_LENS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0feca48686dcc8b0b6ad7187318d5267"></a><!-- doxytag: member="req_layout::RMF_ACL" ref="ga0feca48686dcc8b0b6ad7187318d5267" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_ACL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3413557a4b4f5df8ef3ce8048abf3c3c"></a><!-- doxytag: member="req_layout::RMF_LOGCOOKIES" ref="ga3413557a4b4f5df8ef3ce8048abf3c3c" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LOGCOOKIES</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga75542ef4ec9ee1cd7f16487388e2e12a"></a><!-- doxytag: member="req_layout::RMF_CAPA1" ref="ga75542ef4ec9ee1cd7f16487388e2e12a" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_CAPA1</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad4582fc11325b0105a0427d9446b6fe9"></a><!-- doxytag: member="req_layout::RMF_CAPA2" ref="gad4582fc11325b0105a0427d9446b6fe9" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_CAPA2</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga79d7274b6aed381ecb08a13aa42a05b3"></a><!-- doxytag: member="req_layout::RMF_OBD_QUOTACHECK" ref="ga79d7274b6aed381ecb08a13aa42a05b3" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OBD_QUOTACHECK</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabaf62887d4397df8d89e0afc46429c82"></a><!-- doxytag: member="req_layout::RMF_OBD_QUOTACTL" ref="gabaf62887d4397df8d89e0afc46429c82" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OBD_QUOTACTL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga578c1286c0a05d3c6b19165261596ee0"></a><!-- doxytag: member="req_layout::RMF_QUOTA_BODY" ref="ga578c1286c0a05d3c6b19165261596ee0" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_QUOTA_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga19f0f7e6254be01389d0a2cc850b3fef"></a><!-- doxytag: member="req_layout::RMF_STRING" ref="ga19f0f7e6254be01389d0a2cc850b3fef" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_STRING</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga85b26b8882ce7ddfc2f831ef25d62e45"></a><!-- doxytag: member="req_layout::RMF_SWAP_LAYOUTS" ref="ga85b26b8882ce7ddfc2f831ef25d62e45" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_SWAP_LAYOUTS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa4cfc6889f15d3763c90639d449723dd"></a><!-- doxytag: member="req_layout::RMF_MDS_HSM_PROGRESS" ref="gaa4cfc6889f15d3763c90639d449723dd" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDS_HSM_PROGRESS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab5548598349448632ec821e535ef8043"></a><!-- doxytag: member="req_layout::RMF_MDS_HSM_REQUEST" ref="gab5548598349448632ec821e535ef8043" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDS_HSM_REQUEST</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaed89b47347b6166a5134a8d45e56eb70"></a><!-- doxytag: member="req_layout::RMF_MDS_HSM_USER_ITEM" ref="gaed89b47347b6166a5134a8d45e56eb70" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDS_HSM_USER_ITEM</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3c5e2dcae0ef6d3b20a451ef9e014e40"></a><!-- doxytag: member="req_layout::RMF_MDS_HSM_ARCHIVE" ref="ga3c5e2dcae0ef6d3b20a451ef9e014e40" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDS_HSM_ARCHIVE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac053038c02a03d13a1eb4a652773c1c2"></a><!-- doxytag: member="req_layout::RMF_HSM_USER_STATE" ref="gac053038c02a03d13a1eb4a652773c1c2" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_HSM_USER_STATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa77a21835d9eaf48c58578b063ef10cc"></a><!-- doxytag: member="req_layout::RMF_HSM_STATE_SET" ref="gaa77a21835d9eaf48c58578b063ef10cc" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_HSM_STATE_SET</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafe6a9be6feba4dbdded02eab810e5416"></a><!-- doxytag: member="req_layout::RMF_MDS_HSM_CURRENT_ACTION" ref="gafe6a9be6feba4dbdded02eab810e5416" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MDS_HSM_CURRENT_ACTION</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac317c8a8204be09d838c605a0f9ccd66"></a><!-- doxytag: member="req_layout::RMF_SEQ_OPC" ref="gac317c8a8204be09d838c605a0f9ccd66" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_SEQ_OPC</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga86d54c603b6371d3ae46f55d269539af"></a><!-- doxytag: member="req_layout::RMF_SEQ_RANGE" ref="ga86d54c603b6371d3ae46f55d269539af" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_SEQ_RANGE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5d3bab3d8c20829136b778f37fbecf6c"></a><!-- doxytag: member="req_layout::RMF_FID_SPACE" ref="ga5d3bab3d8c20829136b778f37fbecf6c" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_FID_SPACE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaef44bea4951d292931a5d3279166372d"></a><!-- doxytag: member="req_layout::RMF_FLD_OPC" ref="gaef44bea4951d292931a5d3279166372d" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_FLD_OPC</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga17cd722a502d7029fadc8a60a1ee3e0b"></a><!-- doxytag: member="req_layout::RMF_FLD_MDFLD" ref="ga17cd722a502d7029fadc8a60a1ee3e0b" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_FLD_MDFLD</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga44b3fafcc43aebb3a2bd7d2e3bafde9e"></a><!-- doxytag: member="req_layout::RMF_LLOGD_BODY" ref="ga44b3fafcc43aebb3a2bd7d2e3bafde9e" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LLOGD_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0a1b5133252e3aa0873a4dacbe9d8391"></a><!-- doxytag: member="req_layout::RMF_LLOG_LOG_HDR" ref="ga0a1b5133252e3aa0873a4dacbe9d8391" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LLOG_LOG_HDR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0d6f5cbbdf1a39d6684196b6bcd8d5a3"></a><!-- doxytag: member="req_layout::RMF_LLOGD_CONN_BODY" ref="ga0d6f5cbbdf1a39d6684196b6bcd8d5a3" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LLOGD_CONN_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf807215b53349dd73538c192a26e3110"></a><!-- doxytag: member="req_layout::RMF_MGS_TARGET_INFO" ref="gaf807215b53349dd73538c192a26e3110" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MGS_TARGET_INFO</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaef60a2b0154d2e1698e10db91bb191fa"></a><!-- doxytag: member="req_layout::RMF_MGS_SEND_PARAM" ref="gaef60a2b0154d2e1698e10db91bb191fa" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MGS_SEND_PARAM</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0e30f867da01be48e6020bfde82d5e3a"></a><!-- doxytag: member="req_layout::RMF_OST_BODY" ref="ga0e30f867da01be48e6020bfde82d5e3a" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OST_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga614728b537380e103ab438e1c10d945b"></a><!-- doxytag: member="req_layout::RMF_OBD_IOOBJ" ref="ga614728b537380e103ab438e1c10d945b" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OBD_IOOBJ</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabce5324e0e15ac601997c24cc4c46b1f"></a><!-- doxytag: member="req_layout::RMF_OBD_ID" ref="gabce5324e0e15ac601997c24cc4c46b1f" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OBD_ID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga257291d2ecf91f548947358ef410ffe3"></a><!-- doxytag: member="req_layout::RMF_FID" ref="ga257291d2ecf91f548947358ef410ffe3" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_FID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2d85a223b1b8f11319a555933de35f53"></a><!-- doxytag: member="req_layout::RMF_NIOBUF_REMOTE" ref="ga2d85a223b1b8f11319a555933de35f53" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_NIOBUF_REMOTE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaba485197bc88fef0da573c3548df6171"></a><!-- doxytag: member="req_layout::RMF_RCS" ref="gaba485197bc88fef0da573c3548df6171" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_RCS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga63ac6e17a921fa7504b27685242da2f1"></a><!-- doxytag: member="req_layout::RMF_FIEMAP_KEY" ref="ga63ac6e17a921fa7504b27685242da2f1" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_FIEMAP_KEY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1de53d9412bbb04d359435c19b299196"></a><!-- doxytag: member="req_layout::RMF_FIEMAP_VAL" ref="ga1de53d9412bbb04d359435c19b299196" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_FIEMAP_VAL</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3738d0253149165349756cbf439c159f"></a><!-- doxytag: member="req_layout::RMF_OST_ID" ref="ga3738d0253149165349756cbf439c159f" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OST_ID</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga41792d0c1c71383cd83c45c7480f1057"></a><!-- doxytag: member="req_layout::RMF_MGS_CONFIG_BODY" ref="ga41792d0c1c71383cd83c45c7480f1057" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MGS_CONFIG_BODY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaaf306386eeb90606ddcb6ce07f47e3e8"></a><!-- doxytag: member="req_layout::RMF_MGS_CONFIG_RES" ref="gaaf306386eeb90606ddcb6ce07f47e3e8" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_MGS_CONFIG_RES</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga889e1429bd0adfc0396e1d91bb138eb7"></a><!-- doxytag: member="req_layout::RMF_U32" ref="ga889e1429bd0adfc0396e1d91bb138eb7" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_U32</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf9db77fabf0ba73554a150f68cc3064e"></a><!-- doxytag: member="req_layout::RMF_OUT_UPDATE" ref="gaf9db77fabf0ba73554a150f68cc3064e" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OUT_UPDATE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacf88f5f3234ab50c7b38bf275cf3eb68"></a><!-- doxytag: member="req_layout::RMF_OUT_UPDATE_REPLY" ref="gacf88f5f3234ab50c7b38bf275cf3eb68" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OUT_UPDATE_REPLY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4735f6b7511d091df260afd77387c394"></a><!-- doxytag: member="req_layout::RMF_OUT_UPDATE_HEADER" ref="ga4735f6b7511d091df260afd77387c394" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OUT_UPDATE_HEADER</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga02239d4b0efaf3b5fac1b734d93e6566"></a><!-- doxytag: member="req_layout::RMF_OUT_UPDATE_BUF" ref="ga02239d4b0efaf3b5fac1b734d93e6566" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OUT_UPDATE_BUF</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga67c4a3bce7d28297c39f76db80e177b0"></a><!-- doxytag: member="req_layout::RMF_LFSCK_REQUEST" ref="ga67c4a3bce7d28297c39f76db80e177b0" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LFSCK_REQUEST</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0126b83111efcb55fe5da28b93facd2d"></a><!-- doxytag: member="req_layout::RMF_LFSCK_REPLY" ref="ga0126b83111efcb55fe5da28b93facd2d" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_LFSCK_REPLY</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga50427fb813187ac53f825e9d4a38ea2a"></a><!-- doxytag: member="req_layout::RMF_OST_LADVISE_HDR" ref="ga50427fb813187ac53f825e9d4a38ea2a" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OST_LADVISE_HDR</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabaa7e5ab3089ffd335fe7535e29796de"></a><!-- doxytag: member="req_layout::RMF_OST_LADVISE" ref="gabaa7e5ab3089ffd335fe7535e29796de" args="" -->
struct req_msg_field&nbsp;</td><td class="memItemRight" valign="bottom"><b>RMF_OST_LADVISE</b></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga3fc75d391659404f616707d6fb07996c"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_client_sized_get" ref="ga3fc75d391659404f616707d6fb07996c" args="(struct req_capsule *pill, const struct req_msg_field *field, __u32 len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* req_capsule_client_sized_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Utility that combines <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> and <a class="el" href="group__req__layout.html#ga0ecb097da2dfa5ac12ec0ef1f33d3e88" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC request buffer...">req_capsule_client_get()</a>. </p>
<p>First the <em>pill's</em> request <em>field's</em> size is set (<em>rc_area</em>) using <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> with the given <em>len</em>. Then the actual buffer is returned. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02145">2145</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02148"></a>02148 {
<a name="l02149"></a>02149         <a class="code" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size</a>(pill, field, RCL_CLIENT, len);
<a name="l02150"></a>02150         <span class="keywordflow">return</span> __req_capsule_get(pill, field, RCL_CLIENT, NULL, 0);
<a name="l02151"></a>02151 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga3fc75d391659404f616707d6fb07996c_cgraph.png" border="0" usemap="#group__req__layout_ga3fc75d391659404f616707d6fb07996c_cgraph_map" alt=""></div>
<map name="group__req__layout_ga3fc75d391659404f616707d6fb07996c_cgraph_map" id="group__req__layout_ga3fc75d391659404f616707d6fb07996c_cgraph">
<area shape="rect" id="node3" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the..." alt="" coords="276,5,441,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac914443e1274834268e66d85141b8f61"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_client_swab_get" ref="gac914443e1274834268e66d85141b8f61" args="(struct req_capsule *pill, const struct req_msg_field *field, void *swabber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* req_capsule_client_swab_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>swabber</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Same as <a class="el" href="group__req__layout.html#ga0ecb097da2dfa5ac12ec0ef1f33d3e88" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC request buffer...">req_capsule_client_get()</a>, but with a <em>swabber</em> argument. </p>
<p>Currently unused; will be removed when <a class="el" href="group__req__layout.html#ga2a563cb9386620862b510aedf886c6ee" title="Same as req_capsule_server_get(), but with a swabber argument.">req_capsule_server_swab_get()</a> is unused too. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02130">2130</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02133"></a>02133 {
<a name="l02134"></a>02134         <span class="keywordflow">return</span> __req_capsule_get(pill, field, RCL_CLIENT, swabber, 0);
<a name="l02135"></a>02135 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad16c26c15f59593e2e005e4afbeb8034"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_extend" ref="gad16c26c15f59593e2e005e4afbeb8034" args="(struct req_capsule *pill, const struct req_format *fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void req_capsule_extend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_format *&nbsp;</td>
          <td class="paramname"> <em>fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Changes the format of an RPC. </p>
<p>The pill must already have been initialized, which means that it already has a request format. The new format <em>fmt</em> must be an extension of the pill's old format. Specifically: the new format must have as many request and reply fields as the old one, and all fields shared by the old and new format must be at least as large in the new format.</p>
<p>The new format's fields may be of different "type" than the old format, but only for fields that are "opaque" blobs: fields which have a) have no <em>rmf_swabber</em>, b) <em>rmf_flags</em> == 0 or RMF_F_NO_SIZE_CHECK, and c) <em>rmf_size</em> == -1 or <em>rmf_flags</em> == RMF_F_NO_SIZE_CHECK. For example, OBD_SET_INFO has a key field and an opaque value field that gets interpreted according to the key field. When the value, according to the key, contains a structure (or array thereof) to be swabbed, the format should be changed to one where the value field has <em>rmf_size/rmf_flags/rmf_swabber</em> set accordingly. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02339">2339</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02340"></a>02340 {
<a name="l02341"></a>02341         <span class="keywordtype">int</span> i;
<a name="l02342"></a>02342         <span class="keywordtype">size_t</span> j;
<a name="l02343"></a>02343 
<a name="l02344"></a>02344         <span class="keyword">const</span> <span class="keyword">struct </span>req_format *old;
<a name="l02345"></a>02345 
<a name="l02346"></a>02346         LASSERT(pill-&gt;rc_fmt != NULL);
<a name="l02347"></a>02347         LASSERT(__req_format_is_sane(fmt));
<a name="l02348"></a>02348 
<a name="l02349"></a>02349         old = pill-&gt;rc_fmt;
<a name="l02350"></a>02350         <span class="comment">/*</span>
<a name="l02351"></a>02351 <span class="comment">         * Sanity checking...</span>
<a name="l02352"></a>02352 <span class="comment">         */</span>
<a name="l02353"></a>02353         <span class="keywordflow">for</span> (i = 0; i &lt; RCL_NR; ++i) {
<a name="l02354"></a>02354                 LASSERT(fmt-&gt;rf_fields[i].nr &gt;= old-&gt;rf_fields[i].nr);
<a name="l02355"></a>02355                 <span class="keywordflow">for</span> (j = 0; j &lt; old-&gt;rf_fields[i].nr - 1; ++j) {
<a name="l02356"></a>02356                         <span class="keyword">const</span> <span class="keyword">struct </span>req_msg_field *ofield = FMT_FIELD(old, i, j);
<a name="l02357"></a>02357 
<a name="l02358"></a>02358                         <span class="comment">/* &quot;opaque&quot; fields can be transmogrified */</span>
<a name="l02359"></a>02359                         <span class="keywordflow">if</span> (ofield-&gt;rmf_swabber == NULL &amp;&amp;
<a name="l02360"></a>02360                             (ofield-&gt;rmf_flags &amp; ~RMF_F_NO_SIZE_CHECK) == 0 &amp;&amp;
<a name="l02361"></a>02361                             (ofield-&gt;rmf_size == -1 ||
<a name="l02362"></a>02362                             ofield-&gt;rmf_flags == RMF_F_NO_SIZE_CHECK))
<a name="l02363"></a>02363                                 <span class="keywordflow">continue</span>;
<a name="l02364"></a>02364                         LASSERT(FMT_FIELD(fmt, i, j) == FMT_FIELD(old, i, j));
<a name="l02365"></a>02365                 }
<a name="l02366"></a>02366                 <span class="comment">/*</span>
<a name="l02367"></a>02367 <span class="comment">                 * Last field in old format can be shorter than in new.</span>
<a name="l02368"></a>02368 <span class="comment">                 */</span>
<a name="l02369"></a>02369                 LASSERT(FMT_FIELD(fmt, i, j)-&gt;rmf_size &gt;=
<a name="l02370"></a>02370                         FMT_FIELD(old, i, j)-&gt;rmf_size);
<a name="l02371"></a>02371         }
<a name="l02372"></a>02372 
<a name="l02373"></a>02373         pill-&gt;rc_fmt = fmt;
<a name="l02374"></a>02374 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_gad16c26c15f59593e2e005e4afbeb8034_icgraph.png" border="0" usemap="#group__req__layout_gad16c26c15f59593e2e005e4afbeb8034_icgraph_map" alt=""></div>
<map name="group__req__layout_gad16c26c15f59593e2e005e4afbeb8034_icgraph_map" id="group__req__layout_gad16c26c15f59593e2e005e4afbeb8034_icgraph">
<area shape="rect" id="node3" href="group__ldlm__cli__api.html#gac3edcad1b11e283d6ef8455a2b598b07" title="Client&#45;side lock enqueue." alt="" coords="213,5,349,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab0f7a8e2a51867454ce8f87bb48b0f77"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_filled_sizes" ref="gab0f7a8e2a51867454ce8f87bb48b0f77" args="(struct req_capsule *pill, enum req_location loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t req_capsule_filled_sizes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fills in any parts of the <em>rc_area</em> of a <em>pill</em> that haven't been filled in yet. </p>
<p><em>rc_area</em> is an array of REQ_MAX_FIELD_NR elements, used to store sizes of variable-sized fields. The field sizes come from the declared <em>rmf_size</em> field of a <em>pill's</em> <em>rc_fmt's</em> RMF's. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l01833">1833</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01185">ldlm_cli_cancel_req()</a>, <a class="el" href="ldlm__request_8c_source.html#l00762">ldlm_prep_elc_req()</a>, and <a class="el" href="layout_8c_source.html#l01868">req_capsule_server_pack()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01835"></a>01835 {
<a name="l01836"></a>01836         <span class="keyword">const</span> <span class="keyword">struct </span>req_format *fmt = pill-&gt;rc_fmt;
<a name="l01837"></a>01837         <span class="keywordtype">size_t</span>                   i;
<a name="l01838"></a>01838 
<a name="l01839"></a>01839         LASSERT(fmt != NULL);
<a name="l01840"></a>01840 
<a name="l01841"></a>01841         <span class="keywordflow">for</span> (i = 0; i &lt; fmt-&gt;rf_fields[loc].nr; ++i) {
<a name="l01842"></a>01842                 <span class="keywordflow">if</span> (pill-&gt;rc_area[loc][i] == -1) {
<a name="l01843"></a>01843                         pill-&gt;rc_area[loc][i] =
<a name="l01844"></a>01844                                             fmt-&gt;rf_fields[loc].d[i]-&gt;rmf_size;
<a name="l01845"></a>01845                         <span class="keywordflow">if</span> (pill-&gt;rc_area[loc][i] == -1) {
<a name="l01846"></a>01846                                 <span class="comment">/*</span>
<a name="l01847"></a>01847 <span class="comment">                                 * Skip the following fields.</span>
<a name="l01848"></a>01848 <span class="comment">                                 *</span>
<a name="l01849"></a>01849 <span class="comment">                                 * If this LASSERT() trips then you&apos;re missing a</span>
<a name="l01850"></a>01850 <span class="comment">                                 * call to req_capsule_set_size().</span>
<a name="l01851"></a>01851 <span class="comment">                                 */</span>
<a name="l01852"></a>01852                                 LASSERT(loc != RCL_SERVER);
<a name="l01853"></a>01853                                 <span class="keywordflow">break</span>;
<a name="l01854"></a>01854                         }
<a name="l01855"></a>01855                 }
<a name="l01856"></a>01856         }
<a name="l01857"></a>01857         <span class="keywordflow">return</span> i;
<a name="l01858"></a>01858 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_gab0f7a8e2a51867454ce8f87bb48b0f77_icgraph.png" border="0" usemap="#group__req__layout_gab0f7a8e2a51867454ce8f87bb48b0f77_icgraph_map" alt=""></div>
<map name="group__req__layout_gab0f7a8e2a51867454ce8f87bb48b0f77_icgraph_map" id="group__req__layout_gab0f7a8e2a51867454ce8f87bb48b0f77_icgraph">
<area shape="rect" id="node3" href="group__ldlm__cli__api.html#ga677e9f9ff5fbe2174b139fe8c2b77b70" title="Prepare and send a batched cancel RPC." alt="" coords="256,135,405,164"/><area shape="rect" id="node23" href="group__ldlm__cli__api.html#gabae59a7ebeed8c6fd60b22f03cf88e1f" title="Cancel LRU locks and pack them into the enqueue request." alt="" coords="695,187,836,216"/><area shape="rect" id="node26" href="group__req__layout.html#ga2d6e601381473d8117410c7c9cd176c9" title="Capsule equivalent of lustre_pack_request() and lustre_pack_reply()." alt="" coords="236,239,425,268"/><area shape="rect" id="node5" href="group__ldlm__cli__api.html#ga96adcececc3c547888075de942fa1872" title="Cancel client&#45;side locks from a list and send/prepare cancel RPCs to the server." alt="" coords="476,135,623,164"/><area shape="rect" id="node7" href="group__ldlm__cli__api.html#ga0237477d402999ab81f2b2447fceebc9" title="Client side lock cancel." alt="" coords="705,29,825,59"/><area shape="rect" id="node14" href="group__ldlm__cli__api.html#gac7dcd18ff549bf7b777a067e1c374149" title="Locally cancel up to count locks in list cancels." alt="" coords="673,83,857,112"/><area shape="rect" id="node18" href="group__ldlm__cli__api.html#ga56914f0205e9d377eeceb78f8db71f66" title="Cancel all locks on a resource that have 0 readers/writers." alt="" coords="1157,108,1400,137"/><area shape="rect" id="node9" href="group__ldlm__local__ast.html#ga9962ac0cc2bd7e279cf0b977d822feb3" title="A helper to build a blocking AST function." alt="" coords="908,29,1108,59"/><area shape="rect" id="node11" href="group__ldlm__local__ast.html#gacc93548bb07532aa1d816dee71bd2ecb" title="Server blocking AST." alt="" coords="1209,29,1348,59"/><area shape="rect" id="node16" href="group__ldlm__cli__api.html#ga2fab73fddf169b2202e11527226f7253" title="Find and cancel locally unused locks found on resource, matched to the given policy..." alt="" coords="907,83,1109,112"/><area shape="rect" id="node20" href="group__ldlm__cli__api.html#ga8067f82d5a14a84d1c103d2de469501a" title="Cancel all locks on a namespace (or a specific resource, if given) that have 0 readers/writers..." alt="" coords="1448,108,1624,137"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5112a769734db7bbabf4d68df437395a"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_fmt_size" ref="ga5112a769734db7bbabf4d68df437395a" args="(__u32 magic, const struct req_format *fmt, enum req_location loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 req_capsule_fmt_size </td>
          <td>(</td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>magic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_format *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>While <a class="el" href="group__req__layout.html#ga806251548c1c42c81a5123248f79e58d" title="Wrapper around lustre_msg_size() that returns the PTLRPC size needed for the given...">req_capsule_msg_size()</a> computes the size of a PTLRPC request or reply (<em>loc</em>) given a <em>pill's</em> <em>rc_area</em>, this function computes the size of a PTLRPC request or reply given only an RQF (<em>fmt</em>). </p>
<p>This function should not be used for formats which contain variable size fields. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02296">2296</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02298"></a>02298 {
<a name="l02299"></a>02299         __u32 size;
<a name="l02300"></a>02300         <span class="keywordtype">size_t</span> i = 0;
<a name="l02301"></a>02301 
<a name="l02302"></a>02302         <span class="comment">/*</span>
<a name="l02303"></a>02303 <span class="comment">         * This function should probably LASSERT() that fmt has no fields with</span>
<a name="l02304"></a>02304 <span class="comment">         * RMF_F_STRUCT_ARRAY in rmf_flags, since we can&apos;t know here how many</span>
<a name="l02305"></a>02305 <span class="comment">         * elements in the array there will ultimately be, but then, we could</span>
<a name="l02306"></a>02306 <span class="comment">         * assume that there will be at least one element, and that&apos;s just what</span>
<a name="l02307"></a>02307 <span class="comment">         * we do.</span>
<a name="l02308"></a>02308 <span class="comment">         */</span>
<a name="l02309"></a>02309         size = lustre_msg_hdr_size(magic, fmt-&gt;rf_fields[loc].nr);
<a name="l02310"></a>02310         <span class="keywordflow">if</span> (size == 0)
<a name="l02311"></a>02311                 <span class="keywordflow">return</span> size;
<a name="l02312"></a>02312 
<a name="l02313"></a>02313         <span class="keywordflow">for</span> (; i &lt; fmt-&gt;rf_fields[loc].nr; ++i)
<a name="l02314"></a>02314                 <span class="keywordflow">if</span> (fmt-&gt;rf_fields[loc].d[i]-&gt;rmf_size != -1)
<a name="l02315"></a>02315                         size += cfs_size_round(fmt-&gt;rf_fields[loc].d[i]-&gt;
<a name="l02316"></a>02316                                                rmf_size);
<a name="l02317"></a>02317         <span class="keywordflow">return</span> size;
<a name="l02318"></a>02318 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga102a4e6bb0a627ead289f4684971fc28"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_get_size" ref="ga102a4e6bb0a627ead289f4684971fc28" args="(const struct req_capsule *pill, const struct req_msg_field *field, enum req_location loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 req_capsule_get_size </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the actual PTLRPC buffer length of a request or reply (<em>loc</em>) for the given <em>pill's</em> given <em>field</em>. </p>
<p>NB: this function doesn't correspond with <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a>, which actually sets the size in pill.rc_area[loc][offset], but this function returns the message buflen[offset], maybe we should use another name. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02263">2263</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="pack__generic_8c_source.html#l00688">lustre_msg_buflen()</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02266"></a>02266 {
<a name="l02267"></a>02267         LASSERT(loc == RCL_SERVER || loc == RCL_CLIENT);
<a name="l02268"></a>02268 
<a name="l02269"></a>02269         <span class="keywordflow">return</span> <a class="code" href="group__net.html#ga8ddfe4bfdb34b2159b8281fb3c6e09a4" title="lustre_msg_buflen - return the length of buffer n in message m ">lustre_msg_buflen</a>(__req_msg(pill, loc),
<a name="l02270"></a>02270                                  __req_capsule_offset(pill, field, loc));
<a name="l02271"></a>02271 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_cgraph.png" border="0" usemap="#group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_cgraph_map" alt=""></div>
<map name="group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_cgraph_map" id="group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_cgraph">
<area shape="rect" id="node3" href="group__net.html#ga8ddfe4bfdb34b2159b8281fb3c6e09a4" title="lustre_msg_buflen &#45; return the length of buffer n in message m " alt="" coords="223,5,367,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_icgraph.png" border="0" usemap="#group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_icgraph_map" alt=""></div>
<map name="group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_icgraph_map" id="group__req__layout_ga102a4e6bb0a627ead289f4684971fc28_icgraph">
<area shape="rect" id="node3" href="group__ldlm__cli__api.html#gac3edcad1b11e283d6ef8455a2b598b07" title="Client&#45;side lock enqueue." alt="" coords="432,5,568,35"/><area shape="rect" id="node5" href="group__ldlm__cli__api.html#gac421005283912bb5186b035013aa58c0" title="Finishing portion of client lock enqueue code." alt="" coords="221,31,384,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3360e9bd9a1f426afa811cb688d78080"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_init" ref="ga3360e9bd9a1f426afa811cb688d78080" args="(struct req_capsule *pill, struct ptlrpc_request *req, enum req_location location)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void req_capsule_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structptlrpc__request.html">ptlrpc_request</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>location</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a pill. </p>
<p>The <em>location</em> indicates whether the caller is executing on the client side (RCL_CLIENT) or server side (RCL_SERVER).. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l01762">1762</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="layout_8c_source.html#l01745">req_capsule_init_area()</a>, and <a class="el" href="lustre__net_8h_source.html#l01121">ptlrpc_request::rq_pill</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01765"></a>01765 {
<a name="l01766"></a>01766         LASSERT(location == RCL_SERVER || location == RCL_CLIENT);
<a name="l01767"></a>01767 
<a name="l01768"></a>01768         <span class="comment">/*</span>
<a name="l01769"></a>01769 <span class="comment">         * Today all capsules are embedded in ptlrpc_request structs,</span>
<a name="l01770"></a>01770 <span class="comment">         * but just in case that ever isn&apos;t the case, we don&apos;t reach</span>
<a name="l01771"></a>01771 <span class="comment">         * into req unless req != NULL and pill is the one embedded in</span>
<a name="l01772"></a>01772 <span class="comment">         * the req.</span>
<a name="l01773"></a>01773 <span class="comment">         *</span>
<a name="l01774"></a>01774 <span class="comment">         * The req-&gt;rq_pill_init flag makes it safe to initialize a pill</span>
<a name="l01775"></a>01775 <span class="comment">         * twice, which might happen in the OST paths as a result of the</span>
<a name="l01776"></a>01776 <span class="comment">         * high-priority RPC queue getting peeked at before ost_handle()</span>
<a name="l01777"></a>01777 <span class="comment">         * handles an OST RPC.</span>
<a name="l01778"></a>01778 <span class="comment">         */</span>
<a name="l01779"></a>01779         <span class="keywordflow">if</span> (req != NULL &amp;&amp; pill == &amp;req-&gt;<a class="code" href="structptlrpc__request.html#ab7324f88fb8682a894baf36052f78da5" title="request format description">rq_pill</a> &amp;&amp; req-&gt;rq_pill_init)
<a name="l01780"></a>01780                 <span class="keywordflow">return</span>;
<a name="l01781"></a>01781 
<a name="l01782"></a>01782         memset(pill, 0, <span class="keyword">sizeof</span> *pill);
<a name="l01783"></a>01783         pill-&gt;rc_req = req;
<a name="l01784"></a>01784         pill-&gt;rc_loc = location;
<a name="l01785"></a>01785         <a class="code" href="group__req__layout.html#ga3c7ada58d5e54cbf2af6df8c5894e8f5" title="Initializes the expected sizes of each RMF in a pill (rc_area) to -1.">req_capsule_init_area</a>(pill);
<a name="l01786"></a>01786 
<a name="l01787"></a>01787         <span class="keywordflow">if</span> (req != NULL &amp;&amp; pill == &amp;req-&gt;<a class="code" href="structptlrpc__request.html#ab7324f88fb8682a894baf36052f78da5" title="request format description">rq_pill</a>)
<a name="l01788"></a>01788                 req-&gt;rq_pill_init = 1;
<a name="l01789"></a>01789 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga3360e9bd9a1f426afa811cb688d78080_cgraph.png" border="0" usemap="#group__req__layout_ga3360e9bd9a1f426afa811cb688d78080_cgraph_map" alt=""></div>
<map name="group__req__layout_ga3360e9bd9a1f426afa811cb688d78080_cgraph_map" id="group__req__layout_ga3360e9bd9a1f426afa811cb688d78080_cgraph">
<area shape="rect" id="node3" href="group__req__layout.html#ga3c7ada58d5e54cbf2af6df8c5894e8f5" title="Initializes the expected sizes of each RMF in a pill (rc_area) to &#45;1." alt="" coords="185,5,351,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3c7ada58d5e54cbf2af6df8c5894e8f5"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_init_area" ref="ga3c7ada58d5e54cbf2af6df8c5894e8f5" args="(struct req_capsule *pill)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void req_capsule_init_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the expected sizes of each RMF in a <em>pill</em> (<em>rc_area</em>) to -1. </p>
<p>Actual/expected field sizes are set elsewhere in functions in this file: <a class="el" href="group__req__layout.html#ga3360e9bd9a1f426afa811cb688d78080" title="Initialize a pill.">req_capsule_init()</a>, <a class="el" href="group__req__layout.html#ga2d6e601381473d8117410c7c9cd176c9" title="Capsule equivalent of lustre_pack_request() and lustre_pack_reply().">req_capsule_server_pack()</a>, <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> and <a class="el" href="group__req__layout.html#ga806251548c1c42c81a5123248f79e58d" title="Wrapper around lustre_msg_size() that returns the PTLRPC size needed for the given...">req_capsule_msg_size()</a>. The <em>rc_area</em> information is used by. ptlrpc_request_set_replen(). </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l01745">1745</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>Referenced by <a class="el" href="layout_8c_source.html#l01762">req_capsule_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01746"></a>01746 {
<a name="l01747"></a>01747         <span class="keywordtype">size_t</span> i;
<a name="l01748"></a>01748 
<a name="l01749"></a>01749         <span class="keywordflow">for</span> (i = 0; i &lt; ARRAY_SIZE(pill-&gt;rc_area[RCL_CLIENT]); i++) {
<a name="l01750"></a>01750                 pill-&gt;rc_area[RCL_CLIENT][i] = -1;
<a name="l01751"></a>01751                 pill-&gt;rc_area[RCL_SERVER][i] = -1;
<a name="l01752"></a>01752         }
<a name="l01753"></a>01753 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga3c7ada58d5e54cbf2af6df8c5894e8f5_icgraph.png" border="0" usemap="#group__req__layout_ga3c7ada58d5e54cbf2af6df8c5894e8f5_icgraph_map" alt=""></div>
<map name="group__req__layout_ga3c7ada58d5e54cbf2af6df8c5894e8f5_icgraph_map" id="group__req__layout_ga3c7ada58d5e54cbf2af6df8c5894e8f5_icgraph">
<area shape="rect" id="node3" href="group__req__layout.html#ga3360e9bd9a1f426afa811cb688d78080" title="Initialize a pill." alt="" coords="221,5,352,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga806251548c1c42c81a5123248f79e58d"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_msg_size" ref="ga806251548c1c42c81a5123248f79e58d" args="(struct req_capsule *pill, enum req_location loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 req_capsule_msg_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wrapper around lustre_msg_size() that returns the PTLRPC size needed for the given <em>pill's</em> request or reply (<em>loc</em>) given the field size recorded in the <em>pill's</em> rc_area. </p>
<p>See also <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a>. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02281">2281</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l01104">ptlrpc_request::rq_import</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02282"></a>02282 {
<a name="l02283"></a>02283         <span class="keywordflow">return</span> lustre_msg_size(pill-&gt;rc_req-&gt;<a class="code" href="structptlrpc__request.html#abce7bb8e7fff373286d1f69a0175dba8" title="import where request is being sent">rq_import</a>-&gt;imp_msg_magic,
<a name="l02284"></a>02284                                pill-&gt;rc_fmt-&gt;rf_fields[loc].nr,
<a name="l02285"></a>02285                                pill-&gt;rc_area[loc]);
<a name="l02286"></a>02286 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad977fc16317ef24241367c0bda2e3ff3"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_other_get" ref="gad977fc16317ef24241367c0bda2e3ff3" args="(struct req_capsule *pill, const struct req_msg_field *field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void* req_capsule_other_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the buffer of a <em>pill</em> corresponding to the given <em>field</em> from the request (if the caller is executing on the server-side) or reply (if the caller is executing on the client-side). </p>
<p>This function convienient for use is code that could be executed on the client and server alike. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02212">2212</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02214"></a>02214 {
<a name="l02215"></a>02215         <span class="keywordflow">return</span> __req_capsule_get(pill, field, pill-&gt;rc_loc ^ 1, NULL, 0);
<a name="l02216"></a>02216 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga2d6e601381473d8117410c7c9cd176c9"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_server_pack" ref="ga2d6e601381473d8117410c7c9cd176c9" args="(struct req_capsule *pill)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int req_capsule_server_pack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Capsule equivalent of lustre_pack_request() and lustre_pack_reply(). </p>
<p>This function uses the <em>pill's</em> <em>rc_area</em> as filled in by <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> or <a class="el" href="group__req__layout.html#gab0f7a8e2a51867454ce8f87bb48b0f77" title="Fills in any parts of the rc_area of a pill that haven&#39;t been filled in yet.">req_capsule_filled_sizes()</a> (the latter is called by this function). </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l01868">1868</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="lustre__net_8h_source.html#l01302">DEBUG_REQ</a>, and <a class="el" href="layout_8c_source.html#l01833">req_capsule_filled_sizes()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01869"></a>01869 {
<a name="l01870"></a>01870         <span class="keyword">const</span> <span class="keyword">struct </span>req_format *fmt;
<a name="l01871"></a>01871         <span class="keywordtype">int</span>                      count;
<a name="l01872"></a>01872         <span class="keywordtype">int</span>                      rc;
<a name="l01873"></a>01873 
<a name="l01874"></a>01874         LASSERT(pill-&gt;rc_loc == RCL_SERVER);
<a name="l01875"></a>01875         fmt = pill-&gt;rc_fmt;
<a name="l01876"></a>01876         LASSERT(fmt != NULL);
<a name="l01877"></a>01877 
<a name="l01878"></a>01878         count = <a class="code" href="group__req__layout.html#gab0f7a8e2a51867454ce8f87bb48b0f77" title="Fills in any parts of the rc_area of a pill that haven&amp;#39;t been filled in yet.">req_capsule_filled_sizes</a>(pill, RCL_SERVER);
<a name="l01879"></a>01879         rc = lustre_pack_reply(pill-&gt;rc_req, count,
<a name="l01880"></a>01880                                pill-&gt;rc_area[RCL_SERVER], NULL);
<a name="l01881"></a>01881         <span class="keywordflow">if</span> (rc != 0) {
<a name="l01882"></a>01882                 <a class="code" href="group__net.html#ga2d5d1c7075b9387118d9356833e9abdf" title="This is the debug print function you need to use to print request sturucture content...">DEBUG_REQ</a>(D_ERROR, pill-&gt;rc_req,
<a name="l01883"></a>01883                        <span class="stringliteral">&quot;Cannot pack %d fields in format `%s&apos;: &quot;</span>,
<a name="l01884"></a>01884                        count, fmt-&gt;rf_name);
<a name="l01885"></a>01885         }
<a name="l01886"></a>01886         <span class="keywordflow">return</span> rc;
<a name="l01887"></a>01887 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga2d6e601381473d8117410c7c9cd176c9_cgraph.png" border="0" usemap="#group__req__layout_ga2d6e601381473d8117410c7c9cd176c9_cgraph_map" alt=""></div>
<map name="group__req__layout_ga2d6e601381473d8117410c7c9cd176c9_cgraph_map" id="group__req__layout_ga2d6e601381473d8117410c7c9cd176c9_cgraph">
<area shape="rect" id="node3" href="group__req__layout.html#gab0f7a8e2a51867454ce8f87bb48b0f77" title="Fills in any parts of the rc_area of a pill that haven&#39;t been filled in yet." alt="" coords="245,5,427,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaebc460299194b773def6ad6960826860"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_server_sized_get" ref="gaebc460299194b773def6ad6960826860" args="(struct req_capsule *pill, const struct req_msg_field *field, __u32 len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* req_capsule_server_sized_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Utility that combines <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> and <a class="el" href="group__req__layout.html#ga0d1ad53a1914c35470f3916e4bb4b8fe" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC reply buffer...">req_capsule_server_get()</a>. </p>
<p>First the <em>pill's</em> request <em>field's</em> size is set (<em>rc_area</em>) using <a class="el" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size()</a> with the given <em>len</em>. Then the actual buffer is returned. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02186">2186</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="layout_8c_source.html#l02226">req_capsule_set_size()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02189"></a>02189 {
<a name="l02190"></a>02190         <a class="code" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the...">req_capsule_set_size</a>(pill, field, RCL_SERVER, len);
<a name="l02191"></a>02191         <span class="keywordflow">return</span> __req_capsule_get(pill, field, RCL_SERVER, NULL, 0);
<a name="l02192"></a>02192 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_gaebc460299194b773def6ad6960826860_cgraph.png" border="0" usemap="#group__req__layout_gaebc460299194b773def6ad6960826860_cgraph_map" alt=""></div>
<map name="group__req__layout_gaebc460299194b773def6ad6960826860_cgraph_map" id="group__req__layout_gaebc460299194b773def6ad6960826860_cgraph">
<area shape="rect" id="node3" href="group__req__layout.html#ga6d0a3a11367bcd9fe40dc723243e7b0d" title="Set the size of the PTLRPC request/reply (loc) buffer for the given field of the..." alt="" coords="281,5,447,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2a563cb9386620862b510aedf886c6ee"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_server_swab_get" ref="ga2a563cb9386620862b510aedf886c6ee" args="(struct req_capsule *pill, const struct req_msg_field *field, void *swabber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* req_capsule_server_swab_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>swabber</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Same as <a class="el" href="group__req__layout.html#ga0d1ad53a1914c35470f3916e4bb4b8fe" title="Trivial wrapper around __req_capsule_get(), that returns the PTLRPC reply buffer...">req_capsule_server_get()</a>, but with a <em>swabber</em> argument. </p>
<p>Ideally all swabbing should be done pursuant to RMF definitions, with no swabbing done outside this capsule abstraction. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02171">2171</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02174"></a>02174 {
<a name="l02175"></a>02175         <span class="keywordflow">return</span> __req_capsule_get(pill, field, RCL_SERVER, swabber, 0);
<a name="l02176"></a>02176 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6d0a3a11367bcd9fe40dc723243e7b0d"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_set_size" ref="ga6d0a3a11367bcd9fe40dc723243e7b0d" args="(struct req_capsule *pill, const struct req_msg_field *field, enum req_location loc, __u32 size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void req_capsule_set_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the size of the PTLRPC request/reply (<em>loc</em>) buffer for the given <em>field</em> of the given <em>pill</em>. </p>
<p>This function must be used when constructing variable sized fields of a request or reply. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02226">2226</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>Referenced by <a class="el" href="pack__generic_8c_source.html#l01574">do_set_info_async()</a>, <a class="el" href="ldlm__request_8c_source.html#l01185">ldlm_cli_cancel_req()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00762">ldlm_prep_elc_req()</a>, <a class="el" href="import_8c_source.html#l00648">ptlrpc_connect_import()</a>, <a class="el" href="layout_8c_source.html#l02145">req_capsule_client_sized_get()</a>, and <a class="el" href="layout_8c_source.html#l02186">req_capsule_server_sized_get()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02229"></a>02229 {
<a name="l02230"></a>02230         LASSERT(loc == RCL_SERVER || loc == RCL_CLIENT);
<a name="l02231"></a>02231 
<a name="l02232"></a>02232         <span class="keywordflow">if</span> ((size != (__u32)field-&gt;rmf_size) &amp;&amp;
<a name="l02233"></a>02233             (field-&gt;rmf_size != -1) &amp;&amp;
<a name="l02234"></a>02234             !(field-&gt;rmf_flags &amp; RMF_F_NO_SIZE_CHECK) &amp;&amp;
<a name="l02235"></a>02235             (size &gt; 0)) {
<a name="l02236"></a>02236                 __u32 rmf_size = (__u32)field-&gt;rmf_size;
<a name="l02237"></a>02237                 if ((field-&gt;rmf_flags &amp; RMF_F_STRUCT_ARRAY) &amp;&amp;
<a name="l02238"></a>02238                     (size % rmf_size != 0)) {
<a name="l02239"></a>02239                         CERROR(<span class="stringliteral">&quot;%s: array field size mismatch &quot;</span>
<a name="l02240"></a>02240                                 <span class="stringliteral">&quot;%u %% %u != 0 (%d)\n&quot;</span>,
<a name="l02241"></a>02241                                 field-&gt;rmf_name, size, rmf_size, loc);
<a name="l02242"></a>02242                         LBUG();
<a name="l02243"></a>02243                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(field-&gt;rmf_flags &amp; RMF_F_STRUCT_ARRAY) &amp;&amp;
<a name="l02244"></a>02244                            size &lt; rmf_size) {
<a name="l02245"></a>02245                         CERROR(<span class="stringliteral">&quot;%s: field size mismatch %u != %u (%d)\n&quot;</span>,
<a name="l02246"></a>02246                                 field-&gt;rmf_name, size, rmf_size, loc);
<a name="l02247"></a>02247                         LBUG();
<a name="l02248"></a>02248                 }
<a name="l02249"></a>02249         }
<a name="l02250"></a>02250 
<a name="l02251"></a>02251         pill-&gt;rc_area[loc][__req_capsule_offset(pill, field, loc)] = size;
<a name="l02252"></a>02252 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_ga6d0a3a11367bcd9fe40dc723243e7b0d_icgraph.png" border="0" usemap="#group__req__layout_ga6d0a3a11367bcd9fe40dc723243e7b0d_icgraph_map" alt=""></div>
<map name="group__req__layout_ga6d0a3a11367bcd9fe40dc723243e7b0d_icgraph_map" id="group__req__layout_ga6d0a3a11367bcd9fe40dc723243e7b0d_icgraph">
<area shape="rect" id="node3" href="group__lib.html#gafc5cf9a5b2924b90734e720301742315" title="Send a remote set_info_async." alt="" coords="263,81,407,111"/><area shape="rect" id="node5" href="group__ldlm__cli__api.html#ga677e9f9ff5fbe2174b139fe8c2b77b70" title="Prepare and send a batched cancel RPC." alt="" coords="260,135,409,164"/><area shape="rect" id="node25" href="group__ldlm__cli__api.html#gabae59a7ebeed8c6fd60b22f03cf88e1f" title="Cancel LRU locks and pack them into the enqueue request." alt="" coords="716,187,857,216"/><area shape="rect" id="node27" href="group__ldlm__cli__api.html#gac3edcad1b11e283d6ef8455a2b598b07" title="Client&#45;side lock enqueue." alt="" coords="267,239,403,268"/><area shape="rect" id="node30" href="group__net.html#gae524031a54066bf23dda2ad572bbcfdf" title="Attempt to (re)connect import imp." alt="" coords="248,292,421,321"/><area shape="rect" id="node32" href="group__req__layout.html#ga3fc75d391659404f616707d6fb07996c" title="Utility that combines req_capsule_set_size() and req_capsule_client_get()." alt="" coords="225,345,444,375"/><area shape="rect" id="node34" href="group__req__layout.html#gaebc460299194b773def6ad6960826860" title="Utility that combines req_capsule_set_size() and req_capsule_server_get()." alt="" coords="223,399,447,428"/><area shape="rect" id="node7" href="group__ldlm__cli__api.html#ga96adcececc3c547888075de942fa1872" title="Cancel client&#45;side locks from a list and send/prepare cancel RPCs to the server." alt="" coords="497,135,644,164"/><area shape="rect" id="node9" href="group__ldlm__cli__api.html#ga0237477d402999ab81f2b2447fceebc9" title="Client side lock cancel." alt="" coords="727,29,847,59"/><area shape="rect" id="node16" href="group__ldlm__cli__api.html#gac7dcd18ff549bf7b777a067e1c374149" title="Locally cancel up to count locks in list cancels." alt="" coords="695,83,879,112"/><area shape="rect" id="node20" href="group__ldlm__cli__api.html#ga56914f0205e9d377eeceb78f8db71f66" title="Cancel all locks on a resource that have 0 readers/writers." alt="" coords="1179,108,1421,137"/><area shape="rect" id="node11" href="group__ldlm__local__ast.html#ga9962ac0cc2bd7e279cf0b977d822feb3" title="A helper to build a blocking AST function." alt="" coords="929,29,1129,59"/><area shape="rect" id="node13" href="group__ldlm__local__ast.html#gacc93548bb07532aa1d816dee71bd2ecb" title="Server blocking AST." alt="" coords="1231,29,1369,59"/><area shape="rect" id="node18" href="group__ldlm__cli__api.html#ga2fab73fddf169b2202e11527226f7253" title="Find and cancel locally unused locks found on resource, matched to the given policy..." alt="" coords="928,83,1131,112"/><area shape="rect" id="node22" href="group__ldlm__cli__api.html#ga8067f82d5a14a84d1c103d2de469501a" title="Cancel all locks on a namespace (or a specific resource, if given) that have 0 readers/writers..." alt="" coords="1469,108,1645,137"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf42efe506903884592711902e9276e99"></a><!-- doxytag: member="lustre_req_layout.h::req_capsule_shrink" ref="gaf42efe506903884592711902e9276e99" args="(struct req_capsule *pill, const struct req_msg_field *field, __u32 newlen, enum req_location loc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void req_capsule_shrink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__capsule.html">req_capsule</a> *&nbsp;</td>
          <td class="paramname"> <em>pill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct req_msg_field *&nbsp;</td>
          <td class="paramname"> <em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>newlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum req_location&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function shrinks the size of the _buffer_ of the <em>pill's</em> PTLRPC request or reply (<em>loc</em>). </p>
<p>This is not the opposite of <a class="el" href="group__req__layout.html#gad16c26c15f59593e2e005e4afbeb8034" title="Changes the format of an RPC.">req_capsule_extend()</a>. </p>

<p>Definition at line <a class="el" href="layout_8c_source.html#l02416">2416</a> of file <a class="el" href="layout_8c_source.html">layout.c</a>.</p>

<p>References <a class="el" href="pack__generic_8c_source.html#l00688">lustre_msg_buflen()</a>, <a class="el" href="layout_8c_source.html#l02396">req_capsule_field_present()</a>, <a class="el" href="layout_8c_source.html#l02382">req_capsule_has_field()</a>, <a class="el" href="lustre__net_8h_source.html#l01026">ptlrpc_request::rq_replen</a>, and <a class="el" href="lustre__net_8h_source.html#l01024">ptlrpc_request::rq_reqlen</a>.</p>

<p>Referenced by <a class="el" href="client_8c_source.html#l00762">ptlrpc_request_pack()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02420"></a>02420 {
<a name="l02421"></a>02421         <span class="keyword">const</span> <span class="keyword">struct </span>req_format *fmt;
<a name="l02422"></a>02422         <span class="keyword">struct </span>lustre_msg       *msg;
<a name="l02423"></a>02423         __u32                    len;
<a name="l02424"></a>02424         <span class="keywordtype">int</span>                      offset;
<a name="l02425"></a>02425 
<a name="l02426"></a>02426         fmt = pill-&gt;rc_fmt;
<a name="l02427"></a>02427         LASSERT(fmt != NULL);
<a name="l02428"></a>02428         LASSERT(__req_format_is_sane(fmt));
<a name="l02429"></a>02429         LASSERT(<a class="code" href="group__req__layout.html#ga35302dbfc2517d692579948a9742d3ba" title="This function returns a non-zero value if the given field is present in the format...">req_capsule_has_field</a>(pill, field, loc));
<a name="l02430"></a>02430         LASSERT(<a class="code" href="group__req__layout.html#gad281812fde0bdb0aaaed8a022e0008f2" title="Returns a non-zero value if the given field is present in the given pill&amp;#39;s PTLRPC...">req_capsule_field_present</a>(pill, field, loc));
<a name="l02431"></a>02431 
<a name="l02432"></a>02432         offset = __req_capsule_offset(pill, field, loc);
<a name="l02433"></a>02433 
<a name="l02434"></a>02434         msg = __req_msg(pill, loc);
<a name="l02435"></a>02435         len = <a class="code" href="group__net.html#ga8ddfe4bfdb34b2159b8281fb3c6e09a4" title="lustre_msg_buflen - return the length of buffer n in message m ">lustre_msg_buflen</a>(msg, offset);
<a name="l02436"></a>02436         LASSERTF(newlen &lt;= len, <span class="stringliteral">&quot;%s:%s, oldlen=%u, newlen=%u\n&quot;</span>,
<a name="l02437"></a>02437                                 fmt-&gt;rf_name, field-&gt;rmf_name, len, newlen);
<a name="l02438"></a>02438 
<a name="l02439"></a>02439         <span class="keywordflow">if</span> (loc == RCL_CLIENT)
<a name="l02440"></a>02440                 pill-&gt;rc_req-&gt;<a class="code" href="structptlrpc__request.html#a9746010150c167d5b6e62786d61f18df" title="Request length.">rq_reqlen</a> = lustre_shrink_msg(msg, offset, newlen,
<a name="l02441"></a>02441                                                             1);
<a name="l02442"></a>02442         <span class="keywordflow">else</span>
<a name="l02443"></a>02443                 pill-&gt;rc_req-&gt;<a class="code" href="structptlrpc__request.html#aaa9ba7e7b71ad2057d1650469ab15076" title="Reply length.">rq_replen</a> = lustre_shrink_msg(msg, offset, newlen,
<a name="l02444"></a>02444                                                             1);
<a name="l02445"></a>02445 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_gaf42efe506903884592711902e9276e99_cgraph.png" border="0" usemap="#group__req__layout_gaf42efe506903884592711902e9276e99_cgraph_map" alt=""></div>
<map name="group__req__layout_gaf42efe506903884592711902e9276e99_cgraph_map" id="group__req__layout_gaf42efe506903884592711902e9276e99_cgraph">
<area shape="rect" id="node3" href="group__net.html#ga8ddfe4bfdb34b2159b8281fb3c6e09a4" title="lustre_msg_buflen &#45; return the length of buffer n in message m " alt="" coords="227,5,371,35"/><area shape="rect" id="node5" href="group__req__layout.html#gad281812fde0bdb0aaaed8a022e0008f2" title="Returns a non&#45;zero value if the given field is present in the given pill&#39;s PTLRPC..." alt="" coords="200,59,397,88"/><area shape="rect" id="node7" href="group__req__layout.html#ga35302dbfc2517d692579948a9742d3ba" title="This function returns a non&#45;zero value if the given field is present in the format..." alt="" coords="447,85,612,115"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__req__layout_gaf42efe506903884592711902e9276e99_icgraph.png" border="0" usemap="#group__req__layout_gaf42efe506903884592711902e9276e99_icgraph_map" alt=""></div>
<map name="group__req__layout_gaf42efe506903884592711902e9276e99_icgraph_map" id="group__req__layout_gaf42efe506903884592711902e9276e99_icgraph">
<area shape="rect" id="node3" href="group__net.html#gaa1d6f5834629cf755c8f1f0b1a4349de" title="Pack request buffers for network transfer, performing necessary encryption steps..." alt="" coords="201,161,359,191"/><area shape="rect" id="node5" href="group__lib.html#gafc5cf9a5b2924b90734e720301742315" title="Send a remote set_info_async." alt="" coords="435,81,579,111"/><area shape="rect" id="node7" href="group__ldlm__cli__api.html#ga677e9f9ff5fbe2174b139fe8c2b77b70" title="Prepare and send a batched cancel RPC." alt="" coords="432,135,581,164"/><area shape="rect" id="node27" href="group__ldlm__cli__api.html#gabae59a7ebeed8c6fd60b22f03cf88e1f" title="Cancel LRU locks and pack them into the enqueue request." alt="" coords="873,187,1015,216"/><area shape="rect" id="node30" href="group__net.html#gac578ffdc47c9c2141c34c4798a55cce4" title="Allocate new request for operatione opcode and immediatelly pack it for network transfer..." alt="" coords="409,239,604,268"/><area shape="rect" id="node9" href="group__ldlm__cli__api.html#ga96adcececc3c547888075de942fa1872" title="Cancel client&#45;side locks from a list and send/prepare cancel RPCs to the server." alt="" coords="655,135,801,164"/><area shape="rect" id="node11" href="group__ldlm__cli__api.html#ga0237477d402999ab81f2b2447fceebc9" title="Client side lock cancel." alt="" coords="884,29,1004,59"/><area shape="rect" id="node18" href="group__ldlm__cli__api.html#gac7dcd18ff549bf7b777a067e1c374149" title="Locally cancel up to count locks in list cancels." alt="" coords="852,83,1036,112"/><area shape="rect" id="node22" href="group__ldlm__cli__api.html#ga56914f0205e9d377eeceb78f8db71f66" title="Cancel all locks on a resource that have 0 readers/writers." alt="" coords="1336,108,1579,137"/><area shape="rect" id="node13" href="group__ldlm__local__ast.html#ga9962ac0cc2bd7e279cf0b977d822feb3" title="A helper to build a blocking AST function." alt="" coords="1087,29,1287,59"/><area shape="rect" id="node15" href="group__ldlm__local__ast.html#gacc93548bb07532aa1d816dee71bd2ecb" title="Server blocking AST." alt="" coords="1388,29,1527,59"/><area shape="rect" id="node20" href="group__ldlm__cli__api.html#ga2fab73fddf169b2202e11527226f7253" title="Find and cancel locally unused locks found on resource, matched to the given policy..." alt="" coords="1085,83,1288,112"/><area shape="rect" id="node24" href="group__ldlm__cli__api.html#ga8067f82d5a14a84d1c103d2de469501a" title="Cancel all locks on a namespace (or a specific resource, if given) that have 0 readers/writers..." alt="" coords="1627,108,1803,137"/><area shape="rect" id="node32" href="group__ldlm__cli__api.html#gac3edcad1b11e283d6ef8455a2b598b07" title="Client&#45;side lock enqueue." alt="" coords="660,239,796,268"/></map>
</div>
</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:55:46 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
