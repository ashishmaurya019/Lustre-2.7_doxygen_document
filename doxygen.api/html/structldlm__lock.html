<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: ldlm_lock Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ldlm_lock Struct Reference<br/>
<small>
[<a class="el" href="group__LDLM.html">Lustre Distributed Lock Manager</a>]</small>
</h1><!-- doxytag: class="ldlm_lock" -->
<p>LDLM lock structure.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ldlm_lock:</div>
<div class="dynsection">
<div class="center"><img src="structldlm__lock__coll__graph.png" border="0" usemap="#ldlm__lock_coll__map" alt="Collaboration graph"/></div>
<map name="ldlm__lock_coll__map" id="ldlm__lock_coll__map">
<area shape="rect" id="node2" href="structportals__handle.html" title="{portals_handle\n|+ h_link\l+ h_cookie\l+ h_owner\l+ h_ops\l+ h_rcu\l+ h_lock\l+ h_size\l+ h_in\l|}" alt="" coords="1249,1529,1367,1735"/><area shape="rect" id="node13" href="structobd__export.html" title="Export structure." alt="" coords="2128,2157,2371,3248"/><area shape="rect" id="node60" href="structobd__import.html" title="Defintion of PortalRPC import structure." alt="" coords="2025,5233,2263,6549"/><area shape="rect" id="node4" href="structlist__head.html" title="{list_head\n|+ next\l+ prev\l|}" alt="" coords="2109,6,2192,109"/><area shape="rect" id="node15" href="structtg__export__data.html" title="Target&#45;specific export data." alt="" coords="2257,795,2449,1071"/><area shape="rect" id="node18" href="structtg__reply__data.html" title="Target reply data." alt="" coords="2689,324,2836,479"/><area shape="rect" id="node21" href="structlu__nodemap.html" title="The nodemap id 0 will be the default nodemap." alt="" coords="2052,211,2249,591"/><area shape="rect" id="node33" href="structcfs__workitem.html" title="{cfs_workitem\n|+ wi_list\l+ wi_action\l+ wi_data\l+ wi_running\l+ wi_scheduled\l|}" alt="" coords="3575,616,3700,771"/><area shape="rect" id="node46" href="structfilter__export__data.html" title="Filter (oss&#45;side) specific import data." alt="" coords="2564,1503,2740,1761"/><area shape="rect" id="node66" href="structobd__import__conn.html" title="Definition of import connection structure." alt="" coords="1488,2634,1640,2771"/><area shape="rect" id="node75" href="structobd__device.html" title="{obd_device\n|+ obd_type\l+ obd_magic\l+ obd_minor\l+ obd_lu_dev\l+ obd_uuid\l+ obd_name\l+ obd_attached\l+ obd_set_up\l+ obd_recovering\l+ obd_abort_recovery\l+ obd_version_recov\l+ obd_replayable\l+ obd_no_transno\l+ obd_no_recov\l+ obd_stopping\l+ obd_starting\l+ obd_force\l+ obd_fail\l+ obd_no_conn\l+ obd_inactive\l+ obd_no_ir\l+ obd_process_conf\l+ obd_uses_nid_stats\l+ obd_recovery_expired\l+ obd_uuid_hash\l+ obd_nid_hash\l+ obd_nid_stats_hash\l+ obd_gen_hash\l+ obd_nid_stats\l+ obd_exports\l+ obd_unlinked_exports\l+ obd_delayed_exports\l+ obd_lwp_list\l+ obd_refcount\l+ obd_num_exports\l+ obd_nid_lock\l+ obd_namespace\l+ obd_ldlm_client\l+ obd_dev_lock\l+ obd_osfs_lock\l+ obd_osfs\l+ obd_osfs_age\l+ obd_last_committed\l+ obd_dev_mutex\l+ obd_lvfs_ctxt\l+ obd_olg\l+ obd_observer\l+ obd_observer_link_sem\l+ obd_upcall\l+ obd_self_export\l+ obd_lwp_export\l+ obd_exports_timed\l+ obd_eviction_timer\l+ obd_max_recoverable_clients\l+ obd_connected_clients\l+ obd_stale_clients\l+ obd_recovery_task_lock\l+ obd_next_recovery_transno\l+ obd_replayed_requests\l+ obd_requests_queued_for_recovery\l+ obd_next_transno_waitq\l+ obd_recovery_timer\l+ obd_recovery_start\l+ obd_recovery_end\l+ obd_recovery_time_hard\l+ obd_recovery_timeout\l+ obd_recovery_ir_factor\l+ obd_replayed_locks\l+ obd_req_replay_clients\l+ obd_lock_replay_clients\l+ obd_recovery_data\l+ obd_req_replay_queue\l+ obd_lock_replay_queue\l+ obd_final_req_queue\l+ cli\l+ echo_client\l+ lov\l+ lmv\l+ u\l+ obd_stats\l+ obd_cntr_base\l+ obd_md_cntr_base\l+ obd_md_stats\l+ obd_proc_entry\l+ obd_proc_exports_entry\l+ obd_svc_procroot\l+ obd_svc_stats\l+ obd_vars\l+ obd_evict_inprogress\l+ obd_evict_inprogress_waitq\l+ obd_evict_list\l+ obd_pool_lock\l+ obd_pool_slv\l+ obd_pool_limit\l+ obd_conn_inprogress\l+ obd_reference\l|}" alt="" coords="2621,3417,2896,5149"/><area shape="rect" id="node89" href="structptlrpc__sec.html" title="The ptlrpc_sec represents the client side ptlrpc security facilities, each obd_import..." alt="" coords="3512,6877,3643,7153"/><area shape="rect" id="node100" href="structmdt__export__data.html" title="MDT&#45;specific export data." alt="" coords="2220,1555,2385,1709"/><area shape="rect" id="node104" href="structlustre__idmap__table.html" title="{lustre_idmap_table\n|+ lit_lock\l+ lit_idmaps\l|}" alt="" coords="2081,642,2231,745"/><area shape="rect" id="node108" href="structnid__stat.html" title="per&#45;NID statistics structure." alt="" coords="3461,5787,3619,5994"/><area shape="rect" id="node114" href="structmgs__export__data.html" title="{mgs_export_data\n|+ med_clients\l+ med_lock\l|}" alt="" coords="1671,1141,1809,1243"/><area shape="rect" id="node118" href="structec__export__data.html" title="{ec_export_data\n|+ eced_locks\l|}" alt="" coords="1816,1149,1944,1235"/><area shape="rect" id="node126" href="structldlm__interval.html" title="Interval node data for each LDLM_EXTENT lock." alt="" coords="691,2651,797,2754"/><area shape="rect" id="node139" href="structldlm__resource.html" title="LDLM resource description." alt="" coords="513,4075,676,4490"/><area shape="rect" id="node7" href="structportals__handle__ops.html" title="{portals_handle_ops\n|+ hop_addref\l+ hop_free\l|}" alt="" coords="1048,882,1197,985"/><area shape="rect" id="node9" href="unionldlm__policy__data.html" title="{ldlm_policy_data\n|+ l_extent\l+ l_flock\l+ l_inodebits\l|}" alt="" coords="212,5831,343,5951"/><area shape="rect" id="node11" href="structldlm__flock.html" title="{ldlm_flock\n|+ start\l+ end\l+ owner\l+ blocking_owner\l+ blocking_export\l+ blocking_refs\l+ pid\l|}" alt="" coords="807,4188,948,4377"/><area shape="rect" id="node24" href="structhlist__node.html" title="{hlist_node\n|+ next\l+ pprev\l|}" alt="" coords="831,6,921,109"/><area shape="rect" id="node53" href="structptlrpc__connection.html" title="Structure to single define portal connection." alt="" coords="1543,1555,1684,1709"/><area shape="rect" id="node27" href="structlsd__client__data.html" title="{lsd_client_data\n|+ lcd_uuid\l+ lcd_last_transno\l+ lcd_last_xid\l+ lcd_last_result\l+ lcd_last_data\l+ lcd_last_close_transno\l+ lcd_last_close_xid\l+ lcd_last_close_result\l+ lcd_last_close_data\l+ lcd_pre_versions\l+ lcd_last_epoch\l+ lcd_generation\l+ lcd_padding\l|}" alt="" coords="2273,255,2460,548"/><area shape="rect" id="node29" href="structcfs__hash.html" title="cfs_hash is a hash&#45;table implementation for general purpose, it can support: ." alt="" coords="3159,1399,3321,1865"/><area shape="rect" id="node31" href="unioncfs__hash__lock.html" title="{cfs_hash_lock\n|+ rw\l+ spin\l|}" alt="" coords="3080,350,3192,453"/><area shape="rect" id="node36" href="structcfs__hash__bucket.html" title="cfs_hash_bucket is a container of:lock, counter ." alt="" coords="2852,847,2985,1019"/><area shape="rect" id="node39" href="structcfs__hash__hlist__ops.html" title="{cfs_hash_hlist_ops\n|+ hop_hhead\l+ hop_hhead_size\l+ hop_hnode_add\l+ hop_hnode_del\l|}" alt="" coords="3009,865,3153,1002"/><area shape="rect" id="node41" href="structcfs__hash__lock__ops.html" title="{cfs_hash_lock_ops\n|+ hs_lock\l+ hs_unlock\l+ hs_bkt_lock\l+ hs_bkt_unlock\l|}" alt="" coords="3177,865,3319,1002"/><area shape="rect" id="node43" href="structcfs__hash__ops.html" title="{cfs_hash_ops\n|+ hs_hash\l+ hs_key\l+ hs_keycpy\l+ hs_keycmp\l+ hs_object\l+ hs_get\l+ hs_put\l+ hs_put_locked\l+ hs_exit\l|}" alt="" coords="3343,821,3473,1045"/><area shape="rect" id="node51" href="structobd__connect__data.html" title="{obd_connect_data\n|+ ocd_connect_flags\l+ ocd_version\l+ ocd_grant\l+ ocd_index\l+ ocd_brw_size\l+ ocd_ibits_known\l+ ocd_grant_blkbits\l+ ocd_grant_inobits\l+ ocd_grant_tax_kb\l+ ocd_grant_max_blks\l+ ocd_transno\l+ ocd_group\l+ ocd_cksum_types\l+ ocd_max_easize\l+ ocd_instance\l+ ocd_maxbytes\l+ ocd_maxmodrpcs\l+ padding0\l+ padding1\l+ ocd_connect_flags2\l+ padding3\l+ padding4\l+ padding5\l+ padding6\l+ padding7\l+ padding8\l+ padding9\l+ paddingA\l+ paddingB\l+ paddingC\l+ paddingD\l+ paddingE\l+ paddingF\l|}" alt="" coords="1708,1312,1879,1952"/><area shape="rect" id="node56" href="structobd__uuid.html" title="{obd_uuid\n|+ uuid\l|}" alt="" coords="2473,891,2553,976"/><area shape="rect" id="node58" href="structlnet__process__id__t.html" title="Global process ID." alt="" coords="1429,882,1568,985"/><area shape="rect" id="node71" href="structimp__at.html" title="{imp_at\n|+ iat_portal\l+ iat_net_latency\l+ iat_service_estimate\l|}" alt="" coords="1113,3272,1292,3392"/><area shape="rect" id="node73" href="structadaptive__timeout.html" title="{adaptive_timeout\n|+ at_binstart\l+ at_hist\l+ at_flags\l+ at_current\l+ at_worst_ever\l+ at_worst_time\l+ at_lock\l|}" alt="" coords="1076,1537,1217,1727"/><area shape="rect" id="node144" href="structldlm__ns__bucket.html" title="{ldlm_ns_bucket\n|+ nsb_namespace\l+ nsb_at_estimate\l+ nsb_reclaim_start\l|}" alt="" coords="821,2643,976,2763"/><area shape="rect" id="node80" href="structptlrpc__client.html" title="Client definition for PortalRPC." alt="" coords="2591,2643,2745,2763"/><area shape="rect" id="node82" href="structlu__ref.html" title="{lu_ref\n||}" alt="" coords="1000,2660,1059,2745"/><area shape="rect" id="node87" href="structimport__state__hist.html" title="{import_state_hist\n|+ ish_state\l+ ish_time\l|}" alt="" coords="1796,4231,1937,4334"/><area shape="rect" id="node93" href="structsptlrpc__flavor.html" title="Full description of flavors being used on a ptlrpc connection, include both regular..." alt="" coords="3621,1555,3733,1709"/><area shape="rect" id="node95" href="structbulk__spec__hash.html" title="{bulk_spec_hash\n|+ hash_alg\l|}" alt="" coords="3732,891,3857,976"/><area shape="rect" id="node97" href="structlustre__handle.html" title="{lustre_handle\n|+ cookie\l|}" alt="" coords="1457,4240,1569,4325"/><area shape="rect" id="node122" href="structldlm__extent.html" title="{ldlm_extent\n|+ start\l+ end\l+ gid\l|}" alt="" coords="69,4223,173,4343"/><area shape="rect" id="node124" href="structldlm__inodebits.html" title="{ldlm_inodebits\n|+ bits\l|}" alt="" coords="219,4240,336,4325"/><area shape="rect" id="node129" href="structinterval__node.html" title="{interval_node\n|+ in_left\l+ in_right\l+ in_parent\l+ in_color\l+ in_intree\l+ in_res1\l+ in_res2\l+ in_max_high\l+ in_extent\l|}" alt="" coords="629,1520,747,1744"/><area shape="rect" id="node147" href="structldlm__interval__tree.html" title="Interval tree for extent locks." alt="" coords="523,2643,667,2763"/><area shape="rect" id="node132" href="structinterval__node_1_1interval__node__extent.html" title="{interval_node::interval_node_extent\n|+ start\l+ end\l|}" alt="" coords="553,882,823,985"/><area shape="rect" id="node150" href="structldlm__res__id.html" title="{ldlm_res_id\n|+ name\l|}" alt="" coords="355,2660,448,2745"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structportals__handle.html">portals_handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af6bfe0ab210b608d0fa59ee6e95841ec">l_handle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Local lock handle.  <a href="#af6bfe0ab210b608d0fa59ee6e95841ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#acd61f904bdcdfee7845701368db6003d">l_refc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock reference count.  <a href="#acd61f904bdcdfee7845701368db6003d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">spinlock_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ab7ff3f52f4765c133758c21e0d224a8b">l_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal spinlock protects l_resource.  <a href="#ab7ff3f52f4765c133758c21e0d224a8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a41f4592eb59ed0c94d85e9fa67acfa6f">l_resource</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to actual resource this lock is in.  <a href="#a41f4592eb59ed0c94d85e9fa67acfa6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a039f73a41d5d8a655eff3b056963847d">l_lru</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item for client side LRU list.  <a href="#a039f73a41d5d8a655eff3b056963847d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a64ad5a636aec3f0825f1eea9df1a5734">l_res_link</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Linkage to resource's lock queues according to current lock state.  <a href="#a64ad5a636aec3f0825f1eea9df1a5734"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc34b7aa1202f2a2830f825ba7918f2d"></a><!-- doxytag: member="ldlm_lock::l_tree_node" ref="abc34b7aa1202f2a2830f825ba7918f2d" args="" -->
struct <a class="el" href="structldlm__interval.html">ldlm_interval</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#abc34b7aa1202f2a2830f825ba7918f2d">l_tree_node</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tree node for <a class="el" href="structldlm__extent.html">ldlm_extent</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhlist__node.html">hlist_node</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa9c7b6de27615654aab63f1b924df9a6">l_exp_hash</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Per export hash of locks.  <a href="#aa9c7b6de27615654aab63f1b924df9a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhlist__node.html">hlist_node</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a89387ae7cb253ca09998dce444eac825">l_exp_flock_hash</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Per export hash of flock locks.  <a href="#a89387ae7cb253ca09998dce444eac825"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum ldlm_mode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a4c3ab4e1a3ec7f022d954251e6eafa67">l_req_mode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Requested mode.  <a href="#a4c3ab4e1a3ec7f022d954251e6eafa67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a714ebd7977f069a111bf98aa7b202167"></a><!-- doxytag: member="ldlm_lock::l_granted_mode" ref="a714ebd7977f069a111bf98aa7b202167" args="" -->
enum ldlm_mode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a714ebd7977f069a111bf98aa7b202167">l_granted_mode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Granted mode, also protected by lr_lock. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__LDLM.html#gac03b996dc38f767ddd9b2f5ae779b257">ldlm_completion_callback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa8070acdaa6bb825842083d710f8a935">l_completion_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock completion handler pointer.  <a href="#aa8070acdaa6bb825842083d710f8a935"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ac1baaa1cb6f8c57cd0e574dff1dcdfd8">l_blocking_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock blocking AST handler pointer.  <a href="#ac1baaa1cb6f8c57cd0e574dff1dcdfd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__LDLM.html#ga6e5c291246d5e6fb302d99a6111cb03d">ldlm_glimpse_callback</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aaa0d1608f452158ab011eecc6f978058">l_glimpse_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock glimpse handler.  <a href="#aaa0d1608f452158ab011eecc6f978058"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a60b23d06e26065065d0bac47ace905b0">l_export</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock export.  <a href="#a60b23d06e26065065d0bac47ace905b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobd__export.html">obd_export</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ae11dfeaaf68f7217bc5defa97b58b1b1">l_conn_export</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock connection export.  <a href="#ae11dfeaaf68f7217bc5defa97b58b1b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlustre__handle.html">lustre_handle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a2c6e6f83512b652ba6563740a3d3487e">l_remote_handle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remote lock handle.  <a href="#a2c6e6f83512b652ba6563740a3d3487e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a30dc0349b0b525d72e9a3a92ad19ff79">l_policy_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Representation of private data specific for a lock type.  <a href="#a30dc0349b0b525d72e9a3a92ad19ff79"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u64&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a52cb4e433ee43b7326bfbb652c3d0598">l_flags</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock state flags.  <a href="#a52cb4e433ee43b7326bfbb652c3d0598"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#abb8a2696003a5ba2a21c2365ecc2d275">l_readers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock r/w usage counters.  <a href="#abb8a2696003a5ba2a21c2365ecc2d275"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d7d1e3aae30e19867dd45c9de95b6f9"></a><!-- doxytag: member="ldlm_lock::l_writers" ref="a9d7d1e3aae30e19867dd45c9de95b6f9" args="" -->
__u32&nbsp;</td><td class="memItemRight" valign="bottom"><b>l_writers</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">wait_queue_head_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a0ca58a0480ef9503c3548499e27c2e43">l_waitq</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If the lock is granted, a process sleeps on this waitq to learn when it's no longer in use.  <a href="#a0ca58a0480ef9503c3548499e27c2e43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cfs_time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af1f00870111fa501c0fb07a97c642fb1">l_last_activity</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Seconds.  <a href="#af1f00870111fa501c0fb07a97c642fb1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cfs_time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#ae5c325b0e0c567e7a32fa97d4aeb0796">l_last_used</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time last used by e.g.  <a href="#ae5c325b0e0c567e7a32fa97d4aeb0796"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structldlm__extent.html">ldlm_extent</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af103e96dfac8d06fe14a472577c0f7f6">l_req_extent</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Originally requested extent for the extent lock.  <a href="#af103e96dfac8d06fe14a472577c0f7f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9dc493ac24012a9a530f85cbb56fa25"></a><!-- doxytag: member="ldlm_lock::l_lvb_type" ref="ad9dc493ac24012a9a530f85cbb56fa25" args="" -->
enum lvb_type&nbsp;</td><td class="memItemRight" valign="bottom"><b>l_lvb_type</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#af9af59e08968100a683ab5f5d595a495">l_lvb_len</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporary storage for a LVB received during an enqueue operation.  <a href="#af9af59e08968100a683ab5f5d595a495"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58e99cf39e7033e1a504afccc043f318"></a><!-- doxytag: member="ldlm_lock::l_lvb_data" ref="a58e99cf39e7033e1a504afccc043f318" args="" -->
void *&nbsp;</td><td class="memItemRight" valign="bottom"><b>l_lvb_data</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#acb54919a43db8f99a336c67e0988fdb8">l_ast_data</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Private storage for lock user.  <a href="#acb54919a43db8f99a336c67e0988fdb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u64&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a4f6fa304d22507684a9483ecaf67c646">l_client_cookie</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connection cookie for the client originating the operation.  <a href="#a4f6fa304d22507684a9483ecaf67c646"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a464e73d6b8dbeeb1f94f4235cc71b02a">l_pending_chain</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item for locks waiting for cancellation from clients.  <a href="#a464e73d6b8dbeeb1f94f4235cc71b02a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cfs_time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a693ba0644779a6c1c5a1f5c056de82a8">l_callback_timeout</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set when lock is sent a blocking AST.  <a href="#a693ba0644779a6c1c5a1f5c056de82a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">__u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa353839ecc6943a9c21f0ace1e220b8d">l_pid</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Local PID of process which created this lock.  <a href="#aa353839ecc6943a9c21f0ace1e220b8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a7ba79dbc765caf7ab179a9a3dfd20b2b">l_bl_ast_run</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of times blocking AST was sent for this lock.  <a href="#a7ba79dbc765caf7ab179a9a3dfd20b2b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a21d60a379e0f50f97d14bde7dada4fb2">l_bl_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item ldlm_add_ast_work_item() for case of blocking ASTs.  <a href="#a21d60a379e0f50f97d14bde7dada4fb2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a7b43a74ce7191faf551c2ca62c880f10">l_cp_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List item ldlm_add_ast_work_item() for case of completion ASTs.  <a href="#a7b43a74ce7191faf551c2ca62c880f10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a0f992bff4dba5d9c54588678ca261614">l_rk_ast</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For ldlm_add_ast_work_item() for "revoke" AST used in COS.  <a href="#a0f992bff4dba5d9c54588678ca261614"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a61acd4dac2bc438e612c7ec0382dc2e4"></a><!-- doxytag: member="ldlm_lock::l_blocking_lock" ref="a61acd4dac2bc438e612c7ec0382dc2e4" args="" -->
struct <a class="el" href="structldlm__lock.html">ldlm_lock</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a61acd4dac2bc438e612c7ec0382dc2e4">l_blocking_lock</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to a conflicting lock that caused blocking AST to be sent for this lock. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#aa26a328bc8c2e6eff25c62c2d6e8c9ee">l_sl_mode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Protected by lr_lock, linkages to "skip lists".  <a href="#aa26a328bc8c2e6eff25c62c2d6e8c9ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4634b2ff8d252a3a8a81b0bb1db5464"></a><!-- doxytag: member="ldlm_lock::l_sl_policy" ref="ad4634b2ff8d252a3a8a81b0bb1db5464" args="" -->
struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>l_sl_policy</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlu__ref.html">lu_ref</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#a2cc84a3989e5b197caffa7a0fe014f27">l_reference</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reference tracking structure to debug leaked locks.  <a href="#a2cc84a3989e5b197caffa7a0fe014f27"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist__head.html">list_head</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structldlm__lock.html#adb27b96d85f21b4b27ca59159d8316ec">l_exp_list</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">export blocking dlm lock list, protected by l_export-&gt;exp_bl_list_lock.  <a href="#adb27b96d85f21b4b27ca59159d8316ec"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>LDLM lock structure. </p>
<p>Represents a single LDLM lock and its state in memory. Each lock is associated with a single <a class="el" href="structldlm__resource.html" title="LDLM resource description.">ldlm_resource</a>, the object which is being locked. There may be multiple ldlm_locks on a single resource, depending on the lock type and whether the locks are conflicting or not. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00666">666</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="acb54919a43db8f99a336c67e0988fdb8"></a><!-- doxytag: member="ldlm_lock::l_ast_data" ref="acb54919a43db8f99a336c67e0988fdb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structldlm__lock.html#acb54919a43db8f99a336c67e0988fdb8">ldlm_lock::l_ast_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Private storage for lock user. </p>
<p>Opaque to LDLM. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00822">822</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02293">ldlm_lock_set_data()</a>, and <a class="el" href="osc__lock_8c_source.html#l00693">osc_ldlm_weigh_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="a21d60a379e0f50f97d14bde7dada4fb2"></a><!-- doxytag: member="ldlm_lock::l_bl_ast" ref="a21d60a379e0f50f97d14bde7dada4fb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a21d60a379e0f50f97d14bde7dada4fb2">ldlm_lock::l_bl_ast</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item ldlm_add_ast_work_item() for case of blocking ASTs. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00865">865</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01917">ldlm_cli_cancel_list()</a>, and <a class="el" href="ldlm__request_8c_source.html#l01407">ldlm_cli_cancel_list_local()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ba79dbc765caf7ab179a9a3dfd20b2b"></a><!-- doxytag: member="ldlm_lock::l_bl_ast_run" ref="a7ba79dbc765caf7ab179a9a3dfd20b2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structldlm__lock.html#a7ba79dbc765caf7ab179a9a3dfd20b2b">ldlm_lock::l_bl_ast_run</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of times blocking AST was sent for this lock. </p>
<p>This is for debugging. Valid values are 0 and 1, if there is an attempt to send blocking AST more than once, an assertion would be hit. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>ldlm_work_bl_ast_lock </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00863">863</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac1baaa1cb6f8c57cd0e574dff1dcdfd8"></a><!-- doxytag: member="ldlm_lock::l_blocking_ast" ref="ac1baaa1cb6f8c57cd0e574dff1dcdfd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LDLM.html#gac111233b56bdf7a4767dcd7a2f15b378">ldlm_blocking_callback</a> <a class="el" href="structldlm__lock.html#ac1baaa1cb6f8c57cd0e574dff1dcdfd8">ldlm_lock::l_blocking_ast</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock blocking AST handler pointer. </p>
<p>It plays two roles:</p>
<ul>
<li>as a notification of an attempt to queue a conflicting lock (once)</li>
<li>as a notification when the lock is being cancelled.</li>
</ul>
<p>As such it's typically called twice: once for the initial conflict and then once more when the last user went away and the lock is cancelled (could happen recursively). </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00741">741</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00354">ldlm_blocking_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a693ba0644779a6c1c5a1f5c056de82a8"></a><!-- doxytag: member="ldlm_lock::l_callback_timeout" ref="a693ba0644779a6c1c5a1f5c056de82a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfs_time_t <a class="el" href="structldlm__lock.html#a693ba0644779a6c1c5a1f5c056de82a8">ldlm_lock::l_callback_timeout</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set when lock is sent a blocking AST. </p>
<p>Time in seconds when timeout is reached and client holding this lock could be evicted. This timeout could be further extended by e.g. certain IO activity under this lock. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>ost_rw_prolong_locks </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00852">852</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4f6fa304d22507684a9483ecaf67c646"></a><!-- doxytag: member="ldlm_lock::l_client_cookie" ref="a4f6fa304d22507684a9483ecaf67c646" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u64 <a class="el" href="structldlm__lock.html#a4f6fa304d22507684a9483ecaf67c646">ldlm_lock::l_client_cookie</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connection cookie for the client originating the operation. </p>
<p>Used by Commit on Share (COS) code. Currently only used for inodebits locks on MDS. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00833">833</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8070acdaa6bb825842083d710f8a935"></a><!-- doxytag: member="ldlm_lock::l_completion_ast" ref="aa8070acdaa6bb825842083d710f8a935" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LDLM.html#gac03b996dc38f767ddd9b2f5ae779b257">ldlm_completion_callback</a> <a class="el" href="structldlm__lock.html#aa8070acdaa6bb825842083d710f8a935">ldlm_lock::l_completion_ast</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock completion handler pointer. </p>
<p>Called when lock is granted. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00730">730</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="ae11dfeaaf68f7217bc5defa97b58b1b1"></a><!-- doxytag: member="ldlm_lock::l_conn_export" ref="ae11dfeaaf68f7217bc5defa97b58b1b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__export.html">obd_export</a>* <a class="el" href="structldlm__lock.html#ae11dfeaaf68f7217bc5defa97b58b1b1">ldlm_lock::l_conn_export</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock connection export. </p>
<p>Pointer to server export on a client. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00759">759</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01345">ldlm_cli_cancel()</a>, <a class="el" href="ldlm__request_8c_source.html#l01917">ldlm_cli_cancel_list()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b43a74ce7191faf551c2ca62c880f10"></a><!-- doxytag: member="ldlm_lock::l_cp_ast" ref="a7b43a74ce7191faf551c2ca62c880f10" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a7b43a74ce7191faf551c2ca62c880f10">ldlm_lock::l_cp_ast</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item ldlm_add_ast_work_item() for case of completion ASTs. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00867">867</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a89387ae7cb253ca09998dce444eac825"></a><!-- doxytag: member="ldlm_lock::l_exp_flock_hash" ref="a89387ae7cb253ca09998dce444eac825" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhlist__node.html">hlist_node</a> <a class="el" href="structldlm__lock.html#a89387ae7cb253ca09998dce444eac825">ldlm_lock::l_exp_flock_hash</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Per export hash of flock locks. </p>
<p>Protected by per-bucket exp-&gt;exp_flock_hash locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00719">719</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa9c7b6de27615654aab63f1b924df9a6"></a><!-- doxytag: member="ldlm_lock::l_exp_hash" ref="aa9c7b6de27615654aab63f1b924df9a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhlist__node.html">hlist_node</a> <a class="el" href="structldlm__lock.html#aa9c7b6de27615654aab63f1b924df9a6">ldlm_lock::l_exp_hash</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Per export hash of locks. </p>
<p>Protected by per-bucket exp-&gt;exp_lock_hash locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00714">714</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="adb27b96d85f21b4b27ca59159d8316ec"></a><!-- doxytag: member="ldlm_lock::l_exp_list" ref="adb27b96d85f21b4b27ca59159d8316ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#adb27b96d85f21b4b27ca59159d8316ec">ldlm_lock::l_exp_list</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>export blocking dlm lock list, protected by l_export-&gt;exp_bl_list_lock. </p>
<p>Lock order of waiting_lists_spinlock, exp_bl_list_lock and res lock is: res lock -&gt; exp_bl_list_lock -&gt; wanting_lists_spinlock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00901">901</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a60b23d06e26065065d0bac47ace905b0"></a><!-- doxytag: member="ldlm_lock::l_export" ref="a60b23d06e26065065d0bac47ace905b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobd__export.html">obd_export</a>* <a class="el" href="structldlm__lock.html#a60b23d06e26065065d0bac47ace905b0">ldlm_lock::l_export</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock export. </p>
<p>This is a pointer to actual client export for locks that were granted to clients. Used server-side. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00754">754</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a52cb4e433ee43b7326bfbb652c3d0598"></a><!-- doxytag: member="ldlm_lock::l_flags" ref="a52cb4e433ee43b7326bfbb652c3d0598" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u64 <a class="el" href="structldlm__lock.html#a52cb4e433ee43b7326bfbb652c3d0598">ldlm_lock::l_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock state flags. </p>
<p>Protected by lr_lock. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="lustre__dlm__flags_8h.html" title="The flags and collections of flags (masks) for.">lustre_dlm_flags.h</a> where the bits are defined. </dd></dl>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00778">778</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa0d1608f452158ab011eecc6f978058"></a><!-- doxytag: member="ldlm_lock::l_glimpse_ast" ref="aaa0d1608f452158ab011eecc6f978058" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LDLM.html#ga6e5c291246d5e6fb302d99a6111cb03d">ldlm_glimpse_callback</a> <a class="el" href="structldlm__lock.html#aaa0d1608f452158ab011eecc6f978058">ldlm_lock::l_glimpse_ast</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock glimpse handler. </p>
<p>Glimpse handler is used to obtain LVB updates from a client by server </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00747">747</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="af6bfe0ab210b608d0fa59ee6e95841ec"></a><!-- doxytag: member="ldlm_lock::l_handle" ref="af6bfe0ab210b608d0fa59ee6e95841ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structportals__handle.html">portals_handle</a> <a class="el" href="structldlm__lock.html#af6bfe0ab210b608d0fa59ee6e95841ec">ldlm_lock::l_handle</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Local lock handle. </p>
<p>When remote side wants to tell us about a lock, they address it by this opaque handle. The handle does not hold a reference on the <a class="el" href="structldlm__lock.html" title="LDLM lock structure.">ldlm_lock</a>, so it can be safely passed to other threads or nodes. When the lock needs to be accessed from the handle, it is looked up again in the lock table, and may no longer exist.</p>
<p>Must be first in the structure. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00678">678</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00582">ldlm_lock2handle()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="af1f00870111fa501c0fb07a97c642fb1"></a><!-- doxytag: member="ldlm_lock::l_last_activity" ref="af1f00870111fa501c0fb07a97c642fb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfs_time_t <a class="el" href="structldlm__lock.html#af1f00870111fa501c0fb07a97c642fb1">ldlm_lock::l_last_activity</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Seconds. </p>
<p>It will be updated if there is any activity related to the lock, e.g. enqueue the lock or send blocking AST. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00797">797</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="ae5c325b0e0c567e7a32fa97d4aeb0796"></a><!-- doxytag: member="ldlm_lock::l_last_used" ref="ae5c325b0e0c567e7a32fa97d4aeb0796" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfs_time_t <a class="el" href="structldlm__lock.html#ae5c325b0e0c567e7a32fa97d4aeb0796">ldlm_lock::l_last_used</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time last used by e.g. </p>
<p>being matched by lock match. Jiffies. Should be converted to time if needed. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00803">803</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab7ff3f52f4765c133758c21e0d224a8b"></a><!-- doxytag: member="ldlm_lock::l_lock" ref="ab7ff3f52f4765c133758c21e0d224a8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spinlock_t <a class="el" href="structldlm__lock.html#ab7ff3f52f4765c133758c21e0d224a8b">ldlm_lock::l_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal spinlock protects l_resource. </p>
<p>We should hold this lock first before taking res_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00689">689</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a039f73a41d5d8a655eff3b056963847d"></a><!-- doxytag: member="ldlm_lock::l_lru" ref="a039f73a41d5d8a655eff3b056963847d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a039f73a41d5d8a655eff3b056963847d">ldlm_lock::l_lru</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item for client side LRU list. </p>
<p>Protected by ns_lock in struct <a class="el" href="structldlm__namespace.html" title="LDLM Namespace.">ldlm_namespace</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00699">699</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9af59e08968100a683ab5f5d595a495"></a><!-- doxytag: member="ldlm_lock::l_lvb_len" ref="af9af59e08968100a683ab5f5d595a495" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#af9af59e08968100a683ab5f5d595a495">ldlm_lock::l_lvb_len</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Temporary storage for a LVB received during an enqueue operation. </p>
<p>May be vmalloc'd, so needs to be freed with OBD_FREE_LARGE(). </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00818">818</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a464e73d6b8dbeeb1f94f4235cc71b02a"></a><!-- doxytag: member="ldlm_lock::l_pending_chain" ref="a464e73d6b8dbeeb1f94f4235cc71b02a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a464e73d6b8dbeeb1f94f4235cc71b02a">ldlm_lock::l_pending_chain</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List item for locks waiting for cancellation from clients. </p>
<p>The lists this could be linked into are: waiting_locks_list (protected by waiting_locks_spinlock), then if the lock timed out, it is moved to expired_lock_thread.elt_expired_locks for further processing. Protected by elt_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00843">843</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="aa353839ecc6943a9c21f0ace1e220b8d"></a><!-- doxytag: member="ldlm_lock::l_pid" ref="aa353839ecc6943a9c21f0ace1e220b8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#aa353839ecc6943a9c21f0ace1e220b8d">ldlm_lock::l_pid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Local PID of process which created this lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00855">855</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30dc0349b0b525d72e9a3a92ad19ff79"></a><!-- doxytag: member="ldlm_lock::l_policy_data" ref="a30dc0349b0b525d72e9a3a92ad19ff79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unionldlm__policy__data.html">ldlm_policy_data</a> <a class="el" href="structldlm__lock.html#a30dc0349b0b525d72e9a3a92ad19ff79">ldlm_lock::l_policy_data</a><code> [write]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Representation of private data specific for a lock type. </p>
<p>Examples are: extent range for extent lock or bitmask for ibits locks </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00772">772</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, and <a class="el" href="osc__lock_8c_source.html#l00693">osc_ldlm_weigh_ast()</a>.</p>

</div>
</div>
<a class="anchor" id="abb8a2696003a5ba2a21c2365ecc2d275"></a><!-- doxytag: member="ldlm_lock::l_readers" ref="abb8a2696003a5ba2a21c2365ecc2d275" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 <a class="el" href="structldlm__lock.html#abb8a2696003a5ba2a21c2365ecc2d275">ldlm_lock::l_readers</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock r/w usage counters. </p>
<p>Protected by lr_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00784">784</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00315">ldlm_blocking_ast_nocheck()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00760">ldlm_lock_addref_try()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>.</p>

</div>
</div>
<a class="anchor" id="acd61f904bdcdfee7845701368db6003d"></a><!-- doxytag: member="ldlm_lock::l_refc" ref="acd61f904bdcdfee7845701368db6003d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic_t <a class="el" href="structldlm__lock.html#acd61f904bdcdfee7845701368db6003d">ldlm_lock::l_refc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock reference count. </p>
<p>This is how many users have pointers to actual structure, so that we do not accidentally free lock structure that is in use. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00684">684</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00178">ldlm_lock_get()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a2cc84a3989e5b197caffa7a0fe014f27"></a><!-- doxytag: member="ldlm_lock::l_reference" ref="a2cc84a3989e5b197caffa7a0fe014f27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlu__ref.html">lu_ref</a> <a class="el" href="structldlm__lock.html#a2cc84a3989e5b197caffa7a0fe014f27">ldlm_lock::l_reference</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reference tracking structure to debug leaked locks. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00885">885</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00403">ldlm_lock_destroy()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c6e6f83512b652ba6563740a3d3487e"></a><!-- doxytag: member="ldlm_lock::l_remote_handle" ref="a2c6e6f83512b652ba6563740a3d3487e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlustre__handle.html">lustre_handle</a> <a class="el" href="structldlm__lock.html#a2c6e6f83512b652ba6563740a3d3487e">ldlm_lock::l_remote_handle</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remote lock handle. </p>
<p>If the lock is remote, this is the handle of the other side lock (l_handle) </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00766">766</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>.</p>

</div>
</div>
<a class="anchor" id="af103e96dfac8d06fe14a472577c0f7f6"></a><!-- doxytag: member="ldlm_lock::l_req_extent" ref="af103e96dfac8d06fe14a472577c0f7f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__extent.html">ldlm_extent</a> <a class="el" href="structldlm__lock.html#af103e96dfac8d06fe14a472577c0f7f6">ldlm_lock::l_req_extent</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Originally requested extent for the extent lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00806">806</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00869">ldlm_cli_enqueue()</a>, and <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c3ab4e1a3ec7f022d954251e6eafa67"></a><!-- doxytag: member="ldlm_lock::l_req_mode" ref="a4c3ab4e1a3ec7f022d954251e6eafa67" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum ldlm_mode <a class="el" href="structldlm__lock.html#a4c3ab4e1a3ec7f022d954251e6eafa67">ldlm_lock::l_req_mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Requested mode. </p>
<p>Protected by lr_lock. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00724">724</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>.</p>

</div>
</div>
<a class="anchor" id="a64ad5a636aec3f0825f1eea9df1a5734"></a><!-- doxytag: member="ldlm_lock::l_res_link" ref="a64ad5a636aec3f0825f1eea9df1a5734" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a64ad5a636aec3f0825f1eea9df1a5734">ldlm_lock::l_res_link</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Linkage to resource's lock queues according to current lock state. </p>
<p>(could be granted, waiting or converting) Protected by lr_lock in struct <a class="el" href="structldlm__resource.html" title="LDLM resource description.">ldlm_resource</a>. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00705">705</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__resource_8c_source.html#l01323">ldlm_resource_add_lock()</a>, and <a class="el" href="ldlm__resource_8c_source.html#l01448">ldlm_resource_dump()</a>.</p>

</div>
</div>
<a class="anchor" id="a41f4592eb59ed0c94d85e9fa67acfa6f"></a><!-- doxytag: member="ldlm_lock::l_resource" ref="a41f4592eb59ed0c94d85e9fa67acfa6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structldlm__resource.html">ldlm_resource</a>* <a class="el" href="structldlm__lock.html#a41f4592eb59ed0c94d85e9fa67acfa6f">ldlm_lock::l_resource</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to actual resource this lock is in. </p>
<p><a class="el" href="group__LDLM.html#gafd6a07a826f7d2789696e472dd81adc2" title="Moves LDLM lock lock to another resource.">ldlm_lock_change_resource()</a> can change this. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00694">694</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l00594">__ldlm_handle2lock()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l01854">ldlm_cancel_resource_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00541">ldlm_cli_enqueue_fini()</a>, <a class="el" href="ldlm__request_8c_source.html#l00415">ldlm_cli_enqueue_local()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00646">ldlm_lock2desc()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02249">ldlm_lock_cancel()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00514">ldlm_lock_change_resource()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02428">ldlm_lock_downgrade()</a>, <a class="el" href="ldlm__lock_8c_source.html#l00190">ldlm_lock_put()</a>, <a class="el" href="ldlm__lock_8c_source.html#l02236">ldlm_unlink_lock_skiplist()</a>, <a class="el" href="l__lock_8c_source.html#l00051">lock_res_and_lock()</a>, <a class="el" href="osc__lock_8c_source.html#l00693">osc_ldlm_weigh_ast()</a>, and <a class="el" href="l__lock_8c_source.html#l00067">unlock_res_and_lock()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f992bff4dba5d9c54588678ca261614"></a><!-- doxytag: member="ldlm_lock::l_rk_ast" ref="a0f992bff4dba5d9c54588678ca261614" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#a0f992bff4dba5d9c54588678ca261614">ldlm_lock::l_rk_ast</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For ldlm_add_ast_work_item() for "revoke" AST used in COS. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00869">869</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa26a328bc8c2e6eff25c62c2d6e8c9ee"></a><!-- doxytag: member="ldlm_lock::l_sl_mode" ref="aa26a328bc8c2e6eff25c62c2d6e8c9ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist__head.html">list_head</a> <a class="el" href="structldlm__lock.html#aa26a328bc8c2e6eff25c62c2d6e8c9ee">ldlm_lock::l_sl_mode</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Protected by lr_lock, linkages to "skip lists". </p>
<p>For more explanations of skip lists see <a class="el" href="ldlm__inodebits_8c_source.html">ldlm/ldlm_inodebits.c</a> </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00881">881</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02459">ldlm_lock_convert()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l02236">ldlm_unlink_lock_skiplist()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ca58a0480ef9503c3548499e27c2e43"></a><!-- doxytag: member="ldlm_lock::l_waitq" ref="a0ca58a0480ef9503c3548499e27c2e43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wait_queue_head_t <a class="el" href="structldlm__lock.html#a0ca58a0480ef9503c3548499e27c2e43">ldlm_lock::l_waitq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the lock is granted, a process sleeps on this waitq to learn when it's no longer in use. </p>
<p>If the lock is not granted, a process sleeps on this waitq to learn when it becomes granted. </p>

<p>Definition at line <a class="el" href="lustre__dlm_8h_source.html#l00791">791</a> of file <a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a>.</p>

<p>Referenced by <a class="el" href="ldlm__lock_8c_source.html#l02205">ldlm_cancel_callback()</a>, <a class="el" href="ldlm__request_8c_source.html#l00230">ldlm_completion_ast()</a>, <a class="el" href="ldlm__request_8c_source.html#l00188">ldlm_completion_ast_async()</a>, <a class="el" href="ldlm__flock_8c_source.html#l00662">ldlm_flock_completion_ast()</a>, <a class="el" href="ldlm__lock_8c_source.html#l01321">ldlm_lock_allow_match_locked()</a>, and <a class="el" href="ldlm__lock_8c_source.html#l01370">ldlm_lock_match()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>lustre/include/<a class="el" href="lustre__dlm_8h_source.html">lustre_dlm.h</a></li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:58:04 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
