<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: param</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>param</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcfg__interop__param.html">cfg_interop_param</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3e1fb722dd40c1a75c5c552e2ce50b9f"></a><!-- doxytag: member="param::PARAM_TIMEOUT" ref="ga3e1fb722dd40c1a75c5c552e2ce50b9f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_TIMEOUT</b>&nbsp;&nbsp;&nbsp;&quot;timeout=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2c4c31ac2e472fc4490f6db41769747f"></a><!-- doxytag: member="param::PARAM_LDLM_TIMEOUT" ref="ga2c4c31ac2e472fc4490f6db41769747f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_LDLM_TIMEOUT</b>&nbsp;&nbsp;&nbsp;&quot;ldlm_timeout=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gace2d557be54d1b115ecc16d1c837ef86"></a><!-- doxytag: member="param::PARAM_AT_MIN" ref="gace2d557be54d1b115ecc16d1c837ef86" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_AT_MIN</b>&nbsp;&nbsp;&nbsp;&quot;at_min=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga04e2145b1bc7e3f2d85a57f944160207"></a><!-- doxytag: member="param::PARAM_AT_MAX" ref="ga04e2145b1bc7e3f2d85a57f944160207" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_AT_MAX</b>&nbsp;&nbsp;&nbsp;&quot;at_max=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabd3fdc49546dd446762c1837d854c6cc"></a><!-- doxytag: member="param::PARAM_AT_EXTRA" ref="gabd3fdc49546dd446762c1837d854c6cc" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_AT_EXTRA</b>&nbsp;&nbsp;&nbsp;&quot;at_extra=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaae98610662747226c227661670b980ed"></a><!-- doxytag: member="param::PARAM_AT_EARLY_MARGIN" ref="gaae98610662747226c227661670b980ed" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_AT_EARLY_MARGIN</b>&nbsp;&nbsp;&nbsp;&quot;at_early_margin=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1dd0059ba7d15ab5416444772de77bd4"></a><!-- doxytag: member="param::PARAM_AT_HISTORY" ref="ga1dd0059ba7d15ab5416444772de77bd4" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_AT_HISTORY</b>&nbsp;&nbsp;&nbsp;&quot;at_history=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga517224e28e0228b8db1ac65816fce554"></a><!-- doxytag: member="param::PARAM_JOBID_VAR" ref="ga517224e28e0228b8db1ac65816fce554" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_JOBID_VAR</b>&nbsp;&nbsp;&nbsp;&quot;jobid_var=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga83449e1ac00608da5faf662b9269e6e5"></a><!-- doxytag: member="param::PARAM_MGSNODE" ref="ga83449e1ac00608da5faf662b9269e6e5" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_MGSNODE</b>&nbsp;&nbsp;&nbsp;&quot;mgsnode=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga47a640272b137fb205358fa84998ec93"></a><!-- doxytag: member="param::PARAM_FAILNODE" ref="ga47a640272b137fb205358fa84998ec93" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_FAILNODE</b>&nbsp;&nbsp;&nbsp;&quot;failover.node=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae8321d921ae3f6de96d136600c667d4d"></a><!-- doxytag: member="param::PARAM_FAILMODE" ref="gae8321d921ae3f6de96d136600c667d4d" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_FAILMODE</b>&nbsp;&nbsp;&nbsp;&quot;failover.mode=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadedff144040a9699efaf5e043def0f4e"></a><!-- doxytag: member="param::PARAM_ACTIVE" ref="gadedff144040a9699efaf5e043def0f4e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_ACTIVE</b>&nbsp;&nbsp;&nbsp;&quot;active=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga82d287269177852e398768e3c99096a2"></a><!-- doxytag: member="param::PARAM_NETWORK" ref="ga82d287269177852e398768e3c99096a2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_NETWORK</b>&nbsp;&nbsp;&nbsp;&quot;network=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga21a5ef44a1de95ac48c2359e1cbbeb75"></a><!-- doxytag: member="param::PARAM_ID_UPCALL" ref="ga21a5ef44a1de95ac48c2359e1cbbeb75" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_ID_UPCALL</b>&nbsp;&nbsp;&nbsp;&quot;identity_upcall=&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga767c0f867dccd253efcfe72e38e0fd5b"></a><!-- doxytag: member="param::PARAM_OST" ref="ga767c0f867dccd253efcfe72e38e0fd5b" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_OST</b>&nbsp;&nbsp;&nbsp;&quot;ost.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad5ffc171ac2234bdbb532c10d5829f6b"></a><!-- doxytag: member="param::PARAM_OSD" ref="gad5ffc171ac2234bdbb532c10d5829f6b" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_OSD</b>&nbsp;&nbsp;&nbsp;&quot;osd.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa6d5e955e1c13a780e7641a25bdd0c9a"></a><!-- doxytag: member="param::PARAM_OSC" ref="gaa6d5e955e1c13a780e7641a25bdd0c9a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_OSC</b>&nbsp;&nbsp;&nbsp;&quot;osc.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5db87050f02f883cb059b2055a92fe27"></a><!-- doxytag: member="param::PARAM_MDT" ref="ga5db87050f02f883cb059b2055a92fe27" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_MDT</b>&nbsp;&nbsp;&nbsp;&quot;mdt.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga93169fe5fe86f840a8c2a91c66dbb533"></a><!-- doxytag: member="param::PARAM_HSM" ref="ga93169fe5fe86f840a8c2a91c66dbb533" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_HSM</b>&nbsp;&nbsp;&nbsp;&quot;mdt.hsm.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac35c317121584191f01a49c599ce7113"></a><!-- doxytag: member="param::PARAM_MDD" ref="gac35c317121584191f01a49c599ce7113" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_MDD</b>&nbsp;&nbsp;&nbsp;&quot;mdd.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae4c53d69a9c9c95886f678e2b6a3b8f1"></a><!-- doxytag: member="param::PARAM_MDC" ref="gae4c53d69a9c9c95886f678e2b6a3b8f1" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_MDC</b>&nbsp;&nbsp;&nbsp;&quot;mdc.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1eb3b25afb82497941e1ddb0f25bb979"></a><!-- doxytag: member="param::PARAM_LLITE" ref="ga1eb3b25afb82497941e1ddb0f25bb979" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_LLITE</b>&nbsp;&nbsp;&nbsp;&quot;llite.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga21d314a771e41ab0708166bd6b5e467c"></a><!-- doxytag: member="param::PARAM_LOV" ref="ga21d314a771e41ab0708166bd6b5e467c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_LOV</b>&nbsp;&nbsp;&nbsp;&quot;lov.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab8fe23a03d37b3cb1b92ec14e7b140f9"></a><!-- doxytag: member="param::PARAM_LOD" ref="gab8fe23a03d37b3cb1b92ec14e7b140f9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_LOD</b>&nbsp;&nbsp;&nbsp;&quot;lod.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga717ed2140113b30eb19d10bc56f67e10"></a><!-- doxytag: member="param::PARAM_OSP" ref="ga717ed2140113b30eb19d10bc56f67e10" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_OSP</b>&nbsp;&nbsp;&nbsp;&quot;osp.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf9a4da106e6915ca812525c11a8d8886"></a><!-- doxytag: member="param::PARAM_SYS" ref="gaf9a4da106e6915ca812525c11a8d8886" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_SYS</b>&nbsp;&nbsp;&nbsp;&quot;sys.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga93c0734cf30e662e3a9ca6845c19fede"></a><!-- doxytag: member="param::PARAM_SRPC" ref="ga93c0734cf30e662e3a9ca6845c19fede" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_SRPC</b>&nbsp;&nbsp;&nbsp;&quot;srpc.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf909b4269701ad555c485ab864a87d01"></a><!-- doxytag: member="param::PARAM_SRPC_FLVR" ref="gaf909b4269701ad555c485ab864a87d01" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_SRPC_FLVR</b>&nbsp;&nbsp;&nbsp;&quot;srpc.flavor.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga61bdfb281f768ff7871c63824467f471"></a><!-- doxytag: member="param::PARAM_SRPC_UDESC" ref="ga61bdfb281f768ff7871c63824467f471" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_SRPC_UDESC</b>&nbsp;&nbsp;&nbsp;&quot;srpc.udesc.cli2mdt&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga342b7c3e1a9a5e0ee3e209b5570ed8b8"></a><!-- doxytag: member="param::PARAM_SEC" ref="ga342b7c3e1a9a5e0ee3e209b5570ed8b8" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_SEC</b>&nbsp;&nbsp;&nbsp;&quot;security.&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga13ce69d013aa5a8bb3a6b717fb025a69"></a><!-- doxytag: member="param::PARAM_QUOTA" ref="ga13ce69d013aa5a8bb3a6b717fb025a69" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PARAM_QUOTA</b>&nbsp;&nbsp;&nbsp;&quot;quota.&quot;</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1684a40b9e62b330828375cff65d7373"></a><!-- doxytag: member="param::class_find_param" ref="ga1684a40b9e62b330828375cff65d7373" args="(char *buf, char *key, char **valp)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_find_param</b> (char *buf, char *key, char **valp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcfg__interop__param.html">cfg_interop_param</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__param.html#ga15cabac283ad76519a44af348a0a1a82">class_find_old_param</a> (const char *param, struct <a class="el" href="structcfg__interop__param.html">cfg_interop_param</a> *ptr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether the proc parameter <em>param</em> is an old parameter or not from the array <em>ptr</em> which contains the mapping from old parameters to new ones.  <a href="#ga15cabac283ad76519a44af348a0a1a82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__param.html#ga023f9a64334bf98066ea5482a99bb7ce">class_get_next_param</a> (char **params, char *copy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds a parameter in <em>params</em> and copies it to <em>copy</em>.  <a href="#ga023f9a64334bf98066ea5482a99bb7ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa849570469e4723f970bf751e044cd91"></a><!-- doxytag: member="param::class_match_param" ref="gaa849570469e4723f970bf751e044cd91" args="(char *buf, const char *key, char **valp)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_match_param</b> (char *buf, const char *key, char **valp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3f0297f0bcaf0a0d71ea446c723d7306"></a><!-- doxytag: member="param::class_parse_nid" ref="ga3f0297f0bcaf0a0d71ea446c723d7306" args="(char *buf, lnet_nid_t *nid, char **endh)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_parse_nid</b> (char *buf, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *nid, char **endh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5ddba158391a2e62e10ac85a3125f2b0"></a><!-- doxytag: member="param::class_parse_nid_quiet" ref="ga5ddba158391a2e62e10ac85a3125f2b0" args="(char *buf, lnet_nid_t *nid, char **endh)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_parse_nid_quiet</b> (char *buf, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> *nid, char **endh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga68d0ee6e88e8a5b9802d39215a1a10d7"></a><!-- doxytag: member="param::class_parse_net" ref="ga68d0ee6e88e8a5b9802d39215a1a10d7" args="(char *buf, __u32 *net, char **endh)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_parse_net</b> (char *buf, __u32 *net, char **endh)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga086bf2cd349e42500c7b9d89a6b79338"></a><!-- doxytag: member="param::class_match_nid" ref="ga086bf2cd349e42500c7b9d89a6b79338" args="(char *buf, char *key, lnet_nid_t nid)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_match_nid</b> (char *buf, char *key, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga94fbd0b53e765fd1fbbf202845e9ac2a"></a><!-- doxytag: member="param::class_match_net" ref="ga94fbd0b53e765fd1fbbf202845e9ac2a" args="(char *buf, char *key, __u32 net)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>class_match_net</b> (char *buf, char *key, __u32 net)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga017e1a43c87459a5697a96b4102018ca"></a><!-- doxytag: member="param::do_lcfg" ref="ga017e1a43c87459a5697a96b4102018ca" args="(char *cfgname, lnet_nid_t nid, int cmd, char *s1, char *s2, char *s3, char *s4)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__param.html#ga017e1a43c87459a5697a96b4102018ca">do_lcfg</a> (char *cfgname, <a class="el" href="group__lnet__addr.html#ga0d47ef2c4f1002efbdd050547f80a312">lnet_nid_t</a> nid, int cmd, char *s1, char *s2, char *s3, char *s4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="structlustre__cfg__bufs.html">lustre_cfg_bufs</a> are a holdover from 1.4; we can still set these up from lctl (and do for echo cli/srv. <br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga15cabac283ad76519a44af348a0a1a82"></a><!-- doxytag: member="lustre_param.h::class_find_old_param" ref="ga15cabac283ad76519a44af348a0a1a82" args="(const char *param, struct cfg_interop_param *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcfg__interop__param.html">cfg_interop_param</a>* class_find_old_param </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcfg__interop__param.html">cfg_interop_param</a> *&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether the proc parameter <em>param</em> is an old parameter or not from the array <em>ptr</em> which contains the mapping from old parameters to new ones. </p>
<p>If it's an old one, then return the pointer to the <a class="el" href="structcfg__interop__param.html">cfg_interop_param</a> struc- ture which contains both the old and new parameters.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>proc parameter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr</em>&nbsp;</td><td>an array which contains the mapping from old parameters to new ones</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valid-pointer</em>&nbsp;</td><td>pointer to the <a class="el" href="structcfg__interop__param.html">cfg_interop_param</a> structure which contains the old and new parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NULL</em>&nbsp;</td><td><em>param</em> or <em>ptr</em> is NULL, or <em>param</em> is not an old parameter </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__config_8c_source.html#l00095">95</a> of file <a class="el" href="obd__config_8c_source.html">obd_config.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00097"></a>00097 {
<a name="l00098"></a>00098         <span class="keywordtype">char</span> *value = NULL;
<a name="l00099"></a>00099         <span class="keywordtype">int</span>   name_len = 0;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="keywordflow">if</span> (param == NULL || ptr == NULL)
<a name="l00102"></a>00102                 RETURN(NULL);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104         value = strchr(param, <span class="charliteral">&apos;=&apos;</span>);
<a name="l00105"></a>00105         <span class="keywordflow">if</span> (value == NULL)
<a name="l00106"></a>00106                 name_len = strlen(param);
<a name="l00107"></a>00107         <span class="keywordflow">else</span>
<a name="l00108"></a>00108                 name_len = value - param;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         <span class="keywordflow">while</span> (ptr-&gt;old_param != NULL) {
<a name="l00111"></a>00111                 <span class="keywordflow">if</span> (strncmp(param, ptr-&gt;old_param, name_len) == 0 &amp;&amp;
<a name="l00112"></a>00112                     name_len == strlen(ptr-&gt;old_param))
<a name="l00113"></a>00113                         RETURN(ptr);
<a name="l00114"></a>00114                 ptr++;
<a name="l00115"></a>00115         }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117         RETURN(NULL);
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga023f9a64334bf98066ea5482a99bb7ce"></a><!-- doxytag: member="lustre_param.h::class_get_next_param" ref="ga023f9a64334bf98066ea5482a99bb7ce" args="(char **params, char *copy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int class_get_next_param </td>
          <td>(</td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>copy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds a parameter in <em>params</em> and copies it to <em>copy</em>. </p>
<p>Leading spaces are skipped. Next space or end of string is the parameter terminator with the exception that spaces inside single or double quotes get included into a parameter. The parameter is copied into <em>copy</em> which has to be allocated big enough by a caller, quotes are stripped in the copy and the copy is terminated by 0.</p>
<p>On return <em>params</em> is set to next parameter or to NULL if last parameter is returned.</p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if parameter is returned in <em>copy</em> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>otherwise </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-EINVAL</em>&nbsp;</td><td>if unbalanced quota is found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="obd__config_8c_source.html#l00137">137</a> of file <a class="el" href="obd__config_8c_source.html">obd_config.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00138"></a>00138 {
<a name="l00139"></a>00139         <span class="keywordtype">char</span> *q1, *q2, *str;
<a name="l00140"></a>00140         <span class="keywordtype">int</span> len;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142         str = *params;
<a name="l00143"></a>00143         <span class="keywordflow">while</span> (*str == <span class="charliteral">&apos; &apos;</span>)
<a name="l00144"></a>00144                 str++;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <span class="keywordflow">if</span> (*str == <span class="charliteral">&apos;\0&apos;</span>) {
<a name="l00147"></a>00147                 *params = NULL;
<a name="l00148"></a>00148                 <span class="keywordflow">return</span> 1;
<a name="l00149"></a>00149         }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151         <span class="keywordflow">while</span> (1) {
<a name="l00152"></a>00152                 q1 = strpbrk(str, <span class="stringliteral">&quot; &apos;\&quot;&quot;</span>);
<a name="l00153"></a>00153                 <span class="keywordflow">if</span> (q1 == NULL) {
<a name="l00154"></a>00154                         len = strlen(str);
<a name="l00155"></a>00155                         memcpy(copy, str, len);
<a name="l00156"></a>00156                         copy[len] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00157"></a>00157                         *params = NULL;
<a name="l00158"></a>00158                         <span class="keywordflow">return</span> 0;
<a name="l00159"></a>00159                 }
<a name="l00160"></a>00160                 len = q1 - str;
<a name="l00161"></a>00161                 <span class="keywordflow">if</span> (*q1 == <span class="charliteral">&apos; &apos;</span>) {
<a name="l00162"></a>00162                         memcpy(copy, str, len);
<a name="l00163"></a>00163                         copy[len] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00164"></a>00164                         *params = str + len;
<a name="l00165"></a>00165                         <span class="keywordflow">return</span> 0;
<a name="l00166"></a>00166                 }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168                 memcpy(copy, str, len);
<a name="l00169"></a>00169                 copy += len;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171                 <span class="comment">/* search for the matching closing quote */</span>
<a name="l00172"></a>00172                 str = q1 + 1;
<a name="l00173"></a>00173                 q2 = strchr(str, *q1);
<a name="l00174"></a>00174                 <span class="keywordflow">if</span> (q2 == NULL) {
<a name="l00175"></a>00175                         CERROR(<span class="stringliteral">&quot;Unbalanced quota in parameters: \&quot;%s\&quot;\n&quot;</span>,
<a name="l00176"></a>00176                                *params);
<a name="l00177"></a>00177                         <span class="keywordflow">return</span> -EINVAL;
<a name="l00178"></a>00178                 }
<a name="l00179"></a>00179                 len = q2 - str;
<a name="l00180"></a>00180                 memcpy(copy, str, len);
<a name="l00181"></a>00181                 copy += len;
<a name="l00182"></a>00182                 str = q2 + 1;
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184         <span class="keywordflow">return</span> 1;
<a name="l00185"></a>00185 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:55:45 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
