<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lu_fid</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lu_fid<br/>
<small>
[<a class="el" href="group__lustreidl.html">lustreidl</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for lu_fid:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__lu__fid.png" border="0" alt="" usemap="#group____lu____fid_map"/>
<map name="group____lu____fid_map" id="group____lu____fid">
<area shape="rect" id="node1" href="group__lustreidl.html" title="Lustre wire protocol definitions." alt="" coords="5,5,80,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhsm__attrs.html">hsm_attrs</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">HSM on-disk attributes stored in a separate xattr.  <a href="structhsm__attrs.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__orphan__rec.html">lu_orphan_rec</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__orphan__ent.html">lu_orphan_ent</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad52b5f8afab108fb06b8a0a1ca116be2"></a><!-- doxytag: member="lu_fid::LL_HSM_MAX_ARCHIVE" ref="gad52b5f8afab108fb06b8a0a1ca116be2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LL_HSM_MAX_ARCHIVE</b>&nbsp;&nbsp;&nbsp;(sizeof(__u32) * 8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga82e5f168e7b82d3e23a7d7643fbaf09c"></a><!-- doxytag: member="lu_fid::OBIF_OID_MAX_BITS" ref="ga82e5f168e7b82d3e23a7d7643fbaf09c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>OBIF_OID_MAX_BITS</b>&nbsp;&nbsp;&nbsp;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf9e7f5a4b386166a6ca7ee989660121f"></a><!-- doxytag: member="lu_fid::OBIF_MAX_OID" ref="gaf9e7f5a4b386166a6ca7ee989660121f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>OBIF_MAX_OID</b>&nbsp;&nbsp;&nbsp;(1ULL &lt;&lt; OBIF_OID_MAX_BITS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga91fe98c708b9fa8398a9d5d55a7995b9"></a><!-- doxytag: member="lu_fid::OBIF_OID_MASK" ref="ga91fe98c708b9fa8398a9d5d55a7995b9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>OBIF_OID_MASK</b>&nbsp;&nbsp;&nbsp;((1ULL &lt;&lt; OBIF_OID_MAX_BITS) - 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa7537b1d0de8b04494e3149e866ad9fe"></a><!-- doxytag: member="lu_fid::IDIF_OID_MAX_BITS" ref="gaa7537b1d0de8b04494e3149e866ad9fe" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>IDIF_OID_MAX_BITS</b>&nbsp;&nbsp;&nbsp;48</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga57419850700ffa0fe5b7a485853676ef"></a><!-- doxytag: member="lu_fid::IDIF_MAX_OID" ref="ga57419850700ffa0fe5b7a485853676ef" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>IDIF_MAX_OID</b>&nbsp;&nbsp;&nbsp;(1ULL &lt;&lt; IDIF_OID_MAX_BITS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae97a6c0a6463f085856d744b1699491f"></a><!-- doxytag: member="lu_fid::IDIF_OID_MASK" ref="gae97a6c0a6463f085856d744b1699491f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>IDIF_OID_MASK</b>&nbsp;&nbsp;&nbsp;((1ULL &lt;&lt; IDIF_OID_MAX_BITS) - 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>__diff_normalize</b>(val0, val1)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga081d8a344dc74bcb57c19b9f45ddb7c0">lma_compat</a> { <b>LMAC_HSM</b> =  0x00000001, 
<b>LMAC_NOT_IN_OI</b> =  0x00000004, 
<b>LMAC_FID_ON_OST</b> =  0x00000008
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Flags for <a class="el" href="structlustre__mdt__attrs.html#aa26d844b21ea7bce00d881a1c62e3b63" title="Bitfield for supported data in this structure.">lustre_mdt_attrs::lma_compat</a> and <a class="el" href="structlustre__mdt__attrs.html#a03ad38a2c00c68d8ef439d38cf4eaffa" title="Per-file incompat feature list.">lustre_mdt_attrs::lma_incompat</a>. </p>
 <a href="group__lu__fid.html#ga081d8a344dc74bcb57c19b9f45ddb7c0">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga5c86b0d816a99aa2ef2c9f6f41d4f893">lma_incompat</a> { <br/>
&nbsp;&nbsp;<b>LMAI_RELEASED</b> =  0x00000001, 
<b>LMAI_AGENT</b> =  0x00000002, 
<b>LMAI_REMOTE_PARENT</b> =  0x00000004, 
<b>LMAI_STRIPED</b> =  0x00000008, 
<br/>
&nbsp;&nbsp;<b>LMAI_ORPHAN</b> =  0x00000010, 
<b>LMA_INCOMPAT_SUPP</b>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Masks for all features that should be supported by a Lustre version to access a specific file. </p>
 <a href="group__lu__fid.html#ga5c86b0d816a99aa2ef2c9f6f41d4f893">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a8b43011f1da1d645f997f4750219e307">LUSTRE_FID_LASTID_OID</a> =  0UL, 
<a class="el" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97">LUSTRE_FID_INIT_OID</a> =  1UL
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>fid constants </p>
 <a href="group__lu__fid.html#ga39fca1837c5ce7715cbf571669660c13">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f">fid_seq</a> { <br/>
&nbsp;&nbsp;<b>FID_SEQ_OST_MDT0</b> =  0, 
<b>FID_SEQ_LLOG</b> =  1, 
<b>FID_SEQ_ECHO</b> =  2, 
<b>FID_SEQ_UNUSED_START</b> =  3, 
<br/>
&nbsp;&nbsp;<b>FID_SEQ_UNUSED_END</b> =  9, 
<b>FID_SEQ_LLOG_NAME</b> =  10, 
<b>FID_SEQ_RSVD</b> =  11, 
<b>FID_SEQ_IGIF</b> =  12, 
<br/>
&nbsp;&nbsp;<b>FID_SEQ_IGIF_MAX</b> =  0x0ffffffffULL, 
<b>FID_SEQ_IDIF</b> =  0x100000000ULL, 
<b>FID_SEQ_IDIF_MAX</b> =  0x1ffffffffULL, 
<b>FID_SEQ_START</b> =  0x200000000ULL, 
<br/>
&nbsp;&nbsp;<b>FID_SEQ_LOCAL_FILE</b> =  0x200000001ULL, 
<b>FID_SEQ_DOT_LUSTRE</b> =  0x200000002ULL, 
<b>FID_SEQ_LOCAL_NAME</b> =  0x200000003ULL, 
<b>FID_SEQ_SPECIAL</b> =  0x200000004ULL, 
<br/>
&nbsp;&nbsp;<b>FID_SEQ_QUOTA</b> =  0x200000005ULL, 
<b>FID_SEQ_QUOTA_GLB</b> =  0x200000006ULL, 
<b>FID_SEQ_ROOT</b> =  0x200000007ULL, 
<b>FID_SEQ_LAYOUT_RBTREE</b> =  0x200000008ULL, 
<br/>
&nbsp;&nbsp;<b>FID_SEQ_UPDATE_LOG</b> =  0x200000009ULL, 
<b>FID_SEQ_UPDATE_LOG_DIR</b> =  0x20000000aULL, 
<b>FID_SEQ_NORMAL</b> =  0x200000400ULL, 
<b>FID_SEQ_LOV_DEFAULT</b> =  0xffffffffffffffffULL
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the IGIF namespace, so these reserved SEQ numbers can be used for other purposes and not risk collisions with existing inodes. </p>
 <a href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#gaabd104e6a31a8938c432ca2e879df604">special_oid</a> { <b>FID_OID_SPECIAL_BFL</b> =  1UL
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>OID for FID_SEQ_SPECIAL. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga75ebbd83cf9ff73571541e51c26ce786">dot_lustre_oid</a> { <b>FID_OID_DOT_LUSTRE</b> =  1UL, 
<b>FID_OID_DOT_LUSTRE_OBF</b> =  2UL, 
<b>FID_OID_DOT_LUSTRE_LPF</b> =  3UL
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>OID for FID_SEQ_DOT_LUSTRE. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga363203a813dc870a46b320f5e4ba5718">root_oid</a> { <b>FID_OID_ROOT</b> =  1UL, 
<b>FID_OID_ECHO_ROOT</b> =  2UL
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>OID for FID_SEQ_ROOT. </p>
<br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga57ce2f0700c0cc37b3d423df0ff5e3aa">lustre_lma_swab</a> (struct <a class="el" href="structlustre__mdt__attrs.html">lustre_mdt_attrs</a> *lma)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Swab, if needed, LMA structure which is stored on-disk in little-endian order.  <a href="#ga57ce2f0700c0cc37b3d423df0ff5e3aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#gad6d276486e37db88948da19fc7b6cf89">lustre_lma_init</a> (struct <a class="el" href="structlustre__mdt__attrs.html">lustre_mdt_attrs</a> *lma, const struct <a class="el" href="structlu__fid.html">lu_fid</a> *fid, __u32 compat, __u32 incompat)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize new <em>lma</em>.  <a href="#gad6d276486e37db88948da19fc7b6cf89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__fid.html#ga5ca354ba0913bf236001c307b119ef21">lustre_hsm_swab</a> (struct <a class="el" href="structhsm__attrs.html">hsm_attrs</a> *attrs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Swab, if needed, HSM structure which is stored on-disk in little-endian order.  <a href="#ga5ca354ba0913bf236001c307b119ef21"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga5ea504724eb8d727307fe110dd971282"></a><!-- doxytag: member="lustre_idl.h::__diff_normalize" ref="ga5ea504724eb8d727307fe110dd971282" args="(val0, val1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __diff_normalize</td>
          <td>(</td>
          <td class="paramtype">val0, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">val1&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">({                                                              \
        typeof(val0) __val0 = (val0);                           \
        typeof(val1) __val1 = (val1);                           \
                                                                \
        (__val0 == __val1 ? 0 : __val0 &gt; __val1 ? +1 : -1);     \
})
</pre></div>
<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00806">806</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga39fca1837c5ce7715cbf571669660c13"></a><!-- doxytag: member="lustre_idl.h::@22" ref="ga39fca1837c5ce7715cbf571669660c13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>fid constants </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga39fca1837c5ce7715cbf571669660c13a8b43011f1da1d645f997f4750219e307"></a><!-- doxytag: member="LUSTRE_FID_LASTID_OID" ref="gga39fca1837c5ce7715cbf571669660c13a8b43011f1da1d645f997f4750219e307" args="" -->LUSTRE_FID_LASTID_OID</em>&nbsp;</td><td>
<p>LASTID file has zero OID. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97"></a><!-- doxytag: member="LUSTRE_FID_INIT_OID" ref="gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97" args="" -->LUSTRE_FID_INIT_OID</em>&nbsp;</td><td>
<p>initial fid id value </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00235">235</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00235"></a>00235      {
<a name="l00237"></a>00237         <a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a8b43011f1da1d645f997f4750219e307" title="LASTID file has zero OID.">LUSTRE_FID_LASTID_OID</a> = 0UL,
<a name="l00239"></a>00239         <a class="code" href="group__lu__fid.html#gga39fca1837c5ce7715cbf571669660c13a94db8d3ca92311f57ec84c66630a5f97" title="initial fid id value">LUSTRE_FID_INIT_OID</a>  = 1UL
<a name="l00240"></a>00240 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga962ff98f105cccff448c45b0c7b77e2f"></a><!-- doxytag: member="lustre_idl.h::fid_seq" ref="ga962ff98f105cccff448c45b0c7b77e2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lu__fid.html#ga962ff98f105cccff448c45b0c7b77e2f">fid_seq</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Note that reserved SEQ numbers below 12 will conflict with ldiskfs inodes in the IGIF namespace, so these reserved SEQ numbers can be used for other purposes and not risk collisions with existing inodes. </p>
<p>Different FID Format <a href="http://arch.lustre.org/index.php?title=Interoperability_fids_zfs#NEW.0">http://arch.lustre.org/index.php?title=Interoperability_fids_zfs#NEW.0</a> </p>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00278">278</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278              {
<a name="l00279"></a>00279         FID_SEQ_OST_MDT0        = 0,
<a name="l00280"></a>00280         FID_SEQ_LLOG            = 1, <span class="comment">/* unnamed llogs */</span>
<a name="l00281"></a>00281         FID_SEQ_ECHO            = 2,
<a name="l00282"></a>00282         FID_SEQ_UNUSED_START    = 3,
<a name="l00283"></a>00283         FID_SEQ_UNUSED_END      = 9,
<a name="l00284"></a>00284         FID_SEQ_LLOG_NAME       = 10, <span class="comment">/* named llogs */</span>
<a name="l00285"></a>00285         FID_SEQ_RSVD            = 11,
<a name="l00286"></a>00286         FID_SEQ_IGIF            = 12,
<a name="l00287"></a>00287         FID_SEQ_IGIF_MAX        = 0x0ffffffffULL,
<a name="l00288"></a>00288         FID_SEQ_IDIF            = 0x100000000ULL,
<a name="l00289"></a>00289         FID_SEQ_IDIF_MAX        = 0x1ffffffffULL,
<a name="l00290"></a>00290         <span class="comment">/* Normal FID sequence starts from this value, i.e. 1&lt;&lt;33 */</span>
<a name="l00291"></a>00291         FID_SEQ_START           = 0x200000000ULL,
<a name="l00292"></a>00292         <span class="comment">/* sequence for local pre-defined FIDs listed in local_oid */</span>
<a name="l00293"></a>00293         FID_SEQ_LOCAL_FILE      = 0x200000001ULL,
<a name="l00294"></a>00294         FID_SEQ_DOT_LUSTRE      = 0x200000002ULL,
<a name="l00295"></a>00295         <span class="comment">/* sequence is used for local named objects FIDs generated</span>
<a name="l00296"></a>00296 <span class="comment">         * by local_object_storage library */</span>
<a name="l00297"></a>00297         FID_SEQ_LOCAL_NAME      = 0x200000003ULL,
<a name="l00298"></a>00298         <span class="comment">/* Because current FLD will only cache the fid sequence, instead</span>
<a name="l00299"></a>00299 <span class="comment">         * of oid on the client side, if the FID needs to be exposed to</span>
<a name="l00300"></a>00300 <span class="comment">         * clients sides, it needs to make sure all of fids under one</span>
<a name="l00301"></a>00301 <span class="comment">         * sequence will be located in one MDT. */</span>
<a name="l00302"></a>00302         FID_SEQ_SPECIAL         = 0x200000004ULL,
<a name="l00303"></a>00303         FID_SEQ_QUOTA           = 0x200000005ULL,
<a name="l00304"></a>00304         FID_SEQ_QUOTA_GLB       = 0x200000006ULL,
<a name="l00305"></a>00305         FID_SEQ_ROOT            = 0x200000007ULL,  <span class="comment">/* Located on MDT0 */</span>
<a name="l00306"></a>00306         FID_SEQ_LAYOUT_RBTREE   = 0x200000008ULL,
<a name="l00307"></a>00307         <span class="comment">/* sequence is used for update logs of cross-MDT operation */</span>
<a name="l00308"></a>00308         FID_SEQ_UPDATE_LOG      = 0x200000009ULL,
<a name="l00309"></a>00309         <span class="comment">/* Sequence is used for the directory under which update logs</span>
<a name="l00310"></a>00310 <span class="comment">         * are created. */</span>
<a name="l00311"></a>00311         FID_SEQ_UPDATE_LOG_DIR  = 0x20000000aULL,
<a name="l00312"></a>00312         FID_SEQ_NORMAL          = 0x200000400ULL,
<a name="l00313"></a>00313         FID_SEQ_LOV_DEFAULT     = 0xffffffffffffffffULL
<a name="l00314"></a>00314 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga081d8a344dc74bcb57c19b9f45ddb7c0"></a><!-- doxytag: member="lustre_idl.h::lma_compat" ref="ga081d8a344dc74bcb57c19b9f45ddb7c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lu__fid.html#ga081d8a344dc74bcb57c19b9f45ddb7c0">lma_compat</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flags for <a class="el" href="structlustre__mdt__attrs.html#aa26d844b21ea7bce00d881a1c62e3b63" title="Bitfield for supported data in this structure.">lustre_mdt_attrs::lma_compat</a> and <a class="el" href="structlustre__mdt__attrs.html#a03ad38a2c00c68d8ef439d38cf4eaffa" title="Per-file incompat feature list.">lustre_mdt_attrs::lma_incompat</a>. </p>
<p>Deprecated since HSM and SOM attributes are now stored in separate on-disk xattr. </p>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00180">180</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00180"></a>00180                 {
<a name="l00181"></a>00181         LMAC_HSM        = 0x00000001,
<a name="l00182"></a>00182 <span class="comment">/*      LMAC_SOM        = 0x00000002, obsolete since 2.8.0 */</span>
<a name="l00183"></a>00183         LMAC_NOT_IN_OI  = 0x00000004, <span class="comment">/* the object does NOT need OI mapping */</span>
<a name="l00184"></a>00184         LMAC_FID_ON_OST = 0x00000008, <span class="comment">/* For OST-object, its OI mapping is</span>
<a name="l00185"></a>00185 <span class="comment">                                       * under /O/&lt;seq&gt;/d&lt;x&gt;. */</span>
<a name="l00186"></a>00186 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga5c86b0d816a99aa2ef2c9f6f41d4f893"></a><!-- doxytag: member="lustre_idl.h::lma_incompat" ref="ga5c86b0d816a99aa2ef2c9f6f41d4f893" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lu__fid.html#ga5c86b0d816a99aa2ef2c9f6f41d4f893">lma_incompat</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Masks for all features that should be supported by a Lustre version to access a specific file. </p>
<p>This information is stored in <a class="el" href="structlustre__mdt__attrs.html#a03ad38a2c00c68d8ef439d38cf4eaffa" title="Per-file incompat feature list.">lustre_mdt_attrs::lma_incompat</a>. </p>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00193">193</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00193"></a>00193                   {
<a name="l00194"></a>00194         LMAI_RELEASED           = 0x00000001, <span class="comment">/* file is released */</span>
<a name="l00195"></a>00195         LMAI_AGENT              = 0x00000002, <span class="comment">/* agent inode */</span>
<a name="l00196"></a>00196         LMAI_REMOTE_PARENT      = 0x00000004, <span class="comment">/* the parent of the object</span>
<a name="l00197"></a>00197 <span class="comment">                                                 is on the remote MDT */</span>
<a name="l00198"></a>00198         LMAI_STRIPED            = 0x00000008, <span class="comment">/* striped directory inode */</span>
<a name="l00199"></a>00199         LMAI_ORPHAN             = 0x00000010, <span class="comment">/* inode is orphan */</span>
<a name="l00200"></a>00200         LMA_INCOMPAT_SUPP       = (LMAI_AGENT | LMAI_REMOTE_PARENT | \
<a name="l00201"></a>00201                                    LMAI_STRIPED | LMAI_ORPHAN)
<a name="l00202"></a>00202 };
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga5ca354ba0913bf236001c307b119ef21"></a><!-- doxytag: member="lustre_idl.h::lustre_hsm_swab" ref="ga5ca354ba0913bf236001c307b119ef21" args="(struct hsm_attrs *attrs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_hsm_swab </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhsm__attrs.html">hsm_attrs</a> *&nbsp;</td>
          <td class="paramname"> <em>attrs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Swab, if needed, HSM structure which is stored on-disk in little-endian order. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>attrs</em>&nbsp;</td><td>- is a pointer to the HSM structure to be swabbed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="md__attrs_8c_source.html#l00080">80</a> of file <a class="el" href="md__attrs_8c_source.html">md_attrs.c</a>.</p>

<p>References <a class="el" href="lustre__idl_8h_source.html#l00226">hsm_attrs::hsm_arch_id</a>, <a class="el" href="lustre__idl_8h_source.html#l00228">hsm_attrs::hsm_arch_ver</a>, <a class="el" href="lustre__idl_8h_source.html#l00221">hsm_attrs::hsm_compat</a>, and <a class="el" href="lustre__idl_8h_source.html#l00224">hsm_attrs::hsm_flags</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00081"></a>00081 {
<a name="l00082"></a>00082 <span class="preprocessor">#ifdef __BIG_ENDIAN</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>        __swab32s(&amp;attrs-&gt;<a class="code" href="structhsm__attrs.html#a784c34a6bd2cc72df8b8503f424b0521" title="Bitfield for supported data in this structure.">hsm_compat</a>);
<a name="l00084"></a>00084         __swab32s(&amp;attrs-&gt;<a class="code" href="structhsm__attrs.html#aef839e4efceb4c5950040a81dd1ced4b" title="HSM flags, see hsm_flags enum below.">hsm_flags</a>);
<a name="l00085"></a>00085         __swab64s(&amp;attrs-&gt;<a class="code" href="structhsm__attrs.html#ac16d2ab278b3116decbd9f88f98049cb" title="backend archive id associated with the file">hsm_arch_id</a>);
<a name="l00086"></a>00086         __swab64s(&amp;attrs-&gt;<a class="code" href="structhsm__attrs.html#a24b51da015e8ee16579f7dde21d772e6" title="version associated with the last archiving, if any">hsm_arch_ver</a>);
<a name="l00087"></a>00087 <span class="preprocessor">#endif</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>};
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad6d276486e37db88948da19fc7b6cf89"></a><!-- doxytag: member="lustre_idl.h::lustre_lma_init" ref="gad6d276486e37db88948da19fc7b6cf89" args="(struct lustre_mdt_attrs *lma, const struct lu_fid *fid, __u32 compat, __u32 incompat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_lma_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__mdt__attrs.html">lustre_mdt_attrs</a> *&nbsp;</td>
          <td class="paramname"> <em>lma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structlu__fid.html">lu_fid</a> *&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>compat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u32&nbsp;</td>
          <td class="paramname"> <em>incompat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize new <em>lma</em>. </p>
<p>Only fid is stored.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lma</em>&nbsp;</td><td>- is the new LMA structure to be initialized </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fid</em>&nbsp;</td><td>- is the FID of the object this LMA belongs to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>incompat</em>&nbsp;</td><td>- features that MDS must understand to access object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="md__attrs_8c_source.html#l00044">44</a> of file <a class="el" href="md__attrs_8c_source.html">md_attrs.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00192">lustre_mdt_attrs::lma_compat</a>, <a class="el" href="lustre__user_8h_source.html#l00198">lustre_mdt_attrs::lma_incompat</a>, and <a class="el" href="lustre__user_8h_source.html#l00200">lustre_mdt_attrs::lma_self_fid</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 {
<a name="l00047"></a>00047         lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#aa26d844b21ea7bce00d881a1c62e3b63" title="Bitfield for supported data in this structure.">lma_compat</a>   = compat;
<a name="l00048"></a>00048         lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#a03ad38a2c00c68d8ef439d38cf4eaffa" title="Per-file incompat feature list.">lma_incompat</a> = incompat;
<a name="l00049"></a>00049         lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#ac29b9ec344e2f1a5ec3d9a303057c3f2" title="FID of this inode.">lma_self_fid</a> = *fid;
<a name="l00050"></a>00050 
<a name="l00051"></a>00051         <span class="comment">/* If a field is added in struct lustre_mdt_attrs, zero it explicitly</span>
<a name="l00052"></a>00052 <span class="comment">         * and change the test below. */</span>
<a name="l00053"></a>00053         LASSERT(<span class="keyword">sizeof</span>(*lma) ==
<a name="l00054"></a>00054                 (offsetof(<span class="keyword">struct</span> <a class="code" href="structlustre__mdt__attrs.html" title="Following struct for object attributes, that will be kept inode&amp;#39;s EA.">lustre_mdt_attrs</a>, lma_self_fid) +
<a name="l00055"></a>00055                  <span class="keyword">sizeof</span>(lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#ac29b9ec344e2f1a5ec3d9a303057c3f2" title="FID of this inode.">lma_self_fid</a>)));
<a name="l00056"></a>00056 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga57ce2f0700c0cc37b3d423df0ff5e3aa"></a><!-- doxytag: member="lustre_idl.h::lustre_lma_swab" ref="ga57ce2f0700c0cc37b3d423df0ff5e3aa" args="(struct lustre_mdt_attrs *lma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lustre_lma_swab </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlustre__mdt__attrs.html">lustre_mdt_attrs</a> *&nbsp;</td>
          <td class="paramname"> <em>lma</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Swab, if needed, LMA structure which is stored on-disk in little-endian order. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lma</em>&nbsp;</td><td>- is a pointer to the LMA structure to be swabbed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="md__attrs_8c_source.html#l00064">64</a> of file <a class="el" href="md__attrs_8c_source.html">md_attrs.c</a>.</p>

<p>References <a class="el" href="lustre__user_8h_source.html#l00192">lustre_mdt_attrs::lma_compat</a>, <a class="el" href="lustre__user_8h_source.html#l00198">lustre_mdt_attrs::lma_incompat</a>, and <a class="el" href="lustre__user_8h_source.html#l00200">lustre_mdt_attrs::lma_self_fid</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00065"></a>00065 {
<a name="l00066"></a>00066 <span class="preprocessor">#ifdef __BIG_ENDIAN</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>        __swab32s(&amp;lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#aa26d844b21ea7bce00d881a1c62e3b63" title="Bitfield for supported data in this structure.">lma_compat</a>);
<a name="l00068"></a>00068         __swab32s(&amp;lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#a03ad38a2c00c68d8ef439d38cf4eaffa" title="Per-file incompat feature list.">lma_incompat</a>);
<a name="l00069"></a>00069         lustre_swab_lu_fid(&amp;lma-&gt;<a class="code" href="structlustre__mdt__attrs.html#ac29b9ec344e2f1a5ec3d9a303057c3f2" title="FID of this inode.">lma_self_fid</a>);
<a name="l00070"></a>00070 <span class="preprocessor">#endif</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>};
</pre></div></p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:55:39 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
