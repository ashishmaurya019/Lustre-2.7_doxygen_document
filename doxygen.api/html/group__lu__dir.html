<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Lustre: lu_dir</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body fgcolor="#202020">
<img src="http://wiki.lustre.org/apidoc/header.jpg">
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>lu_dir<br/>
<small>
[<a class="el" href="group__lustreidl.html">lustreidl</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for lu_dir:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__lu__dir.png" border="0" alt="" usemap="#group____lu____dir_map"/>
<map name="group____lu____dir_map" id="group____lu____dir">
<area shape="rect" id="node2" href="group__lustreidl.html" title="Lustre wire protocol definitions." alt="" coords="5,5,80,35"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__dirent.html">lu_dirent</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Layout of readdir pages, as transmitted on wire.  <a href="structlu__dirent.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structluda__type.html">luda_type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fid directory attribute: a fid of an object referenced by the entry.  <a href="structluda__type.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlu__dirpage.html">lu_dirpage</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga680081111faef43e243a37781d0a7404"></a><!-- doxytag: member="lu_dir::LU_DIRENT_ATTRS_MASK" ref="ga680081111faef43e243a37781d0a7404" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LU_DIRENT_ATTRS_MASK</b>&nbsp;&nbsp;&nbsp;0xff00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga396a3df870ba4c0ad044488c8174bc43"></a><!-- doxytag: member="lu_dir::MDS_DIR_END_OFF" ref="ga396a3df870ba4c0ad044488c8174bc43" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MDS_DIR_END_OFF</b>&nbsp;&nbsp;&nbsp;0xfffffffffffffffeULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__dir.html#ga7606e5469f1ecc97b2ef8616d3023fbb">LU_PAGE_SHIFT</a>&nbsp;&nbsp;&nbsp;12</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MDS_READPAGE page size.  <a href="#ga7606e5469f1ecc97b2ef8616d3023fbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga789315660991e121ca57b17c12265cc8"></a><!-- doxytag: member="lu_dir::LU_PAGE_SIZE" ref="ga789315660991e121ca57b17c12265cc8" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LU_PAGE_SIZE</b>&nbsp;&nbsp;&nbsp;(1UL &lt;&lt; LU_PAGE_SHIFT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga73deca52843ae910c4010d5b881ec66c"></a><!-- doxytag: member="lu_dir::LU_PAGE_MASK" ref="ga73deca52843ae910c4010d5b881ec66c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LU_PAGE_MASK</b>&nbsp;&nbsp;&nbsp;(~(LU_PAGE_SIZE - 1))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8e1a5358acbdadf0c2d0c6d4288740f9"></a><!-- doxytag: member="lu_dir::LU_PAGE_COUNT" ref="ga8e1a5358acbdadf0c2d0c6d4288740f9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LU_PAGE_COUNT</b>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; (PAGE_CACHE_SHIFT - LU_PAGE_SHIFT))</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__dir.html#gadf424fa0b5a6cfc7859f55b85f3548aa">lu_dirent_attrs</a> { <br/>
&nbsp;&nbsp;<b>LUDA_FID</b> =  0x0001, 
<b>LUDA_TYPE</b> =  0x0002, 
<b>LUDA_64BITHASH</b> =  0x0004, 
<b>LUDA_UNKNOWN</b> =  0x0400, 
<br/>
&nbsp;&nbsp;<b>LUDA_IGNORE</b> =  0x0800, 
<b>LUDA_UPGRADE</b> =  0x1000, 
<b>LUDA_REPAIR</b> =  0x2000, 
<b>LUDA_VERIFY_DRYRUN</b> =  0x4000, 
<br/>
&nbsp;&nbsp;<b>LUDA_VERIFY</b> =  0x8000
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Enumeration of possible directory entry attributes. </p>
 <a href="group__lu__dir.html#gadf424fa0b5a6cfc7859f55b85f3548aa">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lu__dir.html#ga8e36a5c3ab28f2a81a6a17c6397bffee">lu_dirpage_flags</a> { <a class="el" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6">LDF_EMPTY</a> =  1 &lt;&lt; 0, 
<a class="el" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea2e5d9d6700b40d5386cd4a6597e74ab2">LDF_COLLIDE</a> =  1 &lt;&lt; 1
 }</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga7606e5469f1ecc97b2ef8616d3023fbb"></a><!-- doxytag: member="lustre_idl.h::LU_PAGE_SHIFT" ref="ga7606e5469f1ecc97b2ef8616d3023fbb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LU_PAGE_SHIFT&nbsp;&nbsp;&nbsp;12</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MDS_READPAGE page size. </p>
<p>This is the directory page size packed in MDS_READPAGE RPC. It's different than PAGE_CACHE_SIZE because the client needs to access the struct <a class="el" href="structlu__dirpage.html">lu_dirpage</a> header packed at the beginning of the "page" and without this there isn't any way to know find the <a class="el" href="structlu__dirpage.html">lu_dirpage</a> header is if client and server PAGE_CACHE_SIZE differ. </p>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l01008">1008</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gadf424fa0b5a6cfc7859f55b85f3548aa"></a><!-- doxytag: member="lustre_idl.h::lu_dirent_attrs" ref="gadf424fa0b5a6cfc7859f55b85f3548aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lu__dir.html#gadf424fa0b5a6cfc7859f55b85f3548aa">lu_dirent_attrs</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enumeration of possible directory entry attributes. </p>
<p>Attributes follow directory entry header in the order they appear in this enumeration. </p>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00869">869</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00869"></a>00869                      {
<a name="l00870"></a>00870         LUDA_FID                = 0x0001,
<a name="l00871"></a>00871         LUDA_TYPE               = 0x0002,
<a name="l00872"></a>00872         LUDA_64BITHASH          = 0x0004,
<a name="l00873"></a>00873 
<a name="l00874"></a>00874         <span class="comment">/* The following attrs are used for MDT internal only,</span>
<a name="l00875"></a>00875 <span class="comment">         * not visible to client */</span>
<a name="l00876"></a>00876 
<a name="l00877"></a>00877         <span class="comment">/* Something in the record is unknown, to be verified in further. */</span>
<a name="l00878"></a>00878         LUDA_UNKNOWN            = 0x0400,
<a name="l00879"></a>00879         <span class="comment">/* Ignore this record, go to next directly. */</span>
<a name="l00880"></a>00880         LUDA_IGNORE             = 0x0800,
<a name="l00881"></a>00881         <span class="comment">/* The system is upgraded, has beed or to be repaired (dryrun). */</span>
<a name="l00882"></a>00882         LUDA_UPGRADE            = 0x1000,
<a name="l00883"></a>00883         <span class="comment">/* The dirent has been repaired, or to be repaired (dryrun). */</span>
<a name="l00884"></a>00884         LUDA_REPAIR             = 0x2000,
<a name="l00885"></a>00885         <span class="comment">/* Only check but not repair the dirent inconsistency */</span>
<a name="l00886"></a>00886         LUDA_VERIFY_DRYRUN      = 0x4000,
<a name="l00887"></a>00887         <span class="comment">/* Verify the dirent consistency */</span>
<a name="l00888"></a>00888         LUDA_VERIFY             = 0x8000,
<a name="l00889"></a>00889 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8e36a5c3ab28f2a81a6a17c6397bffee"></a><!-- doxytag: member="lustre_idl.h::lu_dirpage_flags" ref="ga8e36a5c3ab28f2a81a6a17c6397bffee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__lu__dir.html#ga8e36a5c3ab28f2a81a6a17c6397bffee">lu_dirpage_flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6"></a><!-- doxytag: member="LDF_EMPTY" ref="gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6" args="" -->LDF_EMPTY</em>&nbsp;</td><td>
<p>dirpage contains no entry. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga8e36a5c3ab28f2a81a6a17c6397bffeea2e5d9d6700b40d5386cd4a6597e74ab2"></a><!-- doxytag: member="LDF_COLLIDE" ref="gga8e36a5c3ab28f2a81a6a17c6397bffeea2e5d9d6700b40d5386cd4a6597e74ab2" args="" -->LDF_COLLIDE</em>&nbsp;</td><td>
<p>last entry's lde_hash equals ldp_hash_end. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="lustre__idl_8h_source.html#l00952">952</a> of file <a class="el" href="lustre__idl_8h_source.html">lustre_idl.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00952"></a>00952                       {
<a name="l00956"></a>00956         <a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea02f7885580c8a3b030cac3515ff7e3b6" title="dirpage contains no entry.">LDF_EMPTY</a>   = 1 &lt;&lt; 0,
<a name="l00960"></a>00960         <a class="code" href="group__lu__dir.html#gga8e36a5c3ab28f2a81a6a17c6397bffeea2e5d9d6700b40d5386cd4a6597e74ab2" title="last entry&amp;#39;s lde_hash equals ldp_hash_end.">LDF_COLLIDE</a> = 1 &lt;&lt; 1
<a name="l00961"></a>00961 };
</pre></div></p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Sun Jun 5 20:55:39 2016 for Lustre by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.6.1</small></address><br>
<small><a href="http://www.sun.com/contact">Contact</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/index.html">About Sun</a>&nbsp;|&nbsp;<a href="http://www.sun.com/aboutsun/media/index.html">News</a>&nbsp;|&nbsp;<a href="http://www.sun.com/corp_emp/">Employment</a>&nbsp;|&nbsp;<a href="http://www.sun.com/privacy/">Privacy</a>&nbsp;|&nbsp;<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>&nbsp;|&nbsp;<a href="http://www.sun.com/suntrademarks/">Trademarks</a>&nbsp;|&nbsp;(C) 2008 Sun Microsystems, Inc.</small>
</body>
</html>
